var cy=Object.defineProperty;var Zv=_e=>{throw TypeError(_e)};var uy=(_e,_,tt)=>_ in _e?cy(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:tt}):_e[_]=tt;var to=(_e,_,tt)=>uy(_e,typeof _!="symbol"?_+"":_,tt),fm=(_e,_,tt)=>_.has(_e)||Zv("Cannot "+tt);var $t=(_e,_,tt)=>(fm(_e,_,"read from private field"),tt?tt.call(_e):_.get(_e)),nr=(_e,_,tt)=>_.has(_e)?Zv("Cannot add the same private member more than once"):_ instanceof WeakSet?_.add(_e):_.set(_e,tt),rr=(_e,_,tt,nt)=>(fm(_e,_,"write to private field"),nt?nt.call(_e,tt):_.set(_e,tt),tt),zn=(_e,_,tt)=>(fm(_e,_,"access private method"),tt);var Gu=(_e,_,tt,nt)=>({set _(rt){rr(_e,_,rt,tt)},get _(){return $t(_e,_,nt)}});function _mergeNamespaces(_e,_){for(var tt=0;tt<_.length;tt++){const nt=_[tt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const rt in nt)if(rt!=="default"&&!(rt in _e)){const it=Object.getOwnPropertyDescriptor(nt,rt);it&&Object.defineProperty(_e,rt,it.get?it:{enumerable:!0,get:()=>nt[rt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))nt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const st of it.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&nt(st)}).observe(document,{childList:!0,subtree:!0});function tt(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(rt){if(rt.ep)return;rt.ep=!0;const it=tt(rt);fetch(rt.href,it)}})();function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var _=_e.default;if(typeof _=="function"){var tt=function nt(){return this instanceof nt?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};tt.prototype=_.prototype}else tt={};return Object.defineProperty(tt,"__esModule",{value:!0}),Object.keys(_e).forEach(function(nt){var rt=Object.getOwnPropertyDescriptor(_e,nt);Object.defineProperty(tt,nt,rt.get?rt:{enumerable:!0,get:function(){return _e[nt]}})}),tt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(_e,_,tt){this.props=_e,this.context=_,this.refs=D$2,this.updater=tt||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,_){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,_,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$2(_e,_,tt){this.props=_e,this.context=_,this.refs=D$2,this.updater=tt||B$2}var H$3=G$2.prototype=new F$2;H$3.constructor=G$2;C$2(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$4=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$1={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_e,_,tt){var nt,rt={},it=null,st=null;if(_!=null)for(nt in _.ref!==void 0&&(st=_.ref),_.key!==void 0&&(it=""+_.key),_)J$2.call(_,nt)&&!L$3.hasOwnProperty(nt)&&(rt[nt]=_[nt]);var ot=arguments.length-2;if(ot===1)rt.children=tt;else if(1<ot){for(var at=Array(ot),lt=0;lt<ot;lt++)at[lt]=arguments[lt+2];rt.children=at}if(_e&&_e.defaultProps)for(nt in ot=_e.defaultProps,ot)rt[nt]===void 0&&(rt[nt]=ot[nt]);return{$$typeof:l$3,type:_e,key:it,ref:st,props:rt,_owner:K$1.current}}function N$3(_e,_){return{$$typeof:l$3,type:_e.type,key:_,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$2(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$3}function escape$1(_e){var _={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(tt){return _[tt]})}var P$2=/\/+/g;function Q$2(_e,_){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):_.toString(36)}function R$2(_e,_,tt,nt,rt){var it=typeof _e;(it==="undefined"||it==="boolean")&&(_e=null);var st=!1;if(_e===null)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(_e.$$typeof){case l$3:case n$3:st=!0}}if(st)return st=_e,rt=rt(st),_e=nt===""?"."+Q$2(st,0):nt,I$4(rt)?(tt="",_e!=null&&(tt=_e.replace(P$2,"$&/")+"/"),R$2(rt,_,tt,"",function(lt){return lt})):rt!=null&&(O$2(rt)&&(rt=N$3(rt,tt+(!rt.key||st&&st.key===rt.key?"":(""+rt.key).replace(P$2,"$&/")+"/")+_e)),_.push(rt)),1;if(st=0,nt=nt===""?".":nt+":",I$4(_e))for(var ot=0;ot<_e.length;ot++){it=_e[ot];var at=nt+Q$2(it,ot);st+=R$2(it,_,tt,at,rt)}else if(at=A$2(_e),typeof at=="function")for(_e=at.call(_e),ot=0;!(it=_e.next()).done;)it=it.value,at=nt+Q$2(it,ot++),st+=R$2(it,_,tt,at,rt);else if(it==="object")throw _=String(_e),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return st}function S$4(_e,_,tt){if(_e==null)return _e;var nt=[],rt=0;return R$2(_e,nt,"","",function(it){return _.call(tt,it,rt++)}),nt}function T$3(_e){if(_e._status===-1){var _=_e._result;_=_(),_.then(function(tt){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=tt)},function(tt){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=tt)}),_e._status===-1&&(_e._status=0,_e._result=_)}if(_e._status===1)return _e._result.default;throw _e._result}var U$3={current:null},V$4={transition:null},W$2={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(_e,_,tt){S$4(_e,function(){_.apply(this,arguments)},tt)},count:function(_e){var _=0;return S$4(_e,function(){_++}),_},toArray:function(_e){return S$4(_e,function(_){return _})||[]},only:function(_e){if(!O$2(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$1;react_production_min.cloneElement=function(_e,_,tt){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var nt=C$2({},_e.props),rt=_e.key,it=_e.ref,st=_e._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,st=K$1.current),_.key!==void 0&&(rt=""+_.key),_e.type&&_e.type.defaultProps)var ot=_e.type.defaultProps;for(at in _)J$2.call(_,at)&&!L$3.hasOwnProperty(at)&&(nt[at]=_[at]===void 0&&ot!==void 0?ot[at]:_[at])}var at=arguments.length-2;if(at===1)nt.children=tt;else if(1<at){ot=Array(at);for(var lt=0;lt<at;lt++)ot[lt]=arguments[lt+2];nt.children=ot}return{$$typeof:l$3,type:_e.type,key:rt,ref:it,props:nt,_owner:st}};react_production_min.createContext=function(_e){return _e={$$typeof:u$3,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$2,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$3;react_production_min.createFactory=function(_e){var _=M$3.bind(null,_e);return _.type=_e,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$4,render:_e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_e){return{$$typeof:y$3,_payload:{_status:-1,_result:_e},_init:T$3}};react_production_min.memo=function(_e,_){return{$$typeof:x$3,type:_e,compare:_===void 0?null:_}};react_production_min.startTransition=function(_e){var _=V$4.transition;V$4.transition={};try{_e()}finally{V$4.transition=_}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(_e,_){return U$3.current.useCallback(_e,_)};react_production_min.useContext=function(_e){return U$3.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$3.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,_){return U$3.current.useEffect(_e,_)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(_e,_,tt){return U$3.current.useImperativeHandle(_e,_,tt)};react_production_min.useInsertionEffect=function(_e,_){return U$3.current.useInsertionEffect(_e,_)};react_production_min.useLayoutEffect=function(_e,_){return U$3.current.useLayoutEffect(_e,_)};react_production_min.useMemo=function(_e,_){return U$3.current.useMemo(_e,_)};react_production_min.useReducer=function(_e,_,tt){return U$3.current.useReducer(_e,_,tt)};react_production_min.useRef=function(_e){return U$3.current.useRef(_e)};react_production_min.useState=function(_e){return U$3.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,_,tt){return U$3.current.useSyncExternalStore(_e,_,tt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$2(_e,_,tt){var nt,rt={},it=null,st=null;tt!==void 0&&(it=""+tt),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(st=_.ref);for(nt in _)m$4.call(_,nt)&&!p$4.hasOwnProperty(nt)&&(rt[nt]=_[nt]);if(_e&&_e.defaultProps)for(nt in _=_e.defaultProps,_)rt[nt]===void 0&&(rt[nt]=_[nt]);return{$$typeof:k$3,type:_e,key:it,ref:st,props:rt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Ot,kt){var Gt=Ot.length;Ot.push(kt);e:for(;0<Gt;){var zt=Gt-1>>>1,Vt=Ot[zt];if(0<rt(Vt,kt))Ot[zt]=kt,Ot[Gt]=Vt,Gt=zt;else break e}}function tt(Ot){return Ot.length===0?null:Ot[0]}function nt(Ot){if(Ot.length===0)return null;var kt=Ot[0],Gt=Ot.pop();if(Gt!==kt){Ot[0]=Gt;e:for(var zt=0,Vt=Ot.length,Dt=Vt>>>1;zt<Dt;){var It=2*(zt+1)-1,Ut=Ot[It],Yt=It+1,qt=Ot[Yt];if(0>rt(Ut,Gt))Yt<Vt&&0>rt(qt,Ut)?(Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt):(Ot[zt]=Ut,Ot[It]=Gt,zt=It);else if(Yt<Vt&&0>rt(qt,Gt))Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt;else break e}}return kt}function rt(Ot,kt){var Gt=Ot.sortIndex-kt.sortIndex;return Gt!==0?Gt:Ot.id-kt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var st=Date,ot=st.now();_e.unstable_now=function(){return st.now()-ot}}var at=[],lt=[],ct=1,ut=null,dt=3,ht=!1,mt=!1,yt=!1,vt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Ot){for(var kt=tt(lt);kt!==null;){if(kt.callback===null)nt(lt);else if(kt.startTime<=Ot)nt(lt),kt.sortIndex=kt.expirationTime,_(at,kt);else break;kt=tt(lt)}}function St(Ot){if(yt=!1,xt(Ot),!mt)if(tt(at)!==null)mt=!0,Wt(At);else{var kt=tt(lt);kt!==null&&Jt(St,kt.startTime-Ot)}}function At(Ot,kt){mt=!1,yt&&(yt=!1,pt(wt),wt=-1),ht=!0;var Gt=dt;try{for(xt(kt),ut=tt(at);ut!==null&&(!(ut.expirationTime>kt)||Ot&&!Mt());){var zt=ut.callback;if(typeof zt=="function"){ut.callback=null,dt=ut.priorityLevel;var Vt=zt(ut.expirationTime<=kt);kt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(at)&&nt(at),xt(kt)}else nt(at);ut=tt(at)}if(ut!==null)var Dt=!0;else{var It=tt(lt);It!==null&&Jt(St,It.startTime-kt),Dt=!1}return Dt}finally{ut=null,dt=Gt,ht=!1}}var bt=!1,Et=null,wt=-1,Rt=5,Tt=-1;function Mt(){return!(_e.unstable_now()-Tt<Rt)}function Lt(){if(Et!==null){var Ot=_e.unstable_now();Tt=Ot;var kt=!0;try{kt=Et(!0,Ot)}finally{kt?Ft():(bt=!1,Et=null)}}else bt=!1}var Ft;if(typeof _t=="function")Ft=function(){_t(Lt)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,Kt=Ht.port2;Ht.port1.onmessage=Lt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){vt(Lt,0)};function Wt(Ot){Et=Ot,bt||(bt=!0,Ft())}function Jt(Ot,kt){wt=vt(function(){Ot(_e.unstable_now())},kt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Ot){Ot.callback=null},_e.unstable_continueExecution=function(){mt||ht||(mt=!0,Wt(At))},_e.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<Ot?Math.floor(1e3/Ot):5},_e.unstable_getCurrentPriorityLevel=function(){return dt},_e.unstable_getFirstCallbackNode=function(){return tt(at)},_e.unstable_next=function(Ot){switch(dt){case 1:case 2:case 3:var kt=3;break;default:kt=dt}var Gt=dt;dt=kt;try{return Ot()}finally{dt=Gt}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Ot,kt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Gt=dt;dt=Ot;try{return kt()}finally{dt=Gt}},_e.unstable_scheduleCallback=function(Ot,kt,Gt){var zt=_e.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?zt+Gt:zt):Gt=zt,Ot){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=Gt+Vt,Ot={id:ct++,callback:kt,priorityLevel:Ot,startTime:Gt,expirationTime:Vt,sortIndex:-1},Gt>zt?(Ot.sortIndex=Gt,_(lt,Ot),tt(at)===null&&Ot===tt(lt)&&(yt?(pt(wt),wt=-1):yt=!0,Jt(St,Gt-zt))):(Ot.sortIndex=Vt,_(at,Ot),mt||ht||(mt=!0,Wt(At))),Ot},_e.unstable_shouldYield=Mt,_e.unstable_wrapCallback=function(Ot){var kt=dt;return function(){var Gt=dt;dt=kt;try{return Ot.apply(this,arguments)}finally{dt=Gt}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(_e){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+_e,tt=1;tt<arguments.length;tt++)_+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+_e+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,_){ha(_e,_),ha(_e+"Capture",_)}function ha(_e,_){for(ea[_e]=_,_e=0;_e<_.length;_e++)da.add(_[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,_,tt,nt){if(tt!==null&&tt.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return nt?!1:tt!==null?!tt.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,_,tt,nt){if(_===null||typeof _>"u"||pa(_e,_,tt,nt))return!0;if(nt)return!1;if(tt!==null)switch(tt.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$3(_e,_,tt,nt,rt,it,st){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=nt,this.attributeNamespace=rt,this.mustUseProperty=tt,this.propertyName=_e,this.type=_,this.sanitizeURL=it,this.removeEmptyString=st}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$3(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var _=_e[0];z$1[_]=new v$3(_,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$3(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$3(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$3(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$3(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$3(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$3(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$3(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$3(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$3(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,_,tt,nt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:nt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,tt,rt,nt)&&(tt=null),nt||rt===null?oa(_)&&(tt===null?_e.removeAttribute(_):_e.setAttribute(_,""+tt)):rt.mustUseProperty?_e[rt.propertyName]=tt===null?rt.type===3?!1:"":tt:(_=rt.attributeName,nt=rt.attributeNamespace,tt===null?_e.removeAttribute(_):(rt=rt.type,tt=rt===3||rt===4&&tt===!0?"":""+tt,nt?_e.setAttributeNS(nt,_,tt):_e.setAttribute(_,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(tt){var _=tt.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,_){if(!_e||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(lt){var nt=lt}Reflect.construct(_e,[],_)}else{try{_.call()}catch(lt){nt=lt}_e.call(_.prototype)}else{try{throw Error()}catch(lt){nt=lt}_e()}}catch(lt){if(lt&&nt&&typeof lt.stack=="string"){for(var rt=lt.stack.split(`
`),it=nt.stack.split(`
`),st=rt.length-1,ot=it.length-1;1<=st&&0<=ot&&rt[st]!==it[ot];)ot--;for(;1<=st&&0<=ot;st--,ot--)if(rt[st]!==it[ot]){if(st!==1||ot!==1)do if(st--,ot--,0>ot||rt[st]!==it[ot]){var at=`
`+rt[st].replace(" at new "," at ");return _e.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",_e.displayName)),at}while(1<=st&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var _=_e.render;return _e=_e.displayName,_e||(_e=_.displayName||_.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return _=_e.displayName||null,_!==null?_:Qa(_e.type)||"Memo";case Ha:_=_e._payload,_e=_e._init;try{return Qa(_e(_))}catch{}}return null}function Ra(_e){var _=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=_.render,_e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var _=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(_e){var _=Ta(_e)?"checked":"value",tt=Object.getOwnPropertyDescriptor(_e.constructor.prototype,_),nt=""+_e[_];if(!_e.hasOwnProperty(_)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var rt=tt.get,it=tt.set;return Object.defineProperty(_e,_,{configurable:!0,get:function(){return rt.call(this)},set:function(st){nt=""+st,it.call(this,st)}}),Object.defineProperty(_e,_,{enumerable:tt.enumerable}),{getValue:function(){return nt},setValue:function(st){nt=""+st},stopTracking:function(){_e._valueTracker=null,delete _e[_]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var _=_e._valueTracker;if(!_)return!0;var tt=_.getValue(),nt="";return _e&&(nt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=nt,_e!==tt?(_.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,_){var tt=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??_e._wrapperState.initialChecked})}function Za(_e,_){var tt=_.defaultValue==null?"":_.defaultValue,nt=_.checked!=null?_.checked:_.defaultChecked;tt=Sa(_.value!=null?_.value:tt),_e._wrapperState={initialChecked:nt,initialValue:tt,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(_e,_){_=_.checked,_!=null&&ta(_e,"checked",_,!1)}function bb(_e,_){ab(_e,_);var tt=Sa(_.value),nt=_.type;if(tt!=null)nt==="number"?(tt===0&&_e.value===""||_e.value!=tt)&&(_e.value=""+tt):_e.value!==""+tt&&(_e.value=""+tt);else if(nt==="submit"||nt==="reset"){_e.removeAttribute("value");return}_.hasOwnProperty("value")?cb(_e,_.type,tt):_.hasOwnProperty("defaultValue")&&cb(_e,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(_e.defaultChecked=!!_.defaultChecked)}function db(_e,_,tt){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var nt=_.type;if(!(nt!=="submit"&&nt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+_e._wrapperState.initialValue,tt||_===_e.value||(_e.value=_),_e.defaultValue=_}tt=_e.name,tt!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,tt!==""&&(_e.name=tt)}function cb(_e,_,tt){(_!=="number"||Xa(_e.ownerDocument)!==_e)&&(tt==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+tt&&(_e.defaultValue=""+tt))}var eb=Array.isArray;function fb(_e,_,tt,nt){if(_e=_e.options,_){_={};for(var rt=0;rt<tt.length;rt++)_["$"+tt[rt]]=!0;for(tt=0;tt<_e.length;tt++)rt=_.hasOwnProperty("$"+_e[tt].value),_e[tt].selected!==rt&&(_e[tt].selected=rt),rt&&nt&&(_e[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),_=null,rt=0;rt<_e.length;rt++){if(_e[rt].value===tt){_e[rt].selected=!0,nt&&(_e[rt].defaultSelected=!0);return}_!==null||_e[rt].disabled||(_=_e[rt])}_!==null&&(_.selected=!0)}}function gb(_e,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,_){var tt=_.value;if(tt==null){if(tt=_.children,_=_.defaultValue,tt!=null){if(_!=null)throw Error(p$3(92));if(eb(tt)){if(1<tt.length)throw Error(p$3(93));tt=tt[0]}_=tt}_==null&&(_=""),tt=_}_e._wrapperState={initialValue:Sa(tt)}}function ib(_e,_){var tt=Sa(_.value),nt=Sa(_.defaultValue);tt!=null&&(tt=""+tt,tt!==_e.value&&(_e.value=tt),_.defaultValue==null&&_e.defaultValue!==tt&&(_e.defaultValue=tt)),nt!=null&&(_e.defaultValue=""+nt)}function jb(_e){var _=_e.textContent;_===_e._wrapperState.initialValue&&_!==""&&_!==null&&(_e.value=_)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,_){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(_):_e==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,tt,nt,rt){MSApp.execUnsafeLocalFunction(function(){return _e(_,tt,nt,rt)})}:_e}(function(_e,_){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;_.firstChild;)_e.appendChild(_.firstChild)}});function ob(_e,_){if(_){var tt=_e.firstChild;if(tt&&tt===_e.lastChild&&tt.nodeType===3){tt.nodeValue=_;return}}_e.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(_){_=_+_e.charAt(0).toUpperCase()+_e.substring(1),pb[_]=pb[_e]})});function rb(_e,_,tt){return _==null||typeof _=="boolean"||_===""?"":tt||typeof _!="number"||_===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+_).trim():_+"px"}function sb(_e,_){_e=_e.style;for(var tt in _)if(_.hasOwnProperty(tt)){var nt=tt.indexOf("--")===0,rt=rb(tt,_[tt],nt);tt==="float"&&(tt="cssFloat"),nt?_e.setProperty(tt,rt):_e[tt]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,_){if(_){if(tb[_e]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$3(137,_e));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$3(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$3(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$3(62))}}function vb(_e,_){if(_e.indexOf("-")===-1)return typeof _.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$3(280));var _=_e.stateNode;_&&(_=Db(_),yb(_e.stateNode,_e.type,_))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,_=Ab;if(Ab=zb=null,Bb(_e),_)for(_e=0;_e<_.length;_e++)Bb(_[_e])}}function Gb(_e,_){return _e(_)}function Hb(){}var Ib=!1;function Jb(_e,_,tt){if(Ib)return _e(_,tt);Ib=!0;try{return Gb(_e,_,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,_){var tt=_e.stateNode;if(tt===null)return null;var nt=Db(tt);if(nt===null)return null;tt=nt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(_e=_e.type,nt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!nt;break e;default:_e=!1}if(_e)return null;if(tt&&typeof tt!="function")throw Error(p$3(231,_,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,_,tt,nt,rt,it,st,ot,at){var lt=Array.prototype.slice.call(arguments,3);try{_.apply(tt,lt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,_,tt,nt,rt,it,st,ot,at){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,_,tt,nt,rt,it,st,ot,at){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=lt)}}function Vb(_e){var _=_e,tt=_e;if(_e.alternate)for(;_.return;)_=_.return;else{_e=_;do _=_e,_.flags&4098&&(tt=_.return),_e=_.return;while(_e)}return _.tag===3?tt:null}function Wb(_e){if(_e.tag===13){var _=_e.memoizedState;if(_===null&&(_e=_e.alternate,_e!==null&&(_=_e.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$3(188))}function Yb(_e){var _=_e.alternate;if(!_){if(_=Vb(_e),_===null)throw Error(p$3(188));return _!==_e?null:_e}for(var tt=_e,nt=_;;){var rt=tt.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(nt=rt.return,nt!==null){tt=nt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===tt)return Xb(rt),_e;if(it===nt)return Xb(rt),_;it=it.sibling}throw Error(p$3(188))}if(tt.return!==nt.return)tt=rt,nt=it;else{for(var st=!1,ot=rt.child;ot;){if(ot===tt){st=!0,tt=rt,nt=it;break}if(ot===nt){st=!0,nt=rt,tt=it;break}ot=ot.sibling}if(!st){for(ot=it.child;ot;){if(ot===tt){st=!0,tt=it,nt=rt;break}if(ot===nt){st=!0,nt=it,tt=rt;break}ot=ot.sibling}if(!st)throw Error(p$3(189))}}if(tt.alternate!==nt)throw Error(p$3(190))}if(tt.tag!==3)throw Error(p$3(188));return tt.stateNode.current===tt?_e:_}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var _=$b(_e);if(_!==null)return _;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,_){var tt=_e.pendingLanes;if(tt===0)return 0;var nt=0,rt=_e.suspendedLanes,it=_e.pingedLanes,st=tt&268435455;if(st!==0){var ot=st&~rt;ot!==0?nt=tc(ot):(it&=st,it!==0&&(nt=tc(it)))}else st=tt&~rt,st!==0?nt=tc(st):it!==0&&(nt=tc(it));if(nt===0)return 0;if(_!==0&&_!==nt&&!(_&rt)&&(rt=nt&-nt,it=_&-_,rt>=it||rt===16&&(it&4194240)!==0))return _;if(nt&4&&(nt|=tt&16),_=_e.entangledLanes,_!==0)for(_e=_e.entanglements,_&=nt;0<_;)tt=31-oc(_),rt=1<<tt,nt|=_e[tt],_&=~rt;return nt}function vc(_e,_){switch(_e){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,_){for(var tt=_e.suspendedLanes,nt=_e.pingedLanes,rt=_e.expirationTimes,it=_e.pendingLanes;0<it;){var st=31-oc(it),ot=1<<st,at=rt[st];at===-1?(!(ot&tt)||ot&nt)&&(rt[st]=vc(ot,_)):at<=_&&(_e.expiredLanes|=ot),it&=~ot}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var _=[],tt=0;31>tt;tt++)_.push(_e);return _}function Ac(_e,_,tt){_e.pendingLanes|=_,_!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,_=31-oc(_),_e[_]=tt}function Bc(_e,_){var tt=_e.pendingLanes&~_;_e.pendingLanes=_,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=_,_e.mutableReadLanes&=_,_e.entangledLanes&=_,_=_e.entanglements;var nt=_e.eventTimes;for(_e=_e.expirationTimes;0<tt;){var rt=31-oc(tt),it=1<<rt;_[rt]=0,nt[rt]=-1,_e[rt]=-1,tt&=~it}}function Cc(_e,_){var tt=_e.entangledLanes|=_;for(_e=_e.entanglements;tt;){var nt=31-oc(tt),rt=1<<nt;rt&_|_e[nt]&_&&(_e[nt]|=_),tt&=~rt}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,_){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(_e,_,tt,nt,rt,it){return _e===null||_e.nativeEvent!==it?(_e={blockedOn:_,domEventName:tt,eventSystemFlags:nt,nativeEvent:it,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),_e):(_e.eventSystemFlags|=nt,_=_e.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),_e)}function Uc(_e,_,tt,nt,rt){switch(_){case"focusin":return Lc=Tc(Lc,_e,_,tt,nt,rt),!0;case"dragenter":return Mc=Tc(Mc,_e,_,tt,nt,rt),!0;case"mouseover":return Nc=Tc(Nc,_e,_,tt,nt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,_e,_,tt,nt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,_e,_,tt,nt,rt)),!0}return!1}function Vc(_e){var _=Wc(_e.target);if(_!==null){var tt=Vb(_);if(tt!==null){if(_=tt.tag,_===13){if(_=Wb(tt),_!==null){_e.blockedOn=_,Ic(_e.priority,function(){Gc(tt)});return}}else if(_===3&&tt.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var _=_e.targetContainers;0<_.length;){var tt=Yc(_e.domEventName,_e.eventSystemFlags,_[0],_e.nativeEvent);if(tt===null){tt=_e.nativeEvent;var nt=new tt.constructor(tt.type,tt);wb=nt,tt.target.dispatchEvent(nt),wb=null}else return _=Cb(tt),_!==null&&Fc(_),_e.blockedOn=tt,!1;_.shift()}return!0}function Zc(_e,_,tt){Xc(_e)&&tt.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,_){_e.blockedOn===_&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function _(rt){return ad(rt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var tt=1;tt<Kc.length;tt++){var nt=Kc[tt];nt.blockedOn===_e&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(_),Pc.forEach(_),tt=0;tt<Qc.length;tt++)nt=Qc[tt],nt.blockedOn===_e&&(nt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,_,tt,nt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=1,fd$1(_e,_,tt,nt)}finally{C$1=rt,cd.transition=it}}function gd(_e,_,tt,nt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=4,fd$1(_e,_,tt,nt)}finally{C$1=rt,cd.transition=it}}function fd$1(_e,_,tt,nt){if(dd){var rt=Yc(_e,_,tt,nt);if(rt===null)hd(_e,_,nt,id$2,tt),Sc(_e,nt);else if(Uc(rt,_e,_,tt,nt))nt.stopPropagation();else if(Sc(_e,nt),_&4&&-1<Rc.indexOf(_e)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(_e,_,tt,nt),it===null&&hd(_e,_,nt,id$2,tt),it===rt)break;rt=it}rt!==null&&nt.stopPropagation()}else hd(_e,_,nt,null,tt)}}var id$2=null;function Yc(_e,_,tt,nt){if(id$2=null,_e=xb(nt),_e=Wc(_e),_e!==null)if(_=Vb(_e),_===null)_e=null;else if(tt=_.tag,tt===13){if(_e=Wb(_),_e!==null)return _e;_e=null}else if(tt===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;_e=null}else _!==_e&&(_e=null);return id$2=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,_=ld,tt=_.length,nt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(_e=0;_e<tt&&_[_e]===rt[_e];_e++);var st=tt-_e;for(nt=1;nt<=st&&_[tt-nt]===rt[it-nt];nt++);return md=rt.slice(_e,1<nt?1-nt:void 0)}function od(_e){var _=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&_===13&&(_e=13)):_e=_,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function _(tt,nt,rt,it,st){this._reactName=tt,this._targetInst=rt,this.type=nt,this.nativeEvent=it,this.target=st,this.currentTarget=null;for(var ot in _e)_e.hasOwnProperty(ot)&&(tt=_e[ot],this[ot]=tt?tt(it):it[ot]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(_e):(_e=Od[_e])?!!_[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var _=Md[_e.key]||_e.key;if(_!=="Unidentified")return _}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=" ",fe=!1;function ge(_e,_){switch(_e){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,_){switch(_e){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee$1);case"textInput":return _e=_.data,_e===ee$1&&fe?null:_e;default:return null}}function ke(_e,_){if(ie)return _e==="compositionend"||!ae&&ge(_e,_)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _==="input"?!!le[_e.type]:_==="textarea"}function ne(_e,_,tt,nt){Eb(nt),_=oe(_,"onChange"),0<_.length&&(tt=new td$1("onChange","change",null,tt,nt),_e.push({event:tt,listeners:_}))}var pe=null,qe=null;function re$1(_e){se(_e,0)}function te(_e){var _=ue(_e);if(Wa(_))return _e}function ve(_e,_){if(_e==="change")return _}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,_e,xb(_e)),Jb(re$1,_)}}function Ce$1(_e,_,tt){_e==="focusin"?(Ae(),pe=_,qe=tt,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,_){if(_e==="click")return te(_)}function Fe(_e,_){if(_e==="input"||_e==="change")return te(_)}function Ge(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,_){if(He(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;var tt=Object.keys(_e),nt=Object.keys(_);if(tt.length!==nt.length)return!1;for(nt=0;nt<tt.length;nt++){var rt=tt[nt];if(!ja.call(_,rt)||!He(_e[rt],_[rt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,_){var tt=Je(_e);_e=0;for(var nt;tt;){if(tt.nodeType===3){if(nt=_e+tt.textContent.length,_e<=_&&nt>=_)return{node:tt,offset:_-_e};_e=nt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(_e,_){return _e&&_?_e===_?!0:_e&&_e.nodeType===3?!1:_&&_.nodeType===3?Le(_e,_.parentNode):"contains"in _e?_e.contains(_):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(_)&16):!1:!1}function Me$1(){for(var _e=window,_=Xa();_ instanceof _e.HTMLIFrameElement;){try{var tt=typeof _.contentWindow.location.href=="string"}catch{tt=!1}if(tt)_e=_.contentWindow;else break;_=Xa(_e.document)}return _}function Ne$1(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _&&(_==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||_==="textarea"||_e.contentEditable==="true")}function Oe(_e){var _=Me$1(),tt=_e.focusedElem,nt=_e.selectionRange;if(_!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(nt!==null&&Ne$1(tt)){if(_=nt.start,_e=nt.end,_e===void 0&&(_e=_),"selectionStart"in tt)tt.selectionStart=_,tt.selectionEnd=Math.min(_e,tt.value.length);else if(_e=(_=tt.ownerDocument||document)&&_.defaultView||window,_e.getSelection){_e=_e.getSelection();var rt=tt.textContent.length,it=Math.min(nt.start,rt);nt=nt.end===void 0?it:Math.min(nt.end,rt),!_e.extend&&it>nt&&(rt=nt,nt=it,it=rt),rt=Ke(tt,it);var st=Ke(tt,nt);rt&&st&&(_e.rangeCount!==1||_e.anchorNode!==rt.node||_e.anchorOffset!==rt.offset||_e.focusNode!==st.node||_e.focusOffset!==st.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),_e.removeAllRanges(),it>nt?(_e.addRange(_),_e.extend(st.node,st.offset)):(_.setEnd(st.node,st.offset),_e.addRange(_)))}}for(_=[],_e=tt;_e=_e.parentNode;)_e.nodeType===1&&_.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<_.length;tt++)_e=_[tt],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,_,tt){var nt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne$1(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(_=new td$1("onSelect","select",null,_,tt),_e.push({event:_,listeners:nt}),_.target=Qe)))}function Ve(_e,_){var tt={};return tt[_e.toLowerCase()]=_.toLowerCase(),tt["Webkit"+_e]="webkit"+_,tt["Moz"+_e]="moz"+_,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var _=We[_e],tt;for(tt in _)if(_.hasOwnProperty(tt)&&tt in Ye)return Xe[_e]=_[tt];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,_){df.set(_e,_),fa(_,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,_,tt){var nt=_e.type||"unknown-event";_e.currentTarget=tt,Ub(nt,_,void 0,_e),_e.currentTarget=null}function se(_e,_){_=(_&4)!==0;for(var tt=0;tt<_e.length;tt++){var nt=_e[tt],rt=nt.event;nt=nt.listeners;e:{var it=void 0;if(_)for(var st=nt.length-1;0<=st;st--){var ot=nt[st],at=ot.instance,lt=ot.currentTarget;if(ot=ot.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,ot,lt),it=at}else for(st=0;st<nt.length;st++){if(ot=nt[st],at=ot.instance,lt=ot.currentTarget,ot=ot.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,ot,lt),it=at}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$1(_e,_){var tt=_[of];tt===void 0&&(tt=_[of]=new Set);var nt=_e+"__bubble";tt.has(nt)||(pf(_,_e,2,!1),tt.add(nt))}function qf(_e,_,tt){var nt=0;_&&(nt|=4),pf(tt,_e,nt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,_e),qf(tt,!0,_e))});var _=_e.nodeType===9?_e:_e.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(_e,_,tt,nt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd$1}tt=rt.bind(null,_,tt,_e),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),nt?rt!==void 0?_e.addEventListener(_,tt,{capture:!0,passive:rt}):_e.addEventListener(_,tt,!0):rt!==void 0?_e.addEventListener(_,tt,{passive:rt}):_e.addEventListener(_,tt,!1)}function hd(_e,_,tt,nt,rt){var it=nt;if(!(_&1)&&!(_&2)&&nt!==null)e:for(;;){if(nt===null)return;var st=nt.tag;if(st===3||st===4){var ot=nt.stateNode.containerInfo;if(ot===rt||ot.nodeType===8&&ot.parentNode===rt)break;if(st===4)for(st=nt.return;st!==null;){var at=st.tag;if((at===3||at===4)&&(at=st.stateNode.containerInfo,at===rt||at.nodeType===8&&at.parentNode===rt))return;st=st.return}for(;ot!==null;){if(st=Wc(ot),st===null)return;if(at=st.tag,at===5||at===6){nt=it=st;continue e}ot=ot.parentNode}}nt=nt.return}Jb(function(){var lt=it,ct=xb(tt),ut=[];e:{var dt=df.get(_e);if(dt!==void 0){var ht=td$1,mt=_e;switch(_e){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":ht=Rd;break;case"focusin":mt="focus",ht=Fd;break;case"focusout":mt="blur",ht=Fd;break;case"beforeblur":case"afterblur":ht=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Vd;break;case $e:case af:case bf:ht=Hd;break;case cf:ht=Xd;break;case"scroll":ht=vd;break;case"wheel":ht=Zd;break;case"copy":case"cut":case"paste":ht=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Td}var yt=(_&4)!==0,vt=!yt&&_e==="scroll",pt=yt?dt!==null?dt+"Capture":null:dt;yt=[];for(var _t=lt,xt;_t!==null;){xt=_t;var St=xt.stateNode;if(xt.tag===5&&St!==null&&(xt=St,pt!==null&&(St=Kb(_t,pt),St!=null&&yt.push(tf(_t,St,xt)))),vt)break;_t=_t.return}0<yt.length&&(dt=new ht(dt,mt,null,tt,ct),ut.push({event:dt,listeners:yt}))}}if(!(_&7)){e:{if(dt=_e==="mouseover"||_e==="pointerover",ht=_e==="mouseout"||_e==="pointerout",dt&&tt!==wb&&(mt=tt.relatedTarget||tt.fromElement)&&(Wc(mt)||mt[uf]))break e;if((ht||dt)&&(dt=ct.window===ct?ct:(dt=ct.ownerDocument)?dt.defaultView||dt.parentWindow:window,ht?(mt=tt.relatedTarget||tt.toElement,ht=lt,mt=mt?Wc(mt):null,mt!==null&&(vt=Vb(mt),mt!==vt||mt.tag!==5&&mt.tag!==6)&&(mt=null)):(ht=null,mt=lt),ht!==mt)){if(yt=Bd,St="onMouseLeave",pt="onMouseEnter",_t="mouse",(_e==="pointerout"||_e==="pointerover")&&(yt=Td,St="onPointerLeave",pt="onPointerEnter",_t="pointer"),vt=ht==null?dt:ue(ht),xt=mt==null?dt:ue(mt),dt=new yt(St,_t+"leave",ht,tt,ct),dt.target=vt,dt.relatedTarget=xt,St=null,Wc(ct)===lt&&(yt=new yt(pt,_t+"enter",mt,tt,ct),yt.target=xt,yt.relatedTarget=vt,St=yt),vt=St,ht&&mt)t:{for(yt=ht,pt=mt,_t=0,xt=yt;xt;xt=vf(xt))_t++;for(xt=0,St=pt;St;St=vf(St))xt++;for(;0<_t-xt;)yt=vf(yt),_t--;for(;0<xt-_t;)pt=vf(pt),xt--;for(;_t--;){if(yt===pt||pt!==null&&yt===pt.alternate)break t;yt=vf(yt),pt=vf(pt)}yt=null}else yt=null;ht!==null&&wf(ut,dt,ht,yt,!1),mt!==null&&vt!==null&&wf(ut,vt,mt,yt,!0)}}e:{if(dt=lt?ue(lt):window,ht=dt.nodeName&&dt.nodeName.toLowerCase(),ht==="select"||ht==="input"&&dt.type==="file")var At=ve;else if(me(dt))if(we)At=Fe;else{At=De;var bt=Ce$1}else(ht=dt.nodeName)&&ht.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(At=Ee);if(At&&(At=At(_e,lt))){ne(ut,At,tt,ct);break e}bt&&bt(_e,dt,lt),_e==="focusout"&&(bt=dt._wrapperState)&&bt.controlled&&dt.type==="number"&&cb(dt,"number",dt.value)}switch(bt=lt?ue(lt):window,_e){case"focusin":(me(bt)||bt.contentEditable==="true")&&(Qe=bt,Re=lt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,tt,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,tt,ct)}var Et;if(ae)e:{switch(_e){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else ie?ge(_e,tt)&&(wt="onCompositionEnd"):_e==="keydown"&&tt.keyCode===229&&(wt="onCompositionStart");wt&&(de&&tt.locale!=="ko"&&(ie||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&ie&&(Et=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),bt=oe(lt,wt),0<bt.length&&(wt=new Ld(wt,_e,null,tt,ct),ut.push({event:wt,listeners:bt}),Et?wt.data=Et:(Et=he(tt),Et!==null&&(wt.data=Et)))),(Et=ce?je(_e,tt):ke(_e,tt))&&(lt=oe(lt,"onBeforeInput"),0<lt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,tt,ct),ut.push({event:ct,listeners:lt}),ct.data=Et))}se(ut,_)})}function tf(_e,_,tt){return{instance:_e,listener:_,currentTarget:tt}}function oe(_e,_){for(var tt=_+"Capture",nt=[];_e!==null;){var rt=_e,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(_e,tt),it!=null&&nt.unshift(tf(_e,it,rt)),it=Kb(_e,_),it!=null&&nt.push(tf(_e,it,rt))),_e=_e.return}return nt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,_,tt,nt,rt){for(var it=_._reactName,st=[];tt!==null&&tt!==nt;){var ot=tt,at=ot.alternate,lt=ot.stateNode;if(at!==null&&at===nt)break;ot.tag===5&&lt!==null&&(ot=lt,rt?(at=Kb(tt,it),at!=null&&st.unshift(tf(tt,at,ot))):rt||(at=Kb(tt,it),at!=null&&st.push(tf(tt,at,ot)))),tt=tt.return}st.length!==0&&_e.push({event:_,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,_,tt){if(_=zf(_),zf(_e)!==_&&tt)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,_){return _e==="textarea"||_e==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,_){var tt=_,nt=0;do{var rt=tt.nextSibling;if(_e.removeChild(tt),rt&&rt.nodeType===8)if(tt=rt.data,tt==="/$"){if(nt===0){_e.removeChild(rt),bd(_);return}nt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||nt++;tt=rt}while(tt);bd(_)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var _=_e.nodeType;if(_===1||_===3)break;if(_===8){if(_=_e.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var _=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(_===0)return _e;_--}else tt==="/$"&&_++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var _=_e[Of];if(_)return _;for(var tt=_e.parentNode;tt;){if(_=tt[uf]||tt[Of]){if(tt=_.alternate,_.child!==null||tt!==null&&tt.child!==null)for(_e=Mf(_e);_e!==null;){if(tt=_e[Of])return tt;_e=Mf(_e)}return _}_e=tt,tt=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$3(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(_e,_){Tf++,Sf[Tf]=_e.current,_e.current=_}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,_){var tt=_e.type.contextTypes;if(!tt)return Vf;var nt=_e.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===_)return nt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in tt)rt[it]=_[it];return nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=_,_e.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$2)}function ag(_e,_,tt){if(H$2.current!==Vf)throw Error(p$3(168));G$1(H$2,_),G$1(Wf,tt)}function bg(_e,_,tt){var nt=_e.stateNode;if(_=_.childContextTypes,typeof nt.getChildContext!="function")return tt;nt=nt.getChildContext();for(var rt in nt)if(!(rt in _))throw Error(p$3(108,Ra(_e)||"Unknown",rt));return A$1({},tt,nt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$1(H$2,_e),G$1(Wf,Wf.current),!0}function dg(_e,_,tt){var nt=_e.stateNode;if(!nt)throw Error(p$3(169));tt?(_e=bg(_e,_,Xf),nt.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$2),G$1(H$2,_e)):E$1(Wf),G$1(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,_=C$1;try{var tt=eg;for(C$1=1;_e<tt.length;_e++){var nt=tt[_e];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),rt}finally{C$1=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,_){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=_}function ug(_e,_,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var nt=rg;_e=sg;var rt=32-oc(nt)-1;nt&=~(1<<rt),tt+=1;var it=32-oc(_)+rt;if(30<it){var st=rt-rt%5;it=(nt&(1<<st)-1).toString(32),nt>>=st,rt-=st,rg=1<<32-oc(_)+rt|tt<<rt|nt,sg=it+_e}else rg=1<<it|tt<<rt|nt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(_e,_){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=_,tt.return=_e,_=_e.deletions,_===null?(_e.deletions=[tt],_e.flags|=16):_.push(tt)}function Cg(_e,_){switch(_e.tag){case 5:var tt=_e.type;return _=_.nodeType!==1||tt.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=Lf(_.firstChild),!0):!1;case 6:return _=_e.pendingProps===""||_.nodeType!==3?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:_,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=_,tt.return=_e,_e.child=tt,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$3){var _=yg;if(_){var tt=_;if(!Cg(_e,_)){if(Dg(_e))throw Error(p$3(418));_=Lf(tt.nextSibling);var nt=xg;_&&Cg(_e,_)?Ag(nt,tt):(_e.flags=_e.flags&-4097|2,I$3=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$3(418));_e.flags=_e.flags&-4097|2,I$3=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$3)return Fg(_e),I$3=!0,!1;var _;if((_=_e.tag!==3)&&!(_=_e.tag!==5)&&(_=_e.type,_=_!=="head"&&_!=="body"&&!Ef(_e.type,_e.memoizedProps)),_&&(_=yg)){if(Dg(_e))throw Hg(),Error(p$3(418));for(;_;)Ag(_e,_),_=Lf(_.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$3(317));e:{for(_e=_e.nextSibling,_=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="/$"){if(_===0){yg=Lf(_e.nextSibling);break e}_--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||_++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,_,tt){if(_e=tt.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$3(309));var nt=tt.stateNode}if(!nt)throw Error(p$3(147,_e));var rt=nt,it=""+_e;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(st){var ot=rt.refs;st===null?delete ot[it]:ot[it]=st},_._stringRef=it,_)}if(typeof _e!="string")throw Error(p$3(284));if(!tt._owner)throw Error(p$3(290,_e))}return _e}function Mg(_e,_){throw _e=Object.prototype.toString.call(_),Error(p$3(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e))}function Ng(_e){var _=_e._init;return _(_e._payload)}function Og(_e){function _(pt,_t){if(_e){var xt=pt.deletions;xt===null?(pt.deletions=[_t],pt.flags|=16):xt.push(_t)}}function tt(pt,_t){if(!_e)return null;for(;_t!==null;)_(pt,_t),_t=_t.sibling;return null}function nt(pt,_t){for(pt=new Map;_t!==null;)_t.key!==null?pt.set(_t.key,_t):pt.set(_t.index,_t),_t=_t.sibling;return pt}function rt(pt,_t){return pt=Pg(pt,_t),pt.index=0,pt.sibling=null,pt}function it(pt,_t,xt){return pt.index=xt,_e?(xt=pt.alternate,xt!==null?(xt=xt.index,xt<_t?(pt.flags|=2,_t):xt):(pt.flags|=2,_t)):(pt.flags|=1048576,_t)}function st(pt){return _e&&pt.alternate===null&&(pt.flags|=2),pt}function ot(pt,_t,xt,St){return _t===null||_t.tag!==6?(_t=Qg(xt,pt.mode,St),_t.return=pt,_t):(_t=rt(_t,xt),_t.return=pt,_t)}function at(pt,_t,xt,St){var At=xt.type;return At===ya?ct(pt,_t,xt.props.children,St,xt.key):_t!==null&&(_t.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&Ng(At)===_t.type)?(St=rt(_t,xt.props),St.ref=Lg(pt,_t,xt),St.return=pt,St):(St=Rg(xt.type,xt.key,xt.props,null,pt.mode,St),St.ref=Lg(pt,_t,xt),St.return=pt,St)}function lt(pt,_t,xt,St){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==xt.containerInfo||_t.stateNode.implementation!==xt.implementation?(_t=Sg(xt,pt.mode,St),_t.return=pt,_t):(_t=rt(_t,xt.children||[]),_t.return=pt,_t)}function ct(pt,_t,xt,St,At){return _t===null||_t.tag!==7?(_t=Tg(xt,pt.mode,St,At),_t.return=pt,_t):(_t=rt(_t,xt),_t.return=pt,_t)}function ut(pt,_t,xt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _t=Qg(""+_t,pt.mode,xt),_t.return=pt,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return xt=Rg(_t.type,_t.key,_t.props,null,pt.mode,xt),xt.ref=Lg(pt,null,_t),xt.return=pt,xt;case wa:return _t=Sg(_t,pt.mode,xt),_t.return=pt,_t;case Ha:var St=_t._init;return ut(pt,St(_t._payload),xt)}if(eb(_t)||Ka(_t))return _t=Tg(_t,pt.mode,xt,null),_t.return=pt,_t;Mg(pt,_t)}return null}function dt(pt,_t,xt,St){var At=_t!==null?_t.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return At!==null?null:ot(pt,_t,""+xt,St);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===At?at(pt,_t,xt,St):null;case wa:return xt.key===At?lt(pt,_t,xt,St):null;case Ha:return At=xt._init,dt(pt,_t,At(xt._payload),St)}if(eb(xt)||Ka(xt))return At!==null?null:ct(pt,_t,xt,St,null);Mg(pt,xt)}return null}function ht(pt,_t,xt,St,At){if(typeof St=="string"&&St!==""||typeof St=="number")return pt=pt.get(xt)||null,ot(_t,pt,""+St,At);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return pt=pt.get(St.key===null?xt:St.key)||null,at(_t,pt,St,At);case wa:return pt=pt.get(St.key===null?xt:St.key)||null,lt(_t,pt,St,At);case Ha:var bt=St._init;return ht(pt,_t,xt,bt(St._payload),At)}if(eb(St)||Ka(St))return pt=pt.get(xt)||null,ct(_t,pt,St,At,null);Mg(_t,St)}return null}function mt(pt,_t,xt,St){for(var At=null,bt=null,Et=_t,wt=_t=0,Rt=null;Et!==null&&wt<xt.length;wt++){Et.index>wt?(Rt=Et,Et=null):Rt=Et.sibling;var Tt=dt(pt,Et,xt[wt],St);if(Tt===null){Et===null&&(Et=Rt);break}_e&&Et&&Tt.alternate===null&&_(pt,Et),_t=it(Tt,_t,wt),bt===null?At=Tt:bt.sibling=Tt,bt=Tt,Et=Rt}if(wt===xt.length)return tt(pt,Et),I$3&&tg(pt,wt),At;if(Et===null){for(;wt<xt.length;wt++)Et=ut(pt,xt[wt],St),Et!==null&&(_t=it(Et,_t,wt),bt===null?At=Et:bt.sibling=Et,bt=Et);return I$3&&tg(pt,wt),At}for(Et=nt(pt,Et);wt<xt.length;wt++)Rt=ht(Et,pt,wt,xt[wt],St),Rt!==null&&(_e&&Rt.alternate!==null&&Et.delete(Rt.key===null?wt:Rt.key),_t=it(Rt,_t,wt),bt===null?At=Rt:bt.sibling=Rt,bt=Rt);return _e&&Et.forEach(function(Mt){return _(pt,Mt)}),I$3&&tg(pt,wt),At}function yt(pt,_t,xt,St){var At=Ka(xt);if(typeof At!="function")throw Error(p$3(150));if(xt=At.call(xt),xt==null)throw Error(p$3(151));for(var bt=At=null,Et=_t,wt=_t=0,Rt=null,Tt=xt.next();Et!==null&&!Tt.done;wt++,Tt=xt.next()){Et.index>wt?(Rt=Et,Et=null):Rt=Et.sibling;var Mt=dt(pt,Et,Tt.value,St);if(Mt===null){Et===null&&(Et=Rt);break}_e&&Et&&Mt.alternate===null&&_(pt,Et),_t=it(Mt,_t,wt),bt===null?At=Mt:bt.sibling=Mt,bt=Mt,Et=Rt}if(Tt.done)return tt(pt,Et),I$3&&tg(pt,wt),At;if(Et===null){for(;!Tt.done;wt++,Tt=xt.next())Tt=ut(pt,Tt.value,St),Tt!==null&&(_t=it(Tt,_t,wt),bt===null?At=Tt:bt.sibling=Tt,bt=Tt);return I$3&&tg(pt,wt),At}for(Et=nt(pt,Et);!Tt.done;wt++,Tt=xt.next())Tt=ht(Et,pt,wt,Tt.value,St),Tt!==null&&(_e&&Tt.alternate!==null&&Et.delete(Tt.key===null?wt:Tt.key),_t=it(Tt,_t,wt),bt===null?At=Tt:bt.sibling=Tt,bt=Tt);return _e&&Et.forEach(function(Lt){return _(pt,Lt)}),I$3&&tg(pt,wt),At}function vt(pt,_t,xt,St){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var At=xt.key,bt=_t;bt!==null;){if(bt.key===At){if(At=xt.type,At===ya){if(bt.tag===7){tt(pt,bt.sibling),_t=rt(bt,xt.props.children),_t.return=pt,pt=_t;break e}}else if(bt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&Ng(At)===bt.type){tt(pt,bt.sibling),_t=rt(bt,xt.props),_t.ref=Lg(pt,bt,xt),_t.return=pt,pt=_t;break e}tt(pt,bt);break}else _(pt,bt);bt=bt.sibling}xt.type===ya?(_t=Tg(xt.props.children,pt.mode,St,xt.key),_t.return=pt,pt=_t):(St=Rg(xt.type,xt.key,xt.props,null,pt.mode,St),St.ref=Lg(pt,_t,xt),St.return=pt,pt=St)}return st(pt);case wa:e:{for(bt=xt.key;_t!==null;){if(_t.key===bt)if(_t.tag===4&&_t.stateNode.containerInfo===xt.containerInfo&&_t.stateNode.implementation===xt.implementation){tt(pt,_t.sibling),_t=rt(_t,xt.children||[]),_t.return=pt,pt=_t;break e}else{tt(pt,_t);break}else _(pt,_t);_t=_t.sibling}_t=Sg(xt,pt.mode,St),_t.return=pt,pt=_t}return st(pt);case Ha:return bt=xt._init,vt(pt,_t,bt(xt._payload),St)}if(eb(xt))return mt(pt,_t,xt,St);if(Ka(xt))return yt(pt,_t,xt,St);Mg(pt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,_t!==null&&_t.tag===6?(tt(pt,_t.sibling),_t=rt(_t,xt),_t.return=pt,pt=_t):(tt(pt,_t),_t=Qg(xt,pt.mode,St),_t.return=pt,pt=_t),st(pt)):tt(pt,_t)}return vt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var _=Wg.current;E$1(Wg),_e._currentValue=_}function bh(_e,_,tt){for(;_e!==null;){var nt=_e.alternate;if((_e.childLanes&_)!==_?(_e.childLanes|=_,nt!==null&&(nt.childLanes|=_)):nt!==null&&(nt.childLanes&_)!==_&&(nt.childLanes|=_),_e===tt)break;_e=_e.return}}function ch(_e,_){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&_&&(dh=!0),_e.firstContext=null)}function eh(_e){var _=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:_,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return _}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,_,tt,nt){var rt=_.interleaved;return rt===null?(tt.next=tt,gh(_)):(tt.next=rt.next,rt.next=tt),_.interleaved=tt,ih(_e,nt)}function ih(_e,_){_e.lanes|=_;var tt=_e.alternate;for(tt!==null&&(tt.lanes|=_),tt=_e,_e=_e.return;_e!==null;)_e.childLanes|=_,tt=_e.alternate,tt!==null&&(tt.childLanes|=_),tt=_e,_e=_e.return;return tt.tag===3?tt.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,_){_e=_e.updateQueue,_.updateQueue===_e&&(_.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,_){return{eventTime:_e,lane:_,tag:0,payload:null,callback:null,next:null}}function nh(_e,_,tt){var nt=_e.updateQueue;if(nt===null)return null;if(nt=nt.shared,K&2){var rt=nt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),nt.pending=_,ih(_e,tt)}return rt=nt.interleaved,rt===null?(_.next=_,gh(nt)):(_.next=rt.next,rt.next=_),nt.interleaved=_,ih(_e,tt)}function oh(_e,_,tt){if(_=_.updateQueue,_!==null&&(_=_.shared,(tt&4194240)!==0)){var nt=_.lanes;nt&=_e.pendingLanes,tt|=nt,_.lanes=tt,Cc(_e,tt)}}function ph(_e,_){var tt=_e.updateQueue,nt=_e.alternate;if(nt!==null&&(nt=nt.updateQueue,tt===nt)){var rt=null,it=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var st={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};it===null?rt=it=st:it=it.next=st,tt=tt.next}while(tt!==null);it===null?rt=it=_:it=it.next=_}else rt=it=_;tt={baseState:nt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},_e.updateQueue=tt;return}_e=tt.lastBaseUpdate,_e===null?tt.firstBaseUpdate=_:_e.next=_,tt.lastBaseUpdate=_}function qh(_e,_,tt,nt){var rt=_e.updateQueue;jh=!1;var it=rt.firstBaseUpdate,st=rt.lastBaseUpdate,ot=rt.shared.pending;if(ot!==null){rt.shared.pending=null;var at=ot,lt=at.next;at.next=null,st===null?it=lt:st.next=lt,st=at;var ct=_e.alternate;ct!==null&&(ct=ct.updateQueue,ot=ct.lastBaseUpdate,ot!==st&&(ot===null?ct.firstBaseUpdate=lt:ot.next=lt,ct.lastBaseUpdate=at))}if(it!==null){var ut=rt.baseState;st=0,ct=lt=at=null,ot=it;do{var dt=ot.lane,ht=ot.eventTime;if((nt&dt)===dt){ct!==null&&(ct=ct.next={eventTime:ht,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var mt=_e,yt=ot;switch(dt=_,ht=tt,yt.tag){case 1:if(mt=yt.payload,typeof mt=="function"){ut=mt.call(ht,ut,dt);break e}ut=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=yt.payload,dt=typeof mt=="function"?mt.call(ht,ut,dt):mt,dt==null)break e;ut=A$1({},ut,dt);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&(_e.flags|=64,dt=rt.effects,dt===null?rt.effects=[ot]:dt.push(ot))}else ht={eventTime:ht,lane:dt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},ct===null?(lt=ct=ht,at=ut):ct=ct.next=ht,st|=dt;if(ot=ot.next,ot===null){if(ot=rt.shared.pending,ot===null)break;dt=ot,ot=dt.next,dt.next=null,rt.lastBaseUpdate=dt,rt.shared.pending=null}}while(!0);if(ct===null&&(at=ut),rt.baseState=at,rt.firstBaseUpdate=lt,rt.lastBaseUpdate=ct,_=rt.shared.interleaved,_!==null){rt=_;do st|=rt.lane,rt=rt.next;while(rt!==_)}else it===null&&(rt.shared.lanes=0);rh|=st,_e.lanes=st,_e.memoizedState=ut}}function sh(_e,_,tt){if(_e=_.effects,_.effects=null,_e!==null)for(_=0;_<_e.length;_++){var nt=_e[_],rt=nt.callback;if(rt!==null){if(nt.callback=null,nt=tt,typeof rt!="function")throw Error(p$3(191,rt));rt.call(nt)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$3(174));return _e}function yh(_e,_){switch(G$1(wh,_),G$1(vh$1,_e),G$1(uh,th),_e=_.nodeType,_e){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:_e=_e===8?_.parentNode:_,_=_e.namespaceURI||null,_e=_e.tagName,_=lb(_,_e)}E$1(uh),G$1(uh,_)}function zh(){E$1(uh),E$1(vh$1),E$1(wh)}function Ah(_e){xh(wh.current);var _=xh(uh.current),tt=lb(_,_e.type);_!==tt&&(G$1(vh$1,_e),G$1(uh,tt))}function Bh(_e){vh$1.current===_e&&(E$1(uh),E$1(vh$1))}var L$2=Uf(0);function Ch(_e){for(var _=_e;_!==null;){if(_.tag===13){var tt=_.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$2=null,N$2=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$3(321))}function Mh(_e,_){if(_===null)return!1;for(var tt=0;tt<_.length&&tt<_e.length;tt++)if(!He(_e[tt],_[tt]))return!1;return!0}function Nh(_e,_,tt,nt,rt,it){if(Hh=it,M$2=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=tt(nt,rt),Jh){it=0;do{if(Jh=!1,Kh=0,25<=it)throw Error(p$3(301));it+=1,O$1=N$2=null,_.updateQueue=null,Fh.current=Qh,_e=tt(nt,rt)}while(Jh)}if(Fh.current=Rh,_=N$2!==null&&N$2.next!==null,Hh=0,O$1=N$2=M$2=null,Ih=!1,_)throw Error(p$3(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$2.memoizedState=O$1=_e:O$1=O$1.next=_e,O$1}function Uh(){if(N$2===null){var _e=M$2.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$2.next;var _=O$1===null?M$2.memoizedState:O$1.next;if(_!==null)O$1=_,N$2=_e;else{if(_e===null)throw Error(p$3(310));N$2=_e,_e={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$1===null?M$2.memoizedState=O$1=_e:O$1=O$1.next=_e}return O$1}function Vh(_e,_){return typeof _=="function"?_(_e):_}function Wh(_e){var _=Uh(),tt=_.queue;if(tt===null)throw Error(p$3(311));tt.lastRenderedReducer=_e;var nt=N$2,rt=nt.baseQueue,it=tt.pending;if(it!==null){if(rt!==null){var st=rt.next;rt.next=it.next,it.next=st}nt.baseQueue=rt=it,tt.pending=null}if(rt!==null){it=rt.next,nt=nt.baseState;var ot=st=null,at=null,lt=it;do{var ct=lt.lane;if((Hh&ct)===ct)at!==null&&(at=at.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),nt=lt.hasEagerState?lt.eagerState:_e(nt,lt.action);else{var ut={lane:ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};at===null?(ot=at=ut,st=nt):at=at.next=ut,M$2.lanes|=ct,rh|=ct}lt=lt.next}while(lt!==null&&lt!==it);at===null?st=nt:at.next=ot,He(nt,_.memoizedState)||(dh=!0),_.memoizedState=nt,_.baseState=st,_.baseQueue=at,tt.lastRenderedState=nt}if(_e=tt.interleaved,_e!==null){rt=_e;do it=rt.lane,M$2.lanes|=it,rh|=it,rt=rt.next;while(rt!==_e)}else rt===null&&(tt.lanes=0);return[_.memoizedState,tt.dispatch]}function Xh(_e){var _=Uh(),tt=_.queue;if(tt===null)throw Error(p$3(311));tt.lastRenderedReducer=_e;var nt=tt.dispatch,rt=tt.pending,it=_.memoizedState;if(rt!==null){tt.pending=null;var st=rt=rt.next;do it=_e(it,st.action),st=st.next;while(st!==rt);He(it,_.memoizedState)||(dh=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),tt.lastRenderedState=it}return[it,nt]}function Yh(){}function Zh(_e,_){var tt=M$2,nt=Uh(),rt=_(),it=!He(nt.memoizedState,rt);if(it&&(nt.memoizedState=rt,dh=!0),nt=nt.queue,$h(ai.bind(null,tt,nt,_e),[_e]),nt.getSnapshot!==_||it||O$1!==null&&O$1.memoizedState.tag&1){if(tt.flags|=2048,bi(9,ci.bind(null,tt,nt,rt,_),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(tt,_,rt)}return rt}function di(_e,_,tt){_e.flags|=16384,_e={getSnapshot:_,value:tt},_=M$2.updateQueue,_===null?(_={lastEffect:null,stores:null},M$2.updateQueue=_,_.stores=[_e]):(tt=_.stores,tt===null?_.stores=[_e]:tt.push(_e))}function ci(_e,_,tt,nt){_.value=tt,_.getSnapshot=nt,ei(_)&&fi(_e)}function ai(_e,_,tt){return tt(function(){ei(_)&&fi(_e)})}function ei(_e){var _=_e.getSnapshot;_e=_e.value;try{var tt=_();return!He(_e,tt)}catch{return!0}}function fi(_e){var _=ih(_e,1);_!==null&&gi(_,_e,1,-1)}function hi(_e){var _=Th();return typeof _e=="function"&&(_e=_e()),_.memoizedState=_.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},_.queue=_e,_e=_e.dispatch=ii.bind(null,M$2,_e),[_.memoizedState,_e]}function bi(_e,_,tt,nt){return _e={tag:_e,create:_,destroy:tt,deps:nt,next:null},_=M$2.updateQueue,_===null?(_={lastEffect:null,stores:null},M$2.updateQueue=_,_.lastEffect=_e.next=_e):(tt=_.lastEffect,tt===null?_.lastEffect=_e.next=_e:(nt=tt.next,tt.next=_e,_e.next=nt,_.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,_,tt,nt){var rt=Th();M$2.flags|=_e,rt.memoizedState=bi(1|_,tt,void 0,nt===void 0?null:nt)}function li(_e,_,tt,nt){var rt=Uh();nt=nt===void 0?null:nt;var it=void 0;if(N$2!==null){var st=N$2.memoizedState;if(it=st.destroy,nt!==null&&Mh(nt,st.deps)){rt.memoizedState=bi(_,tt,it,nt);return}}M$2.flags|=_e,rt.memoizedState=bi(1|_,tt,it,nt)}function mi(_e,_){return ki(8390656,8,_e,_)}function $h(_e,_){return li(2048,8,_e,_)}function ni(_e,_){return li(4,2,_e,_)}function oi(_e,_){return li(4,4,_e,_)}function pi(_e,_){if(typeof _=="function")return _e=_e(),_(_e),function(){_(null)};if(_!=null)return _e=_e(),_.current=_e,function(){_.current=null}}function qi(_e,_,tt){return tt=tt!=null?tt.concat([_e]):null,li(4,4,pi.bind(null,_,_e),tt)}function ri(){}function si(_e,_){var tt=Uh();_=_===void 0?null:_;var nt=tt.memoizedState;return nt!==null&&_!==null&&Mh(_,nt[1])?nt[0]:(tt.memoizedState=[_e,_],_e)}function ti(_e,_){var tt=Uh();_=_===void 0?null:_;var nt=tt.memoizedState;return nt!==null&&_!==null&&Mh(_,nt[1])?nt[0]:(_e=_e(),tt.memoizedState=[_e,_],_e)}function ui(_e,_,tt){return Hh&21?(He(tt,_)||(tt=yc(),M$2.lanes|=tt,rh|=tt,_e.baseState=!0),_):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=tt)}function vi(_e,_){var tt=C$1;C$1=tt!==0&&4>tt?tt:4,_e(!0);var nt=Gh.transition;Gh.transition={};try{_e(!1),_()}finally{C$1=tt,Gh.transition=nt}}function wi(){return Uh().memoizedState}function xi(_e,_,tt){var nt=yi(_e);if(tt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(_,tt);else if(tt=hh(_e,_,tt,nt),tt!==null){var rt=R$1();gi(tt,_e,nt,rt),Bi(tt,_,nt)}}function ii(_e,_,tt){var nt=yi(_e),rt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(_,rt);else{var it=_e.alternate;if(_e.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var st=_.lastRenderedState,ot=it(st,tt);if(rt.hasEagerState=!0,rt.eagerState=ot,He(ot,st)){var at=_.interleaved;at===null?(rt.next=rt,gh(_)):(rt.next=at.next,at.next=rt),_.interleaved=rt;return}}catch{}finally{}tt=hh(_e,_,rt,nt),tt!==null&&(rt=R$1(),gi(tt,_e,nt,rt),Bi(tt,_,nt))}}function zi(_e){var _=_e.alternate;return _e===M$2||_!==null&&_===M$2}function Ai(_e,_){Jh=Ih=!0;var tt=_e.pending;tt===null?_.next=_:(_.next=tt.next,tt.next=_),_e.pending=_}function Bi(_e,_,tt){if(tt&4194240){var nt=_.lanes;nt&=_e.pendingLanes,tt|=nt,_.lanes=tt,Cc(_e,tt)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,_){return Th().memoizedState=[_e,_===void 0?null:_],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,_,tt){return tt=tt!=null?tt.concat([_e]):null,ki(4194308,4,pi.bind(null,_,_e),tt)},useLayoutEffect:function(_e,_){return ki(4194308,4,_e,_)},useInsertionEffect:function(_e,_){return ki(4,2,_e,_)},useMemo:function(_e,_){var tt=Th();return _=_===void 0?null:_,_e=_e(),tt.memoizedState=[_e,_],_e},useReducer:function(_e,_,tt){var nt=Th();return _=tt!==void 0?tt(_):_,nt.memoizedState=nt.baseState=_,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:_},nt.queue=_e,_e=_e.dispatch=xi.bind(null,M$2,_e),[nt.memoizedState,_e]},useRef:function(_e){var _=Th();return _e={current:_e},_.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),_=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[_,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,_,tt){var nt=M$2,rt=Th();if(I$3){if(tt===void 0)throw Error(p$3(407));tt=tt()}else{if(tt=_(),Q$1===null)throw Error(p$3(349));Hh&30||di(nt,_,tt)}rt.memoizedState=tt;var it={value:tt,getSnapshot:_};return rt.queue=it,mi(ai.bind(null,nt,it,_e),[_e]),nt.flags|=2048,bi(9,ci.bind(null,nt,it,tt,_),void 0,null),tt},useId:function(){var _e=Th(),_=Q$1.identifierPrefix;if(I$3){var tt=sg,nt=rg;tt=(nt&~(1<<32-oc(nt)-1)).toString(32)+tt,_=":"+_+"R"+tt,tt=Kh++,0<tt&&(_+="H"+tt.toString(32)),_+=":"}else tt=Lh++,_=":"+_+"r"+tt.toString(32)+":";return _e.memoizedState=_},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return ui(_,N$2.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return N$2===null?_.memoizedState=_e:ui(_,N$2.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,_){if(_e&&_e.defaultProps){_=A$1({},_),_e=_e.defaultProps;for(var tt in _e)_[tt]===void 0&&(_[tt]=_e[tt]);return _}return _}function Di(_e,_,tt,nt){_=_e.memoizedState,tt=tt(nt,_),tt=tt==null?_:A$1({},_,tt),_e.memoizedState=tt,_e.lanes===0&&(_e.updateQueue.baseState=tt)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,_,tt){_e=_e._reactInternals;var nt=R$1(),rt=yi(_e),it=mh(nt,rt);it.payload=_,tt!=null&&(it.callback=tt),_=nh(_e,it,rt),_!==null&&(gi(_,_e,rt,nt),oh(_,_e,rt))},enqueueReplaceState:function(_e,_,tt){_e=_e._reactInternals;var nt=R$1(),rt=yi(_e),it=mh(nt,rt);it.tag=1,it.payload=_,tt!=null&&(it.callback=tt),_=nh(_e,it,rt),_!==null&&(gi(_,_e,rt,nt),oh(_,_e,rt))},enqueueForceUpdate:function(_e,_){_e=_e._reactInternals;var tt=R$1(),nt=yi(_e),rt=mh(tt,nt);rt.tag=2,_!=null&&(rt.callback=_),_=nh(_e,rt,nt),_!==null&&(gi(_,_e,nt,tt),oh(_,_e,nt))}};function Fi(_e,_,tt,nt,rt,it,st){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(nt,it,st):_.prototype&&_.prototype.isPureReactComponent?!Ie(tt,nt)||!Ie(rt,it):!0}function Gi(_e,_,tt){var nt=!1,rt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=eh(it):(rt=Zf(_)?Xf:H$2.current,nt=_.contextTypes,it=(nt=nt!=null)?Yf(_e,rt):Vf),_=new _(tt,it),_e.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ei,_e.stateNode=_,_._reactInternals=_e,nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=rt,_e.__reactInternalMemoizedMaskedChildContext=it),_}function Hi(_e,_,tt,nt){_e=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(tt,nt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(tt,nt),_.state!==_e&&Ei.enqueueReplaceState(_,_.state,null)}function Ii(_e,_,tt,nt){var rt=_e.stateNode;rt.props=tt,rt.state=_e.memoizedState,rt.refs={},kh(_e);var it=_.contextType;typeof it=="object"&&it!==null?rt.context=eh(it):(it=Zf(_)?Xf:H$2.current,rt.context=Yf(_e,it)),rt.state=_e.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(Di(_e,_,it,tt),rt.state=_e.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&Ei.enqueueReplaceState(rt,rt.state,null),qh(_e,tt,rt,nt),rt.state=_e.memoizedState),typeof rt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,_){try{var tt="",nt=_;do tt+=Pa(nt),nt=nt.return;while(nt);var rt=tt}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:_e,source:_,stack:rt,digest:null}}function Ki(_e,_,tt){return{value:_e,source:null,stack:tt??null,digest:_??null}}function Li(_e,_){try{console.error(_.value)}catch(tt){setTimeout(function(){throw tt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,_,tt){tt=mh(-1,tt),tt.tag=3,tt.payload={element:null};var nt=_.value;return tt.callback=function(){Oi||(Oi=!0,Pi=nt),Li(_e,_)},tt}function Qi(_e,_,tt){tt=mh(-1,tt),tt.tag=3;var nt=_e.type.getDerivedStateFromError;if(typeof nt=="function"){var rt=_.value;tt.payload=function(){return nt(rt)},tt.callback=function(){Li(_e,_)}}var it=_e.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(tt.callback=function(){Li(_e,_),typeof nt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var st=_.stack;this.componentDidCatch(_.value,{componentStack:st!==null?st:""})}),tt}function Si(_e,_,tt){var nt=_e.pingCache;if(nt===null){nt=_e.pingCache=new Mi;var rt=new Set;nt.set(_,rt)}else rt=nt.get(_),rt===void 0&&(rt=new Set,nt.set(_,rt));rt.has(tt)||(rt.add(tt),_e=Ti.bind(null,_e,_,tt),_.then(_e,_e))}function Ui(_e){do{var _;if((_=_e.tag===13)&&(_=_e.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,_,tt,nt,rt){return _e.mode&1?(_e.flags|=65536,_e.lanes=rt,_e):(_e===_?_e.flags|=65536:(_e.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(_=mh(-1,1),_.tag=2,nh(tt,_,1))),tt.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,_,tt,nt){_.child=_e===null?Vg(_,null,tt,nt):Ug(_,_e.child,tt,nt)}function Yi(_e,_,tt,nt,rt){tt=tt.render;var it=_.ref;return ch(_,rt),nt=Nh(_e,_,tt,nt,it,rt),tt=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I$3&&tt&&vg(_),_.flags|=1,Xi(_e,_,nt,rt),_.child)}function $i(_e,_,tt,nt,rt){if(_e===null){var it=tt.type;return typeof it=="function"&&!aj(it)&&it.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(_.tag=15,_.type=it,bj(_e,_,it,nt,rt)):(_e=Rg(tt.type,null,nt,_,_.mode,rt),_e.ref=_.ref,_e.return=_,_.child=_e)}if(it=_e.child,!(_e.lanes&rt)){var st=it.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie,tt(st,nt)&&_e.ref===_.ref)return Zi(_e,_,rt)}return _.flags|=1,_e=Pg(it,nt),_e.ref=_.ref,_e.return=_,_.child=_e}function bj(_e,_,tt,nt,rt){if(_e!==null){var it=_e.memoizedProps;if(Ie(it,nt)&&_e.ref===_.ref)if(dh=!1,_.pendingProps=nt=it,(_e.lanes&rt)!==0)_e.flags&131072&&(dh=!0);else return _.lanes=_e.lanes,Zi(_e,_,rt)}return cj(_e,_,tt,nt,rt)}function dj(_e,_,tt){var nt=_.pendingProps,rt=nt.children,it=_e!==null?_e.memoizedState:null;if(nt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=tt;else{if(!(tt&1073741824))return _e=it!==null?it.baseLanes|tt:tt,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:_e,cachePool:null,transitions:null},_.updateQueue=null,G$1(ej,fj),fj|=_e,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:tt,G$1(ej,fj),fj|=nt}else it!==null?(nt=it.baseLanes|tt,_.memoizedState=null):nt=tt,G$1(ej,fj),fj|=nt;return Xi(_e,_,rt,tt),_.child}function gj(_e,_){var tt=_.ref;(_e===null&&tt!==null||_e!==null&&_e.ref!==tt)&&(_.flags|=512,_.flags|=2097152)}function cj(_e,_,tt,nt,rt){var it=Zf(tt)?Xf:H$2.current;return it=Yf(_,it),ch(_,rt),tt=Nh(_e,_,tt,nt,it,rt),nt=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I$3&&nt&&vg(_),_.flags|=1,Xi(_e,_,tt,rt),_.child)}function hj(_e,_,tt,nt,rt){if(Zf(tt)){var it=!0;cg(_)}else it=!1;if(ch(_,rt),_.stateNode===null)ij(_e,_),Gi(_,tt,nt),Ii(_,tt,nt,rt),nt=!0;else if(_e===null){var st=_.stateNode,ot=_.memoizedProps;st.props=ot;var at=st.context,lt=tt.contextType;typeof lt=="object"&&lt!==null?lt=eh(lt):(lt=Zf(tt)?Xf:H$2.current,lt=Yf(_,lt));var ct=tt.getDerivedStateFromProps,ut=typeof ct=="function"||typeof st.getSnapshotBeforeUpdate=="function";ut||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(ot!==nt||at!==lt)&&Hi(_,st,nt,lt),jh=!1;var dt=_.memoizedState;st.state=dt,qh(_,nt,st,rt),at=_.memoizedState,ot!==nt||dt!==at||Wf.current||jh?(typeof ct=="function"&&(Di(_,tt,ct,nt),at=_.memoizedState),(ot=jh||Fi(_,tt,ot,nt,dt,at,lt))?(ut||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(_.flags|=4194308)):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=nt,_.memoizedState=at),st.props=nt,st.state=at,st.context=lt,nt=ot):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),nt=!1)}else{st=_.stateNode,lh(_e,_),ot=_.memoizedProps,lt=_.type===_.elementType?ot:Ci(_.type,ot),st.props=lt,ut=_.pendingProps,dt=st.context,at=tt.contextType,typeof at=="object"&&at!==null?at=eh(at):(at=Zf(tt)?Xf:H$2.current,at=Yf(_,at));var ht=tt.getDerivedStateFromProps;(ct=typeof ht=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(ot!==ut||dt!==at)&&Hi(_,st,nt,at),jh=!1,dt=_.memoizedState,st.state=dt,qh(_,nt,st,rt);var mt=_.memoizedState;ot!==ut||dt!==mt||Wf.current||jh?(typeof ht=="function"&&(Di(_,tt,ht,nt),mt=_.memoizedState),(lt=jh||Fi(_,tt,lt,nt,dt,mt,at)||!1)?(ct||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(nt,mt,at),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(nt,mt,at)),typeof st.componentDidUpdate=="function"&&(_.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof st.componentDidUpdate!="function"||ot===_e.memoizedProps&&dt===_e.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&dt===_e.memoizedState||(_.flags|=1024),_.memoizedProps=nt,_.memoizedState=mt),st.props=nt,st.state=mt,st.context=at,nt=lt):(typeof st.componentDidUpdate!="function"||ot===_e.memoizedProps&&dt===_e.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&dt===_e.memoizedState||(_.flags|=1024),nt=!1)}return jj(_e,_,tt,nt,it,rt)}function jj(_e,_,tt,nt,rt,it){gj(_e,_);var st=(_.flags&128)!==0;if(!nt&&!st)return rt&&dg(_,tt,!1),Zi(_e,_,it);nt=_.stateNode,Wi.current=_;var ot=st&&typeof tt.getDerivedStateFromError!="function"?null:nt.render();return _.flags|=1,_e!==null&&st?(_.child=Ug(_,_e.child,null,it),_.child=Ug(_,null,ot,it)):Xi(_e,_,ot,it),_.memoizedState=nt.state,rt&&dg(_,tt,!0),_.child}function kj(_e){var _=_e.stateNode;_.pendingContext?ag(_e,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(_e,_.context,!1),yh(_e,_.containerInfo)}function lj(_e,_,tt,nt,rt){return Ig(),Jg(rt),_.flags|=256,Xi(_e,_,tt,nt),_.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,_,tt){var nt=_.pendingProps,rt=L$2.current,it=!1,st=(_.flags&128)!==0,ot;if((ot=st)||(ot=_e!==null&&_e.memoizedState===null?!1:(rt&2)!==0),ot?(it=!0,_.flags&=-129):(_e===null||_e.memoizedState!==null)&&(rt|=1),G$1(L$2,rt&1),_e===null)return Eg(_),_e=_.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(_.mode&1?_e.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(st=nt.children,_e=nt.fallback,it?(nt=_.mode,it=_.child,st={mode:"hidden",children:st},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=st):it=pj(st,nt,0,null),_e=Tg(_e,nt,tt,null),it.return=_,_e.return=_,it.sibling=_e,_.child=it,_.child.memoizedState=nj(tt),_.memoizedState=mj,_e):qj(_,st));if(rt=_e.memoizedState,rt!==null&&(ot=rt.dehydrated,ot!==null))return rj(_e,_,st,nt,ot,rt,tt);if(it){it=nt.fallback,st=_.mode,rt=_e.child,ot=rt.sibling;var at={mode:"hidden",children:nt.children};return!(st&1)&&_.child!==rt?(nt=_.child,nt.childLanes=0,nt.pendingProps=at,_.deletions=null):(nt=Pg(rt,at),nt.subtreeFlags=rt.subtreeFlags&14680064),ot!==null?it=Pg(ot,it):(it=Tg(it,st,tt,null),it.flags|=2),it.return=_,nt.return=_,nt.sibling=it,_.child=nt,nt=it,it=_.child,st=_e.child.memoizedState,st=st===null?nj(tt):{baseLanes:st.baseLanes|tt,cachePool:null,transitions:st.transitions},it.memoizedState=st,it.childLanes=_e.childLanes&~tt,_.memoizedState=mj,nt}return it=_e.child,_e=it.sibling,nt=Pg(it,{mode:"visible",children:nt.children}),!(_.mode&1)&&(nt.lanes=tt),nt.return=_,nt.sibling=null,_e!==null&&(tt=_.deletions,tt===null?(_.deletions=[_e],_.flags|=16):tt.push(_e)),_.child=nt,_.memoizedState=null,nt}function qj(_e,_){return _=pj({mode:"visible",children:_},_e.mode,0,null),_.return=_e,_e.child=_}function sj(_e,_,tt,nt){return nt!==null&&Jg(nt),Ug(_,_e.child,null,tt),_e=qj(_,_.pendingProps.children),_e.flags|=2,_.memoizedState=null,_e}function rj(_e,_,tt,nt,rt,it,st){if(tt)return _.flags&256?(_.flags&=-257,nt=Ki(Error(p$3(422))),sj(_e,_,st,nt)):_.memoizedState!==null?(_.child=_e.child,_.flags|=128,null):(it=nt.fallback,rt=_.mode,nt=pj({mode:"visible",children:nt.children},rt,0,null),it=Tg(it,rt,st,null),it.flags|=2,nt.return=_,it.return=_,nt.sibling=it,_.child=nt,_.mode&1&&Ug(_,_e.child,null,st),_.child.memoizedState=nj(st),_.memoizedState=mj,it);if(!(_.mode&1))return sj(_e,_,st,null);if(rt.data==="$!"){if(nt=rt.nextSibling&&rt.nextSibling.dataset,nt)var ot=nt.dgst;return nt=ot,it=Error(p$3(419)),nt=Ki(it,nt,void 0),sj(_e,_,st,nt)}if(ot=(st&_e.childLanes)!==0,dh||ot){if(nt=Q$1,nt!==null){switch(st&-st){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(nt.suspendedLanes|st)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,ih(_e,rt),gi(nt,_e,rt,-1))}return tj(),nt=Ki(Error(p$3(421))),sj(_e,_,st,nt)}return rt.data==="$?"?(_.flags|=128,_.child=_e.child,_=uj.bind(null,_e),rt._reactRetry=_,null):(_e=it.treeContext,yg=Lf(rt.nextSibling),xg=_,I$3=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=_),_=qj(_,nt.children),_.flags|=4096,_)}function vj(_e,_,tt){_e.lanes|=_;var nt=_e.alternate;nt!==null&&(nt.lanes|=_),bh(_e.return,_,tt)}function wj(_e,_,tt,nt,rt){var it=_e.memoizedState;it===null?_e.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:nt,tail:tt,tailMode:rt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=tt,it.tailMode=rt)}function xj(_e,_,tt){var nt=_.pendingProps,rt=nt.revealOrder,it=nt.tail;if(Xi(_e,_,nt.children,tt),nt=L$2.current,nt&2)nt=nt&1|2,_.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=_.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,tt,_);else if(_e.tag===19)vj(_e,tt,_);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}nt&=1}if(G$1(L$2,nt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(tt=_.child,rt=null;tt!==null;)_e=tt.alternate,_e!==null&&Ch(_e)===null&&(rt=tt),tt=tt.sibling;tt=rt,tt===null?(rt=_.child,_.child=null):(rt=tt.sibling,tt.sibling=null),wj(_,!1,rt,tt,it);break;case"backwards":for(tt=null,rt=_.child,_.child=null;rt!==null;){if(_e=rt.alternate,_e!==null&&Ch(_e)===null){_.child=rt;break}_e=rt.sibling,rt.sibling=tt,tt=rt,rt=_e}wj(_,!0,tt,null,it);break;case"together":wj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function ij(_e,_){!(_.mode&1)&&_e!==null&&(_e.alternate=null,_.alternate=null,_.flags|=2)}function Zi(_e,_,tt){if(_e!==null&&(_.dependencies=_e.dependencies),rh|=_.lanes,!(tt&_.childLanes))return null;if(_e!==null&&_.child!==_e.child)throw Error(p$3(153));if(_.child!==null){for(_e=_.child,tt=Pg(_e,_e.pendingProps),_.child=tt,tt.return=_;_e.sibling!==null;)_e=_e.sibling,tt=tt.sibling=Pg(_e,_e.pendingProps),tt.return=_;tt.sibling=null}return _.child}function yj(_e,_,tt){switch(_.tag){case 3:kj(_),Ig();break;case 5:Ah(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:yh(_,_.stateNode.containerInfo);break;case 10:var nt=_.type._context,rt=_.memoizedProps.value;G$1(Wg,nt._currentValue),nt._currentValue=rt;break;case 13:if(nt=_.memoizedState,nt!==null)return nt.dehydrated!==null?(G$1(L$2,L$2.current&1),_.flags|=128,null):tt&_.child.childLanes?oj(_e,_,tt):(G$1(L$2,L$2.current&1),_e=Zi(_e,_,tt),_e!==null?_e.sibling:null);G$1(L$2,L$2.current&1);break;case 19:if(nt=(tt&_.childLanes)!==0,_e.flags&128){if(nt)return xj(_e,_,tt);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G$1(L$2,L$2.current),nt)break;return null;case 22:case 23:return _.lanes=0,dj(_e,_,tt)}return Zi(_e,_,tt)}var zj,Aj,Bj,Cj;zj=function(_e,_){for(var tt=_.child;tt!==null;){if(tt.tag===5||tt.tag===6)_e.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===_)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Aj=function(){};Bj=function(_e,_,tt,nt){var rt=_e.memoizedProps;if(rt!==nt){_e=_.stateNode,xh(uh.current);var it=null;switch(tt){case"input":rt=Ya(_e,rt),nt=Ya(_e,nt),it=[];break;case"select":rt=A$1({},rt,{value:void 0}),nt=A$1({},nt,{value:void 0}),it=[];break;case"textarea":rt=gb(_e,rt),nt=gb(_e,nt),it=[];break;default:typeof rt.onClick!="function"&&typeof nt.onClick=="function"&&(_e.onclick=Bf)}ub(tt,nt);var st;tt=null;for(lt in rt)if(!nt.hasOwnProperty(lt)&&rt.hasOwnProperty(lt)&&rt[lt]!=null)if(lt==="style"){var ot=rt[lt];for(st in ot)ot.hasOwnProperty(st)&&(tt||(tt={}),tt[st]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?it||(it=[]):(it=it||[]).push(lt,null));for(lt in nt){var at=nt[lt];if(ot=rt!=null?rt[lt]:void 0,nt.hasOwnProperty(lt)&&at!==ot&&(at!=null||ot!=null))if(lt==="style")if(ot){for(st in ot)!ot.hasOwnProperty(st)||at&&at.hasOwnProperty(st)||(tt||(tt={}),tt[st]="");for(st in at)at.hasOwnProperty(st)&&ot[st]!==at[st]&&(tt||(tt={}),tt[st]=at[st])}else tt||(it||(it=[]),it.push(lt,tt)),tt=at;else lt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,ot=ot?ot.__html:void 0,at!=null&&ot!==at&&(it=it||[]).push(lt,at)):lt==="children"?typeof at!="string"&&typeof at!="number"||(it=it||[]).push(lt,""+at):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(at!=null&&lt==="onScroll"&&D$1("scroll",_e),it||ot===at||(it=[])):(it=it||[]).push(lt,at))}tt&&(it=it||[]).push("style",tt);var lt=it;(_.updateQueue=lt)&&(_.flags|=4)}};Cj=function(_e,_,tt,nt){tt!==nt&&(_.flags|=4)};function Dj(_e,_){if(!I$3)switch(_e.tailMode){case"hidden":_=_e.tail;for(var tt=null;_!==null;)_.alternate!==null&&(tt=_),_=_.sibling;tt===null?_e.tail=null:tt.sibling=null;break;case"collapsed":tt=_e.tail;for(var nt=null;tt!==null;)tt.alternate!==null&&(nt=tt),tt=tt.sibling;nt===null?_||_e.tail===null?_e.tail=null:_e.tail.sibling=null:nt.sibling=null}}function S$3(_e){var _=_e.alternate!==null&&_e.alternate.child===_e.child,tt=0,nt=0;if(_)for(var rt=_e.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags&14680064,nt|=rt.flags&14680064,rt.return=_e,rt=rt.sibling;else for(rt=_e.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags,nt|=rt.flags,rt.return=_e,rt=rt.sibling;return _e.subtreeFlags|=nt,_e.childLanes=tt,_}function Ej(_e,_,tt){var nt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(_),null;case 1:return Zf(_.type)&&$f(),S$3(_),null;case 3:return nt=_.stateNode,zh(),E$1(Wf),E$1(H$2),Eh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(_)?_.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,_),S$3(_),null;case 5:Bh(_);var rt=xh(wh.current);if(tt=_.type,_e!==null&&_.stateNode!=null)Bj(_e,_,tt,nt,rt),_e.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!nt){if(_.stateNode===null)throw Error(p$3(166));return S$3(_),null}if(_e=xh(uh.current),Gg(_)){nt=_.stateNode,tt=_.type;var it=_.memoizedProps;switch(nt[Of]=_,nt[Pf]=it,_e=(_.mode&1)!==0,tt){case"dialog":D$1("cancel",nt),D$1("close",nt);break;case"iframe":case"object":case"embed":D$1("load",nt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],nt);break;case"source":D$1("error",nt);break;case"img":case"image":case"link":D$1("error",nt),D$1("load",nt);break;case"details":D$1("toggle",nt);break;case"input":Za(nt,it),D$1("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$1("invalid",nt);break;case"textarea":hb(nt,it),D$1("invalid",nt)}ub(tt,it),rt=null;for(var st in it)if(it.hasOwnProperty(st)){var ot=it[st];st==="children"?typeof ot=="string"?nt.textContent!==ot&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,ot,_e),rt=["children",ot]):typeof ot=="number"&&nt.textContent!==""+ot&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,ot,_e),rt=["children",""+ot]):ea.hasOwnProperty(st)&&ot!=null&&st==="onScroll"&&D$1("scroll",nt)}switch(tt){case"input":Va(nt),db(nt,it,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=rt,_.updateQueue=nt,nt!==null&&(_.flags|=4)}else{st=rt.nodeType===9?rt:rt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(tt)),_e==="http://www.w3.org/1999/xhtml"?tt==="script"?(_e=st.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof nt.is=="string"?_e=st.createElement(tt,{is:nt.is}):(_e=st.createElement(tt),tt==="select"&&(st=_e,nt.multiple?st.multiple=!0:nt.size&&(st.size=nt.size))):_e=st.createElementNS(_e,tt),_e[Of]=_,_e[Pf]=nt,zj(_e,_,!1,!1),_.stateNode=_e;e:{switch(st=vb(tt,nt),tt){case"dialog":D$1("cancel",_e),D$1("close",_e),rt=nt;break;case"iframe":case"object":case"embed":D$1("load",_e),rt=nt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],_e);rt=nt;break;case"source":D$1("error",_e),rt=nt;break;case"img":case"image":case"link":D$1("error",_e),D$1("load",_e),rt=nt;break;case"details":D$1("toggle",_e),rt=nt;break;case"input":Za(_e,nt),rt=Ya(_e,nt),D$1("invalid",_e);break;case"option":rt=nt;break;case"select":_e._wrapperState={wasMultiple:!!nt.multiple},rt=A$1({},nt,{value:void 0}),D$1("invalid",_e);break;case"textarea":hb(_e,nt),rt=gb(_e,nt),D$1("invalid",_e);break;default:rt=nt}ub(tt,rt),ot=rt;for(it in ot)if(ot.hasOwnProperty(it)){var at=ot[it];it==="style"?sb(_e,at):it==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&nb(_e,at)):it==="children"?typeof at=="string"?(tt!=="textarea"||at!=="")&&ob(_e,at):typeof at=="number"&&ob(_e,""+at):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?at!=null&&it==="onScroll"&&D$1("scroll",_e):at!=null&&ta(_e,it,at,st))}switch(tt){case"input":Va(_e),db(_e,nt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":nt.value!=null&&_e.setAttribute("value",""+Sa(nt.value));break;case"select":_e.multiple=!!nt.multiple,it=nt.value,it!=null?fb(_e,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb(_e,!!nt.multiple,nt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(_e.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$3(_),null;case 6:if(_e&&_.stateNode!=null)Cj(_e,_,_e.memoizedProps,nt);else{if(typeof nt!="string"&&_.stateNode===null)throw Error(p$3(166));if(tt=xh(wh.current),xh(uh.current),Gg(_)){if(nt=_.stateNode,tt=_.memoizedProps,nt[Of]=_,(it=nt.nodeValue!==tt)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(nt.nodeValue,tt,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,tt,(_e.mode&1)!==0)}it&&(_.flags|=4)}else nt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(nt),nt[Of]=_,_.stateNode=nt}return S$3(_),null;case 13:if(E$1(L$2),nt=_.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),nt!==null&&nt.dehydrated!==null){if(_e===null){if(!it)throw Error(p$3(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$3(_),it=!1}else zg!==null&&(Fj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=tt,_):(nt=nt!==null,nt!==(_e!==null&&_e.memoizedState!==null)&&nt&&(_.child.flags|=8192,_.mode&1&&(_e===null||L$2.current&1?T$2===0&&(T$2=3):tj())),_.updateQueue!==null&&(_.flags|=4),S$3(_),null);case 4:return zh(),Aj(_e,_),_e===null&&sf(_.stateNode.containerInfo),S$3(_),null;case 10:return ah(_.type._context),S$3(_),null;case 17:return Zf(_.type)&&$f(),S$3(_),null;case 19:if(E$1(L$2),it=_.memoizedState,it===null)return S$3(_),null;if(nt=(_.flags&128)!==0,st=it.rendering,st===null)if(nt)Dj(it,!1);else{if(T$2!==0||_e!==null&&_e.flags&128)for(_e=_.child;_e!==null;){if(st=Ch(_e),st!==null){for(_.flags|=128,Dj(it,!1),nt=st.updateQueue,nt!==null&&(_.updateQueue=nt,_.flags|=4),_.subtreeFlags=0,nt=tt,tt=_.child;tt!==null;)it=tt,_e=nt,it.flags&=14680066,st=it.alternate,st===null?(it.childLanes=0,it.lanes=_e,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=st.childLanes,it.lanes=st.lanes,it.child=st.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=st.memoizedProps,it.memoizedState=st.memoizedState,it.updateQueue=st.updateQueue,it.type=st.type,_e=st.dependencies,it.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),tt=tt.sibling;return G$1(L$2,L$2.current&1|2),_.child}_e=_e.sibling}it.tail!==null&&B$1()>Gj&&(_.flags|=128,nt=!0,Dj(it,!1),_.lanes=4194304)}else{if(!nt)if(_e=Ch(st),_e!==null){if(_.flags|=128,nt=!0,tt=_e.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),Dj(it,!0),it.tail===null&&it.tailMode==="hidden"&&!st.alternate&&!I$3)return S$3(_),null}else 2*B$1()-it.renderingStartTime>Gj&&tt!==1073741824&&(_.flags|=128,nt=!0,Dj(it,!1),_.lanes=4194304);it.isBackwards?(st.sibling=_.child,_.child=st):(tt=it.last,tt!==null?tt.sibling=st:_.child=st,it.last=st)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B$1(),_.sibling=null,tt=L$2.current,G$1(L$2,nt?tt&1|2:tt&1),_):(S$3(_),null);case 22:case 23:return Hj(),nt=_.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==nt&&(_.flags|=8192),nt&&_.mode&1?fj&1073741824&&(S$3(_),_.subtreeFlags&6&&(_.flags|=8192)):S$3(_),null;case 24:return null;case 25:return null}throw Error(p$3(156,_.tag))}function Ij(_e,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),_e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 3:return zh(),E$1(Wf),E$1(H$2),Eh(),_e=_.flags,_e&65536&&!(_e&128)?(_.flags=_e&-65537|128,_):null;case 5:return Bh(_),null;case 13:if(E$1(L$2),_e=_.memoizedState,_e!==null&&_e.dehydrated!==null){if(_.alternate===null)throw Error(p$3(340));Ig()}return _e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 19:return E$1(L$2),null;case 4:return zh(),null;case 10:return ah(_.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Lj(_e,_){var tt=_e.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(nt){W$1(_e,_,nt)}else tt.current=null}function Mj(_e,_,tt){try{tt()}catch(nt){W$1(_e,_,nt)}}var Nj=!1;function Oj(_e,_){if(Cf=dd,_e=Me$1(),Ne$1(_e)){if("selectionStart"in _e)var tt={start:_e.selectionStart,end:_e.selectionEnd};else e:{tt=(tt=_e.ownerDocument)&&tt.defaultView||window;var nt=tt.getSelection&&tt.getSelection();if(nt&&nt.rangeCount!==0){tt=nt.anchorNode;var rt=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{tt.nodeType,it.nodeType}catch{tt=null;break e}var st=0,ot=-1,at=-1,lt=0,ct=0,ut=_e,dt=null;t:for(;;){for(var ht;ut!==tt||rt!==0&&ut.nodeType!==3||(ot=st+rt),ut!==it||nt!==0&&ut.nodeType!==3||(at=st+nt),ut.nodeType===3&&(st+=ut.nodeValue.length),(ht=ut.firstChild)!==null;)dt=ut,ut=ht;for(;;){if(ut===_e)break t;if(dt===tt&&++lt===rt&&(ot=st),dt===it&&++ct===nt&&(at=st),(ht=ut.nextSibling)!==null)break;ut=dt,dt=ut.parentNode}ut=ht}tt=ot===-1||at===-1?null:{start:ot,end:at}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:_e,selectionRange:tt},dd=!1,V$3=_;V$3!==null;)if(_=V$3,_e=_.child,(_.subtreeFlags&1028)!==0&&_e!==null)_e.return=_,V$3=_e;else for(;V$3!==null;){_=V$3;try{var mt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(mt!==null){var yt=mt.memoizedProps,vt=mt.memoizedState,pt=_.stateNode,_t=pt.getSnapshotBeforeUpdate(_.elementType===_.type?yt:Ci(_.type,yt),vt);pt.__reactInternalSnapshotBeforeUpdate=_t}break;case 3:var xt=_.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(St){W$1(_,_.return,St)}if(_e=_.sibling,_e!==null){_e.return=_.return,V$3=_e;break}V$3=_.return}return mt=Nj,Nj=!1,mt}function Pj(_e,_,tt){var nt=_.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var rt=nt=nt.next;do{if((rt.tag&_e)===_e){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Mj(_,tt,it)}rt=rt.next}while(rt!==nt)}}function Qj(_e,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var tt=_=_.next;do{if((tt.tag&_e)===_e){var nt=tt.create;tt.destroy=nt()}tt=tt.next}while(tt!==_)}}function Rj(_e){var _=_e.ref;if(_!==null){var tt=_e.stateNode;switch(_e.tag){case 5:_e=tt;break;default:_e=tt}typeof _=="function"?_(_e):_.current=_e}}function Sj(_e){var _=_e.alternate;_!==null&&(_e.alternate=null,Sj(_)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(_=_e.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,_,tt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,_?tt.nodeType===8?tt.parentNode.insertBefore(_e,_):tt.insertBefore(_e,_):(tt.nodeType===8?(_=tt.parentNode,_.insertBefore(_e,tt)):(_=tt,_.appendChild(_e)),tt=tt._reactRootContainer,tt!=null||_.onclick!==null||(_.onclick=Bf));else if(nt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,_,tt),_e=_e.sibling;_e!==null;)Vj(_e,_,tt),_e=_e.sibling}function Wj(_e,_,tt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,_?tt.insertBefore(_e,_):tt.appendChild(_e);else if(nt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,_,tt),_e=_e.sibling;_e!==null;)Wj(_e,_,tt),_e=_e.sibling}var X=null,Xj=!1;function Yj(_e,_,tt){for(tt=tt.child;tt!==null;)Zj(_e,_,tt),tt=tt.sibling}function Zj(_e,_,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$2||Lj(tt,_);case 6:var nt=X,rt=Xj;X=null,Yj(_e,_,tt),X=nt,Xj=rt,X!==null&&(Xj?(_e=X,tt=tt.stateNode,_e.nodeType===8?_e.parentNode.removeChild(tt):_e.removeChild(tt)):X.removeChild(tt.stateNode));break;case 18:X!==null&&(Xj?(_e=X,tt=tt.stateNode,_e.nodeType===8?Kf(_e.parentNode,tt):_e.nodeType===1&&Kf(_e,tt),bd(_e)):Kf(X,tt.stateNode));break;case 4:nt=X,rt=Xj,X=tt.stateNode.containerInfo,Xj=!0,Yj(_e,_,tt),X=nt,Xj=rt;break;case 0:case 11:case 14:case 15:if(!U$2&&(nt=tt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){rt=nt=nt.next;do{var it=rt,st=it.destroy;it=it.tag,st!==void 0&&(it&2||it&4)&&Mj(tt,_,st),rt=rt.next}while(rt!==nt)}Yj(_e,_,tt);break;case 1:if(!U$2&&(Lj(tt,_),nt=tt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=tt.memoizedProps,nt.state=tt.memoizedState,nt.componentWillUnmount()}catch(ot){W$1(tt,_,ot)}Yj(_e,_,tt);break;case 21:Yj(_e,_,tt);break;case 22:tt.mode&1?(U$2=(nt=U$2)||tt.memoizedState!==null,Yj(_e,_,tt),U$2=nt):Yj(_e,_,tt);break;default:Yj(_e,_,tt)}}function ak(_e){var _=_e.updateQueue;if(_!==null){_e.updateQueue=null;var tt=_e.stateNode;tt===null&&(tt=_e.stateNode=new Kj),_.forEach(function(nt){var rt=bk.bind(null,_e,nt);tt.has(nt)||(tt.add(nt),nt.then(rt,rt))})}}function ck(_e,_){var tt=_.deletions;if(tt!==null)for(var nt=0;nt<tt.length;nt++){var rt=tt[nt];try{var it=_e,st=_,ot=st;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Xj=!1;break e;case 3:X=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X===null)throw Error(p$3(160));Zj(it,st,rt),X=null,Xj=!1;var at=rt.alternate;at!==null&&(at.return=null),rt.return=null}catch(lt){W$1(rt,_,lt)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)dk(_,_e),_=_.sibling}function dk(_e,_){var tt=_e.alternate,nt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(_,_e),ek(_e),nt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(yt){W$1(_e,_e.return,yt)}try{Pj(5,_e,_e.return)}catch(yt){W$1(_e,_e.return,yt)}}break;case 1:ck(_,_e),ek(_e),nt&512&&tt!==null&&Lj(tt,tt.return);break;case 5:if(ck(_,_e),ek(_e),nt&512&&tt!==null&&Lj(tt,tt.return),_e.flags&32){var rt=_e.stateNode;try{ob(rt,"")}catch(yt){W$1(_e,_e.return,yt)}}if(nt&4&&(rt=_e.stateNode,rt!=null)){var it=_e.memoizedProps,st=tt!==null?tt.memoizedProps:it,ot=_e.type,at=_e.updateQueue;if(_e.updateQueue=null,at!==null)try{ot==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(ot,st);var lt=vb(ot,it);for(st=0;st<at.length;st+=2){var ct=at[st],ut=at[st+1];ct==="style"?sb(rt,ut):ct==="dangerouslySetInnerHTML"?nb(rt,ut):ct==="children"?ob(rt,ut):ta(rt,ct,ut,lt)}switch(ot){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var dt=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var ht=it.value;ht!=null?fb(rt,!!it.multiple,ht,!1):dt!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(yt){W$1(_e,_e.return,yt)}}break;case 6:if(ck(_,_e),ek(_e),nt&4){if(_e.stateNode===null)throw Error(p$3(162));rt=_e.stateNode,it=_e.memoizedProps;try{rt.nodeValue=it}catch(yt){W$1(_e,_e.return,yt)}}break;case 3:if(ck(_,_e),ek(_e),nt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(yt){W$1(_e,_e.return,yt)}break;case 4:ck(_,_e),ek(_e);break;case 13:ck(_,_e),ek(_e),rt=_e.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(fk=B$1())),nt&4&&ak(_e);break;case 22:if(ct=tt!==null&&tt.memoizedState!==null,_e.mode&1?(U$2=(lt=U$2)||ct,ck(_,_e),U$2=lt):ck(_,_e),ek(_e),nt&8192){if(lt=_e.memoizedState!==null,(_e.stateNode.isHidden=lt)&&!ct&&_e.mode&1)for(V$3=_e,ct=_e.child;ct!==null;){for(ut=V$3=ct;V$3!==null;){switch(dt=V$3,ht=dt.child,dt.tag){case 0:case 11:case 14:case 15:Pj(4,dt,dt.return);break;case 1:Lj(dt,dt.return);var mt=dt.stateNode;if(typeof mt.componentWillUnmount=="function"){nt=dt,tt=dt.return;try{_=nt,mt.props=_.memoizedProps,mt.state=_.memoizedState,mt.componentWillUnmount()}catch(yt){W$1(nt,tt,yt)}}break;case 5:Lj(dt,dt.return);break;case 22:if(dt.memoizedState!==null){gk(ut);continue}}ht!==null?(ht.return=dt,V$3=ht):gk(ut)}ct=ct.sibling}e:for(ct=null,ut=_e;;){if(ut.tag===5){if(ct===null){ct=ut;try{rt=ut.stateNode,lt?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(ot=ut.stateNode,at=ut.memoizedProps.style,st=at!=null&&at.hasOwnProperty("display")?at.display:null,ot.style.display=rb("display",st))}catch(yt){W$1(_e,_e.return,yt)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=lt?"":ut.memoizedProps}catch(yt){W$1(_e,_e.return,yt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===_e)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===_e)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===_e)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:ck(_,_e),ek(_e),nt&4&&ak(_e);break;case 21:break;default:ck(_,_e),ek(_e)}}function ek(_e){var _=_e.flags;if(_&2){try{e:{for(var tt=_e.return;tt!==null;){if(Tj(tt)){var nt=tt;break e}tt=tt.return}throw Error(p$3(160))}switch(nt.tag){case 5:var rt=nt.stateNode;nt.flags&32&&(ob(rt,""),nt.flags&=-33);var it=Uj(_e);Wj(_e,it,rt);break;case 3:case 4:var st=nt.stateNode.containerInfo,ot=Uj(_e);Vj(_e,ot,st);break;default:throw Error(p$3(161))}}catch(at){W$1(_e,_e.return,at)}_e.flags&=-3}_&4096&&(_e.flags&=-4097)}function hk(_e,_,tt){V$3=_e,ik(_e)}function ik(_e,_,tt){for(var nt=(_e.mode&1)!==0;V$3!==null;){var rt=V$3,it=rt.child;if(rt.tag===22&&nt){var st=rt.memoizedState!==null||Jj;if(!st){var ot=rt.alternate,at=ot!==null&&ot.memoizedState!==null||U$2;ot=Jj;var lt=U$2;if(Jj=st,(U$2=at)&&!lt)for(V$3=rt;V$3!==null;)st=V$3,at=st.child,st.tag===22&&st.memoizedState!==null?jk(rt):at!==null?(at.return=st,V$3=at):jk(rt);for(;it!==null;)V$3=it,ik(it),it=it.sibling;V$3=rt,Jj=ot,U$2=lt}kk(_e)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V$3=it):kk(_e)}}function kk(_e){for(;V$3!==null;){var _=V$3;if(_.flags&8772){var tt=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U$2||Qj(5,_);break;case 1:var nt=_.stateNode;if(_.flags&4&&!U$2)if(tt===null)nt.componentDidMount();else{var rt=_.elementType===_.type?tt.memoizedProps:Ci(_.type,tt.memoizedProps);nt.componentDidUpdate(rt,tt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&sh(_,it,nt);break;case 3:var st=_.updateQueue;if(st!==null){if(tt=null,_.child!==null)switch(_.child.tag){case 5:tt=_.child.stateNode;break;case 1:tt=_.child.stateNode}sh(_,st,tt)}break;case 5:var ot=_.stateNode;if(tt===null&&_.flags&4){tt=ot;var at=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&tt.focus();break;case"img":at.src&&(tt.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var lt=_.alternate;if(lt!==null){var ct=lt.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$2||_.flags&512&&Rj(_)}catch(dt){W$1(_,_.return,dt)}}if(_===_e){V$3=null;break}if(tt=_.sibling,tt!==null){tt.return=_.return,V$3=tt;break}V$3=_.return}}function gk(_e){for(;V$3!==null;){var _=V$3;if(_===_e){V$3=null;break}var tt=_.sibling;if(tt!==null){tt.return=_.return,V$3=tt;break}V$3=_.return}}function jk(_e){for(;V$3!==null;){var _=V$3;try{switch(_.tag){case 0:case 11:case 15:var tt=_.return;try{Qj(4,_)}catch(at){W$1(_,tt,at)}break;case 1:var nt=_.stateNode;if(typeof nt.componentDidMount=="function"){var rt=_.return;try{nt.componentDidMount()}catch(at){W$1(_,rt,at)}}var it=_.return;try{Rj(_)}catch(at){W$1(_,it,at)}break;case 5:var st=_.return;try{Rj(_)}catch(at){W$1(_,st,at)}}}catch(at){W$1(_,_.return,at)}if(_===_e){V$3=null;break}var ot=_.sibling;if(ot!==null){ot.return=_.return,V$3=ot;break}V$3=_.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q$1=null,Y$2=null,Z=0,fj=0,ej=Uf(0),T$2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,_,tt,nt){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(_e,tt,nt),(!(K&2)||_e!==Q$1)&&(_e===Q$1&&(!(K&2)&&(qk|=tt),T$2===4&&Ck(_e,Z)),Dk(_e,nt),tt===1&&K===0&&!(_.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(_e,_){var tt=_e.callbackNode;wc(_e,_);var nt=uc(_e,_e===Q$1?Z:0);if(nt===0)tt!==null&&bc(tt),_e.callbackNode=null,_e.callbackPriority=0;else if(_=nt&-nt,_e.callbackPriority!==_){if(tt!=null&&bc(tt),_===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),tt=null;else{switch(Dc(nt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Fk(tt,Gk.bind(null,_e))}_e.callbackPriority=_,_e.callbackNode=tt}}function Gk(_e,_){if(Ak=-1,Bk=0,K&6)throw Error(p$3(327));var tt=_e.callbackNode;if(Hk()&&_e.callbackNode!==tt)return null;var nt=uc(_e,_e===Q$1?Z:0);if(nt===0)return null;if(nt&30||nt&_e.expiredLanes||_)_=Ik(_e,nt);else{_=nt;var rt=K;K|=2;var it=Jk();(Q$1!==_e||Z!==_)&&(uk=null,Gj=B$1()+500,Kk(_e,_));do try{Lk();break}catch(ot){Mk(_e,ot)}while(!0);$g(),mk.current=it,K=rt,Y$2!==null?_=0:(Q$1=null,Z=0,_=T$2)}if(_!==0){if(_===2&&(rt=xc(_e),rt!==0&&(nt=rt,_=Nk(_e,rt))),_===1)throw tt=pk,Kk(_e,0),Ck(_e,nt),Dk(_e,B$1()),tt;if(_===6)Ck(_e,nt);else{if(rt=_e.current.alternate,!(nt&30)&&!Ok(rt)&&(_=Ik(_e,nt),_===2&&(it=xc(_e),it!==0&&(nt=it,_=Nk(_e,it))),_===1))throw tt=pk,Kk(_e,0),Ck(_e,nt),Dk(_e,B$1()),tt;switch(_e.finishedWork=rt,_e.finishedLanes=nt,_){case 0:case 1:throw Error(p$3(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,nt),(nt&130023424)===nt&&(_=fk+500-B$1(),10<_)){if(uc(_e,0)!==0)break;if(rt=_e.suspendedLanes,(rt&nt)!==nt){R$1(),_e.pingedLanes|=_e.suspendedLanes&rt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),_);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,nt),(nt&4194240)===nt)break;for(_=_e.eventTimes,rt=-1;0<nt;){var st=31-oc(nt);it=1<<st,st=_[st],st>rt&&(rt=st),nt&=~it}if(nt=rt,nt=B$1()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*lk(nt/1960))-nt,10<nt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),nt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$3(329))}}}return Dk(_e,B$1()),_e.callbackNode===tt?Gk.bind(null,_e):null}function Nk(_e,_){var tt=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,_).flags|=256),_e=Ik(_e,_),_e!==2&&(_=tk,tk=tt,_!==null&&Fj(_)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var _=_e;;){if(_.flags&16384){var tt=_.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var nt=0;nt<tt.length;nt++){var rt=tt[nt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(tt=_.child,_.subtreeFlags&16384&&tt!==null)tt.return=_,_=tt;else{if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ck(_e,_){for(_&=~rk,_&=~qk,_e.suspendedLanes|=_,_e.pingedLanes&=~_,_e=_e.expirationTimes;0<_;){var tt=31-oc(_),nt=1<<tt;_e[tt]=-1,_&=~nt}}function Ek(_e){if(K&6)throw Error(p$3(327));Hk();var _=uc(_e,0);if(!(_&1))return Dk(_e,B$1()),null;var tt=Ik(_e,_);if(_e.tag!==0&&tt===2){var nt=xc(_e);nt!==0&&(_=nt,tt=Nk(_e,nt))}if(tt===1)throw tt=pk,Kk(_e,0),Ck(_e,_),Dk(_e,B$1()),tt;if(tt===6)throw Error(p$3(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=_,Pk(_e,tk,uk),Dk(_e,B$1()),null}function Qk(_e,_){var tt=K;K|=1;try{return _e(_)}finally{K=tt,K===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _=K;K|=1;var tt=ok.transition,nt=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=nt,ok.transition=tt,K=_,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(_e,_){_e.finishedWork=null,_e.finishedLanes=0;var tt=_e.timeoutHandle;if(tt!==-1&&(_e.timeoutHandle=-1,Gf(tt)),Y$2!==null)for(tt=Y$2.return;tt!==null;){var nt=tt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$2),Eh();break;case 5:Bh(nt);break;case 4:zh();break;case 13:E$1(L$2);break;case 19:E$1(L$2);break;case 10:ah(nt.type._context);break;case 22:case 23:Hj()}tt=tt.return}if(Q$1=_e,Y$2=_e=Pg(_e.current,null),Z=fj=_,T$2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_=0;_<fh.length;_++)if(tt=fh[_],nt=tt.interleaved,nt!==null){tt.interleaved=null;var rt=nt.next,it=tt.pending;if(it!==null){var st=it.next;it.next=rt,nt.next=st}tt.pending=nt}fh=null}return _e}function Mk(_e,_){do{var tt=Y$2;try{if($g(),Fh.current=Rh,Ih){for(var nt=M$2.memoizedState;nt!==null;){var rt=nt.queue;rt!==null&&(rt.pending=null),nt=nt.next}Ih=!1}if(Hh=0,O$1=N$2=M$2=null,Jh=!1,Kh=0,nk.current=null,tt===null||tt.return===null){T$2=1,pk=_,Y$2=null;break}e:{var it=_e,st=tt.return,ot=tt,at=_;if(_=Z,ot.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var lt=at,ct=ot,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var dt=ct.alternate;dt?(ct.updateQueue=dt.updateQueue,ct.memoizedState=dt.memoizedState,ct.lanes=dt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var ht=Ui(st);if(ht!==null){ht.flags&=-257,Vi(ht,st,ot,it,_),ht.mode&1&&Si(it,lt,_),_=ht,at=lt;var mt=_.updateQueue;if(mt===null){var yt=new Set;yt.add(at),_.updateQueue=yt}else mt.add(at);break e}else{if(!(_&1)){Si(it,lt,_),tj();break e}at=Error(p$3(426))}}else if(I$3&&ot.mode&1){var vt=Ui(st);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Vi(vt,st,ot,it,_),Jg(Ji(at,ot));break e}}it=at=Ji(at,ot),T$2!==4&&(T$2=2),sk===null?sk=[it]:sk.push(it),it=st;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var pt=Ni(it,at,_);ph(it,pt);break e;case 1:ot=at;var _t=it.type,xt=it.stateNode;if(!(it.flags&128)&&(typeof _t.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Ri===null||!Ri.has(xt)))){it.flags|=65536,_&=-_,it.lanes|=_;var St=Qi(it,ot,_);ph(it,St);break e}}it=it.return}while(it!==null)}Sk(tt)}catch(At){_=At,Y$2===tt&&tt!==null&&(Y$2=tt=tt.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z)}function Ik(_e,_){var tt=K;K|=2;var nt=Jk();(Q$1!==_e||Z!==_)&&(uk=null,Kk(_e,_));do try{Tk();break}catch(rt){Mk(_e,rt)}while(!0);if($g(),K=tt,mk.current=nt,Y$2!==null)throw Error(p$3(261));return Q$1=null,Z=0,T$2}function Tk(){for(;Y$2!==null;)Uk(Y$2)}function Lk(){for(;Y$2!==null&&!cc();)Uk(Y$2)}function Uk(_e){var _=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,_===null?Sk(_e):Y$2=_,nk.current=null}function Sk(_e){var _=_e;do{var tt=_.alternate;if(_e=_.return,_.flags&32768){if(tt=Ij(tt,_),tt!==null){tt.flags&=32767,Y$2=tt;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$2=6,Y$2=null;return}}else if(tt=Ej(tt,_,fj),tt!==null){Y$2=tt;return}if(_=_.sibling,_!==null){Y$2=_;return}Y$2=_=_e}while(_!==null);T$2===0&&(T$2=5)}function Pk(_e,_,tt){var nt=C$1,rt=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,_,tt,nt)}finally{ok.transition=rt,C$1=nt}return null}function Wk(_e,_,tt,nt){do Hk();while(wk!==null);if(K&6)throw Error(p$3(327));tt=_e.finishedWork;var rt=_e.finishedLanes;if(tt===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,tt===_e.current)throw Error(p$3(177));_e.callbackNode=null,_e.callbackPriority=0;var it=tt.lanes|tt.childLanes;if(Bc(_e,it),_e===Q$1&&(Y$2=Q$1=null,Z=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),it=(tt.flags&15990)!==0,tt.subtreeFlags&15990||it){it=ok.transition,ok.transition=null;var st=C$1;C$1=1;var ot=K;K|=4,nk.current=null,Oj(_e,tt),dk(tt,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=tt,hk(tt),dc(),K=ot,C$1=st,ok.transition=it}else _e.current=tt;if(vk&&(vk=!1,wk=_e,xk=rt),it=_e.pendingLanes,it===0&&(Ri=null),mc(tt.stateNode),Dk(_e,B$1()),_!==null)for(nt=_e.onRecoverableError,tt=0;tt<_.length;tt++)rt=_[tt],nt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),it=_e.pendingLanes,it&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),_=ok.transition,tt=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var nt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$3(331));var rt=K;for(K|=4,V$3=_e.current;V$3!==null;){var it=V$3,st=it.child;if(V$3.flags&16){var ot=it.deletions;if(ot!==null){for(var at=0;at<ot.length;at++){var lt=ot[at];for(V$3=lt;V$3!==null;){var ct=V$3;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,it)}var ut=ct.child;if(ut!==null)ut.return=ct,V$3=ut;else for(;V$3!==null;){ct=V$3;var dt=ct.sibling,ht=ct.return;if(Sj(ct),ct===lt){V$3=null;break}if(dt!==null){dt.return=ht,V$3=dt;break}V$3=ht}}}var mt=it.alternate;if(mt!==null){var yt=mt.child;if(yt!==null){mt.child=null;do{var vt=yt.sibling;yt.sibling=null,yt=vt}while(yt!==null)}}V$3=it}}if(it.subtreeFlags&2064&&st!==null)st.return=it,V$3=st;else e:for(;V$3!==null;){if(it=V$3,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Pj(9,it,it.return)}var pt=it.sibling;if(pt!==null){pt.return=it.return,V$3=pt;break e}V$3=it.return}}var _t=_e.current;for(V$3=_t;V$3!==null;){st=V$3;var xt=st.child;if(st.subtreeFlags&2064&&xt!==null)xt.return=st,V$3=xt;else e:for(st=_t;V$3!==null;){if(ot=V$3,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(At){W$1(ot,ot.return,At)}if(ot===st){V$3=null;break e}var St=ot.sibling;if(St!==null){St.return=ot.return,V$3=St;break e}V$3=ot.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}nt=!0}return nt}finally{C$1=tt,ok.transition=_}}return!1}function Xk(_e,_,tt){_=Ji(tt,_),_=Ni(_e,_,1),_e=nh(_e,_,1),_=R$1(),_e!==null&&(Ac(_e,1,_),Dk(_e,_))}function W$1(_e,_,tt){if(_e.tag===3)Xk(_e,_e,tt);else for(;_!==null;){if(_.tag===3){Xk(_,_e,tt);break}else if(_.tag===1){var nt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Ri===null||!Ri.has(nt))){_e=Ji(tt,_e),_e=Qi(_,_e,1),_=nh(_,_e,1),_e=R$1(),_!==null&&(Ac(_,1,_e),Dk(_,_e));break}}_=_.return}}function Ti(_e,_,tt){var nt=_e.pingCache;nt!==null&&nt.delete(_),_=R$1(),_e.pingedLanes|=_e.suspendedLanes&tt,Q$1===_e&&(Z&tt)===tt&&(T$2===4||T$2===3&&(Z&130023424)===Z&&500>B$1()-fk?Kk(_e,0):rk|=tt),Dk(_e,_)}function Yk(_e,_){_===0&&(_e.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var tt=R$1();_e=ih(_e,_),_e!==null&&(Ac(_e,_,tt),Dk(_e,tt))}function uj(_e){var _=_e.memoizedState,tt=0;_!==null&&(tt=_.retryLane),Yk(_e,tt)}function bk(_e,_){var tt=0;switch(_e.tag){case 13:var nt=_e.stateNode,rt=_e.memoizedState;rt!==null&&(tt=rt.retryLane);break;case 19:nt=_e.stateNode;break;default:throw Error(p$3(314))}nt!==null&&nt.delete(_),Yk(_e,tt)}var Vk;Vk=function(_e,_,tt){if(_e!==null)if(_e.memoizedProps!==_.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&tt)&&!(_.flags&128))return dh=!1,yj(_e,_,tt);dh=!!(_e.flags&131072)}else dh=!1,I$3&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var nt=_.type;ij(_e,_),_e=_.pendingProps;var rt=Yf(_,H$2.current);ch(_,tt),rt=Nh(null,_,nt,_e,rt,tt);var it=Sh();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(nt)?(it=!0,cg(_)):it=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,kh(_),rt.updater=Ei,_.stateNode=rt,rt._reactInternals=_,Ii(_,nt,_e,tt),_=jj(null,_,nt,!0,it,tt)):(_.tag=0,I$3&&it&&vg(_),Xi(null,_,rt,tt),_=_.child),_;case 16:nt=_.elementType;e:{switch(ij(_e,_),_e=_.pendingProps,rt=nt._init,nt=rt(nt._payload),_.type=nt,rt=_.tag=Zk(nt),_e=Ci(nt,_e),rt){case 0:_=cj(null,_,nt,_e,tt);break e;case 1:_=hj(null,_,nt,_e,tt);break e;case 11:_=Yi(null,_,nt,_e,tt);break e;case 14:_=$i(null,_,nt,Ci(nt.type,_e),tt);break e}throw Error(p$3(306,nt,""))}return _;case 0:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Ci(nt,rt),cj(_e,_,nt,rt,tt);case 1:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Ci(nt,rt),hj(_e,_,nt,rt,tt);case 3:e:{if(kj(_),_e===null)throw Error(p$3(387));nt=_.pendingProps,it=_.memoizedState,rt=it.element,lh(_e,_),qh(_,nt,null,tt);var st=_.memoizedState;if(nt=st.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){rt=Ji(Error(p$3(423)),_),_=lj(_e,_,nt,tt,rt);break e}else if(nt!==rt){rt=Ji(Error(p$3(424)),_),_=lj(_e,_,nt,tt,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I$3=!0,zg=null,tt=Vg(_,null,nt,tt),_.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),nt===rt){_=Zi(_e,_,tt);break e}Xi(_e,_,nt,tt)}_=_.child}return _;case 5:return Ah(_),_e===null&&Eg(_),nt=_.type,rt=_.pendingProps,it=_e!==null?_e.memoizedProps:null,st=rt.children,Ef(nt,rt)?st=null:it!==null&&Ef(nt,it)&&(_.flags|=32),gj(_e,_),Xi(_e,_,st,tt),_.child;case 6:return _e===null&&Eg(_),null;case 13:return oj(_e,_,tt);case 4:return yh(_,_.stateNode.containerInfo),nt=_.pendingProps,_e===null?_.child=Ug(_,null,nt,tt):Xi(_e,_,nt,tt),_.child;case 11:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Ci(nt,rt),Yi(_e,_,nt,rt,tt);case 7:return Xi(_e,_,_.pendingProps,tt),_.child;case 8:return Xi(_e,_,_.pendingProps.children,tt),_.child;case 12:return Xi(_e,_,_.pendingProps.children,tt),_.child;case 10:e:{if(nt=_.type._context,rt=_.pendingProps,it=_.memoizedProps,st=rt.value,G$1(Wg,nt._currentValue),nt._currentValue=st,it!==null)if(He(it.value,st)){if(it.children===rt.children&&!Wf.current){_=Zi(_e,_,tt);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var ot=it.dependencies;if(ot!==null){st=it.child;for(var at=ot.firstContext;at!==null;){if(at.context===nt){if(it.tag===1){at=mh(-1,tt&-tt),at.tag=2;var lt=it.updateQueue;if(lt!==null){lt=lt.shared;var ct=lt.pending;ct===null?at.next=at:(at.next=ct.next,ct.next=at),lt.pending=at}}it.lanes|=tt,at=it.alternate,at!==null&&(at.lanes|=tt),bh(it.return,tt,_),ot.lanes|=tt;break}at=at.next}}else if(it.tag===10)st=it.type===_.type?null:it.child;else if(it.tag===18){if(st=it.return,st===null)throw Error(p$3(341));st.lanes|=tt,ot=st.alternate,ot!==null&&(ot.lanes|=tt),bh(st,tt,_),st=it.sibling}else st=it.child;if(st!==null)st.return=it;else for(st=it;st!==null;){if(st===_){st=null;break}if(it=st.sibling,it!==null){it.return=st.return,st=it;break}st=st.return}it=st}Xi(_e,_,rt.children,tt),_=_.child}return _;case 9:return rt=_.type,nt=_.pendingProps.children,ch(_,tt),rt=eh(rt),nt=nt(rt),_.flags|=1,Xi(_e,_,nt,tt),_.child;case 14:return nt=_.type,rt=Ci(nt,_.pendingProps),rt=Ci(nt.type,rt),$i(_e,_,nt,rt,tt);case 15:return bj(_e,_,_.type,_.pendingProps,tt);case 17:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Ci(nt,rt),ij(_e,_),_.tag=1,Zf(nt)?(_e=!0,cg(_)):_e=!1,ch(_,tt),Gi(_,nt,rt),Ii(_,nt,rt,tt),jj(null,_,nt,!0,_e,tt);case 19:return xj(_e,_,tt);case 22:return dj(_e,_,tt)}throw Error(p$3(156,_.tag))};function Fk(_e,_){return ac(_e,_)}function $k(_e,_,tt,nt){this.tag=_e,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,_,tt,nt){return new $k(_e,_,tt,nt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,_){var tt=_e.alternate;return tt===null?(tt=Bg(_e.tag,_,_e.key,_e.mode),tt.elementType=_e.elementType,tt.type=_e.type,tt.stateNode=_e.stateNode,tt.alternate=_e,_e.alternate=tt):(tt.pendingProps=_,tt.type=_e.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=_e.flags&14680064,tt.childLanes=_e.childLanes,tt.lanes=_e.lanes,tt.child=_e.child,tt.memoizedProps=_e.memoizedProps,tt.memoizedState=_e.memoizedState,tt.updateQueue=_e.updateQueue,_=_e.dependencies,tt.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},tt.sibling=_e.sibling,tt.index=_e.index,tt.ref=_e.ref,tt}function Rg(_e,_,tt,nt,rt,it){var st=2;if(nt=_e,typeof _e=="function")aj(_e)&&(st=1);else if(typeof _e=="string")st=5;else e:switch(_e){case ya:return Tg(tt.children,rt,it,_);case za:st=8,rt|=8;break;case Aa:return _e=Bg(12,tt,_,rt|2),_e.elementType=Aa,_e.lanes=it,_e;case Ea:return _e=Bg(13,tt,_,rt),_e.elementType=Ea,_e.lanes=it,_e;case Fa:return _e=Bg(19,tt,_,rt),_e.elementType=Fa,_e.lanes=it,_e;case Ia:return pj(tt,rt,it,_);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,nt=null;break e}throw Error(p$3(130,_e==null?_e:typeof _e,""))}return _=Bg(st,tt,_,rt),_.elementType=_e,_.type=nt,_.lanes=it,_}function Tg(_e,_,tt,nt){return _e=Bg(7,_e,nt,_),_e.lanes=tt,_e}function pj(_e,_,tt,nt){return _e=Bg(22,_e,nt,_),_e.elementType=Ia,_e.lanes=tt,_e.stateNode={isHidden:!1},_e}function Qg(_e,_,tt){return _e=Bg(6,_e,null,_),_e.lanes=tt,_e}function Sg(_e,_,tt){return _=Bg(4,_e.children!==null?_e.children:[],_e.key,_),_.lanes=tt,_.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},_}function al(_e,_,tt,nt,rt){this.tag=_,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function bl(_e,_,tt,nt,rt,it,st,ot,at){return _e=new al(_e,_,tt,ot,at),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),_e.current=it,it.stateNode=_e,it.memoizedState={element:nt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(it),_e}function cl(_e,_,tt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:_e,containerInfo:_,implementation:tt}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$3(170));var _=_e;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$3(171))}if(_e.tag===1){var tt=_e.type;if(Zf(tt))return bg(_e,tt,_)}return _}function el(_e,_,tt,nt,rt,it,st,ot,at){return _e=bl(tt,nt,!0,_e,rt,it,st,ot,at),_e.context=dl(null),tt=_e.current,nt=R$1(),rt=yi(tt),it=mh(nt,rt),it.callback=_??null,nh(tt,it,rt),_e.current.lanes=rt,Ac(_e,rt,nt),Dk(_e,nt),_e}function fl$1(_e,_,tt,nt){var rt=_.current,it=R$1(),st=yi(rt);return tt=dl(tt),_.context===null?_.context=tt:_.pendingContext=tt,_=mh(it,st),_.payload={element:_e},nt=nt===void 0?null:nt,nt!==null&&(_.callback=nt),_e=nh(rt,_,st),_e!==null&&(gi(_e,rt,st,it),oh(_e,rt,st)),st}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,_){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var tt=_e.retryLane;_e.retryLane=tt!==0&&tt<_?tt:_}}function il(_e,_){hl(_e,_),(_e=_e.alternate)&&hl(_e,_)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var _=this._internalRoot;if(_===null)throw Error(p$3(409));fl$1(_e,_,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var _=_e.containerInfo;Rk(function(){fl$1(null,_e,null,null)}),_[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var _=Hc();_e={blockedOn:null,target:_e,priority:_};for(var tt=0;tt<Qc.length&&_!==0&&_<Qc[tt].priority;tt++);Qc.splice(tt,0,_e),tt===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,_,tt,nt,rt){if(rt){if(typeof nt=="function"){var it=nt;nt=function(){var lt=gl(st);it.call(lt)}}var st=el(_,nt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),st}for(;rt=_e.lastChild;)_e.removeChild(rt);if(typeof nt=="function"){var ot=nt;nt=function(){var lt=gl(at);ot.call(lt)}}var at=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=at,_e[uf]=at.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl$1(_,at,tt,nt)}),at}function rl(_e,_,tt,nt,rt){var it=tt._reactRootContainer;if(it){var st=it;if(typeof rt=="function"){var ot=rt;rt=function(){var at=gl(st);ot.call(at)}}fl$1(_,st,_e,rt)}else st=ql(tt,_,_e,rt,nt);return gl(st)}Ec=function(_e){switch(_e.tag){case 3:var _=_e.stateNode;if(_.current.memoizedState.isDehydrated){var tt=tc(_.pendingLanes);tt!==0&&(Cc(_,tt|1),Dk(_,B$1()),!(K&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var nt=ih(_e,1);if(nt!==null){var rt=R$1();gi(nt,_e,1,rt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var _=ih(_e,134217728);if(_!==null){var tt=R$1();gi(_,_e,134217728,tt)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var _=yi(_e),tt=ih(_e,_);if(tt!==null){var nt=R$1();gi(tt,_e,_,nt)}il(_e,_)}};Hc=function(){return C$1};Ic=function(_e,_){var tt=C$1;try{return C$1=_e,_()}finally{C$1=tt}};yb=function(_e,_,tt){switch(_){case"input":if(bb(_e,tt),_=tt.name,tt.type==="radio"&&_!=null){for(tt=_e;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<tt.length;_++){var nt=tt[_];if(nt!==_e&&nt.form===_e.form){var rt=Db(nt);if(!rt)throw Error(p$3(90));Wa(nt),bb(nt,rt)}}}break;case"textarea":ib(_e,tt);break;case"select":_=tt.value,_!=null&&fb(_e,!!tt.multiple,_,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,_){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_))throw Error(p$3(200));return cl(_e,_,null,tt)};reactDom_production_min.createRoot=function(_e,_){if(!nl(_e))throw Error(p$3(299));var tt=!1,nt="",rt=kl;return _!=null&&(_.unstable_strictMode===!0&&(tt=!0),_.identifierPrefix!==void 0&&(nt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=bl(_e,1,!1,null,null,tt,!1,nt,rt),_e[uf]=_.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(_)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var _=_e._reactInternals;if(_===void 0)throw typeof _e.render=="function"?Error(p$3(188)):(_e=Object.keys(_e).join(","),Error(p$3(268,_e)));return _e=Zb(_),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,_,tt){if(!ol(_))throw Error(p$3(200));return rl(null,_e,_,!0,tt)};reactDom_production_min.hydrateRoot=function(_e,_,tt){if(!nl(_e))throw Error(p$3(405));var nt=tt!=null&&tt.hydratedSources||null,rt=!1,it="",st=kl;if(tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(it=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(st=tt.onRecoverableError)),_=el(_,null,_e,1,tt??null,rt,!1,it,st),_e[uf]=_.current,sf(_e),nt)for(_e=0;_e<nt.length;_e++)tt=nt[_e],rt=tt._getVersion,rt=rt(tt._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[tt,rt]:_.mutableSourceEagerHydrationData.push(tt,rt);return new ml(_)};reactDom_production_min.render=function(_e,_,tt){if(!ol(_))throw Error(p$3(200));return rl(null,_e,_,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$3(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,_,tt,nt){if(!ol(tt))throw Error(p$3(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$3(38));return rl(_e,_,tt,!1,nt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot$1,m$3=reactDomExports;createRoot$1=m$3.createRoot,m$3.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends$4.apply(this,arguments)}var Action;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(_e){_e===void 0&&(_e={});function _(rt,it){let{pathname:st="/",search:ot="",hash:at=""}=parsePath(rt.location.hash.substr(1));return!st.startsWith("/")&&!st.startsWith(".")&&(st="/"+st),createLocation("",{pathname:st,search:ot,hash:at},it.state&&it.state.usr||null,it.state&&it.state.key||"default")}function tt(rt,it){let st=rt.document.querySelector("base"),ot="";if(st&&st.getAttribute("href")){let at=rt.location.href,lt=at.indexOf("#");ot=lt===-1?at:at.slice(0,lt)}return ot+"#"+(typeof it=="string"?it:createPath(it))}function nt(rt,it){warning(rt.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(it)+")")}return getUrlBasedHistory(_,tt,nt,_e)}function invariant$1(_e,_){if(_e===!1||_e===null||typeof _e>"u")throw new Error(_)}function warning(_e,_){if(!_e){typeof console<"u"&&console.warn(_);try{throw new Error(_)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,_){return{usr:_e.state,key:_e.key,idx:_}}function createLocation(_e,_,tt,nt){return tt===void 0&&(tt=null),_extends$4({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof _=="string"?parsePath(_):_,{state:tt,key:_&&_.key||nt||createKey()})}function createPath(_e){let{pathname:_="/",search:tt="",hash:nt=""}=_e;return tt&&tt!=="?"&&(_+=tt.charAt(0)==="?"?tt:"?"+tt),nt&&nt!=="#"&&(_+=nt.charAt(0)==="#"?nt:"#"+nt),_}function parsePath(_e){let _={};if(_e){let tt=_e.indexOf("#");tt>=0&&(_.hash=_e.substr(tt),_e=_e.substr(0,tt));let nt=_e.indexOf("?");nt>=0&&(_.search=_e.substr(nt),_e=_e.substr(0,nt)),_e&&(_.pathname=_e)}return _}function getUrlBasedHistory(_e,_,tt,nt){nt===void 0&&(nt={});let{window:rt=document.defaultView,v5Compat:it=!1}=nt,st=rt.history,ot=Action.Pop,at=null,lt=ct();lt==null&&(lt=0,st.replaceState(_extends$4({},st.state,{idx:lt}),""));function ct(){return(st.state||{idx:null}).idx}function ut(){ot=Action.Pop;let vt=ct(),pt=vt==null?null:vt-lt;lt=vt,at&&at({action:ot,location:yt.location,delta:pt})}function dt(vt,pt){ot=Action.Push;let _t=createLocation(yt.location,vt,pt);tt&&tt(_t,vt),lt=ct()+1;let xt=getHistoryState(_t,lt),St=yt.createHref(_t);try{st.pushState(xt,"",St)}catch(At){if(At instanceof DOMException&&At.name==="DataCloneError")throw At;rt.location.assign(St)}it&&at&&at({action:ot,location:yt.location,delta:1})}function ht(vt,pt){ot=Action.Replace;let _t=createLocation(yt.location,vt,pt);tt&&tt(_t,vt),lt=ct();let xt=getHistoryState(_t,lt),St=yt.createHref(_t);st.replaceState(xt,"",St),it&&at&&at({action:ot,location:yt.location,delta:0})}function mt(vt){let pt=rt.location.origin!=="null"?rt.location.origin:rt.location.href,_t=typeof vt=="string"?vt:createPath(vt);return _t=_t.replace(/ $/,"%20"),invariant$1(pt,"No window.location.(origin|href) available to create URL for href: "+_t),new URL(_t,pt)}let yt={get action(){return ot},get location(){return _e(rt,st)},listen(vt){if(at)throw new Error("A history only accepts one active listener");return rt.addEventListener(PopStateEventType,ut),at=vt,()=>{rt.removeEventListener(PopStateEventType,ut),at=null}},createHref(vt){return _(rt,vt)},createURL:mt,encodeLocation(vt){let pt=mt(vt);return{pathname:pt.pathname,search:pt.search,hash:pt.hash}},push:dt,replace:ht,go(vt){return st.go(vt)}};return yt}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,_,tt){return tt===void 0&&(tt="/"),matchRoutesImpl(_e,_,tt,!1)}function matchRoutesImpl(_e,_,tt,nt){let rt=typeof _=="string"?parsePath(_):_,it=stripBasename(rt.pathname||"/",tt);if(it==null)return null;let st=flattenRoutes(_e);rankRouteBranches(st);let ot=null;for(let at=0;ot==null&&at<st.length;++at){let lt=decodePath(it);ot=matchRouteBranch(st[at],lt,nt)}return ot}function flattenRoutes(_e,_,tt,nt){_===void 0&&(_=[]),tt===void 0&&(tt=[]),nt===void 0&&(nt="");let rt=(it,st,ot)=>{let at={relativePath:ot===void 0?it.path||"":ot,caseSensitive:it.caseSensitive===!0,childrenIndex:st,route:it};at.relativePath.startsWith("/")&&(invariant$1(at.relativePath.startsWith(nt),'Absolute route path "'+at.relativePath+'" nested under path '+('"'+nt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),at.relativePath=at.relativePath.slice(nt.length));let lt=joinPaths([nt,at.relativePath]),ct=tt.concat(at);it.children&&it.children.length>0&&(invariant$1(it.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+lt+'".')),flattenRoutes(it.children,_,ct,lt)),!(it.path==null&&!it.index)&&_.push({path:lt,score:computeScore(lt,it.index),routesMeta:ct})};return _e.forEach((it,st)=>{var ot;if(it.path===""||!((ot=it.path)!=null&&ot.includes("?")))rt(it,st);else for(let at of explodeOptionalSegments(it.path))rt(it,st,at)}),_}function explodeOptionalSegments(_e){let _=_e.split("/");if(_.length===0)return[];let[tt,...nt]=_,rt=tt.endsWith("?"),it=tt.replace(/\?$/,"");if(nt.length===0)return rt?[it,""]:[it];let st=explodeOptionalSegments(nt.join("/")),ot=[];return ot.push(...st.map(at=>at===""?it:[it,at].join("/"))),rt&&ot.push(...st),ot.map(at=>_e.startsWith("/")&&at===""?"/":at)}function rankRouteBranches(_e){_e.sort((_,tt)=>_.score!==tt.score?tt.score-_.score:compareIndexes(_.routesMeta.map(nt=>nt.childrenIndex),tt.routesMeta.map(nt=>nt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,_){let tt=_e.split("/"),nt=tt.length;return tt.some(isSplat)&&(nt+=splatPenalty),_&&(nt+=indexRouteValue),tt.filter(rt=>!isSplat(rt)).reduce((rt,it)=>rt+(paramRe.test(it)?dynamicSegmentValue:it===""?emptySegmentValue:staticSegmentValue),nt)}function compareIndexes(_e,_){return _e.length===_.length&&_e.slice(0,-1).every((nt,rt)=>nt===_[rt])?_e[_e.length-1]-_[_.length-1]:0}function matchRouteBranch(_e,_,tt){let{routesMeta:nt}=_e,rt={},it="/",st=[];for(let ot=0;ot<nt.length;++ot){let at=nt[ot],lt=ot===nt.length-1,ct=it==="/"?_:_.slice(it.length)||"/",ut=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:lt},ct),dt=at.route;if(!ut&&lt&&tt&&!nt[nt.length-1].route.index&&(ut=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:!1},ct)),!ut)return null;Object.assign(rt,ut.params),st.push({params:rt,pathname:joinPaths([it,ut.pathname]),pathnameBase:normalizePathname(joinPaths([it,ut.pathnameBase])),route:dt}),ut.pathnameBase!=="/"&&(it=joinPaths([it,ut.pathnameBase]))}return st}function matchPath(_e,_){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[tt,nt]=compilePath(_e.path,_e.caseSensitive,_e.end),rt=_.match(tt);if(!rt)return null;let it=rt[0],st=it.replace(/(.)\/+$/,"$1"),ot=rt.slice(1);return{params:nt.reduce((lt,ct,ut)=>{let{paramName:dt,isOptional:ht}=ct;if(dt==="*"){let yt=ot[ut]||"";st=it.slice(0,it.length-yt.length).replace(/(.)\/+$/,"$1")}const mt=ot[ut];return ht&&!mt?lt[dt]=void 0:lt[dt]=(mt||"").replace(/%2F/g,"/"),lt},{}),pathname:it,pathnameBase:st,pattern:_e}}function compilePath(_e,_,tt){_===void 0&&(_=!1),tt===void 0&&(tt=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let nt=[],rt="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(st,ot,at)=>(nt.push({paramName:ot,isOptional:at!=null}),at?"/?([^\\/]+)?":"/([^\\/]+)"));return _e.endsWith("*")?(nt.push({paramName:"*"}),rt+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):tt?rt+="\\/*$":_e!==""&&_e!=="/"&&(rt+="(?:(?=\\/|$))"),[new RegExp(rt,_?void 0:"i"),nt]}function decodePath(_e){try{return _e.split("/").map(_=>decodeURIComponent(_).replace(/\//g,"%2F")).join("/")}catch(_){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+_+").")),_e}}function stripBasename(_e,_){if(_==="/")return _e;if(!_e.toLowerCase().startsWith(_.toLowerCase()))return null;let tt=_.endsWith("/")?_.length-1:_.length,nt=_e.charAt(tt);return nt&&nt!=="/"?null:_e.slice(tt)||"/"}function resolvePath(_e,_){_===void 0&&(_="/");let{pathname:tt,search:nt="",hash:rt=""}=typeof _e=="string"?parsePath(_e):_e;return{pathname:tt?tt.startsWith("/")?tt:resolvePathname(tt,_):_,search:normalizeSearch(nt),hash:normalizeHash(rt)}}function resolvePathname(_e,_){let tt=_.replace(/\/+$/,"").split("/");return _e.split("/").forEach(rt=>{rt===".."?tt.length>1&&tt.pop():rt!=="."&&tt.push(rt)}),tt.length>1?tt.join("/"):"/"}function getInvalidPathError(_e,_,tt,nt){return"Cannot include a '"+_e+"' character in a manually specified "+("`to."+_+"` field ["+JSON.stringify(nt)+"].  Please separate it out to the ")+("`to."+tt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_e){return _e.filter((_,tt)=>tt===0||_.route.path&&_.route.path.length>0)}function getResolveToMatches(_e,_){let tt=getPathContributingMatches(_e);return _?tt.map((nt,rt)=>rt===tt.length-1?nt.pathname:nt.pathnameBase):tt.map(nt=>nt.pathnameBase)}function resolveTo(_e,_,tt,nt){nt===void 0&&(nt=!1);let rt;typeof _e=="string"?rt=parsePath(_e):(rt=_extends$4({},_e),invariant$1(!rt.pathname||!rt.pathname.includes("?"),getInvalidPathError("?","pathname","search",rt)),invariant$1(!rt.pathname||!rt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",rt)),invariant$1(!rt.search||!rt.search.includes("#"),getInvalidPathError("#","search","hash",rt)));let it=_e===""||rt.pathname==="",st=it?"/":rt.pathname,ot;if(st==null)ot=tt;else{let ut=_.length-1;if(!nt&&st.startsWith("..")){let dt=st.split("/");for(;dt[0]==="..";)dt.shift(),ut-=1;rt.pathname=dt.join("/")}ot=ut>=0?_[ut]:"/"}let at=resolvePath(rt,ot),lt=st&&st!=="/"&&st.endsWith("/"),ct=(it||st===".")&&tt.endsWith("/");return!at.pathname.endsWith("/")&&(lt||ct)&&(at.pathname+="/"),at}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_e=>!_e||_e==="?"?"":_e.startsWith("?")?_e:"?"+_e,normalizeHash=_e=>!_e||_e==="#"?"":_e.startsWith("#")?_e:"#"+_e;function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_e,_){let{relative:tt}=_===void 0?{}:_;useInRouterContext()||invariant$1(!1);let{basename:nt,navigator:rt}=reactExports.useContext(NavigationContext),{hash:it,pathname:st,search:ot}=useResolvedPath(_e,{relative:tt}),at=st;return nt!=="/"&&(at=st==="/"?nt:joinPaths([nt,st])),rt.createHref({pathname:at,search:ot,hash:it})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$3(_e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_e)}function useNavigate(){let{isDataRoute:_e}=reactExports.useContext(RouteContext);return _e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _e=reactExports.useContext(DataRouterContext),{basename:_,future:tt,navigator:nt}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),{pathname:it}=useLocation(),st=JSON.stringify(getResolveToMatches(rt,tt.v7_relativeSplatPath)),ot=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{ot.current=!0}),reactExports.useCallback(function(lt,ct){if(ct===void 0&&(ct={}),!ot.current)return;if(typeof lt=="number"){nt.go(lt);return}let ut=resolveTo(lt,JSON.parse(st),it,ct.relative==="path");_e==null&&_!=="/"&&(ut.pathname=ut.pathname==="/"?_:joinPaths([_,ut.pathname])),(ct.replace?nt.replace:nt.push)(ut,ct.state,ct)},[_,nt,st,it,_e])}function useParams(){let{matches:_e}=reactExports.useContext(RouteContext),_=_e[_e.length-1];return _?_.params:{}}function useResolvedPath(_e,_){let{relative:tt}=_===void 0?{}:_,{future:nt}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),{pathname:it}=useLocation(),st=JSON.stringify(getResolveToMatches(rt,nt.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(_e,JSON.parse(st),it,tt==="path"),[_e,st,it,tt])}function useRoutes(_e,_){return useRoutesImpl(_e,_)}function useRoutesImpl(_e,_,tt,nt){useInRouterContext()||invariant$1(!1);let{navigator:rt}=reactExports.useContext(NavigationContext),{matches:it}=reactExports.useContext(RouteContext),st=it[it.length-1],ot=st?st.params:{};st&&st.pathname;let at=st?st.pathnameBase:"/";st&&st.route;let lt=useLocation(),ct;if(_){var ut;let vt=typeof _=="string"?parsePath(_):_;at==="/"||(ut=vt.pathname)!=null&&ut.startsWith(at)||invariant$1(!1),ct=vt}else ct=lt;let dt=ct.pathname||"/",ht=dt;if(at!=="/"){let vt=at.replace(/^\//,"").split("/");ht="/"+dt.replace(/^\//,"").split("/").slice(vt.length).join("/")}let mt=matchRoutes(_e,{pathname:ht}),yt=_renderMatches(mt&&mt.map(vt=>Object.assign({},vt,{params:Object.assign({},ot,vt.params),pathname:joinPaths([at,rt.encodeLocation?rt.encodeLocation(vt.pathname).pathname:vt.pathname]),pathnameBase:vt.pathnameBase==="/"?at:joinPaths([at,rt.encodeLocation?rt.encodeLocation(vt.pathnameBase).pathname:vt.pathnameBase])})),it,tt,nt);return _&&yt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},ct),navigationType:Action.Pop}},yt):yt}function DefaultErrorComponent(){let _e=useRouteError(),_=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),tt=_e instanceof Error?_e.stack:null,rt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_),tt?reactExports.createElement("pre",{style:rt},tt):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(_){super(_),this.state={location:_.location,revalidation:_.revalidation,error:_.error}}static getDerivedStateFromError(_){return{error:_}}static getDerivedStateFromProps(_,tt){return tt.location!==_.location||tt.revalidation!=="idle"&&_.revalidation==="idle"?{error:_.error,location:_.location,revalidation:_.revalidation}:{error:_.error!==void 0?_.error:tt.error,location:tt.location,revalidation:_.revalidation||tt.revalidation}}componentDidCatch(_,tt){console.error("React Router caught the following error during render",_,tt)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:_,match:tt,children:nt}=_e,rt=reactExports.useContext(DataRouterContext);return rt&&rt.static&&rt.staticContext&&(tt.route.errorElement||tt.route.ErrorBoundary)&&(rt.staticContext._deepestRenderedBoundaryId=tt.route.id),reactExports.createElement(RouteContext.Provider,{value:_},nt)}function _renderMatches(_e,_,tt,nt){var rt;if(_===void 0&&(_=[]),tt===void 0&&(tt=null),nt===void 0&&(nt=null),_e==null){var it;if(!tt)return null;if(tt.errors)_e=tt.matches;else if((it=nt)!=null&&it.v7_partialHydration&&_.length===0&&!tt.initialized&&tt.matches.length>0)_e=tt.matches;else return null}let st=_e,ot=(rt=tt)==null?void 0:rt.errors;if(ot!=null){let ct=st.findIndex(ut=>ut.route.id&&(ot==null?void 0:ot[ut.route.id])!==void 0);ct>=0||invariant$1(!1),st=st.slice(0,Math.min(st.length,ct+1))}let at=!1,lt=-1;if(tt&&nt&&nt.v7_partialHydration)for(let ct=0;ct<st.length;ct++){let ut=st[ct];if((ut.route.HydrateFallback||ut.route.hydrateFallbackElement)&&(lt=ct),ut.route.id){let{loaderData:dt,errors:ht}=tt,mt=ut.route.loader&&dt[ut.route.id]===void 0&&(!ht||ht[ut.route.id]===void 0);if(ut.route.lazy||mt){at=!0,lt>=0?st=st.slice(0,lt+1):st=[st[0]];break}}}return st.reduceRight((ct,ut,dt)=>{let ht,mt=!1,yt=null,vt=null;tt&&(ht=ot&&ut.route.id?ot[ut.route.id]:void 0,yt=ut.route.errorElement||defaultErrorElement,at&&(lt<0&&dt===0?(mt=!0,vt=null):lt===dt&&(mt=!0,vt=ut.route.hydrateFallbackElement||null)));let pt=_.concat(st.slice(0,dt+1)),_t=()=>{let xt;return ht?xt=yt:mt?xt=vt:ut.route.Component?xt=reactExports.createElement(ut.route.Component,null):ut.route.element?xt=ut.route.element:xt=ct,reactExports.createElement(RenderedRoute,{match:ut,routeContext:{outlet:ct,matches:pt,isDataRoute:tt!=null},children:xt})};return tt&&(ut.route.ErrorBoundary||ut.route.errorElement||dt===0)?reactExports.createElement(RenderErrorBoundary,{location:tt.location,revalidation:tt.revalidation,component:yt,error:ht,children:_t(),routeContext:{outlet:null,matches:pt,isDataRoute:!0}}):_t()},null)}var DataRouterHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e.UseRouteId="useRouteId",_e}(DataRouterStateHook$1||{});function useDataRouterContext(_e){let _=reactExports.useContext(DataRouterContext);return _||invariant$1(!1),_}function useDataRouterState(_e){let _=reactExports.useContext(DataRouterStateContext);return _||invariant$1(!1),_}function useRouteContext(_e){let _=reactExports.useContext(RouteContext);return _||invariant$1(!1),_}function useCurrentRouteId(_e){let _=useRouteContext(),tt=_.matches[_.matches.length-1];return tt.route.id||invariant$1(!1),tt.route.id}function useRouteError(){var _e;let _=reactExports.useContext(RouteErrorContext),tt=useDataRouterState(DataRouterStateHook$1.UseRouteError),nt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return _!==void 0?_:(_e=tt.errors)==null?void 0:_e[nt]}function useNavigateStable(){let{router:_e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),_=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),tt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{tt.current=!0}),reactExports.useCallback(function(rt,it){it===void 0&&(it={}),tt.current&&(typeof rt=="number"?_e.navigate(rt):_e.navigate(rt,_extends$3({fromRouteId:_},it)))},[_e,_])}function Route(_e){invariant$1(!1)}function Router(_e){let{basename:_="/",children:tt=null,location:nt,navigationType:rt=Action.Pop,navigator:it,static:st=!1,future:ot}=_e;useInRouterContext()&&invariant$1(!1);let at=_.replace(/^\/*/,"/"),lt=reactExports.useMemo(()=>({basename:at,navigator:it,static:st,future:_extends$3({v7_relativeSplatPath:!1},ot)}),[at,ot,it,st]);typeof nt=="string"&&(nt=parsePath(nt));let{pathname:ct="/",search:ut="",hash:dt="",state:ht=null,key:mt="default"}=nt,yt=reactExports.useMemo(()=>{let vt=stripBasename(ct,at);return vt==null?null:{location:{pathname:vt,search:ut,hash:dt,state:ht,key:mt},navigationType:rt}},[at,ct,ut,dt,ht,mt,rt]);return yt==null?null:reactExports.createElement(NavigationContext.Provider,{value:lt},reactExports.createElement(LocationContext.Provider,{children:tt,value:yt}))}function Routes(_e){let{children:_,location:tt}=_e;return useRoutes(createRoutesFromChildren(_),tt)}new Promise(()=>{});function createRoutesFromChildren(_e,_){_===void 0&&(_=[]);let tt=[];return reactExports.Children.forEach(_e,(nt,rt)=>{if(!reactExports.isValidElement(nt))return;let it=[..._,rt];if(nt.type===reactExports.Fragment){tt.push.apply(tt,createRoutesFromChildren(nt.props.children,it));return}nt.type!==Route&&invariant$1(!1),!nt.props.index||!nt.props.children||invariant$1(!1);let st={id:nt.props.id||it.join("-"),caseSensitive:nt.props.caseSensitive,element:nt.props.element,Component:nt.props.Component,index:nt.props.index,path:nt.props.path,loader:nt.props.loader,action:nt.props.action,errorElement:nt.props.errorElement,ErrorBoundary:nt.props.ErrorBoundary,hasErrorBoundary:nt.props.ErrorBoundary!=null||nt.props.errorElement!=null,shouldRevalidate:nt.props.shouldRevalidate,handle:nt.props.handle,lazy:nt.props.lazy};nt.props.children&&(st.children=createRoutesFromChildren(nt.props.children,it)),tt.push(st)}),tt}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$3(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}function isModifiedEvent(_e){return!!(_e.metaKey||_e.altKey||_e.ctrlKey||_e.shiftKey)}function shouldProcessLinkClick(_e,_){return _e.button===0&&(!_||_==="_self")&&!isModifiedEvent(_e)}const _excluded$d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function HashRouter(_e){let{basename:_,children:tt,future:nt,window:rt}=_e,it=reactExports.useRef();it.current==null&&(it.current=createHashHistory({window:rt,v5Compat:!0}));let st=it.current,[ot,at]=reactExports.useState({action:st.action,location:st.location}),{v7_startTransition:lt}=nt||{},ct=reactExports.useCallback(ut=>{lt&&startTransitionImpl?startTransitionImpl(()=>at(ut)):at(ut)},[at,lt]);return reactExports.useLayoutEffect(()=>st.listen(ct),[st,ct]),reactExports.createElement(Router,{basename:_,children:tt,location:ot.location,navigationType:ot.action,navigator:st,future:nt})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(_,tt){let{onClick:nt,relative:rt,reloadDocument:it,replace:st,state:ot,target:at,to:lt,preventScrollReset:ct,viewTransition:ut}=_,dt=_objectWithoutPropertiesLoose$3(_,_excluded$d),{basename:ht}=reactExports.useContext(NavigationContext),mt,yt=!1;if(typeof lt=="string"&&ABSOLUTE_URL_REGEX.test(lt)&&(mt=lt,isBrowser$2))try{let xt=new URL(window.location.href),St=lt.startsWith("//")?new URL(xt.protocol+lt):new URL(lt),At=stripBasename(St.pathname,ht);St.origin===xt.origin&&At!=null?lt=At+St.search+St.hash:yt=!0}catch{}let vt=useHref(lt,{relative:rt}),pt=useLinkClickHandler(lt,{replace:st,state:ot,target:at,preventScrollReset:ct,relative:rt,viewTransition:ut});function _t(xt){nt&&nt(xt),xt.defaultPrevented||pt(xt)}return reactExports.createElement("a",_extends$2({},dt,{href:mt||vt,onClick:yt||it?nt:_t,ref:tt,target:at}))});var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmit="useSubmit",_e.UseSubmitFetcher="useSubmitFetcher",_e.UseFetcher="useFetcher",_e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetcher="useFetcher",_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_e,_){let{target:tt,replace:nt,state:rt,preventScrollReset:it,relative:st,viewTransition:ot}=_===void 0?{}:_,at=useNavigate(),lt=useLocation(),ct=useResolvedPath(_e,{relative:st});return reactExports.useCallback(ut=>{if(shouldProcessLinkClick(ut,tt)){ut.preventDefault();let dt=nt!==void 0?nt:createPath(lt)===createPath(ct);at(_e,{replace:dt,state:rt,preventScrollReset:it,relative:st,viewTransition:ot})}},[lt,at,ct,nt,rt,tt,_e,it,st,ot])}function createDOMMotionComponentProxy(_e){if(typeof Proxy>"u")return _e;const _=new Map,tt=(...nt)=>_e(...nt);return new Proxy(tt,{get:(nt,rt)=>rt==="create"?_e:(_.has(rt)||_.set(rt,_e(rt)),_.get(rt))})}function isAnimationControls(_e){return _e!==null&&typeof _e=="object"&&typeof _e.start=="function"}const isKeyframesTarget=_e=>Array.isArray(_e);function shallowCompare(_e,_){if(!Array.isArray(_))return!1;const tt=_.length;if(tt!==_e.length)return!1;for(let nt=0;nt<tt;nt++)if(_[nt]!==_e[nt])return!1;return!0}function isVariantLabel(_e){return typeof _e=="string"||Array.isArray(_e)}function getValueState(_e){const _=[{},{}];return _e==null||_e.values.forEach((tt,nt)=>{_[0][nt]=tt.get(),_[1][nt]=tt.getVelocity()}),_}function resolveVariantFromProps(_e,_,tt,nt){if(typeof _=="function"){const[rt,it]=getValueState(nt);_=_(tt!==void 0?tt:_e.custom,rt,it)}if(typeof _=="string"&&(_=_e.variants&&_e.variants[_]),typeof _=="function"){const[rt,it]=getValueState(nt);_=_(tt!==void 0?tt:_e.custom,rt,it)}return _}function resolveVariant(_e,_,tt){const nt=_e.getProps();return resolveVariantFromProps(nt,_,tt!==void 0?tt:nt.custom,_e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=_e=>_e*1e3,millisecondsToSeconds=_e=>_e/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=_e=>({type:"spring",stiffness:550,damping:_e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(_e,{keyframes:_})=>_.length>2?keyframesTransition:transformProps.has(_e)?_e.startsWith("scale")?criticallyDampedSpring(_[1]):underDampedSpring:ease;function getValueTransition(_e,_){return _e?_e[_]||_e.default||_e:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull$1=_e=>_e!==null;function getFinalKeyframe(_e,{repeat:_,repeatType:tt="loop"},nt){const rt=_e.filter(isNotNull$1),it=_&&tt!=="loop"&&_%2===1?0:rt.length-1;return!it||nt===void 0?rt[it]:nt}const noop$2=_e=>_e;function createRenderStep(_e){let _=new Set,tt=new Set,nt=!1,rt=!1;const it=new WeakSet;let st={delta:0,timestamp:0,isProcessing:!1};function ot(lt){it.has(lt)&&(at.schedule(lt),_e()),lt(st)}const at={schedule:(lt,ct=!1,ut=!1)=>{const ht=ut&&nt?_:tt;return ct&&it.add(lt),ht.has(lt)||ht.add(lt),lt},cancel:lt=>{tt.delete(lt),it.delete(lt)},process:lt=>{if(st=lt,nt){rt=!0;return}nt=!0,[_,tt]=[tt,_],tt.clear(),_.forEach(ot),nt=!1,rt&&(rt=!1,at.process(lt))}};return at}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(_e,_){let tt=!1,nt=!0;const rt={delta:0,timestamp:0,isProcessing:!1},it=()=>tt=!0,st=stepsOrder.reduce((pt,_t)=>(pt[_t]=createRenderStep(it),pt),{}),{read:ot,resolveKeyframes:at,update:lt,preRender:ct,render:ut,postRender:dt}=st,ht=()=>{const pt=performance.now();tt=!1,rt.delta=nt?1e3/60:Math.max(Math.min(pt-rt.timestamp,maxElapsed),1),rt.timestamp=pt,rt.isProcessing=!0,ot.process(rt),at.process(rt),lt.process(rt),ct.process(rt),ut.process(rt),dt.process(rt),rt.isProcessing=!1,tt&&_&&(nt=!1,_e(ht))},mt=()=>{tt=!0,nt=!0,rt.isProcessing||_e(ht)};return{schedule:stepsOrder.reduce((pt,_t)=>{const xt=st[_t];return pt[_t]=(St,At=!1,bt=!1)=>(tt||mt(),xt.schedule(St,At,bt)),pt},{}),cancel:pt=>{for(let _t=0;_t<stepsOrder.length;_t++)st[stepsOrder[_t]].cancel(pt)},state:rt,steps:st}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),calcBezier=(_e,_,tt)=>(((1-3*tt+3*_)*_e+(3*tt-6*_))*_e+3*_)*_e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(_e,_,tt,nt,rt){let it,st,ot=0;do st=_+(tt-_)/2,it=calcBezier(st,nt,rt)-_e,it>0?tt=st:_=st;while(Math.abs(it)>subdivisionPrecision&&++ot<subdivisionMaxIterations);return st}function cubicBezier(_e,_,tt,nt){if(_e===_&&tt===nt)return noop$2;const rt=it=>binarySubdivide(it,0,1,_e,tt);return it=>it===0||it===1?it:calcBezier(rt(it),_,nt)}const mirrorEasing=_e=>_=>_<=.5?_e(2*_)/2:(2-_e(2*(1-_)))/2,reverseEasing=_e=>_=>1-_e(1-_),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=_e=>(_e*=2)<1?.5*backIn(_e):.5*(2-Math.pow(2,-10*(_e-1))),circIn=_e=>1-Math.sin(Math.acos(_e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=_e=>/^0[^.\s]+$/u.test(_e);function isNone(_e){return typeof _e=="number"?_e===0:_e!==null?_e==="none"||_e==="0"||isZeroValueString(_e):!0}let invariant=noop$2;const isNumericalString=_e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(_e),checkStringStartsWith=_e=>_=>typeof _=="string"&&_.startsWith(_e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=_e=>startsAsVariableToken(_e)?singleCssVariableRegex.test(_e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(_e){const _=splitCSSVariableRegex.exec(_e);if(!_)return[,];const[,tt,nt,rt]=_;return[`--${tt??nt}`,rt]}function getVariableValue(_e,_,tt=1){const[nt,rt]=parseCSSVariable(_e);if(!nt)return;const it=window.getComputedStyle(_).getPropertyValue(nt);if(it){const st=it.trim();return isNumericalString(st)?parseFloat(st):st}return isCSSVariableToken(rt)?getVariableValue(rt,_,tt+1):rt}const clamp$4=(_e,_,tt)=>tt>_?_:tt<_e?_e:tt,number$2={test:_e=>typeof _e=="number",parse:parseFloat,transform:_e=>_e},alpha={...number$2,transform:_e=>clamp$4(0,1,_e)},scale$1={...number$2,default:1},createUnitType=_e=>({test:_=>typeof _=="string"&&_.endsWith(_e)&&_.split(" ").length===1,parse:parseFloat,transform:_=>`${_}${_e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px$1=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:_e=>percent.parse(_e)/100,transform:_e=>percent.transform(_e*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=_e=>_e===number$2||_e===px$1,getPosFromMatrix=(_e,_)=>parseFloat(_e.split(", ")[_]),getTranslateFromMatrix=(_e,_)=>(tt,{transform:nt})=>{if(nt==="none"||!nt)return 0;const rt=nt.match(/^matrix3d\((.+)\)$/u);if(rt)return getPosFromMatrix(rt[1],_);{const it=nt.match(/^matrix\((.+)\)$/u);return it?getPosFromMatrix(it[1],_e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(_e=>!transformKeys.has(_e));function removeNonTranslationalTransform(_e){const _=[];return nonTranslationalTransformKeys.forEach(tt=>{const nt=_e.getValue(tt);nt!==void 0&&(_.push([tt,nt.get()]),nt.set(tt.startsWith("scale")?1:0))}),_}const positionalValues={width:({x:_e},{paddingLeft:_="0",paddingRight:tt="0"})=>_e.max-_e.min-parseFloat(_)-parseFloat(tt),height:({y:_e},{paddingTop:_="0",paddingBottom:tt="0"})=>_e.max-_e.min-parseFloat(_)-parseFloat(tt),top:(_e,{top:_})=>parseFloat(_),left:(_e,{left:_})=>parseFloat(_),bottom:({y:_e},{top:_})=>parseFloat(_)+(_e.max-_e.min),right:({x:_e},{left:_})=>parseFloat(_)+(_e.max-_e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=_e=>_=>_.test(_e),auto={test:_e=>_e==="auto",parse:_e=>_e},dimensionValueTypes=[number$2,px$1,percent,degrees,vw,vh,auto],findDimensionValueType=_e=>dimensionValueTypes.find(testValueType(_e)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const _e=Array.from(toResolve).filter(nt=>nt.needsMeasurement),_=new Set(_e.map(nt=>nt.element)),tt=new Map;_.forEach(nt=>{const rt=removeNonTranslationalTransform(nt);rt.length&&(tt.set(nt,rt),nt.render())}),_e.forEach(nt=>nt.measureInitialState()),_.forEach(nt=>{nt.render();const rt=tt.get(nt);rt&&rt.forEach(([it,st])=>{var ot;(ot=nt.getValue(it))===null||ot===void 0||ot.set(st)})}),_e.forEach(nt=>nt.measureEndState()),_e.forEach(nt=>{nt.suspendedScrollY!==void 0&&window.scrollTo(0,nt.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(_e=>_e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(_e=>{_e.readKeyframes(),_e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(_,tt,nt,rt,it,st=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[..._],this.onComplete=tt,this.name=nt,this.motionValue=rt,this.element=it,this.isAsync=st}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:_,name:tt,element:nt,motionValue:rt}=this;for(let it=0;it<_.length;it++)if(_[it]===null)if(it===0){const st=rt==null?void 0:rt.get(),ot=_[_.length-1];if(st!==void 0)_[0]=st;else if(nt&&tt){const at=nt.readValue(tt,ot);at!=null&&(_[0]=at)}_[0]===void 0&&(_[0]=ot),rt&&st===void 0&&rt.set(_[0])}else _[it]=_[it-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize$6=_e=>Math.round(_e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(_e){return _e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(_e,_)=>tt=>!!(typeof tt=="string"&&singleColorRegex.test(tt)&&tt.startsWith(_e)||_&&!isNullish(tt)&&Object.prototype.hasOwnProperty.call(tt,_)),splitColor=(_e,_,tt)=>nt=>{if(typeof nt!="string")return nt;const[rt,it,st,ot]=nt.match(floatRegex);return{[_e]:parseFloat(rt),[_]:parseFloat(it),[tt]:parseFloat(st),alpha:ot!==void 0?parseFloat(ot):1}},clampRgbUnit=_e=>clamp$4(0,255,_e),rgbUnit={...number$2,transform:_e=>Math.round(clampRgbUnit(_e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:_e,green:_,blue:tt,alpha:nt=1})=>"rgba("+rgbUnit.transform(_e)+", "+rgbUnit.transform(_)+", "+rgbUnit.transform(tt)+", "+sanitize$6(alpha.transform(nt))+")"};function parseHex(_e){let _="",tt="",nt="",rt="";return _e.length>5?(_=_e.substring(1,3),tt=_e.substring(3,5),nt=_e.substring(5,7),rt=_e.substring(7,9)):(_=_e.substring(1,2),tt=_e.substring(2,3),nt=_e.substring(3,4),rt=_e.substring(4,5),_+=_,tt+=tt,nt+=nt,rt+=rt),{red:parseInt(_,16),green:parseInt(tt,16),blue:parseInt(nt,16),alpha:rt?parseInt(rt,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:_e,saturation:_,lightness:tt,alpha:nt=1})=>"hsla("+Math.round(_e)+", "+percent.transform(sanitize$6(_))+", "+percent.transform(sanitize$6(tt))+", "+sanitize$6(alpha.transform(nt))+")"},color$1={test:_e=>rgba.test(_e)||hex.test(_e)||hsla.test(_e),parse:_e=>rgba.test(_e)?rgba.parse(_e):hsla.test(_e)?hsla.parse(_e):hex.parse(_e),transform:_e=>typeof _e=="string"?_e:_e.hasOwnProperty("red")?rgba.transform(_e):hsla.transform(_e)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(_e){var _,tt;return isNaN(_e)&&typeof _e=="string"&&(((_=_e.match(floatRegex))===null||_===void 0?void 0:_.length)||0)+(((tt=_e.match(colorRegex))===null||tt===void 0?void 0:tt.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(_e){const _=_e.toString(),tt=[],nt={color:[],number:[],var:[]},rt=[];let it=0;const ot=_.replace(complexRegex,at=>(color$1.test(at)?(nt.color.push(it),rt.push(COLOR_TOKEN),tt.push(color$1.parse(at))):at.startsWith(VAR_FUNCTION_TOKEN)?(nt.var.push(it),rt.push(VAR_TOKEN),tt.push(at)):(nt.number.push(it),rt.push(NUMBER_TOKEN),tt.push(parseFloat(at))),++it,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:tt,split:ot,indexes:nt,types:rt}}function parseComplexValue(_e){return analyseComplexValue(_e).values}function createTransformer(_e){const{split:_,types:tt}=analyseComplexValue(_e),nt=_.length;return rt=>{let it="";for(let st=0;st<nt;st++)if(it+=_[st],rt[st]!==void 0){const ot=tt[st];ot===NUMBER_TOKEN?it+=sanitize$6(rt[st]):ot===COLOR_TOKEN?it+=color$1.transform(rt[st]):it+=rt[st]}return it}}const convertNumbersToZero=_e=>typeof _e=="number"?0:_e;function getAnimatableNone$1(_e){const _=parseComplexValue(_e);return createTransformer(_e)(_.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(_e){const[_,tt]=_e.slice(0,-1).split("(");if(_==="drop-shadow")return _e;const[nt]=tt.match(floatRegex)||[];if(!nt)return _e;const rt=tt.replace(nt,"");let it=maxDefaults.has(_)?1:0;return nt!==tt&&(it*=100),_+"("+it+rt+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:_e=>{const _=_e.match(functionRegex);return _?_.map(applyDefaultFilter).join(" "):_e}},browserNumberValueTypes={borderWidth:px$1,borderTopWidth:px$1,borderRightWidth:px$1,borderBottomWidth:px$1,borderLeftWidth:px$1,borderRadius:px$1,radius:px$1,borderTopLeftRadius:px$1,borderTopRightRadius:px$1,borderBottomRightRadius:px$1,borderBottomLeftRadius:px$1,width:px$1,maxWidth:px$1,height:px$1,maxHeight:px$1,top:px$1,right:px$1,bottom:px$1,left:px$1,padding:px$1,paddingTop:px$1,paddingRight:px$1,paddingBottom:px$1,paddingLeft:px$1,margin:px$1,marginTop:px$1,marginRight:px$1,marginBottom:px$1,marginLeft:px$1,backgroundPositionX:px$1,backgroundPositionY:px$1},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale:scale$1,scaleX:scale$1,scaleY:scale$1,scaleZ:scale$1,skew:degrees,skewX:degrees,skewY:degrees,distance:px$1,translateX:px$1,translateY:px$1,translateZ:px$1,x:px$1,y:px$1,z:px$1,perspective:px$1,transformPerspective:px$1,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px$1},int={...number$2,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px$1,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=_e=>defaultValueTypes[_e];function getAnimatableNone(_e,_){let tt=getDefaultValueType(_e);return tt!==filter&&(tt=complex),tt.getAnimatableNone?tt.getAnimatableNone(_):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(_e,_,tt){let nt=0,rt;for(;nt<_e.length&&!rt;){const it=_e[nt];typeof it=="string"&&!invalidTemplates.has(it)&&analyseComplexValue(it).values.length&&(rt=_e[nt]),nt++}if(rt&&tt)for(const it of _)_e[it]=getAnimatableNone(tt,rt)}class DOMKeyframesResolver extends KeyframeResolver{constructor(_,tt,nt,rt,it){super(_,tt,nt,rt,it,!0)}readKeyframes(){const{unresolvedKeyframes:_,element:tt,name:nt}=this;if(!tt||!tt.current)return;super.readKeyframes();for(let at=0;at<_.length;at++){let lt=_[at];if(typeof lt=="string"&&(lt=lt.trim(),isCSSVariableToken(lt))){const ct=getVariableValue(lt,tt.current);ct!==void 0&&(_[at]=ct),at===_.length-1&&(this.finalKeyframe=lt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(nt)||_.length!==2)return;const[rt,it]=_,st=findDimensionValueType(rt),ot=findDimensionValueType(it);if(st!==ot)if(isNumOrPxType(st)&&isNumOrPxType(ot))for(let at=0;at<_.length;at++){const lt=_[at];typeof lt=="string"&&(_[at]=parseFloat(lt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:_,name:tt}=this,nt=[];for(let rt=0;rt<_.length;rt++)isNone(_[rt])&&nt.push(rt);nt.length&&makeNoneKeyframesAnimatable(_,nt,tt)}measureInitialState(){const{element:_,unresolvedKeyframes:tt,name:nt}=this;if(!_||!_.current)return;nt==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[nt](_.measureViewportBox(),window.getComputedStyle(_.current)),tt[0]=this.measuredOrigin;const rt=tt[tt.length-1];rt!==void 0&&_.getValue(nt,rt).jump(rt,!1)}measureEndState(){var _;const{element:tt,name:nt,unresolvedKeyframes:rt}=this;if(!tt||!tt.current)return;const it=tt.getValue(nt);it&&it.jump(this.measuredOrigin,!1);const st=rt.length-1,ot=rt[st];rt[st]=positionalValues[nt](tt.measureViewportBox(),window.getComputedStyle(tt.current)),ot!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ot),!((_=this.removedTransforms)===null||_===void 0)&&_.length&&this.removedTransforms.forEach(([at,lt])=>{tt.getValue(at).set(lt)}),this.resolveNoneKeyframes()}}function isGenerator(_e){return typeof _e=="function"}let now$3;function clearTime(){now$3=void 0}const time={now:()=>(now$3===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$3),set:_e=>{now$3=_e,queueMicrotask(clearTime)}},isAnimatable=(_e,_)=>_==="zIndex"?!1:!!(typeof _e=="number"||Array.isArray(_e)||typeof _e=="string"&&(complex.test(_e)||_e==="0")&&!_e.startsWith("url("));function hasKeyframesChanged(_e){const _=_e[0];if(_e.length===1)return!0;for(let tt=0;tt<_e.length;tt++)if(_e[tt]!==_)return!0}function canAnimate(_e,_,tt,nt){const rt=_e[0];if(rt===null)return!1;if(_==="display"||_==="visibility")return!0;const it=_e[_e.length-1],st=isAnimatable(rt,_),ot=isAnimatable(it,_);return!st||!ot?!1:hasKeyframesChanged(_e)||(tt==="spring"||isGenerator(tt))&&nt}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:_=!0,delay:tt=0,type:nt="keyframes",repeat:rt=0,repeatDelay:it=0,repeatType:st="loop",...ot}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:_,delay:tt,type:nt,repeat:rt,repeatDelay:it,repeatType:st,...ot},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(_,tt){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:nt,type:rt,velocity:it,delay:st,onComplete:ot,onUpdate:at,isGenerator:lt}=this.options;if(!lt&&!canAnimate(_,nt,rt,it))if(st)this.options.duration=0;else{at==null||at(getFinalKeyframe(_,this.options,tt)),ot==null||ot(),this.resolveFinishedPromise();return}const ct=this.initPlayback(_,tt);ct!==!1&&(this._resolved={keyframes:_,finalKeyframe:tt,...ct},this.onPostResolved())}onPostResolved(){}then(_,tt){return this.currentFinishedPromise.then(_,tt)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(_=>{this.resolveFinishedPromise=_})}}function velocityPerSecond(_e,_){return _?_e*(1e3/_):0}const velocitySampleDuration=5;function calcGeneratorVelocity(_e,_,tt){const nt=Math.max(_-velocitySampleDuration,0);return velocityPerSecond(tt-_e(nt),_-nt)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:_e=800,bounce:_=.25,velocity:tt=0,mass:nt=1}){let rt,it,st=1-_;st=clamp$4(minDamping,maxDamping,st),_e=clamp$4(minDuration,maxDuration$1,millisecondsToSeconds(_e)),st<1?(rt=lt=>{const ct=lt*st,ut=ct*_e,dt=ct-tt,ht=calcAngularFreq(lt,st),mt=Math.exp(-ut);return safeMin-dt/ht*mt},it=lt=>{const ut=lt*st*_e,dt=ut*tt+tt,ht=Math.pow(st,2)*Math.pow(lt,2)*_e,mt=Math.exp(-ut),yt=calcAngularFreq(Math.pow(lt,2),st);return(-rt(lt)+safeMin>0?-1:1)*((dt-ht)*mt)/yt}):(rt=lt=>{const ct=Math.exp(-lt*_e),ut=(lt-tt)*_e+1;return-safeMin+ct*ut},it=lt=>{const ct=Math.exp(-lt*_e),ut=(tt-lt)*(_e*_e);return ct*ut});const ot=5/_e,at=approximateRoot(rt,it,ot);if(_e=secondsToMilliseconds(_e),isNaN(at))return{stiffness:100,damping:10,duration:_e};{const lt=Math.pow(at,2)*nt;return{stiffness:lt,damping:st*2*Math.sqrt(nt*lt),duration:_e}}}const rootIterations=12;function approximateRoot(_e,_,tt){let nt=tt;for(let rt=1;rt<rootIterations;rt++)nt=nt-_e(nt)/_(nt);return nt}function calcAngularFreq(_e,_){return _e*Math.sqrt(1-_*_)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(_e,_){return _.some(tt=>_e[tt]!==void 0)}function getSpringOptions(_e){let _={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,..._e};if(!isSpringType(_e,physicsKeys)&&isSpringType(_e,durationKeys)){const tt=findSpring(_e);_={..._,...tt,mass:1},_.isResolvedFromDuration=!0}return _}function spring({keyframes:_e,restDelta:_,restSpeed:tt,...nt}){const rt=_e[0],it=_e[_e.length-1],st={done:!1,value:rt},{stiffness:ot,damping:at,mass:lt,duration:ct,velocity:ut,isResolvedFromDuration:dt}=getSpringOptions({...nt,velocity:-millisecondsToSeconds(nt.velocity||0)}),ht=ut||0,mt=at/(2*Math.sqrt(ot*lt)),yt=it-rt,vt=millisecondsToSeconds(Math.sqrt(ot/lt)),pt=Math.abs(yt)<5;tt||(tt=pt?.01:2),_||(_=pt?.005:.5);let _t;if(mt<1){const xt=calcAngularFreq(vt,mt);_t=St=>{const At=Math.exp(-mt*vt*St);return it-At*((ht+mt*vt*yt)/xt*Math.sin(xt*St)+yt*Math.cos(xt*St))}}else if(mt===1)_t=xt=>it-Math.exp(-vt*xt)*(yt+(ht+vt*yt)*xt);else{const xt=vt*Math.sqrt(mt*mt-1);_t=St=>{const At=Math.exp(-mt*vt*St),bt=Math.min(xt*St,300);return it-At*((ht+mt*vt*yt)*Math.sinh(bt)+xt*yt*Math.cosh(bt))/xt}}return{calculatedDuration:dt&&ct||null,next:xt=>{const St=_t(xt);if(dt)st.done=xt>=ct;else{let At=0;mt<1&&(At=xt===0?secondsToMilliseconds(ht):calcGeneratorVelocity(_t,xt,St));const bt=Math.abs(At)<=tt,Et=Math.abs(it-St)<=_;st.done=bt&&Et}return st.value=st.done?it:St,st}}}function inertia({keyframes:_e,velocity:_=0,power:tt=.8,timeConstant:nt=325,bounceDamping:rt=10,bounceStiffness:it=500,modifyTarget:st,min:ot,max:at,restDelta:lt=.5,restSpeed:ct}){const ut=_e[0],dt={done:!1,value:ut},ht=wt=>ot!==void 0&&wt<ot||at!==void 0&&wt>at,mt=wt=>ot===void 0?at:at===void 0||Math.abs(ot-wt)<Math.abs(at-wt)?ot:at;let yt=tt*_;const vt=ut+yt,pt=st===void 0?vt:st(vt);pt!==vt&&(yt=pt-ut);const _t=wt=>-yt*Math.exp(-wt/nt),xt=wt=>pt+_t(wt),St=wt=>{const Rt=_t(wt),Tt=xt(wt);dt.done=Math.abs(Rt)<=lt,dt.value=dt.done?pt:Tt};let At,bt;const Et=wt=>{ht(dt.value)&&(At=wt,bt=spring({keyframes:[dt.value,mt(dt.value)],velocity:calcGeneratorVelocity(xt,wt,dt.value),damping:rt,stiffness:it,restDelta:lt,restSpeed:ct}))};return Et(0),{calculatedDuration:null,next:wt=>{let Rt=!1;return!bt&&At===void 0&&(Rt=!0,St(wt),Et(wt)),At!==void 0&&wt>=At?bt.next(wt-At):(!Rt&&St(wt),dt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=_e=>Array.isArray(_e)&&typeof _e[0]!="number",isBezierDefinition=_e=>Array.isArray(_e)&&typeof _e[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=_e=>{if(isBezierDefinition(_e)){invariant(_e.length===4);const[_,tt,nt,rt]=_e;return cubicBezier(_,tt,nt,rt)}else if(typeof _e=="string")return invariant(easingLookup[_e]!==void 0),easingLookup[_e];return _e},combineFunctions=(_e,_)=>tt=>_(_e(tt)),pipe=(..._e)=>_e.reduce(combineFunctions),progress=(_e,_,tt)=>{const nt=_-_e;return nt===0?1:(tt-_e)/nt},mixNumber$1=(_e,_,tt)=>_e+(_-_e)*tt;function hueToRgb(_e,_,tt){return tt<0&&(tt+=1),tt>1&&(tt-=1),tt<1/6?_e+(_-_e)*6*tt:tt<1/2?_:tt<2/3?_e+(_-_e)*(2/3-tt)*6:_e}function hslaToRgba({hue:_e,saturation:_,lightness:tt,alpha:nt}){_e/=360,_/=100,tt/=100;let rt=0,it=0,st=0;if(!_)rt=it=st=tt;else{const ot=tt<.5?tt*(1+_):tt+_-tt*_,at=2*tt-ot;rt=hueToRgb(at,ot,_e+1/3),it=hueToRgb(at,ot,_e),st=hueToRgb(at,ot,_e-1/3)}return{red:Math.round(rt*255),green:Math.round(it*255),blue:Math.round(st*255),alpha:nt}}function mixImmediate(_e,_){return tt=>tt>0?_:_e}const mixLinearColor=(_e,_,tt)=>{const nt=_e*_e,rt=tt*(_*_-nt)+nt;return rt<0?0:Math.sqrt(rt)},colorTypes=[hex,rgba,hsla],getColorType=_e=>colorTypes.find(_=>_.test(_e));function asRGBA(_e){const _=getColorType(_e);if(!_)return!1;let tt=_.parse(_e);return _===hsla&&(tt=hslaToRgba(tt)),tt}const mixColor=(_e,_)=>{const tt=asRGBA(_e),nt=asRGBA(_);if(!tt||!nt)return mixImmediate(_e,_);const rt={...tt};return it=>(rt.red=mixLinearColor(tt.red,nt.red,it),rt.green=mixLinearColor(tt.green,nt.green,it),rt.blue=mixLinearColor(tt.blue,nt.blue,it),rt.alpha=mixNumber$1(tt.alpha,nt.alpha,it),rgba.transform(rt))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(_e,_){return invisibleValues.has(_e)?tt=>tt<=0?_e:_:tt=>tt>=1?_:_e}function mixNumber(_e,_){return tt=>mixNumber$1(_e,_,tt)}function getMixer(_e){return typeof _e=="number"?mixNumber:typeof _e=="string"?isCSSVariableToken(_e)?mixImmediate:color$1.test(_e)?mixColor:mixComplex:Array.isArray(_e)?mixArray:typeof _e=="object"?color$1.test(_e)?mixColor:mixObject:mixImmediate}function mixArray(_e,_){const tt=[..._e],nt=tt.length,rt=_e.map((it,st)=>getMixer(it)(it,_[st]));return it=>{for(let st=0;st<nt;st++)tt[st]=rt[st](it);return tt}}function mixObject(_e,_){const tt={..._e,..._},nt={};for(const rt in tt)_e[rt]!==void 0&&_[rt]!==void 0&&(nt[rt]=getMixer(_e[rt])(_e[rt],_[rt]));return rt=>{for(const it in nt)tt[it]=nt[it](rt);return tt}}function matchOrder(_e,_){var tt;const nt=[],rt={color:0,var:0,number:0};for(let it=0;it<_.values.length;it++){const st=_.types[it],ot=_e.indexes[st][rt[st]],at=(tt=_e.values[ot])!==null&&tt!==void 0?tt:0;nt[it]=at,rt[st]++}return nt}const mixComplex=(_e,_)=>{const tt=complex.createTransformer(_),nt=analyseComplexValue(_e),rt=analyseComplexValue(_);return nt.indexes.var.length===rt.indexes.var.length&&nt.indexes.color.length===rt.indexes.color.length&&nt.indexes.number.length>=rt.indexes.number.length?invisibleValues.has(_e)&&!rt.values.length||invisibleValues.has(_)&&!nt.values.length?mixVisibility(_e,_):pipe(mixArray(matchOrder(nt,rt),rt.values),tt):mixImmediate(_e,_)};function mix(_e,_,tt){return typeof _e=="number"&&typeof _=="number"&&typeof tt=="number"?mixNumber$1(_e,_,tt):getMixer(_e)(_e,_)}function createMixers(_e,_,tt){const nt=[],rt=tt||mix,it=_e.length-1;for(let st=0;st<it;st++){let ot=rt(_e[st],_e[st+1]);if(_){const at=Array.isArray(_)?_[st]||noop$2:_;ot=pipe(at,ot)}nt.push(ot)}return nt}function interpolate(_e,_,{clamp:tt=!0,ease:nt,mixer:rt}={}){const it=_e.length;if(invariant(it===_.length),it===1)return()=>_[0];if(it===2&&_e[0]===_e[1])return()=>_[1];_e[0]>_e[it-1]&&(_e=[..._e].reverse(),_=[..._].reverse());const st=createMixers(_,nt,rt),ot=st.length,at=lt=>{let ct=0;if(ot>1)for(;ct<_e.length-2&&!(lt<_e[ct+1]);ct++);const ut=progress(_e[ct],_e[ct+1],lt);return st[ct](ut)};return tt?lt=>at(clamp$4(_e[0],_e[it-1],lt)):at}function fillOffset(_e,_){const tt=_e[_e.length-1];for(let nt=1;nt<=_;nt++){const rt=progress(0,_,nt);_e.push(mixNumber$1(tt,1,rt))}}function defaultOffset(_e){const _=[0];return fillOffset(_,_e.length-1),_}function convertOffsetToTimes(_e,_){return _e.map(tt=>tt*_)}function defaultEasing(_e,_){return _e.map(()=>_||easeInOut).splice(0,_e.length-1)}function keyframes$1({duration:_e=300,keyframes:_,times:tt,ease:nt="easeInOut"}){const rt=isEasingArray(nt)?nt.map(easingDefinitionToFunction):easingDefinitionToFunction(nt),it={done:!1,value:_[0]},st=convertOffsetToTimes(tt&&tt.length===_.length?tt:defaultOffset(_),_e),ot=interpolate(st,_,{ease:Array.isArray(rt)?rt:defaultEasing(_,rt)});return{calculatedDuration:_e,next:at=>(it.value=ot(at),it.done=at>=_e,it)}}const maxGeneratorDuration=2e4;function calcGeneratorDuration(_e){let _=0;const tt=50;let nt=_e.next(_);for(;!nt.done&&_<maxGeneratorDuration;)_+=tt,nt=_e.next(_);return _>=maxGeneratorDuration?1/0:_}const frameloopDriver=_e=>{const _=({timestamp:tt})=>_e(tt);return{start:()=>frame.update(_,!0),stop:()=>cancelFrame(_),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes$1,keyframes:keyframes$1,spring},percentToProgress=_e=>_e/100;class MainThreadAnimation extends BaseAnimation{constructor(_){super(_),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:at}=this.options;at&&at()};const{name:tt,motionValue:nt,element:rt,keyframes:it}=this.options,st=(rt==null?void 0:rt.KeyframeResolver)||KeyframeResolver,ot=(at,lt)=>this.onKeyframesResolved(at,lt);this.resolver=new st(it,ot,tt,nt,rt),this.resolver.scheduleResolve()}initPlayback(_){const{type:tt="keyframes",repeat:nt=0,repeatDelay:rt=0,repeatType:it,velocity:st=0}=this.options,ot=isGenerator(tt)?tt:generators[tt]||keyframes$1;let at,lt;ot!==keyframes$1&&typeof _[0]!="number"&&(at=pipe(percentToProgress,mix(_[0],_[1])),_=[0,100]);const ct=ot({...this.options,keyframes:_});it==="mirror"&&(lt=ot({...this.options,keyframes:[..._].reverse(),velocity:-st})),ct.calculatedDuration===null&&(ct.calculatedDuration=calcGeneratorDuration(ct));const{calculatedDuration:ut}=ct,dt=ut+rt,ht=dt*(nt+1)-rt;return{generator:ct,mirroredGenerator:lt,mapPercentToKeyframes:at,calculatedDuration:ut,resolvedDuration:dt,totalDuration:ht}}onPostResolved(){const{autoplay:_=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!_?this.pause():this.state=this.pendingPlayState}tick(_,tt=!1){const{resolved:nt}=this;if(!nt){const{keyframes:wt}=this.options;return{done:!0,value:wt[wt.length-1]}}const{finalKeyframe:rt,generator:it,mirroredGenerator:st,mapPercentToKeyframes:ot,keyframes:at,calculatedDuration:lt,totalDuration:ct,resolvedDuration:ut}=nt;if(this.startTime===null)return it.next(0);const{delay:dt,repeat:ht,repeatType:mt,repeatDelay:yt,onUpdate:vt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,_):this.speed<0&&(this.startTime=Math.min(_-ct/this.speed,this.startTime)),tt?this.currentTime=_:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(_-this.startTime)*this.speed;const pt=this.currentTime-dt*(this.speed>=0?1:-1),_t=this.speed>=0?pt<0:pt>ct;this.currentTime=Math.max(pt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=ct);let xt=this.currentTime,St=it;if(ht){const wt=Math.min(this.currentTime,ct)/ut;let Rt=Math.floor(wt),Tt=wt%1;!Tt&&wt>=1&&(Tt=1),Tt===1&&Rt--,Rt=Math.min(Rt,ht+1),!!(Rt%2)&&(mt==="reverse"?(Tt=1-Tt,yt&&(Tt-=yt/ut)):mt==="mirror"&&(St=st)),xt=clamp$4(0,1,Tt)*ut}const At=_t?{done:!1,value:at[0]}:St.next(xt);ot&&(At.value=ot(At.value));let{done:bt}=At;!_t&&lt!==null&&(bt=this.speed>=0?this.currentTime>=ct:this.currentTime<=0);const Et=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&bt);return Et&&rt!==void 0&&(At.value=getFinalKeyframe(at,this.options,rt)),vt&&vt(At.value),Et&&this.finish(),At}get duration(){const{resolved:_}=this;return _?millisecondsToSeconds(_.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(_){_=secondsToMilliseconds(_),this.currentTime=_,this.holdTime!==null||this.speed===0?this.holdTime=_:this.driver&&(this.startTime=this.driver.now()-_/this.speed)}get speed(){return this.playbackSpeed}set speed(_){const tt=this.playbackSpeed!==_;this.playbackSpeed=_,tt&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:_=frameloopDriver,onPlay:tt,startTime:nt}=this.options;this.driver||(this.driver=_(it=>this.tick(it))),tt&&tt();const rt=this.driver.now();this.holdTime!==null?this.startTime=rt-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=rt):this.startTime=nt??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var _;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(_=this.currentTime)!==null&&_!==void 0?_:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:_}=this.options;_&&_()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(_){return this.startTime=0,this.tick(_,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),resolution=10,generateLinearEasing=(_e,_)=>{let tt="";const nt=Math.max(Math.round(_/resolution),2);for(let rt=0;rt<nt;rt++)tt+=_e(progress(0,nt-1,rt))+", ";return`linear(${tt.substring(0,tt.length-2)})`};function memo(_e){let _;return()=>(_===void 0&&(_=_e()),_)}const supportsFlags={linearEasing:void 0};function memoSupports(_e,_){const tt=memo(_e);return()=>{var nt;return(nt=supportsFlags[_])!==null&&nt!==void 0?nt:tt()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(_e){return!!(typeof _e=="function"&&supportsLinearEasing()||!_e||typeof _e=="string"&&(_e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(_e)||Array.isArray(_e)&&_e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([_e,_,tt,nt])=>`cubic-bezier(${_e}, ${_}, ${tt}, ${nt})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(_e,_){if(_e)return typeof _e=="function"&&supportsLinearEasing()?generateLinearEasing(_e,_):isBezierDefinition(_e)?cubicBezierAsString(_e):Array.isArray(_e)?_e.map(tt=>mapEasingToNativeEasing(tt,_)||supportedWaapiEasing.easeOut):supportedWaapiEasing[_e]}function startWaapiAnimation(_e,_,tt,{delay:nt=0,duration:rt=300,repeat:it=0,repeatType:st="loop",ease:ot,times:at}={}){const lt={[_]:tt};at&&(lt.offset=at);const ct=mapEasingToNativeEasing(ot,rt);return Array.isArray(ct)&&(lt.easing=ct),_e.animate(lt,{delay:nt,duration:rt,easing:Array.isArray(ct)?"linear":ct,fill:"both",iterations:it+1,direction:st==="reverse"?"alternate":"normal"})}function attachTimeline(_e,_){_e.timeline=_,_e.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(_e){return isGenerator(_e.type)||_e.type==="spring"||!isWaapiSupportedEasing(_e.ease)}function pregenerateKeyframes(_e,_){const tt=new MainThreadAnimation({..._,keyframes:_e,repeat:0,delay:0,isGenerator:!0});let nt={done:!1,value:_e[0]};const rt=[];let it=0;for(;!nt.done&&it<maxDuration;)nt=tt.sample(it),rt.push(nt.value),it+=sampleDelta;return{times:void 0,keyframes:rt,duration:it-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(_e){return _e in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(_){super(_);const{name:tt,motionValue:nt,element:rt,keyframes:it}=this.options;this.resolver=new DOMKeyframesResolver(it,(st,ot)=>this.onKeyframesResolved(st,ot),tt,nt,rt),this.resolver.scheduleResolve()}initPlayback(_,tt){var nt;let{duration:rt=300,times:it,ease:st,type:ot,motionValue:at,name:lt,startTime:ct}=this.options;if(!(!((nt=at.owner)===null||nt===void 0)&&nt.current))return!1;if(typeof st=="string"&&supportsLinearEasing()&&isUnsupportedEase(st)&&(st=unsupportedEasingFunctions[st]),requiresPregeneratedKeyframes(this.options)){const{onComplete:dt,onUpdate:ht,motionValue:mt,element:yt,...vt}=this.options,pt=pregenerateKeyframes(_,vt);_=pt.keyframes,_.length===1&&(_[1]=_[0]),rt=pt.duration,it=pt.times,st=pt.ease,ot="keyframes"}const ut=startWaapiAnimation(at.owner.current,lt,_,{...this.options,duration:rt,times:it,ease:st});return ut.startTime=ct??this.calcStartTime(),this.pendingTimeline?(attachTimeline(ut,this.pendingTimeline),this.pendingTimeline=void 0):ut.onfinish=()=>{const{onComplete:dt}=this.options;at.set(getFinalKeyframe(_,this.options,tt)),dt&&dt(),this.cancel(),this.resolveFinishedPromise()},{animation:ut,duration:rt,times:it,type:ot,ease:st,keyframes:_}}get duration(){const{resolved:_}=this;if(!_)return 0;const{duration:tt}=_;return millisecondsToSeconds(tt)}get time(){const{resolved:_}=this;if(!_)return 0;const{animation:tt}=_;return millisecondsToSeconds(tt.currentTime||0)}set time(_){const{resolved:tt}=this;if(!tt)return;const{animation:nt}=tt;nt.currentTime=secondsToMilliseconds(_)}get speed(){const{resolved:_}=this;if(!_)return 1;const{animation:tt}=_;return tt.playbackRate}set speed(_){const{resolved:tt}=this;if(!tt)return;const{animation:nt}=tt;nt.playbackRate=_}get state(){const{resolved:_}=this;if(!_)return"idle";const{animation:tt}=_;return tt.playState}get startTime(){const{resolved:_}=this;if(!_)return null;const{animation:tt}=_;return tt.startTime}attachTimeline(_){if(!this._resolved)this.pendingTimeline=_;else{const{resolved:tt}=this;if(!tt)return noop$2;const{animation:nt}=tt;attachTimeline(nt,_)}return noop$2}play(){if(this.isStopped)return;const{resolved:_}=this;if(!_)return;const{animation:tt}=_;tt.playState==="finished"&&this.updateFinishedPromise(),tt.play()}pause(){const{resolved:_}=this;if(!_)return;const{animation:tt}=_;tt.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:_}=this;if(!_)return;const{animation:tt,keyframes:nt,duration:rt,type:it,ease:st,times:ot}=_;if(tt.playState==="idle"||tt.playState==="finished")return;if(this.time){const{motionValue:lt,onUpdate:ct,onComplete:ut,element:dt,...ht}=this.options,mt=new MainThreadAnimation({...ht,keyframes:nt,duration:rt,type:it,ease:st,times:ot,isGenerator:!0}),yt=secondsToMilliseconds(this.time);lt.setWithVelocity(mt.sample(yt-sampleDelta).value,mt.sample(yt).value,sampleDelta)}const{onStop:at}=this.options;at&&at(),this.cancel()}complete(){const{resolved:_}=this;_&&_.animation.finish()}cancel(){const{resolved:_}=this;_&&_.animation.cancel()}static supports(_){const{motionValue:tt,name:nt,repeatDelay:rt,repeatType:it,damping:st,type:ot}=_;return supportsWaapi()&&nt&&acceleratedValues.has(nt)&&tt&&tt.owner&&tt.owner.current instanceof HTMLElement&&!tt.owner.getProps().onUpdate&&!rt&&it!=="mirror"&&st!==0&&ot!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(_){this.stop=()=>this.runAll("stop"),this.animations=_.filter(Boolean)}then(_,tt){return Promise.all(this.animations).then(_).catch(tt)}getAll(_){return this.animations[0][_]}setAll(_,tt){for(let nt=0;nt<this.animations.length;nt++)this.animations[nt][_]=tt}attachTimeline(_,tt){const nt=this.animations.map(rt=>supportsScrollTimeline()&&rt.attachTimeline?rt.attachTimeline(_):tt(rt));return()=>{nt.forEach((rt,it)=>{rt&&rt(),this.animations[it].stop()})}}get time(){return this.getAll("time")}set time(_){this.setAll("time",_)}get speed(){return this.getAll("speed")}set speed(_){this.setAll("speed",_)}get startTime(){return this.getAll("startTime")}get duration(){let _=0;for(let tt=0;tt<this.animations.length;tt++)_=Math.max(_,this.animations[tt].duration);return _}runAll(_){this.animations.forEach(tt=>tt[_]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:_e,delay:_,delayChildren:tt,staggerChildren:nt,staggerDirection:rt,repeat:it,repeatType:st,repeatDelay:ot,from:at,elapsed:lt,...ct}){return!!Object.keys(ct).length}const animateMotionValue=(_e,_,tt,nt={},rt,it)=>st=>{const ot=getValueTransition(nt,_e)||{},at=ot.delay||nt.delay||0;let{elapsed:lt=0}=nt;lt=lt-secondsToMilliseconds(at);let ct={keyframes:Array.isArray(tt)?tt:[null,tt],ease:"easeOut",velocity:_.getVelocity(),...ot,delay:-lt,onUpdate:dt=>{_.set(dt),ot.onUpdate&&ot.onUpdate(dt)},onComplete:()=>{st(),ot.onComplete&&ot.onComplete()},name:_e,motionValue:_,element:it?void 0:rt};isTransitionDefined(ot)||(ct={...ct,...getDefaultTransition(_e,ct)}),ct.duration&&(ct.duration=secondsToMilliseconds(ct.duration)),ct.repeatDelay&&(ct.repeatDelay=secondsToMilliseconds(ct.repeatDelay)),ct.from!==void 0&&(ct.keyframes[0]=ct.from);let ut=!1;if((ct.type===!1||ct.duration===0&&!ct.repeatDelay)&&(ct.duration=0,ct.delay===0&&(ut=!0)),ut&&!it&&_.get()!==void 0){const dt=getFinalKeyframe(ct.keyframes,ot);if(dt!==void 0)return frame.update(()=>{ct.onUpdate(dt),ct.onComplete()}),new GroupPlaybackControls([])}return!it&&AcceleratedAnimation.supports(ct)?new AcceleratedAnimation(ct):new MainThreadAnimation(ct)},isCustomValue=_e=>!!(_e&&typeof _e=="object"&&_e.mix&&_e.toValue),resolveFinalValueInKeyframes=_e=>isKeyframesTarget(_e)?_e[_e.length-1]||0:_e;function addUniqueItem(_e,_){_e.indexOf(_)===-1&&_e.push(_)}function removeItem(_e,_){const tt=_e.indexOf(_);tt>-1&&_e.splice(tt,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(_){return addUniqueItem(this.subscriptions,_),()=>removeItem(this.subscriptions,_)}notify(_,tt,nt){const rt=this.subscriptions.length;if(rt)if(rt===1)this.subscriptions[0](_,tt,nt);else for(let it=0;it<rt;it++){const st=this.subscriptions[it];st&&st(_,tt,nt)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=_e=>!isNaN(parseFloat(_e));class MotionValue{constructor(_,tt={}){this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(nt,rt=!0)=>{const it=time.now();this.updatedAt!==it&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(nt),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),rt&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(_),this.owner=tt.owner}setCurrent(_){this.current=_,this.updatedAt=time.now(),this.canTrackVelocity===null&&_!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(_=this.current){this.prevFrameValue=_,this.prevUpdatedAt=this.updatedAt}onChange(_){return this.on("change",_)}on(_,tt){this.events[_]||(this.events[_]=new SubscriptionManager);const nt=this.events[_].add(tt);return _==="change"?()=>{nt(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:nt}clearListeners(){for(const _ in this.events)this.events[_].clear()}attach(_,tt){this.passiveEffect=_,this.stopPassiveEffect=tt}set(_,tt=!0){!tt||!this.passiveEffect?this.updateAndNotify(_,tt):this.passiveEffect(_,this.updateAndNotify)}setWithVelocity(_,tt,nt){this.set(tt),this.prev=void 0,this.prevFrameValue=_,this.prevUpdatedAt=this.updatedAt-nt}jump(_,tt=!0){this.updateAndNotify(_),this.prev=_,this.prevUpdatedAt=this.prevFrameValue=void 0,tt&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const _=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||_-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const tt=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),tt)}start(_){return this.stop(),new Promise(tt=>{this.hasAnimated=!0,this.animation=_(tt),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(_e,_){return new MotionValue(_e,_)}function setMotionValue(_e,_,tt){_e.hasValue(_)?_e.getValue(_).set(tt):_e.addValue(_,motionValue(tt))}function setTarget(_e,_){const tt=resolveVariant(_e,_);let{transitionEnd:nt={},transition:rt={},...it}=tt||{};it={...it,...nt};for(const st in it){const ot=resolveFinalValueInKeyframes(it[st]);setMotionValue(_e,st,ot)}}const camelToDash=_e=>_e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(_e){return _e.props[optimizedAppearDataAttribute]}const isMotionValue=_e=>!!(_e&&_e.getVelocity);function isWillChangeMotionValue(_e){return!!(isMotionValue(_e)&&_e.add)}function addValueToWillChange(_e,_){if(!_e.applyWillChange)return;const tt=_e.getValue("willChange");if(isWillChangeMotionValue(tt))return tt.add(_)}function shouldBlockAnimation({protectedKeys:_e,needsAnimating:_},tt){const nt=_e.hasOwnProperty(tt)&&_[tt]!==!0;return _[tt]=!1,nt}function animateTarget(_e,_,{delay:tt=0,transitionOverride:nt,type:rt}={}){var it;let{transition:st=_e.getDefaultTransition(),transitionEnd:ot,...at}=_;nt&&(st=nt);const lt=[],ct=rt&&_e.animationState&&_e.animationState.getState()[rt];for(const ut in at){const dt=_e.getValue(ut,(it=_e.latestValues[ut])!==null&&it!==void 0?it:null),ht=at[ut];if(ht===void 0||ct&&shouldBlockAnimation(ct,ut))continue;const mt={delay:tt,...getValueTransition(st||{},ut)};let yt=!1;if(window.MotionHandoffAnimation){const pt=getOptimisedAppearId(_e);if(pt){const _t=window.MotionHandoffAnimation(pt,ut,frame);_t!==null&&(mt.startTime=_t,yt=!0)}}addValueToWillChange(_e,ut),dt.start(animateMotionValue(ut,dt,ht,_e.shouldReduceMotion&&transformProps.has(ut)?{type:!1}:mt,_e,yt));const vt=dt.animation;vt&&lt.push(vt)}return ot&&Promise.all(lt).then(()=>{frame.update(()=>{ot&&setTarget(_e,ot)})}),lt}function animateVariant(_e,_,tt={}){var nt;const rt=resolveVariant(_e,_,tt.type==="exit"?(nt=_e.presenceContext)===null||nt===void 0?void 0:nt.custom:void 0);let{transition:it=_e.getDefaultTransition()||{}}=rt||{};tt.transitionOverride&&(it=tt.transitionOverride);const st=rt?()=>Promise.all(animateTarget(_e,rt,tt)):()=>Promise.resolve(),ot=_e.variantChildren&&_e.variantChildren.size?(lt=0)=>{const{delayChildren:ct=0,staggerChildren:ut,staggerDirection:dt}=it;return animateChildren(_e,_,ct+lt,ut,dt,tt)}:()=>Promise.resolve(),{when:at}=it;if(at){const[lt,ct]=at==="beforeChildren"?[st,ot]:[ot,st];return lt().then(()=>ct())}else return Promise.all([st(),ot(tt.delay)])}function animateChildren(_e,_,tt=0,nt=0,rt=1,it){const st=[],ot=(_e.variantChildren.size-1)*nt,at=rt===1?(lt=0)=>lt*nt:(lt=0)=>ot-lt*nt;return Array.from(_e.variantChildren).sort(sortByTreeOrder).forEach((lt,ct)=>{lt.notify("AnimationStart",_),st.push(animateVariant(lt,_,{...it,delay:tt+at(ct)}).then(()=>lt.notify("AnimationComplete",_)))}),Promise.all(st)}function sortByTreeOrder(_e,_){return _e.sortNodePosition(_)}function animateVisualElement(_e,_,tt={}){_e.notify("AnimationStart",_);let nt;if(Array.isArray(_)){const rt=_.map(it=>animateVariant(_e,it,tt));nt=Promise.all(rt)}else if(typeof _=="string")nt=animateVariant(_e,_,tt);else{const rt=typeof _=="function"?resolveVariant(_e,_,tt.custom):_;nt=Promise.all(animateTarget(_e,rt,tt))}return nt.then(()=>{_e.notify("AnimationComplete",_)})}const numVariantProps=variantProps.length;function getVariantContext(_e){if(!_e)return;if(!_e.isControllingVariants){const tt=_e.parent?getVariantContext(_e.parent)||{}:{};return _e.props.initial!==void 0&&(tt.initial=_e.props.initial),tt}const _={};for(let tt=0;tt<numVariantProps;tt++){const nt=variantProps[tt],rt=_e.props[nt];(isVariantLabel(rt)||rt===!1)&&(_[nt]=rt)}return _}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(_e){return _=>Promise.all(_.map(({animation:tt,options:nt})=>animateVisualElement(_e,tt,nt)))}function createAnimationState(_e){let _=animateList(_e),tt=createState(),nt=!0;const rt=at=>(lt,ct)=>{var ut;const dt=resolveVariant(_e,ct,at==="exit"?(ut=_e.presenceContext)===null||ut===void 0?void 0:ut.custom:void 0);if(dt){const{transition:ht,transitionEnd:mt,...yt}=dt;lt={...lt,...yt,...mt}}return lt};function it(at){_=at(_e)}function st(at){const{props:lt}=_e,ct=getVariantContext(_e.parent)||{},ut=[],dt=new Set;let ht={},mt=1/0;for(let vt=0;vt<numAnimationTypes;vt++){const pt=reversePriorityOrder[vt],_t=tt[pt],xt=lt[pt]!==void 0?lt[pt]:ct[pt],St=isVariantLabel(xt),At=pt===at?_t.isActive:null;At===!1&&(mt=vt);let bt=xt===ct[pt]&&xt!==lt[pt]&&St;if(bt&&nt&&_e.manuallyAnimateOnMount&&(bt=!1),_t.protectedKeys={...ht},!_t.isActive&&At===null||!xt&&!_t.prevProp||isAnimationControls(xt)||typeof xt=="boolean")continue;const Et=checkVariantsDidChange(_t.prevProp,xt);let wt=Et||pt===at&&_t.isActive&&!bt&&St||vt>mt&&St,Rt=!1;const Tt=Array.isArray(xt)?xt:[xt];let Mt=Tt.reduce(rt(pt),{});At===!1&&(Mt={});const{prevResolvedValues:Lt={}}=_t,Ft={...Lt,...Mt},Ht=Jt=>{wt=!0,dt.has(Jt)&&(Rt=!0,dt.delete(Jt)),_t.needsAnimating[Jt]=!0;const Ot=_e.getValue(Jt);Ot&&(Ot.liveStyle=!1)};for(const Jt in Ft){const Ot=Mt[Jt],kt=Lt[Jt];if(ht.hasOwnProperty(Jt))continue;let Gt=!1;isKeyframesTarget(Ot)&&isKeyframesTarget(kt)?Gt=!shallowCompare(Ot,kt):Gt=Ot!==kt,Gt?Ot!=null?Ht(Jt):dt.add(Jt):Ot!==void 0&&dt.has(Jt)?Ht(Jt):_t.protectedKeys[Jt]=!0}_t.prevProp=xt,_t.prevResolvedValues=Mt,_t.isActive&&(ht={...ht,...Mt}),nt&&_e.blockInitialAnimation&&(wt=!1),wt&&(!(bt&&Et)||Rt)&&ut.push(...Tt.map(Jt=>({animation:Jt,options:{type:pt}})))}if(dt.size){const vt={};dt.forEach(pt=>{const _t=_e.getBaseTarget(pt),xt=_e.getValue(pt);xt&&(xt.liveStyle=!0),vt[pt]=_t??null}),ut.push({animation:vt})}let yt=!!ut.length;return nt&&(lt.initial===!1||lt.initial===lt.animate)&&!_e.manuallyAnimateOnMount&&(yt=!1),nt=!1,yt?_(ut):Promise.resolve()}function ot(at,lt){var ct;if(tt[at].isActive===lt)return Promise.resolve();(ct=_e.variantChildren)===null||ct===void 0||ct.forEach(dt=>{var ht;return(ht=dt.animationState)===null||ht===void 0?void 0:ht.setActive(at,lt)}),tt[at].isActive=lt;const ut=st(at);for(const dt in tt)tt[dt].protectedKeys={};return ut}return{animateChanges:st,setActive:ot,setAnimateFunction:it,getState:()=>tt,reset:()=>{tt=createState(),nt=!0}}}function checkVariantsDidChange(_e,_){return typeof _=="string"?_!==_e:Array.isArray(_)?!shallowCompare(_,_e):!1}function createTypeState(_e=!1){return{isActive:_e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(_){this.isMounted=!1,this.node=_}update(){}}class AnimationFeature extends Feature{constructor(_){super(_),_.animationState||(_.animationState=createAnimationState(_))}updateAnimationControlsSubscription(){const{animate:_}=this.node.getProps();isAnimationControls(_)&&(this.unmountControls=_.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:_}=this.node.getProps(),{animate:tt}=this.node.prevProps||{};_!==tt&&this.updateAnimationControlsSubscription()}unmount(){var _;this.node.animationState.reset(),(_=this.unmountControls)===null||_===void 0||_.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:_,onExitComplete:tt}=this.node.presenceContext,{isPresent:nt}=this.node.prevPresenceContext||{};if(!this.node.animationState||_===nt)return;const rt=this.node.animationState.setActive("exit",!_);tt&&!_&&rt.then(()=>tt(this.id))}mount(){const{register:_}=this.node.presenceContext||{};_&&(this.unmount=_(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isPrimaryPointer=_e=>_e.pointerType==="mouse"?typeof _e.button!="number"||_e.button<=0:_e.isPrimary!==!1;function extractEventInfo(_e,_="page"){return{point:{x:_e[`${_}X`],y:_e[`${_}Y`]}}}const addPointerInfo=_e=>_=>isPrimaryPointer(_)&&_e(_,extractEventInfo(_));function addDomEvent(_e,_,tt,nt={passive:!0}){return _e.addEventListener(_,tt,nt),()=>_e.removeEventListener(_,tt)}function addPointerEvent(_e,_,tt,nt){return addDomEvent(_e,_,addPointerInfo(tt),nt)}const distance=(_e,_)=>Math.abs(_e-_);function distance2D(_e,_){const tt=distance(_e.x,_.x),nt=distance(_e.y,_.y);return Math.sqrt(tt**2+nt**2)}class PanSession{constructor(_,tt,{transformPagePoint:nt,contextWindow:rt,dragSnapToOrigin:it=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ut=getPanInfo(this.lastMoveEventInfo,this.history),dt=this.startEvent!==null,ht=distance2D(ut.offset,{x:0,y:0})>=3;if(!dt&&!ht)return;const{point:mt}=ut,{timestamp:yt}=frameData;this.history.push({...mt,timestamp:yt});const{onStart:vt,onMove:pt}=this.handlers;dt||(vt&&vt(this.lastMoveEvent,ut),this.startEvent=this.lastMoveEvent),pt&&pt(this.lastMoveEvent,ut)},this.handlePointerMove=(ut,dt)=>{this.lastMoveEvent=ut,this.lastMoveEventInfo=transformPoint(dt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(ut,dt)=>{this.end();const{onEnd:ht,onSessionEnd:mt,resumeAnimation:yt}=this.handlers;if(this.dragSnapToOrigin&&yt&&yt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const vt=getPanInfo(ut.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(dt,this.transformPagePoint),this.history);this.startEvent&&ht&&ht(ut,vt),mt&&mt(ut,vt)},!isPrimaryPointer(_))return;this.dragSnapToOrigin=it,this.handlers=tt,this.transformPagePoint=nt,this.contextWindow=rt||window;const st=extractEventInfo(_),ot=transformPoint(st,this.transformPagePoint),{point:at}=ot,{timestamp:lt}=frameData;this.history=[{...at,timestamp:lt}];const{onSessionStart:ct}=tt;ct&&ct(_,getPanInfo(ot,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(_){this.handlers=_}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(_e,_){return _?{point:_(_e.point)}:_e}function subtractPoint(_e,_){return{x:_e.x-_.x,y:_e.y-_.y}}function getPanInfo({point:_e},_){return{point:_e,delta:subtractPoint(_e,lastDevicePoint(_)),offset:subtractPoint(_e,startDevicePoint(_)),velocity:getVelocity(_,.1)}}function startDevicePoint(_e){return _e[0]}function lastDevicePoint(_e){return _e[_e.length-1]}function getVelocity(_e,_){if(_e.length<2)return{x:0,y:0};let tt=_e.length-1,nt=null;const rt=lastDevicePoint(_e);for(;tt>=0&&(nt=_e[tt],!(rt.timestamp-nt.timestamp>secondsToMilliseconds(_)));)tt--;if(!nt)return{x:0,y:0};const it=millisecondsToSeconds(rt.timestamp-nt.timestamp);if(it===0)return{x:0,y:0};const st={x:(rt.x-nt.x)/it,y:(rt.y-nt.y)/it};return st.x===1/0&&(st.x=0),st.y===1/0&&(st.y=0),st}function createLock(_e){let _=null;return()=>{const tt=()=>{_=null};return _===null?(_=_e,tt):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(_e){let _=!1;if(_e==="y")_=globalVerticalLock();else if(_e==="x")_=globalHorizontalLock();else{const tt=globalHorizontalLock(),nt=globalVerticalLock();tt&&nt?_=()=>{tt(),nt()}:(tt&&tt(),nt&&nt())}return _}function isDragActive(){const _e=getGlobalLock(!0);return _e?(_e(),!1):!0}function isRefObject(_e){return _e&&typeof _e=="object"&&Object.prototype.hasOwnProperty.call(_e,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(_e){return _e.max-_e.min}function isNear(_e,_,tt){return Math.abs(_e-_)<=tt}function calcAxisDelta(_e,_,tt,nt=.5){_e.origin=nt,_e.originPoint=mixNumber$1(_.min,_.max,_e.origin),_e.scale=calcLength(tt)/calcLength(_),_e.translate=mixNumber$1(tt.min,tt.max,_e.origin)-_e.originPoint,(_e.scale>=SCALE_MIN&&_e.scale<=SCALE_MAX||isNaN(_e.scale))&&(_e.scale=1),(_e.translate>=TRANSLATE_MIN&&_e.translate<=TRANSLATE_MAX||isNaN(_e.translate))&&(_e.translate=0)}function calcBoxDelta(_e,_,tt,nt){calcAxisDelta(_e.x,_.x,tt.x,nt?nt.originX:void 0),calcAxisDelta(_e.y,_.y,tt.y,nt?nt.originY:void 0)}function calcRelativeAxis(_e,_,tt){_e.min=tt.min+_.min,_e.max=_e.min+calcLength(_)}function calcRelativeBox(_e,_,tt){calcRelativeAxis(_e.x,_.x,tt.x),calcRelativeAxis(_e.y,_.y,tt.y)}function calcRelativeAxisPosition(_e,_,tt){_e.min=_.min-tt.min,_e.max=_e.min+calcLength(_)}function calcRelativePosition(_e,_,tt){calcRelativeAxisPosition(_e.x,_.x,tt.x),calcRelativeAxisPosition(_e.y,_.y,tt.y)}function applyConstraints(_e,{min:_,max:tt},nt){return _!==void 0&&_e<_?_e=nt?mixNumber$1(_,_e,nt.min):Math.max(_e,_):tt!==void 0&&_e>tt&&(_e=nt?mixNumber$1(tt,_e,nt.max):Math.min(_e,tt)),_e}function calcRelativeAxisConstraints(_e,_,tt){return{min:_!==void 0?_e.min+_:void 0,max:tt!==void 0?_e.max+tt-(_e.max-_e.min):void 0}}function calcRelativeConstraints(_e,{top:_,left:tt,bottom:nt,right:rt}){return{x:calcRelativeAxisConstraints(_e.x,tt,rt),y:calcRelativeAxisConstraints(_e.y,_,nt)}}function calcViewportAxisConstraints(_e,_){let tt=_.min-_e.min,nt=_.max-_e.max;return _.max-_.min<_e.max-_e.min&&([tt,nt]=[nt,tt]),{min:tt,max:nt}}function calcViewportConstraints(_e,_){return{x:calcViewportAxisConstraints(_e.x,_.x),y:calcViewportAxisConstraints(_e.y,_.y)}}function calcOrigin$1(_e,_){let tt=.5;const nt=calcLength(_e),rt=calcLength(_);return rt>nt?tt=progress(_.min,_.max-nt,_e.min):nt>rt&&(tt=progress(_e.min,_e.max-rt,_.min)),clamp$4(0,1,tt)}function rebaseAxisConstraints(_e,_){const tt={};return _.min!==void 0&&(tt.min=_.min-_e.min),_.max!==void 0&&(tt.max=_.max-_e.min),tt}const defaultElastic=.35;function resolveDragElastic(_e=defaultElastic){return _e===!1?_e=0:_e===!0&&(_e=defaultElastic),{x:resolveAxisElastic(_e,"left","right"),y:resolveAxisElastic(_e,"top","bottom")}}function resolveAxisElastic(_e,_,tt){return{min:resolvePointElastic(_e,_),max:resolvePointElastic(_e,tt)}}function resolvePointElastic(_e,_){return typeof _e=="number"?_e:_e[_]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(_e){return[_e("x"),_e("y")]}function convertBoundingBoxToBox({top:_e,left:_,right:tt,bottom:nt}){return{x:{min:_,max:tt},y:{min:_e,max:nt}}}function convertBoxToBoundingBox({x:_e,y:_}){return{top:_.min,right:_e.max,bottom:_.max,left:_e.min}}function transformBoxPoints(_e,_){if(!_)return _e;const tt=_({x:_e.left,y:_e.top}),nt=_({x:_e.right,y:_e.bottom});return{top:tt.y,left:tt.x,bottom:nt.y,right:nt.x}}function isIdentityScale(_e){return _e===void 0||_e===1}function hasScale({scale:_e,scaleX:_,scaleY:tt}){return!isIdentityScale(_e)||!isIdentityScale(_)||!isIdentityScale(tt)}function hasTransform(_e){return hasScale(_e)||has2DTranslate(_e)||_e.z||_e.rotate||_e.rotateX||_e.rotateY||_e.skewX||_e.skewY}function has2DTranslate(_e){return is2DTranslate(_e.x)||is2DTranslate(_e.y)}function is2DTranslate(_e){return _e&&_e!=="0%"}function scalePoint(_e,_,tt){const nt=_e-tt,rt=_*nt;return tt+rt}function applyPointDelta(_e,_,tt,nt,rt){return rt!==void 0&&(_e=scalePoint(_e,rt,nt)),scalePoint(_e,tt,nt)+_}function applyAxisDelta(_e,_=0,tt=1,nt,rt){_e.min=applyPointDelta(_e.min,_,tt,nt,rt),_e.max=applyPointDelta(_e.max,_,tt,nt,rt)}function applyBoxDelta(_e,{x:_,y:tt}){applyAxisDelta(_e.x,_.translate,_.scale,_.originPoint),applyAxisDelta(_e.y,tt.translate,tt.scale,tt.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(_e,_,tt,nt=!1){const rt=tt.length;if(!rt)return;_.x=_.y=1;let it,st;for(let ot=0;ot<rt;ot++){it=tt[ot],st=it.projectionDelta;const{visualElement:at}=it.options;at&&at.props.style&&at.props.style.display==="contents"||(nt&&it.options.layoutScroll&&it.scroll&&it!==it.root&&transformBox(_e,{x:-it.scroll.offset.x,y:-it.scroll.offset.y}),st&&(_.x*=st.x.scale,_.y*=st.y.scale,applyBoxDelta(_e,st)),nt&&hasTransform(it.latestValues)&&transformBox(_e,it.latestValues))}_.x<TREE_SCALE_SNAP_MAX&&_.x>TREE_SCALE_SNAP_MIN&&(_.x=1),_.y<TREE_SCALE_SNAP_MAX&&_.y>TREE_SCALE_SNAP_MIN&&(_.y=1)}function translateAxis(_e,_){_e.min=_e.min+_,_e.max=_e.max+_}function transformAxis(_e,_,tt,nt,rt=.5){const it=mixNumber$1(_e.min,_e.max,rt);applyAxisDelta(_e,_,tt,it,nt)}function transformBox(_e,_){transformAxis(_e.x,_.x,_.scaleX,_.scale,_.originX),transformAxis(_e.y,_.y,_.scaleY,_.scale,_.originY)}function measureViewportBox(_e,_){return convertBoundingBoxToBox(transformBoxPoints(_e.getBoundingClientRect(),_))}function measurePageBox(_e,_,tt){const nt=measureViewportBox(_e,tt),{scroll:rt}=_;return rt&&(translateAxis(nt.x,rt.offset.x),translateAxis(nt.y,rt.offset.y)),nt}const getContextWindow=({current:_e})=>_e?_e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(_){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=_}start(_,{snapToCursor:tt=!1}={}){const{presenceContext:nt}=this.visualElement;if(nt&&nt.isPresent===!1)return;const rt=ct=>{const{dragSnapToOrigin:ut}=this.getProps();ut?this.pauseAnimation():this.stopAnimation(),tt&&this.snapToCursor(extractEventInfo(ct,"page").point)},it=(ct,ut)=>{const{drag:dt,dragPropagation:ht,onDragStart:mt}=this.getProps();if(dt&&!ht&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(dt),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(vt=>{let pt=this.getAxisMotionValue(vt).get()||0;if(percent.test(pt)){const{projection:_t}=this.visualElement;if(_t&&_t.layout){const xt=_t.layout.layoutBox[vt];xt&&(pt=calcLength(xt)*(parseFloat(pt)/100))}}this.originPoint[vt]=pt}),mt&&frame.postRender(()=>mt(ct,ut)),addValueToWillChange(this.visualElement,"transform");const{animationState:yt}=this.visualElement;yt&&yt.setActive("whileDrag",!0)},st=(ct,ut)=>{const{dragPropagation:dt,dragDirectionLock:ht,onDirectionLock:mt,onDrag:yt}=this.getProps();if(!dt&&!this.openGlobalLock)return;const{offset:vt}=ut;if(ht&&this.currentDirection===null){this.currentDirection=getCurrentDirection(vt),this.currentDirection!==null&&mt&&mt(this.currentDirection);return}this.updateAxis("x",ut.point,vt),this.updateAxis("y",ut.point,vt),this.visualElement.render(),yt&&yt(ct,ut)},ot=(ct,ut)=>this.stop(ct,ut),at=()=>eachAxis(ct=>{var ut;return this.getAnimationState(ct)==="paused"&&((ut=this.getAxisMotionValue(ct).animation)===null||ut===void 0?void 0:ut.play())}),{dragSnapToOrigin:lt}=this.getProps();this.panSession=new PanSession(_,{onSessionStart:rt,onStart:it,onMove:st,onSessionEnd:ot,resumeAnimation:at},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:lt,contextWindow:getContextWindow(this.visualElement)})}stop(_,tt){const nt=this.isDragging;if(this.cancel(),!nt)return;const{velocity:rt}=tt;this.startAnimation(rt);const{onDragEnd:it}=this.getProps();it&&frame.postRender(()=>it(_,tt))}cancel(){this.isDragging=!1;const{projection:_,animationState:tt}=this.visualElement;_&&(_.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:nt}=this.getProps();!nt&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),tt&&tt.setActive("whileDrag",!1)}updateAxis(_,tt,nt){const{drag:rt}=this.getProps();if(!nt||!shouldDrag(_,rt,this.currentDirection))return;const it=this.getAxisMotionValue(_);let st=this.originPoint[_]+nt[_];this.constraints&&this.constraints[_]&&(st=applyConstraints(st,this.constraints[_],this.elastic[_])),it.set(st)}resolveConstraints(){var _;const{dragConstraints:tt,dragElastic:nt}=this.getProps(),rt=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(_=this.visualElement.projection)===null||_===void 0?void 0:_.layout,it=this.constraints;tt&&isRefObject(tt)?this.constraints||(this.constraints=this.resolveRefConstraints()):tt&&rt?this.constraints=calcRelativeConstraints(rt.layoutBox,tt):this.constraints=!1,this.elastic=resolveDragElastic(nt),it!==this.constraints&&rt&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(st=>{this.constraints!==!1&&this.getAxisMotionValue(st)&&(this.constraints[st]=rebaseAxisConstraints(rt.layoutBox[st],this.constraints[st]))})}resolveRefConstraints(){const{dragConstraints:_,onMeasureDragConstraints:tt}=this.getProps();if(!_||!isRefObject(_))return!1;const nt=_.current,{projection:rt}=this.visualElement;if(!rt||!rt.layout)return!1;const it=measurePageBox(nt,rt.root,this.visualElement.getTransformPagePoint());let st=calcViewportConstraints(rt.layout.layoutBox,it);if(tt){const ot=tt(convertBoxToBoundingBox(st));this.hasMutatedConstraints=!!ot,ot&&(st=convertBoundingBoxToBox(ot))}return st}startAnimation(_){const{drag:tt,dragMomentum:nt,dragElastic:rt,dragTransition:it,dragSnapToOrigin:st,onDragTransitionEnd:ot}=this.getProps(),at=this.constraints||{},lt=eachAxis(ct=>{if(!shouldDrag(ct,tt,this.currentDirection))return;let ut=at&&at[ct]||{};st&&(ut={min:0,max:0});const dt=rt?200:1e6,ht=rt?40:1e7,mt={type:"inertia",velocity:nt?_[ct]:0,bounceStiffness:dt,bounceDamping:ht,timeConstant:750,restDelta:1,restSpeed:10,...it,...ut};return this.startAxisValueAnimation(ct,mt)});return Promise.all(lt).then(ot)}startAxisValueAnimation(_,tt){const nt=this.getAxisMotionValue(_);return addValueToWillChange(this.visualElement,_),nt.start(animateMotionValue(_,nt,0,tt,this.visualElement,!1))}stopAnimation(){eachAxis(_=>this.getAxisMotionValue(_).stop())}pauseAnimation(){eachAxis(_=>{var tt;return(tt=this.getAxisMotionValue(_).animation)===null||tt===void 0?void 0:tt.pause()})}getAnimationState(_){var tt;return(tt=this.getAxisMotionValue(_).animation)===null||tt===void 0?void 0:tt.state}getAxisMotionValue(_){const tt=`_drag${_.toUpperCase()}`,nt=this.visualElement.getProps(),rt=nt[tt];return rt||this.visualElement.getValue(_,(nt.initial?nt.initial[_]:void 0)||0)}snapToCursor(_){eachAxis(tt=>{const{drag:nt}=this.getProps();if(!shouldDrag(tt,nt,this.currentDirection))return;const{projection:rt}=this.visualElement,it=this.getAxisMotionValue(tt);if(rt&&rt.layout){const{min:st,max:ot}=rt.layout.layoutBox[tt];it.set(_[tt]-mixNumber$1(st,ot,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:_,dragConstraints:tt}=this.getProps(),{projection:nt}=this.visualElement;if(!isRefObject(tt)||!nt||!this.constraints)return;this.stopAnimation();const rt={x:0,y:0};eachAxis(st=>{const ot=this.getAxisMotionValue(st);if(ot&&this.constraints!==!1){const at=ot.get();rt[st]=calcOrigin$1({min:at,max:at},this.constraints[st])}});const{transformTemplate:it}=this.visualElement.getProps();this.visualElement.current.style.transform=it?it({},""):"none",nt.root&&nt.root.updateScroll(),nt.updateLayout(),this.resolveConstraints(),eachAxis(st=>{if(!shouldDrag(st,_,null))return;const ot=this.getAxisMotionValue(st),{min:at,max:lt}=this.constraints[st];ot.set(mixNumber$1(at,lt,rt[st]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const _=this.visualElement.current,tt=addPointerEvent(_,"pointerdown",at=>{const{drag:lt,dragListener:ct=!0}=this.getProps();lt&&ct&&this.start(at)}),nt=()=>{const{dragConstraints:at}=this.getProps();isRefObject(at)&&at.current&&(this.constraints=this.resolveRefConstraints())},{projection:rt}=this.visualElement,it=rt.addEventListener("measure",nt);rt&&!rt.layout&&(rt.root&&rt.root.updateScroll(),rt.updateLayout()),frame.read(nt);const st=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ot=rt.addEventListener("didUpdate",({delta:at,hasLayoutChanged:lt})=>{this.isDragging&&lt&&(eachAxis(ct=>{const ut=this.getAxisMotionValue(ct);ut&&(this.originPoint[ct]+=at[ct].translate,ut.set(ut.get()+at[ct].translate))}),this.visualElement.render())});return()=>{st(),tt(),it(),ot&&ot()}}getProps(){const _=this.visualElement.getProps(),{drag:tt=!1,dragDirectionLock:nt=!1,dragPropagation:rt=!1,dragConstraints:it=!1,dragElastic:st=defaultElastic,dragMomentum:ot=!0}=_;return{..._,drag:tt,dragDirectionLock:nt,dragPropagation:rt,dragConstraints:it,dragElastic:st,dragMomentum:ot}}}function shouldDrag(_e,_,tt){return(_===!0||_===_e)&&(tt===null||tt===_e)}function getCurrentDirection(_e,_=10){let tt=null;return Math.abs(_e.y)>_?tt="y":Math.abs(_e.x)>_&&(tt="x"),tt}class DragGesture extends Feature{constructor(_){super(_),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(_)}mount(){const{dragControls:_}=this.node.getProps();_&&(this.removeGroupControls=_.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=_e=>(_,tt)=>{_e&&frame.postRender(()=>_e(_,tt))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(_){this.session=new PanSession(_,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:_,onPanStart:tt,onPan:nt,onPanEnd:rt}=this.node.getProps();return{onSessionStart:asyncHandler(_),onStart:asyncHandler(tt),onMove:nt,onEnd:(it,st)=>{delete this.session,rt&&frame.postRender(()=>rt(it,st))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",_=>this.onPointerDown(_))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence$1(){const _e=reactExports.useContext(PresenceContext);if(_e===null)return[!0,null];const{isPresent:_,onExitComplete:tt,register:nt}=_e,rt=reactExports.useId();reactExports.useEffect(()=>nt(rt),[]);const it=reactExports.useCallback(()=>tt&&tt(rt),[rt,tt]);return!_&&tt?[!1,it]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(_e,_){return _.max===_.min?0:_e/(_.max-_.min)*100}const correctBorderRadius={correct:(_e,_)=>{if(!_.target)return _e;if(typeof _e=="string")if(px$1.test(_e))_e=parseFloat(_e);else return _e;const tt=pixelsToPercent(_e,_.target.x),nt=pixelsToPercent(_e,_.target.y);return`${tt}% ${nt}%`}},correctBoxShadow={correct:(_e,{treeScale:_,projectionDelta:tt})=>{const nt=_e,rt=complex.parse(_e);if(rt.length>5)return nt;const it=complex.createTransformer(_e),st=typeof rt[0]!="number"?1:0,ot=tt.x.scale*_.x,at=tt.y.scale*_.y;rt[0+st]/=ot,rt[1+st]/=at;const lt=mixNumber$1(ot,at,.5);return typeof rt[2+st]=="number"&&(rt[2+st]/=lt),typeof rt[3+st]=="number"&&(rt[3+st]/=lt),it(rt)}},scaleCorrectors={};function addScaleCorrector(_e){Object.assign(scaleCorrectors,_e)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:_,layoutGroup:tt,switchLayoutGroup:nt,layoutId:rt}=this.props,{projection:it}=_;addScaleCorrector(defaultScaleCorrectors),it&&(tt.group&&tt.group.add(it),nt&&nt.register&&rt&&nt.register(it),it.root.didUpdate(),it.addEventListener("animationComplete",()=>{this.safeToRemove()}),it.setOptions({...it.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(_){const{layoutDependency:tt,visualElement:nt,drag:rt,isPresent:it}=this.props,st=nt.projection;return st&&(st.isPresent=it,rt||_.layoutDependency!==tt||tt===void 0?st.willUpdate():this.safeToRemove(),_.isPresent!==it&&(it?st.promote():st.relegate()||frame.postRender(()=>{const ot=st.getStack();(!ot||!ot.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:_}=this.props.visualElement;_&&(_.root.didUpdate(),microtask.postRender(()=>{!_.currentAnimation&&_.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:_,layoutGroup:tt,switchLayoutGroup:nt}=this.props,{projection:rt}=_;rt&&(rt.scheduleCheckAfterUnmount(),tt&&tt.group&&tt.group.remove(rt),nt&&nt.deregister&&nt.deregister(rt))}safeToRemove(){const{safeToRemove:_}=this.props;_&&_()}render(){return null}}function MeasureLayout(_e){const[_,tt]=usePresence$1(),nt=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{..._e,layoutGroup:nt,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:_,safeToRemove:tt})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=_e=>typeof _e=="string"?parseFloat(_e):_e,isPx=_e=>typeof _e=="number"||px$1.test(_e);function mixValues(_e,_,tt,nt,rt,it){rt?(_e.opacity=mixNumber$1(0,tt.opacity!==void 0?tt.opacity:1,easeCrossfadeIn(nt)),_e.opacityExit=mixNumber$1(_.opacity!==void 0?_.opacity:1,0,easeCrossfadeOut(nt))):it&&(_e.opacity=mixNumber$1(_.opacity!==void 0?_.opacity:1,tt.opacity!==void 0?tt.opacity:1,nt));for(let st=0;st<numBorders;st++){const ot=`border${borders[st]}Radius`;let at=getRadius(_,ot),lt=getRadius(tt,ot);if(at===void 0&&lt===void 0)continue;at||(at=0),lt||(lt=0),at===0||lt===0||isPx(at)===isPx(lt)?(_e[ot]=Math.max(mixNumber$1(asNumber(at),asNumber(lt),nt),0),(percent.test(lt)||percent.test(at))&&(_e[ot]+="%")):_e[ot]=lt}(_.rotate||tt.rotate)&&(_e.rotate=mixNumber$1(_.rotate||0,tt.rotate||0,nt))}function getRadius(_e,_){return _e[_]!==void 0?_e[_]:_e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(_e,_,tt){return nt=>nt<_e?0:nt>_?1:tt(progress(_e,_,nt))}function copyAxisInto(_e,_){_e.min=_.min,_e.max=_.max}function copyBoxInto(_e,_){copyAxisInto(_e.x,_.x),copyAxisInto(_e.y,_.y)}function copyAxisDeltaInto(_e,_){_e.translate=_.translate,_e.scale=_.scale,_e.originPoint=_.originPoint,_e.origin=_.origin}function removePointDelta(_e,_,tt,nt,rt){return _e-=_,_e=scalePoint(_e,1/tt,nt),rt!==void 0&&(_e=scalePoint(_e,1/rt,nt)),_e}function removeAxisDelta(_e,_=0,tt=1,nt=.5,rt,it=_e,st=_e){if(percent.test(_)&&(_=parseFloat(_),_=mixNumber$1(st.min,st.max,_/100)-st.min),typeof _!="number")return;let ot=mixNumber$1(it.min,it.max,nt);_e===it&&(ot-=_),_e.min=removePointDelta(_e.min,_,tt,ot,rt),_e.max=removePointDelta(_e.max,_,tt,ot,rt)}function removeAxisTransforms(_e,_,[tt,nt,rt],it,st){removeAxisDelta(_e,_[tt],_[nt],_[rt],_.scale,it,st)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(_e,_,tt,nt){removeAxisTransforms(_e.x,_,xKeys,tt?tt.x:void 0,nt?nt.x:void 0),removeAxisTransforms(_e.y,_,yKeys,tt?tt.y:void 0,nt?nt.y:void 0)}function isAxisDeltaZero(_e){return _e.translate===0&&_e.scale===1}function isDeltaZero(_e){return isAxisDeltaZero(_e.x)&&isAxisDeltaZero(_e.y)}function axisEquals(_e,_){return _e.min===_.min&&_e.max===_.max}function boxEquals(_e,_){return axisEquals(_e.x,_.x)&&axisEquals(_e.y,_.y)}function axisEqualsRounded(_e,_){return Math.round(_e.min)===Math.round(_.min)&&Math.round(_e.max)===Math.round(_.max)}function boxEqualsRounded(_e,_){return axisEqualsRounded(_e.x,_.x)&&axisEqualsRounded(_e.y,_.y)}function aspectRatio(_e){return calcLength(_e.x)/calcLength(_e.y)}function axisDeltaEquals(_e,_){return _e.translate===_.translate&&_e.scale===_.scale&&_e.originPoint===_.originPoint}class NodeStack{constructor(){this.members=[]}add(_){addUniqueItem(this.members,_),_.scheduleRender()}remove(_){if(removeItem(this.members,_),_===this.prevLead&&(this.prevLead=void 0),_===this.lead){const tt=this.members[this.members.length-1];tt&&this.promote(tt)}}relegate(_){const tt=this.members.findIndex(rt=>_===rt);if(tt===0)return!1;let nt;for(let rt=tt;rt>=0;rt--){const it=this.members[rt];if(it.isPresent!==!1){nt=it;break}}return nt?(this.promote(nt),!0):!1}promote(_,tt){const nt=this.lead;if(_!==nt&&(this.prevLead=nt,this.lead=_,_.show(),nt)){nt.instance&&nt.scheduleRender(),_.scheduleRender(),_.resumeFrom=nt,tt&&(_.resumeFrom.preserveOpacity=!0),nt.snapshot&&(_.snapshot=nt.snapshot,_.snapshot.latestValues=nt.animationValues||nt.latestValues),_.root&&_.root.isUpdating&&(_.isLayoutDirty=!0);const{crossfade:rt}=_.options;rt===!1&&nt.hide()}}exitAnimationComplete(){this.members.forEach(_=>{const{options:tt,resumingFrom:nt}=_;tt.onExitComplete&&tt.onExitComplete(),nt&&nt.options.onExitComplete&&nt.options.onExitComplete()})}scheduleRender(){this.members.forEach(_=>{_.instance&&_.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(_e,_,tt){let nt="";const rt=_e.x.translate/_.x,it=_e.y.translate/_.y,st=(tt==null?void 0:tt.z)||0;if((rt||it||st)&&(nt=`translate3d(${rt}px, ${it}px, ${st}px) `),(_.x!==1||_.y!==1)&&(nt+=`scale(${1/_.x}, ${1/_.y}) `),tt){const{transformPerspective:lt,rotate:ct,rotateX:ut,rotateY:dt,skewX:ht,skewY:mt}=tt;lt&&(nt=`perspective(${lt}px) ${nt}`),ct&&(nt+=`rotate(${ct}deg) `),ut&&(nt+=`rotateX(${ut}deg) `),dt&&(nt+=`rotateY(${dt}deg) `),ht&&(nt+=`skewX(${ht}deg) `),mt&&(nt+=`skewY(${mt}deg) `)}const ot=_e.x.scale*_.x,at=_e.y.scale*_.y;return(ot!==1||at!==1)&&(nt+=`scale(${ot}, ${at})`),nt||"none"}const compareByDepth=(_e,_)=>_e.depth-_.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(_){addUniqueItem(this.children,_),this.isDirty=!0}remove(_){removeItem(this.children,_),this.isDirty=!0}forEach(_){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(_)}}function resolveMotionValue(_e){const _=isMotionValue(_e)?_e.get():_e;return isCustomValue(_)?_.toValue():_}function delay(_e,_){const tt=time.now(),nt=({timestamp:rt})=>{const it=rt-tt;it>=_&&(cancelFrame(nt),_e(it-_))};return frame.read(nt,!0),()=>cancelFrame(nt)}function isSVGElement(_e){return _e instanceof SVGElement&&_e.tagName!=="svg"}function animateSingleValue(_e,_,tt){const nt=isMotionValue(_e)?_e:motionValue(_e);return nt.start(animateMotionValue("",nt,_,tt)),nt.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(_e,_,tt,nt){const{latestValues:rt}=_;rt[_e]&&(tt[_e]=rt[_e],_.setStaticValue(_e,0),nt&&(nt[_e]=0))}function cancelTreeOptimisedTransformAnimations(_e){if(_e.hasCheckedOptimisedAppear=!0,_e.root===_e)return;const{visualElement:_}=_e.options;if(!_)return;const tt=getOptimisedAppearId(_);if(window.MotionHasOptimisedAnimation(tt,"transform")){const{layout:rt,layoutId:it}=_e.options;window.MotionCancelOptimisedAnimation(tt,"transform",frame,!(rt||it))}const{parent:nt}=_e;nt&&!nt.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(nt)}function createProjectionNode$1({attachResizeListener:_e,defaultParent:_,measureScroll:tt,checkIsScrollRoot:nt,resetTransform:rt}){return class{constructor(st={},ot=_==null?void 0:_()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=st,this.root=ot?ot.root||ot:this,this.path=ot?[...ot.path,ot]:[],this.parent=ot,this.depth=ot?ot.depth+1:0;for(let at=0;at<this.path.length;at++)this.path[at].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(st,ot){return this.eventHandlers.has(st)||this.eventHandlers.set(st,new SubscriptionManager),this.eventHandlers.get(st).add(ot)}notifyListeners(st,...ot){const at=this.eventHandlers.get(st);at&&at.notify(...ot)}hasListeners(st){return this.eventHandlers.has(st)}mount(st,ot=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(st),this.instance=st;const{layoutId:at,layout:lt,visualElement:ct}=this.options;if(ct&&!ct.current&&ct.mount(st),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ot&&(lt||at)&&(this.isLayoutDirty=!0),_e){let ut;const dt=()=>this.root.updateBlockedByResize=!1;_e(st,()=>{this.root.updateBlockedByResize=!0,ut&&ut(),ut=delay(dt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}at&&this.root.registerSharedNode(at,this),this.options.animate!==!1&&ct&&(at||lt)&&this.addEventListener("didUpdate",({delta:ut,hasLayoutChanged:dt,hasRelativeTargetChanged:ht,layout:mt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const yt=this.options.transition||ct.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:vt,onLayoutAnimationComplete:pt}=ct.getProps(),_t=!this.targetLayout||!boxEqualsRounded(this.targetLayout,mt)||ht,xt=!dt&&ht;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||xt||dt&&(_t||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(ut,xt);const St={...getValueTransition(yt,"layout"),onPlay:vt,onComplete:pt};(ct.shouldReduceMotion||this.options.layoutRoot)&&(St.delay=0,St.type=!1),this.startAnimation(St)}else dt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=mt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const st=this.getStack();st&&st.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:st}=this.options;return st&&st.getProps().transformTemplate}willUpdate(st=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let ct=0;ct<this.path.length;ct++){const ut=this.path[ct];ut.shouldResetTransform=!0,ut.updateScroll("snapshot"),ut.options.layoutRoot&&ut.willUpdate(!1)}const{layoutId:ot,layout:at}=this.options;if(ot===void 0&&!at)return;const lt=this.getTransformTemplate();this.prevTransformTemplateValue=lt?lt(this.latestValues,""):void 0,this.updateSnapshot(),st&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ot=time.now();frameData.delta=clamp$4(0,1e3/60,ot-frameData.timestamp),frameData.timestamp=ot,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let at=0;at<this.path.length;at++)this.path[at].updateScroll();const st=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ot}=this.options;ot&&ot.notify("LayoutMeasure",this.layout.layoutBox,st?st.layoutBox:void 0)}updateScroll(st="measure"){let ot=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===st&&(ot=!1),ot){const at=nt(this.instance);this.scroll={animationId:this.root.animationId,phase:st,isRoot:at,offset:tt(this.instance),wasRoot:this.scroll?this.scroll.isRoot:at}}}resetTransform(){if(!rt)return;const st=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ot=this.projectionDelta&&!isDeltaZero(this.projectionDelta),at=this.getTransformTemplate(),lt=at?at(this.latestValues,""):void 0,ct=lt!==this.prevTransformTemplateValue;st&&(ot||hasTransform(this.latestValues)||ct)&&(rt(this.instance,lt),this.shouldResetTransform=!1,this.scheduleRender())}measure(st=!0){const ot=this.measurePageBox();let at=this.removeElementScroll(ot);return st&&(at=this.removeTransform(at)),roundBox(at),{animationId:this.root.animationId,measuredBox:ot,layoutBox:at,latestValues:{},source:this.id}}measurePageBox(){var st;const{visualElement:ot}=this.options;if(!ot)return createBox();const at=ot.measureViewportBox();if(!(((st=this.scroll)===null||st===void 0?void 0:st.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:ct}=this.root;ct&&(translateAxis(at.x,ct.offset.x),translateAxis(at.y,ct.offset.y))}return at}removeElementScroll(st){var ot;const at=createBox();if(copyBoxInto(at,st),!((ot=this.scroll)===null||ot===void 0)&&ot.wasRoot)return at;for(let lt=0;lt<this.path.length;lt++){const ct=this.path[lt],{scroll:ut,options:dt}=ct;ct!==this.root&&ut&&dt.layoutScroll&&(ut.wasRoot&&copyBoxInto(at,st),translateAxis(at.x,ut.offset.x),translateAxis(at.y,ut.offset.y))}return at}applyTransform(st,ot=!1){const at=createBox();copyBoxInto(at,st);for(let lt=0;lt<this.path.length;lt++){const ct=this.path[lt];!ot&&ct.options.layoutScroll&&ct.scroll&&ct!==ct.root&&transformBox(at,{x:-ct.scroll.offset.x,y:-ct.scroll.offset.y}),hasTransform(ct.latestValues)&&transformBox(at,ct.latestValues)}return hasTransform(this.latestValues)&&transformBox(at,this.latestValues),at}removeTransform(st){const ot=createBox();copyBoxInto(ot,st);for(let at=0;at<this.path.length;at++){const lt=this.path[at];if(!lt.instance||!hasTransform(lt.latestValues))continue;hasScale(lt.latestValues)&&lt.updateSnapshot();const ct=createBox(),ut=lt.measurePageBox();copyBoxInto(ct,ut),removeBoxTransforms(ot,lt.latestValues,lt.snapshot?lt.snapshot.layoutBox:void 0,ct)}return hasTransform(this.latestValues)&&removeBoxTransforms(ot,this.latestValues),ot}setTargetDelta(st){this.targetDelta=st,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(st){this.options={...this.options,...st,crossfade:st.crossfade!==void 0?st.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(st=!1){var ot;const at=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=at.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=at.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=at.isSharedProjectionDirty);const lt=!!this.resumingFrom||this!==at;if(!(st||lt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ot=this.parent)===null||ot===void 0)&&ot.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:ut,layoutId:dt}=this.options;if(!(!this.layout||!(ut||dt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const ht=this.getClosestProjectingParent();ht&&ht.layout&&this.animationProgress!==1?(this.relativeParent=ht,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,ht.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const ht=this.getClosestProjectingParent();ht&&!!ht.resumingFrom==!!this.resumingFrom&&!ht.options.layoutScroll&&ht.target&&this.animationProgress!==1?(this.relativeParent=ht,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,ht.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var st;const ot=this.getLead(),at=!!this.resumingFrom||this!==ot;let lt=!0;if((this.isProjectionDirty||!((st=this.parent)===null||st===void 0)&&st.isProjectionDirty)&&(lt=!1),at&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(lt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(lt=!1),lt)return;const{layout:ct,layoutId:ut}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(ct||ut))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const dt=this.treeScale.x,ht=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,at),ot.layout&&!ot.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ot.target=ot.layout.layoutBox,ot.targetWithTransforms=createBox());const{target:mt}=ot;if(!mt){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,mt,this.latestValues),(this.treeScale.x!==dt||this.treeScale.y!==ht||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",mt)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(st=!0){var ot;if((ot=this.options.visualElement)===null||ot===void 0||ot.scheduleRender(),st){const at=this.getStack();at&&at.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(st,ot=!1){const at=this.snapshot,lt=at?at.latestValues:{},ct={...this.latestValues},ut=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ot;const dt=createBox(),ht=at?at.source:void 0,mt=this.layout?this.layout.source:void 0,yt=ht!==mt,vt=this.getStack(),pt=!vt||vt.members.length<=1,_t=!!(yt&&!pt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let xt;this.mixTargetDelta=St=>{const At=St/1e3;mixAxisDelta(ut.x,st.x,At),mixAxisDelta(ut.y,st.y,At),this.setTargetDelta(ut),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(dt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,dt,At),xt&&boxEquals(this.relativeTarget,xt)&&(this.isProjectionDirty=!1),xt||(xt=createBox()),copyBoxInto(xt,this.relativeTarget)),yt&&(this.animationValues=ct,mixValues(ct,lt,this.latestValues,At,_t,pt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=At},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(st){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...st,onUpdate:ot=>{this.mixTargetDelta(ot),st.onUpdate&&st.onUpdate(ot)},onComplete:()=>{st.onComplete&&st.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const st=this.getStack();st&&st.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const st=this.getLead();let{targetWithTransforms:ot,target:at,layout:lt,latestValues:ct}=st;if(!(!ot||!at||!lt)){if(this!==st&&this.layout&&lt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,lt.layoutBox)){at=this.target||createBox();const ut=calcLength(this.layout.layoutBox.x);at.x.min=st.target.x.min,at.x.max=at.x.min+ut;const dt=calcLength(this.layout.layoutBox.y);at.y.min=st.target.y.min,at.y.max=at.y.min+dt}copyBoxInto(ot,at),transformBox(ot,ct),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ot,ct)}}registerSharedNode(st,ot){this.sharedNodes.has(st)||this.sharedNodes.set(st,new NodeStack),this.sharedNodes.get(st).add(ot);const lt=ot.options.initialPromotionConfig;ot.promote({transition:lt?lt.transition:void 0,preserveFollowOpacity:lt&&lt.shouldPreserveFollowOpacity?lt.shouldPreserveFollowOpacity(ot):void 0})}isLead(){const st=this.getStack();return st?st.lead===this:!0}getLead(){var st;const{layoutId:ot}=this.options;return ot?((st=this.getStack())===null||st===void 0?void 0:st.lead)||this:this}getPrevLead(){var st;const{layoutId:ot}=this.options;return ot?(st=this.getStack())===null||st===void 0?void 0:st.prevLead:void 0}getStack(){const{layoutId:st}=this.options;if(st)return this.root.sharedNodes.get(st)}promote({needsReset:st,transition:ot,preserveFollowOpacity:at}={}){const lt=this.getStack();lt&&lt.promote(this,at),st&&(this.projectionDelta=void 0,this.needsReset=!0),ot&&this.setOptions({transition:ot})}relegate(){const st=this.getStack();return st?st.relegate(this):!1}resetSkewAndRotation(){const{visualElement:st}=this.options;if(!st)return;let ot=!1;const{latestValues:at}=st;if((at.z||at.rotate||at.rotateX||at.rotateY||at.rotateZ||at.skewX||at.skewY)&&(ot=!0),!ot)return;const lt={};at.z&&resetDistortingTransform("z",st,lt,this.animationValues);for(let ct=0;ct<transformAxes.length;ct++)resetDistortingTransform(`rotate${transformAxes[ct]}`,st,lt,this.animationValues),resetDistortingTransform(`skew${transformAxes[ct]}`,st,lt,this.animationValues);st.render();for(const ct in lt)st.setStaticValue(ct,lt[ct]),this.animationValues&&(this.animationValues[ct]=lt[ct]);st.scheduleRender()}getProjectionStyles(st){var ot,at;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const lt={visibility:""},ct=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,lt.opacity="",lt.pointerEvents=resolveMotionValue(st==null?void 0:st.pointerEvents)||"",lt.transform=ct?ct(this.latestValues,""):"none",lt;const ut=this.getLead();if(!this.projectionDelta||!this.layout||!ut.target){const yt={};return this.options.layoutId&&(yt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,yt.pointerEvents=resolveMotionValue(st==null?void 0:st.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(yt.transform=ct?ct({},""):"none",this.hasProjected=!1),yt}const dt=ut.animationValues||ut.latestValues;this.applyTransformsToTarget(),lt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,dt),ct&&(lt.transform=ct(dt,lt.transform));const{x:ht,y:mt}=this.projectionDelta;lt.transformOrigin=`${ht.origin*100}% ${mt.origin*100}% 0`,ut.animationValues?lt.opacity=ut===this?(at=(ot=dt.opacity)!==null&&ot!==void 0?ot:this.latestValues.opacity)!==null&&at!==void 0?at:1:this.preserveOpacity?this.latestValues.opacity:dt.opacityExit:lt.opacity=ut===this?dt.opacity!==void 0?dt.opacity:"":dt.opacityExit!==void 0?dt.opacityExit:0;for(const yt in scaleCorrectors){if(dt[yt]===void 0)continue;const{correct:vt,applyTo:pt}=scaleCorrectors[yt],_t=lt.transform==="none"?dt[yt]:vt(dt[yt],ut);if(pt){const xt=pt.length;for(let St=0;St<xt;St++)lt[pt[St]]=_t}else lt[yt]=_t}return this.options.layoutId&&(lt.pointerEvents=ut===this?resolveMotionValue(st==null?void 0:st.pointerEvents)||"":"none"),lt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(st=>{var ot;return(ot=st.currentAnimation)===null||ot===void 0?void 0:ot.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(_e){_e.updateLayout()}function notifyLayoutUpdate(_e){var _;const tt=((_=_e.resumeFrom)===null||_===void 0?void 0:_.snapshot)||_e.snapshot;if(_e.isLead()&&_e.layout&&tt&&_e.hasListeners("didUpdate")){const{layoutBox:nt,measuredBox:rt}=_e.layout,{animationType:it}=_e.options,st=tt.source!==_e.layout.source;it==="size"?eachAxis(ut=>{const dt=st?tt.measuredBox[ut]:tt.layoutBox[ut],ht=calcLength(dt);dt.min=nt[ut].min,dt.max=dt.min+ht}):shouldAnimatePositionOnly(it,tt.layoutBox,nt)&&eachAxis(ut=>{const dt=st?tt.measuredBox[ut]:tt.layoutBox[ut],ht=calcLength(nt[ut]);dt.max=dt.min+ht,_e.relativeTarget&&!_e.currentAnimation&&(_e.isProjectionDirty=!0,_e.relativeTarget[ut].max=_e.relativeTarget[ut].min+ht)});const ot=createDelta();calcBoxDelta(ot,nt,tt.layoutBox);const at=createDelta();st?calcBoxDelta(at,_e.applyTransform(rt,!0),tt.measuredBox):calcBoxDelta(at,nt,tt.layoutBox);const lt=!isDeltaZero(ot);let ct=!1;if(!_e.resumeFrom){const ut=_e.getClosestProjectingParent();if(ut&&!ut.resumeFrom){const{snapshot:dt,layout:ht}=ut;if(dt&&ht){const mt=createBox();calcRelativePosition(mt,tt.layoutBox,dt.layoutBox);const yt=createBox();calcRelativePosition(yt,nt,ht.layoutBox),boxEqualsRounded(mt,yt)||(ct=!0),ut.options.layoutRoot&&(_e.relativeTarget=yt,_e.relativeTargetOrigin=mt,_e.relativeParent=ut)}}}_e.notifyListeners("didUpdate",{layout:nt,snapshot:tt,delta:at,layoutDelta:ot,hasLayoutChanged:lt,hasRelativeTargetChanged:ct})}else if(_e.isLead()){const{onExitComplete:nt}=_e.options;nt&&nt()}_e.options.transition=void 0}function propagateDirtyNodes(_e){isDebug&&metrics.totalNodes++,_e.parent&&(_e.isProjecting()||(_e.isProjectionDirty=_e.parent.isProjectionDirty),_e.isSharedProjectionDirty||(_e.isSharedProjectionDirty=!!(_e.isProjectionDirty||_e.parent.isProjectionDirty||_e.parent.isSharedProjectionDirty)),_e.isTransformDirty||(_e.isTransformDirty=_e.parent.isTransformDirty))}function cleanDirtyNodes(_e){_e.isProjectionDirty=_e.isSharedProjectionDirty=_e.isTransformDirty=!1}function clearSnapshot(_e){_e.clearSnapshot()}function clearMeasurements(_e){_e.clearMeasurements()}function clearIsLayoutDirty(_e){_e.isLayoutDirty=!1}function resetTransformStyle(_e){const{visualElement:_}=_e.options;_&&_.getProps().onBeforeLayoutMeasure&&_.notify("BeforeLayoutMeasure"),_e.resetTransform()}function finishAnimation(_e){_e.finishAnimation(),_e.targetDelta=_e.relativeTarget=_e.target=void 0,_e.isProjectionDirty=!0}function resolveTargetDelta(_e){_e.resolveTargetDelta()}function calcProjection(_e){_e.calcProjection()}function resetSkewAndRotation(_e){_e.resetSkewAndRotation()}function removeLeadSnapshots(_e){_e.removeLeadSnapshot()}function mixAxisDelta(_e,_,tt){_e.translate=mixNumber$1(_.translate,0,tt),_e.scale=mixNumber$1(_.scale,1,tt),_e.origin=_.origin,_e.originPoint=_.originPoint}function mixAxis(_e,_,tt,nt){_e.min=mixNumber$1(_.min,tt.min,nt),_e.max=mixNumber$1(_.max,tt.max,nt)}function mixBox(_e,_,tt,nt){mixAxis(_e.x,_.x,tt.x,nt),mixAxis(_e.y,_.y,tt.y,nt)}function hasOpacityCrossfade(_e){return _e.animationValues&&_e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=_e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(_e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(_e){_e.min=roundPoint(_e.min),_e.max=roundPoint(_e.max)}function roundBox(_e){roundAxis(_e.x),roundAxis(_e.y)}function shouldAnimatePositionOnly(_e,_,tt){return _e==="position"||_e==="preserve-aspect"&&!isNear(aspectRatio(_),aspectRatio(tt),.2)}function checkNodeWasScrollRoot(_e){var _;return _e!==_e.root&&((_=_e.scroll)===null||_===void 0?void 0:_.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(_e,_)=>addDomEvent(_e,"resize",_),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:_e=>({x:_e.scrollLeft,y:_e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const _e=new DocumentProjectionNode({});_e.mount(window),_e.setOptions({layoutScroll:!0}),rootProjectionNode.current=_e}return rootProjectionNode.current},resetTransform:(_e,_)=>{_e.style.transform=_!==void 0?_:"none"},checkIsScrollRoot:_e=>window.getComputedStyle(_e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function addHoverEvent(_e,_){const tt=_?"pointerenter":"pointerleave",nt=_?"onHoverStart":"onHoverEnd",rt=(it,st)=>{if(it.pointerType==="touch"||isDragActive())return;const ot=_e.getProps();_e.animationState&&ot.whileHover&&_e.animationState.setActive("whileHover",_);const at=ot[nt];at&&frame.postRender(()=>at(it,st))};return addPointerEvent(_e.current,tt,rt,{passive:!_e.getProps()[nt]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let _=!1;try{_=this.node.current.matches(":focus-visible")}catch{_=!0}!_||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(_e,_)=>_?_e===_?!0:isNodeOrChild(_e,_.parentElement):!1;function fireSyntheticPointerEvent(_e,_){if(!_)return;const tt=new PointerEvent("pointer"+_e);_(tt,extractEventInfo(tt))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$2,this.removeEndListeners=noop$2,this.removeAccessibleListeners=noop$2,this.startPointerPress=(_,tt)=>{if(this.isPressing)return;this.removeEndListeners();const nt=this.node.getProps(),it=addPointerEvent(window,"pointerup",(ot,at)=>{if(!this.checkPressEnd())return;const{onTap:lt,onTapCancel:ct,globalTapTarget:ut}=this.node.getProps(),dt=!ut&&!isNodeOrChild(this.node.current,ot.target)?ct:lt;dt&&frame.update(()=>dt(ot,at))},{passive:!(nt.onTap||nt.onPointerUp)}),st=addPointerEvent(window,"pointercancel",(ot,at)=>this.cancelPress(ot,at),{passive:!(nt.onTapCancel||nt.onPointerCancel)});this.removeEndListeners=pipe(it,st),this.startPress(_,tt)},this.startAccessiblePress=()=>{const _=it=>{if(it.key!=="Enter"||this.isPressing)return;const st=ot=>{ot.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(at,lt)=>{const{onTap:ct}=this.node.getProps();ct&&frame.postRender(()=>ct(at,lt))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",st),fireSyntheticPointerEvent("down",(ot,at)=>{this.startPress(ot,at)})},tt=addDomEvent(this.node.current,"keydown",_),nt=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(it,st)=>this.cancelPress(it,st))},rt=addDomEvent(this.node.current,"blur",nt);this.removeAccessibleListeners=pipe(tt,rt)}}startPress(_,tt){this.isPressing=!0;const{onTapStart:nt,whileTap:rt}=this.node.getProps();rt&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),nt&&frame.postRender(()=>nt(_,tt))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(_,tt){if(!this.checkPressEnd())return;const{onTapCancel:nt}=this.node.getProps();nt&&frame.postRender(()=>nt(_,tt))}mount(){const _=this.node.getProps(),tt=addPointerEvent(_.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(_.onTapStart||_.onPointerStart)}),nt=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(tt,nt)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=_e=>{const _=observerCallbacks.get(_e.target);_&&_(_e)},fireAllObserverCallbacks=_e=>{_e.forEach(fireObserverCallback)};function initIntersectionObserver({root:_e,..._}){const tt=_e||document;observers.has(tt)||observers.set(tt,{});const nt=observers.get(tt),rt=JSON.stringify(_);return nt[rt]||(nt[rt]=new IntersectionObserver(fireAllObserverCallbacks,{root:_e,..._})),nt[rt]}function observeIntersection(_e,_,tt){const nt=initIntersectionObserver(_);return observerCallbacks.set(_e,tt),nt.observe(_e),()=>{observerCallbacks.delete(_e),nt.unobserve(_e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:_={}}=this.node.getProps(),{root:tt,margin:nt,amount:rt="some",once:it}=_,st={root:tt?tt.current:void 0,rootMargin:nt,threshold:typeof rt=="number"?rt:thresholdNames[rt]},ot=at=>{const{isIntersecting:lt}=at;if(this.isInView===lt||(this.isInView=lt,it&&!lt&&this.hasEnteredView))return;lt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",lt);const{onViewportEnter:ct,onViewportLeave:ut}=this.node.getProps(),dt=lt?ct:ut;dt&&dt(at)};return observeIntersection(this.node.current,st,ot)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:_,prevProps:tt}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(_,tt))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:_e={}},{viewport:_={}}={}){return tt=>_e[tt]!==_[tt]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:_e=>_e,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(_e,_,tt,nt,rt){var it,st;const{visualElement:ot}=reactExports.useContext(MotionContext),at=reactExports.useContext(LazyContext),lt=reactExports.useContext(PresenceContext),ct=reactExports.useContext(MotionConfigContext).reducedMotion,ut=reactExports.useRef();nt=nt||at.renderer,!ut.current&&nt&&(ut.current=nt(_e,{visualState:_,parent:ot,props:tt,presenceContext:lt,blockInitialAnimation:lt?lt.initial===!1:!1,reducedMotionConfig:ct}));const dt=ut.current,ht=reactExports.useContext(SwitchLayoutGroupContext);dt&&!dt.projection&&rt&&(dt.type==="html"||dt.type==="svg")&&createProjectionNode(ut.current,tt,rt,ht),reactExports.useInsertionEffect(()=>{dt&&dt.update(tt,lt)});const mt=tt[optimizedAppearDataAttribute],yt=reactExports.useRef(!!mt&&!(!((it=window.MotionHandoffIsComplete)===null||it===void 0)&&it.call(window,mt))&&((st=window.MotionHasOptimisedAnimation)===null||st===void 0?void 0:st.call(window,mt)));return useIsomorphicLayoutEffect$2(()=>{dt&&(window.MotionIsMounted=!0,dt.updateFeatures(),microtask.render(dt.render),yt.current&&dt.animationState&&dt.animationState.animateChanges())}),reactExports.useEffect(()=>{dt&&(!yt.current&&dt.animationState&&dt.animationState.animateChanges(),yt.current&&(queueMicrotask(()=>{var vt;(vt=window.MotionHandoffMarkAsComplete)===null||vt===void 0||vt.call(window,mt)}),yt.current=!1))}),dt}function createProjectionNode(_e,_,tt,nt){const{layoutId:rt,layout:it,drag:st,dragConstraints:ot,layoutScroll:at,layoutRoot:lt}=_;_e.projection=new tt(_e.latestValues,_["data-framer-portal-id"]?void 0:getClosestProjectingNode(_e.parent)),_e.projection.setOptions({layoutId:rt,layout:it,alwaysMeasureLayout:!!st||ot&&isRefObject(ot),visualElement:_e,animationType:typeof it=="string"?it:"both",initialPromotionConfig:nt,layoutScroll:at,layoutRoot:lt})}function getClosestProjectingNode(_e){if(_e)return _e.options.allowProjection!==!1?_e.projection:getClosestProjectingNode(_e.parent)}function useMotionRef(_e,_,tt){return reactExports.useCallback(nt=>{nt&&_e.mount&&_e.mount(nt),_&&(nt?_.mount(nt):_.unmount()),tt&&(typeof tt=="function"?tt(nt):isRefObject(tt)&&(tt.current=nt))},[_])}function isControllingVariants(_e){return isAnimationControls(_e.animate)||variantProps.some(_=>isVariantLabel(_e[_]))}function isVariantNode(_e){return!!(isControllingVariants(_e)||_e.variants)}function getCurrentTreeVariants(_e,_){if(isControllingVariants(_e)){const{initial:tt,animate:nt}=_e;return{initial:tt===!1||isVariantLabel(tt)?tt:void 0,animate:isVariantLabel(nt)?nt:void 0}}return _e.inherit!==!1?_:{}}function useCreateMotionContext(_e){const{initial:_,animate:tt}=getCurrentTreeVariants(_e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:_,animate:tt}),[variantLabelsAsDependency(_),variantLabelsAsDependency(tt)])}function variantLabelsAsDependency(_e){return Array.isArray(_e)?_e.join(" "):_e}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const _e in featureProps)featureDefinitions[_e]={isEnabled:_=>featureProps[_e].some(tt=>!!_[tt])};function loadFeatures(_e){for(const _ in _e)featureDefinitions[_]={...featureDefinitions[_],..._e[_]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:_e,createVisualElement:_,useRender:tt,useVisualState:nt,Component:rt}){_e&&loadFeatures(_e);function it(ot,at){let lt;const ct={...reactExports.useContext(MotionConfigContext),...ot,layoutId:useLayoutId(ot)},{isStatic:ut}=ct,dt=useCreateMotionContext(ot),ht=nt(ot,ut);if(!ut&&isBrowser$1){useStrictMode();const mt=getProjectionFunctionality(ct);lt=mt.MeasureLayout,dt.visualElement=useVisualElement(rt,ht,ct,_,mt.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:dt,children:[lt&&dt.visualElement?jsxRuntimeExports.jsx(lt,{visualElement:dt.visualElement,...ct}):null,tt(rt,ot,useMotionRef(ht,dt.visualElement,at),ht,ut,dt.visualElement)]})}const st=reactExports.forwardRef(it);return st[motionComponentSymbol]=rt,st}function useLayoutId({layoutId:_e}){const _=reactExports.useContext(LayoutGroupContext).id;return _&&_e!==void 0?_+"-"+_e:_e}function useStrictMode(_e,_){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(_e){const{drag:_,layout:tt}=featureDefinitions;if(!_&&!tt)return{};const nt={..._,...tt};return{MeasureLayout:_!=null&&_.isEnabled(_e)||tt!=null&&tt.isEnabled(_e)?nt.MeasureLayout:void 0,ProjectionNode:nt.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(_e){return typeof _e!="string"||_e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(_e)>-1||/[A-Z]/u.test(_e))}function renderHTML(_e,{style:_,vars:tt},nt,rt){Object.assign(_e.style,_,rt&&rt.getProjectionStyles(nt));for(const it in tt)_e.style.setProperty(it,tt[it])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(_e,_,tt,nt){renderHTML(_e,_,void 0,nt);for(const rt in _.attrs)_e.setAttribute(camelCaseAttributes.has(rt)?rt:camelToDash(rt),_.attrs[rt])}function isForcedMotionValue(_e,{layout:_,layoutId:tt}){return transformProps.has(_e)||_e.startsWith("origin")||(_||tt!==void 0)&&(!!scaleCorrectors[_e]||_e==="opacity")}function scrapeMotionValuesFromProps$1(_e,_,tt){var nt;const{style:rt}=_e,it={};for(const st in rt)(isMotionValue(rt[st])||_.style&&isMotionValue(_.style[st])||isForcedMotionValue(st,_e)||((nt=tt==null?void 0:tt.getValue(st))===null||nt===void 0?void 0:nt.liveStyle)!==void 0)&&(it[st]=rt[st]);return tt&&rt&&typeof rt.willChange=="string"&&(tt.applyWillChange=!1),it}function scrapeMotionValuesFromProps(_e,_,tt){const nt=scrapeMotionValuesFromProps$1(_e,_,tt);for(const rt in _e)if(isMotionValue(_e[rt])||isMotionValue(_[rt])){const it=transformPropOrder.indexOf(rt)!==-1?"attr"+rt.charAt(0).toUpperCase()+rt.substring(1):rt;nt[it]=_e[rt]}return nt}function useConstant(_e){const _=reactExports.useRef(null);return _.current===null&&(_.current=_e()),_.current}function getWillChangeName(_e){if(transformProps.has(_e))return"transform";if(acceleratedValues.has(_e))return camelToDash(_e)}function makeState({applyWillChange:_e=!1,scrapeMotionValuesFromProps:_,createRenderState:tt,onMount:nt},rt,it,st,ot){const at={latestValues:makeLatestValues(rt,it,st,ot?!1:_e,_),renderState:tt()};return nt&&(at.mount=lt=>nt(rt,lt,at)),at}const makeUseVisualState=_e=>(_,tt)=>{const nt=reactExports.useContext(MotionContext),rt=reactExports.useContext(PresenceContext),it=()=>makeState(_e,_,nt,rt,tt);return tt?it():useConstant(it)};function forEachDefinition(_e,_,tt){const nt=Array.isArray(_)?_:[_];for(let rt=0;rt<nt.length;rt++){const it=resolveVariantFromProps(_e,nt[rt]);if(it){const{transitionEnd:st,transition:ot,...at}=it;tt(at,st)}}}function makeLatestValues(_e,_,tt,nt,rt){var it;const st={},ot=new Set,at=nt&&((it=_e.style)===null||it===void 0?void 0:it.willChange)===void 0,lt=rt(_e,{});for(const vt in lt)st[vt]=resolveMotionValue(lt[vt]);let{initial:ct,animate:ut}=_e;const dt=isControllingVariants(_e),ht=isVariantNode(_e);_&&ht&&!dt&&_e.inherit!==!1&&(ct===void 0&&(ct=_.initial),ut===void 0&&(ut=_.animate));let mt=tt?tt.initial===!1:!1;mt=mt||ct===!1;const yt=mt?ut:ct;return yt&&typeof yt!="boolean"&&!isAnimationControls(yt)&&forEachDefinition(_e,yt,(vt,pt)=>{for(const _t in vt){let xt=vt[_t];if(Array.isArray(xt)){const St=mt?xt.length-1:0;xt=xt[St]}xt!==null&&(st[_t]=xt)}for(const _t in pt)st[_t]=pt[_t]}),at&&(ut&&ct!==!1&&!isAnimationControls(ut)&&forEachDefinition(_e,ut,vt=>{for(const pt in vt){const _t=getWillChangeName(pt);_t&&ot.add(_t)}}),ot.size&&(st.willChange=Array.from(ot).join(","))),st}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(_e,_)=>_&&typeof _e=="number"?_.transform(_e):_e,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(_e,_,tt){let nt="",rt=!0;for(let it=0;it<numTransforms;it++){const st=transformPropOrder[it],ot=_e[st];if(ot===void 0)continue;let at=!0;if(typeof ot=="number"?at=ot===(st.startsWith("scale")?1:0):at=parseFloat(ot)===0,!at||tt){const lt=getValueAsType(ot,numberValueTypes[st]);if(!at){rt=!1;const ct=translateAlias[st]||st;nt+=`${ct}(${lt}) `}tt&&(_[st]=lt)}}return nt=nt.trim(),tt?nt=tt(_,rt?"":nt):rt&&(nt="none"),nt}function buildHTMLStyles(_e,_,tt){const{style:nt,vars:rt,transformOrigin:it}=_e;let st=!1,ot=!1;for(const at in _){const lt=_[at];if(transformProps.has(at)){st=!0;continue}else if(isCSSVariableName(at)){rt[at]=lt;continue}else{const ct=getValueAsType(lt,numberValueTypes[at]);at.startsWith("origin")?(ot=!0,it[at]=ct):nt[at]=ct}}if(_.transform||(st||tt?nt.transform=buildTransform(_,_e.transform,tt):nt.transform&&(nt.transform="none")),ot){const{originX:at="50%",originY:lt="50%",originZ:ct=0}=it;nt.transformOrigin=`${at} ${lt} ${ct}`}}function calcOrigin(_e,_,tt){return typeof _e=="string"?_e:px$1.transform(_+tt*_e)}function calcSVGTransformOrigin(_e,_,tt){const nt=calcOrigin(_,_e.x,_e.width),rt=calcOrigin(tt,_e.y,_e.height);return`${nt} ${rt}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(_e,_,tt=1,nt=0,rt=!0){_e.pathLength=1;const it=rt?dashKeys:camelKeys;_e[it.offset]=px$1.transform(-nt);const st=px$1.transform(_),ot=px$1.transform(tt);_e[it.array]=`${st} ${ot}`}function buildSVGAttrs(_e,{attrX:_,attrY:tt,attrScale:nt,originX:rt,originY:it,pathLength:st,pathSpacing:ot=1,pathOffset:at=0,...lt},ct,ut){if(buildHTMLStyles(_e,lt,ut),ct){_e.style.viewBox&&(_e.attrs.viewBox=_e.style.viewBox);return}_e.attrs=_e.style,_e.style={};const{attrs:dt,style:ht,dimensions:mt}=_e;dt.transform&&(mt&&(ht.transform=dt.transform),delete dt.transform),mt&&(rt!==void 0||it!==void 0||ht.transform)&&(ht.transformOrigin=calcSVGTransformOrigin(mt,rt!==void 0?rt:.5,it!==void 0?it:.5)),_!==void 0&&(dt.x=_),tt!==void 0&&(dt.y=tt),nt!==void 0&&(dt.scale=nt),st!==void 0&&buildSVGPath(dt,st,ot,at,!1)}const isSVGTag=_e=>typeof _e=="string"&&_e.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(_e,_,{renderState:tt,latestValues:nt})=>{frame.read(()=>{try{tt.dimensions=typeof _.getBBox=="function"?_.getBBox():_.getBoundingClientRect()}catch{tt.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(tt,nt,isSVGTag(_.tagName),_e.transformTemplate),renderSVG(_,tt)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({applyWillChange:!0,scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(_e,_,tt){for(const nt in _)!isMotionValue(_[nt])&&!isForcedMotionValue(nt,tt)&&(_e[nt]=_[nt])}function useInitialMotionValues({transformTemplate:_e},_){return reactExports.useMemo(()=>{const tt=createHtmlRenderState();return buildHTMLStyles(tt,_,_e),Object.assign({},tt.vars,tt.style)},[_])}function useStyle(_e,_){const tt=_e.style||{},nt={};return copyRawValuesOnly(nt,tt,_e),Object.assign(nt,useInitialMotionValues(_e,_)),nt}function useHTMLProps(_e,_){const tt={},nt=useStyle(_e,_);return _e.drag&&_e.dragListener!==!1&&(tt.draggable=!1,nt.userSelect=nt.WebkitUserSelect=nt.WebkitTouchCallout="none",nt.touchAction=_e.drag===!0?"none":`pan-${_e.drag==="x"?"y":"x"}`),_e.tabIndex===void 0&&(_e.onTap||_e.onTapStart||_e.whileTap)&&(tt.tabIndex=0),tt.style=nt,tt}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(_e){return _e.startsWith("while")||_e.startsWith("drag")&&_e!=="draggable"||_e.startsWith("layout")||_e.startsWith("onTap")||_e.startsWith("onPan")||_e.startsWith("onLayout")||validMotionProps.has(_e)}let shouldForward=_e=>!isValidMotionProp(_e);function loadExternalIsValidProp(_e){_e&&(shouldForward=_=>_.startsWith("on")?!isValidMotionProp(_):_e(_))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(_e,_,tt){const nt={};for(const rt in _e)rt==="values"&&typeof _e.values=="object"||(shouldForward(rt)||tt===!0&&isValidMotionProp(rt)||!_&&!isValidMotionProp(rt)||_e.draggable&&rt.startsWith("onDrag"))&&(nt[rt]=_e[rt]);return nt}function useSVGProps(_e,_,tt,nt){const rt=reactExports.useMemo(()=>{const it=createSvgRenderState();return buildSVGAttrs(it,_,isSVGTag(nt),_e.transformTemplate),{...it.attrs,style:{...it.style}}},[_]);if(_e.style){const it={};copyRawValuesOnly(it,_e.style,_e),rt.style={...it,...rt.style}}return rt}function createUseRender(_e=!1){return(tt,nt,rt,{latestValues:it},st)=>{const at=(isSVGComponent(tt)?useSVGProps:useHTMLProps)(nt,it,st,tt),lt=filterProps(nt,typeof tt=="string",_e),ct=tt!==reactExports.Fragment?{...lt,...at,ref:rt}:{},{children:ut}=nt,dt=reactExports.useMemo(()=>isMotionValue(ut)?ut.get():ut,[ut]);return reactExports.createElement(tt,{...ct,children:dt})}}function createMotionComponentFactory(_e,_){return function(nt,{forwardMotionProps:rt}={forwardMotionProps:!1}){const st={...isSVGComponent(nt)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:_e,useRender:createUseRender(rt),createVisualElement:_,Component:nt};return createRendererMotionComponent(st)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const _e=window.matchMedia("(prefers-reduced-motion)"),_=()=>prefersReducedMotion.current=_e.matches;_e.addListener(_),_()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(_e,_,tt){for(const nt in _){const rt=_[nt],it=tt[nt];if(isMotionValue(rt))_e.addValue(nt,rt);else if(isMotionValue(it))_e.addValue(nt,motionValue(rt,{owner:_e}));else if(it!==rt)if(_e.hasValue(nt)){const st=_e.getValue(nt);st.liveStyle===!0?st.jump(rt):st.hasAnimated||st.set(rt)}else{const st=_e.getStaticValue(nt);_e.addValue(nt,motionValue(st!==void 0?st:rt,{owner:_e}))}}for(const nt in tt)_[nt]===void 0&&_e.removeValue(nt);return _}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=_e=>valueTypes.find(testValueType(_e)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(_,tt,nt){return{}}constructor({parent:_,props:tt,presenceContext:nt,reducedMotionConfig:rt,blockInitialAnimation:it,visualState:st},ot={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const dt=time.now();this.renderScheduledAt<dt&&(this.renderScheduledAt=dt,frame.render(this.render,!1,!0))};const{latestValues:at,renderState:lt}=st;this.latestValues=at,this.baseTarget={...at},this.initialValues=tt.initial?{...at}:{},this.renderState=lt,this.parent=_,this.props=tt,this.presenceContext=nt,this.depth=_?_.depth+1:0,this.reducedMotionConfig=rt,this.options=ot,this.blockInitialAnimation=!!it,this.isControllingVariants=isControllingVariants(tt),this.isVariantNode=isVariantNode(tt),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(_&&_.current);const{willChange:ct,...ut}=this.scrapeMotionValuesFromProps(tt,{},this);for(const dt in ut){const ht=ut[dt];at[dt]!==void 0&&isMotionValue(ht)&&ht.set(at[dt],!1)}}mount(_){this.current=_,visualElementStore.set(_,this),this.projection&&!this.projection.instance&&this.projection.mount(_),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((tt,nt)=>this.bindToMotionValue(nt,tt)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(_=>_()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const _ in this.events)this.events[_].clear();for(const _ in this.features){const tt=this.features[_];tt&&(tt.unmount(),tt.isMounted=!1)}this.current=null}bindToMotionValue(_,tt){this.valueSubscriptions.has(_)&&this.valueSubscriptions.get(_)();const nt=transformProps.has(_),rt=tt.on("change",ot=>{this.latestValues[_]=ot,this.props.onUpdate&&frame.preRender(this.notifyUpdate),nt&&this.projection&&(this.projection.isTransformDirty=!0)}),it=tt.on("renderRequest",this.scheduleRender);let st;window.MotionCheckAppearSync&&(st=window.MotionCheckAppearSync(this,_,tt)),this.valueSubscriptions.set(_,()=>{rt(),it(),st&&st(),tt.owner&&tt.stop()})}sortNodePosition(_){return!this.current||!this.sortInstanceNodePosition||this.type!==_.type?0:this.sortInstanceNodePosition(this.current,_.current)}updateFeatures(){let _="animation";for(_ in featureDefinitions){const tt=featureDefinitions[_];if(!tt)continue;const{isEnabled:nt,Feature:rt}=tt;if(!this.features[_]&&rt&&nt(this.props)&&(this.features[_]=new rt(this)),this.features[_]){const it=this.features[_];it.isMounted?it.update():(it.mount(),it.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(_){return this.latestValues[_]}setStaticValue(_,tt){this.latestValues[_]=tt}update(_,tt){(_.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=_,this.prevPresenceContext=this.presenceContext,this.presenceContext=tt;for(let nt=0;nt<propEventHandlers.length;nt++){const rt=propEventHandlers[nt];this.propEventSubscriptions[rt]&&(this.propEventSubscriptions[rt](),delete this.propEventSubscriptions[rt]);const it="on"+rt,st=_[it];st&&(this.propEventSubscriptions[rt]=this.on(rt,st))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(_,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(_){return this.props.variants?this.props.variants[_]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(_){const tt=this.getClosestVariantNode();if(tt)return tt.variantChildren&&tt.variantChildren.add(_),()=>tt.variantChildren.delete(_)}addValue(_,tt){const nt=this.values.get(_);tt!==nt&&(nt&&this.removeValue(_),this.bindToMotionValue(_,tt),this.values.set(_,tt),this.latestValues[_]=tt.get())}removeValue(_){this.values.delete(_);const tt=this.valueSubscriptions.get(_);tt&&(tt(),this.valueSubscriptions.delete(_)),delete this.latestValues[_],this.removeValueFromRenderState(_,this.renderState)}hasValue(_){return this.values.has(_)}getValue(_,tt){if(this.props.values&&this.props.values[_])return this.props.values[_];let nt=this.values.get(_);return nt===void 0&&tt!==void 0&&(nt=motionValue(tt===null?void 0:tt,{owner:this}),this.addValue(_,nt)),nt}readValue(_,tt){var nt;let rt=this.latestValues[_]!==void 0||!this.current?this.latestValues[_]:(nt=this.getBaseTargetFromProps(this.props,_))!==null&&nt!==void 0?nt:this.readValueFromInstance(this.current,_,this.options);return rt!=null&&(typeof rt=="string"&&(isNumericalString(rt)||isZeroValueString(rt))?rt=parseFloat(rt):!findValueType(rt)&&complex.test(tt)&&(rt=getAnimatableNone(_,tt)),this.setBaseTarget(_,isMotionValue(rt)?rt.get():rt)),isMotionValue(rt)?rt.get():rt}setBaseTarget(_,tt){this.baseTarget[_]=tt}getBaseTarget(_){var tt;const{initial:nt}=this.props;let rt;if(typeof nt=="string"||typeof nt=="object"){const st=resolveVariantFromProps(this.props,nt,(tt=this.presenceContext)===null||tt===void 0?void 0:tt.custom);st&&(rt=st[_])}if(nt&&rt!==void 0)return rt;const it=this.getBaseTargetFromProps(this.props,_);return it!==void 0&&!isMotionValue(it)?it:this.initialValues[_]!==void 0&&rt===void 0?void 0:this.baseTarget[_]}on(_,tt){return this.events[_]||(this.events[_]=new SubscriptionManager),this.events[_].add(tt)}notify(_,...tt){this.events[_]&&this.events[_].notify(...tt)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(_,tt){return _.compareDocumentPosition(tt)&2?1:-1}getBaseTargetFromProps(_,tt){return _.style?_.style[tt]:void 0}removeValueFromRenderState(_,{vars:tt,style:nt}){delete tt[_],delete nt[_]}}function getComputedStyle$2(_e){return window.getComputedStyle(_e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=renderHTML}readValueFromInstance(_,tt){if(transformProps.has(tt)){const nt=getDefaultValueType(tt);return nt&&nt.default||0}else{const nt=getComputedStyle$2(_),rt=(isCSSVariableName(tt)?nt.getPropertyValue(tt):nt[tt])||0;return typeof rt=="string"?rt.trim():rt}}measureInstanceViewportBox(_,{transformPagePoint:tt}){return measureViewportBox(_,tt)}build(_,tt,nt){buildHTMLStyles(_,tt,nt.transformTemplate)}scrapeMotionValuesFromProps(_,tt,nt){return scrapeMotionValuesFromProps$1(_,tt,nt)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:_}=this.props;isMotionValue(_)&&(this.childSubscription=_.on("change",tt=>{this.current&&(this.current.textContent=`${tt}`)}))}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(_,tt){return _[tt]}readValueFromInstance(_,tt){if(transformProps.has(tt)){const nt=getDefaultValueType(tt);return nt&&nt.default||0}return tt=camelCaseAttributes.has(tt)?tt:camelToDash(tt),_.getAttribute(tt)}scrapeMotionValuesFromProps(_,tt,nt){return scrapeMotionValuesFromProps(_,tt,nt)}build(_,tt,nt){buildSVGAttrs(_,tt,this.isSVGTag,nt.transformTemplate)}renderInstance(_,tt,nt,rt){renderSVG(_,tt,nt,rt)}mount(_){this.isSVGTag=isSVGTag(_.tagName),super.mount(_)}}const createDomVisualElement=(_e,_)=>isSVGComponent(_e)?new SVGVisualElement(_):new HTMLVisualElement(_,{allowProjection:_e!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(_){const tt=this.props.childRef.current;if(tt&&_.isPresent&&!this.props.isPresent){const nt=this.props.sizeRef.current;nt.height=tt.offsetHeight||0,nt.width=tt.offsetWidth||0,nt.top=tt.offsetTop,nt.left=tt.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:_e,isPresent:_}){const tt=reactExports.useId(),nt=reactExports.useRef(null),rt=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:it}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:st,height:ot,top:at,left:lt}=rt.current;if(_||!nt.current||!st||!ot)return;nt.current.dataset.motionPopId=tt;const ct=document.createElement("style");return it&&(ct.nonce=it),document.head.appendChild(ct),ct.sheet&&ct.sheet.insertRule(`
          [data-motion-pop-id="${tt}"] {
            position: absolute !important;
            width: ${st}px !important;
            height: ${ot}px !important;
            top: ${at}px !important;
            left: ${lt}px !important;
          }
        `),()=>{document.head.removeChild(ct)}},[_]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:_,childRef:nt,sizeRef:rt,children:reactExports.cloneElement(_e,{ref:nt})})}const PresenceChild=({children:_e,initial:_,isPresent:tt,onExitComplete:nt,custom:rt,presenceAffectsLayout:it,mode:st})=>{const ot=useConstant(newChildrenMap),at=reactExports.useId(),lt=reactExports.useCallback(ut=>{ot.set(ut,!0);for(const dt of ot.values())if(!dt)return;nt&&nt()},[ot,nt]),ct=reactExports.useMemo(()=>({id:at,initial:_,isPresent:tt,custom:rt,onExitComplete:lt,register:ut=>(ot.set(ut,!1),()=>ot.delete(ut))}),it?[Math.random(),lt]:[tt,lt]);return reactExports.useMemo(()=>{ot.forEach((ut,dt)=>ot.set(dt,!1))},[tt]),reactExports.useEffect(()=>{!tt&&!ot.size&&nt&&nt()},[tt]),st==="popLayout"&&(_e=jsxRuntimeExports.jsx(PopChild,{isPresent:tt,children:_e})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:ct,children:_e})};function newChildrenMap(){return new Map}const getChildKey=_e=>_e.key||"";function onlyElements(_e){const _=[];return reactExports.Children.forEach(_e,tt=>{reactExports.isValidElement(tt)&&_.push(tt)}),_}const AnimatePresence=({children:_e,exitBeforeEnter:_,custom:tt,initial:nt=!0,onExitComplete:rt,presenceAffectsLayout:it=!0,mode:st="sync"})=>{const ot=reactExports.useMemo(()=>onlyElements(_e),[_e]),at=ot.map(getChildKey),lt=reactExports.useRef(!0),ct=reactExports.useRef(ot),ut=useConstant(()=>new Map),[dt,ht]=reactExports.useState(ot),[mt,yt]=reactExports.useState(ot);useIsomorphicLayoutEffect$2(()=>{lt.current=!1,ct.current=ot;for(let _t=0;_t<mt.length;_t++){const xt=getChildKey(mt[_t]);at.includes(xt)?ut.delete(xt):ut.get(xt)!==!0&&ut.set(xt,!1)}},[mt,at.length,at.join("-")]);const vt=[];if(ot!==dt){let _t=[...ot];for(let xt=0;xt<mt.length;xt++){const St=mt[xt],At=getChildKey(St);at.includes(At)||(_t.splice(xt,0,St),vt.push(St))}st==="wait"&&vt.length&&(_t=vt),yt(onlyElements(_t)),ht(ot);return}const{forceRender:pt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:mt.map(_t=>{const xt=getChildKey(_t),St=ot===mt||at.includes(xt),At=()=>{if(ut.has(xt))ut.set(xt,!0);else return;let bt=!0;ut.forEach(Et=>{Et||(bt=!1)}),bt&&(pt==null||pt(),yt(ct.current),rt&&rt())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:St,initial:!lt.current||nt?void 0:!1,custom:St?void 0:tt,presenceAffectsLayout:it,mode:st,onExitComplete:St?void 0:At,children:_t},xt)})})},menu="_menu_1er9z_20",body="_body_1er9z_30",nav="_nav_1er9z_38",header="_header_1er9z_45",footer="_footer_1er9z_63",activeMenu="_activeMenu_1er9z_72",styles$4={menu,body,nav,header,footer,activeMenu,"gradient-animation":"_gradient-animation_1er9z_1"};var navigation$1={exports:{}},appRouterContext_sharedRuntime={},_interop_require_default$1={};_interop_require_default$1._=_interop_require_default$1._interop_require_default=_interop_require_default;function _interop_require_default(_e){return _e&&_e.__esModule?_e:{default:_e}}(function(_e){"use client";Object.defineProperty(_e,"__esModule",{value:!0});function _(lt,ct){for(var ut in ct)Object.defineProperty(lt,ut,{enumerable:!0,get:ct[ut]})}_(_e,{AppRouterContext:function(){return rt},GlobalLayoutRouterContext:function(){return st},LayoutRouterContext:function(){return it},MissingSlotContext:function(){return at},TemplateContext:function(){return ot}});const nt=_interop_require_default$1._(reactExports),rt=nt.default.createContext(null),it=nt.default.createContext(null),st=nt.default.createContext(null),ot=nt.default.createContext(null),at=nt.default.createContext(new Set)})(appRouterContext_sharedRuntime);var hooksClientContext_sharedRuntime={};(function(_e){"use client";Object.defineProperty(_e,"__esModule",{value:!0});function _(st,ot){for(var at in ot)Object.defineProperty(st,at,{enumerable:!0,get:ot[at]})}_(_e,{PathParamsContext:function(){return it},PathnameContext:function(){return rt},SearchParamsContext:function(){return nt}});const tt=reactExports,nt=(0,tt.createContext)(null),rt=(0,tt.createContext)(null),it=(0,tt.createContext)(null)})(hooksClientContext_sharedRuntime);var getSegmentValue={exports:{}};(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"getSegmentValue",{enumerable:!0,get:function(){return tt}});function tt(nt){return Array.isArray(nt)?nt[1]:nt}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(getSegmentValue,getSegmentValue.exports);var getSegmentValueExports=getSegmentValue.exports,segment={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});function _(it,st){for(var ot in st)Object.defineProperty(it,ot,{enumerable:!0,get:st[ot]})}_(_e,{DEFAULT_SEGMENT_KEY:function(){return rt},PAGE_SEGMENT_KEY:function(){return nt},isGroupSegment:function(){return tt}});function tt(it){return it[0]==="("&&it.endsWith(")")}const nt="__PAGE__",rt="__DEFAULT__"})(segment);var navigation_reactServer={exports:{}},redirect={exports:{}},requestAsyncStorage_external={exports:{}},requestAsyncStorageInstance={exports:{}},asyncLocalStorage={exports:{}};(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"createAsyncLocalStorage",{enumerable:!0,get:function(){return it}});const tt=new Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class nt{disable(){throw tt}getStore(){}run(){throw tt}exit(){throw tt}enterWith(){throw tt}}const rt=globalThis.AsyncLocalStorage;function it(){return rt?new rt:new nt}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(asyncLocalStorage,asyncLocalStorage.exports);var asyncLocalStorageExports=asyncLocalStorage.exports;(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"requestAsyncStorage",{enumerable:!0,get:function(){return nt}});const nt=(0,asyncLocalStorageExports.createAsyncLocalStorage)();(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(requestAsyncStorageInstance,requestAsyncStorageInstance.exports);var requestAsyncStorageInstanceExports=requestAsyncStorageInstance.exports;(function(_e,_){"TURBOPACK { transition: next-shared }";Object.defineProperty(_,"__esModule",{value:!0});function tt(it,st){for(var ot in st)Object.defineProperty(it,ot,{enumerable:!0,get:st[ot]})}tt(_,{getExpectedRequestStore:function(){return rt},requestAsyncStorage:function(){return nt.requestAsyncStorage}});const nt=requestAsyncStorageInstanceExports;function rt(it){const st=nt.requestAsyncStorage.getStore();if(st)return st;throw new Error("`"+it+"` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context")}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(requestAsyncStorage_external,requestAsyncStorage_external.exports);var requestAsyncStorage_externalExports=requestAsyncStorage_external.exports,actionAsyncStorage_external={exports:{}},actionAsyncStorageInstance={exports:{}};(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"actionAsyncStorage",{enumerable:!0,get:function(){return nt}});const nt=(0,asyncLocalStorageExports.createAsyncLocalStorage)();(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(actionAsyncStorageInstance,actionAsyncStorageInstance.exports);var actionAsyncStorageInstanceExports=actionAsyncStorageInstance.exports;(function(_e,_){"TURBOPACK { transition: next-shared }";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"actionAsyncStorage",{enumerable:!0,get:function(){return tt.actionAsyncStorage}});const tt=actionAsyncStorageInstanceExports;(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(actionAsyncStorage_external,actionAsyncStorage_external.exports);var actionAsyncStorage_externalExports=actionAsyncStorage_external.exports,redirectStatusCode={exports:{}};(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"RedirectStatusCode",{enumerable:!0,get:function(){return tt}});var tt;(function(nt){nt[nt.SeeOther=303]="SeeOther",nt[nt.TemporaryRedirect=307]="TemporaryRedirect",nt[nt.PermanentRedirect=308]="PermanentRedirect"})(tt||(tt={})),(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(redirectStatusCode,redirectStatusCode.exports);var redirectStatusCodeExports=redirectStatusCode.exports;(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0});function tt(yt,vt){for(var pt in vt)Object.defineProperty(yt,pt,{enumerable:!0,get:vt[pt]})}tt(_,{RedirectType:function(){return ot},getRedirectError:function(){return at},getRedirectStatusCodeFromError:function(){return mt},getRedirectTypeFromError:function(){return ht},getURLFromRedirectError:function(){return dt},isRedirectError:function(){return ut},permanentRedirect:function(){return ct},redirect:function(){return lt}});const nt=requestAsyncStorage_externalExports,rt=actionAsyncStorage_externalExports,it=redirectStatusCodeExports,st="NEXT_REDIRECT";var ot;(function(yt){yt.push="push",yt.replace="replace"})(ot||(ot={}));function at(yt,vt,pt){pt===void 0&&(pt=it.RedirectStatusCode.TemporaryRedirect);const _t=new Error(st);_t.digest=st+";"+vt+";"+yt+";"+pt+";";const xt=nt.requestAsyncStorage.getStore();return xt&&(_t.mutableCookies=xt.mutableCookies),_t}function lt(yt,vt){vt===void 0&&(vt="replace");const pt=rt.actionAsyncStorage.getStore();throw at(yt,vt,pt!=null&&pt.isAction?it.RedirectStatusCode.SeeOther:it.RedirectStatusCode.TemporaryRedirect)}function ct(yt,vt){vt===void 0&&(vt="replace");const pt=rt.actionAsyncStorage.getStore();throw at(yt,vt,pt!=null&&pt.isAction?it.RedirectStatusCode.SeeOther:it.RedirectStatusCode.PermanentRedirect)}function ut(yt){if(typeof yt!="object"||yt===null||!("digest"in yt)||typeof yt.digest!="string")return!1;const[vt,pt,_t,xt]=yt.digest.split(";",4),St=Number(xt);return vt===st&&(pt==="replace"||pt==="push")&&typeof _t=="string"&&!isNaN(St)&&St in it.RedirectStatusCode}function dt(yt){return ut(yt)?yt.digest.split(";",3)[2]:null}function ht(yt){if(!ut(yt))throw new Error("Not a redirect error");return yt.digest.split(";",2)[1]}function mt(yt){if(!ut(yt))throw new Error("Not a redirect error");return Number(yt.digest.split(";",4)[3])}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(redirect,redirect.exports);var redirectExports=redirect.exports,notFound={exports:{}};(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0});function tt(st,ot){for(var at in ot)Object.defineProperty(st,at,{enumerable:!0,get:ot[at]})}tt(_,{isNotFoundError:function(){return it},notFound:function(){return rt}});const nt="NEXT_NOT_FOUND";function rt(){const st=new Error(nt);throw st.digest=nt,st}function it(st){return typeof st!="object"||st===null||!("digest"in st)?!1:st.digest===nt}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(notFound,notFound.exports);var notFoundExports=notFound.exports;(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0});function tt(ot,at){for(var lt in at)Object.defineProperty(ot,lt,{enumerable:!0,get:at[lt]})}tt(_,{ReadonlyURLSearchParams:function(){return st},RedirectType:function(){return nt.RedirectType},notFound:function(){return rt.notFound},permanentRedirect:function(){return nt.permanentRedirect},redirect:function(){return nt.redirect}});const nt=redirectExports,rt=notFoundExports;class it extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class st extends URLSearchParams{append(){throw new it}delete(){throw new it}set(){throw new it}sort(){throw new it}}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(navigation_reactServer,navigation_reactServer.exports);var navigation_reactServerExports=navigation_reactServer.exports,serverInsertedHtml_sharedRuntime={},_interop_require_wildcard$1={};function _getRequireWildcardCache(_e){if(typeof WeakMap!="function")return null;var _=new WeakMap,tt=new WeakMap;return(_getRequireWildcardCache=function(nt){return nt?tt:_})(_e)}_interop_require_wildcard$1._=_interop_require_wildcard$1._interop_require_wildcard=_interop_require_wildcard;function _interop_require_wildcard(_e,_){if(!_&&_e&&_e.__esModule)return _e;if(_e===null||typeof _e!="object"&&typeof _e!="function")return{default:_e};var tt=_getRequireWildcardCache(_);if(tt&&tt.has(_e))return tt.get(_e);var nt={__proto__:null},rt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in _e)if(it!=="default"&&Object.prototype.hasOwnProperty.call(_e,it)){var st=rt?Object.getOwnPropertyDescriptor(_e,it):null;st&&(st.get||st.set)?Object.defineProperty(nt,it,st):nt[it]=_e[it]}return nt.default=_e,tt&&tt.set(_e,nt),nt}(function(_e){"use client";Object.defineProperty(_e,"__esModule",{value:!0});function _(st,ot){for(var at in ot)Object.defineProperty(st,at,{enumerable:!0,get:ot[at]})}_(_e,{ServerInsertedHTMLContext:function(){return rt},useServerInsertedHTML:function(){return it}});const nt=_interop_require_wildcard$1._(reactExports),rt=nt.default.createContext(null);function it(st){const ot=(0,nt.useContext)(rt);ot&&ot(st)}})(serverInsertedHtml_sharedRuntime);var bailoutToClientRendering={exports:{}},bailoutToCsr={},hasRequiredBailoutToCsr;function requireBailoutToCsr(){return hasRequiredBailoutToCsr||(hasRequiredBailoutToCsr=1,function(_e){Object.defineProperty(_e,"__esModule",{value:!0});function _(it,st){for(var ot in st)Object.defineProperty(it,ot,{enumerable:!0,get:st[ot]})}_(_e,{BailoutToCSRError:function(){return nt},isBailoutToCSRError:function(){return rt}});const tt="BAILOUT_TO_CLIENT_SIDE_RENDERING";class nt extends Error{constructor(st){super("Bail out to client-side rendering: "+st),this.reason=st,this.digest=tt}}function rt(it){return typeof it!="object"||it===null||!("digest"in it)?!1:it.digest===tt}}(bailoutToCsr)),bailoutToCsr}var staticGenerationAsyncStorage_external={exports:{}},staticGenerationAsyncStorageInstance={exports:{}},hasRequiredStaticGenerationAsyncStorageInstance;function requireStaticGenerationAsyncStorageInstance(){return hasRequiredStaticGenerationAsyncStorageInstance||(hasRequiredStaticGenerationAsyncStorageInstance=1,function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"staticGenerationAsyncStorage",{enumerable:!0,get:function(){return nt}});const nt=(0,asyncLocalStorageExports.createAsyncLocalStorage)();(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)}(staticGenerationAsyncStorageInstance,staticGenerationAsyncStorageInstance.exports)),staticGenerationAsyncStorageInstance.exports}var hasRequiredStaticGenerationAsyncStorage_external;function requireStaticGenerationAsyncStorage_external(){return hasRequiredStaticGenerationAsyncStorage_external||(hasRequiredStaticGenerationAsyncStorage_external=1,function(_e,_){"TURBOPACK { transition: next-shared }";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"staticGenerationAsyncStorage",{enumerable:!0,get:function(){return tt.staticGenerationAsyncStorage}});const tt=requireStaticGenerationAsyncStorageInstance();(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)}(staticGenerationAsyncStorage_external,staticGenerationAsyncStorage_external.exports)),staticGenerationAsyncStorage_external.exports}var hasRequiredBailoutToClientRendering;function requireBailoutToClientRendering(){return hasRequiredBailoutToClientRendering||(hasRequiredBailoutToClientRendering=1,function(_e,_){Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"bailoutToClientRendering",{enumerable:!0,get:function(){return rt}});const tt=requireBailoutToCsr(),nt=requireStaticGenerationAsyncStorage_external();function rt(it){const st=nt.staticGenerationAsyncStorage.getStore();if(!(st!=null&&st.forceStatic)&&st!=null&&st.isStaticGeneration)throw new tt.BailoutToCSRError(it)}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)}(bailoutToClientRendering,bailoutToClientRendering.exports)),bailoutToClientRendering.exports}(function(_e,_){Object.defineProperty(_,"__esModule",{value:!0});function tt(pt,_t){for(var xt in _t)Object.defineProperty(pt,xt,{enumerable:!0,get:_t[xt]})}tt(_,{ReadonlyURLSearchParams:function(){return at.ReadonlyURLSearchParams},RedirectType:function(){return at.RedirectType},ServerInsertedHTMLContext:function(){return lt.ServerInsertedHTMLContext},notFound:function(){return at.notFound},permanentRedirect:function(){return at.permanentRedirect},redirect:function(){return at.redirect},useParams:function(){return ht},usePathname:function(){return ut},useRouter:function(){return dt},useSearchParams:function(){return ct},useSelectedLayoutSegment:function(){return vt},useSelectedLayoutSegments:function(){return yt},useServerInsertedHTML:function(){return lt.useServerInsertedHTML}});const nt=reactExports,rt=appRouterContext_sharedRuntime,it=hooksClientContext_sharedRuntime,st=getSegmentValueExports,ot=segment,at=navigation_reactServerExports,lt=serverInsertedHtml_sharedRuntime;function ct(){const pt=(0,nt.useContext)(it.SearchParamsContext),_t=(0,nt.useMemo)(()=>pt?new at.ReadonlyURLSearchParams(pt):null,[pt]);if(typeof window>"u"){const{bailoutToClientRendering:xt}=requireBailoutToClientRendering();xt("useSearchParams()")}return _t}function ut(){return(0,nt.useContext)(it.PathnameContext)}function dt(){const pt=(0,nt.useContext)(rt.AppRouterContext);if(pt===null)throw new Error("invariant expected app router to be mounted");return pt}function ht(){return(0,nt.useContext)(it.PathParamsContext)}function mt(pt,_t,xt,St){xt===void 0&&(xt=!0),St===void 0&&(St=[]);let At;if(xt)At=pt[1][_t];else{const Rt=pt[1];var bt;At=(bt=Rt.children)!=null?bt:Object.values(Rt)[0]}if(!At)return St;const Et=At[0],wt=(0,st.getSegmentValue)(Et);return!wt||wt.startsWith(ot.PAGE_SEGMENT_KEY)?St:(St.push(wt),mt(At,_t,!1,St))}function yt(pt){pt===void 0&&(pt="children");const _t=(0,nt.useContext)(rt.LayoutRouterContext);return _t?mt(_t.tree,pt):null}function vt(pt){pt===void 0&&(pt="children");const _t=yt(pt);if(!_t||_t.length===0)return null;const xt=pt==="children"?_t[0]:_t[_t.length-1];return xt===ot.DEFAULT_SEGMENT_KEY?null:xt}(typeof _.default=="function"||typeof _.default=="object"&&_.default!==null)&&typeof _.default.__esModule>"u"&&(Object.defineProperty(_.default,"__esModule",{value:!0}),Object.assign(_.default,_),_e.exports=_.default)})(navigation$1,navigation$1.exports);var navigationExports=navigation$1.exports,navigation=navigationExports;const menuSlide={initial:{x:"calc(100% + 100px)"},enter:{x:"0",transition:{duration:.8,ease:[.76,0,.24,1]}},exit:{x:"calc(100% + 100px)",transition:{duration:.8,ease:[.76,0,.24,1]}}},slide={initial:{x:80},enter:_e=>({x:0,transition:{duration:.8,ease:[.76,0,.24,1],delay:.05*_e}}),exit:_e=>({x:80,transition:{duration:.8,ease:[.76,0,.24,1],delay:.05*_e}})},scale={open:{scale:1,transition:{duration:.3}},closed:{scale:0,transition:{duration:.4}}},link="_link_1enap_1",indicator="_indicator_1enap_6",styles$3={link,indicator},LinkComponent=({data:_e,isActive:_,setSelectedIndicator:tt,onClick:nt})=>{const{title:rt,href:it,index:st}=_e;return jsxRuntimeExports.jsxs(motion.div,{className:styles$3.link,onMouseEnter:()=>tt(it),custom:st,variants:slide,initial:"initial",animate:"enter",exit:"exit",onClick:nt,children:[jsxRuntimeExports.jsx(motion.div,{variants:scale,animate:_?"open":"closed",className:styles$3.indicator}),jsxRuntimeExports.jsx(Link,{to:it,children:rt})]})},svgCurve="_svgCurve_16fv0_1",styles$2={svgCurve},Curve$1=()=>{const _e=`M100 0 L100 ${window.innerHeight} Q-100 ${window.innerHeight/2} 100 0`,_=`M100 0 L100 ${window.innerHeight} Q100 ${window.innerHeight/2} 100 0`,tt={initial:{d:_e},enter:{d:_,transition:{duration:1,ease:[.76,0,.24,1]}},exit:{d:_e,transition:{duration:.8,ease:[.76,0,.24,1]}}};return jsxRuntimeExports.jsx("svg",{className:styles$2.svgCurve,children:jsxRuntimeExports.jsx(motion.path,{variants:tt,initial:"initial",animate:"enter",exit:"exit"})})},navItems=[{title:"INTRO",href:"/"},{title:"PROJECTS",href:"/projects"},{title:"CURRICULUM VITAE",href:"/curriculum_vitae"},{title:"ABOUT",href:"/about"},{title:"CONTACT",href:"/contact"}],Nav=({onClose:_e,showMenu:_,isProjectViewRoute:tt})=>{const nt=navigation.usePathname(),[rt,it]=reactExports.useState(nt),st=ot=>{it(ot),_e()};return jsxRuntimeExports.jsxs(motion.div,{variants:menuSlide,initial:"initial",animate:"enter",exit:"exit",className:`${styles$4.menu} ${_||tt?styles$4.activeMenu:""}`,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.body,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.nav,children:[jsxRuntimeExports.jsx("div",{className:styles$4.header,children:jsxRuntimeExports.jsx("p",{children:"Navigation"})}),navItems.map((ot,at)=>jsxRuntimeExports.jsx(LinkComponent,{data:{...ot,index:at},isActive:rt===ot.href,setSelectedIndicator:it,onClick:()=>st(ot.href)},at))]}),jsxRuntimeExports.jsx("div",{className:styles$4.footer})]}),jsxRuntimeExports.jsx(Curve$1,{})]})},button="_button_1wnon_1",burger="_burger_1wnon_16",burgerActive="_burgerActive_1wnon_38",styles$1={button,burger,burgerActive},Header=({onClose:_e,isProjectViewRoute:_,showMenu:tt})=>{const[nt,rt]=reactExports.useState(!1),it=()=>{rt(!nt)},st=()=>{rt(!1),_e()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{onClick:it,className:styles$1.button,children:jsxRuntimeExports.jsx("div",{className:`${styles$1.burger} ${nt?styles$1.burgerActive:""}`})}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:nt&&jsxRuntimeExports.jsx(Nav,{onClose:st,showMenu:tt,isProjectViewRoute:_})})]})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="169",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace$1="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(_,tt){this._listeners===void 0&&(this._listeners={});const nt=this._listeners;nt[_]===void 0&&(nt[_]=[]),nt[_].indexOf(tt)===-1&&nt[_].push(tt)}hasEventListener(_,tt){if(this._listeners===void 0)return!1;const nt=this._listeners;return nt[_]!==void 0&&nt[_].indexOf(tt)!==-1}removeEventListener(_,tt){if(this._listeners===void 0)return;const rt=this._listeners[_];if(rt!==void 0){const it=rt.indexOf(tt);it!==-1&&rt.splice(it,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const nt=this._listeners[_.type];if(nt!==void 0){_.target=this;const rt=nt.slice(0);for(let it=0,st=rt.length;it<st;it++)rt[it].call(this,_);_.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const _e=Math.random()*4294967295|0,_=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut$1[_e&255]+_lut$1[_e>>8&255]+_lut$1[_e>>16&255]+_lut$1[_e>>24&255]+"-"+_lut$1[_&255]+_lut$1[_>>8&255]+"-"+_lut$1[_>>16&15|64]+_lut$1[_>>24&255]+"-"+_lut$1[tt&63|128]+_lut$1[tt>>8&255]+"-"+_lut$1[tt>>16&255]+_lut$1[tt>>24&255]+_lut$1[nt&255]+_lut$1[nt>>8&255]+_lut$1[nt>>16&255]+_lut$1[nt>>24&255]).toLowerCase()}function clamp$3(_e,_,tt){return Math.max(_,Math.min(tt,_e))}function euclideanModulo(_e,_){return(_e%_+_)%_}function mapLinear(_e,_,tt,nt,rt){return nt+(_e-_)*(rt-nt)/(tt-_)}function inverseLerp(_e,_,tt){return _e!==_?(tt-_e)/(_-_e):0}function lerp(_e,_,tt){return(1-tt)*_e+tt*_}function damp(_e,_,tt,nt){return lerp(_e,_,1-Math.exp(-tt*nt))}function pingpong(_e,_=1){return _-Math.abs(euclideanModulo(_e,_*2)-_)}function smoothstep(_e,_,tt){return _e<=_?0:_e>=tt?1:(_e=(_e-_)/(tt-_),_e*_e*(3-2*_e))}function smootherstep(_e,_,tt){return _e<=_?0:_e>=tt?1:(_e=(_e-_)/(tt-_),_e*_e*_e*(_e*(_e*6-15)+10))}function randInt(_e,_){return _e+Math.floor(Math.random()*(_-_e+1))}function randFloat(_e,_){return _e+Math.random()*(_-_e)}function randFloatSpread(_e){return _e*(.5-Math.random())}function seededRandom(_e){_e!==void 0&&(_seed=_e);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(_e){return _e*DEG2RAD}function radToDeg(_e){return _e*RAD2DEG}function isPowerOfTwo(_e){return(_e&_e-1)===0&&_e!==0}function ceilPowerOfTwo(_e){return Math.pow(2,Math.ceil(Math.log(_e)/Math.LN2))}function floorPowerOfTwo(_e){return Math.pow(2,Math.floor(Math.log(_e)/Math.LN2))}function setQuaternionFromProperEuler(_e,_,tt,nt,rt){const it=Math.cos,st=Math.sin,ot=it(tt/2),at=st(tt/2),lt=it((_+nt)/2),ct=st((_+nt)/2),ut=it((_-nt)/2),dt=st((_-nt)/2),ht=it((nt-_)/2),mt=st((nt-_)/2);switch(rt){case"XYX":_e.set(ot*ct,at*ut,at*dt,ot*lt);break;case"YZY":_e.set(at*dt,ot*ct,at*ut,ot*lt);break;case"ZXZ":_e.set(at*ut,at*dt,ot*ct,ot*lt);break;case"XZX":_e.set(ot*ct,at*mt,at*ht,ot*lt);break;case"YXY":_e.set(at*ht,ot*ct,at*mt,ot*lt);break;case"ZYZ":_e.set(at*mt,at*ht,ot*ct,ot*lt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+rt)}}function denormalize(_e,_){switch(_.constructor){case Float32Array:return _e;case Uint32Array:return _e/4294967295;case Uint16Array:return _e/65535;case Uint8Array:return _e/255;case Int32Array:return Math.max(_e/2147483647,-1);case Int16Array:return Math.max(_e/32767,-1);case Int8Array:return Math.max(_e/127,-1);default:throw new Error("Invalid component type.")}}function normalize$5(_e,_){switch(_.constructor){case Float32Array:return _e;case Uint32Array:return Math.round(_e*4294967295);case Uint16Array:return Math.round(_e*65535);case Uint8Array:return Math.round(_e*255);case Int32Array:return Math.round(_e*2147483647);case Int16Array:return Math.round(_e*32767);case Int8Array:return Math.round(_e*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$3,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$5,denormalize};class Vector2{constructor(_=0,tt=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=tt}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,tt){return this.x=_,this.y=tt,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const tt=this.x,nt=this.y,rt=_.elements;return this.x=rt[0]*tt+rt[3]*nt+rt[6],this.y=rt[1]*tt+rt[4]*nt+rt[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const tt=Math.sqrt(this.lengthSq()*_.lengthSq());if(tt===0)return Math.PI/2;const nt=this.dot(_)/tt;return Math.acos(clamp$3(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const tt=this.x-_.x,nt=this.y-_.y;return tt*tt+nt*nt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this}rotateAround(_,tt){const nt=Math.cos(tt),rt=Math.sin(tt),it=this.x-_.x,st=this.y-_.y;return this.x=it*nt-st*rt+_.x,this.y=it*rt+st*nt+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(_,tt,nt,rt,it,st,ot,at,lt){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,tt,nt,rt,it,st,ot,at,lt)}set(_,tt,nt,rt,it,st,ot,at,lt){const ct=this.elements;return ct[0]=_,ct[1]=rt,ct[2]=ot,ct[3]=tt,ct[4]=it,ct[5]=at,ct[6]=nt,ct[7]=st,ct[8]=lt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const tt=this.elements,nt=_.elements;return tt[0]=nt[0],tt[1]=nt[1],tt[2]=nt[2],tt[3]=nt[3],tt[4]=nt[4],tt[5]=nt[5],tt[6]=nt[6],tt[7]=nt[7],tt[8]=nt[8],this}extractBasis(_,tt,nt){return _.setFromMatrix3Column(this,0),tt.setFromMatrix3Column(this,1),nt.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const tt=_.elements;return this.set(tt[0],tt[4],tt[8],tt[1],tt[5],tt[9],tt[2],tt[6],tt[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,tt){const nt=_.elements,rt=tt.elements,it=this.elements,st=nt[0],ot=nt[3],at=nt[6],lt=nt[1],ct=nt[4],ut=nt[7],dt=nt[2],ht=nt[5],mt=nt[8],yt=rt[0],vt=rt[3],pt=rt[6],_t=rt[1],xt=rt[4],St=rt[7],At=rt[2],bt=rt[5],Et=rt[8];return it[0]=st*yt+ot*_t+at*At,it[3]=st*vt+ot*xt+at*bt,it[6]=st*pt+ot*St+at*Et,it[1]=lt*yt+ct*_t+ut*At,it[4]=lt*vt+ct*xt+ut*bt,it[7]=lt*pt+ct*St+ut*Et,it[2]=dt*yt+ht*_t+mt*At,it[5]=dt*vt+ht*xt+mt*bt,it[8]=dt*pt+ht*St+mt*Et,this}multiplyScalar(_){const tt=this.elements;return tt[0]*=_,tt[3]*=_,tt[6]*=_,tt[1]*=_,tt[4]*=_,tt[7]*=_,tt[2]*=_,tt[5]*=_,tt[8]*=_,this}determinant(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],st=_[4],ot=_[5],at=_[6],lt=_[7],ct=_[8];return tt*st*ct-tt*ot*lt-nt*it*ct+nt*ot*at+rt*it*lt-rt*st*at}invert(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],st=_[4],ot=_[5],at=_[6],lt=_[7],ct=_[8],ut=ct*st-ot*lt,dt=ot*at-ct*it,ht=lt*it-st*at,mt=tt*ut+nt*dt+rt*ht;if(mt===0)return this.set(0,0,0,0,0,0,0,0,0);const yt=1/mt;return _[0]=ut*yt,_[1]=(rt*lt-ct*nt)*yt,_[2]=(ot*nt-rt*st)*yt,_[3]=dt*yt,_[4]=(ct*tt-rt*at)*yt,_[5]=(rt*it-ot*tt)*yt,_[6]=ht*yt,_[7]=(nt*at-lt*tt)*yt,_[8]=(st*tt-nt*it)*yt,this}transpose(){let _;const tt=this.elements;return _=tt[1],tt[1]=tt[3],tt[3]=_,_=tt[2],tt[2]=tt[6],tt[6]=_,_=tt[5],tt[5]=tt[7],tt[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const tt=this.elements;return _[0]=tt[0],_[1]=tt[3],_[2]=tt[6],_[3]=tt[1],_[4]=tt[4],_[5]=tt[7],_[6]=tt[2],_[7]=tt[5],_[8]=tt[8],this}setUvTransform(_,tt,nt,rt,it,st,ot){const at=Math.cos(it),lt=Math.sin(it);return this.set(nt*at,nt*lt,-nt*(at*st+lt*ot)+st+_,-rt*lt,rt*at,-rt*(-lt*st+at*ot)+ot+tt,0,0,1),this}scale(_,tt){return this.premultiply(_m3.makeScale(_,tt)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,tt){return this.premultiply(_m3.makeTranslation(_,tt)),this}makeTranslation(_,tt){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,tt,0,0,1),this}makeRotation(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,-nt,0,nt,tt,0,0,0,1),this}makeScale(_,tt){return this.set(_,0,0,0,tt,0,0,0,1),this}equals(_){const tt=this.elements,nt=_.elements;for(let rt=0;rt<9;rt++)if(tt[rt]!==nt[rt])return!1;return!0}fromArray(_,tt=0){for(let nt=0;nt<9;nt++)this.elements[nt]=_[nt+tt];return this}toArray(_=[],tt=0){const nt=this.elements;return _[tt]=nt[0],_[tt+1]=nt[1],_[tt+2]=nt[2],_[tt+3]=nt[3],_[tt+4]=nt[4],_[tt+5]=nt[5],_[tt+6]=nt[6],_[tt+7]=nt[7],_[tt+8]=nt[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(_e){for(let _=_e.length-1;_>=0;--_)if(_e[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(_e,_){return new TYPED_ARRAYS[_e](_)}function createElementNS(_e){return document.createElementNS("http://www.w3.org/1999/xhtml",_e)}function createCanvasElement(){const _e=createElementNS("canvas");return _e.style.display="block",_e}const _cache={};function warnOnce(_e){_e in _cache||(_cache[_e]=!0,console.warn(_e))}function probeAsync(_e,_,tt){return new Promise(function(nt,rt){function it(){switch(_e.clientWaitSync(_,_e.SYNC_FLUSH_COMMANDS_BIT,0)){case _e.WAIT_FAILED:rt();break;case _e.TIMEOUT_EXPIRED:setTimeout(it,tt);break;default:nt()}}setTimeout(it,tt)})}function toNormalizedProjectionMatrix(_e){const _=_e.elements;_[2]=.5*_[2]+.5*_[3],_[6]=.5*_[6]+.5*_[7],_[10]=.5*_[10]+.5*_[11],_[14]=.5*_[14]+.5*_[15]}function toReversedProjectionMatrix(_e){const _=_e.elements;_[11]===-1?(_[10]=-_[10]-1,_[14]=-_[14]):(_[10]=-_[10],_[14]=-_[14]+1)}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace$1]:{transfer:LinearTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:_e=>_e,fromReference:_e=>_e},[SRGBColorSpace$1]:{transfer:SRGBTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:_e=>_e.convertSRGBToLinear(),fromReference:_e=>_e.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:_e=>_e.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:_e=>_e.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:_e=>_e.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:_e=>_e.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace$1,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace$1,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(_e){if(!SUPPORTED_WORKING_COLOR_SPACES.has(_e))throw new Error(`Unsupported working color space, "${_e}".`);this._workingColorSpace=_e},convert:function(_e,_,tt){if(this.enabled===!1||_===tt||!_||!tt)return _e;const nt=COLOR_SPACES[_].toReference,rt=COLOR_SPACES[tt].fromReference;return rt(nt(_e))},fromWorkingColorSpace:function(_e,_){return this.convert(_e,this._workingColorSpace,_)},toWorkingColorSpace:function(_e,_){return this.convert(_e,_,this._workingColorSpace)},getPrimaries:function(_e){return COLOR_SPACES[_e].primaries},getTransfer:function(_e){return _e===NoColorSpace?LinearTransfer:COLOR_SPACES[_e].transfer},getLuminanceCoefficients:function(_e,_=this._workingColorSpace){return _e.fromArray(COLOR_SPACES[_].luminanceCoefficients)}};function SRGBToLinear(_e){return _e<.04045?_e*.0773993808:Math.pow(_e*.9478672986+.0521327014,2.4)}function LinearToSRGB(_e){return _e<.0031308?_e*12.92:1.055*Math.pow(_e,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(_){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let tt;if(_ instanceof HTMLCanvasElement)tt=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const nt=_canvas.getContext("2d");_ instanceof ImageData?nt.putImageData(_,0,0):nt.drawImage(_,0,0,_.width,_.height),tt=_canvas}return tt.width>2048||tt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",_),tt.toDataURL("image/jpeg",.6)):tt.toDataURL("image/png")}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const tt=createElementNS("canvas");tt.width=_.width,tt.height=_.height;const nt=tt.getContext("2d");nt.drawImage(_,0,0,_.width,_.height);const rt=nt.getImageData(0,0,_.width,_.height),it=rt.data;for(let st=0;st<it.length;st++)it[st]=SRGBToLinear(it[st]/255)*255;return nt.putImageData(rt,0,0),tt}else if(_.data){const tt=_.data.slice(0);for(let nt=0;nt<tt.length;nt++)tt instanceof Uint8Array||tt instanceof Uint8ClampedArray?tt[nt]=Math.floor(SRGBToLinear(tt[nt]/255)*255):tt[nt]=SRGBToLinear(tt[nt]);return{data:tt,width:_.width,height:_.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let _sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID$1(),this.data=_,this.dataReady=!0,this.version=0}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const tt=_===void 0||typeof _=="string";if(!tt&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const nt={uuid:this.uuid,url:""},rt=this.data;if(rt!==null){let it;if(Array.isArray(rt)){it=[];for(let st=0,ot=rt.length;st<ot;st++)rt[st].isDataTexture?it.push(serializeImage(rt[st].image)):it.push(serializeImage(rt[st]))}else it=serializeImage(rt);nt.url=it}return tt||(_.images[this.uuid]=nt),nt}}function serializeImage(_e){return typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_e instanceof ImageBitmap?ImageUtils.getDataURL(_e):_e.data?{data:Array.from(_e.data),width:_e.width,height:_e.height,type:_e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(_=Texture.DEFAULT_IMAGE,tt=Texture.DEFAULT_MAPPING,nt=ClampToEdgeWrapping,rt=ClampToEdgeWrapping,it=LinearFilter,st=LinearMipmapLinearFilter,ot=RGBAFormat,at=UnsignedByteType,lt=Texture.DEFAULT_ANISOTROPY,ct=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=tt,this.channel=0,this.wrapS=nt,this.wrapT=rt,this.magFilter=it,this.minFilter=st,this.anisotropy=lt,this.format=ot,this.internalFormat=null,this.type=at,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ct,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}toJSON(_){const tt=_===void 0||typeof _=="string";if(!tt&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const nt={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(nt.userData=this.userData),tt||(_.textures[this.uuid]=nt),nt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(_){_===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,tt=0,nt=0,rt=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=tt,this.z=nt,this.w=rt}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,tt,nt,rt){return this.x=_,this.y=tt,this.z=nt,this.w=rt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;case 2:this.z=tt;break;case 3:this.w=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this.z=_.z+tt.z,this.w=_.w+tt.w,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this.z+=_.z*tt,this.w+=_.w*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this.z=_.z-tt.z,this.w=_.w-tt.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const tt=this.x,nt=this.y,rt=this.z,it=this.w,st=_.elements;return this.x=st[0]*tt+st[4]*nt+st[8]*rt+st[12]*it,this.y=st[1]*tt+st[5]*nt+st[9]*rt+st[13]*it,this.z=st[2]*tt+st[6]*nt+st[10]*rt+st[14]*it,this.w=st[3]*tt+st[7]*nt+st[11]*rt+st[15]*it,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const tt=Math.sqrt(1-_.w*_.w);return tt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/tt,this.y=_.y/tt,this.z=_.z/tt),this}setAxisAngleFromRotationMatrix(_){let tt,nt,rt,it;const at=_.elements,lt=at[0],ct=at[4],ut=at[8],dt=at[1],ht=at[5],mt=at[9],yt=at[2],vt=at[6],pt=at[10];if(Math.abs(ct-dt)<.01&&Math.abs(ut-yt)<.01&&Math.abs(mt-vt)<.01){if(Math.abs(ct+dt)<.1&&Math.abs(ut+yt)<.1&&Math.abs(mt+vt)<.1&&Math.abs(lt+ht+pt-3)<.1)return this.set(1,0,0,0),this;tt=Math.PI;const xt=(lt+1)/2,St=(ht+1)/2,At=(pt+1)/2,bt=(ct+dt)/4,Et=(ut+yt)/4,wt=(mt+vt)/4;return xt>St&&xt>At?xt<.01?(nt=0,rt=.707106781,it=.707106781):(nt=Math.sqrt(xt),rt=bt/nt,it=Et/nt):St>At?St<.01?(nt=.707106781,rt=0,it=.707106781):(rt=Math.sqrt(St),nt=bt/rt,it=wt/rt):At<.01?(nt=.707106781,rt=.707106781,it=0):(it=Math.sqrt(At),nt=Et/it,rt=wt/it),this.set(nt,rt,it,tt),this}let _t=Math.sqrt((vt-mt)*(vt-mt)+(ut-yt)*(ut-yt)+(dt-ct)*(dt-ct));return Math.abs(_t)<.001&&(_t=1),this.x=(vt-mt)/_t,this.y=(ut-yt)/_t,this.z=(dt-ct)/_t,this.w=Math.acos((lt+ht+pt-1)/2),this}setFromMatrixPosition(_){const tt=_.elements;return this.x=tt[12],this.y=tt[13],this.z=tt[14],this.w=tt[15],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this.z=Math.max(_.z,Math.min(tt.z,this.z)),this.w=Math.max(_.w,Math.min(tt.w,this.w)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this.z=Math.max(_,Math.min(tt,this.z)),this.w=Math.max(_,Math.min(tt,this.w)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this.z+=(_.z-this.z)*tt,this.w+=(_.w-this.w)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this.z=_.z+(tt.z-_.z)*nt,this.w=_.w+(tt.w-_.w)*nt,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this.z=_[tt+2],this.w=_[tt+3],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_[tt+2]=this.z,_[tt+3]=this.w,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this.z=_.getZ(tt),this.w=_.getW(tt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(_=1,tt=1,nt={}){super(),this.isRenderTarget=!0,this.width=_,this.height=tt,this.depth=1,this.scissor=new Vector4(0,0,_,tt),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,tt);const rt={width:_,height:tt,depth:1};nt=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},nt);const it=new Texture(rt,nt.mapping,nt.wrapS,nt.wrapT,nt.magFilter,nt.minFilter,nt.format,nt.type,nt.anisotropy,nt.colorSpace);it.flipY=!1,it.generateMipmaps=nt.generateMipmaps,it.internalFormat=nt.internalFormat,this.textures=[];const st=nt.count;for(let ot=0;ot<st;ot++)this.textures[ot]=it.clone(),this.textures[ot].isRenderTargetTexture=!0;this.depthBuffer=nt.depthBuffer,this.stencilBuffer=nt.stencilBuffer,this.resolveDepthBuffer=nt.resolveDepthBuffer,this.resolveStencilBuffer=nt.resolveStencilBuffer,this.depthTexture=nt.depthTexture,this.samples=nt.samples}get texture(){return this.textures[0]}set texture(_){this.textures[0]=_}setSize(_,tt,nt=1){if(this.width!==_||this.height!==tt||this.depth!==nt){this.width=_,this.height=tt,this.depth=nt;for(let rt=0,it=this.textures.length;rt<it;rt++)this.textures[rt].image.width=_,this.textures[rt].image.height=tt,this.textures[rt].image.depth=nt;this.dispose()}this.viewport.set(0,0,_,tt),this.scissor.set(0,0,_,tt)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.textures.length=0;for(let nt=0,rt=_.textures.length;nt<rt;nt++)this.textures[nt]=_.textures[nt].clone(),this.textures[nt].isRenderTargetTexture=!0;const tt=Object.assign({},_.texture.image);return this.texture.source=new Source(tt),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,this.resolveDepthBuffer=_.resolveDepthBuffer,this.resolveStencilBuffer=_.resolveStencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(_=1,tt=1,nt={}){super(_,tt,nt),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(_=null,tt=1,nt=1,rt=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:tt,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1,rt={}){super(_,tt,rt),this.isWebGLArrayRenderTarget=!0,this.depth=nt,this.texture=new DataArrayTexture(null,_,tt,nt),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,tt=1,nt=1,rt=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:tt,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1,rt={}){super(_,tt,rt),this.isWebGL3DRenderTarget=!0,this.depth=nt,this.texture=new Data3DTexture(null,_,tt,nt),this.texture.isRenderTargetTexture=!0}}class Quaternion{constructor(_=0,tt=0,nt=0,rt=1){this.isQuaternion=!0,this._x=_,this._y=tt,this._z=nt,this._w=rt}static slerpFlat(_,tt,nt,rt,it,st,ot){let at=nt[rt+0],lt=nt[rt+1],ct=nt[rt+2],ut=nt[rt+3];const dt=it[st+0],ht=it[st+1],mt=it[st+2],yt=it[st+3];if(ot===0){_[tt+0]=at,_[tt+1]=lt,_[tt+2]=ct,_[tt+3]=ut;return}if(ot===1){_[tt+0]=dt,_[tt+1]=ht,_[tt+2]=mt,_[tt+3]=yt;return}if(ut!==yt||at!==dt||lt!==ht||ct!==mt){let vt=1-ot;const pt=at*dt+lt*ht+ct*mt+ut*yt,_t=pt>=0?1:-1,xt=1-pt*pt;if(xt>Number.EPSILON){const At=Math.sqrt(xt),bt=Math.atan2(At,pt*_t);vt=Math.sin(vt*bt)/At,ot=Math.sin(ot*bt)/At}const St=ot*_t;if(at=at*vt+dt*St,lt=lt*vt+ht*St,ct=ct*vt+mt*St,ut=ut*vt+yt*St,vt===1-ot){const At=1/Math.sqrt(at*at+lt*lt+ct*ct+ut*ut);at*=At,lt*=At,ct*=At,ut*=At}}_[tt]=at,_[tt+1]=lt,_[tt+2]=ct,_[tt+3]=ut}static multiplyQuaternionsFlat(_,tt,nt,rt,it,st){const ot=nt[rt],at=nt[rt+1],lt=nt[rt+2],ct=nt[rt+3],ut=it[st],dt=it[st+1],ht=it[st+2],mt=it[st+3];return _[tt]=ot*mt+ct*ut+at*ht-lt*dt,_[tt+1]=at*mt+ct*dt+lt*ut-ot*ht,_[tt+2]=lt*mt+ct*ht+ot*dt-at*ut,_[tt+3]=ct*mt-ot*ut-at*dt-lt*ht,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,tt,nt,rt){return this._x=_,this._y=tt,this._z=nt,this._w=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,tt=!0){const nt=_._x,rt=_._y,it=_._z,st=_._order,ot=Math.cos,at=Math.sin,lt=ot(nt/2),ct=ot(rt/2),ut=ot(it/2),dt=at(nt/2),ht=at(rt/2),mt=at(it/2);switch(st){case"XYZ":this._x=dt*ct*ut+lt*ht*mt,this._y=lt*ht*ut-dt*ct*mt,this._z=lt*ct*mt+dt*ht*ut,this._w=lt*ct*ut-dt*ht*mt;break;case"YXZ":this._x=dt*ct*ut+lt*ht*mt,this._y=lt*ht*ut-dt*ct*mt,this._z=lt*ct*mt-dt*ht*ut,this._w=lt*ct*ut+dt*ht*mt;break;case"ZXY":this._x=dt*ct*ut-lt*ht*mt,this._y=lt*ht*ut+dt*ct*mt,this._z=lt*ct*mt+dt*ht*ut,this._w=lt*ct*ut-dt*ht*mt;break;case"ZYX":this._x=dt*ct*ut-lt*ht*mt,this._y=lt*ht*ut+dt*ct*mt,this._z=lt*ct*mt-dt*ht*ut,this._w=lt*ct*ut+dt*ht*mt;break;case"YZX":this._x=dt*ct*ut+lt*ht*mt,this._y=lt*ht*ut+dt*ct*mt,this._z=lt*ct*mt-dt*ht*ut,this._w=lt*ct*ut-dt*ht*mt;break;case"XZY":this._x=dt*ct*ut-lt*ht*mt,this._y=lt*ht*ut-dt*ct*mt,this._z=lt*ct*mt+dt*ht*ut,this._w=lt*ct*ut+dt*ht*mt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+st)}return tt===!0&&this._onChangeCallback(),this}setFromAxisAngle(_,tt){const nt=tt/2,rt=Math.sin(nt);return this._x=_.x*rt,this._y=_.y*rt,this._z=_.z*rt,this._w=Math.cos(nt),this._onChangeCallback(),this}setFromRotationMatrix(_){const tt=_.elements,nt=tt[0],rt=tt[4],it=tt[8],st=tt[1],ot=tt[5],at=tt[9],lt=tt[2],ct=tt[6],ut=tt[10],dt=nt+ot+ut;if(dt>0){const ht=.5/Math.sqrt(dt+1);this._w=.25/ht,this._x=(ct-at)*ht,this._y=(it-lt)*ht,this._z=(st-rt)*ht}else if(nt>ot&&nt>ut){const ht=2*Math.sqrt(1+nt-ot-ut);this._w=(ct-at)/ht,this._x=.25*ht,this._y=(rt+st)/ht,this._z=(it+lt)/ht}else if(ot>ut){const ht=2*Math.sqrt(1+ot-nt-ut);this._w=(it-lt)/ht,this._x=(rt+st)/ht,this._y=.25*ht,this._z=(at+ct)/ht}else{const ht=2*Math.sqrt(1+ut-nt-ot);this._w=(st-rt)/ht,this._x=(it+lt)/ht,this._y=(at+ct)/ht,this._z=.25*ht}return this._onChangeCallback(),this}setFromUnitVectors(_,tt){let nt=_.dot(tt)+1;return nt<Number.EPSILON?(nt=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=nt):(this._x=0,this._y=-_.z,this._z=_.y,this._w=nt)):(this._x=_.y*tt.z-_.z*tt.y,this._y=_.z*tt.x-_.x*tt.z,this._z=_.x*tt.y-_.y*tt.x,this._w=nt),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$3(this.dot(_),-1,1)))}rotateTowards(_,tt){const nt=this.angleTo(_);if(nt===0)return this;const rt=Math.min(1,tt/nt);return this.slerp(_,rt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,tt){const nt=_._x,rt=_._y,it=_._z,st=_._w,ot=tt._x,at=tt._y,lt=tt._z,ct=tt._w;return this._x=nt*ct+st*ot+rt*lt-it*at,this._y=rt*ct+st*at+it*ot-nt*lt,this._z=it*ct+st*lt+nt*at-rt*ot,this._w=st*ct-nt*ot-rt*at-it*lt,this._onChangeCallback(),this}slerp(_,tt){if(tt===0)return this;if(tt===1)return this.copy(_);const nt=this._x,rt=this._y,it=this._z,st=this._w;let ot=st*_._w+nt*_._x+rt*_._y+it*_._z;if(ot<0?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,ot=-ot):this.copy(_),ot>=1)return this._w=st,this._x=nt,this._y=rt,this._z=it,this;const at=1-ot*ot;if(at<=Number.EPSILON){const ht=1-tt;return this._w=ht*st+tt*this._w,this._x=ht*nt+tt*this._x,this._y=ht*rt+tt*this._y,this._z=ht*it+tt*this._z,this.normalize(),this}const lt=Math.sqrt(at),ct=Math.atan2(lt,ot),ut=Math.sin((1-tt)*ct)/lt,dt=Math.sin(tt*ct)/lt;return this._w=st*ut+this._w*dt,this._x=nt*ut+this._x*dt,this._y=rt*ut+this._y*dt,this._z=it*ut+this._z*dt,this._onChangeCallback(),this}slerpQuaternions(_,tt,nt){return this.copy(_).slerp(tt,nt)}random(){const _=2*Math.PI*Math.random(),tt=2*Math.PI*Math.random(),nt=Math.random(),rt=Math.sqrt(1-nt),it=Math.sqrt(nt);return this.set(rt*Math.sin(_),rt*Math.cos(_),it*Math.sin(tt),it*Math.cos(tt))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,tt=0){return this._x=_[tt],this._y=_[tt+1],this._z=_[tt+2],this._w=_[tt+3],this._onChangeCallback(),this}toArray(_=[],tt=0){return _[tt]=this._x,_[tt+1]=this._y,_[tt+2]=this._z,_[tt+3]=this._w,_}fromBufferAttribute(_,tt){return this._x=_.getX(tt),this._y=_.getY(tt),this._z=_.getZ(tt),this._w=_.getW(tt),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,tt=0,nt=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=tt,this.z=nt}set(_,tt,nt){return nt===void 0&&(nt=this.z),this.x=_,this.y=tt,this.z=nt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;case 2:this.z=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this.z=_.z+tt.z,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this.z+=_.z*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this.z=_.z-tt.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,tt){return this.x=_.x*tt.x,this.y=_.y*tt.y,this.z=_.z*tt.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,tt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,tt))}applyMatrix3(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*tt+it[3]*nt+it[6]*rt,this.y=it[1]*tt+it[4]*nt+it[7]*rt,this.z=it[2]*tt+it[5]*nt+it[8]*rt,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements,st=1/(it[3]*tt+it[7]*nt+it[11]*rt+it[15]);return this.x=(it[0]*tt+it[4]*nt+it[8]*rt+it[12])*st,this.y=(it[1]*tt+it[5]*nt+it[9]*rt+it[13])*st,this.z=(it[2]*tt+it[6]*nt+it[10]*rt+it[14])*st,this}applyQuaternion(_){const tt=this.x,nt=this.y,rt=this.z,it=_.x,st=_.y,ot=_.z,at=_.w,lt=2*(st*rt-ot*nt),ct=2*(ot*tt-it*rt),ut=2*(it*nt-st*tt);return this.x=tt+at*lt+st*ut-ot*ct,this.y=nt+at*ct+ot*lt-it*ut,this.z=rt+at*ut+it*ct-st*lt,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*tt+it[4]*nt+it[8]*rt,this.y=it[1]*tt+it[5]*nt+it[9]*rt,this.z=it[2]*tt+it[6]*nt+it[10]*rt,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this.z=Math.max(_.z,Math.min(tt.z,this.z)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this.z=Math.max(_,Math.min(tt,this.z)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this.z+=(_.z-this.z)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this.z=_.z+(tt.z-_.z)*nt,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,tt){const nt=_.x,rt=_.y,it=_.z,st=tt.x,ot=tt.y,at=tt.z;return this.x=rt*at-it*ot,this.y=it*st-nt*at,this.z=nt*ot-rt*st,this}projectOnVector(_){const tt=_.lengthSq();if(tt===0)return this.set(0,0,0);const nt=_.dot(this)/tt;return this.copy(_).multiplyScalar(nt)}projectOnPlane(_){return _vector$c.copy(this).projectOnVector(_),this.sub(_vector$c)}reflect(_){return this.sub(_vector$c.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const tt=Math.sqrt(this.lengthSq()*_.lengthSq());if(tt===0)return Math.PI/2;const nt=this.dot(_)/tt;return Math.acos(clamp$3(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const tt=this.x-_.x,nt=this.y-_.y,rt=this.z-_.z;return tt*tt+nt*nt+rt*rt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,tt,nt){const rt=Math.sin(tt)*_;return this.x=rt*Math.sin(nt),this.y=Math.cos(tt)*_,this.z=rt*Math.cos(nt),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,tt,nt){return this.x=_*Math.sin(tt),this.y=nt,this.z=_*Math.cos(tt),this}setFromMatrixPosition(_){const tt=_.elements;return this.x=tt[12],this.y=tt[13],this.z=tt[14],this}setFromMatrixScale(_){const tt=this.setFromMatrixColumn(_,0).length(),nt=this.setFromMatrixColumn(_,1).length(),rt=this.setFromMatrixColumn(_,2).length();return this.x=tt,this.y=nt,this.z=rt,this}setFromMatrixColumn(_,tt){return this.fromArray(_.elements,tt*4)}setFromMatrix3Column(_,tt){return this.fromArray(_.elements,tt*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this.z=_[tt+2],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_[tt+2]=this.z,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this.z=_.getZ(tt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=Math.random()*Math.PI*2,tt=Math.random()*2-1,nt=Math.sqrt(1-tt*tt);return this.x=nt*Math.cos(_),this.y=tt,this.z=nt*Math.sin(_),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(_=new Vector3(1/0,1/0,1/0),tt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=tt}set(_,tt){return this.min.copy(_),this.max.copy(tt),this}setFromArray(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt+=3)this.expandByPoint(_vector$b.fromArray(_,tt));return this}setFromBufferAttribute(_){this.makeEmpty();for(let tt=0,nt=_.count;tt<nt;tt++)this.expandByPoint(_vector$b.fromBufferAttribute(_,tt));return this}setFromPoints(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt++)this.expandByPoint(_[tt]);return this}setFromCenterAndSize(_,tt){const nt=_vector$b.copy(tt).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}setFromObject(_,tt=!1){return this.makeEmpty(),this.expandByObject(_,tt)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,tt=!1){_.updateWorldMatrix(!1,!1);const nt=_.geometry;if(nt!==void 0){const it=nt.getAttribute("position");if(tt===!0&&it!==void 0&&_.isInstancedMesh!==!0)for(let st=0,ot=it.count;st<ot;st++)_.isMesh===!0?_.getVertexPosition(st,_vector$b):_vector$b.fromBufferAttribute(it,st),_vector$b.applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$b);else _.boundingBox!==void 0?(_.boundingBox===null&&_.computeBoundingBox(),_box$4.copy(_.boundingBox)):(nt.boundingBox===null&&nt.computeBoundingBox(),_box$4.copy(nt.boundingBox)),_box$4.applyMatrix4(_.matrixWorld),this.union(_box$4)}const rt=_.children;for(let it=0,st=rt.length;it<st;it++)this.expandByObject(rt[it],tt);return this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y&&_.z>=this.min.z&&_.z<=this.max.z}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,tt){return tt.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y&&_.max.z>=this.min.z&&_.min.z<=this.max.z}intersectsSphere(_){return this.clampPoint(_.center,_vector$b),_vector$b.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let tt,nt;return _.normal.x>0?(tt=_.normal.x*this.min.x,nt=_.normal.x*this.max.x):(tt=_.normal.x*this.max.x,nt=_.normal.x*this.min.x),_.normal.y>0?(tt+=_.normal.y*this.min.y,nt+=_.normal.y*this.max.y):(tt+=_.normal.y*this.max.y,nt+=_.normal.y*this.min.y),_.normal.z>0?(tt+=_.normal.z*this.min.z,nt+=_.normal.z*this.max.z):(tt+=_.normal.z*this.max.z,nt+=_.normal.z*this.min.z),tt<=-_.constant&&nt>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$3.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$3),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$3,_v2$4);let tt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(tt,_v0$3,_v1$7,_v2$4,_extents)||(tt=[1,0,0,0,1,0,0,0,1],!satForAxes(tt,_v0$3,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),tt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(tt,_v0$3,_v1$7,_v2$4,_extents))}clampPoint(_,tt){return tt.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$b).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$b).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$3=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(_e,_,tt,nt,rt){for(let it=0,st=_e.length-3;it<=st;it+=3){_testAxis.fromArray(_e,it);const ot=rt.x*Math.abs(_testAxis.x)+rt.y*Math.abs(_testAxis.y)+rt.z*Math.abs(_testAxis.z),at=_.dot(_testAxis),lt=tt.dot(_testAxis),ct=nt.dot(_testAxis);if(Math.max(-Math.max(at,lt,ct),Math.min(at,lt,ct))>ot)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(_=new Vector3,tt=-1){this.isSphere=!0,this.center=_,this.radius=tt}set(_,tt){return this.center.copy(_),this.radius=tt,this}setFromPoints(_,tt){const nt=this.center;tt!==void 0?nt.copy(tt):_box$3.setFromPoints(_).getCenter(nt);let rt=0;for(let it=0,st=_.length;it<st;it++)rt=Math.max(rt,nt.distanceToSquared(_[it]));return this.radius=Math.sqrt(rt),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const tt=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=tt*tt}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,tt){const nt=this.center.distanceToSquared(_);return tt.copy(_),nt>this.radius*this.radius&&(tt.sub(this.center).normalize(),tt.multiplyScalar(this.radius).add(this.center)),tt}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const tt=_v1$6.lengthSq();if(tt>this.radius*this.radius){const nt=Math.sqrt(tt),rt=(nt-this.radius)*.5;this.center.addScaledVector(_v1$6,rt/nt),this.radius+=rt}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,tt=new Vector3(0,0,-1)){this.origin=_,this.direction=tt}set(_,tt){return this.origin.copy(_),this.direction.copy(tt),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,tt){return tt.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$a)),this}closestPointToPoint(_,tt){tt.subVectors(_,this.origin);const nt=tt.dot(this.direction);return nt<0?tt.copy(this.origin):tt.copy(this.origin).addScaledVector(this.direction,nt)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const tt=_vector$a.subVectors(_,this.origin).dot(this.direction);return tt<0?this.origin.distanceToSquared(_):(_vector$a.copy(this.origin).addScaledVector(this.direction,tt),_vector$a.distanceToSquared(_))}distanceSqToSegment(_,tt,nt,rt){_segCenter.copy(_).add(tt).multiplyScalar(.5),_segDir.copy(tt).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const it=_.distanceTo(tt)*.5,st=-this.direction.dot(_segDir),ot=_diff.dot(this.direction),at=-_diff.dot(_segDir),lt=_diff.lengthSq(),ct=Math.abs(1-st*st);let ut,dt,ht,mt;if(ct>0)if(ut=st*at-ot,dt=st*ot-at,mt=it*ct,ut>=0)if(dt>=-mt)if(dt<=mt){const yt=1/ct;ut*=yt,dt*=yt,ht=ut*(ut+st*dt+2*ot)+dt*(st*ut+dt+2*at)+lt}else dt=it,ut=Math.max(0,-(st*dt+ot)),ht=-ut*ut+dt*(dt+2*at)+lt;else dt=-it,ut=Math.max(0,-(st*dt+ot)),ht=-ut*ut+dt*(dt+2*at)+lt;else dt<=-mt?(ut=Math.max(0,-(-st*it+ot)),dt=ut>0?-it:Math.min(Math.max(-it,-at),it),ht=-ut*ut+dt*(dt+2*at)+lt):dt<=mt?(ut=0,dt=Math.min(Math.max(-it,-at),it),ht=dt*(dt+2*at)+lt):(ut=Math.max(0,-(st*it+ot)),dt=ut>0?it:Math.min(Math.max(-it,-at),it),ht=-ut*ut+dt*(dt+2*at)+lt);else dt=st>0?-it:it,ut=Math.max(0,-(st*dt+ot)),ht=-ut*ut+dt*(dt+2*at)+lt;return nt&&nt.copy(this.origin).addScaledVector(this.direction,ut),rt&&rt.copy(_segCenter).addScaledVector(_segDir,dt),ht}intersectSphere(_,tt){_vector$a.subVectors(_.center,this.origin);const nt=_vector$a.dot(this.direction),rt=_vector$a.dot(_vector$a)-nt*nt,it=_.radius*_.radius;if(rt>it)return null;const st=Math.sqrt(it-rt),ot=nt-st,at=nt+st;return at<0?null:ot<0?this.at(at,tt):this.at(ot,tt)}intersectsSphere(_){return this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const tt=_.normal.dot(this.direction);if(tt===0)return _.distanceToPoint(this.origin)===0?0:null;const nt=-(this.origin.dot(_.normal)+_.constant)/tt;return nt>=0?nt:null}intersectPlane(_,tt){const nt=this.distanceToPlane(_);return nt===null?null:this.at(nt,tt)}intersectsPlane(_){const tt=_.distanceToPoint(this.origin);return tt===0||_.normal.dot(this.direction)*tt<0}intersectBox(_,tt){let nt,rt,it,st,ot,at;const lt=1/this.direction.x,ct=1/this.direction.y,ut=1/this.direction.z,dt=this.origin;return lt>=0?(nt=(_.min.x-dt.x)*lt,rt=(_.max.x-dt.x)*lt):(nt=(_.max.x-dt.x)*lt,rt=(_.min.x-dt.x)*lt),ct>=0?(it=(_.min.y-dt.y)*ct,st=(_.max.y-dt.y)*ct):(it=(_.max.y-dt.y)*ct,st=(_.min.y-dt.y)*ct),nt>st||it>rt||((it>nt||isNaN(nt))&&(nt=it),(st<rt||isNaN(rt))&&(rt=st),ut>=0?(ot=(_.min.z-dt.z)*ut,at=(_.max.z-dt.z)*ut):(ot=(_.max.z-dt.z)*ut,at=(_.min.z-dt.z)*ut),nt>at||ot>rt)||((ot>nt||nt!==nt)&&(nt=ot),(at<rt||rt!==rt)&&(rt=at),rt<0)?null:this.at(nt>=0?nt:rt,tt)}intersectsBox(_){return this.intersectBox(_,_vector$a)!==null}intersectTriangle(_,tt,nt,rt,it){_edge1.subVectors(tt,_),_edge2.subVectors(nt,_),_normal$1.crossVectors(_edge1,_edge2);let st=this.direction.dot(_normal$1),ot;if(st>0){if(rt)return null;ot=1}else if(st<0)ot=-1,st=-st;else return null;_diff.subVectors(this.origin,_);const at=ot*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(at<0)return null;const lt=ot*this.direction.dot(_edge1.cross(_diff));if(lt<0||at+lt>st)return null;const ct=-ot*_diff.dot(_normal$1);return ct<0?null:this.at(ct/st,it)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,tt,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,mt,yt,vt){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,tt,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,mt,yt,vt)}set(_,tt,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,mt,yt,vt){const pt=this.elements;return pt[0]=_,pt[4]=tt,pt[8]=nt,pt[12]=rt,pt[1]=it,pt[5]=st,pt[9]=ot,pt[13]=at,pt[2]=lt,pt[6]=ct,pt[10]=ut,pt[14]=dt,pt[3]=ht,pt[7]=mt,pt[11]=yt,pt[15]=vt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const tt=this.elements,nt=_.elements;return tt[0]=nt[0],tt[1]=nt[1],tt[2]=nt[2],tt[3]=nt[3],tt[4]=nt[4],tt[5]=nt[5],tt[6]=nt[6],tt[7]=nt[7],tt[8]=nt[8],tt[9]=nt[9],tt[10]=nt[10],tt[11]=nt[11],tt[12]=nt[12],tt[13]=nt[13],tt[14]=nt[14],tt[15]=nt[15],this}copyPosition(_){const tt=this.elements,nt=_.elements;return tt[12]=nt[12],tt[13]=nt[13],tt[14]=nt[14],this}setFromMatrix3(_){const tt=_.elements;return this.set(tt[0],tt[3],tt[6],0,tt[1],tt[4],tt[7],0,tt[2],tt[5],tt[8],0,0,0,0,1),this}extractBasis(_,tt,nt){return _.setFromMatrixColumn(this,0),tt.setFromMatrixColumn(this,1),nt.setFromMatrixColumn(this,2),this}makeBasis(_,tt,nt){return this.set(_.x,tt.x,nt.x,0,_.y,tt.y,nt.y,0,_.z,tt.z,nt.z,0,0,0,0,1),this}extractRotation(_){const tt=this.elements,nt=_.elements,rt=1/_v1$5.setFromMatrixColumn(_,0).length(),it=1/_v1$5.setFromMatrixColumn(_,1).length(),st=1/_v1$5.setFromMatrixColumn(_,2).length();return tt[0]=nt[0]*rt,tt[1]=nt[1]*rt,tt[2]=nt[2]*rt,tt[3]=0,tt[4]=nt[4]*it,tt[5]=nt[5]*it,tt[6]=nt[6]*it,tt[7]=0,tt[8]=nt[8]*st,tt[9]=nt[9]*st,tt[10]=nt[10]*st,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,this}makeRotationFromEuler(_){const tt=this.elements,nt=_.x,rt=_.y,it=_.z,st=Math.cos(nt),ot=Math.sin(nt),at=Math.cos(rt),lt=Math.sin(rt),ct=Math.cos(it),ut=Math.sin(it);if(_.order==="XYZ"){const dt=st*ct,ht=st*ut,mt=ot*ct,yt=ot*ut;tt[0]=at*ct,tt[4]=-at*ut,tt[8]=lt,tt[1]=ht+mt*lt,tt[5]=dt-yt*lt,tt[9]=-ot*at,tt[2]=yt-dt*lt,tt[6]=mt+ht*lt,tt[10]=st*at}else if(_.order==="YXZ"){const dt=at*ct,ht=at*ut,mt=lt*ct,yt=lt*ut;tt[0]=dt+yt*ot,tt[4]=mt*ot-ht,tt[8]=st*lt,tt[1]=st*ut,tt[5]=st*ct,tt[9]=-ot,tt[2]=ht*ot-mt,tt[6]=yt+dt*ot,tt[10]=st*at}else if(_.order==="ZXY"){const dt=at*ct,ht=at*ut,mt=lt*ct,yt=lt*ut;tt[0]=dt-yt*ot,tt[4]=-st*ut,tt[8]=mt+ht*ot,tt[1]=ht+mt*ot,tt[5]=st*ct,tt[9]=yt-dt*ot,tt[2]=-st*lt,tt[6]=ot,tt[10]=st*at}else if(_.order==="ZYX"){const dt=st*ct,ht=st*ut,mt=ot*ct,yt=ot*ut;tt[0]=at*ct,tt[4]=mt*lt-ht,tt[8]=dt*lt+yt,tt[1]=at*ut,tt[5]=yt*lt+dt,tt[9]=ht*lt-mt,tt[2]=-lt,tt[6]=ot*at,tt[10]=st*at}else if(_.order==="YZX"){const dt=st*at,ht=st*lt,mt=ot*at,yt=ot*lt;tt[0]=at*ct,tt[4]=yt-dt*ut,tt[8]=mt*ut+ht,tt[1]=ut,tt[5]=st*ct,tt[9]=-ot*ct,tt[2]=-lt*ct,tt[6]=ht*ut+mt,tt[10]=dt-yt*ut}else if(_.order==="XZY"){const dt=st*at,ht=st*lt,mt=ot*at,yt=ot*lt;tt[0]=at*ct,tt[4]=-ut,tt[8]=lt*ct,tt[1]=dt*ut+yt,tt[5]=st*ct,tt[9]=ht*ut-mt,tt[2]=mt*ut-ht,tt[6]=ot*ct,tt[10]=yt*ut+dt}return tt[3]=0,tt[7]=0,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,tt,nt){const rt=this.elements;return _z.subVectors(_,tt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(nt,_z),_x.lengthSq()===0&&(Math.abs(nt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(nt,_z)),_x.normalize(),_y.crossVectors(_z,_x),rt[0]=_x.x,rt[4]=_y.x,rt[8]=_z.x,rt[1]=_x.y,rt[5]=_y.y,rt[9]=_z.y,rt[2]=_x.z,rt[6]=_y.z,rt[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,tt){const nt=_.elements,rt=tt.elements,it=this.elements,st=nt[0],ot=nt[4],at=nt[8],lt=nt[12],ct=nt[1],ut=nt[5],dt=nt[9],ht=nt[13],mt=nt[2],yt=nt[6],vt=nt[10],pt=nt[14],_t=nt[3],xt=nt[7],St=nt[11],At=nt[15],bt=rt[0],Et=rt[4],wt=rt[8],Rt=rt[12],Tt=rt[1],Mt=rt[5],Lt=rt[9],Ft=rt[13],Ht=rt[2],Kt=rt[6],Wt=rt[10],Jt=rt[14],Ot=rt[3],kt=rt[7],Gt=rt[11],zt=rt[15];return it[0]=st*bt+ot*Tt+at*Ht+lt*Ot,it[4]=st*Et+ot*Mt+at*Kt+lt*kt,it[8]=st*wt+ot*Lt+at*Wt+lt*Gt,it[12]=st*Rt+ot*Ft+at*Jt+lt*zt,it[1]=ct*bt+ut*Tt+dt*Ht+ht*Ot,it[5]=ct*Et+ut*Mt+dt*Kt+ht*kt,it[9]=ct*wt+ut*Lt+dt*Wt+ht*Gt,it[13]=ct*Rt+ut*Ft+dt*Jt+ht*zt,it[2]=mt*bt+yt*Tt+vt*Ht+pt*Ot,it[6]=mt*Et+yt*Mt+vt*Kt+pt*kt,it[10]=mt*wt+yt*Lt+vt*Wt+pt*Gt,it[14]=mt*Rt+yt*Ft+vt*Jt+pt*zt,it[3]=_t*bt+xt*Tt+St*Ht+At*Ot,it[7]=_t*Et+xt*Mt+St*Kt+At*kt,it[11]=_t*wt+xt*Lt+St*Wt+At*Gt,it[15]=_t*Rt+xt*Ft+St*Jt+At*zt,this}multiplyScalar(_){const tt=this.elements;return tt[0]*=_,tt[4]*=_,tt[8]*=_,tt[12]*=_,tt[1]*=_,tt[5]*=_,tt[9]*=_,tt[13]*=_,tt[2]*=_,tt[6]*=_,tt[10]*=_,tt[14]*=_,tt[3]*=_,tt[7]*=_,tt[11]*=_,tt[15]*=_,this}determinant(){const _=this.elements,tt=_[0],nt=_[4],rt=_[8],it=_[12],st=_[1],ot=_[5],at=_[9],lt=_[13],ct=_[2],ut=_[6],dt=_[10],ht=_[14],mt=_[3],yt=_[7],vt=_[11],pt=_[15];return mt*(+it*at*ut-rt*lt*ut-it*ot*dt+nt*lt*dt+rt*ot*ht-nt*at*ht)+yt*(+tt*at*ht-tt*lt*dt+it*st*dt-rt*st*ht+rt*lt*ct-it*at*ct)+vt*(+tt*lt*ut-tt*ot*ht-it*st*ut+nt*st*ht+it*ot*ct-nt*lt*ct)+pt*(-rt*ot*ct-tt*at*ut+tt*ot*dt+rt*st*ut-nt*st*dt+nt*at*ct)}transpose(){const _=this.elements;let tt;return tt=_[1],_[1]=_[4],_[4]=tt,tt=_[2],_[2]=_[8],_[8]=tt,tt=_[6],_[6]=_[9],_[9]=tt,tt=_[3],_[3]=_[12],_[12]=tt,tt=_[7],_[7]=_[13],_[13]=tt,tt=_[11],_[11]=_[14],_[14]=tt,this}setPosition(_,tt,nt){const rt=this.elements;return _.isVector3?(rt[12]=_.x,rt[13]=_.y,rt[14]=_.z):(rt[12]=_,rt[13]=tt,rt[14]=nt),this}invert(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],st=_[4],ot=_[5],at=_[6],lt=_[7],ct=_[8],ut=_[9],dt=_[10],ht=_[11],mt=_[12],yt=_[13],vt=_[14],pt=_[15],_t=ut*vt*lt-yt*dt*lt+yt*at*ht-ot*vt*ht-ut*at*pt+ot*dt*pt,xt=mt*dt*lt-ct*vt*lt-mt*at*ht+st*vt*ht+ct*at*pt-st*dt*pt,St=ct*yt*lt-mt*ut*lt+mt*ot*ht-st*yt*ht-ct*ot*pt+st*ut*pt,At=mt*ut*at-ct*yt*at-mt*ot*dt+st*yt*dt+ct*ot*vt-st*ut*vt,bt=tt*_t+nt*xt+rt*St+it*At;if(bt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Et=1/bt;return _[0]=_t*Et,_[1]=(yt*dt*it-ut*vt*it-yt*rt*ht+nt*vt*ht+ut*rt*pt-nt*dt*pt)*Et,_[2]=(ot*vt*it-yt*at*it+yt*rt*lt-nt*vt*lt-ot*rt*pt+nt*at*pt)*Et,_[3]=(ut*at*it-ot*dt*it-ut*rt*lt+nt*dt*lt+ot*rt*ht-nt*at*ht)*Et,_[4]=xt*Et,_[5]=(ct*vt*it-mt*dt*it+mt*rt*ht-tt*vt*ht-ct*rt*pt+tt*dt*pt)*Et,_[6]=(mt*at*it-st*vt*it-mt*rt*lt+tt*vt*lt+st*rt*pt-tt*at*pt)*Et,_[7]=(st*dt*it-ct*at*it+ct*rt*lt-tt*dt*lt-st*rt*ht+tt*at*ht)*Et,_[8]=St*Et,_[9]=(mt*ut*it-ct*yt*it-mt*nt*ht+tt*yt*ht+ct*nt*pt-tt*ut*pt)*Et,_[10]=(st*yt*it-mt*ot*it+mt*nt*lt-tt*yt*lt-st*nt*pt+tt*ot*pt)*Et,_[11]=(ct*ot*it-st*ut*it-ct*nt*lt+tt*ut*lt+st*nt*ht-tt*ot*ht)*Et,_[12]=At*Et,_[13]=(ct*yt*rt-mt*ut*rt+mt*nt*dt-tt*yt*dt-ct*nt*vt+tt*ut*vt)*Et,_[14]=(mt*ot*rt-st*yt*rt-mt*nt*at+tt*yt*at+st*nt*vt-tt*ot*vt)*Et,_[15]=(st*ut*rt-ct*ot*rt+ct*nt*at-tt*ut*at-st*nt*dt+tt*ot*dt)*Et,this}scale(_){const tt=this.elements,nt=_.x,rt=_.y,it=_.z;return tt[0]*=nt,tt[4]*=rt,tt[8]*=it,tt[1]*=nt,tt[5]*=rt,tt[9]*=it,tt[2]*=nt,tt[6]*=rt,tt[10]*=it,tt[3]*=nt,tt[7]*=rt,tt[11]*=it,this}getMaxScaleOnAxis(){const _=this.elements,tt=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],nt=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],rt=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(tt,nt,rt))}makeTranslation(_,tt,nt){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,tt,0,0,1,nt,0,0,0,1),this}makeRotationX(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(1,0,0,0,0,tt,-nt,0,0,nt,tt,0,0,0,0,1),this}makeRotationY(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,0,nt,0,0,1,0,0,-nt,0,tt,0,0,0,0,1),this}makeRotationZ(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,-nt,0,0,nt,tt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,tt){const nt=Math.cos(tt),rt=Math.sin(tt),it=1-nt,st=_.x,ot=_.y,at=_.z,lt=it*st,ct=it*ot;return this.set(lt*st+nt,lt*ot-rt*at,lt*at+rt*ot,0,lt*ot+rt*at,ct*ot+nt,ct*at-rt*st,0,lt*at-rt*ot,ct*at+rt*st,it*at*at+nt,0,0,0,0,1),this}makeScale(_,tt,nt){return this.set(_,0,0,0,0,tt,0,0,0,0,nt,0,0,0,0,1),this}makeShear(_,tt,nt,rt,it,st){return this.set(1,nt,it,0,_,1,st,0,tt,rt,1,0,0,0,0,1),this}compose(_,tt,nt){const rt=this.elements,it=tt._x,st=tt._y,ot=tt._z,at=tt._w,lt=it+it,ct=st+st,ut=ot+ot,dt=it*lt,ht=it*ct,mt=it*ut,yt=st*ct,vt=st*ut,pt=ot*ut,_t=at*lt,xt=at*ct,St=at*ut,At=nt.x,bt=nt.y,Et=nt.z;return rt[0]=(1-(yt+pt))*At,rt[1]=(ht+St)*At,rt[2]=(mt-xt)*At,rt[3]=0,rt[4]=(ht-St)*bt,rt[5]=(1-(dt+pt))*bt,rt[6]=(vt+_t)*bt,rt[7]=0,rt[8]=(mt+xt)*Et,rt[9]=(vt-_t)*Et,rt[10]=(1-(dt+yt))*Et,rt[11]=0,rt[12]=_.x,rt[13]=_.y,rt[14]=_.z,rt[15]=1,this}decompose(_,tt,nt){const rt=this.elements;let it=_v1$5.set(rt[0],rt[1],rt[2]).length();const st=_v1$5.set(rt[4],rt[5],rt[6]).length(),ot=_v1$5.set(rt[8],rt[9],rt[10]).length();this.determinant()<0&&(it=-it),_.x=rt[12],_.y=rt[13],_.z=rt[14],_m1$4.copy(this);const lt=1/it,ct=1/st,ut=1/ot;return _m1$4.elements[0]*=lt,_m1$4.elements[1]*=lt,_m1$4.elements[2]*=lt,_m1$4.elements[4]*=ct,_m1$4.elements[5]*=ct,_m1$4.elements[6]*=ct,_m1$4.elements[8]*=ut,_m1$4.elements[9]*=ut,_m1$4.elements[10]*=ut,tt.setFromRotationMatrix(_m1$4),nt.x=it,nt.y=st,nt.z=ot,this}makePerspective(_,tt,nt,rt,it,st,ot=WebGLCoordinateSystem){const at=this.elements,lt=2*it/(tt-_),ct=2*it/(nt-rt),ut=(tt+_)/(tt-_),dt=(nt+rt)/(nt-rt);let ht,mt;if(ot===WebGLCoordinateSystem)ht=-(st+it)/(st-it),mt=-2*st*it/(st-it);else if(ot===WebGPUCoordinateSystem)ht=-st/(st-it),mt=-st*it/(st-it);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+ot);return at[0]=lt,at[4]=0,at[8]=ut,at[12]=0,at[1]=0,at[5]=ct,at[9]=dt,at[13]=0,at[2]=0,at[6]=0,at[10]=ht,at[14]=mt,at[3]=0,at[7]=0,at[11]=-1,at[15]=0,this}makeOrthographic(_,tt,nt,rt,it,st,ot=WebGLCoordinateSystem){const at=this.elements,lt=1/(tt-_),ct=1/(nt-rt),ut=1/(st-it),dt=(tt+_)*lt,ht=(nt+rt)*ct;let mt,yt;if(ot===WebGLCoordinateSystem)mt=(st+it)*ut,yt=-2*ut;else if(ot===WebGPUCoordinateSystem)mt=it*ut,yt=-1*ut;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+ot);return at[0]=2*lt,at[4]=0,at[8]=0,at[12]=-dt,at[1]=0,at[5]=2*ct,at[9]=0,at[13]=-ht,at[2]=0,at[6]=0,at[10]=yt,at[14]=-mt,at[3]=0,at[7]=0,at[11]=0,at[15]=1,this}equals(_){const tt=this.elements,nt=_.elements;for(let rt=0;rt<16;rt++)if(tt[rt]!==nt[rt])return!1;return!0}fromArray(_,tt=0){for(let nt=0;nt<16;nt++)this.elements[nt]=_[nt+tt];return this}toArray(_=[],tt=0){const nt=this.elements;return _[tt]=nt[0],_[tt+1]=nt[1],_[tt+2]=nt[2],_[tt+3]=nt[3],_[tt+4]=nt[4],_[tt+5]=nt[5],_[tt+6]=nt[6],_[tt+7]=nt[7],_[tt+8]=nt[8],_[tt+9]=nt[9],_[tt+10]=nt[10],_[tt+11]=nt[11],_[tt+12]=nt[12],_[tt+13]=nt[13],_[tt+14]=nt[14],_[tt+15]=nt[15],_}}const _v1$5=new Vector3,_m1$4=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,tt=0,nt=0,rt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=tt,this._z=nt,this._order=rt}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,tt,nt,rt=this._order){return this._x=_,this._y=tt,this._z=nt,this._order=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,tt=this._order,nt=!0){const rt=_.elements,it=rt[0],st=rt[4],ot=rt[8],at=rt[1],lt=rt[5],ct=rt[9],ut=rt[2],dt=rt[6],ht=rt[10];switch(tt){case"XYZ":this._y=Math.asin(clamp$3(ot,-1,1)),Math.abs(ot)<.9999999?(this._x=Math.atan2(-ct,ht),this._z=Math.atan2(-st,it)):(this._x=Math.atan2(dt,lt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$3(ct,-1,1)),Math.abs(ct)<.9999999?(this._y=Math.atan2(ot,ht),this._z=Math.atan2(at,lt)):(this._y=Math.atan2(-ut,it),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$3(dt,-1,1)),Math.abs(dt)<.9999999?(this._y=Math.atan2(-ut,ht),this._z=Math.atan2(-st,lt)):(this._y=0,this._z=Math.atan2(at,it));break;case"ZYX":this._y=Math.asin(-clamp$3(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(dt,ht),this._z=Math.atan2(at,it)):(this._x=0,this._z=Math.atan2(-st,lt));break;case"YZX":this._z=Math.asin(clamp$3(at,-1,1)),Math.abs(at)<.9999999?(this._x=Math.atan2(-ct,lt),this._y=Math.atan2(-ut,it)):(this._x=0,this._y=Math.atan2(ot,ht));break;case"XZY":this._z=Math.asin(-clamp$3(st,-1,1)),Math.abs(st)<.9999999?(this._x=Math.atan2(dt,lt),this._y=Math.atan2(ot,it)):(this._x=Math.atan2(-ct,ht),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+tt)}return this._order=tt,nt===!0&&this._onChangeCallback(),this}setFromQuaternion(_,tt,nt){return _matrix$2.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix$2,tt,nt)}setFromVector3(_,tt=this._order){return this.set(_.x,_.y,_.z,tt)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],tt=0){return _[tt]=this._x,_[tt+1]=this._y,_[tt+2]=this._z,_[tt+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$3=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,tt=new Euler,nt=new Quaternion,rt=new Vector3(1,1,1);function it(){nt.setFromEuler(tt,!1)}function st(){tt.setFromQuaternion(nt,void 0,!1)}tt._onChange(it),nt._onChange(st),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:tt},quaternion:{configurable:!0,enumerable:!0,value:nt},scale:{configurable:!0,enumerable:!0,value:rt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,tt){this.quaternion.setFromAxisAngle(_,tt)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,tt){return _q1.setFromAxisAngle(_,tt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,tt){return _q1.setFromAxisAngle(_,tt),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,tt){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(tt)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$3.copy(this.matrixWorld).invert())}lookAt(_,tt,nt){_.isVector3?_target.copy(_):_target.set(_,tt,nt);const rt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$3.lookAt(_position$3,_target,this.up):_m1$3.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$3),rt&&(_m1$3.extractRotation(rt.matrixWorld),_q1.setFromRotationMatrix(_m1$3),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let tt=0;tt<arguments.length;tt++)this.add(arguments[tt]);return this}return _===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.removeFromParent(),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let nt=0;nt<arguments.length;nt++)this.remove(arguments[nt]);return this}const tt=this.children.indexOf(_);return tt!==-1&&(_.parent=null,this.children.splice(tt,1),_.dispatchEvent(_removedEvent),_childremovedEvent.child=_,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){return this.remove(...this.children)}attach(_){return this.updateWorldMatrix(!0,!1),_m1$3.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$3.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$3),_.removeFromParent(),_.parent=this,this.children.push(_),_.updateWorldMatrix(!1,!0),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,tt){if(this[_]===tt)return this;for(let nt=0,rt=this.children.length;nt<rt;nt++){const st=this.children[nt].getObjectByProperty(_,tt);if(st!==void 0)return st}}getObjectsByProperty(_,tt,nt=[]){this[_]===tt&&nt.push(this);const rt=this.children;for(let it=0,st=rt.length;it<st;it++)rt[it].getObjectsByProperty(_,tt,nt);return nt}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const tt=this.matrixWorld.elements;return _.set(tt[8],tt[9],tt[10]).normalize()}raycast(){}traverse(_){_(this);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt].traverseVisible(_)}traverseAncestors(_){const tt=this.parent;tt!==null&&(_(tt),tt.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,_=!0);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt].updateMatrixWorld(_)}updateWorldMatrix(_,tt){const nt=this.parent;if(_===!0&&nt!==null&&nt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),tt===!0){const rt=this.children;for(let it=0,st=rt.length;it<st;it++)rt[it].updateWorldMatrix(!1,!0)}}toJSON(_){const tt=_===void 0||typeof _=="string",nt={};tt&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},nt.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const rt={};rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),this.castShadow===!0&&(rt.castShadow=!0),this.receiveShadow===!0&&(rt.receiveShadow=!0),this.visible===!1&&(rt.visible=!1),this.frustumCulled===!1&&(rt.frustumCulled=!1),this.renderOrder!==0&&(rt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(rt.userData=this.userData),rt.layers=this.layers.mask,rt.matrix=this.matrix.toArray(),rt.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(rt.matrixAutoUpdate=!1),this.isInstancedMesh&&(rt.type="InstancedMesh",rt.count=this.count,rt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(rt.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(rt.type="BatchedMesh",rt.perObjectFrustumCulled=this.perObjectFrustumCulled,rt.sortObjects=this.sortObjects,rt.drawRanges=this._drawRanges,rt.reservedRanges=this._reservedRanges,rt.visibility=this._visibility,rt.active=this._active,rt.bounds=this._bounds.map(ot=>({boxInitialized:ot.boxInitialized,boxMin:ot.box.min.toArray(),boxMax:ot.box.max.toArray(),sphereInitialized:ot.sphereInitialized,sphereRadius:ot.sphere.radius,sphereCenter:ot.sphere.center.toArray()})),rt.maxInstanceCount=this._maxInstanceCount,rt.maxVertexCount=this._maxVertexCount,rt.maxIndexCount=this._maxIndexCount,rt.geometryInitialized=this._geometryInitialized,rt.geometryCount=this._geometryCount,rt.matricesTexture=this._matricesTexture.toJSON(_),this._colorsTexture!==null&&(rt.colorsTexture=this._colorsTexture.toJSON(_)),this.boundingSphere!==null&&(rt.boundingSphere={center:rt.boundingSphere.center.toArray(),radius:rt.boundingSphere.radius}),this.boundingBox!==null&&(rt.boundingBox={min:rt.boundingBox.min.toArray(),max:rt.boundingBox.max.toArray()}));function it(ot,at){return ot[at.uuid]===void 0&&(ot[at.uuid]=at.toJSON(_)),at.uuid}if(this.isScene)this.background&&(this.background.isColor?rt.background=this.background.toJSON():this.background.isTexture&&(rt.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(rt.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){rt.geometry=it(_.geometries,this.geometry);const ot=this.geometry.parameters;if(ot!==void 0&&ot.shapes!==void 0){const at=ot.shapes;if(Array.isArray(at))for(let lt=0,ct=at.length;lt<ct;lt++){const ut=at[lt];it(_.shapes,ut)}else it(_.shapes,at)}}if(this.isSkinnedMesh&&(rt.bindMode=this.bindMode,rt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(it(_.skeletons,this.skeleton),rt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ot=[];for(let at=0,lt=this.material.length;at<lt;at++)ot.push(it(_.materials,this.material[at]));rt.material=ot}else rt.material=it(_.materials,this.material);if(this.children.length>0){rt.children=[];for(let ot=0;ot<this.children.length;ot++)rt.children.push(this.children[ot].toJSON(_).object)}if(this.animations.length>0){rt.animations=[];for(let ot=0;ot<this.animations.length;ot++){const at=this.animations[ot];rt.animations.push(it(_.animations,at))}}if(tt){const ot=st(_.geometries),at=st(_.materials),lt=st(_.textures),ct=st(_.images),ut=st(_.shapes),dt=st(_.skeletons),ht=st(_.animations),mt=st(_.nodes);ot.length>0&&(nt.geometries=ot),at.length>0&&(nt.materials=at),lt.length>0&&(nt.textures=lt),ct.length>0&&(nt.images=ct),ut.length>0&&(nt.shapes=ut),dt.length>0&&(nt.skeletons=dt),ht.length>0&&(nt.animations=ht),mt.length>0&&(nt.nodes=mt)}return nt.object=rt,nt;function st(ot){const at=[];for(const lt in ot){const ct=ot[lt];delete ct.metadata,at.push(ct)}return at}}clone(_){return new this.constructor().copy(this,_)}copy(_,tt=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations.slice(),this.userData=JSON.parse(JSON.stringify(_.userData)),tt===!0)for(let nt=0;nt<_.children.length;nt++){const rt=_.children[nt];this.add(rt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$2=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3){this.a=_,this.b=tt,this.c=nt}static getNormal(_,tt,nt,rt){rt.subVectors(nt,tt),_v0$2.subVectors(_,tt),rt.cross(_v0$2);const it=rt.lengthSq();return it>0?rt.multiplyScalar(1/Math.sqrt(it)):rt.set(0,0,0)}static getBarycoord(_,tt,nt,rt,it){_v0$2.subVectors(rt,tt),_v1$3.subVectors(nt,tt),_v2$2.subVectors(_,tt);const st=_v0$2.dot(_v0$2),ot=_v0$2.dot(_v1$3),at=_v0$2.dot(_v2$2),lt=_v1$3.dot(_v1$3),ct=_v1$3.dot(_v2$2),ut=st*lt-ot*ot;if(ut===0)return it.set(0,0,0),null;const dt=1/ut,ht=(lt*at-ot*ct)*dt,mt=(st*ct-ot*at)*dt;return it.set(1-ht-mt,mt,ht)}static containsPoint(_,tt,nt,rt){return this.getBarycoord(_,tt,nt,rt,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(_,tt,nt,rt,it,st,ot,at){return this.getBarycoord(_,tt,nt,rt,_v3$2)===null?(at.x=0,at.y=0,"z"in at&&(at.z=0),"w"in at&&(at.w=0),null):(at.setScalar(0),at.addScaledVector(it,_v3$2.x),at.addScaledVector(st,_v3$2.y),at.addScaledVector(ot,_v3$2.z),at)}static getInterpolatedAttribute(_,tt,nt,rt,it,st){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(_,tt),_v41.fromBufferAttribute(_,nt),_v42.fromBufferAttribute(_,rt),st.setScalar(0),st.addScaledVector(_v40,it.x),st.addScaledVector(_v41,it.y),st.addScaledVector(_v42,it.z),st}static isFrontFacing(_,tt,nt,rt){return _v0$2.subVectors(nt,tt),_v1$3.subVectors(_,tt),_v0$2.cross(_v1$3).dot(rt)<0}set(_,tt,nt){return this.a.copy(_),this.b.copy(tt),this.c.copy(nt),this}setFromPointsAndIndices(_,tt,nt,rt){return this.a.copy(_[tt]),this.b.copy(_[nt]),this.c.copy(_[rt]),this}setFromAttributeAndIndices(_,tt,nt,rt){return this.a.fromBufferAttribute(_,tt),this.b.fromBufferAttribute(_,nt),this.c.fromBufferAttribute(_,rt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$2.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$2.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,tt){return Triangle.getBarycoord(_,this.a,this.b,this.c,tt)}getInterpolation(_,tt,nt,rt,it){return Triangle.getInterpolation(_,this.a,this.b,this.c,tt,nt,rt,it)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,tt){const nt=this.a,rt=this.b,it=this.c;let st,ot;_vab.subVectors(rt,nt),_vac.subVectors(it,nt),_vap.subVectors(_,nt);const at=_vab.dot(_vap),lt=_vac.dot(_vap);if(at<=0&&lt<=0)return tt.copy(nt);_vbp.subVectors(_,rt);const ct=_vab.dot(_vbp),ut=_vac.dot(_vbp);if(ct>=0&&ut<=ct)return tt.copy(rt);const dt=at*ut-ct*lt;if(dt<=0&&at>=0&&ct<=0)return st=at/(at-ct),tt.copy(nt).addScaledVector(_vab,st);_vcp.subVectors(_,it);const ht=_vab.dot(_vcp),mt=_vac.dot(_vcp);if(mt>=0&&ht<=mt)return tt.copy(it);const yt=ht*lt-at*mt;if(yt<=0&&lt>=0&&mt<=0)return ot=lt/(lt-mt),tt.copy(nt).addScaledVector(_vac,ot);const vt=ct*mt-ht*ut;if(vt<=0&&ut-ct>=0&&ht-mt>=0)return _vbc.subVectors(it,rt),ot=(ut-ct)/(ut-ct+(ht-mt)),tt.copy(rt).addScaledVector(_vbc,ot);const pt=1/(vt+yt+dt);return st=yt*pt,ot=dt*pt,tt.copy(nt).addScaledVector(_vab,st).addScaledVector(_vac,ot)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(_e,_,tt){return tt<0&&(tt+=1),tt>1&&(tt-=1),tt<1/6?_e+(_-_e)*6*tt:tt<1/2?_:tt<2/3?_e+(_-_e)*6*(2/3-tt):_e}let Color$1=class{constructor(_,tt,nt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,tt,nt)}set(_,tt,nt){if(tt===void 0&&nt===void 0){const rt=_;rt&&rt.isColor?this.copy(rt):typeof rt=="number"?this.setHex(rt):typeof rt=="string"&&this.setStyle(rt)}else this.setRGB(_,tt,nt);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,tt=SRGBColorSpace$1){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.toWorkingColorSpace(this,tt),this}setRGB(_,tt,nt,rt=ColorManagement.workingColorSpace){return this.r=_,this.g=tt,this.b=nt,ColorManagement.toWorkingColorSpace(this,rt),this}setHSL(_,tt,nt,rt=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),tt=clamp$3(tt,0,1),nt=clamp$3(nt,0,1),tt===0)this.r=this.g=this.b=nt;else{const it=nt<=.5?nt*(1+tt):nt+tt-nt*tt,st=2*nt-it;this.r=hue2rgb(st,it,_+1/3),this.g=hue2rgb(st,it,_),this.b=hue2rgb(st,it,_-1/3)}return ColorManagement.toWorkingColorSpace(this,rt),this}setStyle(_,tt=SRGBColorSpace$1){function nt(it){it!==void 0&&parseFloat(it)<1&&console.warn("THREE.Color: Alpha component of "+_+" will be ignored.")}let rt;if(rt=/^(\w+)\(([^\)]*)\)/.exec(_)){let it;const st=rt[1],ot=rt[2];switch(st){case"rgb":case"rgba":if(it=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setRGB(Math.min(255,parseInt(it[1],10))/255,Math.min(255,parseInt(it[2],10))/255,Math.min(255,parseInt(it[3],10))/255,tt);if(it=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setRGB(Math.min(100,parseInt(it[1],10))/100,Math.min(100,parseInt(it[2],10))/100,Math.min(100,parseInt(it[3],10))/100,tt);break;case"hsl":case"hsla":if(it=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setHSL(parseFloat(it[1])/360,parseFloat(it[2])/100,parseFloat(it[3])/100,tt);break;default:console.warn("THREE.Color: Unknown color model "+_)}}else if(rt=/^\#([A-Fa-f\d]+)$/.exec(_)){const it=rt[1],st=it.length;if(st===3)return this.setRGB(parseInt(it.charAt(0),16)/15,parseInt(it.charAt(1),16)/15,parseInt(it.charAt(2),16)/15,tt);if(st===6)return this.setHex(parseInt(it,16),tt);console.warn("THREE.Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,tt);return this}setColorName(_,tt=SRGBColorSpace$1){const nt=_colorKeywords[_.toLowerCase()];return nt!==void 0?this.setHex(nt,tt):console.warn("THREE.Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace$1){return ColorManagement.fromWorkingColorSpace(_color.copy(this),_),Math.round(clamp$3(_color.r*255,0,255))*65536+Math.round(clamp$3(_color.g*255,0,255))*256+Math.round(clamp$3(_color.b*255,0,255))}getHexString(_=SRGBColorSpace$1){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,tt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),tt);const nt=_color.r,rt=_color.g,it=_color.b,st=Math.max(nt,rt,it),ot=Math.min(nt,rt,it);let at,lt;const ct=(ot+st)/2;if(ot===st)at=0,lt=0;else{const ut=st-ot;switch(lt=ct<=.5?ut/(st+ot):ut/(2-st-ot),st){case nt:at=(rt-it)/ut+(rt<it?6:0);break;case rt:at=(it-nt)/ut+2;break;case it:at=(nt-rt)/ut+4;break}at/=6}return _.h=at,_.s=lt,_.l=ct,_}getRGB(_,tt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),tt),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace$1){ColorManagement.fromWorkingColorSpace(_color.copy(this),_);const tt=_color.r,nt=_color.g,rt=_color.b;return _!==SRGBColorSpace$1?`color(${_} ${tt.toFixed(3)} ${nt.toFixed(3)} ${rt.toFixed(3)})`:`rgb(${Math.round(tt*255)},${Math.round(nt*255)},${Math.round(rt*255)})`}offsetHSL(_,tt,nt){return this.getHSL(_hslA),this.setHSL(_hslA.h+_,_hslA.s+tt,_hslA.l+nt)}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,tt){return this.r=_.r+tt.r,this.g=_.g+tt.g,this.b=_.b+tt.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,tt){return this.r+=(_.r-this.r)*tt,this.g+=(_.g-this.g)*tt,this.b+=(_.b-this.b)*tt,this}lerpColors(_,tt,nt){return this.r=_.r+(tt.r-_.r)*nt,this.g=_.g+(tt.g-_.g)*nt,this.b=_.b+(tt.b-_.b)*nt,this}lerpHSL(_,tt){this.getHSL(_hslA),_.getHSL(_hslB);const nt=lerp(_hslA.h,_hslB.h,tt),rt=lerp(_hslA.s,_hslB.s,tt),it=lerp(_hslA.l,_hslB.l,tt);return this.setHSL(nt,rt,it),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const tt=this.r,nt=this.g,rt=this.b,it=_.elements;return this.r=it[0]*tt+it[3]*nt+it[6]*rt,this.g=it[1]*tt+it[4]*nt+it[7]*rt,this.b=it[2]*tt+it[5]*nt+it[8]*rt,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,tt=0){return this.r=_[tt],this.g=_[tt+1],this.b=_[tt+2],this}toArray(_=[],tt=0){return _[tt]=this.r,_[tt+1]=this.g,_[tt+2]=this.b,_}fromBufferAttribute(_,tt){return this.r=_.getX(tt),this.g=_.getY(tt),this.b=_.getZ(tt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color$1(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const tt in _){const nt=_[tt];if(nt===void 0){console.warn(`THREE.Material: parameter '${tt}' has value of undefined.`);continue}const rt=this[tt];if(rt===void 0){console.warn(`THREE.Material: '${tt}' is not a property of THREE.${this.type}.`);continue}rt&&rt.isColor?rt.set(nt):rt&&rt.isVector3&&nt&&nt.isVector3?rt.copy(nt):this[tt]=nt}}toJSON(_){const tt=_===void 0||typeof _=="string";tt&&(_={textures:{},images:{}});const nt={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};nt.uuid=this.uuid,nt.type=this.type,this.name!==""&&(nt.name=this.name),this.color&&this.color.isColor&&(nt.color=this.color.getHex()),this.roughness!==void 0&&(nt.roughness=this.roughness),this.metalness!==void 0&&(nt.metalness=this.metalness),this.sheen!==void 0&&(nt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(nt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(nt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(nt.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(nt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(nt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(nt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(nt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(nt.shininess=this.shininess),this.clearcoat!==void 0&&(nt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(nt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(nt.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(nt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(nt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,nt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(nt.dispersion=this.dispersion),this.iridescence!==void 0&&(nt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(nt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(nt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(nt.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(nt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(nt.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(nt.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(nt.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(nt.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(nt.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(nt.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(nt.lightMap=this.lightMap.toJSON(_).uuid,nt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(nt.aoMap=this.aoMap.toJSON(_).uuid,nt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(nt.bumpMap=this.bumpMap.toJSON(_).uuid,nt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(nt.normalMap=this.normalMap.toJSON(_).uuid,nt.normalMapType=this.normalMapType,nt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(nt.displacementMap=this.displacementMap.toJSON(_).uuid,nt.displacementScale=this.displacementScale,nt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(nt.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(nt.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(nt.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(nt.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(nt.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(nt.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(nt.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(nt.combine=this.combine)),this.envMapRotation!==void 0&&(nt.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(nt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(nt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(nt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(nt.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(nt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(nt.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(nt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(nt.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(nt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(nt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(nt.size=this.size),this.shadowSide!==null&&(nt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(nt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(nt.blending=this.blending),this.side!==FrontSide&&(nt.side=this.side),this.vertexColors===!0&&(nt.vertexColors=!0),this.opacity<1&&(nt.opacity=this.opacity),this.transparent===!0&&(nt.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(nt.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(nt.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(nt.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(nt.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(nt.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(nt.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(nt.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(nt.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(nt.depthFunc=this.depthFunc),this.depthTest===!1&&(nt.depthTest=this.depthTest),this.depthWrite===!1&&(nt.depthWrite=this.depthWrite),this.colorWrite===!1&&(nt.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(nt.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(nt.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(nt.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(nt.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(nt.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(nt.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(nt.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(nt.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(nt.rotation=this.rotation),this.polygonOffset===!0&&(nt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(nt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(nt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(nt.linewidth=this.linewidth),this.dashSize!==void 0&&(nt.dashSize=this.dashSize),this.gapSize!==void 0&&(nt.gapSize=this.gapSize),this.scale!==void 0&&(nt.scale=this.scale),this.dithering===!0&&(nt.dithering=!0),this.alphaTest>0&&(nt.alphaTest=this.alphaTest),this.alphaHash===!0&&(nt.alphaHash=!0),this.alphaToCoverage===!0&&(nt.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(nt.premultipliedAlpha=!0),this.forceSinglePass===!0&&(nt.forceSinglePass=!0),this.wireframe===!0&&(nt.wireframe=!0),this.wireframeLinewidth>1&&(nt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(nt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(nt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(nt.flatShading=!0),this.visible===!1&&(nt.visible=!1),this.toneMapped===!1&&(nt.toneMapped=!1),this.fog===!1&&(nt.fog=!1),Object.keys(this.userData).length>0&&(nt.userData=this.userData);function rt(it){const st=[];for(const ot in it){const at=it[ot];delete at.metadata,st.push(at)}return st}if(tt){const it=rt(_.textures),st=rt(_.images);it.length>0&&(nt.textures=it),st.length>0&&(nt.images=st)}return nt}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.blendColor.copy(_.blendColor),this.blendAlpha=_.blendAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const tt=_.clippingPlanes;let nt=null;if(tt!==null){const rt=tt.length;nt=new Array(rt);for(let it=0;it!==rt;++it)nt[it]=tt[it].clone()}return this.clippingPlanes=nt,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaHash=_.alphaHash,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const _e=new ArrayBuffer(4),_=new Float32Array(_e),tt=new Uint32Array(_e),nt=new Uint32Array(512),rt=new Uint32Array(512);for(let at=0;at<256;++at){const lt=at-127;lt<-27?(nt[at]=0,nt[at|256]=32768,rt[at]=24,rt[at|256]=24):lt<-14?(nt[at]=1024>>-lt-14,nt[at|256]=1024>>-lt-14|32768,rt[at]=-lt-1,rt[at|256]=-lt-1):lt<=15?(nt[at]=lt+15<<10,nt[at|256]=lt+15<<10|32768,rt[at]=13,rt[at|256]=13):lt<128?(nt[at]=31744,nt[at|256]=64512,rt[at]=24,rt[at|256]=24):(nt[at]=31744,nt[at|256]=64512,rt[at]=13,rt[at|256]=13)}const it=new Uint32Array(2048),st=new Uint32Array(64),ot=new Uint32Array(64);for(let at=1;at<1024;++at){let lt=at<<13,ct=0;for(;!(lt&8388608);)lt<<=1,ct-=8388608;lt&=-8388609,ct+=947912704,it[at]=lt|ct}for(let at=1024;at<2048;++at)it[at]=939524096+(at-1024<<13);for(let at=1;at<31;++at)st[at]=at<<23;st[31]=1199570944,st[32]=2147483648;for(let at=33;at<63;++at)st[at]=2147483648+(at-32<<23);st[63]=3347054592;for(let at=1;at<64;++at)at!==32&&(ot[at]=1024);return{floatView:_,uint32View:tt,baseTable:nt,shiftTable:rt,mantissaTable:it,exponentTable:st,offsetTable:ot}}function toHalfFloat(_e){Math.abs(_e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),_e=clamp$3(_e,-65504,65504),_tables.floatView[0]=_e;const _=_tables.uint32View[0],tt=_>>23&511;return _tables.baseTable[tt]+((_&8388607)>>_tables.shiftTable[tt])}function fromHalfFloat(_e){const _=_e>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(_e&1023)]+_tables.exponentTable[_],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(_,tt,nt=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=_,this.itemSize=tt,this.count=_!==void 0?_.length/tt:0,this.normalized=nt,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,tt){this.updateRanges.push({start:_,count:tt})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,tt,nt){_*=this.itemSize,nt*=tt.itemSize;for(let rt=0,it=this.itemSize;rt<it;rt++)this.array[_+rt]=tt.array[nt+rt];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let tt=0,nt=this.count;tt<nt;tt++)_vector2$1.fromBufferAttribute(this,tt),_vector2$1.applyMatrix3(_),this.setXY(tt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let tt=0,nt=this.count;tt<nt;tt++)_vector$9.fromBufferAttribute(this,tt),_vector$9.applyMatrix3(_),this.setXYZ(tt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$9.fromBufferAttribute(this,tt),_vector$9.applyMatrix4(_),this.setXYZ(tt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$9.fromBufferAttribute(this,tt),_vector$9.applyNormalMatrix(_),this.setXYZ(tt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$9.fromBufferAttribute(this,tt),_vector$9.transformDirection(_),this.setXYZ(tt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(_,tt=0){return this.array.set(_,tt),this}getComponent(_,tt){let nt=this.array[_*this.itemSize+tt];return this.normalized&&(nt=denormalize(nt,this.array)),nt}setComponent(_,tt,nt){return this.normalized&&(nt=normalize$5(nt,this.array)),this.array[_*this.itemSize+tt]=nt,this}getX(_){let tt=this.array[_*this.itemSize];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize]=tt,this}getY(_){let tt=this.array[_*this.itemSize+1];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+1]=tt,this}getZ(_){let tt=this.array[_*this.itemSize+2];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+2]=tt,this}getW(_){let tt=this.array[_*this.itemSize+3];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+3]=tt,this}setXY(_,tt,nt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this}setXYZ(_,tt,nt,rt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this.array[_+2]=rt,this}setXYZW(_,tt,nt,rt,it){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this.array[_+2]=rt,this.array[_+3]=it,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),_}}class Int8BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int8Array(_),tt,nt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint8Array(_),tt,nt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint8ClampedArray(_),tt,nt)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int16Array(_),tt,nt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint16Array(_),tt,nt)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int32Array(_),tt,nt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint32Array(_),tt,nt)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint16Array(_),tt,nt),this.isFloat16BufferAttribute=!0}getX(_){let tt=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize]=toHalfFloat(tt),this}getY(_){let tt=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(tt),this}getZ(_){let tt=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(tt),this}getW(_){let tt=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(tt),this}setXY(_,tt,nt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this}setXYZ(_,tt,nt,rt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this}setXYZW(_,tt,nt,rt,it){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this.array[_+3]=toHalfFloat(it),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Float32Array(_),tt,nt)}}let _id$2=0;const _m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}getAttribute(_){return this.attributes[_]}setAttribute(_,tt){return this.attributes[_]=tt,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,tt,nt=0){this.groups.push({start:_,count:tt,materialIndex:nt})}clearGroups(){this.groups=[]}setDrawRange(_,tt){this.drawRange.start=_,this.drawRange.count=tt}applyMatrix4(_){const tt=this.attributes.position;tt!==void 0&&(tt.applyMatrix4(_),tt.needsUpdate=!0);const nt=this.attributes.normal;if(nt!==void 0){const it=new Matrix3().getNormalMatrix(_);nt.applyNormalMatrix(it),nt.needsUpdate=!0}const rt=this.attributes.tangent;return rt!==void 0&&(rt.transformDirection(_),rt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1$2.makeRotationFromQuaternion(_),this.applyMatrix4(_m1$2),this}rotateX(_){return _m1$2.makeRotationX(_),this.applyMatrix4(_m1$2),this}rotateY(_){return _m1$2.makeRotationY(_),this.applyMatrix4(_m1$2),this}rotateZ(_){return _m1$2.makeRotationZ(_),this.applyMatrix4(_m1$2),this}translate(_,tt,nt){return _m1$2.makeTranslation(_,tt,nt),this.applyMatrix4(_m1$2),this}scale(_,tt,nt){return _m1$2.makeScale(_,tt,nt),this.applyMatrix4(_m1$2),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const tt=[];for(let nt=0,rt=_.length;nt<rt;nt++){const it=_[nt];tt.push(it.x,it.y,it.z||0)}return this.setAttribute("position",new Float32BufferAttribute(tt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,tt=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),tt)for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];_box$2.setFromBufferAttribute(it),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.attributes.position,tt=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const nt=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_),tt)for(let it=0,st=tt.length;it<st;it++){const ot=tt[it];_boxMorphTargets.setFromBufferAttribute(ot),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(nt);let rt=0;for(let it=0,st=_.count;it<st;it++)_vector$8.fromBufferAttribute(_,it),rt=Math.max(rt,nt.distanceToSquared(_vector$8));if(tt)for(let it=0,st=tt.length;it<st;it++){const ot=tt[it],at=this.morphTargetsRelative;for(let lt=0,ct=ot.count;lt<ct;lt++)_vector$8.fromBufferAttribute(ot,lt),at&&(_offset.fromBufferAttribute(_,lt),_vector$8.add(_offset)),rt=Math.max(rt,nt.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(rt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,tt=this.attributes;if(_===null||tt.position===void 0||tt.normal===void 0||tt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const nt=tt.position,rt=tt.normal,it=tt.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*nt.count),4));const st=this.getAttribute("tangent"),ot=[],at=[];for(let wt=0;wt<nt.count;wt++)ot[wt]=new Vector3,at[wt]=new Vector3;const lt=new Vector3,ct=new Vector3,ut=new Vector3,dt=new Vector2,ht=new Vector2,mt=new Vector2,yt=new Vector3,vt=new Vector3;function pt(wt,Rt,Tt){lt.fromBufferAttribute(nt,wt),ct.fromBufferAttribute(nt,Rt),ut.fromBufferAttribute(nt,Tt),dt.fromBufferAttribute(it,wt),ht.fromBufferAttribute(it,Rt),mt.fromBufferAttribute(it,Tt),ct.sub(lt),ut.sub(lt),ht.sub(dt),mt.sub(dt);const Mt=1/(ht.x*mt.y-mt.x*ht.y);isFinite(Mt)&&(yt.copy(ct).multiplyScalar(mt.y).addScaledVector(ut,-ht.y).multiplyScalar(Mt),vt.copy(ut).multiplyScalar(ht.x).addScaledVector(ct,-mt.x).multiplyScalar(Mt),ot[wt].add(yt),ot[Rt].add(yt),ot[Tt].add(yt),at[wt].add(vt),at[Rt].add(vt),at[Tt].add(vt))}let _t=this.groups;_t.length===0&&(_t=[{start:0,count:_.count}]);for(let wt=0,Rt=_t.length;wt<Rt;++wt){const Tt=_t[wt],Mt=Tt.start,Lt=Tt.count;for(let Ft=Mt,Ht=Mt+Lt;Ft<Ht;Ft+=3)pt(_.getX(Ft+0),_.getX(Ft+1),_.getX(Ft+2))}const xt=new Vector3,St=new Vector3,At=new Vector3,bt=new Vector3;function Et(wt){At.fromBufferAttribute(rt,wt),bt.copy(At);const Rt=ot[wt];xt.copy(Rt),xt.sub(At.multiplyScalar(At.dot(Rt))).normalize(),St.crossVectors(bt,Rt);const Mt=St.dot(at[wt])<0?-1:1;st.setXYZW(wt,xt.x,xt.y,xt.z,Mt)}for(let wt=0,Rt=_t.length;wt<Rt;++wt){const Tt=_t[wt],Mt=Tt.start,Lt=Tt.count;for(let Ft=Mt,Ht=Mt+Lt;Ft<Ht;Ft+=3)Et(_.getX(Ft+0)),Et(_.getX(Ft+1)),Et(_.getX(Ft+2))}}computeVertexNormals(){const _=this.index,tt=this.getAttribute("position");if(tt!==void 0){let nt=this.getAttribute("normal");if(nt===void 0)nt=new BufferAttribute(new Float32Array(tt.count*3),3),this.setAttribute("normal",nt);else for(let dt=0,ht=nt.count;dt<ht;dt++)nt.setXYZ(dt,0,0,0);const rt=new Vector3,it=new Vector3,st=new Vector3,ot=new Vector3,at=new Vector3,lt=new Vector3,ct=new Vector3,ut=new Vector3;if(_)for(let dt=0,ht=_.count;dt<ht;dt+=3){const mt=_.getX(dt+0),yt=_.getX(dt+1),vt=_.getX(dt+2);rt.fromBufferAttribute(tt,mt),it.fromBufferAttribute(tt,yt),st.fromBufferAttribute(tt,vt),ct.subVectors(st,it),ut.subVectors(rt,it),ct.cross(ut),ot.fromBufferAttribute(nt,mt),at.fromBufferAttribute(nt,yt),lt.fromBufferAttribute(nt,vt),ot.add(ct),at.add(ct),lt.add(ct),nt.setXYZ(mt,ot.x,ot.y,ot.z),nt.setXYZ(yt,at.x,at.y,at.z),nt.setXYZ(vt,lt.x,lt.y,lt.z)}else for(let dt=0,ht=tt.count;dt<ht;dt+=3)rt.fromBufferAttribute(tt,dt+0),it.fromBufferAttribute(tt,dt+1),st.fromBufferAttribute(tt,dt+2),ct.subVectors(st,it),ut.subVectors(rt,it),ct.cross(ut),nt.setXYZ(dt+0,ct.x,ct.y,ct.z),nt.setXYZ(dt+1,ct.x,ct.y,ct.z),nt.setXYZ(dt+2,ct.x,ct.y,ct.z);this.normalizeNormals(),nt.needsUpdate=!0}}normalizeNormals(){const _=this.attributes.normal;for(let tt=0,nt=_.count;tt<nt;tt++)_vector$8.fromBufferAttribute(_,tt),_vector$8.normalize(),_.setXYZ(tt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function _(ot,at){const lt=ot.array,ct=ot.itemSize,ut=ot.normalized,dt=new lt.constructor(at.length*ct);let ht=0,mt=0;for(let yt=0,vt=at.length;yt<vt;yt++){ot.isInterleavedBufferAttribute?ht=at[yt]*ot.data.stride+ot.offset:ht=at[yt]*ct;for(let pt=0;pt<ct;pt++)dt[mt++]=lt[ht++]}return new BufferAttribute(dt,ct,ut)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const tt=new BufferGeometry,nt=this.index.array,rt=this.attributes;for(const ot in rt){const at=rt[ot],lt=_(at,nt);tt.setAttribute(ot,lt)}const it=this.morphAttributes;for(const ot in it){const at=[],lt=it[ot];for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct],ht=_(dt,nt);at.push(ht)}tt.morphAttributes[ot]=at}tt.morphTargetsRelative=this.morphTargetsRelative;const st=this.groups;for(let ot=0,at=st.length;ot<at;ot++){const lt=st[ot];tt.addGroup(lt.start,lt.count,lt.materialIndex)}return tt}toJSON(){const _={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const at=this.parameters;for(const lt in at)at[lt]!==void 0&&(_[lt]=at[lt]);return _}_.data={attributes:{}};const tt=this.index;tt!==null&&(_.data.index={type:tt.array.constructor.name,array:Array.prototype.slice.call(tt.array)});const nt=this.attributes;for(const at in nt){const lt=nt[at];_.data.attributes[at]=lt.toJSON(_.data)}const rt={};let it=!1;for(const at in this.morphAttributes){const lt=this.morphAttributes[at],ct=[];for(let ut=0,dt=lt.length;ut<dt;ut++){const ht=lt[ut];ct.push(ht.toJSON(_.data))}ct.length>0&&(rt[at]=ct,it=!0)}it&&(_.data.morphAttributes=rt,_.data.morphTargetsRelative=this.morphTargetsRelative);const st=this.groups;st.length>0&&(_.data.groups=JSON.parse(JSON.stringify(st)));const ot=this.boundingSphere;return ot!==null&&(_.data.boundingSphere={center:ot.center.toArray(),radius:ot.radius}),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const tt={};this.name=_.name;const nt=_.index;nt!==null&&this.setIndex(nt.clone(tt));const rt=_.attributes;for(const lt in rt){const ct=rt[lt];this.setAttribute(lt,ct.clone(tt))}const it=_.morphAttributes;for(const lt in it){const ct=[],ut=it[lt];for(let dt=0,ht=ut.length;dt<ht;dt++)ct.push(ut[dt].clone(tt));this.morphAttributes[lt]=ct}this.morphTargetsRelative=_.morphTargetsRelative;const st=_.groups;for(let lt=0,ct=st.length;lt<ct;lt++){const ut=st[lt];this.addGroup(ut.start,ut.count,ut.materialIndex)}const ot=_.boundingBox;ot!==null&&(this.boundingBox=ot.clone());const at=_.boundingSphere;return at!==null&&(this.boundingSphere=at.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,tt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,st=rt.length;it<st;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}getVertexPosition(_,tt){const nt=this.geometry,rt=nt.attributes.position,it=nt.morphAttributes.position,st=nt.morphTargetsRelative;tt.fromBufferAttribute(rt,_);const ot=this.morphTargetInfluences;if(it&&ot){_morphA.set(0,0,0);for(let at=0,lt=it.length;at<lt;at++){const ct=ot[at],ut=it[at];ct!==0&&(_tempA.fromBufferAttribute(ut,_),st?_morphA.addScaledVector(_tempA,ct):_morphA.addScaledVector(_tempA.sub(tt),ct))}tt.add(_morphA)}return tt}raycast(_,tt){const nt=this.geometry,rt=this.material,it=this.matrixWorld;rt!==void 0&&(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$6.copy(nt.boundingSphere),_sphere$6.applyMatrix4(it),_ray$3.copy(_.ray).recast(_.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(it).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(nt.boundingBox!==null&&_ray$3.intersectsBox(nt.boundingBox)===!1)&&this._computeIntersections(_,tt,_ray$3)))}_computeIntersections(_,tt,nt){let rt;const it=this.geometry,st=this.material,ot=it.index,at=it.attributes.position,lt=it.attributes.uv,ct=it.attributes.uv1,ut=it.attributes.normal,dt=it.groups,ht=it.drawRange;if(ot!==null)if(Array.isArray(st))for(let mt=0,yt=dt.length;mt<yt;mt++){const vt=dt[mt],pt=st[vt.materialIndex],_t=Math.max(vt.start,ht.start),xt=Math.min(ot.count,Math.min(vt.start+vt.count,ht.start+ht.count));for(let St=_t,At=xt;St<At;St+=3){const bt=ot.getX(St),Et=ot.getX(St+1),wt=ot.getX(St+2);rt=checkGeometryIntersection(this,pt,_,nt,lt,ct,ut,bt,Et,wt),rt&&(rt.faceIndex=Math.floor(St/3),rt.face.materialIndex=vt.materialIndex,tt.push(rt))}}else{const mt=Math.max(0,ht.start),yt=Math.min(ot.count,ht.start+ht.count);for(let vt=mt,pt=yt;vt<pt;vt+=3){const _t=ot.getX(vt),xt=ot.getX(vt+1),St=ot.getX(vt+2);rt=checkGeometryIntersection(this,st,_,nt,lt,ct,ut,_t,xt,St),rt&&(rt.faceIndex=Math.floor(vt/3),tt.push(rt))}}else if(at!==void 0)if(Array.isArray(st))for(let mt=0,yt=dt.length;mt<yt;mt++){const vt=dt[mt],pt=st[vt.materialIndex],_t=Math.max(vt.start,ht.start),xt=Math.min(at.count,Math.min(vt.start+vt.count,ht.start+ht.count));for(let St=_t,At=xt;St<At;St+=3){const bt=St,Et=St+1,wt=St+2;rt=checkGeometryIntersection(this,pt,_,nt,lt,ct,ut,bt,Et,wt),rt&&(rt.faceIndex=Math.floor(St/3),rt.face.materialIndex=vt.materialIndex,tt.push(rt))}}else{const mt=Math.max(0,ht.start),yt=Math.min(at.count,ht.start+ht.count);for(let vt=mt,pt=yt;vt<pt;vt+=3){const _t=vt,xt=vt+1,St=vt+2;rt=checkGeometryIntersection(this,st,_,nt,lt,ct,ut,_t,xt,St),rt&&(rt.faceIndex=Math.floor(vt/3),tt.push(rt))}}}}function checkIntersection$1(_e,_,tt,nt,rt,it,st,ot){let at;if(_.side===BackSide?at=nt.intersectTriangle(st,it,rt,!0,ot):at=nt.intersectTriangle(rt,it,st,_.side===FrontSide,ot),at===null)return null;_intersectionPointWorld.copy(ot),_intersectionPointWorld.applyMatrix4(_e.matrixWorld);const lt=tt.ray.origin.distanceTo(_intersectionPointWorld);return lt<tt.near||lt>tt.far?null:{distance:lt,point:_intersectionPointWorld.clone(),object:_e}}function checkGeometryIntersection(_e,_,tt,nt,rt,it,st,ot,at,lt){_e.getVertexPosition(ot,_vA$1),_e.getVertexPosition(at,_vB$1),_e.getVertexPosition(lt,_vC$1);const ct=checkIntersection$1(_e,_,tt,nt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ct){const ut=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,ut),rt&&(ct.uv=Triangle.getInterpolatedAttribute(rt,ot,at,lt,ut,new Vector2)),it&&(ct.uv1=Triangle.getInterpolatedAttribute(it,ot,at,lt,ut,new Vector2)),st&&(ct.normal=Triangle.getInterpolatedAttribute(st,ot,at,lt,ut,new Vector3),ct.normal.dot(nt.direction)>0&&ct.normal.multiplyScalar(-1));const dt={a:ot,b:at,c:lt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,dt.normal),ct.face=dt,ct.barycoord=ut}return ct}class BoxGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=1,it=1,st=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:tt,depth:nt,widthSegments:rt,heightSegments:it,depthSegments:st};const ot=this;rt=Math.floor(rt),it=Math.floor(it),st=Math.floor(st);const at=[],lt=[],ct=[],ut=[];let dt=0,ht=0;mt("z","y","x",-1,-1,nt,tt,_,st,it,0),mt("z","y","x",1,-1,nt,tt,-_,st,it,1),mt("x","z","y",1,1,_,nt,tt,rt,st,2),mt("x","z","y",1,-1,_,nt,-tt,rt,st,3),mt("x","y","z",1,-1,_,tt,nt,rt,it,4),mt("x","y","z",-1,-1,_,tt,-nt,rt,it,5),this.setIndex(at),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2));function mt(yt,vt,pt,_t,xt,St,At,bt,Et,wt,Rt){const Tt=St/Et,Mt=At/wt,Lt=St/2,Ft=At/2,Ht=bt/2,Kt=Et+1,Wt=wt+1;let Jt=0,Ot=0;const kt=new Vector3;for(let Gt=0;Gt<Wt;Gt++){const zt=Gt*Mt-Ft;for(let Vt=0;Vt<Kt;Vt++){const Dt=Vt*Tt-Lt;kt[yt]=Dt*_t,kt[vt]=zt*xt,kt[pt]=Ht,lt.push(kt.x,kt.y,kt.z),kt[yt]=0,kt[vt]=0,kt[pt]=bt>0?1:-1,ct.push(kt.x,kt.y,kt.z),ut.push(Vt/Et),ut.push(1-Gt/wt),Jt+=1}}for(let Gt=0;Gt<wt;Gt++)for(let zt=0;zt<Et;zt++){const Vt=dt+zt+Kt*Gt,Dt=dt+zt+Kt*(Gt+1),It=dt+(zt+1)+Kt*(Gt+1),Ut=dt+(zt+1)+Kt*Gt;at.push(Vt,Dt,Ut),at.push(Dt,It,Ut),Ot+=6}ot.addGroup(ht,Ot,Rt),ht+=Ot,dt+=Jt}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(_e){const _={};for(const tt in _e){_[tt]={};for(const nt in _e[tt]){const rt=_e[tt][nt];rt&&(rt.isColor||rt.isMatrix3||rt.isMatrix4||rt.isVector2||rt.isVector3||rt.isVector4||rt.isTexture||rt.isQuaternion)?rt.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[tt][nt]=null):_[tt][nt]=rt.clone():Array.isArray(rt)?_[tt][nt]=rt.slice():_[tt][nt]=rt}}return _}function mergeUniforms(_e){const _={};for(let tt=0;tt<_e.length;tt++){const nt=cloneUniforms(_e[tt]);for(const rt in nt)_[rt]=nt[rt]}return _}function cloneUniformsGroups(_e){const _=[];for(let tt=0;tt<_e.length;tt++)_.push(_e[tt].clone());return _}function getUnlitUniformColorSpace(_e){const _=_e.getRenderTarget();return _===null?_e.outputColorSpace:_.isXRRenderTarget===!0?_.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const tt=super.toJSON(_);tt.glslVersion=this.glslVersion,tt.uniforms={};for(const rt in this.uniforms){const st=this.uniforms[rt].value;st&&st.isTexture?tt.uniforms[rt]={type:"t",value:st.toJSON(_).uuid}:st&&st.isColor?tt.uniforms[rt]={type:"c",value:st.getHex()}:st&&st.isVector2?tt.uniforms[rt]={type:"v2",value:st.toArray()}:st&&st.isVector3?tt.uniforms[rt]={type:"v3",value:st.toArray()}:st&&st.isVector4?tt.uniforms[rt]={type:"v4",value:st.toArray()}:st&&st.isMatrix3?tt.uniforms[rt]={type:"m3",value:st.toArray()}:st&&st.isMatrix4?tt.uniforms[rt]={type:"m4",value:st.toArray()}:tt.uniforms[rt]={value:st}}Object.keys(this.defines).length>0&&(tt.defines=this.defines),tt.vertexShader=this.vertexShader,tt.fragmentShader=this.fragmentShader,tt.lights=this.lights,tt.clipping=this.clipping;const nt={};for(const rt in this.extensions)this.extensions[rt]===!0&&(nt[rt]=!0);return Object.keys(nt).length>0&&(tt.extensions=nt),tt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(_,tt){return super.copy(_,tt),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){return super.getWorldDirection(_).negate()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,tt){super.updateWorldMatrix(_,tt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(_=50,tt=1,nt=.1,rt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=nt,this.far=rt,this.focus=10,this.aspect=tt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,tt){return super.copy(_,tt),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const tt=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(tt),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(_,tt,nt){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),tt.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),nt.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z)}getViewSize(_,tt){return this.getViewBounds(_,_minTarget,_maxTarget),tt.subVectors(_maxTarget,_minTarget)}setViewOffset(_,tt,nt,rt,it,st){this.aspect=_/tt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=tt,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=st,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let tt=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,nt=2*tt,rt=this.aspect*nt,it=-.5*rt;const st=this.view;if(this.view!==null&&this.view.enabled){const at=st.fullWidth,lt=st.fullHeight;it+=st.offsetX*rt/at,tt-=st.offsetY*nt/lt,rt*=st.width/at,nt*=st.height/lt}const ot=this.filmOffset;ot!==0&&(it+=_*ot/this.getFilmWidth()),this.projectionMatrix.makePerspective(it,it+rt,tt,tt-nt,_,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const tt=super.toJSON(_);return tt.object.fov=this.fov,tt.object.zoom=this.zoom,tt.object.near=this.near,tt.object.far=this.far,tt.object.focus=this.focus,tt.object.aspect=this.aspect,this.view!==null&&(tt.object.view=Object.assign({},this.view)),tt.object.filmGauge=this.filmGauge,tt.object.filmOffset=this.filmOffset,tt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,tt,nt){super(),this.type="CubeCamera",this.renderTarget=nt,this.coordinateSystem=null,this.activeMipmapLevel=0;const rt=new PerspectiveCamera(fov,aspect,_,tt);rt.layers=this.layers,this.add(rt);const it=new PerspectiveCamera(fov,aspect,_,tt);it.layers=this.layers,this.add(it);const st=new PerspectiveCamera(fov,aspect,_,tt);st.layers=this.layers,this.add(st);const ot=new PerspectiveCamera(fov,aspect,_,tt);ot.layers=this.layers,this.add(ot);const at=new PerspectiveCamera(fov,aspect,_,tt);at.layers=this.layers,this.add(at);const lt=new PerspectiveCamera(fov,aspect,_,tt);lt.layers=this.layers,this.add(lt)}updateCoordinateSystem(){const _=this.coordinateSystem,tt=this.children.concat(),[nt,rt,it,st,ot,at]=tt;for(const lt of tt)this.remove(lt);if(_===WebGLCoordinateSystem)nt.up.set(0,1,0),nt.lookAt(1,0,0),rt.up.set(0,1,0),rt.lookAt(-1,0,0),it.up.set(0,0,-1),it.lookAt(0,1,0),st.up.set(0,0,1),st.lookAt(0,-1,0),ot.up.set(0,1,0),ot.lookAt(0,0,1),at.up.set(0,1,0),at.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)nt.up.set(0,-1,0),nt.lookAt(-1,0,0),rt.up.set(0,-1,0),rt.lookAt(1,0,0),it.up.set(0,0,1),it.lookAt(0,1,0),st.up.set(0,0,-1),st.lookAt(0,-1,0),ot.up.set(0,-1,0),ot.lookAt(0,0,1),at.up.set(0,-1,0),at.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const lt of tt)this.add(lt),lt.updateMatrixWorld()}update(_,tt){this.parent===null&&this.updateMatrixWorld();const{renderTarget:nt,activeMipmapLevel:rt}=this;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[it,st,ot,at,lt,ct]=this.children,ut=_.getRenderTarget(),dt=_.getActiveCubeFace(),ht=_.getActiveMipmapLevel(),mt=_.xr.enabled;_.xr.enabled=!1;const yt=nt.texture.generateMipmaps;nt.texture.generateMipmaps=!1,_.setRenderTarget(nt,0,rt),_.render(tt,it),_.setRenderTarget(nt,1,rt),_.render(tt,st),_.setRenderTarget(nt,2,rt),_.render(tt,ot),_.setRenderTarget(nt,3,rt),_.render(tt,at),_.setRenderTarget(nt,4,rt),_.render(tt,lt),nt.texture.generateMipmaps=yt,_.setRenderTarget(nt,5,rt),_.render(tt,ct),_.setRenderTarget(ut,dt,ht),_.xr.enabled=mt,nt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_,tt,nt,rt,it,st,ot,at,lt,ct){_=_!==void 0?_:[],tt=tt!==void 0?tt:CubeReflectionMapping,super(_,tt,nt,rt,it,st,ot,at,lt,ct),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,tt={}){super(_,_,tt),this.isWebGLCubeRenderTarget=!0;const nt={width:_,height:_,depth:1},rt=[nt,nt,nt,nt,nt,nt];this.texture=new CubeTexture(rt,tt.mapping,tt.wrapS,tt.wrapT,tt.magFilter,tt.minFilter,tt.format,tt.type,tt.anisotropy,tt.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=tt.generateMipmaps!==void 0?tt.generateMipmaps:!1,this.texture.minFilter=tt.minFilter!==void 0?tt.minFilter:LinearFilter}fromEquirectangularTexture(_,tt){this.texture.type=tt.type,this.texture.colorSpace=tt.colorSpace,this.texture.generateMipmaps=tt.generateMipmaps,this.texture.minFilter=tt.minFilter,this.texture.magFilter=tt.magFilter;const nt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},rt=new BoxGeometry(5,5,5),it=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(nt.uniforms),vertexShader:nt.vertexShader,fragmentShader:nt.fragmentShader,side:BackSide,blending:NoBlending});it.uniforms.tEquirect.value=tt;const st=new Mesh(rt,it),ot=tt.minFilter;return tt.minFilter===LinearMipmapLinearFilter&&(tt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,st),tt.minFilter=ot,st.geometry.dispose(),st.material.dispose(),this}clear(_,tt,nt,rt){const it=_.getRenderTarget();for(let st=0;st<6;st++)_.setRenderTarget(this,st),_.clear(tt,nt,rt);_.setRenderTarget(it)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$3=class{constructor(_=new Vector3(1,0,0),tt=0){this.isPlane=!0,this.normal=_,this.constant=tt}set(_,tt){return this.normal.copy(_),this.constant=tt,this}setComponents(_,tt,nt,rt){return this.normal.set(_,tt,nt),this.constant=rt,this}setFromNormalAndCoplanarPoint(_,tt){return this.normal.copy(_),this.constant=-tt.dot(this.normal),this}setFromCoplanarPoints(_,tt,nt){const rt=_vector1.subVectors(nt,tt).cross(_vector2.subVectors(_,tt)).normalize();return this.setFromNormalAndCoplanarPoint(rt,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,tt){return tt.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,tt){const nt=_.delta(_vector1),rt=this.normal.dot(nt);if(rt===0)return this.distanceToPoint(_.start)===0?tt.copy(_.start):null;const it=-(_.start.dot(this.normal)+this.constant)/rt;return it<0||it>1?null:tt.copy(_.start).addScaledVector(nt,it)}intersectsLine(_){const tt=this.distanceToPoint(_.start),nt=this.distanceToPoint(_.end);return tt<0&&nt>0||nt<0&&tt>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,tt){const nt=tt||_normalMatrix.getNormalMatrix(_),rt=this.coplanarPoint(_vector1).applyMatrix4(_),it=this.normal.applyMatrix3(nt).normalize();return this.constant=-rt.dot(it),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(_=new Plane$3,tt=new Plane$3,nt=new Plane$3,rt=new Plane$3,it=new Plane$3,st=new Plane$3){this.planes=[_,tt,nt,rt,it,st]}set(_,tt,nt,rt,it,st){const ot=this.planes;return ot[0].copy(_),ot[1].copy(tt),ot[2].copy(nt),ot[3].copy(rt),ot[4].copy(it),ot[5].copy(st),this}copy(_){const tt=this.planes;for(let nt=0;nt<6;nt++)tt[nt].copy(_.planes[nt]);return this}setFromProjectionMatrix(_,tt=WebGLCoordinateSystem){const nt=this.planes,rt=_.elements,it=rt[0],st=rt[1],ot=rt[2],at=rt[3],lt=rt[4],ct=rt[5],ut=rt[6],dt=rt[7],ht=rt[8],mt=rt[9],yt=rt[10],vt=rt[11],pt=rt[12],_t=rt[13],xt=rt[14],St=rt[15];if(nt[0].setComponents(at-it,dt-lt,vt-ht,St-pt).normalize(),nt[1].setComponents(at+it,dt+lt,vt+ht,St+pt).normalize(),nt[2].setComponents(at+st,dt+ct,vt+mt,St+_t).normalize(),nt[3].setComponents(at-st,dt-ct,vt-mt,St-_t).normalize(),nt[4].setComponents(at-ot,dt-ut,vt-yt,St-xt).normalize(),tt===WebGLCoordinateSystem)nt[5].setComponents(at+ot,dt+ut,vt+yt,St+xt).normalize();else if(tt===WebGPUCoordinateSystem)nt[5].setComponents(ot,ut,yt,xt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+tt);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$5.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const tt=_.geometry;tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere$5.copy(tt.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(_){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(_){const tt=this.planes,nt=_.center,rt=-_.radius;for(let it=0;it<6;it++)if(tt[it].distanceToPoint(nt)<rt)return!1;return!0}intersectsBox(_){const tt=this.planes;for(let nt=0;nt<6;nt++){const rt=tt[nt];if(_vector$7.x=rt.normal.x>0?_.max.x:_.min.x,_vector$7.y=rt.normal.y>0?_.max.y:_.min.y,_vector$7.z=rt.normal.z>0?_.max.z:_.min.z,rt.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(_){const tt=this.planes;for(let nt=0;nt<6;nt++)if(tt[nt].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let _e=null,_=!1,tt=null,nt=null;function rt(it,st){tt(it,st),nt=_e.requestAnimationFrame(rt)}return{start:function(){_!==!0&&tt!==null&&(nt=_e.requestAnimationFrame(rt),_=!0)},stop:function(){_e.cancelAnimationFrame(nt),_=!1},setAnimationLoop:function(it){tt=it},setContext:function(it){_e=it}}}function WebGLAttributes(_e){const _=new WeakMap;function tt(ot,at){const lt=ot.array,ct=ot.usage,ut=lt.byteLength,dt=_e.createBuffer();_e.bindBuffer(at,dt),_e.bufferData(at,lt,ct),ot.onUploadCallback();let ht;if(lt instanceof Float32Array)ht=_e.FLOAT;else if(lt instanceof Uint16Array)ot.isFloat16BufferAttribute?ht=_e.HALF_FLOAT:ht=_e.UNSIGNED_SHORT;else if(lt instanceof Int16Array)ht=_e.SHORT;else if(lt instanceof Uint32Array)ht=_e.UNSIGNED_INT;else if(lt instanceof Int32Array)ht=_e.INT;else if(lt instanceof Int8Array)ht=_e.BYTE;else if(lt instanceof Uint8Array)ht=_e.UNSIGNED_BYTE;else if(lt instanceof Uint8ClampedArray)ht=_e.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+lt);return{buffer:dt,type:ht,bytesPerElement:lt.BYTES_PER_ELEMENT,version:ot.version,size:ut}}function nt(ot,at,lt){const ct=at.array,ut=at.updateRanges;if(_e.bindBuffer(lt,ot),ut.length===0)_e.bufferSubData(lt,0,ct);else{ut.sort((ht,mt)=>ht.start-mt.start);let dt=0;for(let ht=1;ht<ut.length;ht++){const mt=ut[dt],yt=ut[ht];yt.start<=mt.start+mt.count+1?mt.count=Math.max(mt.count,yt.start+yt.count-mt.start):(++dt,ut[dt]=yt)}ut.length=dt+1;for(let ht=0,mt=ut.length;ht<mt;ht++){const yt=ut[ht];_e.bufferSubData(lt,yt.start*ct.BYTES_PER_ELEMENT,ct,yt.start,yt.count)}at.clearUpdateRanges()}at.onUploadCallback()}function rt(ot){return ot.isInterleavedBufferAttribute&&(ot=ot.data),_.get(ot)}function it(ot){ot.isInterleavedBufferAttribute&&(ot=ot.data);const at=_.get(ot);at&&(_e.deleteBuffer(at.buffer),_.delete(ot))}function st(ot,at){if(ot.isInterleavedBufferAttribute&&(ot=ot.data),ot.isGLBufferAttribute){const ct=_.get(ot);(!ct||ct.version<ot.version)&&_.set(ot,{buffer:ot.buffer,type:ot.type,bytesPerElement:ot.elementSize,version:ot.version});return}const lt=_.get(ot);if(lt===void 0)_.set(ot,tt(ot,at));else if(lt.version<ot.version){if(lt.size!==ot.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");nt(lt.buffer,ot,at),lt.version=ot.version}}return{get:rt,remove:it,update:st}}class PlaneGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:tt,widthSegments:nt,heightSegments:rt};const it=_/2,st=tt/2,ot=Math.floor(nt),at=Math.floor(rt),lt=ot+1,ct=at+1,ut=_/ot,dt=tt/at,ht=[],mt=[],yt=[],vt=[];for(let pt=0;pt<ct;pt++){const _t=pt*dt-st;for(let xt=0;xt<lt;xt++){const St=xt*ut-it;mt.push(St,-_t,0),yt.push(0,0,1),vt.push(xt/ot),vt.push(1-pt/at)}}for(let pt=0;pt<at;pt++)for(let _t=0;_t<ot;_t++){const xt=_t+lt*pt,St=_t+lt*(pt+1),At=_t+1+lt*(pt+1),bt=_t+1+lt*pt;ht.push(xt,St,bt),ht.push(St,At,bt)}this.setIndex(ht),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(yt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(_e,_,tt,nt,rt,it,st){const ot=new Color$1(0);let at=it===!0?0:1,lt,ct,ut=null,dt=0,ht=null;function mt(_t){let xt=_t.isScene===!0?_t.background:null;return xt&&xt.isTexture&&(xt=(_t.backgroundBlurriness>0?tt:_).get(xt)),xt}function yt(_t){let xt=!1;const St=mt(_t);St===null?pt(ot,at):St&&St.isColor&&(pt(St,1),xt=!0);const At=_e.xr.getEnvironmentBlendMode();At==="additive"?nt.buffers.color.setClear(0,0,0,1,st):At==="alpha-blend"&&nt.buffers.color.setClear(0,0,0,0,st),(_e.autoClear||xt)&&(nt.buffers.depth.setTest(!0),nt.buffers.depth.setMask(!0),nt.buffers.color.setMask(!0),_e.clear(_e.autoClearColor,_e.autoClearDepth,_e.autoClearStencil))}function vt(_t,xt){const St=mt(xt);St&&(St.isCubeTexture||St.mapping===CubeUVReflectionMapping)?(ct===void 0&&(ct=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),ct.geometry.deleteAttribute("normal"),ct.geometry.deleteAttribute("uv"),ct.onBeforeRender=function(At,bt,Et){this.matrixWorld.copyPosition(Et.matrixWorld)},Object.defineProperty(ct.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),rt.update(ct)),_e1$1.copy(xt.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,St.isCubeTexture&&St.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),ct.material.uniforms.envMap.value=St,ct.material.uniforms.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1,ct.material.uniforms.backgroundBlurriness.value=xt.backgroundBlurriness,ct.material.uniforms.backgroundIntensity.value=xt.backgroundIntensity,ct.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),ct.material.toneMapped=ColorManagement.getTransfer(St.colorSpace)!==SRGBTransfer,(ut!==St||dt!==St.version||ht!==_e.toneMapping)&&(ct.material.needsUpdate=!0,ut=St,dt=St.version,ht=_e.toneMapping),ct.layers.enableAll(),_t.unshift(ct,ct.geometry,ct.material,0,0,null)):St&&St.isTexture&&(lt===void 0&&(lt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),lt.geometry.deleteAttribute("normal"),Object.defineProperty(lt.material,"map",{get:function(){return this.uniforms.t2D.value}}),rt.update(lt)),lt.material.uniforms.t2D.value=St,lt.material.uniforms.backgroundIntensity.value=xt.backgroundIntensity,lt.material.toneMapped=ColorManagement.getTransfer(St.colorSpace)!==SRGBTransfer,St.matrixAutoUpdate===!0&&St.updateMatrix(),lt.material.uniforms.uvTransform.value.copy(St.matrix),(ut!==St||dt!==St.version||ht!==_e.toneMapping)&&(lt.material.needsUpdate=!0,ut=St,dt=St.version,ht=_e.toneMapping),lt.layers.enableAll(),_t.unshift(lt,lt.geometry,lt.material,0,0,null))}function pt(_t,xt){_t.getRGB(_rgb,getUnlitUniformColorSpace(_e)),nt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,xt,st)}return{getClearColor:function(){return ot},setClearColor:function(_t,xt=1){ot.set(_t),at=xt,pt(ot,at)},getClearAlpha:function(){return at},setClearAlpha:function(_t){at=_t,pt(ot,at)},render:yt,addToRenderList:vt}}function WebGLBindingStates(_e,_){const tt=_e.getParameter(_e.MAX_VERTEX_ATTRIBS),nt={},rt=dt(null);let it=rt,st=!1;function ot(Tt,Mt,Lt,Ft,Ht){let Kt=!1;const Wt=ut(Ft,Lt,Mt);it!==Wt&&(it=Wt,lt(it.object)),Kt=ht(Tt,Ft,Lt,Ht),Kt&&mt(Tt,Ft,Lt,Ht),Ht!==null&&_.update(Ht,_e.ELEMENT_ARRAY_BUFFER),(Kt||st)&&(st=!1,St(Tt,Mt,Lt,Ft),Ht!==null&&_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,_.get(Ht).buffer))}function at(){return _e.createVertexArray()}function lt(Tt){return _e.bindVertexArray(Tt)}function ct(Tt){return _e.deleteVertexArray(Tt)}function ut(Tt,Mt,Lt){const Ft=Lt.wireframe===!0;let Ht=nt[Tt.id];Ht===void 0&&(Ht={},nt[Tt.id]=Ht);let Kt=Ht[Mt.id];Kt===void 0&&(Kt={},Ht[Mt.id]=Kt);let Wt=Kt[Ft];return Wt===void 0&&(Wt=dt(at()),Kt[Ft]=Wt),Wt}function dt(Tt){const Mt=[],Lt=[],Ft=[];for(let Ht=0;Ht<tt;Ht++)Mt[Ht]=0,Lt[Ht]=0,Ft[Ht]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mt,enabledAttributes:Lt,attributeDivisors:Ft,object:Tt,attributes:{},index:null}}function ht(Tt,Mt,Lt,Ft){const Ht=it.attributes,Kt=Mt.attributes;let Wt=0;const Jt=Lt.getAttributes();for(const Ot in Jt)if(Jt[Ot].location>=0){const Gt=Ht[Ot];let zt=Kt[Ot];if(zt===void 0&&(Ot==="instanceMatrix"&&Tt.instanceMatrix&&(zt=Tt.instanceMatrix),Ot==="instanceColor"&&Tt.instanceColor&&(zt=Tt.instanceColor)),Gt===void 0||Gt.attribute!==zt||zt&&Gt.data!==zt.data)return!0;Wt++}return it.attributesNum!==Wt||it.index!==Ft}function mt(Tt,Mt,Lt,Ft){const Ht={},Kt=Mt.attributes;let Wt=0;const Jt=Lt.getAttributes();for(const Ot in Jt)if(Jt[Ot].location>=0){let Gt=Kt[Ot];Gt===void 0&&(Ot==="instanceMatrix"&&Tt.instanceMatrix&&(Gt=Tt.instanceMatrix),Ot==="instanceColor"&&Tt.instanceColor&&(Gt=Tt.instanceColor));const zt={};zt.attribute=Gt,Gt&&Gt.data&&(zt.data=Gt.data),Ht[Ot]=zt,Wt++}it.attributes=Ht,it.attributesNum=Wt,it.index=Ft}function yt(){const Tt=it.newAttributes;for(let Mt=0,Lt=Tt.length;Mt<Lt;Mt++)Tt[Mt]=0}function vt(Tt){pt(Tt,0)}function pt(Tt,Mt){const Lt=it.newAttributes,Ft=it.enabledAttributes,Ht=it.attributeDivisors;Lt[Tt]=1,Ft[Tt]===0&&(_e.enableVertexAttribArray(Tt),Ft[Tt]=1),Ht[Tt]!==Mt&&(_e.vertexAttribDivisor(Tt,Mt),Ht[Tt]=Mt)}function _t(){const Tt=it.newAttributes,Mt=it.enabledAttributes;for(let Lt=0,Ft=Mt.length;Lt<Ft;Lt++)Mt[Lt]!==Tt[Lt]&&(_e.disableVertexAttribArray(Lt),Mt[Lt]=0)}function xt(Tt,Mt,Lt,Ft,Ht,Kt,Wt){Wt===!0?_e.vertexAttribIPointer(Tt,Mt,Lt,Ht,Kt):_e.vertexAttribPointer(Tt,Mt,Lt,Ft,Ht,Kt)}function St(Tt,Mt,Lt,Ft){yt();const Ht=Ft.attributes,Kt=Lt.getAttributes(),Wt=Mt.defaultAttributeValues;for(const Jt in Kt){const Ot=Kt[Jt];if(Ot.location>=0){let kt=Ht[Jt];if(kt===void 0&&(Jt==="instanceMatrix"&&Tt.instanceMatrix&&(kt=Tt.instanceMatrix),Jt==="instanceColor"&&Tt.instanceColor&&(kt=Tt.instanceColor)),kt!==void 0){const Gt=kt.normalized,zt=kt.itemSize,Vt=_.get(kt);if(Vt===void 0)continue;const Dt=Vt.buffer,It=Vt.type,Ut=Vt.bytesPerElement,Yt=It===_e.INT||It===_e.UNSIGNED_INT||kt.gpuType===IntType;if(kt.isInterleavedBufferAttribute){const qt=kt.data,rn=qt.stride,gn=kt.offset;if(qt.isInstancedInterleavedBuffer){for(let An=0;An<Ot.locationSize;An++)pt(Ot.location+An,qt.meshPerAttribute);Tt.isInstancedMesh!==!0&&Ft._maxInstanceCount===void 0&&(Ft._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let An=0;An<Ot.locationSize;An++)vt(Ot.location+An);_e.bindBuffer(_e.ARRAY_BUFFER,Dt);for(let An=0;An<Ot.locationSize;An++)xt(Ot.location+An,zt/Ot.locationSize,It,Gt,rn*Ut,(gn+zt/Ot.locationSize*An)*Ut,Yt)}else{if(kt.isInstancedBufferAttribute){for(let qt=0;qt<Ot.locationSize;qt++)pt(Ot.location+qt,kt.meshPerAttribute);Tt.isInstancedMesh!==!0&&Ft._maxInstanceCount===void 0&&(Ft._maxInstanceCount=kt.meshPerAttribute*kt.count)}else for(let qt=0;qt<Ot.locationSize;qt++)vt(Ot.location+qt);_e.bindBuffer(_e.ARRAY_BUFFER,Dt);for(let qt=0;qt<Ot.locationSize;qt++)xt(Ot.location+qt,zt/Ot.locationSize,It,Gt,zt*Ut,zt/Ot.locationSize*qt*Ut,Yt)}}else if(Wt!==void 0){const Gt=Wt[Jt];if(Gt!==void 0)switch(Gt.length){case 2:_e.vertexAttrib2fv(Ot.location,Gt);break;case 3:_e.vertexAttrib3fv(Ot.location,Gt);break;case 4:_e.vertexAttrib4fv(Ot.location,Gt);break;default:_e.vertexAttrib1fv(Ot.location,Gt)}}}}_t()}function At(){wt();for(const Tt in nt){const Mt=nt[Tt];for(const Lt in Mt){const Ft=Mt[Lt];for(const Ht in Ft)ct(Ft[Ht].object),delete Ft[Ht];delete Mt[Lt]}delete nt[Tt]}}function bt(Tt){if(nt[Tt.id]===void 0)return;const Mt=nt[Tt.id];for(const Lt in Mt){const Ft=Mt[Lt];for(const Ht in Ft)ct(Ft[Ht].object),delete Ft[Ht];delete Mt[Lt]}delete nt[Tt.id]}function Et(Tt){for(const Mt in nt){const Lt=nt[Mt];if(Lt[Tt.id]===void 0)continue;const Ft=Lt[Tt.id];for(const Ht in Ft)ct(Ft[Ht].object),delete Ft[Ht];delete Lt[Tt.id]}}function wt(){Rt(),st=!0,it!==rt&&(it=rt,lt(it.object))}function Rt(){rt.geometry=null,rt.program=null,rt.wireframe=!1}return{setup:ot,reset:wt,resetDefaultState:Rt,dispose:At,releaseStatesOfGeometry:bt,releaseStatesOfProgram:Et,initAttributes:yt,enableAttribute:vt,disableUnusedAttributes:_t}}function WebGLBufferRenderer(_e,_,tt){let nt;function rt(lt){nt=lt}function it(lt,ct){_e.drawArrays(nt,lt,ct),tt.update(ct,nt,1)}function st(lt,ct,ut){ut!==0&&(_e.drawArraysInstanced(nt,lt,ct,ut),tt.update(ct,nt,ut))}function ot(lt,ct,ut){if(ut===0)return;_.get("WEBGL_multi_draw").multiDrawArraysWEBGL(nt,lt,0,ct,0,ut);let ht=0;for(let mt=0;mt<ut;mt++)ht+=ct[mt];tt.update(ht,nt,1)}function at(lt,ct,ut,dt){if(ut===0)return;const ht=_.get("WEBGL_multi_draw");if(ht===null)for(let mt=0;mt<lt.length;mt++)st(lt[mt],ct[mt],dt[mt]);else{ht.multiDrawArraysInstancedWEBGL(nt,lt,0,ct,0,dt,0,ut);let mt=0;for(let yt=0;yt<ut;yt++)mt+=ct[yt];for(let yt=0;yt<dt.length;yt++)tt.update(mt,nt,dt[yt])}}this.setMode=rt,this.render=it,this.renderInstances=st,this.renderMultiDraw=ot,this.renderMultiDrawInstances=at}function WebGLCapabilities(_e,_,tt,nt){let rt;function it(){if(rt!==void 0)return rt;if(_.has("EXT_texture_filter_anisotropic")===!0){const Et=_.get("EXT_texture_filter_anisotropic");rt=_e.getParameter(Et.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else rt=0;return rt}function st(Et){return!(Et!==RGBAFormat&&nt.convert(Et)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_FORMAT))}function ot(Et){const wt=Et===HalfFloatType&&(_.has("EXT_color_buffer_half_float")||_.has("EXT_color_buffer_float"));return!(Et!==UnsignedByteType&&nt.convert(Et)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_TYPE)&&Et!==FloatType&&!wt)}function at(Et){if(Et==="highp"){if(_e.getShaderPrecisionFormat(_e.VERTEX_SHADER,_e.HIGH_FLOAT).precision>0&&_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.HIGH_FLOAT).precision>0)return"highp";Et="mediump"}return Et==="mediump"&&_e.getShaderPrecisionFormat(_e.VERTEX_SHADER,_e.MEDIUM_FLOAT).precision>0&&_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let lt=tt.precision!==void 0?tt.precision:"highp";const ct=at(lt);ct!==lt&&(console.warn("THREE.WebGLRenderer:",lt,"not supported, using",ct,"instead."),lt=ct);const ut=tt.logarithmicDepthBuffer===!0,dt=tt.reverseDepthBuffer===!0&&_.has("EXT_clip_control");if(dt===!0){const Et=_.get("EXT_clip_control");Et.clipControlEXT(Et.LOWER_LEFT_EXT,Et.ZERO_TO_ONE_EXT)}const ht=_e.getParameter(_e.MAX_TEXTURE_IMAGE_UNITS),mt=_e.getParameter(_e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),yt=_e.getParameter(_e.MAX_TEXTURE_SIZE),vt=_e.getParameter(_e.MAX_CUBE_MAP_TEXTURE_SIZE),pt=_e.getParameter(_e.MAX_VERTEX_ATTRIBS),_t=_e.getParameter(_e.MAX_VERTEX_UNIFORM_VECTORS),xt=_e.getParameter(_e.MAX_VARYING_VECTORS),St=_e.getParameter(_e.MAX_FRAGMENT_UNIFORM_VECTORS),At=mt>0,bt=_e.getParameter(_e.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:it,getMaxPrecision:at,textureFormatReadable:st,textureTypeReadable:ot,precision:lt,logarithmicDepthBuffer:ut,reverseDepthBuffer:dt,maxTextures:ht,maxVertexTextures:mt,maxTextureSize:yt,maxCubemapSize:vt,maxAttributes:pt,maxVertexUniforms:_t,maxVaryings:xt,maxFragmentUniforms:St,vertexTextures:At,maxSamples:bt}}function WebGLClipping(_e){const _=this;let tt=null,nt=0,rt=!1,it=!1;const st=new Plane$3,ot=new Matrix3,at={value:null,needsUpdate:!1};this.uniform=at,this.numPlanes=0,this.numIntersection=0,this.init=function(ut,dt){const ht=ut.length!==0||dt||nt!==0||rt;return rt=dt,nt=ut.length,ht},this.beginShadows=function(){it=!0,ct(null)},this.endShadows=function(){it=!1},this.setGlobalState=function(ut,dt){tt=ct(ut,dt,0)},this.setState=function(ut,dt,ht){const mt=ut.clippingPlanes,yt=ut.clipIntersection,vt=ut.clipShadows,pt=_e.get(ut);if(!rt||mt===null||mt.length===0||it&&!vt)it?ct(null):lt();else{const _t=it?0:nt,xt=_t*4;let St=pt.clippingState||null;at.value=St,St=ct(mt,dt,xt,ht);for(let At=0;At!==xt;++At)St[At]=tt[At];pt.clippingState=St,this.numIntersection=yt?this.numPlanes:0,this.numPlanes+=_t}};function lt(){at.value!==tt&&(at.value=tt,at.needsUpdate=nt>0),_.numPlanes=nt,_.numIntersection=0}function ct(ut,dt,ht,mt){const yt=ut!==null?ut.length:0;let vt=null;if(yt!==0){if(vt=at.value,mt!==!0||vt===null){const pt=ht+yt*4,_t=dt.matrixWorldInverse;ot.getNormalMatrix(_t),(vt===null||vt.length<pt)&&(vt=new Float32Array(pt));for(let xt=0,St=ht;xt!==yt;++xt,St+=4)st.copy(ut[xt]).applyMatrix4(_t,ot),st.normal.toArray(vt,St),vt[St+3]=st.constant}at.value=vt,at.needsUpdate=!0}return _.numPlanes=yt,_.numIntersection=0,vt}}function WebGLCubeMaps(_e){let _=new WeakMap;function tt(st,ot){return ot===EquirectangularReflectionMapping?st.mapping=CubeReflectionMapping:ot===EquirectangularRefractionMapping&&(st.mapping=CubeRefractionMapping),st}function nt(st){if(st&&st.isTexture){const ot=st.mapping;if(ot===EquirectangularReflectionMapping||ot===EquirectangularRefractionMapping)if(_.has(st)){const at=_.get(st).texture;return tt(at,st.mapping)}else{const at=st.image;if(at&&at.height>0){const lt=new WebGLCubeRenderTarget(at.height);return lt.fromEquirectangularTexture(_e,st),_.set(st,lt),st.addEventListener("dispose",rt),tt(lt.texture,st.mapping)}else return null}}return st}function rt(st){const ot=st.target;ot.removeEventListener("dispose",rt);const at=_.get(ot);at!==void 0&&(_.delete(ot),at.dispose())}function it(){_=new WeakMap}return{get:nt,dispose:it}}class OrthographicCamera extends Camera{constructor(_=-1,tt=1,nt=1,rt=-1,it=.1,st=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=tt,this.top=nt,this.bottom=rt,this.near=it,this.far=st,this.updateProjectionMatrix()}copy(_,tt){return super.copy(_,tt),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,tt,nt,rt,it,st){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=tt,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=st,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),tt=(this.top-this.bottom)/(2*this.zoom),nt=(this.right+this.left)/2,rt=(this.top+this.bottom)/2;let it=nt-_,st=nt+_,ot=rt+tt,at=rt-tt;if(this.view!==null&&this.view.enabled){const lt=(this.right-this.left)/this.view.fullWidth/this.zoom,ct=(this.top-this.bottom)/this.view.fullHeight/this.zoom;it+=lt*this.view.offsetX,st=it+lt*this.view.width,ot-=ct*this.view.offsetY,at=ot-ct*this.view.height}this.projectionMatrix.makeOrthographic(it,st,ot,at,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const tt=super.toJSON(_);return tt.object.zoom=this.zoom,tt.object.left=this.left,tt.object.right=this.right,tt.object.top=this.top,tt.object.bottom=this.bottom,tt.object.near=this.near,tt.object.far=this.far,this.view!==null&&(tt.object.view=Object.assign({},this.view)),tt}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(_,tt=0,nt=.1,rt=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const it=this._allocateTargets();return it.depthBuffer=!0,this._sceneToCubeUV(_,nt,rt,it),tt>0&&this._blur(it,0,0,tt),this._applyPMREM(it),this._cleanup(it),it}fromEquirectangular(_,tt=null){return this._fromTexture(_,tt)}fromCubemap(_,tt=null){return this._fromTexture(_,tt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodPlanes.length;_++)this._lodPlanes[_].dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,tt){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const nt=tt||this._allocateTargets();return this._textureToCubeUV(_,nt),this._applyPMREM(nt),this._cleanup(nt),nt}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),tt=4*this._cubeSize,nt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace$1,depthBuffer:!1},rt=_createRenderTarget(_,tt,nt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==tt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,tt,nt);const{_lodMax:it}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(it)),this._blurMaterial=_getBlurShader(it,_,tt)}return rt}_compileMaterial(_){const tt=new Mesh(this._lodPlanes[0],_);this._renderer.compile(tt,_flatCamera)}_sceneToCubeUV(_,tt,nt,rt){const ot=new PerspectiveCamera(90,1,tt,nt),at=[1,-1,1,1,1,1],lt=[1,1,1,-1,-1,-1],ct=this._renderer,ut=ct.autoClear,dt=ct.toneMapping;ct.getClearColor(_clearColor),ct.toneMapping=NoToneMapping,ct.autoClear=!1;const ht=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),mt=new Mesh(new BoxGeometry,ht);let yt=!1;const vt=_.background;vt?vt.isColor&&(ht.color.copy(vt),_.background=null,yt=!0):(ht.color.copy(_clearColor),yt=!0);for(let pt=0;pt<6;pt++){const _t=pt%3;_t===0?(ot.up.set(0,at[pt],0),ot.lookAt(lt[pt],0,0)):_t===1?(ot.up.set(0,0,at[pt]),ot.lookAt(0,lt[pt],0)):(ot.up.set(0,at[pt],0),ot.lookAt(0,0,lt[pt]));const xt=this._cubeSize;_setViewport(rt,_t*xt,pt>2?xt:0,xt,xt),ct.setRenderTarget(rt),yt&&ct.render(mt,ot),ct.render(_,ot)}mt.geometry.dispose(),mt.material.dispose(),ct.toneMapping=dt,ct.autoClear=ut,_.background=vt}_textureToCubeUV(_,tt){const nt=this._renderer,rt=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;rt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const it=rt?this._cubemapMaterial:this._equirectMaterial,st=new Mesh(this._lodPlanes[0],it),ot=it.uniforms;ot.envMap.value=_;const at=this._cubeSize;_setViewport(tt,0,0,3*at,2*at),nt.setRenderTarget(tt),nt.render(st,_flatCamera)}_applyPMREM(_){const tt=this._renderer,nt=tt.autoClear;tt.autoClear=!1;const rt=this._lodPlanes.length;for(let it=1;it<rt;it++){const st=Math.sqrt(this._sigmas[it]*this._sigmas[it]-this._sigmas[it-1]*this._sigmas[it-1]),ot=_axisDirections[(rt-it-1)%_axisDirections.length];this._blur(_,it-1,it,st,ot)}tt.autoClear=nt}_blur(_,tt,nt,rt,it){const st=this._pingPongRenderTarget;this._halfBlur(_,st,tt,nt,rt,"latitudinal",it),this._halfBlur(st,_,nt,nt,rt,"longitudinal",it)}_halfBlur(_,tt,nt,rt,it,st,ot){const at=this._renderer,lt=this._blurMaterial;st!=="latitudinal"&&st!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ct=3,ut=new Mesh(this._lodPlanes[rt],lt),dt=lt.uniforms,ht=this._sizeLods[nt]-1,mt=isFinite(it)?Math.PI/(2*ht):2*Math.PI/(2*MAX_SAMPLES-1),yt=it/mt,vt=isFinite(it)?1+Math.floor(ct*yt):MAX_SAMPLES;vt>MAX_SAMPLES&&console.warn(`sigmaRadians, ${it}, is too large and will clip, as it requested ${vt} samples when the maximum is set to ${MAX_SAMPLES}`);const pt=[];let _t=0;for(let Et=0;Et<MAX_SAMPLES;++Et){const wt=Et/yt,Rt=Math.exp(-wt*wt/2);pt.push(Rt),Et===0?_t+=Rt:Et<vt&&(_t+=2*Rt)}for(let Et=0;Et<pt.length;Et++)pt[Et]=pt[Et]/_t;dt.envMap.value=_.texture,dt.samples.value=vt,dt.weights.value=pt,dt.latitudinal.value=st==="latitudinal",ot&&(dt.poleAxis.value=ot);const{_lodMax:xt}=this;dt.dTheta.value=mt,dt.mipInt.value=xt-nt;const St=this._sizeLods[rt],At=3*St*(rt>xt-LOD_MIN?rt-xt+LOD_MIN:0),bt=4*(this._cubeSize-St);_setViewport(tt,At,bt,3*St,2*St),at.setRenderTarget(tt),at.render(ut,_flatCamera)}}function _createPlanes(_e){const _=[],tt=[],nt=[];let rt=_e;const it=_e-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let st=0;st<it;st++){const ot=Math.pow(2,rt);tt.push(ot);let at=1/ot;st>_e-LOD_MIN?at=EXTRA_LOD_SIGMA[st-_e+LOD_MIN-1]:st===0&&(at=0),nt.push(at);const lt=1/(ot-2),ct=-lt,ut=1+lt,dt=[ct,ct,ut,ct,ut,ut,ct,ct,ut,ut,ct,ut],ht=6,mt=6,yt=3,vt=2,pt=1,_t=new Float32Array(yt*mt*ht),xt=new Float32Array(vt*mt*ht),St=new Float32Array(pt*mt*ht);for(let bt=0;bt<ht;bt++){const Et=bt%3*2/3-1,wt=bt>2?0:-1,Rt=[Et,wt,0,Et+2/3,wt,0,Et+2/3,wt+1,0,Et,wt,0,Et+2/3,wt+1,0,Et,wt+1,0];_t.set(Rt,yt*mt*bt),xt.set(dt,vt*mt*bt);const Tt=[bt,bt,bt,bt,bt,bt];St.set(Tt,pt*mt*bt)}const At=new BufferGeometry;At.setAttribute("position",new BufferAttribute(_t,yt)),At.setAttribute("uv",new BufferAttribute(xt,vt)),At.setAttribute("faceIndex",new BufferAttribute(St,pt)),_.push(At),rt>LOD_MIN&&rt--}return{lodPlanes:_,sizeLods:tt,sigmas:nt}}function _createRenderTarget(_e,_,tt){const nt=new WebGLRenderTarget(_e,_,tt);return nt.texture.mapping=CubeUVReflectionMapping,nt.texture.name="PMREM.cubeUv",nt.scissorTest=!0,nt}function _setViewport(_e,_,tt,nt,rt){_e.viewport.set(_,tt,nt,rt),_e.scissor.set(_,tt,nt,rt)}function _getBlurShader(_e,_,tt){const nt=new Float32Array(MAX_SAMPLES),rt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/tt,CUBEUV_MAX_MIP:`${_e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:nt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:rt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(_e){let _=new WeakMap,tt=null;function nt(ot){if(ot&&ot.isTexture){const at=ot.mapping,lt=at===EquirectangularReflectionMapping||at===EquirectangularRefractionMapping,ct=at===CubeReflectionMapping||at===CubeRefractionMapping;if(lt||ct){let ut=_.get(ot);const dt=ut!==void 0?ut.texture.pmremVersion:0;if(ot.isRenderTargetTexture&&ot.pmremVersion!==dt)return tt===null&&(tt=new PMREMGenerator(_e)),ut=lt?tt.fromEquirectangular(ot,ut):tt.fromCubemap(ot,ut),ut.texture.pmremVersion=ot.pmremVersion,_.set(ot,ut),ut.texture;if(ut!==void 0)return ut.texture;{const ht=ot.image;return lt&&ht&&ht.height>0||ct&&ht&&rt(ht)?(tt===null&&(tt=new PMREMGenerator(_e)),ut=lt?tt.fromEquirectangular(ot):tt.fromCubemap(ot),ut.texture.pmremVersion=ot.pmremVersion,_.set(ot,ut),ot.addEventListener("dispose",it),ut.texture):null}}}return ot}function rt(ot){let at=0;const lt=6;for(let ct=0;ct<lt;ct++)ot[ct]!==void 0&&at++;return at===lt}function it(ot){const at=ot.target;at.removeEventListener("dispose",it);const lt=_.get(at);lt!==void 0&&(_.delete(at),lt.dispose())}function st(){_=new WeakMap,tt!==null&&(tt.dispose(),tt=null)}return{get:nt,dispose:st}}function WebGLExtensions(_e){const _={};function tt(nt){if(_[nt]!==void 0)return _[nt];let rt;switch(nt){case"WEBGL_depth_texture":rt=_e.getExtension("WEBGL_depth_texture")||_e.getExtension("MOZ_WEBGL_depth_texture")||_e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":rt=_e.getExtension("EXT_texture_filter_anisotropic")||_e.getExtension("MOZ_EXT_texture_filter_anisotropic")||_e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":rt=_e.getExtension("WEBGL_compressed_texture_s3tc")||_e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":rt=_e.getExtension("WEBGL_compressed_texture_pvrtc")||_e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:rt=_e.getExtension(nt)}return _[nt]=rt,rt}return{has:function(nt){return tt(nt)!==null},init:function(){tt("EXT_color_buffer_float"),tt("WEBGL_clip_cull_distance"),tt("OES_texture_float_linear"),tt("EXT_color_buffer_half_float"),tt("WEBGL_multisampled_render_to_texture"),tt("WEBGL_render_shared_exponent")},get:function(nt){const rt=tt(nt);return rt===null&&warnOnce("THREE.WebGLRenderer: "+nt+" extension not supported."),rt}}}function WebGLGeometries(_e,_,tt,nt){const rt={},it=new WeakMap;function st(ut){const dt=ut.target;dt.index!==null&&_.remove(dt.index);for(const mt in dt.attributes)_.remove(dt.attributes[mt]);for(const mt in dt.morphAttributes){const yt=dt.morphAttributes[mt];for(let vt=0,pt=yt.length;vt<pt;vt++)_.remove(yt[vt])}dt.removeEventListener("dispose",st),delete rt[dt.id];const ht=it.get(dt);ht&&(_.remove(ht),it.delete(dt)),nt.releaseStatesOfGeometry(dt),dt.isInstancedBufferGeometry===!0&&delete dt._maxInstanceCount,tt.memory.geometries--}function ot(ut,dt){return rt[dt.id]===!0||(dt.addEventListener("dispose",st),rt[dt.id]=!0,tt.memory.geometries++),dt}function at(ut){const dt=ut.attributes;for(const mt in dt)_.update(dt[mt],_e.ARRAY_BUFFER);const ht=ut.morphAttributes;for(const mt in ht){const yt=ht[mt];for(let vt=0,pt=yt.length;vt<pt;vt++)_.update(yt[vt],_e.ARRAY_BUFFER)}}function lt(ut){const dt=[],ht=ut.index,mt=ut.attributes.position;let yt=0;if(ht!==null){const _t=ht.array;yt=ht.version;for(let xt=0,St=_t.length;xt<St;xt+=3){const At=_t[xt+0],bt=_t[xt+1],Et=_t[xt+2];dt.push(At,bt,bt,Et,Et,At)}}else if(mt!==void 0){const _t=mt.array;yt=mt.version;for(let xt=0,St=_t.length/3-1;xt<St;xt+=3){const At=xt+0,bt=xt+1,Et=xt+2;dt.push(At,bt,bt,Et,Et,At)}}else return;const vt=new(arrayNeedsUint32(dt)?Uint32BufferAttribute:Uint16BufferAttribute)(dt,1);vt.version=yt;const pt=it.get(ut);pt&&_.remove(pt),it.set(ut,vt)}function ct(ut){const dt=it.get(ut);if(dt){const ht=ut.index;ht!==null&&dt.version<ht.version&&lt(ut)}else lt(ut);return it.get(ut)}return{get:ot,update:at,getWireframeAttribute:ct}}function WebGLIndexedBufferRenderer(_e,_,tt){let nt;function rt(dt){nt=dt}let it,st;function ot(dt){it=dt.type,st=dt.bytesPerElement}function at(dt,ht){_e.drawElements(nt,ht,it,dt*st),tt.update(ht,nt,1)}function lt(dt,ht,mt){mt!==0&&(_e.drawElementsInstanced(nt,ht,it,dt*st,mt),tt.update(ht,nt,mt))}function ct(dt,ht,mt){if(mt===0)return;_.get("WEBGL_multi_draw").multiDrawElementsWEBGL(nt,ht,0,it,dt,0,mt);let vt=0;for(let pt=0;pt<mt;pt++)vt+=ht[pt];tt.update(vt,nt,1)}function ut(dt,ht,mt,yt){if(mt===0)return;const vt=_.get("WEBGL_multi_draw");if(vt===null)for(let pt=0;pt<dt.length;pt++)lt(dt[pt]/st,ht[pt],yt[pt]);else{vt.multiDrawElementsInstancedWEBGL(nt,ht,0,it,dt,0,yt,0,mt);let pt=0;for(let _t=0;_t<mt;_t++)pt+=ht[_t];for(let _t=0;_t<yt.length;_t++)tt.update(pt,nt,yt[_t])}}this.setMode=rt,this.setIndex=ot,this.render=at,this.renderInstances=lt,this.renderMultiDraw=ct,this.renderMultiDrawInstances=ut}function WebGLInfo(_e){const _={geometries:0,textures:0},tt={frame:0,calls:0,triangles:0,points:0,lines:0};function nt(it,st,ot){switch(tt.calls++,st){case _e.TRIANGLES:tt.triangles+=ot*(it/3);break;case _e.LINES:tt.lines+=ot*(it/2);break;case _e.LINE_STRIP:tt.lines+=ot*(it-1);break;case _e.LINE_LOOP:tt.lines+=ot*it;break;case _e.POINTS:tt.points+=ot*it;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",st);break}}function rt(){tt.calls=0,tt.triangles=0,tt.points=0,tt.lines=0}return{memory:_,render:tt,programs:null,autoReset:!0,reset:rt,update:nt}}function WebGLMorphtargets(_e,_,tt){const nt=new WeakMap,rt=new Vector4;function it(st,ot,at){const lt=st.morphTargetInfluences,ct=ot.morphAttributes.position||ot.morphAttributes.normal||ot.morphAttributes.color,ut=ct!==void 0?ct.length:0;let dt=nt.get(ot);if(dt===void 0||dt.count!==ut){let Tt=function(){wt.dispose(),nt.delete(ot),ot.removeEventListener("dispose",Tt)};var ht=Tt;dt!==void 0&&dt.texture.dispose();const mt=ot.morphAttributes.position!==void 0,yt=ot.morphAttributes.normal!==void 0,vt=ot.morphAttributes.color!==void 0,pt=ot.morphAttributes.position||[],_t=ot.morphAttributes.normal||[],xt=ot.morphAttributes.color||[];let St=0;mt===!0&&(St=1),yt===!0&&(St=2),vt===!0&&(St=3);let At=ot.attributes.position.count*St,bt=1;At>_.maxTextureSize&&(bt=Math.ceil(At/_.maxTextureSize),At=_.maxTextureSize);const Et=new Float32Array(At*bt*4*ut),wt=new DataArrayTexture(Et,At,bt,ut);wt.type=FloatType,wt.needsUpdate=!0;const Rt=St*4;for(let Mt=0;Mt<ut;Mt++){const Lt=pt[Mt],Ft=_t[Mt],Ht=xt[Mt],Kt=At*bt*4*Mt;for(let Wt=0;Wt<Lt.count;Wt++){const Jt=Wt*Rt;mt===!0&&(rt.fromBufferAttribute(Lt,Wt),Et[Kt+Jt+0]=rt.x,Et[Kt+Jt+1]=rt.y,Et[Kt+Jt+2]=rt.z,Et[Kt+Jt+3]=0),yt===!0&&(rt.fromBufferAttribute(Ft,Wt),Et[Kt+Jt+4]=rt.x,Et[Kt+Jt+5]=rt.y,Et[Kt+Jt+6]=rt.z,Et[Kt+Jt+7]=0),vt===!0&&(rt.fromBufferAttribute(Ht,Wt),Et[Kt+Jt+8]=rt.x,Et[Kt+Jt+9]=rt.y,Et[Kt+Jt+10]=rt.z,Et[Kt+Jt+11]=Ht.itemSize===4?rt.w:1)}}dt={count:ut,texture:wt,size:new Vector2(At,bt)},nt.set(ot,dt),ot.addEventListener("dispose",Tt)}if(st.isInstancedMesh===!0&&st.morphTexture!==null)at.getUniforms().setValue(_e,"morphTexture",st.morphTexture,tt);else{let mt=0;for(let vt=0;vt<lt.length;vt++)mt+=lt[vt];const yt=ot.morphTargetsRelative?1:1-mt;at.getUniforms().setValue(_e,"morphTargetBaseInfluence",yt),at.getUniforms().setValue(_e,"morphTargetInfluences",lt)}at.getUniforms().setValue(_e,"morphTargetsTexture",dt.texture,tt),at.getUniforms().setValue(_e,"morphTargetsTextureSize",dt.size)}return{update:it}}function WebGLObjects(_e,_,tt,nt){let rt=new WeakMap;function it(at){const lt=nt.render.frame,ct=at.geometry,ut=_.get(at,ct);if(rt.get(ut)!==lt&&(_.update(ut),rt.set(ut,lt)),at.isInstancedMesh&&(at.hasEventListener("dispose",ot)===!1&&at.addEventListener("dispose",ot),rt.get(at)!==lt&&(tt.update(at.instanceMatrix,_e.ARRAY_BUFFER),at.instanceColor!==null&&tt.update(at.instanceColor,_e.ARRAY_BUFFER),rt.set(at,lt))),at.isSkinnedMesh){const dt=at.skeleton;rt.get(dt)!==lt&&(dt.update(),rt.set(dt,lt))}return ut}function st(){rt=new WeakMap}function ot(at){const lt=at.target;lt.removeEventListener("dispose",ot),tt.remove(lt.instanceMatrix),lt.instanceColor!==null&&tt.remove(lt.instanceColor)}return{update:it,dispose:st}}class DepthTexture extends Texture{constructor(_,tt,nt,rt,it,st,ot,at,lt,ct=DepthFormat){if(ct!==DepthFormat&&ct!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");nt===void 0&&ct===DepthFormat&&(nt=UnsignedIntType),nt===void 0&&ct===DepthStencilFormat&&(nt=UnsignedInt248Type),super(null,rt,it,st,ot,at,ct,nt,lt),this.isDepthTexture=!0,this.image={width:_,height:tt},this.magFilter=ot!==void 0?ot:NearestFilter,this.minFilter=at!==void 0?at:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.compareFunction=_.compareFunction,this}toJSON(_){const tt=super.toJSON(_);return this.compareFunction!==null&&(tt.compareFunction=this.compareFunction),tt}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$1(_e,_,tt){const nt=_e[0];if(nt<=0||nt>0)return _e;const rt=_*tt;let it=arrayCacheF32[rt];if(it===void 0&&(it=new Float32Array(rt),arrayCacheF32[rt]=it),_!==0){nt.toArray(it,0);for(let st=1,ot=0;st!==_;++st)ot+=tt,_e[st].toArray(it,ot)}return it}function arraysEqual(_e,_){if(_e.length!==_.length)return!1;for(let tt=0,nt=_e.length;tt<nt;tt++)if(_e[tt]!==_[tt])return!1;return!0}function copyArray(_e,_){for(let tt=0,nt=_.length;tt<nt;tt++)_e[tt]=_[tt]}function allocTexUnits(_e,_){let tt=arrayCacheI32[_];tt===void 0&&(tt=new Int32Array(_),arrayCacheI32[_]=tt);for(let nt=0;nt!==_;++nt)tt[nt]=_e.allocateTextureUnit();return tt}function setValueV1f(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1f(this.addr,_),tt[0]=_)}function setValueV2f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2f(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual(tt,_))return;_e.uniform2fv(this.addr,_),copyArray(tt,_)}}function setValueV3f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3f(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else if(_.r!==void 0)(tt[0]!==_.r||tt[1]!==_.g||tt[2]!==_.b)&&(_e.uniform3f(this.addr,_.r,_.g,_.b),tt[0]=_.r,tt[1]=_.g,tt[2]=_.b);else{if(arraysEqual(tt,_))return;_e.uniform3fv(this.addr,_),copyArray(tt,_)}}function setValueV4f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4f(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual(tt,_))return;_e.uniform4fv(this.addr,_),copyArray(tt,_)}}function setValueM2(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(tt,_))return;_e.uniformMatrix2fv(this.addr,!1,_),copyArray(tt,_)}else{if(arraysEqual(tt,nt))return;mat2array.set(nt),_e.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(tt,nt)}}function setValueM3(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(tt,_))return;_e.uniformMatrix3fv(this.addr,!1,_),copyArray(tt,_)}else{if(arraysEqual(tt,nt))return;mat3array.set(nt),_e.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(tt,nt)}}function setValueM4(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(tt,_))return;_e.uniformMatrix4fv(this.addr,!1,_),copyArray(tt,_)}else{if(arraysEqual(tt,nt))return;mat4array.set(nt),_e.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(tt,nt)}}function setValueV1i(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1i(this.addr,_),tt[0]=_)}function setValueV2i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2i(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual(tt,_))return;_e.uniform2iv(this.addr,_),copyArray(tt,_)}}function setValueV3i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3i(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else{if(arraysEqual(tt,_))return;_e.uniform3iv(this.addr,_),copyArray(tt,_)}}function setValueV4i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4i(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual(tt,_))return;_e.uniform4iv(this.addr,_),copyArray(tt,_)}}function setValueV1ui(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1ui(this.addr,_),tt[0]=_)}function setValueV2ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2ui(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual(tt,_))return;_e.uniform2uiv(this.addr,_),copyArray(tt,_)}}function setValueV3ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3ui(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else{if(arraysEqual(tt,_))return;_e.uniform3uiv(this.addr,_),copyArray(tt,_)}}function setValueV4ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4ui(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual(tt,_))return;_e.uniform4uiv(this.addr,_),copyArray(tt,_)}}function setValueT1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt);let it;this.type===_e.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,it=emptyShadowTexture):it=emptyTexture,tt.setTexture2D(_||it,rt)}function setValueT3D1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTexture3D(_||empty3dTexture,rt)}function setValueT6(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTextureCube(_||emptyCubeTexture,rt)}function setValueT2DArray1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTexture2DArray(_||emptyArrayTexture,rt)}function getSingularSetter(_e){switch(_e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_e,_){_e.uniform1fv(this.addr,_)}function setValueV2fArray(_e,_){const tt=flatten$1(_,this.size,2);_e.uniform2fv(this.addr,tt)}function setValueV3fArray(_e,_){const tt=flatten$1(_,this.size,3);_e.uniform3fv(this.addr,tt)}function setValueV4fArray(_e,_){const tt=flatten$1(_,this.size,4);_e.uniform4fv(this.addr,tt)}function setValueM2Array(_e,_){const tt=flatten$1(_,this.size,4);_e.uniformMatrix2fv(this.addr,!1,tt)}function setValueM3Array(_e,_){const tt=flatten$1(_,this.size,9);_e.uniformMatrix3fv(this.addr,!1,tt)}function setValueM4Array(_e,_){const tt=flatten$1(_,this.size,16);_e.uniformMatrix4fv(this.addr,!1,tt)}function setValueV1iArray(_e,_){_e.uniform1iv(this.addr,_)}function setValueV2iArray(_e,_){_e.uniform2iv(this.addr,_)}function setValueV3iArray(_e,_){_e.uniform3iv(this.addr,_)}function setValueV4iArray(_e,_){_e.uniform4iv(this.addr,_)}function setValueV1uiArray(_e,_){_e.uniform1uiv(this.addr,_)}function setValueV2uiArray(_e,_){_e.uniform2uiv(this.addr,_)}function setValueV3uiArray(_e,_){_e.uniform3uiv(this.addr,_)}function setValueV4uiArray(_e,_){_e.uniform4uiv(this.addr,_)}function setValueT1Array(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual(nt,it)||(_e.uniform1iv(this.addr,it),copyArray(nt,it));for(let st=0;st!==rt;++st)tt.setTexture2D(_[st]||emptyTexture,it[st])}function setValueT3DArray(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual(nt,it)||(_e.uniform1iv(this.addr,it),copyArray(nt,it));for(let st=0;st!==rt;++st)tt.setTexture3D(_[st]||empty3dTexture,it[st])}function setValueT6Array(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual(nt,it)||(_e.uniform1iv(this.addr,it),copyArray(nt,it));for(let st=0;st!==rt;++st)tt.setTextureCube(_[st]||emptyCubeTexture,it[st])}function setValueT2DArrayArray(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual(nt,it)||(_e.uniform1iv(this.addr,it),copyArray(nt,it));for(let st=0;st!==rt;++st)tt.setTexture2DArray(_[st]||emptyArrayTexture,it[st])}function getPureArraySetter(_e){switch(_e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,tt,nt){this.id=_,this.addr=nt,this.cache=[],this.type=tt.type,this.setValue=getSingularSetter(tt.type)}}class PureArrayUniform{constructor(_,tt,nt){this.id=_,this.addr=nt,this.cache=[],this.type=tt.type,this.size=tt.size,this.setValue=getPureArraySetter(tt.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,tt,nt){const rt=this.seq;for(let it=0,st=rt.length;it!==st;++it){const ot=rt[it];ot.setValue(_,tt[ot.id],nt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(_e,_){_e.seq.push(_),_e.map[_.id]=_}function parseUniform(_e,_,tt){const nt=_e.name,rt=nt.length;for(RePathPart.lastIndex=0;;){const it=RePathPart.exec(nt),st=RePathPart.lastIndex;let ot=it[1];const at=it[2]==="]",lt=it[3];if(at&&(ot=ot|0),lt===void 0||lt==="["&&st+2===rt){addUniform(tt,lt===void 0?new SingleUniform(ot,_e,_):new PureArrayUniform(ot,_e,_));break}else{let ut=tt.map[ot];ut===void 0&&(ut=new StructuredUniform(ot),addUniform(tt,ut)),tt=ut}}}class WebGLUniforms{constructor(_,tt){this.seq=[],this.map={};const nt=_.getProgramParameter(tt,_.ACTIVE_UNIFORMS);for(let rt=0;rt<nt;++rt){const it=_.getActiveUniform(tt,rt),st=_.getUniformLocation(tt,it.name);parseUniform(it,st,this)}}setValue(_,tt,nt,rt){const it=this.map[tt];it!==void 0&&it.setValue(_,nt,rt)}setOptional(_,tt,nt){const rt=tt[nt];rt!==void 0&&this.setValue(_,nt,rt)}static upload(_,tt,nt,rt){for(let it=0,st=tt.length;it!==st;++it){const ot=tt[it],at=nt[ot.id];at.needsUpdate!==!1&&ot.setValue(_,at.value,rt)}}static seqWithValue(_,tt){const nt=[];for(let rt=0,it=_.length;rt!==it;++rt){const st=_[rt];st.id in tt&&nt.push(st)}return nt}}function WebGLShader(_e,_,tt){const nt=_e.createShader(_);return _e.shaderSource(nt,tt),_e.compileShader(nt),nt}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(_e,_){const tt=_e.split(`
`),nt=[],rt=Math.max(_-6,0),it=Math.min(_+6,tt.length);for(let st=rt;st<it;st++){const ot=st+1;nt.push(`${ot===_?">":" "} ${ot}: ${tt[st]}`)}return nt.join(`
`)}function getEncodingComponents(_e){const _=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),tt=ColorManagement.getPrimaries(_e);let nt;switch(_===tt?nt="":_===P3Primaries&&tt===Rec709Primaries?nt="LinearDisplayP3ToLinearSRGB":_===Rec709Primaries&&tt===P3Primaries&&(nt="LinearSRGBToLinearDisplayP3"),_e){case LinearSRGBColorSpace$1:case LinearDisplayP3ColorSpace:return[nt,"LinearTransferOETF"];case SRGBColorSpace$1:case DisplayP3ColorSpace:return[nt,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",_e),[nt,"LinearTransferOETF"]}}function getShaderErrors(_e,_,tt){const nt=_e.getShaderParameter(_,_e.COMPILE_STATUS),rt=_e.getShaderInfoLog(_).trim();if(nt&&rt==="")return"";const it=/ERROR: 0:(\d+)/.exec(rt);if(it){const st=parseInt(it[1]);return tt.toUpperCase()+`

`+rt+`

`+handleSource(_e.getShaderSource(_),st)}else return rt}function getTexelEncodingFunction(_e,_){const tt=getEncodingComponents(_);return`vec4 ${_e}( vec4 value ) { return ${tt[0]}( ${tt[1]}( value ) ); }`}function getToneMappingFunction(_e,_){let tt;switch(_){case LinearToneMapping:tt="Linear";break;case ReinhardToneMapping:tt="Reinhard";break;case CineonToneMapping:tt="Cineon";break;case ACESFilmicToneMapping:tt="ACESFilmic";break;case AgXToneMapping:tt="AgX";break;case NeutralToneMapping:tt="Neutral";break;case CustomToneMapping:tt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",_),tt="Linear"}return"vec3 "+_e+"( vec3 color ) { return "+tt+"ToneMapping( color ); }"}const _v0$1=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0$1);const _e=_v0$1.x.toFixed(4),_=_v0$1.y.toFixed(4),tt=_v0$1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${_e}, ${_}, ${tt} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(_e){return[_e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",_e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(_e){const _=[];for(const tt in _e){const nt=_e[tt];nt!==!1&&_.push("#define "+tt+" "+nt)}return _.join(`
`)}function fetchAttributeLocations(_e,_){const tt={},nt=_e.getProgramParameter(_,_e.ACTIVE_ATTRIBUTES);for(let rt=0;rt<nt;rt++){const it=_e.getActiveAttrib(_,rt),st=it.name;let ot=1;it.type===_e.FLOAT_MAT2&&(ot=2),it.type===_e.FLOAT_MAT3&&(ot=3),it.type===_e.FLOAT_MAT4&&(ot=4),tt[st]={type:it.type,location:_e.getAttribLocation(_,st),locationSize:ot}}return tt}function filterEmptyLine(_e){return _e!==""}function replaceLightNums(_e,_){const tt=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return _e.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,tt).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(_e,_){return _e.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_e){return _e.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(_e,_){let tt=ShaderChunk[_];if(tt===void 0){const nt=shaderChunkMap.get(_);if(nt!==void 0)tt=ShaderChunk[nt],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',_,nt);else throw new Error("Can not resolve #include <"+_+">")}return resolveIncludes(tt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(_e){return _e.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(_e,_,tt,nt){let rt="";for(let it=parseInt(_);it<parseInt(tt);it++)rt+=nt.replace(/\[\s*i\s*\]/g,"[ "+it+" ]").replace(/UNROLLED_LOOP_INDEX/g,it);return rt}function generatePrecision(_e){let _=`precision ${_e.precision} float;
	precision ${_e.precision} int;
	precision ${_e.precision} sampler2D;
	precision ${_e.precision} samplerCube;
	precision ${_e.precision} sampler3D;
	precision ${_e.precision} sampler2DArray;
	precision ${_e.precision} sampler2DShadow;
	precision ${_e.precision} samplerCubeShadow;
	precision ${_e.precision} sampler2DArrayShadow;
	precision ${_e.precision} isampler2D;
	precision ${_e.precision} isampler3D;
	precision ${_e.precision} isamplerCube;
	precision ${_e.precision} isampler2DArray;
	precision ${_e.precision} usampler2D;
	precision ${_e.precision} usampler3D;
	precision ${_e.precision} usamplerCube;
	precision ${_e.precision} usampler2DArray;
	`;return _e.precision==="highp"?_+=`
#define HIGH_PRECISION`:_e.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:_e.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(_e){let _="SHADOWMAP_TYPE_BASIC";return _e.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":_e.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":_e.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(_e){let _="ENVMAP_TYPE_CUBE";if(_e.envMap)switch(_e.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(_e){let _="ENVMAP_MODE_REFLECTION";if(_e.envMap)switch(_e.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(_e){let _="ENVMAP_BLENDING_NONE";if(_e.envMap)switch(_e.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(_e){const _=_e.envMapCubeUVHeight;if(_===null)return null;const tt=Math.log2(_)-2,nt=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,tt),7*16)),texelHeight:nt,maxMip:tt}}function WebGLProgram(_e,_,tt,nt){const rt=_e.getContext(),it=tt.defines;let st=tt.vertexShader,ot=tt.fragmentShader;const at=generateShadowMapTypeDefine(tt),lt=generateEnvMapTypeDefine(tt),ct=generateEnvMapModeDefine(tt),ut=generateEnvMapBlendingDefine(tt),dt=generateCubeUVSize(tt),ht=generateVertexExtensions(tt),mt=generateDefines(it),yt=rt.createProgram();let vt,pt,_t=tt.glslVersion?"#version "+tt.glslVersion+`
`:"";tt.isRawShaderMaterial?(vt=["#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,mt].filter(filterEmptyLine).join(`
`),vt.length>0&&(vt+=`
`),pt=["#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,mt].filter(filterEmptyLine).join(`
`),pt.length>0&&(pt+=`
`)):(vt=[generatePrecision(tt),"#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,mt,tt.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",tt.batching?"#define USE_BATCHING":"",tt.batchingColor?"#define USE_BATCHING_COLOR":"",tt.instancing?"#define USE_INSTANCING":"",tt.instancingColor?"#define USE_INSTANCING_COLOR":"",tt.instancingMorph?"#define USE_INSTANCING_MORPH":"",tt.useFog&&tt.fog?"#define USE_FOG":"",tt.useFog&&tt.fogExp2?"#define FOG_EXP2":"",tt.map?"#define USE_MAP":"",tt.envMap?"#define USE_ENVMAP":"",tt.envMap?"#define "+ct:"",tt.lightMap?"#define USE_LIGHTMAP":"",tt.aoMap?"#define USE_AOMAP":"",tt.bumpMap?"#define USE_BUMPMAP":"",tt.normalMap?"#define USE_NORMALMAP":"",tt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",tt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",tt.displacementMap?"#define USE_DISPLACEMENTMAP":"",tt.emissiveMap?"#define USE_EMISSIVEMAP":"",tt.anisotropy?"#define USE_ANISOTROPY":"",tt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",tt.clearcoatMap?"#define USE_CLEARCOATMAP":"",tt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",tt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",tt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",tt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",tt.specularMap?"#define USE_SPECULARMAP":"",tt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",tt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",tt.roughnessMap?"#define USE_ROUGHNESSMAP":"",tt.metalnessMap?"#define USE_METALNESSMAP":"",tt.alphaMap?"#define USE_ALPHAMAP":"",tt.alphaHash?"#define USE_ALPHAHASH":"",tt.transmission?"#define USE_TRANSMISSION":"",tt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",tt.thicknessMap?"#define USE_THICKNESSMAP":"",tt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",tt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",tt.mapUv?"#define MAP_UV "+tt.mapUv:"",tt.alphaMapUv?"#define ALPHAMAP_UV "+tt.alphaMapUv:"",tt.lightMapUv?"#define LIGHTMAP_UV "+tt.lightMapUv:"",tt.aoMapUv?"#define AOMAP_UV "+tt.aoMapUv:"",tt.emissiveMapUv?"#define EMISSIVEMAP_UV "+tt.emissiveMapUv:"",tt.bumpMapUv?"#define BUMPMAP_UV "+tt.bumpMapUv:"",tt.normalMapUv?"#define NORMALMAP_UV "+tt.normalMapUv:"",tt.displacementMapUv?"#define DISPLACEMENTMAP_UV "+tt.displacementMapUv:"",tt.metalnessMapUv?"#define METALNESSMAP_UV "+tt.metalnessMapUv:"",tt.roughnessMapUv?"#define ROUGHNESSMAP_UV "+tt.roughnessMapUv:"",tt.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+tt.anisotropyMapUv:"",tt.clearcoatMapUv?"#define CLEARCOATMAP_UV "+tt.clearcoatMapUv:"",tt.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+tt.clearcoatNormalMapUv:"",tt.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+tt.clearcoatRoughnessMapUv:"",tt.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+tt.iridescenceMapUv:"",tt.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+tt.iridescenceThicknessMapUv:"",tt.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+tt.sheenColorMapUv:"",tt.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+tt.sheenRoughnessMapUv:"",tt.specularMapUv?"#define SPECULARMAP_UV "+tt.specularMapUv:"",tt.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+tt.specularColorMapUv:"",tt.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+tt.specularIntensityMapUv:"",tt.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+tt.transmissionMapUv:"",tt.thicknessMapUv?"#define THICKNESSMAP_UV "+tt.thicknessMapUv:"",tt.vertexTangents&&tt.flatShading===!1?"#define USE_TANGENT":"",tt.vertexColors?"#define USE_COLOR":"",tt.vertexAlphas?"#define USE_COLOR_ALPHA":"",tt.vertexUv1s?"#define USE_UV1":"",tt.vertexUv2s?"#define USE_UV2":"",tt.vertexUv3s?"#define USE_UV3":"",tt.pointsUvs?"#define USE_POINTS_UV":"",tt.flatShading?"#define FLAT_SHADED":"",tt.skinning?"#define USE_SKINNING":"",tt.morphTargets?"#define USE_MORPHTARGETS":"",tt.morphNormals&&tt.flatShading===!1?"#define USE_MORPHNORMALS":"",tt.morphColors?"#define USE_MORPHCOLORS":"",tt.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+tt.morphTextureStride:"",tt.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+tt.morphTargetsCount:"",tt.doubleSided?"#define DOUBLE_SIDED":"",tt.flipSided?"#define FLIP_SIDED":"",tt.shadowMapEnabled?"#define USE_SHADOWMAP":"",tt.shadowMapEnabled?"#define "+at:"",tt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",tt.numLightProbes>0?"#define USE_LIGHT_PROBES":"",tt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",tt.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),pt=[generatePrecision(tt),"#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,mt,tt.useFog&&tt.fog?"#define USE_FOG":"",tt.useFog&&tt.fogExp2?"#define FOG_EXP2":"",tt.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",tt.map?"#define USE_MAP":"",tt.matcap?"#define USE_MATCAP":"",tt.envMap?"#define USE_ENVMAP":"",tt.envMap?"#define "+lt:"",tt.envMap?"#define "+ct:"",tt.envMap?"#define "+ut:"",dt?"#define CUBEUV_TEXEL_WIDTH "+dt.texelWidth:"",dt?"#define CUBEUV_TEXEL_HEIGHT "+dt.texelHeight:"",dt?"#define CUBEUV_MAX_MIP "+dt.maxMip+".0":"",tt.lightMap?"#define USE_LIGHTMAP":"",tt.aoMap?"#define USE_AOMAP":"",tt.bumpMap?"#define USE_BUMPMAP":"",tt.normalMap?"#define USE_NORMALMAP":"",tt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",tt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",tt.emissiveMap?"#define USE_EMISSIVEMAP":"",tt.anisotropy?"#define USE_ANISOTROPY":"",tt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",tt.clearcoat?"#define USE_CLEARCOAT":"",tt.clearcoatMap?"#define USE_CLEARCOATMAP":"",tt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",tt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",tt.dispersion?"#define USE_DISPERSION":"",tt.iridescence?"#define USE_IRIDESCENCE":"",tt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",tt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",tt.specularMap?"#define USE_SPECULARMAP":"",tt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",tt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",tt.roughnessMap?"#define USE_ROUGHNESSMAP":"",tt.metalnessMap?"#define USE_METALNESSMAP":"",tt.alphaMap?"#define USE_ALPHAMAP":"",tt.alphaTest?"#define USE_ALPHATEST":"",tt.alphaHash?"#define USE_ALPHAHASH":"",tt.sheen?"#define USE_SHEEN":"",tt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",tt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",tt.transmission?"#define USE_TRANSMISSION":"",tt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",tt.thicknessMap?"#define USE_THICKNESSMAP":"",tt.vertexTangents&&tt.flatShading===!1?"#define USE_TANGENT":"",tt.vertexColors||tt.instancingColor||tt.batchingColor?"#define USE_COLOR":"",tt.vertexAlphas?"#define USE_COLOR_ALPHA":"",tt.vertexUv1s?"#define USE_UV1":"",tt.vertexUv2s?"#define USE_UV2":"",tt.vertexUv3s?"#define USE_UV3":"",tt.pointsUvs?"#define USE_POINTS_UV":"",tt.gradientMap?"#define USE_GRADIENTMAP":"",tt.flatShading?"#define FLAT_SHADED":"",tt.doubleSided?"#define DOUBLE_SIDED":"",tt.flipSided?"#define FLIP_SIDED":"",tt.shadowMapEnabled?"#define USE_SHADOWMAP":"",tt.shadowMapEnabled?"#define "+at:"",tt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",tt.numLightProbes>0?"#define USE_LIGHT_PROBES":"",tt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",tt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",tt.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",tt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",tt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",tt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",tt.toneMapping):"",tt.dithering?"#define DITHERING":"",tt.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",tt.outputColorSpace),getLuminanceFunction(),tt.useDepthPacking?"#define DEPTH_PACKING "+tt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),st=resolveIncludes(st),st=replaceLightNums(st,tt),st=replaceClippingPlaneNums(st,tt),ot=resolveIncludes(ot),ot=replaceLightNums(ot,tt),ot=replaceClippingPlaneNums(ot,tt),st=unrollLoops(st),ot=unrollLoops(ot),tt.isRawShaderMaterial!==!0&&(_t=`#version 300 es
`,vt=[ht,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+vt,pt=["#define varying in",tt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",tt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+pt);const xt=_t+vt+st,St=_t+pt+ot,At=WebGLShader(rt,rt.VERTEX_SHADER,xt),bt=WebGLShader(rt,rt.FRAGMENT_SHADER,St);rt.attachShader(yt,At),rt.attachShader(yt,bt),tt.index0AttributeName!==void 0?rt.bindAttribLocation(yt,0,tt.index0AttributeName):tt.morphTargets===!0&&rt.bindAttribLocation(yt,0,"position"),rt.linkProgram(yt);function Et(Mt){if(_e.debug.checkShaderErrors){const Lt=rt.getProgramInfoLog(yt).trim(),Ft=rt.getShaderInfoLog(At).trim(),Ht=rt.getShaderInfoLog(bt).trim();let Kt=!0,Wt=!0;if(rt.getProgramParameter(yt,rt.LINK_STATUS)===!1)if(Kt=!1,typeof _e.debug.onShaderError=="function")_e.debug.onShaderError(rt,yt,At,bt);else{const Jt=getShaderErrors(rt,At,"vertex"),Ot=getShaderErrors(rt,bt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+rt.getError()+" - VALIDATE_STATUS "+rt.getProgramParameter(yt,rt.VALIDATE_STATUS)+`

Material Name: `+Mt.name+`
Material Type: `+Mt.type+`

Program Info Log: `+Lt+`
`+Jt+`
`+Ot)}else Lt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Lt):(Ft===""||Ht==="")&&(Wt=!1);Wt&&(Mt.diagnostics={runnable:Kt,programLog:Lt,vertexShader:{log:Ft,prefix:vt},fragmentShader:{log:Ht,prefix:pt}})}rt.deleteShader(At),rt.deleteShader(bt),wt=new WebGLUniforms(rt,yt),Rt=fetchAttributeLocations(rt,yt)}let wt;this.getUniforms=function(){return wt===void 0&&Et(this),wt};let Rt;this.getAttributes=function(){return Rt===void 0&&Et(this),Rt};let Tt=tt.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Tt===!1&&(Tt=rt.getProgramParameter(yt,COMPLETION_STATUS_KHR)),Tt},this.destroy=function(){nt.releaseStatesOfProgram(this),rt.deleteProgram(yt),this.program=void 0},this.type=tt.shaderType,this.name=tt.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=yt,this.vertexShader=At,this.fragmentShader=bt,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const tt=_.vertexShader,nt=_.fragmentShader,rt=this._getShaderStage(tt),it=this._getShaderStage(nt),st=this._getShaderCacheForMaterial(_);return st.has(rt)===!1&&(st.add(rt),rt.usedTimes++),st.has(it)===!1&&(st.add(it),it.usedTimes++),this}remove(_){const tt=this.materialCache.get(_);for(const nt of tt)nt.usedTimes--,nt.usedTimes===0&&this.shaderCache.delete(nt.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const tt=this.materialCache;let nt=tt.get(_);return nt===void 0&&(nt=new Set,tt.set(_,nt)),nt}_getShaderStage(_){const tt=this.shaderCache;let nt=tt.get(_);return nt===void 0&&(nt=new WebGLShaderStage(_),tt.set(_,nt)),nt}}class WebGLShaderStage{constructor(_){this.id=_id$1++,this.code=_,this.usedTimes=0}}function WebGLPrograms(_e,_,tt,nt,rt,it,st){const ot=new Layers,at=new WebGLShaderCache,lt=new Set,ct=[],ut=rt.logarithmicDepthBuffer,dt=rt.reverseDepthBuffer,ht=rt.vertexTextures;let mt=rt.precision;const yt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function vt(Tt){return lt.add(Tt),Tt===0?"uv":`uv${Tt}`}function pt(Tt,Mt,Lt,Ft,Ht){const Kt=Ft.fog,Wt=Ht.geometry,Jt=Tt.isMeshStandardMaterial?Ft.environment:null,Ot=(Tt.isMeshStandardMaterial?tt:_).get(Tt.envMap||Jt),kt=Ot&&Ot.mapping===CubeUVReflectionMapping?Ot.image.height:null,Gt=yt[Tt.type];Tt.precision!==null&&(mt=rt.getMaxPrecision(Tt.precision),mt!==Tt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Tt.precision,"not supported, using",mt,"instead."));const zt=Wt.morphAttributes.position||Wt.morphAttributes.normal||Wt.morphAttributes.color,Vt=zt!==void 0?zt.length:0;let Dt=0;Wt.morphAttributes.position!==void 0&&(Dt=1),Wt.morphAttributes.normal!==void 0&&(Dt=2),Wt.morphAttributes.color!==void 0&&(Dt=3);let It,Ut,Yt,qt;if(Gt){const pn=ShaderLib[Gt];It=pn.vertexShader,Ut=pn.fragmentShader}else It=Tt.vertexShader,Ut=Tt.fragmentShader,at.update(Tt),Yt=at.getVertexShaderID(Tt),qt=at.getFragmentShaderID(Tt);const rn=_e.getRenderTarget(),gn=Ht.isInstancedMesh===!0,An=Ht.isBatchedMesh===!0,En=!!Tt.map,fn=!!Tt.matcap,nn=!!Ot,Tn=!!Tt.aoMap,Cn=!!Tt.lightMap,vn=!!Tt.bumpMap,_n=!!Tt.normalMap,Qt=!!Tt.displacementMap,sn=!!Tt.emissiveMap,jt=!!Tt.metalnessMap,Bt=!!Tt.roughnessMap,hn=Tt.anisotropy>0,cn=Tt.clearcoat>0,mn=Tt.dispersion>0,an=Tt.iridescence>0,Hn=Tt.sheen>0,Pn=Tt.transmission>0,er=hn&&!!Tt.anisotropyMap,cr=cn&&!!Tt.clearcoatMap,ir=cn&&!!Tt.clearcoatNormalMap,Jn=cn&&!!Tt.clearcoatRoughnessMap,fr=an&&!!Tt.iridescenceMap,dr=an&&!!Tt.iridescenceThicknessMap,lr=Hn&&!!Tt.sheenColorMap,Nn=Hn&&!!Tt.sheenRoughnessMap,bn=!!Tt.specularMap,Rn=!!Tt.specularColorMap,Sn=!!Tt.specularIntensityMap,or=Pn&&!!Tt.transmissionMap,xn=Pn&&!!Tt.thicknessMap,on=!!Tt.gradientMap,Gn=!!Tt.alphaMap,Xn=Tt.alphaTest>0,pr=!!Tt.alphaHash,Ar=!!Tt.extensions;let xr=NoToneMapping;Tt.toneMapped&&(rn===null||rn.isXRRenderTarget===!0)&&(xr=_e.toneMapping);const un={shaderID:Gt,shaderType:Tt.type,shaderName:Tt.name,vertexShader:It,fragmentShader:Ut,defines:Tt.defines,customVertexShaderID:Yt,customFragmentShaderID:qt,isRawShaderMaterial:Tt.isRawShaderMaterial===!0,glslVersion:Tt.glslVersion,precision:mt,batching:An,batchingColor:An&&Ht._colorsTexture!==null,instancing:gn,instancingColor:gn&&Ht.instanceColor!==null,instancingMorph:gn&&Ht.morphTexture!==null,supportsVertexTextures:ht,outputColorSpace:rn===null?_e.outputColorSpace:rn.isXRRenderTarget===!0?rn.texture.colorSpace:LinearSRGBColorSpace$1,alphaToCoverage:!!Tt.alphaToCoverage,map:En,matcap:fn,envMap:nn,envMapMode:nn&&Ot.mapping,envMapCubeUVHeight:kt,aoMap:Tn,lightMap:Cn,bumpMap:vn,normalMap:_n,displacementMap:ht&&Qt,emissiveMap:sn,normalMapObjectSpace:_n&&Tt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:_n&&Tt.normalMapType===TangentSpaceNormalMap,metalnessMap:jt,roughnessMap:Bt,anisotropy:hn,anisotropyMap:er,clearcoat:cn,clearcoatMap:cr,clearcoatNormalMap:ir,clearcoatRoughnessMap:Jn,dispersion:mn,iridescence:an,iridescenceMap:fr,iridescenceThicknessMap:dr,sheen:Hn,sheenColorMap:lr,sheenRoughnessMap:Nn,specularMap:bn,specularColorMap:Rn,specularIntensityMap:Sn,transmission:Pn,transmissionMap:or,thicknessMap:xn,gradientMap:on,opaque:Tt.transparent===!1&&Tt.blending===NormalBlending&&Tt.alphaToCoverage===!1,alphaMap:Gn,alphaTest:Xn,alphaHash:pr,combine:Tt.combine,mapUv:En&&vt(Tt.map.channel),aoMapUv:Tn&&vt(Tt.aoMap.channel),lightMapUv:Cn&&vt(Tt.lightMap.channel),bumpMapUv:vn&&vt(Tt.bumpMap.channel),normalMapUv:_n&&vt(Tt.normalMap.channel),displacementMapUv:Qt&&vt(Tt.displacementMap.channel),emissiveMapUv:sn&&vt(Tt.emissiveMap.channel),metalnessMapUv:jt&&vt(Tt.metalnessMap.channel),roughnessMapUv:Bt&&vt(Tt.roughnessMap.channel),anisotropyMapUv:er&&vt(Tt.anisotropyMap.channel),clearcoatMapUv:cr&&vt(Tt.clearcoatMap.channel),clearcoatNormalMapUv:ir&&vt(Tt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Jn&&vt(Tt.clearcoatRoughnessMap.channel),iridescenceMapUv:fr&&vt(Tt.iridescenceMap.channel),iridescenceThicknessMapUv:dr&&vt(Tt.iridescenceThicknessMap.channel),sheenColorMapUv:lr&&vt(Tt.sheenColorMap.channel),sheenRoughnessMapUv:Nn&&vt(Tt.sheenRoughnessMap.channel),specularMapUv:bn&&vt(Tt.specularMap.channel),specularColorMapUv:Rn&&vt(Tt.specularColorMap.channel),specularIntensityMapUv:Sn&&vt(Tt.specularIntensityMap.channel),transmissionMapUv:or&&vt(Tt.transmissionMap.channel),thicknessMapUv:xn&&vt(Tt.thicknessMap.channel),alphaMapUv:Gn&&vt(Tt.alphaMap.channel),vertexTangents:!!Wt.attributes.tangent&&(_n||hn),vertexColors:Tt.vertexColors,vertexAlphas:Tt.vertexColors===!0&&!!Wt.attributes.color&&Wt.attributes.color.itemSize===4,pointsUvs:Ht.isPoints===!0&&!!Wt.attributes.uv&&(En||Gn),fog:!!Kt,useFog:Tt.fog===!0,fogExp2:!!Kt&&Kt.isFogExp2,flatShading:Tt.flatShading===!0,sizeAttenuation:Tt.sizeAttenuation===!0,logarithmicDepthBuffer:ut,reverseDepthBuffer:dt,skinning:Ht.isSkinnedMesh===!0,morphTargets:Wt.morphAttributes.position!==void 0,morphNormals:Wt.morphAttributes.normal!==void 0,morphColors:Wt.morphAttributes.color!==void 0,morphTargetsCount:Vt,morphTextureStride:Dt,numDirLights:Mt.directional.length,numPointLights:Mt.point.length,numSpotLights:Mt.spot.length,numSpotLightMaps:Mt.spotLightMap.length,numRectAreaLights:Mt.rectArea.length,numHemiLights:Mt.hemi.length,numDirLightShadows:Mt.directionalShadowMap.length,numPointLightShadows:Mt.pointShadowMap.length,numSpotLightShadows:Mt.spotShadowMap.length,numSpotLightShadowsWithMaps:Mt.numSpotLightShadowsWithMaps,numLightProbes:Mt.numLightProbes,numClippingPlanes:st.numPlanes,numClipIntersection:st.numIntersection,dithering:Tt.dithering,shadowMapEnabled:_e.shadowMap.enabled&&Lt.length>0,shadowMapType:_e.shadowMap.type,toneMapping:xr,decodeVideoTexture:En&&Tt.map.isVideoTexture===!0&&ColorManagement.getTransfer(Tt.map.colorSpace)===SRGBTransfer,premultipliedAlpha:Tt.premultipliedAlpha,doubleSided:Tt.side===DoubleSide,flipSided:Tt.side===BackSide,useDepthPacking:Tt.depthPacking>=0,depthPacking:Tt.depthPacking||0,index0AttributeName:Tt.index0AttributeName,extensionClipCullDistance:Ar&&Tt.extensions.clipCullDistance===!0&&nt.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ar&&Tt.extensions.multiDraw===!0||An)&&nt.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:nt.has("KHR_parallel_shader_compile"),customProgramCacheKey:Tt.customProgramCacheKey()};return un.vertexUv1s=lt.has(1),un.vertexUv2s=lt.has(2),un.vertexUv3s=lt.has(3),lt.clear(),un}function _t(Tt){const Mt=[];if(Tt.shaderID?Mt.push(Tt.shaderID):(Mt.push(Tt.customVertexShaderID),Mt.push(Tt.customFragmentShaderID)),Tt.defines!==void 0)for(const Lt in Tt.defines)Mt.push(Lt),Mt.push(Tt.defines[Lt]);return Tt.isRawShaderMaterial===!1&&(xt(Mt,Tt),St(Mt,Tt),Mt.push(_e.outputColorSpace)),Mt.push(Tt.customProgramCacheKey),Mt.join()}function xt(Tt,Mt){Tt.push(Mt.precision),Tt.push(Mt.outputColorSpace),Tt.push(Mt.envMapMode),Tt.push(Mt.envMapCubeUVHeight),Tt.push(Mt.mapUv),Tt.push(Mt.alphaMapUv),Tt.push(Mt.lightMapUv),Tt.push(Mt.aoMapUv),Tt.push(Mt.bumpMapUv),Tt.push(Mt.normalMapUv),Tt.push(Mt.displacementMapUv),Tt.push(Mt.emissiveMapUv),Tt.push(Mt.metalnessMapUv),Tt.push(Mt.roughnessMapUv),Tt.push(Mt.anisotropyMapUv),Tt.push(Mt.clearcoatMapUv),Tt.push(Mt.clearcoatNormalMapUv),Tt.push(Mt.clearcoatRoughnessMapUv),Tt.push(Mt.iridescenceMapUv),Tt.push(Mt.iridescenceThicknessMapUv),Tt.push(Mt.sheenColorMapUv),Tt.push(Mt.sheenRoughnessMapUv),Tt.push(Mt.specularMapUv),Tt.push(Mt.specularColorMapUv),Tt.push(Mt.specularIntensityMapUv),Tt.push(Mt.transmissionMapUv),Tt.push(Mt.thicknessMapUv),Tt.push(Mt.combine),Tt.push(Mt.fogExp2),Tt.push(Mt.sizeAttenuation),Tt.push(Mt.morphTargetsCount),Tt.push(Mt.morphAttributeCount),Tt.push(Mt.numDirLights),Tt.push(Mt.numPointLights),Tt.push(Mt.numSpotLights),Tt.push(Mt.numSpotLightMaps),Tt.push(Mt.numHemiLights),Tt.push(Mt.numRectAreaLights),Tt.push(Mt.numDirLightShadows),Tt.push(Mt.numPointLightShadows),Tt.push(Mt.numSpotLightShadows),Tt.push(Mt.numSpotLightShadowsWithMaps),Tt.push(Mt.numLightProbes),Tt.push(Mt.shadowMapType),Tt.push(Mt.toneMapping),Tt.push(Mt.numClippingPlanes),Tt.push(Mt.numClipIntersection),Tt.push(Mt.depthPacking)}function St(Tt,Mt){ot.disableAll(),Mt.supportsVertexTextures&&ot.enable(0),Mt.instancing&&ot.enable(1),Mt.instancingColor&&ot.enable(2),Mt.instancingMorph&&ot.enable(3),Mt.matcap&&ot.enable(4),Mt.envMap&&ot.enable(5),Mt.normalMapObjectSpace&&ot.enable(6),Mt.normalMapTangentSpace&&ot.enable(7),Mt.clearcoat&&ot.enable(8),Mt.iridescence&&ot.enable(9),Mt.alphaTest&&ot.enable(10),Mt.vertexColors&&ot.enable(11),Mt.vertexAlphas&&ot.enable(12),Mt.vertexUv1s&&ot.enable(13),Mt.vertexUv2s&&ot.enable(14),Mt.vertexUv3s&&ot.enable(15),Mt.vertexTangents&&ot.enable(16),Mt.anisotropy&&ot.enable(17),Mt.alphaHash&&ot.enable(18),Mt.batching&&ot.enable(19),Mt.dispersion&&ot.enable(20),Mt.batchingColor&&ot.enable(21),Tt.push(ot.mask),ot.disableAll(),Mt.fog&&ot.enable(0),Mt.useFog&&ot.enable(1),Mt.flatShading&&ot.enable(2),Mt.logarithmicDepthBuffer&&ot.enable(3),Mt.reverseDepthBuffer&&ot.enable(4),Mt.skinning&&ot.enable(5),Mt.morphTargets&&ot.enable(6),Mt.morphNormals&&ot.enable(7),Mt.morphColors&&ot.enable(8),Mt.premultipliedAlpha&&ot.enable(9),Mt.shadowMapEnabled&&ot.enable(10),Mt.doubleSided&&ot.enable(11),Mt.flipSided&&ot.enable(12),Mt.useDepthPacking&&ot.enable(13),Mt.dithering&&ot.enable(14),Mt.transmission&&ot.enable(15),Mt.sheen&&ot.enable(16),Mt.opaque&&ot.enable(17),Mt.pointsUvs&&ot.enable(18),Mt.decodeVideoTexture&&ot.enable(19),Mt.alphaToCoverage&&ot.enable(20),Tt.push(ot.mask)}function At(Tt){const Mt=yt[Tt.type];let Lt;if(Mt){const Ft=ShaderLib[Mt];Lt=UniformsUtils.clone(Ft.uniforms)}else Lt=Tt.uniforms;return Lt}function bt(Tt,Mt){let Lt;for(let Ft=0,Ht=ct.length;Ft<Ht;Ft++){const Kt=ct[Ft];if(Kt.cacheKey===Mt){Lt=Kt,++Lt.usedTimes;break}}return Lt===void 0&&(Lt=new WebGLProgram(_e,Mt,Tt,it),ct.push(Lt)),Lt}function Et(Tt){if(--Tt.usedTimes===0){const Mt=ct.indexOf(Tt);ct[Mt]=ct[ct.length-1],ct.pop(),Tt.destroy()}}function wt(Tt){at.remove(Tt)}function Rt(){at.dispose()}return{getParameters:pt,getProgramCacheKey:_t,getUniforms:At,acquireProgram:bt,releaseProgram:Et,releaseShaderCache:wt,programs:ct,dispose:Rt}}function WebGLProperties(){let _e=new WeakMap;function _(st){return _e.has(st)}function tt(st){let ot=_e.get(st);return ot===void 0&&(ot={},_e.set(st,ot)),ot}function nt(st){_e.delete(st)}function rt(st,ot,at){_e.get(st)[ot]=at}function it(){_e=new WeakMap}return{has:_,get:tt,remove:nt,update:rt,dispose:it}}function painterSortStable(_e,_){return _e.groupOrder!==_.groupOrder?_e.groupOrder-_.groupOrder:_e.renderOrder!==_.renderOrder?_e.renderOrder-_.renderOrder:_e.material.id!==_.material.id?_e.material.id-_.material.id:_e.z!==_.z?_e.z-_.z:_e.id-_.id}function reversePainterSortStable(_e,_){return _e.groupOrder!==_.groupOrder?_e.groupOrder-_.groupOrder:_e.renderOrder!==_.renderOrder?_e.renderOrder-_.renderOrder:_e.z!==_.z?_.z-_e.z:_e.id-_.id}function WebGLRenderList(){const _e=[];let _=0;const tt=[],nt=[],rt=[];function it(){_=0,tt.length=0,nt.length=0,rt.length=0}function st(ut,dt,ht,mt,yt,vt){let pt=_e[_];return pt===void 0?(pt={id:ut.id,object:ut,geometry:dt,material:ht,groupOrder:mt,renderOrder:ut.renderOrder,z:yt,group:vt},_e[_]=pt):(pt.id=ut.id,pt.object=ut,pt.geometry=dt,pt.material=ht,pt.groupOrder=mt,pt.renderOrder=ut.renderOrder,pt.z=yt,pt.group=vt),_++,pt}function ot(ut,dt,ht,mt,yt,vt){const pt=st(ut,dt,ht,mt,yt,vt);ht.transmission>0?nt.push(pt):ht.transparent===!0?rt.push(pt):tt.push(pt)}function at(ut,dt,ht,mt,yt,vt){const pt=st(ut,dt,ht,mt,yt,vt);ht.transmission>0?nt.unshift(pt):ht.transparent===!0?rt.unshift(pt):tt.unshift(pt)}function lt(ut,dt){tt.length>1&&tt.sort(ut||painterSortStable),nt.length>1&&nt.sort(dt||reversePainterSortStable),rt.length>1&&rt.sort(dt||reversePainterSortStable)}function ct(){for(let ut=_,dt=_e.length;ut<dt;ut++){const ht=_e[ut];if(ht.id===null)break;ht.id=null,ht.object=null,ht.geometry=null,ht.material=null,ht.group=null}}return{opaque:tt,transmissive:nt,transparent:rt,init:it,push:ot,unshift:at,finish:ct,sort:lt}}function WebGLRenderLists(){let _e=new WeakMap;function _(nt,rt){const it=_e.get(nt);let st;return it===void 0?(st=new WebGLRenderList,_e.set(nt,[st])):rt>=it.length?(st=new WebGLRenderList,it.push(st)):st=it[rt],st}function tt(){_e=new WeakMap}return{get:_,dispose:tt}}function UniformsCache(){const _e={};return{get:function(_){if(_e[_.id]!==void 0)return _e[_.id];let tt;switch(_.type){case"DirectionalLight":tt={direction:new Vector3,color:new Color$1};break;case"SpotLight":tt={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":tt={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":tt={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":tt={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _e[_.id]=tt,tt}}}function ShadowUniformsCache(){const _e={};return{get:function(_){if(_e[_.id]!==void 0)return _e[_.id];let tt;switch(_.type){case"DirectionalLight":tt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":tt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":tt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _e[_.id]=tt,tt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(_e,_){return(_.castShadow?2:0)-(_e.castShadow?2:0)+(_.map?1:0)-(_e.map?1:0)}function WebGLLights(_e){const _=new UniformsCache,tt=ShadowUniformsCache(),nt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let lt=0;lt<9;lt++)nt.probe.push(new Vector3);const rt=new Vector3,it=new Matrix4,st=new Matrix4;function ot(lt){let ct=0,ut=0,dt=0;for(let Rt=0;Rt<9;Rt++)nt.probe[Rt].set(0,0,0);let ht=0,mt=0,yt=0,vt=0,pt=0,_t=0,xt=0,St=0,At=0,bt=0,Et=0;lt.sort(shadowCastingAndTexturingLightsFirst);for(let Rt=0,Tt=lt.length;Rt<Tt;Rt++){const Mt=lt[Rt],Lt=Mt.color,Ft=Mt.intensity,Ht=Mt.distance,Kt=Mt.shadow&&Mt.shadow.map?Mt.shadow.map.texture:null;if(Mt.isAmbientLight)ct+=Lt.r*Ft,ut+=Lt.g*Ft,dt+=Lt.b*Ft;else if(Mt.isLightProbe){for(let Wt=0;Wt<9;Wt++)nt.probe[Wt].addScaledVector(Mt.sh.coefficients[Wt],Ft);Et++}else if(Mt.isDirectionalLight){const Wt=_.get(Mt);if(Wt.color.copy(Mt.color).multiplyScalar(Mt.intensity),Mt.castShadow){const Jt=Mt.shadow,Ot=tt.get(Mt);Ot.shadowIntensity=Jt.intensity,Ot.shadowBias=Jt.bias,Ot.shadowNormalBias=Jt.normalBias,Ot.shadowRadius=Jt.radius,Ot.shadowMapSize=Jt.mapSize,nt.directionalShadow[ht]=Ot,nt.directionalShadowMap[ht]=Kt,nt.directionalShadowMatrix[ht]=Mt.shadow.matrix,_t++}nt.directional[ht]=Wt,ht++}else if(Mt.isSpotLight){const Wt=_.get(Mt);Wt.position.setFromMatrixPosition(Mt.matrixWorld),Wt.color.copy(Lt).multiplyScalar(Ft),Wt.distance=Ht,Wt.coneCos=Math.cos(Mt.angle),Wt.penumbraCos=Math.cos(Mt.angle*(1-Mt.penumbra)),Wt.decay=Mt.decay,nt.spot[yt]=Wt;const Jt=Mt.shadow;if(Mt.map&&(nt.spotLightMap[At]=Mt.map,At++,Jt.updateMatrices(Mt),Mt.castShadow&&bt++),nt.spotLightMatrix[yt]=Jt.matrix,Mt.castShadow){const Ot=tt.get(Mt);Ot.shadowIntensity=Jt.intensity,Ot.shadowBias=Jt.bias,Ot.shadowNormalBias=Jt.normalBias,Ot.shadowRadius=Jt.radius,Ot.shadowMapSize=Jt.mapSize,nt.spotShadow[yt]=Ot,nt.spotShadowMap[yt]=Kt,St++}yt++}else if(Mt.isRectAreaLight){const Wt=_.get(Mt);Wt.color.copy(Lt).multiplyScalar(Ft),Wt.halfWidth.set(Mt.width*.5,0,0),Wt.halfHeight.set(0,Mt.height*.5,0),nt.rectArea[vt]=Wt,vt++}else if(Mt.isPointLight){const Wt=_.get(Mt);if(Wt.color.copy(Mt.color).multiplyScalar(Mt.intensity),Wt.distance=Mt.distance,Wt.decay=Mt.decay,Mt.castShadow){const Jt=Mt.shadow,Ot=tt.get(Mt);Ot.shadowIntensity=Jt.intensity,Ot.shadowBias=Jt.bias,Ot.shadowNormalBias=Jt.normalBias,Ot.shadowRadius=Jt.radius,Ot.shadowMapSize=Jt.mapSize,Ot.shadowCameraNear=Jt.camera.near,Ot.shadowCameraFar=Jt.camera.far,nt.pointShadow[mt]=Ot,nt.pointShadowMap[mt]=Kt,nt.pointShadowMatrix[mt]=Mt.shadow.matrix,xt++}nt.point[mt]=Wt,mt++}else if(Mt.isHemisphereLight){const Wt=_.get(Mt);Wt.skyColor.copy(Mt.color).multiplyScalar(Ft),Wt.groundColor.copy(Mt.groundColor).multiplyScalar(Ft),nt.hemi[pt]=Wt,pt++}}vt>0&&(_e.has("OES_texture_float_linear")===!0?(nt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,nt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(nt.rectAreaLTC1=UniformsLib.LTC_HALF_1,nt.rectAreaLTC2=UniformsLib.LTC_HALF_2)),nt.ambient[0]=ct,nt.ambient[1]=ut,nt.ambient[2]=dt;const wt=nt.hash;(wt.directionalLength!==ht||wt.pointLength!==mt||wt.spotLength!==yt||wt.rectAreaLength!==vt||wt.hemiLength!==pt||wt.numDirectionalShadows!==_t||wt.numPointShadows!==xt||wt.numSpotShadows!==St||wt.numSpotMaps!==At||wt.numLightProbes!==Et)&&(nt.directional.length=ht,nt.spot.length=yt,nt.rectArea.length=vt,nt.point.length=mt,nt.hemi.length=pt,nt.directionalShadow.length=_t,nt.directionalShadowMap.length=_t,nt.pointShadow.length=xt,nt.pointShadowMap.length=xt,nt.spotShadow.length=St,nt.spotShadowMap.length=St,nt.directionalShadowMatrix.length=_t,nt.pointShadowMatrix.length=xt,nt.spotLightMatrix.length=St+At-bt,nt.spotLightMap.length=At,nt.numSpotLightShadowsWithMaps=bt,nt.numLightProbes=Et,wt.directionalLength=ht,wt.pointLength=mt,wt.spotLength=yt,wt.rectAreaLength=vt,wt.hemiLength=pt,wt.numDirectionalShadows=_t,wt.numPointShadows=xt,wt.numSpotShadows=St,wt.numSpotMaps=At,wt.numLightProbes=Et,nt.version=nextVersion++)}function at(lt,ct){let ut=0,dt=0,ht=0,mt=0,yt=0;const vt=ct.matrixWorldInverse;for(let pt=0,_t=lt.length;pt<_t;pt++){const xt=lt[pt];if(xt.isDirectionalLight){const St=nt.directional[ut];St.direction.setFromMatrixPosition(xt.matrixWorld),rt.setFromMatrixPosition(xt.target.matrixWorld),St.direction.sub(rt),St.direction.transformDirection(vt),ut++}else if(xt.isSpotLight){const St=nt.spot[ht];St.position.setFromMatrixPosition(xt.matrixWorld),St.position.applyMatrix4(vt),St.direction.setFromMatrixPosition(xt.matrixWorld),rt.setFromMatrixPosition(xt.target.matrixWorld),St.direction.sub(rt),St.direction.transformDirection(vt),ht++}else if(xt.isRectAreaLight){const St=nt.rectArea[mt];St.position.setFromMatrixPosition(xt.matrixWorld),St.position.applyMatrix4(vt),st.identity(),it.copy(xt.matrixWorld),it.premultiply(vt),st.extractRotation(it),St.halfWidth.set(xt.width*.5,0,0),St.halfHeight.set(0,xt.height*.5,0),St.halfWidth.applyMatrix4(st),St.halfHeight.applyMatrix4(st),mt++}else if(xt.isPointLight){const St=nt.point[dt];St.position.setFromMatrixPosition(xt.matrixWorld),St.position.applyMatrix4(vt),dt++}else if(xt.isHemisphereLight){const St=nt.hemi[yt];St.direction.setFromMatrixPosition(xt.matrixWorld),St.direction.transformDirection(vt),yt++}}}return{setup:ot,setupView:at,state:nt}}function WebGLRenderState(_e){const _=new WebGLLights(_e),tt=[],nt=[];function rt(ct){lt.camera=ct,tt.length=0,nt.length=0}function it(ct){tt.push(ct)}function st(ct){nt.push(ct)}function ot(){_.setup(tt)}function at(ct){_.setupView(tt,ct)}const lt={lightsArray:tt,shadowsArray:nt,camera:null,lights:_,transmissionRenderTarget:{}};return{init:rt,state:lt,setupLights:ot,setupLightsView:at,pushLight:it,pushShadow:st}}function WebGLRenderStates(_e){let _=new WeakMap;function tt(rt,it=0){const st=_.get(rt);let ot;return st===void 0?(ot=new WebGLRenderState(_e),_.set(rt,[ot])):it>=st.length?(ot=new WebGLRenderState(_e),st.push(ot)):ot=st[it],ot}function nt(){_=new WeakMap}return{get:tt,dispose:nt}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(_e,_,tt){let nt=new Frustum;const rt=new Vector2,it=new Vector2,st=new Vector4,ot=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),at=new MeshDistanceMaterial,lt={},ct=tt.maxTextureSize,ut={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},dt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),ht=dt.clone();ht.defines.HORIZONTAL_PASS=1;const mt=new BufferGeometry;mt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const yt=new Mesh(mt,dt),vt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let pt=this.type;this.render=function(bt,Et,wt){if(vt.enabled===!1||vt.autoUpdate===!1&&vt.needsUpdate===!1||bt.length===0)return;const Rt=_e.getRenderTarget(),Tt=_e.getActiveCubeFace(),Mt=_e.getActiveMipmapLevel(),Lt=_e.state;Lt.setBlending(NoBlending),Lt.buffers.color.setClear(1,1,1,1),Lt.buffers.depth.setTest(!0),Lt.setScissorTest(!1);const Ft=pt!==VSMShadowMap&&this.type===VSMShadowMap,Ht=pt===VSMShadowMap&&this.type!==VSMShadowMap;for(let Kt=0,Wt=bt.length;Kt<Wt;Kt++){const Jt=bt[Kt],Ot=Jt.shadow;if(Ot===void 0){console.warn("THREE.WebGLShadowMap:",Jt,"has no shadow.");continue}if(Ot.autoUpdate===!1&&Ot.needsUpdate===!1)continue;rt.copy(Ot.mapSize);const kt=Ot.getFrameExtents();if(rt.multiply(kt),it.copy(Ot.mapSize),(rt.x>ct||rt.y>ct)&&(rt.x>ct&&(it.x=Math.floor(ct/kt.x),rt.x=it.x*kt.x,Ot.mapSize.x=it.x),rt.y>ct&&(it.y=Math.floor(ct/kt.y),rt.y=it.y*kt.y,Ot.mapSize.y=it.y)),Ot.map===null||Ft===!0||Ht===!0){const zt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Ot.map!==null&&Ot.map.dispose(),Ot.map=new WebGLRenderTarget(rt.x,rt.y,zt),Ot.map.texture.name=Jt.name+".shadowMap",Ot.camera.updateProjectionMatrix()}_e.setRenderTarget(Ot.map),_e.clear();const Gt=Ot.getViewportCount();for(let zt=0;zt<Gt;zt++){const Vt=Ot.getViewport(zt);st.set(it.x*Vt.x,it.y*Vt.y,it.x*Vt.z,it.y*Vt.w),Lt.viewport(st),Ot.updateMatrices(Jt,zt),nt=Ot.getFrustum(),St(Et,wt,Ot.camera,Jt,this.type)}Ot.isPointLightShadow!==!0&&this.type===VSMShadowMap&&_t(Ot,wt),Ot.needsUpdate=!1}pt=this.type,vt.needsUpdate=!1,_e.setRenderTarget(Rt,Tt,Mt)};function _t(bt,Et){const wt=_.update(yt);dt.defines.VSM_SAMPLES!==bt.blurSamples&&(dt.defines.VSM_SAMPLES=bt.blurSamples,ht.defines.VSM_SAMPLES=bt.blurSamples,dt.needsUpdate=!0,ht.needsUpdate=!0),bt.mapPass===null&&(bt.mapPass=new WebGLRenderTarget(rt.x,rt.y)),dt.uniforms.shadow_pass.value=bt.map.texture,dt.uniforms.resolution.value=bt.mapSize,dt.uniforms.radius.value=bt.radius,_e.setRenderTarget(bt.mapPass),_e.clear(),_e.renderBufferDirect(Et,null,wt,dt,yt,null),ht.uniforms.shadow_pass.value=bt.mapPass.texture,ht.uniforms.resolution.value=bt.mapSize,ht.uniforms.radius.value=bt.radius,_e.setRenderTarget(bt.map),_e.clear(),_e.renderBufferDirect(Et,null,wt,ht,yt,null)}function xt(bt,Et,wt,Rt){let Tt=null;const Mt=wt.isPointLight===!0?bt.customDistanceMaterial:bt.customDepthMaterial;if(Mt!==void 0)Tt=Mt;else if(Tt=wt.isPointLight===!0?at:ot,_e.localClippingEnabled&&Et.clipShadows===!0&&Array.isArray(Et.clippingPlanes)&&Et.clippingPlanes.length!==0||Et.displacementMap&&Et.displacementScale!==0||Et.alphaMap&&Et.alphaTest>0||Et.map&&Et.alphaTest>0){const Lt=Tt.uuid,Ft=Et.uuid;let Ht=lt[Lt];Ht===void 0&&(Ht={},lt[Lt]=Ht);let Kt=Ht[Ft];Kt===void 0&&(Kt=Tt.clone(),Ht[Ft]=Kt,Et.addEventListener("dispose",At)),Tt=Kt}if(Tt.visible=Et.visible,Tt.wireframe=Et.wireframe,Rt===VSMShadowMap?Tt.side=Et.shadowSide!==null?Et.shadowSide:Et.side:Tt.side=Et.shadowSide!==null?Et.shadowSide:ut[Et.side],Tt.alphaMap=Et.alphaMap,Tt.alphaTest=Et.alphaTest,Tt.map=Et.map,Tt.clipShadows=Et.clipShadows,Tt.clippingPlanes=Et.clippingPlanes,Tt.clipIntersection=Et.clipIntersection,Tt.displacementMap=Et.displacementMap,Tt.displacementScale=Et.displacementScale,Tt.displacementBias=Et.displacementBias,Tt.wireframeLinewidth=Et.wireframeLinewidth,Tt.linewidth=Et.linewidth,wt.isPointLight===!0&&Tt.isMeshDistanceMaterial===!0){const Lt=_e.properties.get(Tt);Lt.light=wt}return Tt}function St(bt,Et,wt,Rt,Tt){if(bt.visible===!1)return;if(bt.layers.test(Et.layers)&&(bt.isMesh||bt.isLine||bt.isPoints)&&(bt.castShadow||bt.receiveShadow&&Tt===VSMShadowMap)&&(!bt.frustumCulled||nt.intersectsObject(bt))){bt.modelViewMatrix.multiplyMatrices(wt.matrixWorldInverse,bt.matrixWorld);const Ft=_.update(bt),Ht=bt.material;if(Array.isArray(Ht)){const Kt=Ft.groups;for(let Wt=0,Jt=Kt.length;Wt<Jt;Wt++){const Ot=Kt[Wt],kt=Ht[Ot.materialIndex];if(kt&&kt.visible){const Gt=xt(bt,kt,Rt,Tt);bt.onBeforeShadow(_e,bt,Et,wt,Ft,Gt,Ot),_e.renderBufferDirect(wt,null,Ft,Gt,bt,Ot),bt.onAfterShadow(_e,bt,Et,wt,Ft,Gt,Ot)}}}else if(Ht.visible){const Kt=xt(bt,Ht,Rt,Tt);bt.onBeforeShadow(_e,bt,Et,wt,Ft,Kt,null),_e.renderBufferDirect(wt,null,Ft,Kt,bt,null),bt.onAfterShadow(_e,bt,Et,wt,Ft,Kt,null)}}const Lt=bt.children;for(let Ft=0,Ht=Lt.length;Ft<Ht;Ft++)St(Lt[Ft],Et,wt,Rt,Tt)}function At(bt){bt.target.removeEventListener("dispose",At);for(const wt in lt){const Rt=lt[wt],Tt=bt.target.uuid;Tt in Rt&&(Rt[Tt].dispose(),delete Rt[Tt])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(_e){function _(){let Sn=!1;const or=new Vector4;let xn=null;const on=new Vector4(0,0,0,0);return{setMask:function(Gn){xn!==Gn&&!Sn&&(_e.colorMask(Gn,Gn,Gn,Gn),xn=Gn)},setLocked:function(Gn){Sn=Gn},setClear:function(Gn,Xn,pr,Ar,xr){xr===!0&&(Gn*=Ar,Xn*=Ar,pr*=Ar),or.set(Gn,Xn,pr,Ar),on.equals(or)===!1&&(_e.clearColor(Gn,Xn,pr,Ar),on.copy(or))},reset:function(){Sn=!1,xn=null,on.set(-1,0,0,0)}}}function tt(){let Sn=!1,or=!1,xn=null,on=null,Gn=null;return{setReversed:function(Xn){or=Xn},setTest:function(Xn){Xn?Yt(_e.DEPTH_TEST):qt(_e.DEPTH_TEST)},setMask:function(Xn){xn!==Xn&&!Sn&&(_e.depthMask(Xn),xn=Xn)},setFunc:function(Xn){if(or&&(Xn=reversedFuncs[Xn]),on!==Xn){switch(Xn){case NeverDepth:_e.depthFunc(_e.NEVER);break;case AlwaysDepth:_e.depthFunc(_e.ALWAYS);break;case LessDepth:_e.depthFunc(_e.LESS);break;case LessEqualDepth:_e.depthFunc(_e.LEQUAL);break;case EqualDepth:_e.depthFunc(_e.EQUAL);break;case GreaterEqualDepth:_e.depthFunc(_e.GEQUAL);break;case GreaterDepth:_e.depthFunc(_e.GREATER);break;case NotEqualDepth:_e.depthFunc(_e.NOTEQUAL);break;default:_e.depthFunc(_e.LEQUAL)}on=Xn}},setLocked:function(Xn){Sn=Xn},setClear:function(Xn){Gn!==Xn&&(_e.clearDepth(Xn),Gn=Xn)},reset:function(){Sn=!1,xn=null,on=null,Gn=null}}}function nt(){let Sn=!1,or=null,xn=null,on=null,Gn=null,Xn=null,pr=null,Ar=null,xr=null;return{setTest:function(un){Sn||(un?Yt(_e.STENCIL_TEST):qt(_e.STENCIL_TEST))},setMask:function(un){or!==un&&!Sn&&(_e.stencilMask(un),or=un)},setFunc:function(un,pn,Fn){(xn!==un||on!==pn||Gn!==Fn)&&(_e.stencilFunc(un,pn,Fn),xn=un,on=pn,Gn=Fn)},setOp:function(un,pn,Fn){(Xn!==un||pr!==pn||Ar!==Fn)&&(_e.stencilOp(un,pn,Fn),Xn=un,pr=pn,Ar=Fn)},setLocked:function(un){Sn=un},setClear:function(un){xr!==un&&(_e.clearStencil(un),xr=un)},reset:function(){Sn=!1,or=null,xn=null,on=null,Gn=null,Xn=null,pr=null,Ar=null,xr=null}}}const rt=new _,it=new tt,st=new nt,ot=new WeakMap,at=new WeakMap;let lt={},ct={},ut=new WeakMap,dt=[],ht=null,mt=!1,yt=null,vt=null,pt=null,_t=null,xt=null,St=null,At=null,bt=new Color$1(0,0,0),Et=0,wt=!1,Rt=null,Tt=null,Mt=null,Lt=null,Ft=null;const Ht=_e.getParameter(_e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Kt=!1,Wt=0;const Jt=_e.getParameter(_e.VERSION);Jt.indexOf("WebGL")!==-1?(Wt=parseFloat(/^WebGL (\d)/.exec(Jt)[1]),Kt=Wt>=1):Jt.indexOf("OpenGL ES")!==-1&&(Wt=parseFloat(/^OpenGL ES (\d)/.exec(Jt)[1]),Kt=Wt>=2);let Ot=null,kt={};const Gt=_e.getParameter(_e.SCISSOR_BOX),zt=_e.getParameter(_e.VIEWPORT),Vt=new Vector4().fromArray(Gt),Dt=new Vector4().fromArray(zt);function It(Sn,or,xn,on){const Gn=new Uint8Array(4),Xn=_e.createTexture();_e.bindTexture(Sn,Xn),_e.texParameteri(Sn,_e.TEXTURE_MIN_FILTER,_e.NEAREST),_e.texParameteri(Sn,_e.TEXTURE_MAG_FILTER,_e.NEAREST);for(let pr=0;pr<xn;pr++)Sn===_e.TEXTURE_3D||Sn===_e.TEXTURE_2D_ARRAY?_e.texImage3D(or,0,_e.RGBA,1,1,on,0,_e.RGBA,_e.UNSIGNED_BYTE,Gn):_e.texImage2D(or+pr,0,_e.RGBA,1,1,0,_e.RGBA,_e.UNSIGNED_BYTE,Gn);return Xn}const Ut={};Ut[_e.TEXTURE_2D]=It(_e.TEXTURE_2D,_e.TEXTURE_2D,1),Ut[_e.TEXTURE_CUBE_MAP]=It(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ut[_e.TEXTURE_2D_ARRAY]=It(_e.TEXTURE_2D_ARRAY,_e.TEXTURE_2D_ARRAY,1,1),Ut[_e.TEXTURE_3D]=It(_e.TEXTURE_3D,_e.TEXTURE_3D,1,1),rt.setClear(0,0,0,1),it.setClear(1),st.setClear(0),Yt(_e.DEPTH_TEST),it.setFunc(LessEqualDepth),Cn(!1),vn(CullFaceBack),Yt(_e.CULL_FACE),nn(NoBlending);function Yt(Sn){lt[Sn]!==!0&&(_e.enable(Sn),lt[Sn]=!0)}function qt(Sn){lt[Sn]!==!1&&(_e.disable(Sn),lt[Sn]=!1)}function rn(Sn,or){return ct[Sn]!==or?(_e.bindFramebuffer(Sn,or),ct[Sn]=or,Sn===_e.DRAW_FRAMEBUFFER&&(ct[_e.FRAMEBUFFER]=or),Sn===_e.FRAMEBUFFER&&(ct[_e.DRAW_FRAMEBUFFER]=or),!0):!1}function gn(Sn,or){let xn=dt,on=!1;if(Sn){xn=ut.get(or),xn===void 0&&(xn=[],ut.set(or,xn));const Gn=Sn.textures;if(xn.length!==Gn.length||xn[0]!==_e.COLOR_ATTACHMENT0){for(let Xn=0,pr=Gn.length;Xn<pr;Xn++)xn[Xn]=_e.COLOR_ATTACHMENT0+Xn;xn.length=Gn.length,on=!0}}else xn[0]!==_e.BACK&&(xn[0]=_e.BACK,on=!0);on&&_e.drawBuffers(xn)}function An(Sn){return ht!==Sn?(_e.useProgram(Sn),ht=Sn,!0):!1}const En={[AddEquation]:_e.FUNC_ADD,[SubtractEquation]:_e.FUNC_SUBTRACT,[ReverseSubtractEquation]:_e.FUNC_REVERSE_SUBTRACT};En[MinEquation]=_e.MIN,En[MaxEquation]=_e.MAX;const fn={[ZeroFactor]:_e.ZERO,[OneFactor]:_e.ONE,[SrcColorFactor]:_e.SRC_COLOR,[SrcAlphaFactor]:_e.SRC_ALPHA,[SrcAlphaSaturateFactor]:_e.SRC_ALPHA_SATURATE,[DstColorFactor]:_e.DST_COLOR,[DstAlphaFactor]:_e.DST_ALPHA,[OneMinusSrcColorFactor]:_e.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:_e.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:_e.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:_e.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:_e.CONSTANT_COLOR,[OneMinusConstantColorFactor]:_e.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:_e.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:_e.ONE_MINUS_CONSTANT_ALPHA};function nn(Sn,or,xn,on,Gn,Xn,pr,Ar,xr,un){if(Sn===NoBlending){mt===!0&&(qt(_e.BLEND),mt=!1);return}if(mt===!1&&(Yt(_e.BLEND),mt=!0),Sn!==CustomBlending){if(Sn!==yt||un!==wt){if((vt!==AddEquation||xt!==AddEquation)&&(_e.blendEquation(_e.FUNC_ADD),vt=AddEquation,xt=AddEquation),un)switch(Sn){case NormalBlending:_e.blendFuncSeparate(_e.ONE,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_e.blendFunc(_e.ONE,_e.ONE);break;case SubtractiveBlending:_e.blendFuncSeparate(_e.ZERO,_e.ONE_MINUS_SRC_COLOR,_e.ZERO,_e.ONE);break;case MultiplyBlending:_e.blendFuncSeparate(_e.ZERO,_e.SRC_COLOR,_e.ZERO,_e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Sn);break}else switch(Sn){case NormalBlending:_e.blendFuncSeparate(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_e.blendFunc(_e.SRC_ALPHA,_e.ONE);break;case SubtractiveBlending:_e.blendFuncSeparate(_e.ZERO,_e.ONE_MINUS_SRC_COLOR,_e.ZERO,_e.ONE);break;case MultiplyBlending:_e.blendFunc(_e.ZERO,_e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Sn);break}pt=null,_t=null,St=null,At=null,bt.set(0,0,0),Et=0,yt=Sn,wt=un}return}Gn=Gn||or,Xn=Xn||xn,pr=pr||on,(or!==vt||Gn!==xt)&&(_e.blendEquationSeparate(En[or],En[Gn]),vt=or,xt=Gn),(xn!==pt||on!==_t||Xn!==St||pr!==At)&&(_e.blendFuncSeparate(fn[xn],fn[on],fn[Xn],fn[pr]),pt=xn,_t=on,St=Xn,At=pr),(Ar.equals(bt)===!1||xr!==Et)&&(_e.blendColor(Ar.r,Ar.g,Ar.b,xr),bt.copy(Ar),Et=xr),yt=Sn,wt=!1}function Tn(Sn,or){Sn.side===DoubleSide?qt(_e.CULL_FACE):Yt(_e.CULL_FACE);let xn=Sn.side===BackSide;or&&(xn=!xn),Cn(xn),Sn.blending===NormalBlending&&Sn.transparent===!1?nn(NoBlending):nn(Sn.blending,Sn.blendEquation,Sn.blendSrc,Sn.blendDst,Sn.blendEquationAlpha,Sn.blendSrcAlpha,Sn.blendDstAlpha,Sn.blendColor,Sn.blendAlpha,Sn.premultipliedAlpha),it.setFunc(Sn.depthFunc),it.setTest(Sn.depthTest),it.setMask(Sn.depthWrite),rt.setMask(Sn.colorWrite);const on=Sn.stencilWrite;st.setTest(on),on&&(st.setMask(Sn.stencilWriteMask),st.setFunc(Sn.stencilFunc,Sn.stencilRef,Sn.stencilFuncMask),st.setOp(Sn.stencilFail,Sn.stencilZFail,Sn.stencilZPass)),Qt(Sn.polygonOffset,Sn.polygonOffsetFactor,Sn.polygonOffsetUnits),Sn.alphaToCoverage===!0?Yt(_e.SAMPLE_ALPHA_TO_COVERAGE):qt(_e.SAMPLE_ALPHA_TO_COVERAGE)}function Cn(Sn){Rt!==Sn&&(Sn?_e.frontFace(_e.CW):_e.frontFace(_e.CCW),Rt=Sn)}function vn(Sn){Sn!==CullFaceNone?(Yt(_e.CULL_FACE),Sn!==Tt&&(Sn===CullFaceBack?_e.cullFace(_e.BACK):Sn===CullFaceFront?_e.cullFace(_e.FRONT):_e.cullFace(_e.FRONT_AND_BACK))):qt(_e.CULL_FACE),Tt=Sn}function _n(Sn){Sn!==Mt&&(Kt&&_e.lineWidth(Sn),Mt=Sn)}function Qt(Sn,or,xn){Sn?(Yt(_e.POLYGON_OFFSET_FILL),(Lt!==or||Ft!==xn)&&(_e.polygonOffset(or,xn),Lt=or,Ft=xn)):qt(_e.POLYGON_OFFSET_FILL)}function sn(Sn){Sn?Yt(_e.SCISSOR_TEST):qt(_e.SCISSOR_TEST)}function jt(Sn){Sn===void 0&&(Sn=_e.TEXTURE0+Ht-1),Ot!==Sn&&(_e.activeTexture(Sn),Ot=Sn)}function Bt(Sn,or,xn){xn===void 0&&(Ot===null?xn=_e.TEXTURE0+Ht-1:xn=Ot);let on=kt[xn];on===void 0&&(on={type:void 0,texture:void 0},kt[xn]=on),(on.type!==Sn||on.texture!==or)&&(Ot!==xn&&(_e.activeTexture(xn),Ot=xn),_e.bindTexture(Sn,or||Ut[Sn]),on.type=Sn,on.texture=or)}function hn(){const Sn=kt[Ot];Sn!==void 0&&Sn.type!==void 0&&(_e.bindTexture(Sn.type,null),Sn.type=void 0,Sn.texture=void 0)}function cn(){try{_e.compressedTexImage2D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function mn(){try{_e.compressedTexImage3D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function an(){try{_e.texSubImage2D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Hn(){try{_e.texSubImage3D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Pn(){try{_e.compressedTexSubImage2D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function er(){try{_e.compressedTexSubImage3D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function cr(){try{_e.texStorage2D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function ir(){try{_e.texStorage3D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Jn(){try{_e.texImage2D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function fr(){try{_e.texImage3D.apply(_e,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function dr(Sn){Vt.equals(Sn)===!1&&(_e.scissor(Sn.x,Sn.y,Sn.z,Sn.w),Vt.copy(Sn))}function lr(Sn){Dt.equals(Sn)===!1&&(_e.viewport(Sn.x,Sn.y,Sn.z,Sn.w),Dt.copy(Sn))}function Nn(Sn,or){let xn=at.get(or);xn===void 0&&(xn=new WeakMap,at.set(or,xn));let on=xn.get(Sn);on===void 0&&(on=_e.getUniformBlockIndex(or,Sn.name),xn.set(Sn,on))}function bn(Sn,or){const on=at.get(or).get(Sn);ot.get(or)!==on&&(_e.uniformBlockBinding(or,on,Sn.__bindingPointIndex),ot.set(or,on))}function Rn(){_e.disable(_e.BLEND),_e.disable(_e.CULL_FACE),_e.disable(_e.DEPTH_TEST),_e.disable(_e.POLYGON_OFFSET_FILL),_e.disable(_e.SCISSOR_TEST),_e.disable(_e.STENCIL_TEST),_e.disable(_e.SAMPLE_ALPHA_TO_COVERAGE),_e.blendEquation(_e.FUNC_ADD),_e.blendFunc(_e.ONE,_e.ZERO),_e.blendFuncSeparate(_e.ONE,_e.ZERO,_e.ONE,_e.ZERO),_e.blendColor(0,0,0,0),_e.colorMask(!0,!0,!0,!0),_e.clearColor(0,0,0,0),_e.depthMask(!0),_e.depthFunc(_e.LESS),_e.clearDepth(1),_e.stencilMask(4294967295),_e.stencilFunc(_e.ALWAYS,0,4294967295),_e.stencilOp(_e.KEEP,_e.KEEP,_e.KEEP),_e.clearStencil(0),_e.cullFace(_e.BACK),_e.frontFace(_e.CCW),_e.polygonOffset(0,0),_e.activeTexture(_e.TEXTURE0),_e.bindFramebuffer(_e.FRAMEBUFFER,null),_e.bindFramebuffer(_e.DRAW_FRAMEBUFFER,null),_e.bindFramebuffer(_e.READ_FRAMEBUFFER,null),_e.useProgram(null),_e.lineWidth(1),_e.scissor(0,0,_e.canvas.width,_e.canvas.height),_e.viewport(0,0,_e.canvas.width,_e.canvas.height),lt={},Ot=null,kt={},ct={},ut=new WeakMap,dt=[],ht=null,mt=!1,yt=null,vt=null,pt=null,_t=null,xt=null,St=null,At=null,bt=new Color$1(0,0,0),Et=0,wt=!1,Rt=null,Tt=null,Mt=null,Lt=null,Ft=null,Vt.set(0,0,_e.canvas.width,_e.canvas.height),Dt.set(0,0,_e.canvas.width,_e.canvas.height),rt.reset(),it.reset(),st.reset()}return{buffers:{color:rt,depth:it,stencil:st},enable:Yt,disable:qt,bindFramebuffer:rn,drawBuffers:gn,useProgram:An,setBlending:nn,setMaterial:Tn,setFlipSided:Cn,setCullFace:vn,setLineWidth:_n,setPolygonOffset:Qt,setScissorTest:sn,activeTexture:jt,bindTexture:Bt,unbindTexture:hn,compressedTexImage2D:cn,compressedTexImage3D:mn,texImage2D:Jn,texImage3D:fr,updateUBOMapping:Nn,uniformBlockBinding:bn,texStorage2D:cr,texStorage3D:ir,texSubImage2D:an,texSubImage3D:Hn,compressedTexSubImage2D:Pn,compressedTexSubImage3D:er,scissor:dr,viewport:lr,reset:Rn}}function contain(_e,_){const tt=_e.image&&_e.image.width?_e.image.width/_e.image.height:1;return tt>_?(_e.repeat.x=1,_e.repeat.y=tt/_,_e.offset.x=0,_e.offset.y=(1-_e.repeat.y)/2):(_e.repeat.x=_/tt,_e.repeat.y=1,_e.offset.x=(1-_e.repeat.x)/2,_e.offset.y=0),_e}function cover(_e,_){const tt=_e.image&&_e.image.width?_e.image.width/_e.image.height:1;return tt>_?(_e.repeat.x=_/tt,_e.repeat.y=1,_e.offset.x=(1-_e.repeat.x)/2,_e.offset.y=0):(_e.repeat.x=1,_e.repeat.y=tt/_,_e.offset.x=0,_e.offset.y=(1-_e.repeat.y)/2),_e}function fill(_e){return _e.repeat.x=1,_e.repeat.y=1,_e.offset.x=0,_e.offset.y=0,_e}function getByteLength(_e,_,tt,nt){const rt=getTextureTypeByteLength(nt);switch(tt){case AlphaFormat:return _e*_;case LuminanceFormat:return _e*_;case LuminanceAlphaFormat:return _e*_*2;case RedFormat:return _e*_/rt.components*rt.byteLength;case RedIntegerFormat:return _e*_/rt.components*rt.byteLength;case RGFormat:return _e*_*2/rt.components*rt.byteLength;case RGIntegerFormat:return _e*_*2/rt.components*rt.byteLength;case RGBFormat:return _e*_*3/rt.components*rt.byteLength;case RGBAFormat:return _e*_*4/rt.components*rt.byteLength;case RGBAIntegerFormat:return _e*_*4/rt.components*rt.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((_e+3)/4)*Math.floor((_+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((_e+3)/4)*Math.floor((_+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(_e,16)*Math.max(_,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(_e,8)*Math.max(_,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((_e+3)/4)*Math.floor((_+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((_e+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((_e+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((_e+4)/5)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((_e+4)/5)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((_e+5)/6)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((_e+5)/6)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((_e+7)/8)*Math.floor((_+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((_e+7)/8)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((_e+7)/8)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((_e+9)/10)*Math.floor((_+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((_e+9)/10)*Math.floor((_+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((_e+9)/10)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((_e+9)/10)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((_e+11)/12)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((_e+11)/12)*Math.floor((_+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(_e/4)*Math.ceil(_/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(_e/4)*Math.ceil(_/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(_e/4)*Math.ceil(_/4)*16}throw new Error(`Unable to determine texture byte length for ${tt} format.`)}function getTextureTypeByteLength(_e){switch(_e){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${_e}.`)}const TextureUtils={contain,cover,fill,getByteLength};function WebGLTextures(_e,_,tt,nt,rt,it,st){const ot=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,at=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),lt=new Vector2,ct=new WeakMap;let ut;const dt=new WeakMap;let ht=!1;try{ht=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function mt(jt,Bt){return ht?new OffscreenCanvas(jt,Bt):createElementNS("canvas")}function yt(jt,Bt,hn){let cn=1;const mn=sn(jt);if((mn.width>hn||mn.height>hn)&&(cn=hn/Math.max(mn.width,mn.height)),cn<1)if(typeof HTMLImageElement<"u"&&jt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&jt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&jt instanceof ImageBitmap||typeof VideoFrame<"u"&&jt instanceof VideoFrame){const an=Math.floor(cn*mn.width),Hn=Math.floor(cn*mn.height);ut===void 0&&(ut=mt(an,Hn));const Pn=Bt?mt(an,Hn):ut;return Pn.width=an,Pn.height=Hn,Pn.getContext("2d").drawImage(jt,0,0,an,Hn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+mn.width+"x"+mn.height+") to ("+an+"x"+Hn+")."),Pn}else return"data"in jt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+mn.width+"x"+mn.height+")."),jt;return jt}function vt(jt){return jt.generateMipmaps&&jt.minFilter!==NearestFilter&&jt.minFilter!==LinearFilter}function pt(jt){_e.generateMipmap(jt)}function _t(jt,Bt,hn,cn,mn=!1){if(jt!==null){if(_e[jt]!==void 0)return _e[jt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+jt+"'")}let an=Bt;if(Bt===_e.RED&&(hn===_e.FLOAT&&(an=_e.R32F),hn===_e.HALF_FLOAT&&(an=_e.R16F),hn===_e.UNSIGNED_BYTE&&(an=_e.R8)),Bt===_e.RED_INTEGER&&(hn===_e.UNSIGNED_BYTE&&(an=_e.R8UI),hn===_e.UNSIGNED_SHORT&&(an=_e.R16UI),hn===_e.UNSIGNED_INT&&(an=_e.R32UI),hn===_e.BYTE&&(an=_e.R8I),hn===_e.SHORT&&(an=_e.R16I),hn===_e.INT&&(an=_e.R32I)),Bt===_e.RG&&(hn===_e.FLOAT&&(an=_e.RG32F),hn===_e.HALF_FLOAT&&(an=_e.RG16F),hn===_e.UNSIGNED_BYTE&&(an=_e.RG8)),Bt===_e.RG_INTEGER&&(hn===_e.UNSIGNED_BYTE&&(an=_e.RG8UI),hn===_e.UNSIGNED_SHORT&&(an=_e.RG16UI),hn===_e.UNSIGNED_INT&&(an=_e.RG32UI),hn===_e.BYTE&&(an=_e.RG8I),hn===_e.SHORT&&(an=_e.RG16I),hn===_e.INT&&(an=_e.RG32I)),Bt===_e.RGB_INTEGER&&(hn===_e.UNSIGNED_BYTE&&(an=_e.RGB8UI),hn===_e.UNSIGNED_SHORT&&(an=_e.RGB16UI),hn===_e.UNSIGNED_INT&&(an=_e.RGB32UI),hn===_e.BYTE&&(an=_e.RGB8I),hn===_e.SHORT&&(an=_e.RGB16I),hn===_e.INT&&(an=_e.RGB32I)),Bt===_e.RGBA_INTEGER&&(hn===_e.UNSIGNED_BYTE&&(an=_e.RGBA8UI),hn===_e.UNSIGNED_SHORT&&(an=_e.RGBA16UI),hn===_e.UNSIGNED_INT&&(an=_e.RGBA32UI),hn===_e.BYTE&&(an=_e.RGBA8I),hn===_e.SHORT&&(an=_e.RGBA16I),hn===_e.INT&&(an=_e.RGBA32I)),Bt===_e.RGB&&hn===_e.UNSIGNED_INT_5_9_9_9_REV&&(an=_e.RGB9_E5),Bt===_e.RGBA){const Hn=mn?LinearTransfer:ColorManagement.getTransfer(cn);hn===_e.FLOAT&&(an=_e.RGBA32F),hn===_e.HALF_FLOAT&&(an=_e.RGBA16F),hn===_e.UNSIGNED_BYTE&&(an=Hn===SRGBTransfer?_e.SRGB8_ALPHA8:_e.RGBA8),hn===_e.UNSIGNED_SHORT_4_4_4_4&&(an=_e.RGBA4),hn===_e.UNSIGNED_SHORT_5_5_5_1&&(an=_e.RGB5_A1)}return(an===_e.R16F||an===_e.R32F||an===_e.RG16F||an===_e.RG32F||an===_e.RGBA16F||an===_e.RGBA32F)&&_.get("EXT_color_buffer_float"),an}function xt(jt,Bt){let hn;return jt?Bt===null||Bt===UnsignedIntType||Bt===UnsignedInt248Type?hn=_e.DEPTH24_STENCIL8:Bt===FloatType?hn=_e.DEPTH32F_STENCIL8:Bt===UnsignedShortType&&(hn=_e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Bt===null||Bt===UnsignedIntType||Bt===UnsignedInt248Type?hn=_e.DEPTH_COMPONENT24:Bt===FloatType?hn=_e.DEPTH_COMPONENT32F:Bt===UnsignedShortType&&(hn=_e.DEPTH_COMPONENT16),hn}function St(jt,Bt){return vt(jt)===!0||jt.isFramebufferTexture&&jt.minFilter!==NearestFilter&&jt.minFilter!==LinearFilter?Math.log2(Math.max(Bt.width,Bt.height))+1:jt.mipmaps!==void 0&&jt.mipmaps.length>0?jt.mipmaps.length:jt.isCompressedTexture&&Array.isArray(jt.image)?Bt.mipmaps.length:1}function At(jt){const Bt=jt.target;Bt.removeEventListener("dispose",At),Et(Bt),Bt.isVideoTexture&&ct.delete(Bt)}function bt(jt){const Bt=jt.target;Bt.removeEventListener("dispose",bt),Rt(Bt)}function Et(jt){const Bt=nt.get(jt);if(Bt.__webglInit===void 0)return;const hn=jt.source,cn=dt.get(hn);if(cn){const mn=cn[Bt.__cacheKey];mn.usedTimes--,mn.usedTimes===0&&wt(jt),Object.keys(cn).length===0&&dt.delete(hn)}nt.remove(jt)}function wt(jt){const Bt=nt.get(jt);_e.deleteTexture(Bt.__webglTexture);const hn=jt.source,cn=dt.get(hn);delete cn[Bt.__cacheKey],st.memory.textures--}function Rt(jt){const Bt=nt.get(jt);if(jt.depthTexture&&jt.depthTexture.dispose(),jt.isWebGLCubeRenderTarget)for(let cn=0;cn<6;cn++){if(Array.isArray(Bt.__webglFramebuffer[cn]))for(let mn=0;mn<Bt.__webglFramebuffer[cn].length;mn++)_e.deleteFramebuffer(Bt.__webglFramebuffer[cn][mn]);else _e.deleteFramebuffer(Bt.__webglFramebuffer[cn]);Bt.__webglDepthbuffer&&_e.deleteRenderbuffer(Bt.__webglDepthbuffer[cn])}else{if(Array.isArray(Bt.__webglFramebuffer))for(let cn=0;cn<Bt.__webglFramebuffer.length;cn++)_e.deleteFramebuffer(Bt.__webglFramebuffer[cn]);else _e.deleteFramebuffer(Bt.__webglFramebuffer);if(Bt.__webglDepthbuffer&&_e.deleteRenderbuffer(Bt.__webglDepthbuffer),Bt.__webglMultisampledFramebuffer&&_e.deleteFramebuffer(Bt.__webglMultisampledFramebuffer),Bt.__webglColorRenderbuffer)for(let cn=0;cn<Bt.__webglColorRenderbuffer.length;cn++)Bt.__webglColorRenderbuffer[cn]&&_e.deleteRenderbuffer(Bt.__webglColorRenderbuffer[cn]);Bt.__webglDepthRenderbuffer&&_e.deleteRenderbuffer(Bt.__webglDepthRenderbuffer)}const hn=jt.textures;for(let cn=0,mn=hn.length;cn<mn;cn++){const an=nt.get(hn[cn]);an.__webglTexture&&(_e.deleteTexture(an.__webglTexture),st.memory.textures--),nt.remove(hn[cn])}nt.remove(jt)}let Tt=0;function Mt(){Tt=0}function Lt(){const jt=Tt;return jt>=rt.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+jt+" texture units while this GPU supports only "+rt.maxTextures),Tt+=1,jt}function Ft(jt){const Bt=[];return Bt.push(jt.wrapS),Bt.push(jt.wrapT),Bt.push(jt.wrapR||0),Bt.push(jt.magFilter),Bt.push(jt.minFilter),Bt.push(jt.anisotropy),Bt.push(jt.internalFormat),Bt.push(jt.format),Bt.push(jt.type),Bt.push(jt.generateMipmaps),Bt.push(jt.premultiplyAlpha),Bt.push(jt.flipY),Bt.push(jt.unpackAlignment),Bt.push(jt.colorSpace),Bt.join()}function Ht(jt,Bt){const hn=nt.get(jt);if(jt.isVideoTexture&&_n(jt),jt.isRenderTargetTexture===!1&&jt.version>0&&hn.__version!==jt.version){const cn=jt.image;if(cn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(cn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Dt(hn,jt,Bt);return}}tt.bindTexture(_e.TEXTURE_2D,hn.__webglTexture,_e.TEXTURE0+Bt)}function Kt(jt,Bt){const hn=nt.get(jt);if(jt.version>0&&hn.__version!==jt.version){Dt(hn,jt,Bt);return}tt.bindTexture(_e.TEXTURE_2D_ARRAY,hn.__webglTexture,_e.TEXTURE0+Bt)}function Wt(jt,Bt){const hn=nt.get(jt);if(jt.version>0&&hn.__version!==jt.version){Dt(hn,jt,Bt);return}tt.bindTexture(_e.TEXTURE_3D,hn.__webglTexture,_e.TEXTURE0+Bt)}function Jt(jt,Bt){const hn=nt.get(jt);if(jt.version>0&&hn.__version!==jt.version){It(hn,jt,Bt);return}tt.bindTexture(_e.TEXTURE_CUBE_MAP,hn.__webglTexture,_e.TEXTURE0+Bt)}const Ot={[RepeatWrapping]:_e.REPEAT,[ClampToEdgeWrapping]:_e.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:_e.MIRRORED_REPEAT},kt={[NearestFilter]:_e.NEAREST,[NearestMipmapNearestFilter]:_e.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:_e.NEAREST_MIPMAP_LINEAR,[LinearFilter]:_e.LINEAR,[LinearMipmapNearestFilter]:_e.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:_e.LINEAR_MIPMAP_LINEAR},Gt={[NeverCompare]:_e.NEVER,[AlwaysCompare]:_e.ALWAYS,[LessCompare]:_e.LESS,[LessEqualCompare]:_e.LEQUAL,[EqualCompare]:_e.EQUAL,[GreaterEqualCompare]:_e.GEQUAL,[GreaterCompare]:_e.GREATER,[NotEqualCompare]:_e.NOTEQUAL};function zt(jt,Bt){if(Bt.type===FloatType&&_.has("OES_texture_float_linear")===!1&&(Bt.magFilter===LinearFilter||Bt.magFilter===LinearMipmapNearestFilter||Bt.magFilter===NearestMipmapLinearFilter||Bt.magFilter===LinearMipmapLinearFilter||Bt.minFilter===LinearFilter||Bt.minFilter===LinearMipmapNearestFilter||Bt.minFilter===NearestMipmapLinearFilter||Bt.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),_e.texParameteri(jt,_e.TEXTURE_WRAP_S,Ot[Bt.wrapS]),_e.texParameteri(jt,_e.TEXTURE_WRAP_T,Ot[Bt.wrapT]),(jt===_e.TEXTURE_3D||jt===_e.TEXTURE_2D_ARRAY)&&_e.texParameteri(jt,_e.TEXTURE_WRAP_R,Ot[Bt.wrapR]),_e.texParameteri(jt,_e.TEXTURE_MAG_FILTER,kt[Bt.magFilter]),_e.texParameteri(jt,_e.TEXTURE_MIN_FILTER,kt[Bt.minFilter]),Bt.compareFunction&&(_e.texParameteri(jt,_e.TEXTURE_COMPARE_MODE,_e.COMPARE_REF_TO_TEXTURE),_e.texParameteri(jt,_e.TEXTURE_COMPARE_FUNC,Gt[Bt.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){if(Bt.magFilter===NearestFilter||Bt.minFilter!==NearestMipmapLinearFilter&&Bt.minFilter!==LinearMipmapLinearFilter||Bt.type===FloatType&&_.has("OES_texture_float_linear")===!1)return;if(Bt.anisotropy>1||nt.get(Bt).__currentAnisotropy){const hn=_.get("EXT_texture_filter_anisotropic");_e.texParameterf(jt,hn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Bt.anisotropy,rt.getMaxAnisotropy())),nt.get(Bt).__currentAnisotropy=Bt.anisotropy}}}function Vt(jt,Bt){let hn=!1;jt.__webglInit===void 0&&(jt.__webglInit=!0,Bt.addEventListener("dispose",At));const cn=Bt.source;let mn=dt.get(cn);mn===void 0&&(mn={},dt.set(cn,mn));const an=Ft(Bt);if(an!==jt.__cacheKey){mn[an]===void 0&&(mn[an]={texture:_e.createTexture(),usedTimes:0},st.memory.textures++,hn=!0),mn[an].usedTimes++;const Hn=mn[jt.__cacheKey];Hn!==void 0&&(mn[jt.__cacheKey].usedTimes--,Hn.usedTimes===0&&wt(Bt)),jt.__cacheKey=an,jt.__webglTexture=mn[an].texture}return hn}function Dt(jt,Bt,hn){let cn=_e.TEXTURE_2D;(Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(cn=_e.TEXTURE_2D_ARRAY),Bt.isData3DTexture&&(cn=_e.TEXTURE_3D);const mn=Vt(jt,Bt),an=Bt.source;tt.bindTexture(cn,jt.__webglTexture,_e.TEXTURE0+hn);const Hn=nt.get(an);if(an.version!==Hn.__version||mn===!0){tt.activeTexture(_e.TEXTURE0+hn);const Pn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),er=Bt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Bt.colorSpace),cr=Bt.colorSpace===NoColorSpace||Pn===er?_e.NONE:_e.BROWSER_DEFAULT_WEBGL;_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,Bt.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Bt.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,Bt.unpackAlignment),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,cr);let ir=yt(Bt.image,!1,rt.maxTextureSize);ir=Qt(Bt,ir);const Jn=it.convert(Bt.format,Bt.colorSpace),fr=it.convert(Bt.type);let dr=_t(Bt.internalFormat,Jn,fr,Bt.colorSpace,Bt.isVideoTexture);zt(cn,Bt);let lr;const Nn=Bt.mipmaps,bn=Bt.isVideoTexture!==!0,Rn=Hn.__version===void 0||mn===!0,Sn=an.dataReady,or=St(Bt,ir);if(Bt.isDepthTexture)dr=xt(Bt.format===DepthStencilFormat,Bt.type),Rn&&(bn?tt.texStorage2D(_e.TEXTURE_2D,1,dr,ir.width,ir.height):tt.texImage2D(_e.TEXTURE_2D,0,dr,ir.width,ir.height,0,Jn,fr,null));else if(Bt.isDataTexture)if(Nn.length>0){bn&&Rn&&tt.texStorage2D(_e.TEXTURE_2D,or,dr,Nn[0].width,Nn[0].height);for(let xn=0,on=Nn.length;xn<on;xn++)lr=Nn[xn],bn?Sn&&tt.texSubImage2D(_e.TEXTURE_2D,xn,0,0,lr.width,lr.height,Jn,fr,lr.data):tt.texImage2D(_e.TEXTURE_2D,xn,dr,lr.width,lr.height,0,Jn,fr,lr.data);Bt.generateMipmaps=!1}else bn?(Rn&&tt.texStorage2D(_e.TEXTURE_2D,or,dr,ir.width,ir.height),Sn&&tt.texSubImage2D(_e.TEXTURE_2D,0,0,0,ir.width,ir.height,Jn,fr,ir.data)):tt.texImage2D(_e.TEXTURE_2D,0,dr,ir.width,ir.height,0,Jn,fr,ir.data);else if(Bt.isCompressedTexture)if(Bt.isCompressedArrayTexture){bn&&Rn&&tt.texStorage3D(_e.TEXTURE_2D_ARRAY,or,dr,Nn[0].width,Nn[0].height,ir.depth);for(let xn=0,on=Nn.length;xn<on;xn++)if(lr=Nn[xn],Bt.format!==RGBAFormat)if(Jn!==null)if(bn){if(Sn)if(Bt.layerUpdates.size>0){const Gn=getByteLength(lr.width,lr.height,Bt.format,Bt.type);for(const Xn of Bt.layerUpdates){const pr=lr.data.subarray(Xn*Gn/lr.data.BYTES_PER_ELEMENT,(Xn+1)*Gn/lr.data.BYTES_PER_ELEMENT);tt.compressedTexSubImage3D(_e.TEXTURE_2D_ARRAY,xn,0,0,Xn,lr.width,lr.height,1,Jn,pr,0,0)}Bt.clearLayerUpdates()}else tt.compressedTexSubImage3D(_e.TEXTURE_2D_ARRAY,xn,0,0,0,lr.width,lr.height,ir.depth,Jn,lr.data,0,0)}else tt.compressedTexImage3D(_e.TEXTURE_2D_ARRAY,xn,dr,lr.width,lr.height,ir.depth,0,lr.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else bn?Sn&&tt.texSubImage3D(_e.TEXTURE_2D_ARRAY,xn,0,0,0,lr.width,lr.height,ir.depth,Jn,fr,lr.data):tt.texImage3D(_e.TEXTURE_2D_ARRAY,xn,dr,lr.width,lr.height,ir.depth,0,Jn,fr,lr.data)}else{bn&&Rn&&tt.texStorage2D(_e.TEXTURE_2D,or,dr,Nn[0].width,Nn[0].height);for(let xn=0,on=Nn.length;xn<on;xn++)lr=Nn[xn],Bt.format!==RGBAFormat?Jn!==null?bn?Sn&&tt.compressedTexSubImage2D(_e.TEXTURE_2D,xn,0,0,lr.width,lr.height,Jn,lr.data):tt.compressedTexImage2D(_e.TEXTURE_2D,xn,dr,lr.width,lr.height,0,lr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):bn?Sn&&tt.texSubImage2D(_e.TEXTURE_2D,xn,0,0,lr.width,lr.height,Jn,fr,lr.data):tt.texImage2D(_e.TEXTURE_2D,xn,dr,lr.width,lr.height,0,Jn,fr,lr.data)}else if(Bt.isDataArrayTexture)if(bn){if(Rn&&tt.texStorage3D(_e.TEXTURE_2D_ARRAY,or,dr,ir.width,ir.height,ir.depth),Sn)if(Bt.layerUpdates.size>0){const xn=getByteLength(ir.width,ir.height,Bt.format,Bt.type);for(const on of Bt.layerUpdates){const Gn=ir.data.subarray(on*xn/ir.data.BYTES_PER_ELEMENT,(on+1)*xn/ir.data.BYTES_PER_ELEMENT);tt.texSubImage3D(_e.TEXTURE_2D_ARRAY,0,0,0,on,ir.width,ir.height,1,Jn,fr,Gn)}Bt.clearLayerUpdates()}else tt.texSubImage3D(_e.TEXTURE_2D_ARRAY,0,0,0,0,ir.width,ir.height,ir.depth,Jn,fr,ir.data)}else tt.texImage3D(_e.TEXTURE_2D_ARRAY,0,dr,ir.width,ir.height,ir.depth,0,Jn,fr,ir.data);else if(Bt.isData3DTexture)bn?(Rn&&tt.texStorage3D(_e.TEXTURE_3D,or,dr,ir.width,ir.height,ir.depth),Sn&&tt.texSubImage3D(_e.TEXTURE_3D,0,0,0,0,ir.width,ir.height,ir.depth,Jn,fr,ir.data)):tt.texImage3D(_e.TEXTURE_3D,0,dr,ir.width,ir.height,ir.depth,0,Jn,fr,ir.data);else if(Bt.isFramebufferTexture){if(Rn)if(bn)tt.texStorage2D(_e.TEXTURE_2D,or,dr,ir.width,ir.height);else{let xn=ir.width,on=ir.height;for(let Gn=0;Gn<or;Gn++)tt.texImage2D(_e.TEXTURE_2D,Gn,dr,xn,on,0,Jn,fr,null),xn>>=1,on>>=1}}else if(Nn.length>0){if(bn&&Rn){const xn=sn(Nn[0]);tt.texStorage2D(_e.TEXTURE_2D,or,dr,xn.width,xn.height)}for(let xn=0,on=Nn.length;xn<on;xn++)lr=Nn[xn],bn?Sn&&tt.texSubImage2D(_e.TEXTURE_2D,xn,0,0,Jn,fr,lr):tt.texImage2D(_e.TEXTURE_2D,xn,dr,Jn,fr,lr);Bt.generateMipmaps=!1}else if(bn){if(Rn){const xn=sn(ir);tt.texStorage2D(_e.TEXTURE_2D,or,dr,xn.width,xn.height)}Sn&&tt.texSubImage2D(_e.TEXTURE_2D,0,0,0,Jn,fr,ir)}else tt.texImage2D(_e.TEXTURE_2D,0,dr,Jn,fr,ir);vt(Bt)&&pt(cn),Hn.__version=an.version,Bt.onUpdate&&Bt.onUpdate(Bt)}jt.__version=Bt.version}function It(jt,Bt,hn){if(Bt.image.length!==6)return;const cn=Vt(jt,Bt),mn=Bt.source;tt.bindTexture(_e.TEXTURE_CUBE_MAP,jt.__webglTexture,_e.TEXTURE0+hn);const an=nt.get(mn);if(mn.version!==an.__version||cn===!0){tt.activeTexture(_e.TEXTURE0+hn);const Hn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Pn=Bt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Bt.colorSpace),er=Bt.colorSpace===NoColorSpace||Hn===Pn?_e.NONE:_e.BROWSER_DEFAULT_WEBGL;_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,Bt.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Bt.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,Bt.unpackAlignment),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,er);const cr=Bt.isCompressedTexture||Bt.image[0].isCompressedTexture,ir=Bt.image[0]&&Bt.image[0].isDataTexture,Jn=[];for(let on=0;on<6;on++)!cr&&!ir?Jn[on]=yt(Bt.image[on],!0,rt.maxCubemapSize):Jn[on]=ir?Bt.image[on].image:Bt.image[on],Jn[on]=Qt(Bt,Jn[on]);const fr=Jn[0],dr=it.convert(Bt.format,Bt.colorSpace),lr=it.convert(Bt.type),Nn=_t(Bt.internalFormat,dr,lr,Bt.colorSpace),bn=Bt.isVideoTexture!==!0,Rn=an.__version===void 0||cn===!0,Sn=mn.dataReady;let or=St(Bt,fr);zt(_e.TEXTURE_CUBE_MAP,Bt);let xn;if(cr){bn&&Rn&&tt.texStorage2D(_e.TEXTURE_CUBE_MAP,or,Nn,fr.width,fr.height);for(let on=0;on<6;on++){xn=Jn[on].mipmaps;for(let Gn=0;Gn<xn.length;Gn++){const Xn=xn[Gn];Bt.format!==RGBAFormat?dr!==null?bn?Sn&&tt.compressedTexSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn,0,0,Xn.width,Xn.height,dr,Xn.data):tt.compressedTexImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn,Nn,Xn.width,Xn.height,0,Xn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):bn?Sn&&tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn,0,0,Xn.width,Xn.height,dr,lr,Xn.data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn,Nn,Xn.width,Xn.height,0,dr,lr,Xn.data)}}}else{if(xn=Bt.mipmaps,bn&&Rn){xn.length>0&&or++;const on=sn(Jn[0]);tt.texStorage2D(_e.TEXTURE_CUBE_MAP,or,Nn,on.width,on.height)}for(let on=0;on<6;on++)if(ir){bn?Sn&&tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,0,0,0,Jn[on].width,Jn[on].height,dr,lr,Jn[on].data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,0,Nn,Jn[on].width,Jn[on].height,0,dr,lr,Jn[on].data);for(let Gn=0;Gn<xn.length;Gn++){const pr=xn[Gn].image[on].image;bn?Sn&&tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn+1,0,0,pr.width,pr.height,dr,lr,pr.data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn+1,Nn,pr.width,pr.height,0,dr,lr,pr.data)}}else{bn?Sn&&tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,0,0,0,dr,lr,Jn[on]):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,0,Nn,dr,lr,Jn[on]);for(let Gn=0;Gn<xn.length;Gn++){const Xn=xn[Gn];bn?Sn&&tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn+1,0,0,dr,lr,Xn.image[on]):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+on,Gn+1,Nn,dr,lr,Xn.image[on])}}}vt(Bt)&&pt(_e.TEXTURE_CUBE_MAP),an.__version=mn.version,Bt.onUpdate&&Bt.onUpdate(Bt)}jt.__version=Bt.version}function Ut(jt,Bt,hn,cn,mn,an){const Hn=it.convert(hn.format,hn.colorSpace),Pn=it.convert(hn.type),er=_t(hn.internalFormat,Hn,Pn,hn.colorSpace);if(!nt.get(Bt).__hasExternalTextures){const ir=Math.max(1,Bt.width>>an),Jn=Math.max(1,Bt.height>>an);mn===_e.TEXTURE_3D||mn===_e.TEXTURE_2D_ARRAY?tt.texImage3D(mn,an,er,ir,Jn,Bt.depth,0,Hn,Pn,null):tt.texImage2D(mn,an,er,ir,Jn,0,Hn,Pn,null)}tt.bindFramebuffer(_e.FRAMEBUFFER,jt),vn(Bt)?ot.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,cn,mn,nt.get(hn).__webglTexture,0,Cn(Bt)):(mn===_e.TEXTURE_2D||mn>=_e.TEXTURE_CUBE_MAP_POSITIVE_X&&mn<=_e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&_e.framebufferTexture2D(_e.FRAMEBUFFER,cn,mn,nt.get(hn).__webglTexture,an),tt.bindFramebuffer(_e.FRAMEBUFFER,null)}function Yt(jt,Bt,hn){if(_e.bindRenderbuffer(_e.RENDERBUFFER,jt),Bt.depthBuffer){const cn=Bt.depthTexture,mn=cn&&cn.isDepthTexture?cn.type:null,an=xt(Bt.stencilBuffer,mn),Hn=Bt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT,Pn=Cn(Bt);vn(Bt)?ot.renderbufferStorageMultisampleEXT(_e.RENDERBUFFER,Pn,an,Bt.width,Bt.height):hn?_e.renderbufferStorageMultisample(_e.RENDERBUFFER,Pn,an,Bt.width,Bt.height):_e.renderbufferStorage(_e.RENDERBUFFER,an,Bt.width,Bt.height),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,Hn,_e.RENDERBUFFER,jt)}else{const cn=Bt.textures;for(let mn=0;mn<cn.length;mn++){const an=cn[mn],Hn=it.convert(an.format,an.colorSpace),Pn=it.convert(an.type),er=_t(an.internalFormat,Hn,Pn,an.colorSpace),cr=Cn(Bt);hn&&vn(Bt)===!1?_e.renderbufferStorageMultisample(_e.RENDERBUFFER,cr,er,Bt.width,Bt.height):vn(Bt)?ot.renderbufferStorageMultisampleEXT(_e.RENDERBUFFER,cr,er,Bt.width,Bt.height):_e.renderbufferStorage(_e.RENDERBUFFER,er,Bt.width,Bt.height)}}_e.bindRenderbuffer(_e.RENDERBUFFER,null)}function qt(jt,Bt){if(Bt&&Bt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(tt.bindFramebuffer(_e.FRAMEBUFFER,jt),!(Bt.depthTexture&&Bt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!nt.get(Bt.depthTexture).__webglTexture||Bt.depthTexture.image.width!==Bt.width||Bt.depthTexture.image.height!==Bt.height)&&(Bt.depthTexture.image.width=Bt.width,Bt.depthTexture.image.height=Bt.height,Bt.depthTexture.needsUpdate=!0),Ht(Bt.depthTexture,0);const cn=nt.get(Bt.depthTexture).__webglTexture,mn=Cn(Bt);if(Bt.depthTexture.format===DepthFormat)vn(Bt)?ot.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.TEXTURE_2D,cn,0,mn):_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.TEXTURE_2D,cn,0);else if(Bt.depthTexture.format===DepthStencilFormat)vn(Bt)?ot.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.TEXTURE_2D,cn,0,mn):_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.TEXTURE_2D,cn,0);else throw new Error("Unknown depthTexture format")}function rn(jt){const Bt=nt.get(jt),hn=jt.isWebGLCubeRenderTarget===!0;if(Bt.__boundDepthTexture!==jt.depthTexture){const cn=jt.depthTexture;if(Bt.__depthDisposeCallback&&Bt.__depthDisposeCallback(),cn){const mn=()=>{delete Bt.__boundDepthTexture,delete Bt.__depthDisposeCallback,cn.removeEventListener("dispose",mn)};cn.addEventListener("dispose",mn),Bt.__depthDisposeCallback=mn}Bt.__boundDepthTexture=cn}if(jt.depthTexture&&!Bt.__autoAllocateDepthBuffer){if(hn)throw new Error("target.depthTexture not supported in Cube render targets");qt(Bt.__webglFramebuffer,jt)}else if(hn){Bt.__webglDepthbuffer=[];for(let cn=0;cn<6;cn++)if(tt.bindFramebuffer(_e.FRAMEBUFFER,Bt.__webglFramebuffer[cn]),Bt.__webglDepthbuffer[cn]===void 0)Bt.__webglDepthbuffer[cn]=_e.createRenderbuffer(),Yt(Bt.__webglDepthbuffer[cn],jt,!1);else{const mn=jt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT,an=Bt.__webglDepthbuffer[cn];_e.bindRenderbuffer(_e.RENDERBUFFER,an),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,mn,_e.RENDERBUFFER,an)}}else if(tt.bindFramebuffer(_e.FRAMEBUFFER,Bt.__webglFramebuffer),Bt.__webglDepthbuffer===void 0)Bt.__webglDepthbuffer=_e.createRenderbuffer(),Yt(Bt.__webglDepthbuffer,jt,!1);else{const cn=jt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT,mn=Bt.__webglDepthbuffer;_e.bindRenderbuffer(_e.RENDERBUFFER,mn),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,cn,_e.RENDERBUFFER,mn)}tt.bindFramebuffer(_e.FRAMEBUFFER,null)}function gn(jt,Bt,hn){const cn=nt.get(jt);Bt!==void 0&&Ut(cn.__webglFramebuffer,jt,jt.texture,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,0),hn!==void 0&&rn(jt)}function An(jt){const Bt=jt.texture,hn=nt.get(jt),cn=nt.get(Bt);jt.addEventListener("dispose",bt);const mn=jt.textures,an=jt.isWebGLCubeRenderTarget===!0,Hn=mn.length>1;if(Hn||(cn.__webglTexture===void 0&&(cn.__webglTexture=_e.createTexture()),cn.__version=Bt.version,st.memory.textures++),an){hn.__webglFramebuffer=[];for(let Pn=0;Pn<6;Pn++)if(Bt.mipmaps&&Bt.mipmaps.length>0){hn.__webglFramebuffer[Pn]=[];for(let er=0;er<Bt.mipmaps.length;er++)hn.__webglFramebuffer[Pn][er]=_e.createFramebuffer()}else hn.__webglFramebuffer[Pn]=_e.createFramebuffer()}else{if(Bt.mipmaps&&Bt.mipmaps.length>0){hn.__webglFramebuffer=[];for(let Pn=0;Pn<Bt.mipmaps.length;Pn++)hn.__webglFramebuffer[Pn]=_e.createFramebuffer()}else hn.__webglFramebuffer=_e.createFramebuffer();if(Hn)for(let Pn=0,er=mn.length;Pn<er;Pn++){const cr=nt.get(mn[Pn]);cr.__webglTexture===void 0&&(cr.__webglTexture=_e.createTexture(),st.memory.textures++)}if(jt.samples>0&&vn(jt)===!1){hn.__webglMultisampledFramebuffer=_e.createFramebuffer(),hn.__webglColorRenderbuffer=[],tt.bindFramebuffer(_e.FRAMEBUFFER,hn.__webglMultisampledFramebuffer);for(let Pn=0;Pn<mn.length;Pn++){const er=mn[Pn];hn.__webglColorRenderbuffer[Pn]=_e.createRenderbuffer(),_e.bindRenderbuffer(_e.RENDERBUFFER,hn.__webglColorRenderbuffer[Pn]);const cr=it.convert(er.format,er.colorSpace),ir=it.convert(er.type),Jn=_t(er.internalFormat,cr,ir,er.colorSpace,jt.isXRRenderTarget===!0),fr=Cn(jt);_e.renderbufferStorageMultisample(_e.RENDERBUFFER,fr,Jn,jt.width,jt.height),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+Pn,_e.RENDERBUFFER,hn.__webglColorRenderbuffer[Pn])}_e.bindRenderbuffer(_e.RENDERBUFFER,null),jt.depthBuffer&&(hn.__webglDepthRenderbuffer=_e.createRenderbuffer(),Yt(hn.__webglDepthRenderbuffer,jt,!0)),tt.bindFramebuffer(_e.FRAMEBUFFER,null)}}if(an){tt.bindTexture(_e.TEXTURE_CUBE_MAP,cn.__webglTexture),zt(_e.TEXTURE_CUBE_MAP,Bt);for(let Pn=0;Pn<6;Pn++)if(Bt.mipmaps&&Bt.mipmaps.length>0)for(let er=0;er<Bt.mipmaps.length;er++)Ut(hn.__webglFramebuffer[Pn][er],jt,Bt,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+Pn,er);else Ut(hn.__webglFramebuffer[Pn],jt,Bt,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+Pn,0);vt(Bt)&&pt(_e.TEXTURE_CUBE_MAP),tt.unbindTexture()}else if(Hn){for(let Pn=0,er=mn.length;Pn<er;Pn++){const cr=mn[Pn],ir=nt.get(cr);tt.bindTexture(_e.TEXTURE_2D,ir.__webglTexture),zt(_e.TEXTURE_2D,cr),Ut(hn.__webglFramebuffer,jt,cr,_e.COLOR_ATTACHMENT0+Pn,_e.TEXTURE_2D,0),vt(cr)&&pt(_e.TEXTURE_2D)}tt.unbindTexture()}else{let Pn=_e.TEXTURE_2D;if((jt.isWebGL3DRenderTarget||jt.isWebGLArrayRenderTarget)&&(Pn=jt.isWebGL3DRenderTarget?_e.TEXTURE_3D:_e.TEXTURE_2D_ARRAY),tt.bindTexture(Pn,cn.__webglTexture),zt(Pn,Bt),Bt.mipmaps&&Bt.mipmaps.length>0)for(let er=0;er<Bt.mipmaps.length;er++)Ut(hn.__webglFramebuffer[er],jt,Bt,_e.COLOR_ATTACHMENT0,Pn,er);else Ut(hn.__webglFramebuffer,jt,Bt,_e.COLOR_ATTACHMENT0,Pn,0);vt(Bt)&&pt(Pn),tt.unbindTexture()}jt.depthBuffer&&rn(jt)}function En(jt){const Bt=jt.textures;for(let hn=0,cn=Bt.length;hn<cn;hn++){const mn=Bt[hn];if(vt(mn)){const an=jt.isWebGLCubeRenderTarget?_e.TEXTURE_CUBE_MAP:_e.TEXTURE_2D,Hn=nt.get(mn).__webglTexture;tt.bindTexture(an,Hn),pt(an),tt.unbindTexture()}}}const fn=[],nn=[];function Tn(jt){if(jt.samples>0){if(vn(jt)===!1){const Bt=jt.textures,hn=jt.width,cn=jt.height;let mn=_e.COLOR_BUFFER_BIT;const an=jt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT,Hn=nt.get(jt),Pn=Bt.length>1;if(Pn)for(let er=0;er<Bt.length;er++)tt.bindFramebuffer(_e.FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+er,_e.RENDERBUFFER,null),tt.bindFramebuffer(_e.FRAMEBUFFER,Hn.__webglFramebuffer),_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0+er,_e.TEXTURE_2D,null,0);tt.bindFramebuffer(_e.READ_FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,Hn.__webglFramebuffer);for(let er=0;er<Bt.length;er++){if(jt.resolveDepthBuffer&&(jt.depthBuffer&&(mn|=_e.DEPTH_BUFFER_BIT),jt.stencilBuffer&&jt.resolveStencilBuffer&&(mn|=_e.STENCIL_BUFFER_BIT)),Pn){_e.framebufferRenderbuffer(_e.READ_FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.RENDERBUFFER,Hn.__webglColorRenderbuffer[er]);const cr=nt.get(Bt[er]).__webglTexture;_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,cr,0)}_e.blitFramebuffer(0,0,hn,cn,0,0,hn,cn,mn,_e.NEAREST),at===!0&&(fn.length=0,nn.length=0,fn.push(_e.COLOR_ATTACHMENT0+er),jt.depthBuffer&&jt.resolveDepthBuffer===!1&&(fn.push(an),nn.push(an),_e.invalidateFramebuffer(_e.DRAW_FRAMEBUFFER,nn)),_e.invalidateFramebuffer(_e.READ_FRAMEBUFFER,fn))}if(tt.bindFramebuffer(_e.READ_FRAMEBUFFER,null),tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,null),Pn)for(let er=0;er<Bt.length;er++){tt.bindFramebuffer(_e.FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+er,_e.RENDERBUFFER,Hn.__webglColorRenderbuffer[er]);const cr=nt.get(Bt[er]).__webglTexture;tt.bindFramebuffer(_e.FRAMEBUFFER,Hn.__webglFramebuffer),_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0+er,_e.TEXTURE_2D,cr,0)}tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,Hn.__webglMultisampledFramebuffer)}else if(jt.depthBuffer&&jt.resolveDepthBuffer===!1&&at){const Bt=jt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT;_e.invalidateFramebuffer(_e.DRAW_FRAMEBUFFER,[Bt])}}}function Cn(jt){return Math.min(rt.maxSamples,jt.samples)}function vn(jt){const Bt=nt.get(jt);return jt.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&Bt.__useRenderToTexture!==!1}function _n(jt){const Bt=st.render.frame;ct.get(jt)!==Bt&&(ct.set(jt,Bt),jt.update())}function Qt(jt,Bt){const hn=jt.colorSpace,cn=jt.format,mn=jt.type;return jt.isCompressedTexture===!0||jt.isVideoTexture===!0||hn!==LinearSRGBColorSpace$1&&hn!==NoColorSpace&&(ColorManagement.getTransfer(hn)===SRGBTransfer?(cn!==RGBAFormat||mn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",hn)),Bt}function sn(jt){return typeof HTMLImageElement<"u"&&jt instanceof HTMLImageElement?(lt.width=jt.naturalWidth||jt.width,lt.height=jt.naturalHeight||jt.height):typeof VideoFrame<"u"&&jt instanceof VideoFrame?(lt.width=jt.displayWidth,lt.height=jt.displayHeight):(lt.width=jt.width,lt.height=jt.height),lt}this.allocateTextureUnit=Lt,this.resetTextureUnits=Mt,this.setTexture2D=Ht,this.setTexture2DArray=Kt,this.setTexture3D=Wt,this.setTextureCube=Jt,this.rebindTextures=gn,this.setupRenderTarget=An,this.updateRenderTargetMipmap=En,this.updateMultisampleRenderTarget=Tn,this.setupDepthRenderbuffer=rn,this.setupFrameBufferTexture=Ut,this.useMultisampledRTT=vn}function WebGLUtils(_e,_){function tt(nt,rt=NoColorSpace){let it;const st=ColorManagement.getTransfer(rt);if(nt===UnsignedByteType)return _e.UNSIGNED_BYTE;if(nt===UnsignedShort4444Type)return _e.UNSIGNED_SHORT_4_4_4_4;if(nt===UnsignedShort5551Type)return _e.UNSIGNED_SHORT_5_5_5_1;if(nt===UnsignedInt5999Type)return _e.UNSIGNED_INT_5_9_9_9_REV;if(nt===ByteType)return _e.BYTE;if(nt===ShortType)return _e.SHORT;if(nt===UnsignedShortType)return _e.UNSIGNED_SHORT;if(nt===IntType)return _e.INT;if(nt===UnsignedIntType)return _e.UNSIGNED_INT;if(nt===FloatType)return _e.FLOAT;if(nt===HalfFloatType)return _e.HALF_FLOAT;if(nt===AlphaFormat)return _e.ALPHA;if(nt===RGBFormat)return _e.RGB;if(nt===RGBAFormat)return _e.RGBA;if(nt===LuminanceFormat)return _e.LUMINANCE;if(nt===LuminanceAlphaFormat)return _e.LUMINANCE_ALPHA;if(nt===DepthFormat)return _e.DEPTH_COMPONENT;if(nt===DepthStencilFormat)return _e.DEPTH_STENCIL;if(nt===RedFormat)return _e.RED;if(nt===RedIntegerFormat)return _e.RED_INTEGER;if(nt===RGFormat)return _e.RG;if(nt===RGIntegerFormat)return _e.RG_INTEGER;if(nt===RGBAIntegerFormat)return _e.RGBA_INTEGER;if(nt===RGB_S3TC_DXT1_Format||nt===RGBA_S3TC_DXT1_Format||nt===RGBA_S3TC_DXT3_Format||nt===RGBA_S3TC_DXT5_Format)if(st===SRGBTransfer)if(it=_.get("WEBGL_compressed_texture_s3tc_srgb"),it!==null){if(nt===RGB_S3TC_DXT1_Format)return it.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(nt===RGBA_S3TC_DXT1_Format)return it.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(nt===RGBA_S3TC_DXT3_Format)return it.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(nt===RGBA_S3TC_DXT5_Format)return it.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(it=_.get("WEBGL_compressed_texture_s3tc"),it!==null){if(nt===RGB_S3TC_DXT1_Format)return it.COMPRESSED_RGB_S3TC_DXT1_EXT;if(nt===RGBA_S3TC_DXT1_Format)return it.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(nt===RGBA_S3TC_DXT3_Format)return it.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(nt===RGBA_S3TC_DXT5_Format)return it.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(nt===RGB_PVRTC_4BPPV1_Format||nt===RGB_PVRTC_2BPPV1_Format||nt===RGBA_PVRTC_4BPPV1_Format||nt===RGBA_PVRTC_2BPPV1_Format)if(it=_.get("WEBGL_compressed_texture_pvrtc"),it!==null){if(nt===RGB_PVRTC_4BPPV1_Format)return it.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(nt===RGB_PVRTC_2BPPV1_Format)return it.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(nt===RGBA_PVRTC_4BPPV1_Format)return it.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(nt===RGBA_PVRTC_2BPPV1_Format)return it.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(nt===RGB_ETC1_Format||nt===RGB_ETC2_Format||nt===RGBA_ETC2_EAC_Format)if(it=_.get("WEBGL_compressed_texture_etc"),it!==null){if(nt===RGB_ETC1_Format||nt===RGB_ETC2_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ETC2:it.COMPRESSED_RGB8_ETC2;if(nt===RGBA_ETC2_EAC_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:it.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(nt===RGBA_ASTC_4x4_Format||nt===RGBA_ASTC_5x4_Format||nt===RGBA_ASTC_5x5_Format||nt===RGBA_ASTC_6x5_Format||nt===RGBA_ASTC_6x6_Format||nt===RGBA_ASTC_8x5_Format||nt===RGBA_ASTC_8x6_Format||nt===RGBA_ASTC_8x8_Format||nt===RGBA_ASTC_10x5_Format||nt===RGBA_ASTC_10x6_Format||nt===RGBA_ASTC_10x8_Format||nt===RGBA_ASTC_10x10_Format||nt===RGBA_ASTC_12x10_Format||nt===RGBA_ASTC_12x12_Format)if(it=_.get("WEBGL_compressed_texture_astc"),it!==null){if(nt===RGBA_ASTC_4x4_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:it.COMPRESSED_RGBA_ASTC_4x4_KHR;if(nt===RGBA_ASTC_5x4_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:it.COMPRESSED_RGBA_ASTC_5x4_KHR;if(nt===RGBA_ASTC_5x5_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:it.COMPRESSED_RGBA_ASTC_5x5_KHR;if(nt===RGBA_ASTC_6x5_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:it.COMPRESSED_RGBA_ASTC_6x5_KHR;if(nt===RGBA_ASTC_6x6_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:it.COMPRESSED_RGBA_ASTC_6x6_KHR;if(nt===RGBA_ASTC_8x5_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:it.COMPRESSED_RGBA_ASTC_8x5_KHR;if(nt===RGBA_ASTC_8x6_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:it.COMPRESSED_RGBA_ASTC_8x6_KHR;if(nt===RGBA_ASTC_8x8_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:it.COMPRESSED_RGBA_ASTC_8x8_KHR;if(nt===RGBA_ASTC_10x5_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:it.COMPRESSED_RGBA_ASTC_10x5_KHR;if(nt===RGBA_ASTC_10x6_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:it.COMPRESSED_RGBA_ASTC_10x6_KHR;if(nt===RGBA_ASTC_10x8_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:it.COMPRESSED_RGBA_ASTC_10x8_KHR;if(nt===RGBA_ASTC_10x10_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:it.COMPRESSED_RGBA_ASTC_10x10_KHR;if(nt===RGBA_ASTC_12x10_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:it.COMPRESSED_RGBA_ASTC_12x10_KHR;if(nt===RGBA_ASTC_12x12_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:it.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(nt===RGBA_BPTC_Format||nt===RGB_BPTC_SIGNED_Format||nt===RGB_BPTC_UNSIGNED_Format)if(it=_.get("EXT_texture_compression_bptc"),it!==null){if(nt===RGBA_BPTC_Format)return st===SRGBTransfer?it.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:it.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(nt===RGB_BPTC_SIGNED_Format)return it.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(nt===RGB_BPTC_UNSIGNED_Format)return it.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(nt===RED_RGTC1_Format||nt===SIGNED_RED_RGTC1_Format||nt===RED_GREEN_RGTC2_Format||nt===SIGNED_RED_GREEN_RGTC2_Format)if(it=_.get("EXT_texture_compression_rgtc"),it!==null){if(nt===RGBA_BPTC_Format)return it.COMPRESSED_RED_RGTC1_EXT;if(nt===SIGNED_RED_RGTC1_Format)return it.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(nt===RED_GREEN_RGTC2_Format)return it.COMPRESSED_RED_GREEN_RGTC2_EXT;if(nt===SIGNED_RED_GREEN_RGTC2_Format)return it.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return nt===UnsignedInt248Type?_e.UNSIGNED_INT_24_8:_e[nt]!==void 0?_e[nt]:null}return{convert:tt}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.cameras=_}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const tt=this._hand;if(tt)for(const nt of _.hand.values())this._getHandJoint(tt,nt)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,tt,nt){let rt=null,it=null,st=null;const ot=this._targetRay,at=this._grip,lt=this._hand;if(_&&tt.session.visibilityState!=="visible-blurred"){if(lt&&_.hand){st=!0;for(const yt of _.hand.values()){const vt=tt.getJointPose(yt,nt),pt=this._getHandJoint(lt,yt);vt!==null&&(pt.matrix.fromArray(vt.transform.matrix),pt.matrix.decompose(pt.position,pt.rotation,pt.scale),pt.matrixWorldNeedsUpdate=!0,pt.jointRadius=vt.radius),pt.visible=vt!==null}const ct=lt.joints["index-finger-tip"],ut=lt.joints["thumb-tip"],dt=ct.position.distanceTo(ut.position),ht=.02,mt=.005;lt.inputState.pinching&&dt>ht+mt?(lt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!lt.inputState.pinching&&dt<=ht-mt&&(lt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else at!==null&&_.gripSpace&&(it=tt.getPose(_.gripSpace,nt),it!==null&&(at.matrix.fromArray(it.transform.matrix),at.matrix.decompose(at.position,at.rotation,at.scale),at.matrixWorldNeedsUpdate=!0,it.linearVelocity?(at.hasLinearVelocity=!0,at.linearVelocity.copy(it.linearVelocity)):at.hasLinearVelocity=!1,it.angularVelocity?(at.hasAngularVelocity=!0,at.angularVelocity.copy(it.angularVelocity)):at.hasAngularVelocity=!1));ot!==null&&(rt=tt.getPose(_.targetRaySpace,nt),rt===null&&it!==null&&(rt=it),rt!==null&&(ot.matrix.fromArray(rt.transform.matrix),ot.matrix.decompose(ot.position,ot.rotation,ot.scale),ot.matrixWorldNeedsUpdate=!0,rt.linearVelocity?(ot.hasLinearVelocity=!0,ot.linearVelocity.copy(rt.linearVelocity)):ot.hasLinearVelocity=!1,rt.angularVelocity?(ot.hasAngularVelocity=!0,ot.angularVelocity.copy(rt.angularVelocity)):ot.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ot!==null&&(ot.visible=rt!==null),at!==null&&(at.visible=it!==null),lt!==null&&(lt.visible=st!==null),this}_getHandJoint(_,tt){if(_.joints[tt.jointName]===void 0){const nt=new Group;nt.matrixAutoUpdate=!1,nt.visible=!1,_.joints[tt.jointName]=nt,_.add(nt)}return _.joints[tt.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(_,tt,nt){if(this.texture===null){const rt=new Texture,it=_.properties.get(rt);it.__webglTexture=tt.texture,(tt.depthNear!=nt.depthNear||tt.depthFar!=nt.depthFar)&&(this.depthNear=tt.depthNear,this.depthFar=tt.depthFar),this.texture=rt}}getMesh(_){if(this.texture!==null&&this.mesh===null){const tt=_.cameras[0].viewport,nt=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:tt.z},depthHeight:{value:tt.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),nt)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(_,tt){super();const nt=this;let rt=null,it=1,st=null,ot="local-floor",at=1,lt=null,ct=null,ut=null,dt=null,ht=null,mt=null;const yt=new WebXRDepthSensing,vt=tt.getContextAttributes();let pt=null,_t=null;const xt=[],St=[],At=new Vector2;let bt=null;const Et=new PerspectiveCamera;Et.layers.enable(1),Et.viewport=new Vector4;const wt=new PerspectiveCamera;wt.layers.enable(2),wt.viewport=new Vector4;const Rt=[Et,wt],Tt=new ArrayCamera;Tt.layers.enable(1),Tt.layers.enable(2);let Mt=null,Lt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(It){let Ut=xt[It];return Ut===void 0&&(Ut=new WebXRController,xt[It]=Ut),Ut.getTargetRaySpace()},this.getControllerGrip=function(It){let Ut=xt[It];return Ut===void 0&&(Ut=new WebXRController,xt[It]=Ut),Ut.getGripSpace()},this.getHand=function(It){let Ut=xt[It];return Ut===void 0&&(Ut=new WebXRController,xt[It]=Ut),Ut.getHandSpace()};function Ft(It){const Ut=St.indexOf(It.inputSource);if(Ut===-1)return;const Yt=xt[Ut];Yt!==void 0&&(Yt.update(It.inputSource,It.frame,lt||st),Yt.dispatchEvent({type:It.type,data:It.inputSource}))}function Ht(){rt.removeEventListener("select",Ft),rt.removeEventListener("selectstart",Ft),rt.removeEventListener("selectend",Ft),rt.removeEventListener("squeeze",Ft),rt.removeEventListener("squeezestart",Ft),rt.removeEventListener("squeezeend",Ft),rt.removeEventListener("end",Ht),rt.removeEventListener("inputsourceschange",Kt);for(let It=0;It<xt.length;It++){const Ut=St[It];Ut!==null&&(St[It]=null,xt[It].disconnect(Ut))}Mt=null,Lt=null,yt.reset(),_.setRenderTarget(pt),ht=null,dt=null,ut=null,rt=null,_t=null,Dt.stop(),nt.isPresenting=!1,_.setPixelRatio(bt),_.setSize(At.width,At.height,!1),nt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(It){it=It,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(It){ot=It,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return lt||st},this.setReferenceSpace=function(It){lt=It},this.getBaseLayer=function(){return dt!==null?dt:ht},this.getBinding=function(){return ut},this.getFrame=function(){return mt},this.getSession=function(){return rt},this.setSession=async function(It){if(rt=It,rt!==null){if(pt=_.getRenderTarget(),rt.addEventListener("select",Ft),rt.addEventListener("selectstart",Ft),rt.addEventListener("selectend",Ft),rt.addEventListener("squeeze",Ft),rt.addEventListener("squeezestart",Ft),rt.addEventListener("squeezeend",Ft),rt.addEventListener("end",Ht),rt.addEventListener("inputsourceschange",Kt),vt.xrCompatible!==!0&&await tt.makeXRCompatible(),bt=_.getPixelRatio(),_.getSize(At),rt.renderState.layers===void 0){const Ut={antialias:vt.antialias,alpha:!0,depth:vt.depth,stencil:vt.stencil,framebufferScaleFactor:it};ht=new XRWebGLLayer(rt,tt,Ut),rt.updateRenderState({baseLayer:ht}),_.setPixelRatio(1),_.setSize(ht.framebufferWidth,ht.framebufferHeight,!1),_t=new WebGLRenderTarget(ht.framebufferWidth,ht.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:vt.stencil})}else{let Ut=null,Yt=null,qt=null;vt.depth&&(qt=vt.stencil?tt.DEPTH24_STENCIL8:tt.DEPTH_COMPONENT24,Ut=vt.stencil?DepthStencilFormat:DepthFormat,Yt=vt.stencil?UnsignedInt248Type:UnsignedIntType);const rn={colorFormat:tt.RGBA8,depthFormat:qt,scaleFactor:it};ut=new XRWebGLBinding(rt,tt),dt=ut.createProjectionLayer(rn),rt.updateRenderState({layers:[dt]}),_.setPixelRatio(1),_.setSize(dt.textureWidth,dt.textureHeight,!1),_t=new WebGLRenderTarget(dt.textureWidth,dt.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(dt.textureWidth,dt.textureHeight,Yt,void 0,void 0,void 0,void 0,void 0,void 0,Ut),stencilBuffer:vt.stencil,colorSpace:_.outputColorSpace,samples:vt.antialias?4:0,resolveDepthBuffer:dt.ignoreDepthValues===!1})}_t.isXRRenderTarget=!0,this.setFoveation(at),lt=null,st=await rt.requestReferenceSpace(ot),Dt.setContext(rt),Dt.start(),nt.isPresenting=!0,nt.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(rt!==null)return rt.environmentBlendMode},this.getDepthTexture=function(){return yt.getDepthTexture()};function Kt(It){for(let Ut=0;Ut<It.removed.length;Ut++){const Yt=It.removed[Ut],qt=St.indexOf(Yt);qt>=0&&(St[qt]=null,xt[qt].disconnect(Yt))}for(let Ut=0;Ut<It.added.length;Ut++){const Yt=It.added[Ut];let qt=St.indexOf(Yt);if(qt===-1){for(let gn=0;gn<xt.length;gn++)if(gn>=St.length){St.push(Yt),qt=gn;break}else if(St[gn]===null){St[gn]=Yt,qt=gn;break}if(qt===-1)break}const rn=xt[qt];rn&&rn.connect(Yt)}}const Wt=new Vector3,Jt=new Vector3;function Ot(It,Ut,Yt){Wt.setFromMatrixPosition(Ut.matrixWorld),Jt.setFromMatrixPosition(Yt.matrixWorld);const qt=Wt.distanceTo(Jt),rn=Ut.projectionMatrix.elements,gn=Yt.projectionMatrix.elements,An=rn[14]/(rn[10]-1),En=rn[14]/(rn[10]+1),fn=(rn[9]+1)/rn[5],nn=(rn[9]-1)/rn[5],Tn=(rn[8]-1)/rn[0],Cn=(gn[8]+1)/gn[0],vn=An*Tn,_n=An*Cn,Qt=qt/(-Tn+Cn),sn=Qt*-Tn;if(Ut.matrixWorld.decompose(It.position,It.quaternion,It.scale),It.translateX(sn),It.translateZ(Qt),It.matrixWorld.compose(It.position,It.quaternion,It.scale),It.matrixWorldInverse.copy(It.matrixWorld).invert(),rn[10]===-1)It.projectionMatrix.copy(Ut.projectionMatrix),It.projectionMatrixInverse.copy(Ut.projectionMatrixInverse);else{const jt=An+Qt,Bt=En+Qt,hn=vn-sn,cn=_n+(qt-sn),mn=fn*En/Bt*jt,an=nn*En/Bt*jt;It.projectionMatrix.makePerspective(hn,cn,mn,an,jt,Bt),It.projectionMatrixInverse.copy(It.projectionMatrix).invert()}}function kt(It,Ut){Ut===null?It.matrixWorld.copy(It.matrix):It.matrixWorld.multiplyMatrices(Ut.matrixWorld,It.matrix),It.matrixWorldInverse.copy(It.matrixWorld).invert()}this.updateCamera=function(It){if(rt===null)return;let Ut=It.near,Yt=It.far;yt.texture!==null&&(yt.depthNear>0&&(Ut=yt.depthNear),yt.depthFar>0&&(Yt=yt.depthFar)),Tt.near=wt.near=Et.near=Ut,Tt.far=wt.far=Et.far=Yt,(Mt!==Tt.near||Lt!==Tt.far)&&(rt.updateRenderState({depthNear:Tt.near,depthFar:Tt.far}),Mt=Tt.near,Lt=Tt.far);const qt=It.parent,rn=Tt.cameras;kt(Tt,qt);for(let gn=0;gn<rn.length;gn++)kt(rn[gn],qt);rn.length===2?Ot(Tt,Et,wt):Tt.projectionMatrix.copy(Et.projectionMatrix),Gt(It,Tt,qt)};function Gt(It,Ut,Yt){Yt===null?It.matrix.copy(Ut.matrixWorld):(It.matrix.copy(Yt.matrixWorld),It.matrix.invert(),It.matrix.multiply(Ut.matrixWorld)),It.matrix.decompose(It.position,It.quaternion,It.scale),It.updateMatrixWorld(!0),It.projectionMatrix.copy(Ut.projectionMatrix),It.projectionMatrixInverse.copy(Ut.projectionMatrixInverse),It.isPerspectiveCamera&&(It.fov=RAD2DEG*2*Math.atan(1/It.projectionMatrix.elements[5]),It.zoom=1)}this.getCamera=function(){return Tt},this.getFoveation=function(){if(!(dt===null&&ht===null))return at},this.setFoveation=function(It){at=It,dt!==null&&(dt.fixedFoveation=It),ht!==null&&ht.fixedFoveation!==void 0&&(ht.fixedFoveation=It)},this.hasDepthSensing=function(){return yt.texture!==null},this.getDepthSensingMesh=function(){return yt.getMesh(Tt)};let zt=null;function Vt(It,Ut){if(ct=Ut.getViewerPose(lt||st),mt=Ut,ct!==null){const Yt=ct.views;ht!==null&&(_.setRenderTargetFramebuffer(_t,ht.framebuffer),_.setRenderTarget(_t));let qt=!1;Yt.length!==Tt.cameras.length&&(Tt.cameras.length=0,qt=!0);for(let gn=0;gn<Yt.length;gn++){const An=Yt[gn];let En=null;if(ht!==null)En=ht.getViewport(An);else{const nn=ut.getViewSubImage(dt,An);En=nn.viewport,gn===0&&(_.setRenderTargetTextures(_t,nn.colorTexture,dt.ignoreDepthValues?void 0:nn.depthStencilTexture),_.setRenderTarget(_t))}let fn=Rt[gn];fn===void 0&&(fn=new PerspectiveCamera,fn.layers.enable(gn),fn.viewport=new Vector4,Rt[gn]=fn),fn.matrix.fromArray(An.transform.matrix),fn.matrix.decompose(fn.position,fn.quaternion,fn.scale),fn.projectionMatrix.fromArray(An.projectionMatrix),fn.projectionMatrixInverse.copy(fn.projectionMatrix).invert(),fn.viewport.set(En.x,En.y,En.width,En.height),gn===0&&(Tt.matrix.copy(fn.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale)),qt===!0&&Tt.cameras.push(fn)}const rn=rt.enabledFeatures;if(rn&&rn.includes("depth-sensing")){const gn=ut.getDepthInformation(Yt[0]);gn&&gn.isValid&&gn.texture&&yt.init(_,gn,rt.renderState)}}for(let Yt=0;Yt<xt.length;Yt++){const qt=St[Yt],rn=xt[Yt];qt!==null&&rn!==void 0&&rn.update(qt,Ut,lt||st)}zt&&zt(It,Ut),Ut.detectedPlanes&&nt.dispatchEvent({type:"planesdetected",data:Ut}),mt=null}const Dt=new WebGLAnimation;Dt.setAnimationLoop(Vt),this.setAnimationLoop=function(It){zt=It},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(_e,_){function tt(vt,pt){vt.matrixAutoUpdate===!0&&vt.updateMatrix(),pt.value.copy(vt.matrix)}function nt(vt,pt){pt.color.getRGB(vt.fogColor.value,getUnlitUniformColorSpace(_e)),pt.isFog?(vt.fogNear.value=pt.near,vt.fogFar.value=pt.far):pt.isFogExp2&&(vt.fogDensity.value=pt.density)}function rt(vt,pt,_t,xt,St){pt.isMeshBasicMaterial||pt.isMeshLambertMaterial?it(vt,pt):pt.isMeshToonMaterial?(it(vt,pt),ut(vt,pt)):pt.isMeshPhongMaterial?(it(vt,pt),ct(vt,pt)):pt.isMeshStandardMaterial?(it(vt,pt),dt(vt,pt),pt.isMeshPhysicalMaterial&&ht(vt,pt,St)):pt.isMeshMatcapMaterial?(it(vt,pt),mt(vt,pt)):pt.isMeshDepthMaterial?it(vt,pt):pt.isMeshDistanceMaterial?(it(vt,pt),yt(vt,pt)):pt.isMeshNormalMaterial?it(vt,pt):pt.isLineBasicMaterial?(st(vt,pt),pt.isLineDashedMaterial&&ot(vt,pt)):pt.isPointsMaterial?at(vt,pt,_t,xt):pt.isSpriteMaterial?lt(vt,pt):pt.isShadowMaterial?(vt.color.value.copy(pt.color),vt.opacity.value=pt.opacity):pt.isShaderMaterial&&(pt.uniformsNeedUpdate=!1)}function it(vt,pt){vt.opacity.value=pt.opacity,pt.color&&vt.diffuse.value.copy(pt.color),pt.emissive&&vt.emissive.value.copy(pt.emissive).multiplyScalar(pt.emissiveIntensity),pt.map&&(vt.map.value=pt.map,tt(pt.map,vt.mapTransform)),pt.alphaMap&&(vt.alphaMap.value=pt.alphaMap,tt(pt.alphaMap,vt.alphaMapTransform)),pt.bumpMap&&(vt.bumpMap.value=pt.bumpMap,tt(pt.bumpMap,vt.bumpMapTransform),vt.bumpScale.value=pt.bumpScale,pt.side===BackSide&&(vt.bumpScale.value*=-1)),pt.normalMap&&(vt.normalMap.value=pt.normalMap,tt(pt.normalMap,vt.normalMapTransform),vt.normalScale.value.copy(pt.normalScale),pt.side===BackSide&&vt.normalScale.value.negate()),pt.displacementMap&&(vt.displacementMap.value=pt.displacementMap,tt(pt.displacementMap,vt.displacementMapTransform),vt.displacementScale.value=pt.displacementScale,vt.displacementBias.value=pt.displacementBias),pt.emissiveMap&&(vt.emissiveMap.value=pt.emissiveMap,tt(pt.emissiveMap,vt.emissiveMapTransform)),pt.specularMap&&(vt.specularMap.value=pt.specularMap,tt(pt.specularMap,vt.specularMapTransform)),pt.alphaTest>0&&(vt.alphaTest.value=pt.alphaTest);const _t=_.get(pt),xt=_t.envMap,St=_t.envMapRotation;xt&&(vt.envMap.value=xt,_e1.copy(St),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,xt.isCubeTexture&&xt.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),vt.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),vt.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1,vt.reflectivity.value=pt.reflectivity,vt.ior.value=pt.ior,vt.refractionRatio.value=pt.refractionRatio),pt.lightMap&&(vt.lightMap.value=pt.lightMap,vt.lightMapIntensity.value=pt.lightMapIntensity,tt(pt.lightMap,vt.lightMapTransform)),pt.aoMap&&(vt.aoMap.value=pt.aoMap,vt.aoMapIntensity.value=pt.aoMapIntensity,tt(pt.aoMap,vt.aoMapTransform))}function st(vt,pt){vt.diffuse.value.copy(pt.color),vt.opacity.value=pt.opacity,pt.map&&(vt.map.value=pt.map,tt(pt.map,vt.mapTransform))}function ot(vt,pt){vt.dashSize.value=pt.dashSize,vt.totalSize.value=pt.dashSize+pt.gapSize,vt.scale.value=pt.scale}function at(vt,pt,_t,xt){vt.diffuse.value.copy(pt.color),vt.opacity.value=pt.opacity,vt.size.value=pt.size*_t,vt.scale.value=xt*.5,pt.map&&(vt.map.value=pt.map,tt(pt.map,vt.uvTransform)),pt.alphaMap&&(vt.alphaMap.value=pt.alphaMap,tt(pt.alphaMap,vt.alphaMapTransform)),pt.alphaTest>0&&(vt.alphaTest.value=pt.alphaTest)}function lt(vt,pt){vt.diffuse.value.copy(pt.color),vt.opacity.value=pt.opacity,vt.rotation.value=pt.rotation,pt.map&&(vt.map.value=pt.map,tt(pt.map,vt.mapTransform)),pt.alphaMap&&(vt.alphaMap.value=pt.alphaMap,tt(pt.alphaMap,vt.alphaMapTransform)),pt.alphaTest>0&&(vt.alphaTest.value=pt.alphaTest)}function ct(vt,pt){vt.specular.value.copy(pt.specular),vt.shininess.value=Math.max(pt.shininess,1e-4)}function ut(vt,pt){pt.gradientMap&&(vt.gradientMap.value=pt.gradientMap)}function dt(vt,pt){vt.metalness.value=pt.metalness,pt.metalnessMap&&(vt.metalnessMap.value=pt.metalnessMap,tt(pt.metalnessMap,vt.metalnessMapTransform)),vt.roughness.value=pt.roughness,pt.roughnessMap&&(vt.roughnessMap.value=pt.roughnessMap,tt(pt.roughnessMap,vt.roughnessMapTransform)),pt.envMap&&(vt.envMapIntensity.value=pt.envMapIntensity)}function ht(vt,pt,_t){vt.ior.value=pt.ior,pt.sheen>0&&(vt.sheenColor.value.copy(pt.sheenColor).multiplyScalar(pt.sheen),vt.sheenRoughness.value=pt.sheenRoughness,pt.sheenColorMap&&(vt.sheenColorMap.value=pt.sheenColorMap,tt(pt.sheenColorMap,vt.sheenColorMapTransform)),pt.sheenRoughnessMap&&(vt.sheenRoughnessMap.value=pt.sheenRoughnessMap,tt(pt.sheenRoughnessMap,vt.sheenRoughnessMapTransform))),pt.clearcoat>0&&(vt.clearcoat.value=pt.clearcoat,vt.clearcoatRoughness.value=pt.clearcoatRoughness,pt.clearcoatMap&&(vt.clearcoatMap.value=pt.clearcoatMap,tt(pt.clearcoatMap,vt.clearcoatMapTransform)),pt.clearcoatRoughnessMap&&(vt.clearcoatRoughnessMap.value=pt.clearcoatRoughnessMap,tt(pt.clearcoatRoughnessMap,vt.clearcoatRoughnessMapTransform)),pt.clearcoatNormalMap&&(vt.clearcoatNormalMap.value=pt.clearcoatNormalMap,tt(pt.clearcoatNormalMap,vt.clearcoatNormalMapTransform),vt.clearcoatNormalScale.value.copy(pt.clearcoatNormalScale),pt.side===BackSide&&vt.clearcoatNormalScale.value.negate())),pt.dispersion>0&&(vt.dispersion.value=pt.dispersion),pt.iridescence>0&&(vt.iridescence.value=pt.iridescence,vt.iridescenceIOR.value=pt.iridescenceIOR,vt.iridescenceThicknessMinimum.value=pt.iridescenceThicknessRange[0],vt.iridescenceThicknessMaximum.value=pt.iridescenceThicknessRange[1],pt.iridescenceMap&&(vt.iridescenceMap.value=pt.iridescenceMap,tt(pt.iridescenceMap,vt.iridescenceMapTransform)),pt.iridescenceThicknessMap&&(vt.iridescenceThicknessMap.value=pt.iridescenceThicknessMap,tt(pt.iridescenceThicknessMap,vt.iridescenceThicknessMapTransform))),pt.transmission>0&&(vt.transmission.value=pt.transmission,vt.transmissionSamplerMap.value=_t.texture,vt.transmissionSamplerSize.value.set(_t.width,_t.height),pt.transmissionMap&&(vt.transmissionMap.value=pt.transmissionMap,tt(pt.transmissionMap,vt.transmissionMapTransform)),vt.thickness.value=pt.thickness,pt.thicknessMap&&(vt.thicknessMap.value=pt.thicknessMap,tt(pt.thicknessMap,vt.thicknessMapTransform)),vt.attenuationDistance.value=pt.attenuationDistance,vt.attenuationColor.value.copy(pt.attenuationColor)),pt.anisotropy>0&&(vt.anisotropyVector.value.set(pt.anisotropy*Math.cos(pt.anisotropyRotation),pt.anisotropy*Math.sin(pt.anisotropyRotation)),pt.anisotropyMap&&(vt.anisotropyMap.value=pt.anisotropyMap,tt(pt.anisotropyMap,vt.anisotropyMapTransform))),vt.specularIntensity.value=pt.specularIntensity,vt.specularColor.value.copy(pt.specularColor),pt.specularColorMap&&(vt.specularColorMap.value=pt.specularColorMap,tt(pt.specularColorMap,vt.specularColorMapTransform)),pt.specularIntensityMap&&(vt.specularIntensityMap.value=pt.specularIntensityMap,tt(pt.specularIntensityMap,vt.specularIntensityMapTransform))}function mt(vt,pt){pt.matcap&&(vt.matcap.value=pt.matcap)}function yt(vt,pt){const _t=_.get(pt).light;vt.referencePosition.value.setFromMatrixPosition(_t.matrixWorld),vt.nearDistance.value=_t.shadow.camera.near,vt.farDistance.value=_t.shadow.camera.far}return{refreshFogUniforms:nt,refreshMaterialUniforms:rt}}function WebGLUniformsGroups(_e,_,tt,nt){let rt={},it={},st=[];const ot=_e.getParameter(_e.MAX_UNIFORM_BUFFER_BINDINGS);function at(_t,xt){const St=xt.program;nt.uniformBlockBinding(_t,St)}function lt(_t,xt){let St=rt[_t.id];St===void 0&&(mt(_t),St=ct(_t),rt[_t.id]=St,_t.addEventListener("dispose",vt));const At=xt.program;nt.updateUBOMapping(_t,At);const bt=_.render.frame;it[_t.id]!==bt&&(dt(_t),it[_t.id]=bt)}function ct(_t){const xt=ut();_t.__bindingPointIndex=xt;const St=_e.createBuffer(),At=_t.__size,bt=_t.usage;return _e.bindBuffer(_e.UNIFORM_BUFFER,St),_e.bufferData(_e.UNIFORM_BUFFER,At,bt),_e.bindBuffer(_e.UNIFORM_BUFFER,null),_e.bindBufferBase(_e.UNIFORM_BUFFER,xt,St),St}function ut(){for(let _t=0;_t<ot;_t++)if(st.indexOf(_t)===-1)return st.push(_t),_t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function dt(_t){const xt=rt[_t.id],St=_t.uniforms,At=_t.__cache;_e.bindBuffer(_e.UNIFORM_BUFFER,xt);for(let bt=0,Et=St.length;bt<Et;bt++){const wt=Array.isArray(St[bt])?St[bt]:[St[bt]];for(let Rt=0,Tt=wt.length;Rt<Tt;Rt++){const Mt=wt[Rt];if(ht(Mt,bt,Rt,At)===!0){const Lt=Mt.__offset,Ft=Array.isArray(Mt.value)?Mt.value:[Mt.value];let Ht=0;for(let Kt=0;Kt<Ft.length;Kt++){const Wt=Ft[Kt],Jt=yt(Wt);typeof Wt=="number"||typeof Wt=="boolean"?(Mt.__data[0]=Wt,_e.bufferSubData(_e.UNIFORM_BUFFER,Lt+Ht,Mt.__data)):Wt.isMatrix3?(Mt.__data[0]=Wt.elements[0],Mt.__data[1]=Wt.elements[1],Mt.__data[2]=Wt.elements[2],Mt.__data[3]=0,Mt.__data[4]=Wt.elements[3],Mt.__data[5]=Wt.elements[4],Mt.__data[6]=Wt.elements[5],Mt.__data[7]=0,Mt.__data[8]=Wt.elements[6],Mt.__data[9]=Wt.elements[7],Mt.__data[10]=Wt.elements[8],Mt.__data[11]=0):(Wt.toArray(Mt.__data,Ht),Ht+=Jt.storage/Float32Array.BYTES_PER_ELEMENT)}_e.bufferSubData(_e.UNIFORM_BUFFER,Lt,Mt.__data)}}}_e.bindBuffer(_e.UNIFORM_BUFFER,null)}function ht(_t,xt,St,At){const bt=_t.value,Et=xt+"_"+St;if(At[Et]===void 0)return typeof bt=="number"||typeof bt=="boolean"?At[Et]=bt:At[Et]=bt.clone(),!0;{const wt=At[Et];if(typeof bt=="number"||typeof bt=="boolean"){if(wt!==bt)return At[Et]=bt,!0}else if(wt.equals(bt)===!1)return wt.copy(bt),!0}return!1}function mt(_t){const xt=_t.uniforms;let St=0;const At=16;for(let Et=0,wt=xt.length;Et<wt;Et++){const Rt=Array.isArray(xt[Et])?xt[Et]:[xt[Et]];for(let Tt=0,Mt=Rt.length;Tt<Mt;Tt++){const Lt=Rt[Tt],Ft=Array.isArray(Lt.value)?Lt.value:[Lt.value];for(let Ht=0,Kt=Ft.length;Ht<Kt;Ht++){const Wt=Ft[Ht],Jt=yt(Wt),Ot=St%At,kt=Ot%Jt.boundary,Gt=Ot+kt;St+=kt,Gt!==0&&At-Gt<Jt.storage&&(St+=At-Gt),Lt.__data=new Float32Array(Jt.storage/Float32Array.BYTES_PER_ELEMENT),Lt.__offset=St,St+=Jt.storage}}}const bt=St%At;return bt>0&&(St+=At-bt),_t.__size=St,_t.__cache={},this}function yt(_t){const xt={boundary:0,storage:0};return typeof _t=="number"||typeof _t=="boolean"?(xt.boundary=4,xt.storage=4):_t.isVector2?(xt.boundary=8,xt.storage=8):_t.isVector3||_t.isColor?(xt.boundary=16,xt.storage=12):_t.isVector4?(xt.boundary=16,xt.storage=16):_t.isMatrix3?(xt.boundary=48,xt.storage=48):_t.isMatrix4?(xt.boundary=64,xt.storage=64):_t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_t),xt}function vt(_t){const xt=_t.target;xt.removeEventListener("dispose",vt);const St=st.indexOf(xt.__bindingPointIndex);st.splice(St,1),_e.deleteBuffer(rt[xt.id]),delete rt[xt.id],delete it[xt.id]}function pt(){for(const _t in rt)_e.deleteBuffer(rt[_t]);st=[],rt={},it={}}return{bind:at,update:lt,dispose:pt}}class WebGLRenderer{constructor(_={}){const{canvas:tt=createCanvasElement(),context:nt=null,depth:rt=!0,stencil:it=!1,alpha:st=!1,antialias:ot=!1,premultipliedAlpha:at=!0,preserveDrawingBuffer:lt=!1,powerPreference:ct="default",failIfMajorPerformanceCaveat:ut=!1}=_;this.isWebGLRenderer=!0;let dt;if(nt!==null){if(typeof WebGLRenderingContext<"u"&&nt instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");dt=nt.getContextAttributes().alpha}else dt=st;const ht=new Uint32Array(4),mt=new Int32Array(4);let yt=null,vt=null;const pt=[],_t=[];this.domElement=tt,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace$1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const xt=this;let St=!1,At=0,bt=0,Et=null,wt=-1,Rt=null;const Tt=new Vector4,Mt=new Vector4;let Lt=null;const Ft=new Color$1(0);let Ht=0,Kt=tt.width,Wt=tt.height,Jt=1,Ot=null,kt=null;const Gt=new Vector4(0,0,Kt,Wt),zt=new Vector4(0,0,Kt,Wt);let Vt=!1;const Dt=new Frustum;let It=!1,Ut=!1;const Yt=new Matrix4,qt=new Matrix4,rn=new Vector3,gn=new Vector4,An={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let En=!1;function fn(){return Et===null?Jt:1}let nn=nt;function Tn(tn,yn){return tt.getContext(tn,yn)}try{const tn={alpha:!0,depth:rt,stencil:it,antialias:ot,premultipliedAlpha:at,preserveDrawingBuffer:lt,powerPreference:ct,failIfMajorPerformanceCaveat:ut};if("setAttribute"in tt&&tt.setAttribute("data-engine",`three.js r${REVISION}`),tt.addEventListener("webglcontextlost",on,!1),tt.addEventListener("webglcontextrestored",Gn,!1),tt.addEventListener("webglcontextcreationerror",Xn,!1),nn===null){const yn="webgl2";if(nn=Tn(yn,tn),nn===null)throw Tn(yn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(tn){throw console.error("THREE.WebGLRenderer: "+tn.message),tn}let Cn,vn,_n,Qt,sn,jt,Bt,hn,cn,mn,an,Hn,Pn,er,cr,ir,Jn,fr,dr,lr,Nn,bn,Rn,Sn;function or(){Cn=new WebGLExtensions(nn),Cn.init(),bn=new WebGLUtils(nn,Cn),vn=new WebGLCapabilities(nn,Cn,_,bn),_n=new WebGLState(nn),vn.reverseDepthBuffer&&_n.buffers.depth.setReversed(!0),Qt=new WebGLInfo(nn),sn=new WebGLProperties,jt=new WebGLTextures(nn,Cn,_n,sn,vn,bn,Qt),Bt=new WebGLCubeMaps(xt),hn=new WebGLCubeUVMaps(xt),cn=new WebGLAttributes(nn),Rn=new WebGLBindingStates(nn,cn),mn=new WebGLGeometries(nn,cn,Qt,Rn),an=new WebGLObjects(nn,mn,cn,Qt),dr=new WebGLMorphtargets(nn,vn,jt),ir=new WebGLClipping(sn),Hn=new WebGLPrograms(xt,Bt,hn,Cn,vn,Rn,ir),Pn=new WebGLMaterials(xt,sn),er=new WebGLRenderLists,cr=new WebGLRenderStates(Cn),fr=new WebGLBackground(xt,Bt,hn,_n,an,dt,at),Jn=new WebGLShadowMap(xt,an,vn),Sn=new WebGLUniformsGroups(nn,Qt,vn,_n),lr=new WebGLBufferRenderer(nn,Cn,Qt),Nn=new WebGLIndexedBufferRenderer(nn,Cn,Qt),Qt.programs=Hn.programs,xt.capabilities=vn,xt.extensions=Cn,xt.properties=sn,xt.renderLists=er,xt.shadowMap=Jn,xt.state=_n,xt.info=Qt}or();const xn=new WebXRManager(xt,nn);this.xr=xn,this.getContext=function(){return nn},this.getContextAttributes=function(){return nn.getContextAttributes()},this.forceContextLoss=function(){const tn=Cn.get("WEBGL_lose_context");tn&&tn.loseContext()},this.forceContextRestore=function(){const tn=Cn.get("WEBGL_lose_context");tn&&tn.restoreContext()},this.getPixelRatio=function(){return Jt},this.setPixelRatio=function(tn){tn!==void 0&&(Jt=tn,this.setSize(Kt,Wt,!1))},this.getSize=function(tn){return tn.set(Kt,Wt)},this.setSize=function(tn,yn,On=!0){if(xn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Kt=tn,Wt=yn,tt.width=Math.floor(tn*Jt),tt.height=Math.floor(yn*Jt),On===!0&&(tt.style.width=tn+"px",tt.style.height=yn+"px"),this.setViewport(0,0,tn,yn)},this.getDrawingBufferSize=function(tn){return tn.set(Kt*Jt,Wt*Jt).floor()},this.setDrawingBufferSize=function(tn,yn,On){Kt=tn,Wt=yn,Jt=On,tt.width=Math.floor(tn*On),tt.height=Math.floor(yn*On),this.setViewport(0,0,tn,yn)},this.getCurrentViewport=function(tn){return tn.copy(Tt)},this.getViewport=function(tn){return tn.copy(Gt)},this.setViewport=function(tn,yn,On,kn){tn.isVector4?Gt.set(tn.x,tn.y,tn.z,tn.w):Gt.set(tn,yn,On,kn),_n.viewport(Tt.copy(Gt).multiplyScalar(Jt).round())},this.getScissor=function(tn){return tn.copy(zt)},this.setScissor=function(tn,yn,On,kn){tn.isVector4?zt.set(tn.x,tn.y,tn.z,tn.w):zt.set(tn,yn,On,kn),_n.scissor(Mt.copy(zt).multiplyScalar(Jt).round())},this.getScissorTest=function(){return Vt},this.setScissorTest=function(tn){_n.setScissorTest(Vt=tn)},this.setOpaqueSort=function(tn){Ot=tn},this.setTransparentSort=function(tn){kt=tn},this.getClearColor=function(tn){return tn.copy(fr.getClearColor())},this.setClearColor=function(){fr.setClearColor.apply(fr,arguments)},this.getClearAlpha=function(){return fr.getClearAlpha()},this.setClearAlpha=function(){fr.setClearAlpha.apply(fr,arguments)},this.clear=function(tn=!0,yn=!0,On=!0){let kn=0;if(tn){let Mn=!1;if(Et!==null){const ar=Et.texture.format;Mn=ar===RGBAIntegerFormat||ar===RGIntegerFormat||ar===RedIntegerFormat}if(Mn){const ar=Et.texture.type,hr=ar===UnsignedByteType||ar===UnsignedIntType||ar===UnsignedShortType||ar===UnsignedInt248Type||ar===UnsignedShort4444Type||ar===UnsignedShort5551Type,Wn=fr.getClearColor(),Br=fr.getClearAlpha(),Mr=Wn.r,wr=Wn.g,Pr=Wn.b;hr?(ht[0]=Mr,ht[1]=wr,ht[2]=Pr,ht[3]=Br,nn.clearBufferuiv(nn.COLOR,0,ht)):(mt[0]=Mr,mt[1]=wr,mt[2]=Pr,mt[3]=Br,nn.clearBufferiv(nn.COLOR,0,mt))}else kn|=nn.COLOR_BUFFER_BIT}yn&&(kn|=nn.DEPTH_BUFFER_BIT,nn.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),On&&(kn|=nn.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),nn.clear(kn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){tt.removeEventListener("webglcontextlost",on,!1),tt.removeEventListener("webglcontextrestored",Gn,!1),tt.removeEventListener("webglcontextcreationerror",Xn,!1),er.dispose(),cr.dispose(),sn.dispose(),Bt.dispose(),hn.dispose(),an.dispose(),Rn.dispose(),Sn.dispose(),Hn.dispose(),xn.dispose(),xn.removeEventListener("sessionstart",Yn),xn.removeEventListener("sessionend",Qn),ur.stop()};function on(tn){tn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),St=!0}function Gn(){console.log("THREE.WebGLRenderer: Context Restored."),St=!1;const tn=Qt.autoReset,yn=Jn.enabled,On=Jn.autoUpdate,kn=Jn.needsUpdate,Mn=Jn.type;or(),Qt.autoReset=tn,Jn.enabled=yn,Jn.autoUpdate=On,Jn.needsUpdate=kn,Jn.type=Mn}function Xn(tn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",tn.statusMessage)}function pr(tn){const yn=tn.target;yn.removeEventListener("dispose",pr),Ar(yn)}function Ar(tn){xr(tn),sn.remove(tn)}function xr(tn){const yn=sn.get(tn).programs;yn!==void 0&&(yn.forEach(function(On){Hn.releaseProgram(On)}),tn.isShaderMaterial&&Hn.releaseShaderCache(tn))}this.renderBufferDirect=function(tn,yn,On,kn,Mn,ar){yn===null&&(yn=An);const hr=Mn.isMesh&&Mn.matrixWorld.determinant()<0,Wn=dn(tn,yn,On,kn,Mn);_n.setMaterial(kn,hr);let Br=On.index,Mr=1;if(kn.wireframe===!0){if(Br=mn.getWireframeAttribute(On),Br===void 0)return;Mr=2}const wr=On.drawRange,Pr=On.attributes.position;let Wr=wr.start*Mr,es=(wr.start+wr.count)*Mr;ar!==null&&(Wr=Math.max(Wr,ar.start*Mr),es=Math.min(es,(ar.start+ar.count)*Mr)),Br!==null?(Wr=Math.max(Wr,0),es=Math.min(es,Br.count)):Pr!=null&&(Wr=Math.max(Wr,0),es=Math.min(es,Pr.count));const ts=es-Wr;if(ts<0||ts===1/0)return;Rn.setup(Mn,kn,Wn,On,Br);let Qr,zr=lr;if(Br!==null&&(Qr=cn.get(Br),zr=Nn,zr.setIndex(Qr)),Mn.isMesh)kn.wireframe===!0?(_n.setLineWidth(kn.wireframeLinewidth*fn()),zr.setMode(nn.LINES)):zr.setMode(nn.TRIANGLES);else if(Mn.isLine){let kr=kn.linewidth;kr===void 0&&(kr=1),_n.setLineWidth(kr*fn()),Mn.isLineSegments?zr.setMode(nn.LINES):Mn.isLineLoop?zr.setMode(nn.LINE_LOOP):zr.setMode(nn.LINE_STRIP)}else Mn.isPoints?zr.setMode(nn.POINTS):Mn.isSprite&&zr.setMode(nn.TRIANGLES);if(Mn.isBatchedMesh)if(Mn._multiDrawInstances!==null)zr.renderMultiDrawInstances(Mn._multiDrawStarts,Mn._multiDrawCounts,Mn._multiDrawCount,Mn._multiDrawInstances);else if(Cn.get("WEBGL_multi_draw"))zr.renderMultiDraw(Mn._multiDrawStarts,Mn._multiDrawCounts,Mn._multiDrawCount);else{const kr=Mn._multiDrawStarts,ws=Mn._multiDrawCounts,$r=Mn._multiDrawCount,Ps=Br?cn.get(Br).bytesPerElement:1,Qs=sn.get(kn).currentProgram.getUniforms();for(let Os=0;Os<$r;Os++)Qs.setValue(nn,"_gl_DrawID",Os),zr.render(kr[Os]/Ps,ws[Os])}else if(Mn.isInstancedMesh)zr.renderInstances(Wr,ts,Mn.count);else if(On.isInstancedBufferGeometry){const kr=On._maxInstanceCount!==void 0?On._maxInstanceCount:1/0,ws=Math.min(On.instanceCount,kr);zr.renderInstances(Wr,ts,ws)}else zr.render(Wr,ts)};function un(tn,yn,On){tn.transparent===!0&&tn.side===DoubleSide&&tn.forceSinglePass===!1?(tn.side=BackSide,tn.needsUpdate=!0,Ir(tn,yn,On),tn.side=FrontSide,tn.needsUpdate=!0,Ir(tn,yn,On),tn.side=DoubleSide):Ir(tn,yn,On)}this.compile=function(tn,yn,On=null){On===null&&(On=tn),vt=cr.get(On),vt.init(yn),_t.push(vt),On.traverseVisible(function(Mn){Mn.isLight&&Mn.layers.test(yn.layers)&&(vt.pushLight(Mn),Mn.castShadow&&vt.pushShadow(Mn))}),tn!==On&&tn.traverseVisible(function(Mn){Mn.isLight&&Mn.layers.test(yn.layers)&&(vt.pushLight(Mn),Mn.castShadow&&vt.pushShadow(Mn))}),vt.setupLights();const kn=new Set;return tn.traverse(function(Mn){if(!(Mn.isMesh||Mn.isPoints||Mn.isLine||Mn.isSprite))return;const ar=Mn.material;if(ar)if(Array.isArray(ar))for(let hr=0;hr<ar.length;hr++){const Wn=ar[hr];un(Wn,On,Mn),kn.add(Wn)}else un(ar,On,Mn),kn.add(ar)}),_t.pop(),vt=null,kn},this.compileAsync=function(tn,yn,On=null){const kn=this.compile(tn,yn,On);return new Promise(Mn=>{function ar(){if(kn.forEach(function(hr){sn.get(hr).currentProgram.isReady()&&kn.delete(hr)}),kn.size===0){Mn(tn);return}setTimeout(ar,10)}Cn.get("KHR_parallel_shader_compile")!==null?ar():setTimeout(ar,10)})};let pn=null;function Fn(tn){pn&&pn(tn)}function Yn(){ur.stop()}function Qn(){ur.start()}const ur=new WebGLAnimation;ur.setAnimationLoop(Fn),typeof self<"u"&&ur.setContext(self),this.setAnimationLoop=function(tn){pn=tn,xn.setAnimationLoop(tn),tn===null?ur.stop():ur.start()},xn.addEventListener("sessionstart",Yn),xn.addEventListener("sessionend",Qn),this.render=function(tn,yn){if(yn!==void 0&&yn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(St===!0)return;if(tn.matrixWorldAutoUpdate===!0&&tn.updateMatrixWorld(),yn.parent===null&&yn.matrixWorldAutoUpdate===!0&&yn.updateMatrixWorld(),xn.enabled===!0&&xn.isPresenting===!0&&(xn.cameraAutoUpdate===!0&&xn.updateCamera(yn),yn=xn.getCamera()),tn.isScene===!0&&tn.onBeforeRender(xt,tn,yn,Et),vt=cr.get(tn,_t.length),vt.init(yn),_t.push(vt),qt.multiplyMatrices(yn.projectionMatrix,yn.matrixWorldInverse),Dt.setFromProjectionMatrix(qt),Ut=this.localClippingEnabled,It=ir.init(this.clippingPlanes,Ut),yt=er.get(tn,pt.length),yt.init(),pt.push(yt),xn.enabled===!0&&xn.isPresenting===!0){const ar=xt.xr.getDepthSensingMesh();ar!==null&&vr(ar,yn,-1/0,xt.sortObjects)}vr(tn,yn,0,xt.sortObjects),yt.finish(),xt.sortObjects===!0&&yt.sort(Ot,kt),En=xn.enabled===!1||xn.isPresenting===!1||xn.hasDepthSensing()===!1,En&&fr.addToRenderList(yt,tn),this.info.render.frame++,It===!0&&ir.beginShadows();const On=vt.state.shadowsArray;Jn.render(On,tn,yn),It===!0&&ir.endShadows(),this.info.autoReset===!0&&this.info.reset();const kn=yt.opaque,Mn=yt.transmissive;if(vt.setupLights(),yn.isArrayCamera){const ar=yn.cameras;if(Mn.length>0)for(let hr=0,Wn=ar.length;hr<Wn;hr++){const Br=ar[hr];Fr(kn,Mn,tn,Br)}En&&fr.render(tn);for(let hr=0,Wn=ar.length;hr<Wn;hr++){const Br=ar[hr];Or(yt,tn,Br,Br.viewport)}}else Mn.length>0&&Fr(kn,Mn,tn,yn),En&&fr.render(tn),Or(yt,tn,yn);Et!==null&&(jt.updateMultisampleRenderTarget(Et),jt.updateRenderTargetMipmap(Et)),tn.isScene===!0&&tn.onAfterRender(xt,tn,yn),Rn.resetDefaultState(),wt=-1,Rt=null,_t.pop(),_t.length>0?(vt=_t[_t.length-1],It===!0&&ir.setGlobalState(xt.clippingPlanes,vt.state.camera)):vt=null,pt.pop(),pt.length>0?yt=pt[pt.length-1]:yt=null};function vr(tn,yn,On,kn){if(tn.visible===!1)return;if(tn.layers.test(yn.layers)){if(tn.isGroup)On=tn.renderOrder;else if(tn.isLOD)tn.autoUpdate===!0&&tn.update(yn);else if(tn.isLight)vt.pushLight(tn),tn.castShadow&&vt.pushShadow(tn);else if(tn.isSprite){if(!tn.frustumCulled||Dt.intersectsSprite(tn)){kn&&gn.setFromMatrixPosition(tn.matrixWorld).applyMatrix4(qt);const hr=an.update(tn),Wn=tn.material;Wn.visible&&yt.push(tn,hr,Wn,On,gn.z,null)}}else if((tn.isMesh||tn.isLine||tn.isPoints)&&(!tn.frustumCulled||Dt.intersectsObject(tn))){const hr=an.update(tn),Wn=tn.material;if(kn&&(tn.boundingSphere!==void 0?(tn.boundingSphere===null&&tn.computeBoundingSphere(),gn.copy(tn.boundingSphere.center)):(hr.boundingSphere===null&&hr.computeBoundingSphere(),gn.copy(hr.boundingSphere.center)),gn.applyMatrix4(tn.matrixWorld).applyMatrix4(qt)),Array.isArray(Wn)){const Br=hr.groups;for(let Mr=0,wr=Br.length;Mr<wr;Mr++){const Pr=Br[Mr],Wr=Wn[Pr.materialIndex];Wr&&Wr.visible&&yt.push(tn,hr,Wr,On,gn.z,Pr)}}else Wn.visible&&yt.push(tn,hr,Wn,On,gn.z,null)}}const ar=tn.children;for(let hr=0,Wn=ar.length;hr<Wn;hr++)vr(ar[hr],yn,On,kn)}function Or(tn,yn,On,kn){const Mn=tn.opaque,ar=tn.transmissive,hr=tn.transparent;vt.setupLightsView(On),It===!0&&ir.setGlobalState(xt.clippingPlanes,On),kn&&_n.viewport(Tt.copy(kn)),Mn.length>0&&br(Mn,yn,On),ar.length>0&&br(ar,yn,On),hr.length>0&&br(hr,yn,On),_n.buffers.depth.setTest(!0),_n.buffers.depth.setMask(!0),_n.buffers.color.setMask(!0),_n.setPolygonOffset(!1)}function Fr(tn,yn,On,kn){if((On.isScene===!0?On.overrideMaterial:null)!==null)return;vt.state.transmissionRenderTarget[kn.id]===void 0&&(vt.state.transmissionRenderTarget[kn.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Cn.has("EXT_color_buffer_half_float")||Cn.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:it,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const ar=vt.state.transmissionRenderTarget[kn.id],hr=kn.viewport||Tt;ar.setSize(hr.z,hr.w);const Wn=xt.getRenderTarget();xt.setRenderTarget(ar),xt.getClearColor(Ft),Ht=xt.getClearAlpha(),Ht<1&&xt.setClearColor(16777215,.5),xt.clear(),En&&fr.render(On);const Br=xt.toneMapping;xt.toneMapping=NoToneMapping;const Mr=kn.viewport;if(kn.viewport!==void 0&&(kn.viewport=void 0),vt.setupLightsView(kn),It===!0&&ir.setGlobalState(xt.clippingPlanes,kn),br(tn,On,kn),jt.updateMultisampleRenderTarget(ar),jt.updateRenderTargetMipmap(ar),Cn.has("WEBGL_multisampled_render_to_texture")===!1){let wr=!1;for(let Pr=0,Wr=yn.length;Pr<Wr;Pr++){const es=yn[Pr],ts=es.object,Qr=es.geometry,zr=es.material,kr=es.group;if(zr.side===DoubleSide&&ts.layers.test(kn.layers)){const ws=zr.side;zr.side=BackSide,zr.needsUpdate=!0,Lr(ts,On,kn,Qr,zr,kr),zr.side=ws,zr.needsUpdate=!0,wr=!0}}wr===!0&&(jt.updateMultisampleRenderTarget(ar),jt.updateRenderTargetMipmap(ar))}xt.setRenderTarget(Wn),xt.setClearColor(Ft,Ht),Mr!==void 0&&(kn.viewport=Mr),xt.toneMapping=Br}function br(tn,yn,On){const kn=yn.isScene===!0?yn.overrideMaterial:null;for(let Mn=0,ar=tn.length;Mn<ar;Mn++){const hr=tn[Mn],Wn=hr.object,Br=hr.geometry,Mr=kn===null?hr.material:kn,wr=hr.group;Wn.layers.test(On.layers)&&Lr(Wn,yn,On,Br,Mr,wr)}}function Lr(tn,yn,On,kn,Mn,ar){tn.onBeforeRender(xt,yn,On,kn,Mn,ar),tn.modelViewMatrix.multiplyMatrices(On.matrixWorldInverse,tn.matrixWorld),tn.normalMatrix.getNormalMatrix(tn.modelViewMatrix),Mn.onBeforeRender(xt,yn,On,kn,tn,ar),Mn.transparent===!0&&Mn.side===DoubleSide&&Mn.forceSinglePass===!1?(Mn.side=BackSide,Mn.needsUpdate=!0,xt.renderBufferDirect(On,yn,kn,Mn,tn,ar),Mn.side=FrontSide,Mn.needsUpdate=!0,xt.renderBufferDirect(On,yn,kn,Mn,tn,ar),Mn.side=DoubleSide):xt.renderBufferDirect(On,yn,kn,Mn,tn,ar),tn.onAfterRender(xt,yn,On,kn,Mn,ar)}function Ir(tn,yn,On){yn.isScene!==!0&&(yn=An);const kn=sn.get(tn),Mn=vt.state.lights,ar=vt.state.shadowsArray,hr=Mn.state.version,Wn=Hn.getParameters(tn,Mn.state,ar,yn,On),Br=Hn.getProgramCacheKey(Wn);let Mr=kn.programs;kn.environment=tn.isMeshStandardMaterial?yn.environment:null,kn.fog=yn.fog,kn.envMap=(tn.isMeshStandardMaterial?hn:Bt).get(tn.envMap||kn.environment),kn.envMapRotation=kn.environment!==null&&tn.envMap===null?yn.environmentRotation:tn.envMapRotation,Mr===void 0&&(tn.addEventListener("dispose",pr),Mr=new Map,kn.programs=Mr);let wr=Mr.get(Br);if(wr!==void 0){if(kn.currentProgram===wr&&kn.lightsStateVersion===hr)return en(tn,Wn),wr}else Wn.uniforms=Hn.getUniforms(tn),tn.onBeforeCompile(Wn,xt),wr=Hn.acquireProgram(Wn,Br),Mr.set(Br,wr),kn.uniforms=Wn.uniforms;const Pr=kn.uniforms;return(!tn.isShaderMaterial&&!tn.isRawShaderMaterial||tn.clipping===!0)&&(Pr.clippingPlanes=ir.uniform),en(tn,Wn),kn.needsLights=tr(tn),kn.lightsStateVersion=hr,kn.needsLights&&(Pr.ambientLightColor.value=Mn.state.ambient,Pr.lightProbe.value=Mn.state.probe,Pr.directionalLights.value=Mn.state.directional,Pr.directionalLightShadows.value=Mn.state.directionalShadow,Pr.spotLights.value=Mn.state.spot,Pr.spotLightShadows.value=Mn.state.spotShadow,Pr.rectAreaLights.value=Mn.state.rectArea,Pr.ltc_1.value=Mn.state.rectAreaLTC1,Pr.ltc_2.value=Mn.state.rectAreaLTC2,Pr.pointLights.value=Mn.state.point,Pr.pointLightShadows.value=Mn.state.pointShadow,Pr.hemisphereLights.value=Mn.state.hemi,Pr.directionalShadowMap.value=Mn.state.directionalShadowMap,Pr.directionalShadowMatrix.value=Mn.state.directionalShadowMatrix,Pr.spotShadowMap.value=Mn.state.spotShadowMap,Pr.spotLightMatrix.value=Mn.state.spotLightMatrix,Pr.spotLightMap.value=Mn.state.spotLightMap,Pr.pointShadowMap.value=Mn.state.pointShadowMap,Pr.pointShadowMatrix.value=Mn.state.pointShadowMatrix),kn.currentProgram=wr,kn.uniformsList=null,wr}function Ur(tn){if(tn.uniformsList===null){const yn=tn.currentProgram.getUniforms();tn.uniformsList=WebGLUniforms.seqWithValue(yn.seq,tn.uniforms)}return tn.uniformsList}function en(tn,yn){const On=sn.get(tn);On.outputColorSpace=yn.outputColorSpace,On.batching=yn.batching,On.batchingColor=yn.batchingColor,On.instancing=yn.instancing,On.instancingColor=yn.instancingColor,On.instancingMorph=yn.instancingMorph,On.skinning=yn.skinning,On.morphTargets=yn.morphTargets,On.morphNormals=yn.morphNormals,On.morphColors=yn.morphColors,On.morphTargetsCount=yn.morphTargetsCount,On.numClippingPlanes=yn.numClippingPlanes,On.numIntersection=yn.numClipIntersection,On.vertexAlphas=yn.vertexAlphas,On.vertexTangents=yn.vertexTangents,On.toneMapping=yn.toneMapping}function dn(tn,yn,On,kn,Mn){yn.isScene!==!0&&(yn=An),jt.resetTextureUnits();const ar=yn.fog,hr=kn.isMeshStandardMaterial?yn.environment:null,Wn=Et===null?xt.outputColorSpace:Et.isXRRenderTarget===!0?Et.texture.colorSpace:LinearSRGBColorSpace$1,Br=(kn.isMeshStandardMaterial?hn:Bt).get(kn.envMap||hr),Mr=kn.vertexColors===!0&&!!On.attributes.color&&On.attributes.color.itemSize===4,wr=!!On.attributes.tangent&&(!!kn.normalMap||kn.anisotropy>0),Pr=!!On.morphAttributes.position,Wr=!!On.morphAttributes.normal,es=!!On.morphAttributes.color;let ts=NoToneMapping;kn.toneMapped&&(Et===null||Et.isXRRenderTarget===!0)&&(ts=xt.toneMapping);const Qr=On.morphAttributes.position||On.morphAttributes.normal||On.morphAttributes.color,zr=Qr!==void 0?Qr.length:0,kr=sn.get(kn),ws=vt.state.lights;if(It===!0&&(Ut===!0||tn!==Rt)){const cs=tn===Rt&&kn.id===wt;ir.setState(kn,tn,cs)}let $r=!1;kn.version===kr.__version?(kr.needsLights&&kr.lightsStateVersion!==ws.state.version||kr.outputColorSpace!==Wn||Mn.isBatchedMesh&&kr.batching===!1||!Mn.isBatchedMesh&&kr.batching===!0||Mn.isBatchedMesh&&kr.batchingColor===!0&&Mn.colorTexture===null||Mn.isBatchedMesh&&kr.batchingColor===!1&&Mn.colorTexture!==null||Mn.isInstancedMesh&&kr.instancing===!1||!Mn.isInstancedMesh&&kr.instancing===!0||Mn.isSkinnedMesh&&kr.skinning===!1||!Mn.isSkinnedMesh&&kr.skinning===!0||Mn.isInstancedMesh&&kr.instancingColor===!0&&Mn.instanceColor===null||Mn.isInstancedMesh&&kr.instancingColor===!1&&Mn.instanceColor!==null||Mn.isInstancedMesh&&kr.instancingMorph===!0&&Mn.morphTexture===null||Mn.isInstancedMesh&&kr.instancingMorph===!1&&Mn.morphTexture!==null||kr.envMap!==Br||kn.fog===!0&&kr.fog!==ar||kr.numClippingPlanes!==void 0&&(kr.numClippingPlanes!==ir.numPlanes||kr.numIntersection!==ir.numIntersection)||kr.vertexAlphas!==Mr||kr.vertexTangents!==wr||kr.morphTargets!==Pr||kr.morphNormals!==Wr||kr.morphColors!==es||kr.toneMapping!==ts||kr.morphTargetsCount!==zr)&&($r=!0):($r=!0,kr.__version=kn.version);let Ps=kr.currentProgram;$r===!0&&(Ps=Ir(kn,yn,Mn));let Qs=!1,Os=!1,Ws=!1;const us=Ps.getUniforms(),zs=kr.uniforms;if(_n.useProgram(Ps.program)&&(Qs=!0,Os=!0,Ws=!0),kn.id!==wt&&(wt=kn.id,Os=!0),Qs||Rt!==tn){vn.reverseDepthBuffer?(Yt.copy(tn.projectionMatrix),toNormalizedProjectionMatrix(Yt),toReversedProjectionMatrix(Yt),us.setValue(nn,"projectionMatrix",Yt)):us.setValue(nn,"projectionMatrix",tn.projectionMatrix),us.setValue(nn,"viewMatrix",tn.matrixWorldInverse);const cs=us.map.cameraPosition;cs!==void 0&&cs.setValue(nn,rn.setFromMatrixPosition(tn.matrixWorld)),vn.logarithmicDepthBuffer&&us.setValue(nn,"logDepthBufFC",2/(Math.log(tn.far+1)/Math.LN2)),(kn.isMeshPhongMaterial||kn.isMeshToonMaterial||kn.isMeshLambertMaterial||kn.isMeshBasicMaterial||kn.isMeshStandardMaterial||kn.isShaderMaterial)&&us.setValue(nn,"isOrthographic",tn.isOrthographicCamera===!0),Rt!==tn&&(Rt=tn,Os=!0,Ws=!0)}if(Mn.isSkinnedMesh){us.setOptional(nn,Mn,"bindMatrix"),us.setOptional(nn,Mn,"bindMatrixInverse");const cs=Mn.skeleton;cs&&(cs.boneTexture===null&&cs.computeBoneTexture(),us.setValue(nn,"boneTexture",cs.boneTexture,jt))}Mn.isBatchedMesh&&(us.setOptional(nn,Mn,"batchingTexture"),us.setValue(nn,"batchingTexture",Mn._matricesTexture,jt),us.setOptional(nn,Mn,"batchingIdTexture"),us.setValue(nn,"batchingIdTexture",Mn._indirectTexture,jt),us.setOptional(nn,Mn,"batchingColorTexture"),Mn._colorsTexture!==null&&us.setValue(nn,"batchingColorTexture",Mn._colorsTexture,jt));const Ns=On.morphAttributes;if((Ns.position!==void 0||Ns.normal!==void 0||Ns.color!==void 0)&&dr.update(Mn,On,Ps),(Os||kr.receiveShadow!==Mn.receiveShadow)&&(kr.receiveShadow=Mn.receiveShadow,us.setValue(nn,"receiveShadow",Mn.receiveShadow)),kn.isMeshGouraudMaterial&&kn.envMap!==null&&(zs.envMap.value=Br,zs.flipEnvMap.value=Br.isCubeTexture&&Br.isRenderTargetTexture===!1?-1:1),kn.isMeshStandardMaterial&&kn.envMap===null&&yn.environment!==null&&(zs.envMapIntensity.value=yn.environmentIntensity),Os&&(us.setValue(nn,"toneMappingExposure",xt.toneMappingExposure),kr.needsLights&&Bn(zs,Ws),ar&&kn.fog===!0&&Pn.refreshFogUniforms(zs,ar),Pn.refreshMaterialUniforms(zs,kn,Jt,Wt,vt.state.transmissionRenderTarget[tn.id]),WebGLUniforms.upload(nn,Ur(kr),zs,jt)),kn.isShaderMaterial&&kn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(nn,Ur(kr),zs,jt),kn.uniformsNeedUpdate=!1),kn.isSpriteMaterial&&us.setValue(nn,"center",Mn.center),us.setValue(nn,"modelViewMatrix",Mn.modelViewMatrix),us.setValue(nn,"normalMatrix",Mn.normalMatrix),us.setValue(nn,"modelMatrix",Mn.matrixWorld),kn.isShaderMaterial||kn.isRawShaderMaterial){const cs=kn.uniformsGroups;for(let Xs=0,bo=cs.length;Xs<bo;Xs++){const no=cs[Xs];Sn.update(no,Ps),Sn.bind(no,Ps)}}return Ps}function Bn(tn,yn){tn.ambientLightColor.needsUpdate=yn,tn.lightProbe.needsUpdate=yn,tn.directionalLights.needsUpdate=yn,tn.directionalLightShadows.needsUpdate=yn,tn.pointLights.needsUpdate=yn,tn.pointLightShadows.needsUpdate=yn,tn.spotLights.needsUpdate=yn,tn.spotLightShadows.needsUpdate=yn,tn.rectAreaLights.needsUpdate=yn,tn.hemisphereLights.needsUpdate=yn}function tr(tn){return tn.isMeshLambertMaterial||tn.isMeshToonMaterial||tn.isMeshPhongMaterial||tn.isMeshStandardMaterial||tn.isShadowMaterial||tn.isShaderMaterial&&tn.lights===!0}this.getActiveCubeFace=function(){return At},this.getActiveMipmapLevel=function(){return bt},this.getRenderTarget=function(){return Et},this.setRenderTargetTextures=function(tn,yn,On){sn.get(tn.texture).__webglTexture=yn,sn.get(tn.depthTexture).__webglTexture=On;const kn=sn.get(tn);kn.__hasExternalTextures=!0,kn.__autoAllocateDepthBuffer=On===void 0,kn.__autoAllocateDepthBuffer||Cn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),kn.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(tn,yn){const On=sn.get(tn);On.__webglFramebuffer=yn,On.__useDefaultFramebuffer=yn===void 0},this.setRenderTarget=function(tn,yn=0,On=0){Et=tn,At=yn,bt=On;let kn=!0,Mn=null,ar=!1,hr=!1;if(tn){const Br=sn.get(tn);if(Br.__useDefaultFramebuffer!==void 0)_n.bindFramebuffer(nn.FRAMEBUFFER,null),kn=!1;else if(Br.__webglFramebuffer===void 0)jt.setupRenderTarget(tn);else if(Br.__hasExternalTextures)jt.rebindTextures(tn,sn.get(tn.texture).__webglTexture,sn.get(tn.depthTexture).__webglTexture);else if(tn.depthBuffer){const Pr=tn.depthTexture;if(Br.__boundDepthTexture!==Pr){if(Pr!==null&&sn.has(Pr)&&(tn.width!==Pr.image.width||tn.height!==Pr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");jt.setupDepthRenderbuffer(tn)}}const Mr=tn.texture;(Mr.isData3DTexture||Mr.isDataArrayTexture||Mr.isCompressedArrayTexture)&&(hr=!0);const wr=sn.get(tn).__webglFramebuffer;tn.isWebGLCubeRenderTarget?(Array.isArray(wr[yn])?Mn=wr[yn][On]:Mn=wr[yn],ar=!0):tn.samples>0&&jt.useMultisampledRTT(tn)===!1?Mn=sn.get(tn).__webglMultisampledFramebuffer:Array.isArray(wr)?Mn=wr[On]:Mn=wr,Tt.copy(tn.viewport),Mt.copy(tn.scissor),Lt=tn.scissorTest}else Tt.copy(Gt).multiplyScalar(Jt).floor(),Mt.copy(zt).multiplyScalar(Jt).floor(),Lt=Vt;if(_n.bindFramebuffer(nn.FRAMEBUFFER,Mn)&&kn&&_n.drawBuffers(tn,Mn),_n.viewport(Tt),_n.scissor(Mt),_n.setScissorTest(Lt),ar){const Br=sn.get(tn.texture);nn.framebufferTexture2D(nn.FRAMEBUFFER,nn.COLOR_ATTACHMENT0,nn.TEXTURE_CUBE_MAP_POSITIVE_X+yn,Br.__webglTexture,On)}else if(hr){const Br=sn.get(tn.texture),Mr=yn||0;nn.framebufferTextureLayer(nn.FRAMEBUFFER,nn.COLOR_ATTACHMENT0,Br.__webglTexture,On||0,Mr)}wt=-1},this.readRenderTargetPixels=function(tn,yn,On,kn,Mn,ar,hr){if(!(tn&&tn.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Wn=sn.get(tn).__webglFramebuffer;if(tn.isWebGLCubeRenderTarget&&hr!==void 0&&(Wn=Wn[hr]),Wn){_n.bindFramebuffer(nn.FRAMEBUFFER,Wn);try{const Br=tn.texture,Mr=Br.format,wr=Br.type;if(!vn.textureFormatReadable(Mr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!vn.textureTypeReadable(wr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}yn>=0&&yn<=tn.width-kn&&On>=0&&On<=tn.height-Mn&&nn.readPixels(yn,On,kn,Mn,bn.convert(Mr),bn.convert(wr),ar)}finally{const Br=Et!==null?sn.get(Et).__webglFramebuffer:null;_n.bindFramebuffer(nn.FRAMEBUFFER,Br)}}},this.readRenderTargetPixelsAsync=async function(tn,yn,On,kn,Mn,ar,hr){if(!(tn&&tn.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Wn=sn.get(tn).__webglFramebuffer;if(tn.isWebGLCubeRenderTarget&&hr!==void 0&&(Wn=Wn[hr]),Wn){const Br=tn.texture,Mr=Br.format,wr=Br.type;if(!vn.textureFormatReadable(Mr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!vn.textureTypeReadable(wr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(yn>=0&&yn<=tn.width-kn&&On>=0&&On<=tn.height-Mn){_n.bindFramebuffer(nn.FRAMEBUFFER,Wn);const Pr=nn.createBuffer();nn.bindBuffer(nn.PIXEL_PACK_BUFFER,Pr),nn.bufferData(nn.PIXEL_PACK_BUFFER,ar.byteLength,nn.STREAM_READ),nn.readPixels(yn,On,kn,Mn,bn.convert(Mr),bn.convert(wr),0);const Wr=Et!==null?sn.get(Et).__webglFramebuffer:null;_n.bindFramebuffer(nn.FRAMEBUFFER,Wr);const es=nn.fenceSync(nn.SYNC_GPU_COMMANDS_COMPLETE,0);return nn.flush(),await probeAsync(nn,es,4),nn.bindBuffer(nn.PIXEL_PACK_BUFFER,Pr),nn.getBufferSubData(nn.PIXEL_PACK_BUFFER,0,ar),nn.deleteBuffer(Pr),nn.deleteSync(es),ar}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(tn,yn=null,On=0){tn.isTexture!==!0&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),yn=arguments[0]||null,tn=arguments[1]);const kn=Math.pow(2,-On),Mn=Math.floor(tn.image.width*kn),ar=Math.floor(tn.image.height*kn),hr=yn!==null?yn.x:0,Wn=yn!==null?yn.y:0;jt.setTexture2D(tn,0),nn.copyTexSubImage2D(nn.TEXTURE_2D,On,0,0,hr,Wn,Mn,ar),_n.unbindTexture()},this.copyTextureToTexture=function(tn,yn,On=null,kn=null,Mn=0){tn.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),kn=arguments[0]||null,tn=arguments[1],yn=arguments[2],Mn=arguments[3]||0,On=null);let ar,hr,Wn,Br,Mr,wr;On!==null?(ar=On.max.x-On.min.x,hr=On.max.y-On.min.y,Wn=On.min.x,Br=On.min.y):(ar=tn.image.width,hr=tn.image.height,Wn=0,Br=0),kn!==null?(Mr=kn.x,wr=kn.y):(Mr=0,wr=0);const Pr=bn.convert(yn.format),Wr=bn.convert(yn.type);jt.setTexture2D(yn,0),nn.pixelStorei(nn.UNPACK_FLIP_Y_WEBGL,yn.flipY),nn.pixelStorei(nn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yn.premultiplyAlpha),nn.pixelStorei(nn.UNPACK_ALIGNMENT,yn.unpackAlignment);const es=nn.getParameter(nn.UNPACK_ROW_LENGTH),ts=nn.getParameter(nn.UNPACK_IMAGE_HEIGHT),Qr=nn.getParameter(nn.UNPACK_SKIP_PIXELS),zr=nn.getParameter(nn.UNPACK_SKIP_ROWS),kr=nn.getParameter(nn.UNPACK_SKIP_IMAGES),ws=tn.isCompressedTexture?tn.mipmaps[Mn]:tn.image;nn.pixelStorei(nn.UNPACK_ROW_LENGTH,ws.width),nn.pixelStorei(nn.UNPACK_IMAGE_HEIGHT,ws.height),nn.pixelStorei(nn.UNPACK_SKIP_PIXELS,Wn),nn.pixelStorei(nn.UNPACK_SKIP_ROWS,Br),tn.isDataTexture?nn.texSubImage2D(nn.TEXTURE_2D,Mn,Mr,wr,ar,hr,Pr,Wr,ws.data):tn.isCompressedTexture?nn.compressedTexSubImage2D(nn.TEXTURE_2D,Mn,Mr,wr,ws.width,ws.height,Pr,ws.data):nn.texSubImage2D(nn.TEXTURE_2D,Mn,Mr,wr,ar,hr,Pr,Wr,ws),nn.pixelStorei(nn.UNPACK_ROW_LENGTH,es),nn.pixelStorei(nn.UNPACK_IMAGE_HEIGHT,ts),nn.pixelStorei(nn.UNPACK_SKIP_PIXELS,Qr),nn.pixelStorei(nn.UNPACK_SKIP_ROWS,zr),nn.pixelStorei(nn.UNPACK_SKIP_IMAGES,kr),Mn===0&&yn.generateMipmaps&&nn.generateMipmap(nn.TEXTURE_2D),_n.unbindTexture()},this.copyTextureToTexture3D=function(tn,yn,On=null,kn=null,Mn=0){tn.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),On=arguments[0]||null,kn=arguments[1]||null,tn=arguments[2],yn=arguments[3],Mn=arguments[4]||0);let ar,hr,Wn,Br,Mr,wr,Pr,Wr,es;const ts=tn.isCompressedTexture?tn.mipmaps[Mn]:tn.image;On!==null?(ar=On.max.x-On.min.x,hr=On.max.y-On.min.y,Wn=On.max.z-On.min.z,Br=On.min.x,Mr=On.min.y,wr=On.min.z):(ar=ts.width,hr=ts.height,Wn=ts.depth,Br=0,Mr=0,wr=0),kn!==null?(Pr=kn.x,Wr=kn.y,es=kn.z):(Pr=0,Wr=0,es=0);const Qr=bn.convert(yn.format),zr=bn.convert(yn.type);let kr;if(yn.isData3DTexture)jt.setTexture3D(yn,0),kr=nn.TEXTURE_3D;else if(yn.isDataArrayTexture||yn.isCompressedArrayTexture)jt.setTexture2DArray(yn,0),kr=nn.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nn.pixelStorei(nn.UNPACK_FLIP_Y_WEBGL,yn.flipY),nn.pixelStorei(nn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yn.premultiplyAlpha),nn.pixelStorei(nn.UNPACK_ALIGNMENT,yn.unpackAlignment);const ws=nn.getParameter(nn.UNPACK_ROW_LENGTH),$r=nn.getParameter(nn.UNPACK_IMAGE_HEIGHT),Ps=nn.getParameter(nn.UNPACK_SKIP_PIXELS),Qs=nn.getParameter(nn.UNPACK_SKIP_ROWS),Os=nn.getParameter(nn.UNPACK_SKIP_IMAGES);nn.pixelStorei(nn.UNPACK_ROW_LENGTH,ts.width),nn.pixelStorei(nn.UNPACK_IMAGE_HEIGHT,ts.height),nn.pixelStorei(nn.UNPACK_SKIP_PIXELS,Br),nn.pixelStorei(nn.UNPACK_SKIP_ROWS,Mr),nn.pixelStorei(nn.UNPACK_SKIP_IMAGES,wr),tn.isDataTexture||tn.isData3DTexture?nn.texSubImage3D(kr,Mn,Pr,Wr,es,ar,hr,Wn,Qr,zr,ts.data):yn.isCompressedArrayTexture?nn.compressedTexSubImage3D(kr,Mn,Pr,Wr,es,ar,hr,Wn,Qr,ts.data):nn.texSubImage3D(kr,Mn,Pr,Wr,es,ar,hr,Wn,Qr,zr,ts),nn.pixelStorei(nn.UNPACK_ROW_LENGTH,ws),nn.pixelStorei(nn.UNPACK_IMAGE_HEIGHT,$r),nn.pixelStorei(nn.UNPACK_SKIP_PIXELS,Ps),nn.pixelStorei(nn.UNPACK_SKIP_ROWS,Qs),nn.pixelStorei(nn.UNPACK_SKIP_IMAGES,Os),Mn===0&&yn.generateMipmaps&&nn.generateMipmap(kr),_n.unbindTexture()},this.initRenderTarget=function(tn){sn.get(tn).__webglFramebuffer===void 0&&jt.setupRenderTarget(tn)},this.initTexture=function(tn){tn.isCubeTexture?jt.setTextureCube(tn,0):tn.isData3DTexture?jt.setTexture3D(tn,0):tn.isDataArrayTexture||tn.isCompressedArrayTexture?jt.setTexture2DArray(tn,0):jt.setTexture2D(tn,0),_n.unbindTexture()},this.resetState=function(){At=0,bt=0,Et=null,_n.reset(),Rn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(_){this._outputColorSpace=_;const tt=this.getContext();tt.drawingBufferColorSpace=_===DisplayP3ColorSpace?"display-p3":"srgb",tt.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}}class FogExp2{constructor(_,tt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(_),this.density=tt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,tt=1,nt=1e3){this.isFog=!0,this.name="",this.color=new Color$1(_),this.near=tt,this.far=nt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Scene$1=class extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,tt){return super.copy(_,tt),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,this.backgroundRotation.copy(_.backgroundRotation),this.environmentIntensity=_.environmentIntensity,this.environmentRotation.copy(_.environmentRotation),_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const tt=super.toJSON(_);return this.fog!==null&&(tt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(tt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(tt.object.backgroundIntensity=this.backgroundIntensity),tt.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(tt.object.environmentIntensity=this.environmentIntensity),tt.object.environmentRotation=this.environmentRotation.toArray(),tt}};class InterleavedBuffer{constructor(_,tt){this.isInterleavedBuffer=!0,this.array=_,this.stride=tt,this.count=_!==void 0?_.length/tt:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,tt){this.updateRanges.push({start:_,count:tt})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,tt,nt){_*=this.stride,nt*=tt.stride;for(let rt=0,it=this.stride;rt<it;rt++)this.array[_+rt]=tt.array[nt+rt];return this}set(_,tt=0){return this.array.set(_,tt),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const tt=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),nt=new this.constructor(tt,this.stride);return nt.setUsage(this.usage),nt}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(_,tt,nt,rt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=tt,this.offset=nt,this.normalized=rt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let tt=0,nt=this.data.count;tt<nt;tt++)_vector$6.fromBufferAttribute(this,tt),_vector$6.applyMatrix4(_),this.setXYZ(tt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$6.fromBufferAttribute(this,tt),_vector$6.applyNormalMatrix(_),this.setXYZ(tt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$6.fromBufferAttribute(this,tt),_vector$6.transformDirection(_),this.setXYZ(tt,_vector$6.x,_vector$6.y,_vector$6.z);return this}getComponent(_,tt){let nt=this.array[_*this.data.stride+this.offset+tt];return this.normalized&&(nt=denormalize(nt,this.array)),nt}setComponent(_,tt,nt){return this.normalized&&(nt=normalize$5(nt,this.array)),this.data.array[_*this.data.stride+this.offset+tt]=nt,this}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset]=tt,this}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+1]=tt,this}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+2]=tt,this}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+3]=tt,this}getX(_){let tt=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getY(_){let tt=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getZ(_){let tt=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getW(_){let tt=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setXY(_,tt,nt){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this}setXYZ(_,tt,nt,rt){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this}setXYZW(_,tt,nt,rt,it){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this.data.array[_+3]=it,this}clone(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const tt=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)tt.push(this.data.array[rt+it])}return new BufferAttribute(new this.array.constructor(tt),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const tt=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)tt.push(this.data.array[rt+it])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:tt,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const tt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),nt=new InterleavedBuffer(tt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(nt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(nt,2,3,!1))}this.geometry=_geometry,this.material=_,this.center=new Vector2(.5,.5)}raycast(_,tt){_.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const nt=this.material.rotation;let rt,it;nt!==0&&(it=Math.cos(nt),rt=Math.sin(nt));const st=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,st,_worldScale,rt,it),transformVertex(_vB.set(.5,-.5,0),_mvPosition,st,_worldScale,rt,it),transformVertex(_vC.set(.5,.5,0),_mvPosition,st,_worldScale,rt,it),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let ot=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(ot===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,st,_worldScale,rt,it),_uvB.set(0,1),ot=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),ot===null))return;const at=_.ray.origin.distanceTo(_intersectPoint);at<_.near||at>_.far||tt.push({distance:at,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,tt){return super.copy(_,tt),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(_e,_,tt,nt,rt,it){_alignedPosition.subVectors(_e,tt).addScalar(.5).multiply(nt),rt!==void 0?(_rotatedPosition.x=it*_alignedPosition.x-rt*_alignedPosition.y,_rotatedPosition.y=rt*_alignedPosition.x+it*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_e.copy(_),_e.x+=_rotatedPosition.x,_e.y+=_rotatedPosition.y,_e.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const tt=_.levels;for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];this.addLevel(it.object.clone(),it.distance,it.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,tt=0,nt=0){tt=Math.abs(tt);const rt=this.levels;let it;for(it=0;it<rt.length&&!(tt<rt[it].distance);it++);return rt.splice(it,0,{distance:tt,hysteresis:nt,object:_}),this.add(_),this}removeLevel(_){const tt=this.levels;for(let nt=0;nt<tt.length;nt++)if(tt[nt].distance===_){const rt=tt.splice(nt,1);return this.remove(rt[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const tt=this.levels;if(tt.length>0){let nt,rt;for(nt=1,rt=tt.length;nt<rt;nt++){let it=tt[nt].distance;if(tt[nt].object.visible&&(it-=it*tt[nt].hysteresis),_<it)break}return tt[nt-1].object}return null}raycast(_,tt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const rt=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(rt).raycast(_,tt)}}update(_){const tt=this.levels;if(tt.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const nt=_v1$2.distanceTo(_v2$1)/_.zoom;tt[0].object.visible=!0;let rt,it;for(rt=1,it=tt.length;rt<it;rt++){let st=tt[rt].distance;if(tt[rt].object.visible&&(st-=st*tt[rt].hysteresis),nt>=st)tt[rt-1].object.visible=!1,tt[rt].object.visible=!0;else break}for(this._currentLevel=rt-1;rt<it;rt++)tt[rt].object.visible=!1}}toJSON(_){const tt=super.toJSON(_);this.autoUpdate===!1&&(tt.object.autoUpdate=!1),tt.object.levels=[];const nt=this.levels;for(let rt=0,it=nt.length;rt<it;rt++){const st=nt[rt];tt.object.levels.push({object:st.object.uuid,distance:st.distance,hysteresis:st.hysteresis})}return tt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,tt){super(_,tt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const tt=_.getAttribute("position");for(let nt=0;nt<tt.count;nt++)this.getVertexPosition(nt,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const tt=_.getAttribute("position");for(let nt=0;nt<tt.count;nt++)this.getVertexPosition(nt,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,tt){return super.copy(_,tt),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,tt){const nt=this.material,rt=this.matrixWorld;nt!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(rt),_.ray.intersectsSphere(_sphere$4)!==!1&&(_inverseMatrix$2.copy(rt).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,tt,_ray$2)))}getVertexPosition(_,tt){return super.getVertexPosition(_,tt),this.applyBoneTransform(_,tt),tt}bind(_,tt){this.skeleton=_,tt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),tt=this.matrixWorld),this.bindMatrix.copy(tt),this.bindMatrixInverse.copy(tt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,tt=this.geometry.attributes.skinWeight;for(let nt=0,rt=tt.count;nt<rt;nt++){_.fromBufferAttribute(tt,nt);const it=1/_.manhattanLength();it!==1/0?_.multiplyScalar(it):_.set(1,0,0,0),tt.setXYZW(nt,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,tt){const nt=this.skeleton,rt=this.geometry;_skinIndex.fromBufferAttribute(rt.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(rt.attributes.skinWeight,_),_basePosition.copy(tt).applyMatrix4(this.bindMatrix),tt.set(0,0,0);for(let it=0;it<4;it++){const st=_skinWeight.getComponent(it);if(st!==0){const ot=_skinIndex.getComponent(it);_matrix4.multiplyMatrices(nt.bones[ot].matrixWorld,nt.boneInverses[ot]),tt.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),st)}}return tt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,tt=1,nt=1,rt,it,st,ot,at,lt=NearestFilter,ct=NearestFilter,ut,dt){super(null,st,ot,at,lt,ct,rt,it,ut,dt),this.isDataTexture=!0,this.image={data:_,width:tt,height:nt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(_=[],tt=[]){this.uuid=generateUUID$1(),this.bones=_.slice(0),this.boneInverses=tt,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const _=this.bones,tt=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),tt.length===0)this.calculateInverses();else if(_.length!==tt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let nt=0,rt=this.bones.length;nt<rt;nt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,tt=this.bones.length;_<tt;_++){const nt=new Matrix4;this.bones[_]&&nt.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(nt)}}pose(){for(let _=0,tt=this.bones.length;_<tt;_++){const nt=this.bones[_];nt&&nt.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,tt=this.bones.length;_<tt;_++){const nt=this.bones[_];nt&&(nt.parent&&nt.parent.isBone?(nt.matrix.copy(nt.parent.matrixWorld).invert(),nt.matrix.multiply(nt.matrixWorld)):nt.matrix.copy(nt.matrixWorld),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale))}}update(){const _=this.bones,tt=this.boneInverses,nt=this.boneMatrices,rt=this.boneTexture;for(let it=0,st=_.length;it<st;it++){const ot=_[it]?_[it].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(ot,tt[it]),_offsetMatrix.toArray(nt,it*16)}rt!==null&&(rt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const tt=new Float32Array(_*_*4);tt.set(this.boneMatrices);const nt=new DataTexture(tt,_,_,RGBAFormat,FloatType);return nt.needsUpdate=!0,this.boneMatrices=tt,this.boneTexture=nt,this}getBoneByName(_){for(let tt=0,nt=this.bones.length;tt<nt;tt++){const rt=this.bones[tt];if(rt.name===_)return rt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,tt){this.uuid=_.uuid;for(let nt=0,rt=_.bones.length;nt<rt;nt++){const it=_.bones[nt];let st=tt[it];st===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",it),st=new Bone),this.bones.push(st),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[nt]))}return this.init(),this}toJSON(){const _={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const tt=this.bones,nt=this.boneInverses;for(let rt=0,it=tt.length;rt<it;rt++){const st=tt[rt];_.bones.push(st.uuid);const ot=nt[rt];_.boneInverses.push(ot.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,tt,nt,rt=1){super(_,tt,nt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=rt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(_,tt,nt){super(_,tt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(nt*16),16),this.instanceColor=null,this.morphTexture=null,this.count=nt,this.boundingBox=null,this.boundingSphere=null;for(let rt=0;rt<nt;rt++)this.setMatrixAt(rt,_identity)}computeBoundingBox(){const _=this.geometry,tt=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let nt=0;nt<tt;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,tt=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let nt=0;nt<tt;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_sphere$3.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(_,tt){return super.copy(_,tt),this.instanceMatrix.copy(_.instanceMatrix),_.morphTexture!==null&&(this.morphTexture=_.morphTexture.clone()),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,tt){tt.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,tt){tt.fromArray(this.instanceMatrix.array,_*16)}getMorphAt(_,tt){const nt=tt.morphTargetInfluences,rt=this.morphTexture.source.data.data,it=nt.length+1,st=_*it+1;for(let ot=0;ot<nt.length;ot++)nt[ot]=rt[st+ot]}raycast(_,tt){const nt=this.matrixWorld,rt=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(nt),_.ray.intersectsSphere(_sphere$3)!==!1))for(let it=0;it<rt;it++){this.getMatrixAt(it,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(nt,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(_,_instanceIntersects);for(let st=0,ot=_instanceIntersects.length;st<ot;st++){const at=_instanceIntersects[st];at.instanceId=it,at.object=this,tt.push(at)}_instanceIntersects.length=0}}setColorAt(_,tt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),tt.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,tt){tt.toArray(this.instanceMatrix.array,_*16)}setMorphAt(_,tt){const nt=tt.morphTargetInfluences,rt=nt.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(rt*this.count),rt,this.count,RedFormat,FloatType));const it=this.morphTexture.source.data.data;let st=0;for(let lt=0;lt<nt.length;lt++)st+=nt[lt];const ot=this.geometry.morphTargetsRelative?1:1-st,at=rt*_;it[at]=ot,it.set(nt,at+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function sortOpaque(_e,_){return _e.z-_.z}function sortTransparent(_e,_){return _.z-_e.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(_,tt,nt){const rt=this.pool,it=this.list;this.index>=rt.length&&rt.push({start:-1,count:-1,z:-1,index:-1});const st=rt[this.index];it.push(st),this.index++,st.start=_.start,st.count=_.count,st.z=tt,st.index=nt}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_invMatrixWorld=new Matrix4,_identityMatrix$2=new Matrix4,_whiteColor=new Color$1(1,1,1),_projScreenMatrix$2=new Matrix4,_frustum=new Frustum,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(_e,_,tt=0){const nt=_.itemSize;if(_e.isInterleavedBufferAttribute||_e.array.constructor!==_.array.constructor){const rt=_e.count;for(let it=0;it<rt;it++)for(let st=0;st<nt;st++)_.setComponent(it+tt,st,_e.getComponent(it,st))}else _.array.set(_e.array,tt*nt);_.needsUpdate=!0}class BatchedMesh extends Mesh{get maxInstanceCount(){return this._maxInstanceCount}constructor(_,tt,nt=tt*2,rt){super(new BufferGeometry,rt),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=_,this._maxVertexCount=tt,this._maxIndexCount=nt,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(_),this._multiDrawStarts=new Int32Array(_),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let _=Math.sqrt(this._maxInstanceCount*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const tt=new Float32Array(_*_*4),nt=new DataTexture(tt,_,_,RGBAFormat,FloatType);this._matricesTexture=nt}_initIndirectTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const tt=new Uint32Array(_*_),nt=new DataTexture(tt,_,_,RedIntegerFormat,UnsignedIntType);this._indirectTexture=nt}_initColorsTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const tt=new Float32Array(_*_*4).fill(1),nt=new DataTexture(tt,_,_,RGBAFormat,FloatType);nt.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=nt}_initializeGeometry(_){const tt=this.geometry,nt=this._maxVertexCount,rt=this._maxIndexCount;if(this._geometryInitialized===!1){for(const it in _.attributes){const st=_.getAttribute(it),{array:ot,itemSize:at,normalized:lt}=st,ct=new ot.constructor(nt*at),ut=new BufferAttribute(ct,at,lt);tt.setAttribute(it,ut)}if(_.getIndex()!==null){const it=nt>65535?new Uint32Array(rt):new Uint16Array(rt);tt.setIndex(new BufferAttribute(it,1))}this._geometryInitialized=!0}}_validateGeometry(_){const tt=this.geometry;if(!!_.getIndex()!=!!tt.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const nt in tt.attributes){if(!_.hasAttribute(nt))throw new Error(`BatchedMesh: Added geometry missing "${nt}". All geometries must have consistent attributes.`);const rt=_.getAttribute(nt),it=tt.getAttribute(nt);if(rt.itemSize!==it.itemSize||rt.normalized!==it.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(_){return this.customSort=_,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.boundingBox,tt=this._drawInfo;_.makeEmpty();for(let nt=0,rt=tt.length;nt<rt;nt++){if(tt[nt].active===!1)continue;const it=tt[nt].geometryIndex;this.getMatrixAt(nt,_matrix$1),this.getBoundingBoxAt(it,_box$1).applyMatrix4(_matrix$1),_.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.boundingSphere,tt=this._drawInfo;_.makeEmpty();for(let nt=0,rt=tt.length;nt<rt;nt++){if(tt[nt].active===!1)continue;const it=tt[nt].geometryIndex;this.getMatrixAt(nt,_matrix$1),this.getBoundingSphereAt(it,_sphere$2).applyMatrix4(_matrix$1),_.union(_sphere$2)}}addInstance(_){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const nt={visible:!0,active:!0,geometryIndex:_};let rt=null;this._availableInstanceIds.length>0?(rt=this._availableInstanceIds.pop(),this._drawInfo[rt]=nt):(rt=this._drawInfo.length,this._drawInfo.push(nt));const it=this._matricesTexture,st=it.image.data;_identityMatrix$2.toArray(st,rt*16),it.needsUpdate=!0;const ot=this._colorsTexture;return ot&&(_whiteColor.toArray(ot.image.data,rt*4),ot.needsUpdate=!0),rt}addGeometry(_,tt=-1,nt=-1){if(this._initializeGeometry(_),this._validateGeometry(_),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const rt={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let it=null;const st=this._reservedRanges,ot=this._drawRanges,at=this._bounds;this._geometryCount!==0&&(it=st[st.length-1]),tt===-1?rt.vertexCount=_.getAttribute("position").count:rt.vertexCount=tt,it===null?rt.vertexStart=0:rt.vertexStart=it.vertexStart+it.vertexCount;const lt=_.getIndex(),ct=lt!==null;if(ct&&(nt===-1?rt.indexCount=lt.count:rt.indexCount=nt,it===null?rt.indexStart=0:rt.indexStart=it.indexStart+it.indexCount),rt.indexStart!==-1&&rt.indexStart+rt.indexCount>this._maxIndexCount||rt.vertexStart+rt.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const ut=this._geometryCount;return this._geometryCount++,st.push(rt),ot.push({start:ct?rt.indexStart:rt.vertexStart,count:-1}),at.push({boxInitialized:!1,box:new Box3,sphereInitialized:!1,sphere:new Sphere}),this.setGeometryAt(ut,_),ut}setGeometryAt(_,tt){if(_>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(tt);const nt=this.geometry,rt=nt.getIndex()!==null,it=nt.getIndex(),st=tt.getIndex(),ot=this._reservedRanges[_];if(rt&&st.count>ot.indexCount||tt.attributes.position.count>ot.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const at=ot.vertexStart,lt=ot.vertexCount;for(const ht in nt.attributes){const mt=tt.getAttribute(ht),yt=nt.getAttribute(ht);copyAttributeData(mt,yt,at);const vt=mt.itemSize;for(let pt=mt.count,_t=lt;pt<_t;pt++){const xt=at+pt;for(let St=0;St<vt;St++)yt.setComponent(xt,St,0)}yt.needsUpdate=!0,yt.addUpdateRange(at*vt,lt*vt)}if(rt){const ht=ot.indexStart;for(let mt=0;mt<st.count;mt++)it.setX(ht+mt,at+st.getX(mt));for(let mt=st.count,yt=ot.indexCount;mt<yt;mt++)it.setX(ht+mt,at);it.needsUpdate=!0,it.addUpdateRange(ht,ot.indexCount)}const ct=this._bounds[_];tt.boundingBox!==null?(ct.box.copy(tt.boundingBox),ct.boxInitialized=!0):ct.boxInitialized=!1,tt.boundingSphere!==null?(ct.sphere.copy(tt.boundingSphere),ct.sphereInitialized=!0):ct.sphereInitialized=!1;const ut=this._drawRanges[_],dt=tt.getAttribute("position");return ut.count=rt?st.count:dt.count,this._visibilityChanged=!0,_}deleteInstance(_){const tt=this._drawInfo;return _>=tt.length||tt[_].active===!1?this:(tt[_].active=!1,this._availableInstanceIds.push(_),this._visibilityChanged=!0,this)}getBoundingBoxAt(_,tt){if(_>=this._geometryCount)return null;const nt=this._bounds[_],rt=nt.box,it=this.geometry;if(nt.boxInitialized===!1){rt.makeEmpty();const st=it.index,ot=it.attributes.position,at=this._drawRanges[_];for(let lt=at.start,ct=at.start+at.count;lt<ct;lt++){let ut=lt;st&&(ut=st.getX(ut)),rt.expandByPoint(_vector$5.fromBufferAttribute(ot,ut))}nt.boxInitialized=!0}return tt.copy(rt),tt}getBoundingSphereAt(_,tt){if(_>=this._geometryCount)return null;const nt=this._bounds[_],rt=nt.sphere,it=this.geometry;if(nt.sphereInitialized===!1){rt.makeEmpty(),this.getBoundingBoxAt(_,_box$1),_box$1.getCenter(rt.center);const st=it.index,ot=it.attributes.position,at=this._drawRanges[_];let lt=0;for(let ct=at.start,ut=at.start+at.count;ct<ut;ct++){let dt=ct;st&&(dt=st.getX(dt)),_vector$5.fromBufferAttribute(ot,dt),lt=Math.max(lt,rt.center.distanceToSquared(_vector$5))}rt.radius=Math.sqrt(lt),nt.sphereInitialized=!0}return tt.copy(rt),tt}setMatrixAt(_,tt){const nt=this._drawInfo,rt=this._matricesTexture,it=this._matricesTexture.image.data;return _>=nt.length||nt[_].active===!1?this:(tt.toArray(it,_*16),rt.needsUpdate=!0,this)}getMatrixAt(_,tt){const nt=this._drawInfo,rt=this._matricesTexture.image.data;return _>=nt.length||nt[_].active===!1?null:tt.fromArray(rt,_*16)}setColorAt(_,tt){this._colorsTexture===null&&this._initColorsTexture();const nt=this._colorsTexture,rt=this._colorsTexture.image.data,it=this._drawInfo;return _>=it.length||it[_].active===!1?this:(tt.toArray(rt,_*4),nt.needsUpdate=!0,this)}getColorAt(_,tt){const nt=this._colorsTexture.image.data,rt=this._drawInfo;return _>=rt.length||rt[_].active===!1?null:tt.fromArray(nt,_*4)}setVisibleAt(_,tt){const nt=this._drawInfo;return _>=nt.length||nt[_].active===!1||nt[_].visible===tt?this:(nt[_].visible=tt,this._visibilityChanged=!0,this)}getVisibleAt(_){const tt=this._drawInfo;return _>=tt.length||tt[_].active===!1?!1:tt[_].visible}setGeometryIdAt(_,tt){const nt=this._drawInfo;return _>=nt.length||nt[_].active===!1||tt<0||tt>=this._geometryCount?null:(nt[_].geometryIndex=tt,this)}getGeometryIdAt(_){const tt=this._drawInfo;return _>=tt.length||tt[_].active===!1?-1:tt[_].geometryIndex}getGeometryRangeAt(_,tt={}){if(_<0||_>=this._geometryCount)return null;const nt=this._drawRanges[_];return tt.start=nt.start,tt.count=nt.count,tt}raycast(_,tt){const nt=this._drawInfo,rt=this._drawRanges,it=this.matrixWorld,st=this.geometry;_mesh.material=this.material,_mesh.geometry.index=st.index,_mesh.geometry.attributes=st.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let ot=0,at=nt.length;ot<at;ot++){if(!nt[ot].visible||!nt[ot].active)continue;const lt=nt[ot].geometryIndex,ct=rt[lt];_mesh.geometry.setDrawRange(ct.start,ct.count),this.getMatrixAt(ot,_mesh.matrixWorld).premultiply(it),this.getBoundingBoxAt(lt,_mesh.geometry.boundingBox),this.getBoundingSphereAt(lt,_mesh.geometry.boundingSphere),_mesh.raycast(_,_batchIntersects);for(let ut=0,dt=_batchIntersects.length;ut<dt;ut++){const ht=_batchIntersects[ut];ht.object=this,ht.batchId=ot,tt.push(ht)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(_){return super.copy(_),this.geometry=_.geometry.clone(),this.perObjectFrustumCulled=_.perObjectFrustumCulled,this.sortObjects=_.sortObjects,this.boundingBox=_.boundingBox!==null?_.boundingBox.clone():null,this.boundingSphere=_.boundingSphere!==null?_.boundingSphere.clone():null,this._drawRanges=_._drawRanges.map(tt=>({...tt})),this._reservedRanges=_._reservedRanges.map(tt=>({...tt})),this._drawInfo=_._drawInfo.map(tt=>({...tt})),this._bounds=_._bounds.map(tt=>({boxInitialized:tt.boxInitialized,box:tt.box.clone(),sphereInitialized:tt.sphereInitialized,sphere:tt.sphere.clone()})),this._maxInstanceCount=_._maxInstanceCount,this._maxVertexCount=_._maxVertexCount,this._maxIndexCount=_._maxIndexCount,this._geometryInitialized=_._geometryInitialized,this._geometryCount=_._geometryCount,this._multiDrawCounts=_._multiDrawCounts.slice(),this._multiDrawStarts=_._multiDrawStarts.slice(),this._matricesTexture=_._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=_._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(_,tt,nt,rt,it){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const st=rt.getIndex(),ot=st===null?1:st.array.BYTES_PER_ELEMENT,at=this._drawInfo,lt=this._multiDrawStarts,ct=this._multiDrawCounts,ut=this._drawRanges,dt=this.perObjectFrustumCulled,ht=this._indirectTexture,mt=ht.image.data;dt&&(_projScreenMatrix$2.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_projScreenMatrix$2,_.coordinateSystem));let yt=0;if(this.sortObjects){_invMatrixWorld.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(nt.matrixWorld).applyMatrix4(_invMatrixWorld),_forward.set(0,0,-1).transformDirection(nt.matrixWorld).transformDirection(_invMatrixWorld);for(let _t=0,xt=at.length;_t<xt;_t++)if(at[_t].visible&&at[_t].active){const St=at[_t].geometryIndex;this.getMatrixAt(_t,_matrix$1),this.getBoundingSphereAt(St,_sphere$2).applyMatrix4(_matrix$1);let At=!1;if(dt&&(At=!_frustum.intersectsSphere(_sphere$2)),!At){const bt=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward);_renderList.push(ut[St],bt,_t)}}const vt=_renderList.list,pt=this.customSort;pt===null?vt.sort(it.transparent?sortTransparent:sortOpaque):pt.call(this,vt,nt);for(let _t=0,xt=vt.length;_t<xt;_t++){const St=vt[_t];lt[yt]=St.start*ot,ct[yt]=St.count,mt[yt]=St.index,yt++}_renderList.reset()}else for(let vt=0,pt=at.length;vt<pt;vt++)if(at[vt].visible&&at[vt].active){const _t=at[vt].geometryIndex;let xt=!1;if(dt&&(this.getMatrixAt(vt,_matrix$1),this.getBoundingSphereAt(_t,_sphere$2).applyMatrix4(_matrix$1),xt=!_frustum.intersectsSphere(_sphere$2)),!xt){const St=ut[_t];lt[yt]=St.start*ot,ct[yt]=St.count,mt[yt]=vt,yt++}}ht.needsUpdate=!0,this._multiDrawCount=yt,this._visibilityChanged=!1}onBeforeShadow(_,tt,nt,rt,it,st){this.onBeforeRender(_,null,rt,it,st)}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(_=new BufferGeometry,tt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const tt=_.attributes.position,nt=[0];for(let rt=1,it=tt.count;rt<it;rt++)_vStart.fromBufferAttribute(tt,rt-1),_vEnd.fromBufferAttribute(tt,rt),nt[rt]=nt[rt-1],nt[rt]+=_vStart.distanceTo(_vEnd);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,tt){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Line.threshold,st=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$1.copy(nt.boundingSphere),_sphere$1.applyMatrix4(rt),_sphere$1.radius+=it,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(rt).invert(),_ray$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const ot=it/((this.scale.x+this.scale.y+this.scale.z)/3),at=ot*ot,lt=this.isLineSegments?2:1,ct=nt.index,dt=nt.attributes.position;if(ct!==null){const ht=Math.max(0,st.start),mt=Math.min(ct.count,st.start+st.count);for(let yt=ht,vt=mt-1;yt<vt;yt+=lt){const pt=ct.getX(yt),_t=ct.getX(yt+1),xt=checkIntersection(this,_,_ray$1,at,pt,_t);xt&&tt.push(xt)}if(this.isLineLoop){const yt=ct.getX(mt-1),vt=ct.getX(ht),pt=checkIntersection(this,_,_ray$1,at,yt,vt);pt&&tt.push(pt)}}else{const ht=Math.max(0,st.start),mt=Math.min(dt.count,st.start+st.count);for(let yt=ht,vt=mt-1;yt<vt;yt+=lt){const pt=checkIntersection(this,_,_ray$1,at,yt,yt+1);pt&&tt.push(pt)}if(this.isLineLoop){const yt=checkIntersection(this,_,_ray$1,at,mt-1,ht);yt&&tt.push(yt)}}}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,st=rt.length;it<st;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}}function checkIntersection(_e,_,tt,nt,rt,it){const st=_e.geometry.attributes.position;if(_vStart.fromBufferAttribute(st,rt),_vEnd.fromBufferAttribute(st,it),tt.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>nt)return;_intersectPointOnRay.applyMatrix4(_e.matrixWorld);const at=_.ray.origin.distanceTo(_intersectPointOnRay);if(!(at<_.near||at>_.far))return{distance:at,point:_intersectPointOnSegment.clone().applyMatrix4(_e.matrixWorld),index:rt,face:null,faceIndex:null,barycoord:null,object:_e}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,tt){super(_,tt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const tt=_.attributes.position,nt=[];for(let rt=0,it=tt.count;rt<it;rt+=2)_start.fromBufferAttribute(tt,rt),_end.fromBufferAttribute(tt,rt+1),nt[rt]=rt===0?0:nt[rt-1],nt[rt+1]=nt[rt]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,tt){super(_,tt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;let Points$1=class extends Object3D{constructor(_=new BufferGeometry,tt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}raycast(_,tt){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Points.threshold,st=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere.copy(nt.boundingSphere),_sphere.applyMatrix4(rt),_sphere.radius+=it,_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(rt).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const ot=it/((this.scale.x+this.scale.y+this.scale.z)/3),at=ot*ot,lt=nt.index,ut=nt.attributes.position;if(lt!==null){const dt=Math.max(0,st.start),ht=Math.min(lt.count,st.start+st.count);for(let mt=dt,yt=ht;mt<yt;mt++){const vt=lt.getX(mt);_position$2.fromBufferAttribute(ut,vt),testPoint(_position$2,vt,at,rt,_,tt,this)}}else{const dt=Math.max(0,st.start),ht=Math.min(ut.count,st.start+st.count);for(let mt=dt,yt=ht;mt<yt;mt++)_position$2.fromBufferAttribute(ut,mt),testPoint(_position$2,mt,at,rt,_,tt,this)}}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,st=rt.length;it<st;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}};function testPoint(_e,_,tt,nt,rt,it,st){const ot=_ray.distanceSqToPoint(_e);if(ot<tt){const at=new Vector3;_ray.closestPointToPoint(_e,at),at.applyMatrix4(nt);const lt=rt.ray.origin.distanceTo(at);if(lt<rt.near||lt>rt.far)return;it.push({distance:lt,distanceToRay:Math.sqrt(ot),point:at,index:_,face:null,faceIndex:null,barycoord:null,object:st})}}class VideoTexture extends Texture{constructor(_,tt,nt,rt,it,st,ot,at,lt){super(_,tt,nt,rt,it,st,ot,at,lt),this.isVideoTexture=!0,this.minFilter=st!==void 0?st:LinearFilter,this.magFilter=it!==void 0?it:LinearFilter,this.generateMipmaps=!1;const ct=this;function ut(){ct.needsUpdate=!0,_.requestVideoFrameCallback(ut)}"requestVideoFrameCallback"in _&&_.requestVideoFrameCallback(ut)}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(_,tt){super({width:_,height:tt}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,tt,nt,rt,it,st,ot,at,lt,ct,ut,dt){super(null,st,ot,at,lt,ct,rt,it,ut,dt),this.isCompressedTexture=!0,this.image={width:tt,height:nt},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,tt,nt,rt,it,st){super(_,tt,nt,it,st),this.isCompressedArrayTexture=!0,this.image.depth=rt,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(_,tt,nt){super(void 0,_[0].width,_[0].height,tt,nt,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=_}}class CanvasTexture extends Texture{constructor(_,tt,nt,rt,it,st,ot,at,lt){super(_,tt,nt,rt,it,st,ot,at,lt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(_,tt){const nt=this.getUtoTmapping(_);return this.getPoint(nt,tt)}getPoints(_=5){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPoint(nt/_));return tt}getSpacedPoints(_=5){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPointAt(nt/_));return tt}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const tt=[];let nt,rt=this.getPoint(0),it=0;tt.push(0);for(let st=1;st<=_;st++)nt=this.getPoint(st/_),it+=nt.distanceTo(rt),tt.push(it),rt=nt;return this.cacheArcLengths=tt,tt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,tt){const nt=this.getLengths();let rt=0;const it=nt.length;let st;tt?st=tt:st=_*nt[it-1];let ot=0,at=it-1,lt;for(;ot<=at;)if(rt=Math.floor(ot+(at-ot)/2),lt=nt[rt]-st,lt<0)ot=rt+1;else if(lt>0)at=rt-1;else{at=rt;break}if(rt=at,nt[rt]===st)return rt/(it-1);const ct=nt[rt],dt=nt[rt+1]-ct,ht=(st-ct)/dt;return(rt+ht)/(it-1)}getTangent(_,tt){let rt=_-1e-4,it=_+1e-4;rt<0&&(rt=0),it>1&&(it=1);const st=this.getPoint(rt),ot=this.getPoint(it),at=tt||(st.isVector2?new Vector2:new Vector3);return at.copy(ot).sub(st).normalize(),at}getTangentAt(_,tt){const nt=this.getUtoTmapping(_);return this.getTangent(nt,tt)}computeFrenetFrames(_,tt){const nt=new Vector3,rt=[],it=[],st=[],ot=new Vector3,at=new Matrix4;for(let ht=0;ht<=_;ht++){const mt=ht/_;rt[ht]=this.getTangentAt(mt,new Vector3)}it[0]=new Vector3,st[0]=new Vector3;let lt=Number.MAX_VALUE;const ct=Math.abs(rt[0].x),ut=Math.abs(rt[0].y),dt=Math.abs(rt[0].z);ct<=lt&&(lt=ct,nt.set(1,0,0)),ut<=lt&&(lt=ut,nt.set(0,1,0)),dt<=lt&&nt.set(0,0,1),ot.crossVectors(rt[0],nt).normalize(),it[0].crossVectors(rt[0],ot),st[0].crossVectors(rt[0],it[0]);for(let ht=1;ht<=_;ht++){if(it[ht]=it[ht-1].clone(),st[ht]=st[ht-1].clone(),ot.crossVectors(rt[ht-1],rt[ht]),ot.length()>Number.EPSILON){ot.normalize();const mt=Math.acos(clamp$3(rt[ht-1].dot(rt[ht]),-1,1));it[ht].applyMatrix4(at.makeRotationAxis(ot,mt))}st[ht].crossVectors(rt[ht],it[ht])}if(tt===!0){let ht=Math.acos(clamp$3(it[0].dot(it[_]),-1,1));ht/=_,rt[0].dot(ot.crossVectors(it[0],it[_]))>0&&(ht=-ht);for(let mt=1;mt<=_;mt++)it[mt].applyMatrix4(at.makeRotationAxis(rt[mt],ht*mt)),st[mt].crossVectors(rt[mt],it[mt])}return{tangents:rt,normals:it,binormals:st}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,tt=0,nt=1,rt=1,it=0,st=Math.PI*2,ot=!1,at=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=tt,this.xRadius=nt,this.yRadius=rt,this.aStartAngle=it,this.aEndAngle=st,this.aClockwise=ot,this.aRotation=at}getPoint(_,tt=new Vector2){const nt=tt,rt=Math.PI*2;let it=this.aEndAngle-this.aStartAngle;const st=Math.abs(it)<Number.EPSILON;for(;it<0;)it+=rt;for(;it>rt;)it-=rt;it<Number.EPSILON&&(st?it=0:it=rt),this.aClockwise===!0&&!st&&(it===rt?it=-rt:it=it-rt);const ot=this.aStartAngle+_*it;let at=this.aX+this.xRadius*Math.cos(ot),lt=this.aY+this.yRadius*Math.sin(ot);if(this.aRotation!==0){const ct=Math.cos(this.aRotation),ut=Math.sin(this.aRotation),dt=at-this.aX,ht=lt-this.aY;at=dt*ct-ht*ut+this.aX,lt=dt*ut+ht*ct+this.aY}return nt.set(at,lt)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,tt,nt,rt,it,st){super(_,tt,nt,nt,rt,it,st),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let _e=0,_=0,tt=0,nt=0;function rt(it,st,ot,at){_e=it,_=ot,tt=-3*it+3*st-2*ot-at,nt=2*it-2*st+ot+at}return{initCatmullRom:function(it,st,ot,at,lt){rt(st,ot,lt*(ot-it),lt*(at-st))},initNonuniformCatmullRom:function(it,st,ot,at,lt,ct,ut){let dt=(st-it)/lt-(ot-it)/(lt+ct)+(ot-st)/ct,ht=(ot-st)/ct-(at-st)/(ct+ut)+(at-ot)/ut;dt*=ct,ht*=ct,rt(st,ot,dt,ht)},calc:function(it){const st=it*it,ot=st*it;return _e+_*it+tt*st+nt*ot}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],tt=!1,nt="centripetal",rt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=tt,this.curveType=nt,this.tension=rt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.points,it=rt.length,st=(it-(this.closed?0:1))*_;let ot=Math.floor(st),at=st-ot;this.closed?ot+=ot>0?0:(Math.floor(Math.abs(ot)/it)+1)*it:at===0&&ot===it-1&&(ot=it-2,at=1);let lt,ct;this.closed||ot>0?lt=rt[(ot-1)%it]:(tmp.subVectors(rt[0],rt[1]).add(rt[0]),lt=tmp);const ut=rt[ot%it],dt=rt[(ot+1)%it];if(this.closed||ot+2<it?ct=rt[(ot+2)%it]:(tmp.subVectors(rt[it-1],rt[it-2]).add(rt[it-1]),ct=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const ht=this.curveType==="chordal"?.5:.25;let mt=Math.pow(lt.distanceToSquared(ut),ht),yt=Math.pow(ut.distanceToSquared(dt),ht),vt=Math.pow(dt.distanceToSquared(ct),ht);yt<1e-4&&(yt=1),mt<1e-4&&(mt=yt),vt<1e-4&&(vt=yt),px.initNonuniformCatmullRom(lt.x,ut.x,dt.x,ct.x,mt,yt,vt),py.initNonuniformCatmullRom(lt.y,ut.y,dt.y,ct.y,mt,yt,vt),pz.initNonuniformCatmullRom(lt.z,ut.z,dt.z,ct.z,mt,yt,vt)}else this.curveType==="catmullrom"&&(px.initCatmullRom(lt.x,ut.x,dt.x,ct.x,this.tension),py.initCatmullRom(lt.y,ut.y,dt.y,ct.y,this.tension),pz.initCatmullRom(lt.z,ut.z,dt.z,ct.z,this.tension));return nt.set(px.calc(at),py.calc(at),pz.calc(at)),nt}copy(_){super.copy(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(rt.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let tt=0,nt=this.points.length;tt<nt;tt++){const rt=this.points[tt];_.points.push(rt.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(new Vector3().fromArray(rt))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(_e,_,tt,nt,rt){const it=(nt-_)*.5,st=(rt-tt)*.5,ot=_e*_e,at=_e*ot;return(2*tt-2*nt+it+st)*at+(-3*tt+3*nt-2*it-st)*ot+it*_e+tt}function QuadraticBezierP0(_e,_){const tt=1-_e;return tt*tt*_}function QuadraticBezierP1(_e,_){return 2*(1-_e)*_e*_}function QuadraticBezierP2(_e,_){return _e*_e*_}function QuadraticBezier(_e,_,tt,nt){return QuadraticBezierP0(_e,_)+QuadraticBezierP1(_e,tt)+QuadraticBezierP2(_e,nt)}function CubicBezierP0(_e,_){const tt=1-_e;return tt*tt*tt*_}function CubicBezierP1(_e,_){const tt=1-_e;return 3*tt*tt*_e*_}function CubicBezierP2(_e,_){return 3*(1-_e)*_e*_e*_}function CubicBezierP3(_e,_){return _e*_e*_e*_}function CubicBezier(_e,_,tt,nt,rt){return CubicBezierP0(_e,_)+CubicBezierP1(_e,tt)+CubicBezierP2(_e,nt)+CubicBezierP3(_e,rt)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,tt=new Vector2,nt=new Vector2,rt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=tt,this.v2=nt,this.v3=rt}getPoint(_,tt=new Vector2){const nt=tt,rt=this.v0,it=this.v1,st=this.v2,ot=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,st.x,ot.x),CubicBezier(_,rt.y,it.y,st.y,ot.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3,rt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=tt,this.v2=nt,this.v3=rt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.v0,it=this.v1,st=this.v2,ot=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,st.x,ot.x),CubicBezier(_,rt.y,it.y,st.y,ot.y),CubicBezier(_,rt.z,it.z,st.z,ot.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,tt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=tt}getPoint(_,tt=new Vector2){const nt=tt;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,tt){return this.getPoint(_,tt)}getTangent(_,tt=new Vector2){return tt.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,tt){return this.getTangent(_,tt)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=tt}getPoint(_,tt=new Vector3){const nt=tt;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,tt){return this.getPoint(_,tt)}getTangent(_,tt=new Vector3){return tt.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,tt){return this.getTangent(_,tt)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,tt=new Vector2,nt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=tt,this.v2=nt}getPoint(_,tt=new Vector2){const nt=tt,rt=this.v0,it=this.v1,st=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,st.x),QuadraticBezier(_,rt.y,it.y,st.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=tt,this.v2=nt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.v0,it=this.v1,st=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,st.x),QuadraticBezier(_,rt.y,it.y,st.y),QuadraticBezier(_,rt.z,it.z,st.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,tt=new Vector2){const nt=tt,rt=this.points,it=(rt.length-1)*_,st=Math.floor(it),ot=it-st,at=rt[st===0?st:st-1],lt=rt[st],ct=rt[st>rt.length-2?rt.length-1:st+1],ut=rt[st>rt.length-3?rt.length-1:st+2];return nt.set(CatmullRom(ot,at.x,lt.x,ct.x,ut.x),CatmullRom(ot,at.y,lt.y,ct.y,ut.y)),nt}copy(_){super.copy(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let tt=0,nt=this.points.length;tt<nt;tt++){const rt=this.points[tt];_.points.push(rt.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(new Vector2().fromArray(rt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),tt=this.curves[this.curves.length-1].getPoint(1);if(!_.equals(tt)){const nt=_.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[nt](tt,_))}return this}getPoint(_,tt){const nt=_*this.getLength(),rt=this.getCurveLengths();let it=0;for(;it<rt.length;){if(rt[it]>=nt){const st=rt[it]-nt,ot=this.curves[it],at=ot.getLength(),lt=at===0?0:1-st/at;return ot.getPointAt(lt,tt)}it++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let tt=0;for(let nt=0,rt=this.curves.length;nt<rt;nt++)tt+=this.curves[nt].getLength(),_.push(tt);return this.cacheLengths=_,_}getSpacedPoints(_=40){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPoint(nt/_));return this.autoClose&&tt.push(tt[0]),tt}getPoints(_=12){const tt=[];let nt;for(let rt=0,it=this.curves;rt<it.length;rt++){const st=it[rt],ot=st.isEllipseCurve?_*2:st.isLineCurve||st.isLineCurve3?1:st.isSplineCurve?_*st.points.length:_,at=st.getPoints(ot);for(let lt=0;lt<at.length;lt++){const ct=at[lt];nt&&nt.equals(ct)||(tt.push(ct),nt=ct)}}return this.autoClose&&tt.length>1&&!tt[tt.length-1].equals(tt[0])&&tt.push(tt[0]),tt}copy(_){super.copy(_),this.curves=[];for(let tt=0,nt=_.curves.length;tt<nt;tt++){const rt=_.curves[tt];this.curves.push(rt.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let tt=0,nt=this.curves.length;tt<nt;tt++){const rt=this.curves[tt];_.curves.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let tt=0,nt=_.curves.length;tt<nt;tt++){const rt=_.curves[tt];this.curves.push(new Curves[rt.type]().fromJSON(rt))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let tt=1,nt=_.length;tt<nt;tt++)this.lineTo(_[tt].x,_[tt].y);return this}moveTo(_,tt){return this.currentPoint.set(_,tt),this}lineTo(_,tt){const nt=new LineCurve(this.currentPoint.clone(),new Vector2(_,tt));return this.curves.push(nt),this.currentPoint.set(_,tt),this}quadraticCurveTo(_,tt,nt,rt){const it=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,tt),new Vector2(nt,rt));return this.curves.push(it),this.currentPoint.set(nt,rt),this}bezierCurveTo(_,tt,nt,rt,it,st){const ot=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,tt),new Vector2(nt,rt),new Vector2(it,st));return this.curves.push(ot),this.currentPoint.set(it,st),this}splineThru(_){const tt=[this.currentPoint.clone()].concat(_),nt=new SplineCurve(tt);return this.curves.push(nt),this.currentPoint.copy(_[_.length-1]),this}arc(_,tt,nt,rt,it,st){const ot=this.currentPoint.x,at=this.currentPoint.y;return this.absarc(_+ot,tt+at,nt,rt,it,st),this}absarc(_,tt,nt,rt,it,st){return this.absellipse(_,tt,nt,nt,rt,it,st),this}ellipse(_,tt,nt,rt,it,st,ot,at){const lt=this.currentPoint.x,ct=this.currentPoint.y;return this.absellipse(_+lt,tt+ct,nt,rt,it,st,ot,at),this}absellipse(_,tt,nt,rt,it,st,ot,at){const lt=new EllipseCurve(_,tt,nt,rt,it,st,ot,at);if(this.curves.length>0){const ut=lt.getPoint(0);ut.equals(this.currentPoint)||this.lineTo(ut.x,ut.y)}this.curves.push(lt);const ct=lt.getPoint(1);return this.currentPoint.copy(ct),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],tt=12,nt=0,rt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:tt,phiStart:nt,phiLength:rt},tt=Math.floor(tt),rt=clamp$3(rt,0,Math.PI*2);const it=[],st=[],ot=[],at=[],lt=[],ct=1/tt,ut=new Vector3,dt=new Vector2,ht=new Vector3,mt=new Vector3,yt=new Vector3;let vt=0,pt=0;for(let _t=0;_t<=_.length-1;_t++)switch(_t){case 0:vt=_[_t+1].x-_[_t].x,pt=_[_t+1].y-_[_t].y,ht.x=pt*1,ht.y=-vt,ht.z=pt*0,yt.copy(ht),ht.normalize(),at.push(ht.x,ht.y,ht.z);break;case _.length-1:at.push(yt.x,yt.y,yt.z);break;default:vt=_[_t+1].x-_[_t].x,pt=_[_t+1].y-_[_t].y,ht.x=pt*1,ht.y=-vt,ht.z=pt*0,mt.copy(ht),ht.x+=yt.x,ht.y+=yt.y,ht.z+=yt.z,ht.normalize(),at.push(ht.x,ht.y,ht.z),yt.copy(mt)}for(let _t=0;_t<=tt;_t++){const xt=nt+_t*ct*rt,St=Math.sin(xt),At=Math.cos(xt);for(let bt=0;bt<=_.length-1;bt++){ut.x=_[bt].x*St,ut.y=_[bt].y,ut.z=_[bt].x*At,st.push(ut.x,ut.y,ut.z),dt.x=_t/tt,dt.y=bt/(_.length-1),ot.push(dt.x,dt.y);const Et=at[3*bt+0]*St,wt=at[3*bt+1],Rt=at[3*bt+0]*At;lt.push(Et,wt,Rt)}}for(let _t=0;_t<tt;_t++)for(let xt=0;xt<_.length-1;xt++){const St=xt+_t*_.length,At=St,bt=St+_.length,Et=St+_.length+1,wt=St+1;it.push(At,bt,wt),it.push(Et,wt,bt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("uv",new Float32BufferAttribute(ot,2)),this.setAttribute("normal",new Float32BufferAttribute(lt,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(_=1,tt=1,nt=4,rt=8){const it=new Path;it.absarc(0,-tt/2,_,Math.PI*1.5,0),it.absarc(0,tt/2,_,0,Math.PI*.5),super(it.getPoints(nt),rt),this.type="CapsuleGeometry",this.parameters={radius:_,length:tt,capSegments:nt,radialSegments:rt}}static fromJSON(_){return new CapsuleGeometry(_.radius,_.length,_.capSegments,_.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,tt=32,nt=0,rt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:tt,thetaStart:nt,thetaLength:rt},tt=Math.max(3,tt);const it=[],st=[],ot=[],at=[],lt=new Vector3,ct=new Vector2;st.push(0,0,0),ot.push(0,0,1),at.push(.5,.5);for(let ut=0,dt=3;ut<=tt;ut++,dt+=3){const ht=nt+ut/tt*rt;lt.x=_*Math.cos(ht),lt.y=_*Math.sin(ht),st.push(lt.x,lt.y,lt.z),ot.push(0,0,1),ct.x=(st[dt]/_+1)/2,ct.y=(st[dt+1]/_+1)/2,at.push(ct.x,ct.y)}for(let ut=1;ut<=tt;ut++)it.push(ut,ut+1,0);this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("normal",new Float32BufferAttribute(ot,3)),this.setAttribute("uv",new Float32BufferAttribute(at,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=32,it=1,st=!1,ot=0,at=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:tt,height:nt,radialSegments:rt,heightSegments:it,openEnded:st,thetaStart:ot,thetaLength:at};const lt=this;rt=Math.floor(rt),it=Math.floor(it);const ct=[],ut=[],dt=[],ht=[];let mt=0;const yt=[],vt=nt/2;let pt=0;_t(),st===!1&&(_>0&&xt(!0),tt>0&&xt(!1)),this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(dt,3)),this.setAttribute("uv",new Float32BufferAttribute(ht,2));function _t(){const St=new Vector3,At=new Vector3;let bt=0;const Et=(tt-_)/nt;for(let wt=0;wt<=it;wt++){const Rt=[],Tt=wt/it,Mt=Tt*(tt-_)+_;for(let Lt=0;Lt<=rt;Lt++){const Ft=Lt/rt,Ht=Ft*at+ot,Kt=Math.sin(Ht),Wt=Math.cos(Ht);At.x=Mt*Kt,At.y=-Tt*nt+vt,At.z=Mt*Wt,ut.push(At.x,At.y,At.z),St.set(Kt,Et,Wt).normalize(),dt.push(St.x,St.y,St.z),ht.push(Ft,1-Tt),Rt.push(mt++)}yt.push(Rt)}for(let wt=0;wt<rt;wt++)for(let Rt=0;Rt<it;Rt++){const Tt=yt[Rt][wt],Mt=yt[Rt+1][wt],Lt=yt[Rt+1][wt+1],Ft=yt[Rt][wt+1];_>0&&(ct.push(Tt,Mt,Ft),bt+=3),tt>0&&(ct.push(Mt,Lt,Ft),bt+=3)}lt.addGroup(pt,bt,0),pt+=bt}function xt(St){const At=mt,bt=new Vector2,Et=new Vector3;let wt=0;const Rt=St===!0?_:tt,Tt=St===!0?1:-1;for(let Lt=1;Lt<=rt;Lt++)ut.push(0,vt*Tt,0),dt.push(0,Tt,0),ht.push(.5,.5),mt++;const Mt=mt;for(let Lt=0;Lt<=rt;Lt++){const Ht=Lt/rt*at+ot,Kt=Math.cos(Ht),Wt=Math.sin(Ht);Et.x=Rt*Wt,Et.y=vt*Tt,Et.z=Rt*Kt,ut.push(Et.x,Et.y,Et.z),dt.push(0,Tt,0),bt.x=Kt*.5+.5,bt.y=Wt*.5*Tt+.5,ht.push(bt.x,bt.y),mt++}for(let Lt=0;Lt<rt;Lt++){const Ft=At+Lt,Ht=Mt+Lt;St===!0?ct.push(Ht,Ht+1,Ft):ct.push(Ht+1,Ht,Ft),wt+=3}lt.addGroup(pt,wt,St===!0?1:2),pt+=wt}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,tt=1,nt=32,rt=1,it=!1,st=0,ot=Math.PI*2){super(0,_,tt,nt,rt,it,st,ot),this.type="ConeGeometry",this.parameters={radius:_,height:tt,radialSegments:nt,heightSegments:rt,openEnded:it,thetaStart:st,thetaLength:ot}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],tt=[],nt=1,rt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:tt,radius:nt,detail:rt};const it=[],st=[];ot(rt),lt(nt),ct(),this.setAttribute("position",new Float32BufferAttribute(it,3)),this.setAttribute("normal",new Float32BufferAttribute(it.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(st,2)),rt===0?this.computeVertexNormals():this.normalizeNormals();function ot(_t){const xt=new Vector3,St=new Vector3,At=new Vector3;for(let bt=0;bt<tt.length;bt+=3)ht(tt[bt+0],xt),ht(tt[bt+1],St),ht(tt[bt+2],At),at(xt,St,At,_t)}function at(_t,xt,St,At){const bt=At+1,Et=[];for(let wt=0;wt<=bt;wt++){Et[wt]=[];const Rt=_t.clone().lerp(St,wt/bt),Tt=xt.clone().lerp(St,wt/bt),Mt=bt-wt;for(let Lt=0;Lt<=Mt;Lt++)Lt===0&&wt===bt?Et[wt][Lt]=Rt:Et[wt][Lt]=Rt.clone().lerp(Tt,Lt/Mt)}for(let wt=0;wt<bt;wt++)for(let Rt=0;Rt<2*(bt-wt)-1;Rt++){const Tt=Math.floor(Rt/2);Rt%2===0?(dt(Et[wt][Tt+1]),dt(Et[wt+1][Tt]),dt(Et[wt][Tt])):(dt(Et[wt][Tt+1]),dt(Et[wt+1][Tt+1]),dt(Et[wt+1][Tt]))}}function lt(_t){const xt=new Vector3;for(let St=0;St<it.length;St+=3)xt.x=it[St+0],xt.y=it[St+1],xt.z=it[St+2],xt.normalize().multiplyScalar(_t),it[St+0]=xt.x,it[St+1]=xt.y,it[St+2]=xt.z}function ct(){const _t=new Vector3;for(let xt=0;xt<it.length;xt+=3){_t.x=it[xt+0],_t.y=it[xt+1],_t.z=it[xt+2];const St=vt(_t)/2/Math.PI+.5,At=pt(_t)/Math.PI+.5;st.push(St,1-At)}mt(),ut()}function ut(){for(let _t=0;_t<st.length;_t+=6){const xt=st[_t+0],St=st[_t+2],At=st[_t+4],bt=Math.max(xt,St,At),Et=Math.min(xt,St,At);bt>.9&&Et<.1&&(xt<.2&&(st[_t+0]+=1),St<.2&&(st[_t+2]+=1),At<.2&&(st[_t+4]+=1))}}function dt(_t){it.push(_t.x,_t.y,_t.z)}function ht(_t,xt){const St=_t*3;xt.x=_[St+0],xt.y=_[St+1],xt.z=_[St+2]}function mt(){const _t=new Vector3,xt=new Vector3,St=new Vector3,At=new Vector3,bt=new Vector2,Et=new Vector2,wt=new Vector2;for(let Rt=0,Tt=0;Rt<it.length;Rt+=9,Tt+=6){_t.set(it[Rt+0],it[Rt+1],it[Rt+2]),xt.set(it[Rt+3],it[Rt+4],it[Rt+5]),St.set(it[Rt+6],it[Rt+7],it[Rt+8]),bt.set(st[Tt+0],st[Tt+1]),Et.set(st[Tt+2],st[Tt+3]),wt.set(st[Tt+4],st[Tt+5]),At.copy(_t).add(xt).add(St).divideScalar(3);const Mt=vt(At);yt(bt,Tt+0,_t,Mt),yt(Et,Tt+2,xt,Mt),yt(wt,Tt+4,St,Mt)}}function yt(_t,xt,St,At){At<0&&_t.x===1&&(st[xt]=_t.x-1),St.x===0&&St.z===0&&(st[xt]=At/2/Math.PI+.5)}function vt(_t){return Math.atan2(_t.z,-_t.x)}function pt(_t){return Math.atan2(-_t.y,Math.sqrt(_t.x*_t.x+_t.z*_t.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=(1+Math.sqrt(5))/2,rt=1/nt,it=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,0,-nt,0,-rt,nt,0,-rt,-nt,0,rt,nt,0,rt],st=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(it,st,_,tt),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,tt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:tt},_!==null){const rt=Math.pow(10,4),it=Math.cos(DEG2RAD*tt),st=_.getIndex(),ot=_.getAttribute("position"),at=st?st.count:ot.count,lt=[0,0,0],ct=["a","b","c"],ut=new Array(3),dt={},ht=[];for(let mt=0;mt<at;mt+=3){st?(lt[0]=st.getX(mt),lt[1]=st.getX(mt+1),lt[2]=st.getX(mt+2)):(lt[0]=mt,lt[1]=mt+1,lt[2]=mt+2);const{a:yt,b:vt,c:pt}=_triangle;if(yt.fromBufferAttribute(ot,lt[0]),vt.fromBufferAttribute(ot,lt[1]),pt.fromBufferAttribute(ot,lt[2]),_triangle.getNormal(_normal),ut[0]=`${Math.round(yt.x*rt)},${Math.round(yt.y*rt)},${Math.round(yt.z*rt)}`,ut[1]=`${Math.round(vt.x*rt)},${Math.round(vt.y*rt)},${Math.round(vt.z*rt)}`,ut[2]=`${Math.round(pt.x*rt)},${Math.round(pt.y*rt)},${Math.round(pt.z*rt)}`,!(ut[0]===ut[1]||ut[1]===ut[2]||ut[2]===ut[0]))for(let _t=0;_t<3;_t++){const xt=(_t+1)%3,St=ut[_t],At=ut[xt],bt=_triangle[ct[_t]],Et=_triangle[ct[xt]],wt=`${St}_${At}`,Rt=`${At}_${St}`;Rt in dt&&dt[Rt]?(_normal.dot(dt[Rt].normal)<=it&&(ht.push(bt.x,bt.y,bt.z),ht.push(Et.x,Et.y,Et.z)),dt[Rt]=null):wt in dt||(dt[wt]={index0:lt[_t],index1:lt[xt],normal:_normal.clone()})}}for(const mt in dt)if(dt[mt]){const{index0:yt,index1:vt}=dt[mt];_v0.fromBufferAttribute(ot,yt),_v1$1.fromBufferAttribute(ot,vt),ht.push(_v0.x,_v0.y,_v0.z),ht.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(ht,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Shape extends Path{constructor(_){super(_),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(_){const tt=[];for(let nt=0,rt=this.holes.length;nt<rt;nt++)tt[nt]=this.holes[nt].getPoints(_);return tt}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let tt=0,nt=_.holes.length;tt<nt;tt++){const rt=_.holes[tt];this.holes.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let tt=0,nt=this.holes.length;tt<nt;tt++){const rt=this.holes[tt];_.holes.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let tt=0,nt=_.holes.length;tt<nt;tt++){const rt=_.holes[tt];this.holes.push(new Path().fromJSON(rt))}return this}}const Earcut={triangulate:function(_e,_,tt=2){const nt=_&&_.length,rt=nt?_[0]*tt:_e.length;let it=linkedList(_e,0,rt,tt,!0);const st=[];if(!it||it.next===it.prev)return st;let ot,at,lt,ct,ut,dt,ht;if(nt&&(it=eliminateHoles(_e,_,it,tt)),_e.length>80*tt){ot=lt=_e[0],at=ct=_e[1];for(let mt=tt;mt<rt;mt+=tt)ut=_e[mt],dt=_e[mt+1],ut<ot&&(ot=ut),dt<at&&(at=dt),ut>lt&&(lt=ut),dt>ct&&(ct=dt);ht=Math.max(lt-ot,ct-at),ht=ht!==0?32767/ht:0}return earcutLinked(it,st,tt,ot,at,ht,0),st}};function linkedList(_e,_,tt,nt,rt){let it,st;if(rt===signedArea(_e,_,tt,nt)>0)for(it=_;it<tt;it+=nt)st=insertNode(it,_e[it],_e[it+1],st);else for(it=tt-nt;it>=_;it-=nt)st=insertNode(it,_e[it],_e[it+1],st);return st&&equals(st,st.next)&&(removeNode(st),st=st.next),st}function filterPoints(_e,_){if(!_e)return _e;_||(_=_e);let tt=_e,nt;do if(nt=!1,!tt.steiner&&(equals(tt,tt.next)||area(tt.prev,tt,tt.next)===0)){if(removeNode(tt),tt=_=tt.prev,tt===tt.next)break;nt=!0}else tt=tt.next;while(nt||tt!==_);return _}function earcutLinked(_e,_,tt,nt,rt,it,st){if(!_e)return;!st&&it&&indexCurve(_e,nt,rt,it);let ot=_e,at,lt;for(;_e.prev!==_e.next;){if(at=_e.prev,lt=_e.next,it?isEarHashed(_e,nt,rt,it):isEar(_e)){_.push(at.i/tt|0),_.push(_e.i/tt|0),_.push(lt.i/tt|0),removeNode(_e),_e=lt.next,ot=lt.next;continue}if(_e=lt,_e===ot){st?st===1?(_e=cureLocalIntersections(filterPoints(_e),_,tt),earcutLinked(_e,_,tt,nt,rt,it,2)):st===2&&splitEarcut(_e,_,tt,nt,rt,it):earcutLinked(filterPoints(_e),_,tt,nt,rt,it,1);break}}}function isEar(_e){const _=_e.prev,tt=_e,nt=_e.next;if(area(_,tt,nt)>=0)return!1;const rt=_.x,it=tt.x,st=nt.x,ot=_.y,at=tt.y,lt=nt.y,ct=rt<it?rt<st?rt:st:it<st?it:st,ut=ot<at?ot<lt?ot:lt:at<lt?at:lt,dt=rt>it?rt>st?rt:st:it>st?it:st,ht=ot>at?ot>lt?ot:lt:at>lt?at:lt;let mt=nt.next;for(;mt!==_;){if(mt.x>=ct&&mt.x<=dt&&mt.y>=ut&&mt.y<=ht&&pointInTriangle(rt,ot,it,at,st,lt,mt.x,mt.y)&&area(mt.prev,mt,mt.next)>=0)return!1;mt=mt.next}return!0}function isEarHashed(_e,_,tt,nt){const rt=_e.prev,it=_e,st=_e.next;if(area(rt,it,st)>=0)return!1;const ot=rt.x,at=it.x,lt=st.x,ct=rt.y,ut=it.y,dt=st.y,ht=ot<at?ot<lt?ot:lt:at<lt?at:lt,mt=ct<ut?ct<dt?ct:dt:ut<dt?ut:dt,yt=ot>at?ot>lt?ot:lt:at>lt?at:lt,vt=ct>ut?ct>dt?ct:dt:ut>dt?ut:dt,pt=zOrder(ht,mt,_,tt,nt),_t=zOrder(yt,vt,_,tt,nt);let xt=_e.prevZ,St=_e.nextZ;for(;xt&&xt.z>=pt&&St&&St.z<=_t;){if(xt.x>=ht&&xt.x<=yt&&xt.y>=mt&&xt.y<=vt&&xt!==rt&&xt!==st&&pointInTriangle(ot,ct,at,ut,lt,dt,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,St.x>=ht&&St.x<=yt&&St.y>=mt&&St.y<=vt&&St!==rt&&St!==st&&pointInTriangle(ot,ct,at,ut,lt,dt,St.x,St.y)&&area(St.prev,St,St.next)>=0))return!1;St=St.nextZ}for(;xt&&xt.z>=pt;){if(xt.x>=ht&&xt.x<=yt&&xt.y>=mt&&xt.y<=vt&&xt!==rt&&xt!==st&&pointInTriangle(ot,ct,at,ut,lt,dt,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;St&&St.z<=_t;){if(St.x>=ht&&St.x<=yt&&St.y>=mt&&St.y<=vt&&St!==rt&&St!==st&&pointInTriangle(ot,ct,at,ut,lt,dt,St.x,St.y)&&area(St.prev,St,St.next)>=0)return!1;St=St.nextZ}return!0}function cureLocalIntersections(_e,_,tt){let nt=_e;do{const rt=nt.prev,it=nt.next.next;!equals(rt,it)&&intersects(rt,nt,nt.next,it)&&locallyInside(rt,it)&&locallyInside(it,rt)&&(_.push(rt.i/tt|0),_.push(nt.i/tt|0),_.push(it.i/tt|0),removeNode(nt),removeNode(nt.next),nt=_e=it),nt=nt.next}while(nt!==_e);return filterPoints(nt)}function splitEarcut(_e,_,tt,nt,rt,it){let st=_e;do{let ot=st.next.next;for(;ot!==st.prev;){if(st.i!==ot.i&&isValidDiagonal(st,ot)){let at=splitPolygon(st,ot);st=filterPoints(st,st.next),at=filterPoints(at,at.next),earcutLinked(st,_,tt,nt,rt,it,0),earcutLinked(at,_,tt,nt,rt,it,0);return}ot=ot.next}st=st.next}while(st!==_e)}function eliminateHoles(_e,_,tt,nt){const rt=[];let it,st,ot,at,lt;for(it=0,st=_.length;it<st;it++)ot=_[it]*nt,at=it<st-1?_[it+1]*nt:_e.length,lt=linkedList(_e,ot,at,nt,!1),lt===lt.next&&(lt.steiner=!0),rt.push(getLeftmost(lt));for(rt.sort(compareX),it=0;it<rt.length;it++)tt=eliminateHole(rt[it],tt);return tt}function compareX(_e,_){return _e.x-_.x}function eliminateHole(_e,_){const tt=findHoleBridge(_e,_);if(!tt)return _;const nt=splitPolygon(tt,_e);return filterPoints(nt,nt.next),filterPoints(tt,tt.next)}function findHoleBridge(_e,_){let tt=_,nt=-1/0,rt;const it=_e.x,st=_e.y;do{if(st<=tt.y&&st>=tt.next.y&&tt.next.y!==tt.y){const dt=tt.x+(st-tt.y)*(tt.next.x-tt.x)/(tt.next.y-tt.y);if(dt<=it&&dt>nt&&(nt=dt,rt=tt.x<tt.next.x?tt:tt.next,dt===it))return rt}tt=tt.next}while(tt!==_);if(!rt)return null;const ot=rt,at=rt.x,lt=rt.y;let ct=1/0,ut;tt=rt;do it>=tt.x&&tt.x>=at&&it!==tt.x&&pointInTriangle(st<lt?it:nt,st,at,lt,st<lt?nt:it,st,tt.x,tt.y)&&(ut=Math.abs(st-tt.y)/(it-tt.x),locallyInside(tt,_e)&&(ut<ct||ut===ct&&(tt.x>rt.x||tt.x===rt.x&&sectorContainsSector(rt,tt)))&&(rt=tt,ct=ut)),tt=tt.next;while(tt!==ot);return rt}function sectorContainsSector(_e,_){return area(_e.prev,_e,_.prev)<0&&area(_.next,_e,_e.next)<0}function indexCurve(_e,_,tt,nt){let rt=_e;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,tt,nt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==_e);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(_e){let _,tt,nt,rt,it,st,ot,at,lt=1;do{for(tt=_e,_e=null,it=null,st=0;tt;){for(st++,nt=tt,ot=0,_=0;_<lt&&(ot++,nt=nt.nextZ,!!nt);_++);for(at=lt;ot>0||at>0&&nt;)ot!==0&&(at===0||!nt||tt.z<=nt.z)?(rt=tt,tt=tt.nextZ,ot--):(rt=nt,nt=nt.nextZ,at--),it?it.nextZ=rt:_e=rt,rt.prevZ=it,it=rt;tt=nt}it.nextZ=null,lt*=2}while(st>1);return _e}function zOrder(_e,_,tt,nt,rt){return _e=(_e-tt)*rt|0,_=(_-nt)*rt|0,_e=(_e|_e<<8)&16711935,_e=(_e|_e<<4)&252645135,_e=(_e|_e<<2)&858993459,_e=(_e|_e<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,_e|_<<1}function getLeftmost(_e){let _=_e,tt=_e;do(_.x<tt.x||_.x===tt.x&&_.y<tt.y)&&(tt=_),_=_.next;while(_!==_e);return tt}function pointInTriangle(_e,_,tt,nt,rt,it,st,ot){return(rt-st)*(_-ot)>=(_e-st)*(it-ot)&&(_e-st)*(nt-ot)>=(tt-st)*(_-ot)&&(tt-st)*(it-ot)>=(rt-st)*(nt-ot)}function isValidDiagonal(_e,_){return _e.next.i!==_.i&&_e.prev.i!==_.i&&!intersectsPolygon(_e,_)&&(locallyInside(_e,_)&&locallyInside(_,_e)&&middleInside(_e,_)&&(area(_e.prev,_e,_.prev)||area(_e,_.prev,_))||equals(_e,_)&&area(_e.prev,_e,_e.next)>0&&area(_.prev,_,_.next)>0)}function area(_e,_,tt){return(_.y-_e.y)*(tt.x-_.x)-(_.x-_e.x)*(tt.y-_.y)}function equals(_e,_){return _e.x===_.x&&_e.y===_.y}function intersects(_e,_,tt,nt){const rt=sign(area(_e,_,tt)),it=sign(area(_e,_,nt)),st=sign(area(tt,nt,_e)),ot=sign(area(tt,nt,_));return!!(rt!==it&&st!==ot||rt===0&&onSegment(_e,tt,_)||it===0&&onSegment(_e,nt,_)||st===0&&onSegment(tt,_e,nt)||ot===0&&onSegment(tt,_,nt))}function onSegment(_e,_,tt){return _.x<=Math.max(_e.x,tt.x)&&_.x>=Math.min(_e.x,tt.x)&&_.y<=Math.max(_e.y,tt.y)&&_.y>=Math.min(_e.y,tt.y)}function sign(_e){return _e>0?1:_e<0?-1:0}function intersectsPolygon(_e,_){let tt=_e;do{if(tt.i!==_e.i&&tt.next.i!==_e.i&&tt.i!==_.i&&tt.next.i!==_.i&&intersects(tt,tt.next,_e,_))return!0;tt=tt.next}while(tt!==_e);return!1}function locallyInside(_e,_){return area(_e.prev,_e,_e.next)<0?area(_e,_,_e.next)>=0&&area(_e,_e.prev,_)>=0:area(_e,_,_e.prev)<0||area(_e,_e.next,_)<0}function middleInside(_e,_){let tt=_e,nt=!1;const rt=(_e.x+_.x)/2,it=(_e.y+_.y)/2;do tt.y>it!=tt.next.y>it&&tt.next.y!==tt.y&&rt<(tt.next.x-tt.x)*(it-tt.y)/(tt.next.y-tt.y)+tt.x&&(nt=!nt),tt=tt.next;while(tt!==_e);return nt}function splitPolygon(_e,_){const tt=new Node$1(_e.i,_e.x,_e.y),nt=new Node$1(_.i,_.x,_.y),rt=_e.next,it=_.prev;return _e.next=_,_.prev=_e,tt.next=rt,rt.prev=tt,nt.next=tt,tt.prev=nt,it.next=nt,nt.prev=it,nt}function insertNode(_e,_,tt,nt){const rt=new Node$1(_e,_,tt);return nt?(rt.next=nt.next,rt.prev=nt,nt.next.prev=rt,nt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(_e){_e.next.prev=_e.prev,_e.prev.next=_e.next,_e.prevZ&&(_e.prevZ.nextZ=_e.nextZ),_e.nextZ&&(_e.nextZ.prevZ=_e.prevZ)}function Node$1(_e,_,tt){this.i=_e,this.x=_,this.y=tt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_e,_,tt,nt){let rt=0;for(let it=_,st=tt-nt;it<tt;it+=nt)rt+=(_e[st]-_e[it])*(_e[it+1]+_e[st+1]),st=it;return rt}class ShapeUtils{static area(_){const tt=_.length;let nt=0;for(let rt=tt-1,it=0;it<tt;rt=it++)nt+=_[rt].x*_[it].y-_[it].x*_[rt].y;return nt*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,tt){const nt=[],rt=[],it=[];removeDupEndPts(_),addContour(nt,_);let st=_.length;tt.forEach(removeDupEndPts);for(let at=0;at<tt.length;at++)rt.push(st),st+=tt[at].length,addContour(nt,tt[at]);const ot=Earcut.triangulate(nt,rt);for(let at=0;at<ot.length;at+=3)it.push(ot.slice(at,at+3));return it}}function removeDupEndPts(_e){const _=_e.length;_>2&&_e[_-1].equals(_e[0])&&_e.pop()}function addContour(_e,_){for(let tt=0;tt<_.length;tt++)_e.push(_[tt].x),_e.push(_[tt].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),tt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:tt},_=Array.isArray(_)?_:[_];const nt=this,rt=[],it=[];for(let ot=0,at=_.length;ot<at;ot++){const lt=_[ot];st(lt)}this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2)),this.computeVertexNormals();function st(ot){const at=[],lt=tt.curveSegments!==void 0?tt.curveSegments:12,ct=tt.steps!==void 0?tt.steps:1,ut=tt.depth!==void 0?tt.depth:1;let dt=tt.bevelEnabled!==void 0?tt.bevelEnabled:!0,ht=tt.bevelThickness!==void 0?tt.bevelThickness:.2,mt=tt.bevelSize!==void 0?tt.bevelSize:ht-.1,yt=tt.bevelOffset!==void 0?tt.bevelOffset:0,vt=tt.bevelSegments!==void 0?tt.bevelSegments:3;const pt=tt.extrudePath,_t=tt.UVGenerator!==void 0?tt.UVGenerator:WorldUVGenerator;let xt,St=!1,At,bt,Et,wt;pt&&(xt=pt.getSpacedPoints(ct),St=!0,dt=!1,At=pt.computeFrenetFrames(ct,!1),bt=new Vector3,Et=new Vector3,wt=new Vector3),dt||(vt=0,ht=0,mt=0,yt=0);const Rt=ot.extractPoints(lt);let Tt=Rt.shape;const Mt=Rt.holes;if(!ShapeUtils.isClockWise(Tt)){Tt=Tt.reverse();for(let fn=0,nn=Mt.length;fn<nn;fn++){const Tn=Mt[fn];ShapeUtils.isClockWise(Tn)&&(Mt[fn]=Tn.reverse())}}const Ft=ShapeUtils.triangulateShape(Tt,Mt),Ht=Tt;for(let fn=0,nn=Mt.length;fn<nn;fn++){const Tn=Mt[fn];Tt=Tt.concat(Tn)}function Kt(fn,nn,Tn){return nn||console.error("THREE.ExtrudeGeometry: vec does not exist"),fn.clone().addScaledVector(nn,Tn)}const Wt=Tt.length,Jt=Ft.length;function Ot(fn,nn,Tn){let Cn,vn,_n;const Qt=fn.x-nn.x,sn=fn.y-nn.y,jt=Tn.x-fn.x,Bt=Tn.y-fn.y,hn=Qt*Qt+sn*sn,cn=Qt*Bt-sn*jt;if(Math.abs(cn)>Number.EPSILON){const mn=Math.sqrt(hn),an=Math.sqrt(jt*jt+Bt*Bt),Hn=nn.x-sn/mn,Pn=nn.y+Qt/mn,er=Tn.x-Bt/an,cr=Tn.y+jt/an,ir=((er-Hn)*Bt-(cr-Pn)*jt)/(Qt*Bt-sn*jt);Cn=Hn+Qt*ir-fn.x,vn=Pn+sn*ir-fn.y;const Jn=Cn*Cn+vn*vn;if(Jn<=2)return new Vector2(Cn,vn);_n=Math.sqrt(Jn/2)}else{let mn=!1;Qt>Number.EPSILON?jt>Number.EPSILON&&(mn=!0):Qt<-Number.EPSILON?jt<-Number.EPSILON&&(mn=!0):Math.sign(sn)===Math.sign(Bt)&&(mn=!0),mn?(Cn=-sn,vn=Qt,_n=Math.sqrt(hn)):(Cn=Qt,vn=sn,_n=Math.sqrt(hn/2))}return new Vector2(Cn/_n,vn/_n)}const kt=[];for(let fn=0,nn=Ht.length,Tn=nn-1,Cn=fn+1;fn<nn;fn++,Tn++,Cn++)Tn===nn&&(Tn=0),Cn===nn&&(Cn=0),kt[fn]=Ot(Ht[fn],Ht[Tn],Ht[Cn]);const Gt=[];let zt,Vt=kt.concat();for(let fn=0,nn=Mt.length;fn<nn;fn++){const Tn=Mt[fn];zt=[];for(let Cn=0,vn=Tn.length,_n=vn-1,Qt=Cn+1;Cn<vn;Cn++,_n++,Qt++)_n===vn&&(_n=0),Qt===vn&&(Qt=0),zt[Cn]=Ot(Tn[Cn],Tn[_n],Tn[Qt]);Gt.push(zt),Vt=Vt.concat(zt)}for(let fn=0;fn<vt;fn++){const nn=fn/vt,Tn=ht*Math.cos(nn*Math.PI/2),Cn=mt*Math.sin(nn*Math.PI/2)+yt;for(let vn=0,_n=Ht.length;vn<_n;vn++){const Qt=Kt(Ht[vn],kt[vn],Cn);qt(Qt.x,Qt.y,-Tn)}for(let vn=0,_n=Mt.length;vn<_n;vn++){const Qt=Mt[vn];zt=Gt[vn];for(let sn=0,jt=Qt.length;sn<jt;sn++){const Bt=Kt(Qt[sn],zt[sn],Cn);qt(Bt.x,Bt.y,-Tn)}}}const Dt=mt+yt;for(let fn=0;fn<Wt;fn++){const nn=dt?Kt(Tt[fn],Vt[fn],Dt):Tt[fn];St?(Et.copy(At.normals[0]).multiplyScalar(nn.x),bt.copy(At.binormals[0]).multiplyScalar(nn.y),wt.copy(xt[0]).add(Et).add(bt),qt(wt.x,wt.y,wt.z)):qt(nn.x,nn.y,0)}for(let fn=1;fn<=ct;fn++)for(let nn=0;nn<Wt;nn++){const Tn=dt?Kt(Tt[nn],Vt[nn],Dt):Tt[nn];St?(Et.copy(At.normals[fn]).multiplyScalar(Tn.x),bt.copy(At.binormals[fn]).multiplyScalar(Tn.y),wt.copy(xt[fn]).add(Et).add(bt),qt(wt.x,wt.y,wt.z)):qt(Tn.x,Tn.y,ut/ct*fn)}for(let fn=vt-1;fn>=0;fn--){const nn=fn/vt,Tn=ht*Math.cos(nn*Math.PI/2),Cn=mt*Math.sin(nn*Math.PI/2)+yt;for(let vn=0,_n=Ht.length;vn<_n;vn++){const Qt=Kt(Ht[vn],kt[vn],Cn);qt(Qt.x,Qt.y,ut+Tn)}for(let vn=0,_n=Mt.length;vn<_n;vn++){const Qt=Mt[vn];zt=Gt[vn];for(let sn=0,jt=Qt.length;sn<jt;sn++){const Bt=Kt(Qt[sn],zt[sn],Cn);St?qt(Bt.x,Bt.y+xt[ct-1].y,xt[ct-1].x+Tn):qt(Bt.x,Bt.y,ut+Tn)}}}It(),Ut();function It(){const fn=rt.length/3;if(dt){let nn=0,Tn=Wt*nn;for(let Cn=0;Cn<Jt;Cn++){const vn=Ft[Cn];rn(vn[2]+Tn,vn[1]+Tn,vn[0]+Tn)}nn=ct+vt*2,Tn=Wt*nn;for(let Cn=0;Cn<Jt;Cn++){const vn=Ft[Cn];rn(vn[0]+Tn,vn[1]+Tn,vn[2]+Tn)}}else{for(let nn=0;nn<Jt;nn++){const Tn=Ft[nn];rn(Tn[2],Tn[1],Tn[0])}for(let nn=0;nn<Jt;nn++){const Tn=Ft[nn];rn(Tn[0]+Wt*ct,Tn[1]+Wt*ct,Tn[2]+Wt*ct)}}nt.addGroup(fn,rt.length/3-fn,0)}function Ut(){const fn=rt.length/3;let nn=0;Yt(Ht,nn),nn+=Ht.length;for(let Tn=0,Cn=Mt.length;Tn<Cn;Tn++){const vn=Mt[Tn];Yt(vn,nn),nn+=vn.length}nt.addGroup(fn,rt.length/3-fn,1)}function Yt(fn,nn){let Tn=fn.length;for(;--Tn>=0;){const Cn=Tn;let vn=Tn-1;vn<0&&(vn=fn.length-1);for(let _n=0,Qt=ct+vt*2;_n<Qt;_n++){const sn=Wt*_n,jt=Wt*(_n+1),Bt=nn+Cn+sn,hn=nn+vn+sn,cn=nn+vn+jt,mn=nn+Cn+jt;gn(Bt,hn,cn,mn)}}}function qt(fn,nn,Tn){at.push(fn),at.push(nn),at.push(Tn)}function rn(fn,nn,Tn){An(fn),An(nn),An(Tn);const Cn=rt.length/3,vn=_t.generateTopUV(nt,rt,Cn-3,Cn-2,Cn-1);En(vn[0]),En(vn[1]),En(vn[2])}function gn(fn,nn,Tn,Cn){An(fn),An(nn),An(Cn),An(nn),An(Tn),An(Cn);const vn=rt.length/3,_n=_t.generateSideWallUV(nt,rt,vn-6,vn-3,vn-2,vn-1);En(_n[0]),En(_n[1]),En(_n[3]),En(_n[1]),En(_n[2]),En(_n[3])}function An(fn){rt.push(at[fn*3+0]),rt.push(at[fn*3+1]),rt.push(at[fn*3+2])}function En(fn){it.push(fn.x),it.push(fn.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),tt=this.parameters.shapes,nt=this.parameters.options;return toJSON$1(tt,nt,_)}static fromJSON(_,tt){const nt=[];for(let it=0,st=_.shapes.length;it<st;it++){const ot=tt[_.shapes[it]];nt.push(ot)}const rt=_.options.extrudePath;return rt!==void 0&&(_.options.extrudePath=new Curves[rt.type]().fromJSON(rt)),new ExtrudeGeometry(nt,_.options)}}const WorldUVGenerator={generateTopUV:function(_e,_,tt,nt,rt){const it=_[tt*3],st=_[tt*3+1],ot=_[nt*3],at=_[nt*3+1],lt=_[rt*3],ct=_[rt*3+1];return[new Vector2(it,st),new Vector2(ot,at),new Vector2(lt,ct)]},generateSideWallUV:function(_e,_,tt,nt,rt,it){const st=_[tt*3],ot=_[tt*3+1],at=_[tt*3+2],lt=_[nt*3],ct=_[nt*3+1],ut=_[nt*3+2],dt=_[rt*3],ht=_[rt*3+1],mt=_[rt*3+2],yt=_[it*3],vt=_[it*3+1],pt=_[it*3+2];return Math.abs(ot-ct)<Math.abs(st-lt)?[new Vector2(st,1-at),new Vector2(lt,1-ut),new Vector2(dt,1-mt),new Vector2(yt,1-pt)]:[new Vector2(ot,1-at),new Vector2(ct,1-ut),new Vector2(ht,1-mt),new Vector2(vt,1-pt)]}};function toJSON$1(_e,_,tt){if(tt.shapes=[],Array.isArray(_e))for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];tt.shapes.push(it.uuid)}else tt.shapes.push(_e.uuid);return tt.options=Object.assign({},_),_.extrudePath!==void 0&&(tt.options.extrudePath=_.extrudePath.toJSON()),tt}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=(1+Math.sqrt(5))/2,rt=[-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,0,0,-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,nt,0,-1,nt,0,1,-nt,0,-1,-nt,0,1],it=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(rt,it,_,tt),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],rt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(nt,rt,_,tt),this.type="OctahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class RingGeometry extends BufferGeometry{constructor(_=.5,tt=1,nt=32,rt=1,it=0,st=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:tt,thetaSegments:nt,phiSegments:rt,thetaStart:it,thetaLength:st},nt=Math.max(3,nt),rt=Math.max(1,rt);const ot=[],at=[],lt=[],ct=[];let ut=_;const dt=(tt-_)/rt,ht=new Vector3,mt=new Vector2;for(let yt=0;yt<=rt;yt++){for(let vt=0;vt<=nt;vt++){const pt=it+vt/nt*st;ht.x=ut*Math.cos(pt),ht.y=ut*Math.sin(pt),at.push(ht.x,ht.y,ht.z),lt.push(0,0,1),mt.x=(ht.x/tt+1)/2,mt.y=(ht.y/tt+1)/2,ct.push(mt.x,mt.y)}ut+=dt}for(let yt=0;yt<rt;yt++){const vt=yt*(nt+1);for(let pt=0;pt<nt;pt++){const _t=pt+vt,xt=_t,St=_t+nt+1,At=_t+nt+2,bt=_t+1;ot.push(xt,St,bt),ot.push(St,At,bt)}}this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),tt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:tt};const nt=[],rt=[],it=[],st=[];let ot=0,at=0;if(Array.isArray(_)===!1)lt(_);else for(let ct=0;ct<_.length;ct++)lt(_[ct]),this.addGroup(ot,at,ct),ot+=at,at=0;this.setIndex(nt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(it,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2));function lt(ct){const ut=rt.length/3,dt=ct.extractPoints(tt);let ht=dt.shape;const mt=dt.holes;ShapeUtils.isClockWise(ht)===!1&&(ht=ht.reverse());for(let vt=0,pt=mt.length;vt<pt;vt++){const _t=mt[vt];ShapeUtils.isClockWise(_t)===!0&&(mt[vt]=_t.reverse())}const yt=ShapeUtils.triangulateShape(ht,mt);for(let vt=0,pt=mt.length;vt<pt;vt++){const _t=mt[vt];ht=ht.concat(_t)}for(let vt=0,pt=ht.length;vt<pt;vt++){const _t=ht[vt];rt.push(_t.x,_t.y,0),it.push(0,0,1),st.push(_t.x,_t.y)}for(let vt=0,pt=yt.length;vt<pt;vt++){const _t=yt[vt],xt=_t[0]+ut,St=_t[1]+ut,At=_t[2]+ut;nt.push(xt,St,At),at+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),tt=this.parameters.shapes;return toJSON(tt,_)}static fromJSON(_,tt){const nt=[];for(let rt=0,it=_.shapes.length;rt<it;rt++){const st=tt[_.shapes[rt]];nt.push(st)}return new ShapeGeometry(nt,_.curveSegments)}}function toJSON(_e,_){if(_.shapes=[],Array.isArray(_e))for(let tt=0,nt=_e.length;tt<nt;tt++){const rt=_e[tt];_.shapes.push(rt.uuid)}else _.shapes.push(_e.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,tt=32,nt=16,rt=0,it=Math.PI*2,st=0,ot=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:tt,heightSegments:nt,phiStart:rt,phiLength:it,thetaStart:st,thetaLength:ot},tt=Math.max(3,Math.floor(tt)),nt=Math.max(2,Math.floor(nt));const at=Math.min(st+ot,Math.PI);let lt=0;const ct=[],ut=new Vector3,dt=new Vector3,ht=[],mt=[],yt=[],vt=[];for(let pt=0;pt<=nt;pt++){const _t=[],xt=pt/nt;let St=0;pt===0&&st===0?St=.5/tt:pt===nt&&at===Math.PI&&(St=-.5/tt);for(let At=0;At<=tt;At++){const bt=At/tt;ut.x=-_*Math.cos(rt+bt*it)*Math.sin(st+xt*ot),ut.y=_*Math.cos(st+xt*ot),ut.z=_*Math.sin(rt+bt*it)*Math.sin(st+xt*ot),mt.push(ut.x,ut.y,ut.z),dt.copy(ut).normalize(),yt.push(dt.x,dt.y,dt.z),vt.push(bt+St,1-xt),_t.push(lt++)}ct.push(_t)}for(let pt=0;pt<nt;pt++)for(let _t=0;_t<tt;_t++){const xt=ct[pt][_t+1],St=ct[pt][_t],At=ct[pt+1][_t],bt=ct[pt+1][_t+1];(pt!==0||st>0)&&ht.push(xt,St,bt),(pt!==nt-1||at<Math.PI)&&ht.push(St,At,bt)}this.setIndex(ht),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(yt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],rt=[2,1,0,0,3,2,1,3,0,2,3,1];super(nt,rt,_,tt),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,tt=.4,nt=12,rt=48,it=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:tt,radialSegments:nt,tubularSegments:rt,arc:it},nt=Math.floor(nt),rt=Math.floor(rt);const st=[],ot=[],at=[],lt=[],ct=new Vector3,ut=new Vector3,dt=new Vector3;for(let ht=0;ht<=nt;ht++)for(let mt=0;mt<=rt;mt++){const yt=mt/rt*it,vt=ht/nt*Math.PI*2;ut.x=(_+tt*Math.cos(vt))*Math.cos(yt),ut.y=(_+tt*Math.cos(vt))*Math.sin(yt),ut.z=tt*Math.sin(vt),ot.push(ut.x,ut.y,ut.z),ct.x=_*Math.cos(yt),ct.y=_*Math.sin(yt),dt.subVectors(ut,ct).normalize(),at.push(dt.x,dt.y,dt.z),lt.push(mt/rt),lt.push(ht/nt)}for(let ht=1;ht<=nt;ht++)for(let mt=1;mt<=rt;mt++){const yt=(rt+1)*ht+mt-1,vt=(rt+1)*(ht-1)+mt-1,pt=(rt+1)*(ht-1)+mt,_t=(rt+1)*ht+mt;st.push(yt,vt,_t),st.push(vt,pt,_t)}this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,tt=.4,nt=64,rt=8,it=2,st=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:tt,tubularSegments:nt,radialSegments:rt,p:it,q:st},nt=Math.floor(nt),rt=Math.floor(rt);const ot=[],at=[],lt=[],ct=[],ut=new Vector3,dt=new Vector3,ht=new Vector3,mt=new Vector3,yt=new Vector3,vt=new Vector3,pt=new Vector3;for(let xt=0;xt<=nt;++xt){const St=xt/nt*it*Math.PI*2;_t(St,it,st,_,ht),_t(St+.01,it,st,_,mt),vt.subVectors(mt,ht),pt.addVectors(mt,ht),yt.crossVectors(vt,pt),pt.crossVectors(yt,vt),yt.normalize(),pt.normalize();for(let At=0;At<=rt;++At){const bt=At/rt*Math.PI*2,Et=-tt*Math.cos(bt),wt=tt*Math.sin(bt);ut.x=ht.x+(Et*pt.x+wt*yt.x),ut.y=ht.y+(Et*pt.y+wt*yt.y),ut.z=ht.z+(Et*pt.z+wt*yt.z),at.push(ut.x,ut.y,ut.z),dt.subVectors(ut,ht).normalize(),lt.push(dt.x,dt.y,dt.z),ct.push(xt/nt),ct.push(At/rt)}}for(let xt=1;xt<=nt;xt++)for(let St=1;St<=rt;St++){const At=(rt+1)*(xt-1)+(St-1),bt=(rt+1)*xt+(St-1),Et=(rt+1)*xt+St,wt=(rt+1)*(xt-1)+St;ot.push(At,bt,wt),ot.push(bt,Et,wt)}this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2));function _t(xt,St,At,bt,Et){const wt=Math.cos(xt),Rt=Math.sin(xt),Tt=At/St*xt,Mt=Math.cos(Tt);Et.x=bt*(2+Mt)*.5*wt,Et.y=bt*(2+Mt)*Rt*.5,Et.z=bt*Math.sin(Tt)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),tt=64,nt=1,rt=8,it=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:tt,radius:nt,radialSegments:rt,closed:it};const st=_.computeFrenetFrames(tt,it);this.tangents=st.tangents,this.normals=st.normals,this.binormals=st.binormals;const ot=new Vector3,at=new Vector3,lt=new Vector2;let ct=new Vector3;const ut=[],dt=[],ht=[],mt=[];yt(),this.setIndex(mt),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(dt,3)),this.setAttribute("uv",new Float32BufferAttribute(ht,2));function yt(){for(let xt=0;xt<tt;xt++)vt(xt);vt(it===!1?tt:0),_t(),pt()}function vt(xt){ct=_.getPointAt(xt/tt,ct);const St=st.normals[xt],At=st.binormals[xt];for(let bt=0;bt<=rt;bt++){const Et=bt/rt*Math.PI*2,wt=Math.sin(Et),Rt=-Math.cos(Et);at.x=Rt*St.x+wt*At.x,at.y=Rt*St.y+wt*At.y,at.z=Rt*St.z+wt*At.z,at.normalize(),dt.push(at.x,at.y,at.z),ot.x=ct.x+nt*at.x,ot.y=ct.y+nt*at.y,ot.z=ct.z+nt*at.z,ut.push(ot.x,ot.y,ot.z)}}function pt(){for(let xt=1;xt<=tt;xt++)for(let St=1;St<=rt;St++){const At=(rt+1)*(xt-1)+(St-1),bt=(rt+1)*xt+(St-1),Et=(rt+1)*xt+St,wt=(rt+1)*(xt-1)+St;mt.push(At,bt,wt),mt.push(bt,Et,wt)}}function _t(){for(let xt=0;xt<=tt;xt++)for(let St=0;St<=rt;St++)lt.x=xt/tt,lt.y=St/rt,ht.push(lt.x,lt.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const tt=[],nt=new Set,rt=new Vector3,it=new Vector3;if(_.index!==null){const st=_.attributes.position,ot=_.index;let at=_.groups;at.length===0&&(at=[{start:0,count:ot.count,materialIndex:0}]);for(let lt=0,ct=at.length;lt<ct;++lt){const ut=at[lt],dt=ut.start,ht=ut.count;for(let mt=dt,yt=dt+ht;mt<yt;mt+=3)for(let vt=0;vt<3;vt++){const pt=ot.getX(mt+vt),_t=ot.getX(mt+(vt+1)%3);rt.fromBufferAttribute(st,pt),it.fromBufferAttribute(st,_t),isUniqueEdge(rt,it,nt)===!0&&(tt.push(rt.x,rt.y,rt.z),tt.push(it.x,it.y,it.z))}}}else{const st=_.attributes.position;for(let ot=0,at=st.count/3;ot<at;ot++)for(let lt=0;lt<3;lt++){const ct=3*ot+lt,ut=3*ot+(lt+1)%3;rt.fromBufferAttribute(st,ct),it.fromBufferAttribute(st,ut),isUniqueEdge(rt,it,nt)===!0&&(tt.push(rt.x,rt.y,rt.z),tt.push(it.x,it.y,it.z))}}this.setAttribute("position",new Float32BufferAttribute(tt,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(_e,_,tt){const nt=`${_e.x},${_e.y},${_e.z}-${_.x},${_.y},${_.z}`,rt=`${_.x},${_.y},${_.z}-${_e.x},${_e.y},${_e.z}`;return tt.has(nt)===!0||tt.has(rt)===!0?!1:(tt.add(nt),tt.add(rt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$3(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(tt){this.ior=(1+.4*tt)/(1-.4*tt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get dispersion(){return this._dispersion}set dispersion(_){this._dispersion>0!=_>0&&this.version++,this._dispersion=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.dispersion=_.dispersion,this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function convertArray(_e,_,tt){return!_e||!tt&&_e.constructor===_?_e:typeof _.BYTES_PER_ELEMENT=="number"?new _(_e):Array.prototype.slice.call(_e)}function isTypedArray(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function getKeyframeOrder(_e){function _(rt,it){return _e[rt]-_e[it]}const tt=_e.length,nt=new Array(tt);for(let rt=0;rt!==tt;++rt)nt[rt]=rt;return nt.sort(_),nt}function sortedArray(_e,_,tt){const nt=_e.length,rt=new _e.constructor(nt);for(let it=0,st=0;st!==nt;++it){const ot=tt[it]*_;for(let at=0;at!==_;++at)rt[st++]=_e[ot+at]}return rt}function flattenJSON(_e,_,tt,nt){let rt=1,it=_e[0];for(;it!==void 0&&it[nt]===void 0;)it=_e[rt++];if(it===void 0)return;let st=it[nt];if(st!==void 0)if(Array.isArray(st))do st=it[nt],st!==void 0&&(_.push(it.time),tt.push.apply(tt,st)),it=_e[rt++];while(it!==void 0);else if(st.toArray!==void 0)do st=it[nt],st!==void 0&&(_.push(it.time),st.toArray(tt,tt.length)),it=_e[rt++];while(it!==void 0);else do st=it[nt],st!==void 0&&(_.push(it.time),tt.push(st)),it=_e[rt++];while(it!==void 0)}function subclip(_e,_,tt,nt,rt=30){const it=_e.clone();it.name=_;const st=[];for(let at=0;at<it.tracks.length;++at){const lt=it.tracks[at],ct=lt.getValueSize(),ut=[],dt=[];for(let ht=0;ht<lt.times.length;++ht){const mt=lt.times[ht]*rt;if(!(mt<tt||mt>=nt)){ut.push(lt.times[ht]);for(let yt=0;yt<ct;++yt)dt.push(lt.values[ht*ct+yt])}}ut.length!==0&&(lt.times=convertArray(ut,lt.times.constructor),lt.values=convertArray(dt,lt.values.constructor),st.push(lt))}it.tracks=st;let ot=1/0;for(let at=0;at<it.tracks.length;++at)ot>it.tracks[at].times[0]&&(ot=it.tracks[at].times[0]);for(let at=0;at<it.tracks.length;++at)it.tracks[at].shift(-1*ot);return it.resetDuration(),it}function makeClipAdditive(_e,_=0,tt=_e,nt=30){nt<=0&&(nt=30);const rt=tt.tracks.length,it=_/nt;for(let st=0;st<rt;++st){const ot=tt.tracks[st],at=ot.ValueTypeName;if(at==="bool"||at==="string")continue;const lt=_e.tracks.find(function(pt){return pt.name===ot.name&&pt.ValueTypeName===at});if(lt===void 0)continue;let ct=0;const ut=ot.getValueSize();ot.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ct=ut/3);let dt=0;const ht=lt.getValueSize();lt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(dt=ht/3);const mt=ot.times.length-1;let yt;if(it<=ot.times[0]){const pt=ct,_t=ut-ct;yt=ot.values.slice(pt,_t)}else if(it>=ot.times[mt]){const pt=mt*ut+ct,_t=pt+ut-ct;yt=ot.values.slice(pt,_t)}else{const pt=ot.createInterpolant(),_t=ct,xt=ut-ct;pt.evaluate(it),yt=pt.resultBuffer.slice(_t,xt)}at==="quaternion"&&new Quaternion().fromArray(yt).normalize().conjugate().toArray(yt);const vt=lt.times.length;for(let pt=0;pt<vt;++pt){const _t=pt*ht+dt;if(at==="quaternion")Quaternion.multiplyQuaternionsFlat(lt.values,_t,yt,0,lt.values,_t);else{const xt=ht-dt*2;for(let St=0;St<xt;++St)lt.values[_t+St]-=yt[St]}}}return _e.blendMode=AdditiveAnimationBlendMode,_e}const AnimationUtils={convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(_,tt,nt,rt){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=rt!==void 0?rt:new tt.constructor(nt),this.sampleValues=tt,this.valueSize=nt,this.settings=null,this.DefaultSettings_={}}evaluate(_){const tt=this.parameterPositions;let nt=this._cachedIndex,rt=tt[nt],it=tt[nt-1];e:{t:{let st;n:{r:if(!(_<rt)){for(let ot=nt+2;;){if(rt===void 0){if(_<it)break r;return nt=tt.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}if(nt===ot)break;if(it=rt,rt=tt[++nt],_<rt)break t}st=tt.length;break n}if(!(_>=it)){const ot=tt[1];_<ot&&(nt=2,it=ot);for(let at=nt-2;;){if(it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(nt===at)break;if(rt=it,it=tt[--nt-1],_>=it)break t}st=nt,nt=0;break n}break e}for(;nt<st;){const ot=nt+st>>>1;_<tt[ot]?st=ot:nt=ot+1}if(rt=tt[nt],it=tt[nt-1],it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(rt===void 0)return nt=tt.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}this._cachedIndex=nt,this.intervalChanged_(nt,it,rt)}return this.interpolate_(nt,it,_,rt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const tt=this.resultBuffer,nt=this.sampleValues,rt=this.valueSize,it=_*rt;for(let st=0;st!==rt;++st)tt[st]=nt[it+st];return tt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,tt,nt){const rt=this.parameterPositions;let it=_-2,st=_+1,ot=rt[it],at=rt[st];if(ot===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:it=_,ot=2*tt-nt;break;case WrapAroundEnding:it=rt.length-2,ot=tt+rt[it]-rt[it+1];break;default:it=_,ot=nt}if(at===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:st=_,at=2*nt-tt;break;case WrapAroundEnding:st=1,at=nt+rt[1]-rt[0];break;default:st=_-1,at=tt}const lt=(nt-tt)*.5,ct=this.valueSize;this._weightPrev=lt/(tt-ot),this._weightNext=lt/(at-nt),this._offsetPrev=it*ct,this._offsetNext=st*ct}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,st=this.sampleValues,ot=this.valueSize,at=_*ot,lt=at-ot,ct=this._offsetPrev,ut=this._offsetNext,dt=this._weightPrev,ht=this._weightNext,mt=(nt-tt)/(rt-tt),yt=mt*mt,vt=yt*mt,pt=-dt*vt+2*dt*yt-dt*mt,_t=(1+dt)*vt+(-1.5-2*dt)*yt+(-.5+dt)*mt+1,xt=(-1-ht)*vt+(1.5+ht)*yt+.5*mt,St=ht*vt-ht*yt;for(let At=0;At!==ot;++At)it[At]=pt*st[ct+At]+_t*st[lt+At]+xt*st[at+At]+St*st[ut+At];return it}}class LinearInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,st=this.sampleValues,ot=this.valueSize,at=_*ot,lt=at-ot,ct=(nt-tt)/(rt-tt),ut=1-ct;for(let dt=0;dt!==ot;++dt)it[dt]=st[lt+dt]*ut+st[at+dt]*ct;return it}}class DiscreteInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,tt,nt,rt){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(tt===void 0||tt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(tt,this.TimeBufferType),this.values=convertArray(nt,this.ValueBufferType),this.setInterpolation(rt||this.DefaultInterpolation)}static toJSON(_){const tt=_.constructor;let nt;if(tt.toJSON!==this.toJSON)nt=tt.toJSON(_);else{nt={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const rt=_.getInterpolation();rt!==_.DefaultInterpolation&&(nt.interpolation=rt)}return nt.type=_.ValueTypeName,nt}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let tt;switch(_){case InterpolateDiscrete:tt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:tt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:tt=this.InterpolantFactoryMethodSmooth;break}if(tt===void 0){const nt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(nt);return console.warn("THREE.KeyframeTrack:",nt),this}return this.createInterpolant=tt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const tt=this.times;for(let nt=0,rt=tt.length;nt!==rt;++nt)tt[nt]+=_}return this}scale(_){if(_!==1){const tt=this.times;for(let nt=0,rt=tt.length;nt!==rt;++nt)tt[nt]*=_}return this}trim(_,tt){const nt=this.times,rt=nt.length;let it=0,st=rt-1;for(;it!==rt&&nt[it]<_;)++it;for(;st!==-1&&nt[st]>tt;)--st;if(++st,it!==0||st!==rt){it>=st&&(st=Math.max(st,1),it=st-1);const ot=this.getValueSize();this.times=nt.slice(it,st),this.values=this.values.slice(it*ot,st*ot)}return this}validate(){let _=!0;const tt=this.getValueSize();tt-Math.floor(tt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_=!1);const nt=this.times,rt=this.values,it=nt.length;it===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_=!1);let st=null;for(let ot=0;ot!==it;ot++){const at=nt[ot];if(typeof at=="number"&&isNaN(at)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,ot,at),_=!1;break}if(st!==null&&st>at){console.error("THREE.KeyframeTrack: Out of order keys.",this,ot,at,st),_=!1;break}st=at}if(rt!==void 0&&isTypedArray(rt))for(let ot=0,at=rt.length;ot!==at;++ot){const lt=rt[ot];if(isNaN(lt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,ot,lt),_=!1;break}}return _}optimize(){const _=this.times.slice(),tt=this.values.slice(),nt=this.getValueSize(),rt=this.getInterpolation()===InterpolateSmooth,it=_.length-1;let st=1;for(let ot=1;ot<it;++ot){let at=!1;const lt=_[ot],ct=_[ot+1];if(lt!==ct&&(ot!==1||lt!==_[0]))if(rt)at=!0;else{const ut=ot*nt,dt=ut-nt,ht=ut+nt;for(let mt=0;mt!==nt;++mt){const yt=tt[ut+mt];if(yt!==tt[dt+mt]||yt!==tt[ht+mt]){at=!0;break}}}if(at){if(ot!==st){_[st]=_[ot];const ut=ot*nt,dt=st*nt;for(let ht=0;ht!==nt;++ht)tt[dt+ht]=tt[ut+ht]}++st}}if(it>0){_[st]=_[it];for(let ot=it*nt,at=st*nt,lt=0;lt!==nt;++lt)tt[at+lt]=tt[ot+lt];++st}return st!==_.length?(this.times=_.slice(0,st),this.values=tt.slice(0,st*nt)):(this.times=_,this.values=tt),this}clone(){const _=this.times.slice(),tt=this.values.slice(),nt=this.constructor,rt=new nt(this.name,_,tt);return rt.createInterpolant=this.createInterpolant,rt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(_,tt,nt){super(_,tt,nt)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,st=this.sampleValues,ot=this.valueSize,at=(nt-tt)/(rt-tt);let lt=_*ot;for(let ct=lt+ot;lt!==ct;lt+=4)Quaternion.slerpFlat(it,0,st,lt-ot,st,lt,at);return it}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(_,tt,nt){super(_,tt,nt)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_="",tt=-1,nt=[],rt=NormalAnimationBlendMode){this.name=_,this.tracks=nt,this.duration=tt,this.blendMode=rt,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(_){const tt=[],nt=_.tracks,rt=1/(_.fps||1);for(let st=0,ot=nt.length;st!==ot;++st)tt.push(parseKeyframeTrack(nt[st]).scale(rt));const it=new this(_.name,_.duration,tt,_.blendMode);return it.uuid=_.uuid,it}static toJSON(_){const tt=[],nt=_.tracks,rt={name:_.name,duration:_.duration,tracks:tt,uuid:_.uuid,blendMode:_.blendMode};for(let it=0,st=nt.length;it!==st;++it)tt.push(KeyframeTrack.toJSON(nt[it]));return rt}static CreateFromMorphTargetSequence(_,tt,nt,rt){const it=tt.length,st=[];for(let ot=0;ot<it;ot++){let at=[],lt=[];at.push((ot+it-1)%it,ot,(ot+1)%it),lt.push(0,1,0);const ct=getKeyframeOrder(at);at=sortedArray(at,1,ct),lt=sortedArray(lt,1,ct),!rt&&at[0]===0&&(at.push(it),lt.push(lt[0])),st.push(new NumberKeyframeTrack(".morphTargetInfluences["+tt[ot].name+"]",at,lt).scale(1/nt))}return new this(_,-1,st)}static findByName(_,tt){let nt=_;if(!Array.isArray(_)){const rt=_;nt=rt.geometry&&rt.geometry.animations||rt.animations}for(let rt=0;rt<nt.length;rt++)if(nt[rt].name===tt)return nt[rt];return null}static CreateClipsFromMorphTargetSequences(_,tt,nt){const rt={},it=/^([\w-]*?)([\d]+)$/;for(let ot=0,at=_.length;ot<at;ot++){const lt=_[ot],ct=lt.name.match(it);if(ct&&ct.length>1){const ut=ct[1];let dt=rt[ut];dt||(rt[ut]=dt=[]),dt.push(lt)}}const st=[];for(const ot in rt)st.push(this.CreateFromMorphTargetSequence(ot,rt[ot],tt,nt));return st}static parseAnimation(_,tt){if(!_)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const nt=function(ut,dt,ht,mt,yt){if(ht.length!==0){const vt=[],pt=[];flattenJSON(ht,vt,pt,mt),vt.length!==0&&yt.push(new ut(dt,vt,pt))}},rt=[],it=_.name||"default",st=_.fps||30,ot=_.blendMode;let at=_.length||-1;const lt=_.hierarchy||[];for(let ut=0;ut<lt.length;ut++){const dt=lt[ut].keys;if(!(!dt||dt.length===0))if(dt[0].morphTargets){const ht={};let mt;for(mt=0;mt<dt.length;mt++)if(dt[mt].morphTargets)for(let yt=0;yt<dt[mt].morphTargets.length;yt++)ht[dt[mt].morphTargets[yt]]=-1;for(const yt in ht){const vt=[],pt=[];for(let _t=0;_t!==dt[mt].morphTargets.length;++_t){const xt=dt[mt];vt.push(xt.time),pt.push(xt.morphTarget===yt?1:0)}rt.push(new NumberKeyframeTrack(".morphTargetInfluence["+yt+"]",vt,pt))}at=ht.length*st}else{const ht=".bones["+tt[ut].name+"]";nt(VectorKeyframeTrack,ht+".position",dt,"pos",rt),nt(QuaternionKeyframeTrack,ht+".quaternion",dt,"rot",rt),nt(VectorKeyframeTrack,ht+".scale",dt,"scl",rt)}}return rt.length===0?null:new this(it,at,rt,ot)}resetDuration(){const _=this.tracks;let tt=0;for(let nt=0,rt=_.length;nt!==rt;++nt){const it=this.tracks[nt];tt=Math.max(tt,it.times[it.times.length-1])}return this.duration=tt,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let tt=0;tt<this.tracks.length;tt++)_=_&&this.tracks[tt].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let tt=0;tt<this.tracks.length;tt++)_.push(this.tracks[tt].clone());return new this.constructor(this.name,this.duration,_,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(_e){switch(_e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_e)}function parseKeyframeTrack(_e){if(_e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(_e.type);if(_e.times===void 0){const tt=[],nt=[];flattenJSON(_e.keys,tt,nt,"value"),_e.times=tt,_e.values=nt}return _.parse!==void 0?_.parse(_e):new _(_e.name,_e.times,_e.values,_e.interpolation)}const Cache={enabled:!1,files:{},add:function(_e,_){this.enabled!==!1&&(this.files[_e]=_)},get:function(_e){if(this.enabled!==!1)return this.files[_e]},remove:function(_e){delete this.files[_e]},clear:function(){this.files={}}};class LoadingManager{constructor(_,tt,nt){const rt=this;let it=!1,st=0,ot=0,at;const lt=[];this.onStart=void 0,this.onLoad=_,this.onProgress=tt,this.onError=nt,this.itemStart=function(ct){ot++,it===!1&&rt.onStart!==void 0&&rt.onStart(ct,st,ot),it=!0},this.itemEnd=function(ct){st++,rt.onProgress!==void 0&&rt.onProgress(ct,st,ot),st===ot&&(it=!1,rt.onLoad!==void 0&&rt.onLoad())},this.itemError=function(ct){rt.onError!==void 0&&rt.onError(ct)},this.resolveURL=function(ct){return at?at(ct):ct},this.setURLModifier=function(ct){return at=ct,this},this.addHandler=function(ct,ut){return lt.push(ct,ut),this},this.removeHandler=function(ct){const ut=lt.indexOf(ct);return ut!==-1&&lt.splice(ut,2),this},this.getHandler=function(ct){for(let ut=0,dt=lt.length;ut<dt;ut+=2){const ht=lt[ut],mt=lt[ut+1];if(ht.global&&(ht.lastIndex=0),ht.test(ct))return mt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,tt){const nt=this;return new Promise(function(rt,it){nt.load(_,rt,tt,it)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(_,tt){super(_),this.response=tt}}class FileLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=Cache.get(_);if(it!==void 0)return this.manager.itemStart(_),setTimeout(()=>{tt&&tt(it),this.manager.itemEnd(_)},0),it;if(loading[_]!==void 0){loading[_].push({onLoad:tt,onProgress:nt,onError:rt});return}loading[_]=[],loading[_].push({onLoad:tt,onProgress:nt,onError:rt});const st=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),ot=this.mimeType,at=this.responseType;fetch(st).then(lt=>{if(lt.status===200||lt.status===0){if(lt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||lt.body===void 0||lt.body.getReader===void 0)return lt;const ct=loading[_],ut=lt.body.getReader(),dt=lt.headers.get("X-File-Size")||lt.headers.get("Content-Length"),ht=dt?parseInt(dt):0,mt=ht!==0;let yt=0;const vt=new ReadableStream({start(pt){_t();function _t(){ut.read().then(({done:xt,value:St})=>{if(xt)pt.close();else{yt+=St.byteLength;const At=new ProgressEvent("progress",{lengthComputable:mt,loaded:yt,total:ht});for(let bt=0,Et=ct.length;bt<Et;bt++){const wt=ct[bt];wt.onProgress&&wt.onProgress(At)}pt.enqueue(St),_t()}},xt=>{pt.error(xt)})}}});return new Response(vt)}else throw new HttpError(`fetch for "${lt.url}" responded with ${lt.status}: ${lt.statusText}`,lt)}).then(lt=>{switch(at){case"arraybuffer":return lt.arrayBuffer();case"blob":return lt.blob();case"document":return lt.text().then(ct=>new DOMParser().parseFromString(ct,ot));case"json":return lt.json();default:if(ot===void 0)return lt.text();{const ut=/charset="?([^;"\s]*)"?/i.exec(ot),dt=ut&&ut[1]?ut[1].toLowerCase():void 0,ht=new TextDecoder(dt);return lt.arrayBuffer().then(mt=>ht.decode(mt))}}}).then(lt=>{Cache.add(_,lt);const ct=loading[_];delete loading[_];for(let ut=0,dt=ct.length;ut<dt;ut++){const ht=ct[ut];ht.onLoad&&ht.onLoad(lt)}}).catch(lt=>{const ct=loading[_];if(ct===void 0)throw this.manager.itemError(_),lt;delete loading[_];for(let ut=0,dt=ct.length;ut<dt;ut++){const ht=ct[ut];ht.onError&&ht.onError(lt)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}}class AnimationLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=new FileLoader(this.manager);st.setPath(this.path),st.setRequestHeader(this.requestHeader),st.setWithCredentials(this.withCredentials),st.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const tt=[];for(let nt=0;nt<_.length;nt++){const rt=AnimationClip.parse(_[nt]);tt.push(rt)}return tt}}class CompressedTextureLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=[],ot=new CompressedTexture,at=new FileLoader(this.manager);at.setPath(this.path),at.setResponseType("arraybuffer"),at.setRequestHeader(this.requestHeader),at.setWithCredentials(it.withCredentials);let lt=0;function ct(ut){at.load(_[ut],function(dt){const ht=it.parse(dt,!0);st[ut]={width:ht.width,height:ht.height,format:ht.format,mipmaps:ht.mipmaps},lt+=1,lt===6&&(ht.mipmapCount===1&&(ot.minFilter=LinearFilter),ot.image=st,ot.format=ht.format,ot.needsUpdate=!0,tt&&tt(ot))},nt,rt)}if(Array.isArray(_))for(let ut=0,dt=_.length;ut<dt;++ut)ct(ut);else at.load(_,function(ut){const dt=it.parse(ut,!0);if(dt.isCubemap){const ht=dt.mipmaps.length/dt.mipmapCount;for(let mt=0;mt<ht;mt++){st[mt]={mipmaps:[]};for(let yt=0;yt<dt.mipmapCount;yt++)st[mt].mipmaps.push(dt.mipmaps[mt*dt.mipmapCount+yt]),st[mt].format=dt.format,st[mt].width=dt.width,st[mt].height=dt.height}ot.image=st}else ot.image.width=dt.width,ot.image.height=dt.height,ot.mipmaps=dt.mipmaps;dt.mipmapCount===1&&(ot.minFilter=LinearFilter),ot.format=dt.format,ot.needsUpdate=!0,tt&&tt(ot)},nt,rt);return ot}}class ImageLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,st=Cache.get(_);if(st!==void 0)return it.manager.itemStart(_),setTimeout(function(){tt&&tt(st),it.manager.itemEnd(_)},0),st;const ot=createElementNS("img");function at(){ct(),Cache.add(_,this),tt&&tt(this),it.manager.itemEnd(_)}function lt(ut){ct(),rt&&rt(ut),it.manager.itemError(_),it.manager.itemEnd(_)}function ct(){ot.removeEventListener("load",at,!1),ot.removeEventListener("error",lt,!1)}return ot.addEventListener("load",at,!1),ot.addEventListener("error",lt,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ot.crossOrigin=this.crossOrigin),it.manager.itemStart(_),ot.src=_,ot}}class CubeTextureLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=new CubeTexture;it.colorSpace=SRGBColorSpace$1;const st=new ImageLoader(this.manager);st.setCrossOrigin(this.crossOrigin),st.setPath(this.path);let ot=0;function at(lt){st.load(_[lt],function(ct){it.images[lt]=ct,ot++,ot===6&&(it.needsUpdate=!0,tt&&tt(it))},void 0,rt)}for(let lt=0;lt<_.length;++lt)at(lt);return it}}class DataTextureLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=new DataTexture,ot=new FileLoader(this.manager);return ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setPath(this.path),ot.setWithCredentials(it.withCredentials),ot.load(_,function(at){let lt;try{lt=it.parse(at)}catch(ct){if(rt!==void 0)rt(ct);else{console.error(ct);return}}lt.image!==void 0?st.image=lt.image:lt.data!==void 0&&(st.image.width=lt.width,st.image.height=lt.height,st.image.data=lt.data),st.wrapS=lt.wrapS!==void 0?lt.wrapS:ClampToEdgeWrapping,st.wrapT=lt.wrapT!==void 0?lt.wrapT:ClampToEdgeWrapping,st.magFilter=lt.magFilter!==void 0?lt.magFilter:LinearFilter,st.minFilter=lt.minFilter!==void 0?lt.minFilter:LinearFilter,st.anisotropy=lt.anisotropy!==void 0?lt.anisotropy:1,lt.colorSpace!==void 0&&(st.colorSpace=lt.colorSpace),lt.flipY!==void 0&&(st.flipY=lt.flipY),lt.format!==void 0&&(st.format=lt.format),lt.type!==void 0&&(st.type=lt.type),lt.mipmaps!==void 0&&(st.mipmaps=lt.mipmaps,st.minFilter=LinearMipmapLinearFilter),lt.mipmapCount===1&&(st.minFilter=LinearFilter),lt.generateMipmaps!==void 0&&(st.generateMipmaps=lt.generateMipmaps),st.needsUpdate=!0,tt&&tt(st,lt)},nt,rt),st}}class TextureLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=new Texture,st=new ImageLoader(this.manager);return st.setCrossOrigin(this.crossOrigin),st.setPath(this.path),st.load(_,function(ot){it.image=ot,it.needsUpdate=!0,tt!==void 0&&tt(it)},nt,rt),it}}class Light extends Object3D{constructor(_,tt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(_),this.intensity=tt}dispose(){}copy(_,tt){return super.copy(_,tt),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const tt=super.toJSON(_);return tt.object.color=this.color.getHex(),tt.object.intensity=this.intensity,this.groundColor!==void 0&&(tt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(tt.object.distance=this.distance),this.angle!==void 0&&(tt.object.angle=this.angle),this.decay!==void 0&&(tt.object.decay=this.decay),this.penumbra!==void 0&&(tt.object.penumbra=this.penumbra),this.shadow!==void 0&&(tt.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(tt.object.target=this.target.uuid),tt}}class HemisphereLight extends Light{constructor(_,tt,nt){super(_,nt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(tt)}copy(_,tt){return super.copy(_,tt),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const tt=this.camera,nt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),tt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),tt.lookAt(_lookTarget$1),tt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),nt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),nt.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.intensity=_.intensity,this.bias=_.bias,this.radius=_.radius,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.intensity!==1&&(_.intensity=this.intensity),this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(_){const tt=this.camera,nt=RAD2DEG*2*_.angle*this.focus,rt=this.mapSize.width/this.mapSize.height,it=_.distance||tt.far;(nt!==tt.fov||rt!==tt.aspect||it!==tt.far)&&(tt.fov=nt,tt.aspect=rt,tt.far=it,tt.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,tt,nt=0,rt=Math.PI/3,it=0,st=2){super(_,tt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=nt,this.angle=rt,this.penumbra=it,this.decay=st,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,tt){return super.copy(_,tt),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,tt=0){const nt=this.camera,rt=this.matrix,it=_.distance||nt.far;it!==nt.far&&(nt.far=it,nt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),nt.position.copy(_lightPositionWorld),_lookTarget.copy(nt.position),_lookTarget.add(this._cubeDirections[tt]),nt.up.copy(this._cubeUps[tt]),nt.lookAt(_lookTarget),nt.updateMatrixWorld(),rt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(_,tt,nt=0,rt=2){super(_,tt),this.isPointLight=!0,this.type="PointLight",this.distance=nt,this.decay=rt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,tt){return super.copy(_,tt),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,tt){super(_,tt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,tt){super(_,tt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,tt,nt=10,rt=10){super(_,tt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=nt,this.height=rt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const tt=super.toJSON(_);return tt.object.width=this.width,tt.object.height=this.height,tt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].copy(_[tt]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,tt){const nt=_.x,rt=_.y,it=_.z,st=this.coefficients;return tt.copy(st[0]).multiplyScalar(.282095),tt.addScaledVector(st[1],.488603*rt),tt.addScaledVector(st[2],.488603*it),tt.addScaledVector(st[3],.488603*nt),tt.addScaledVector(st[4],1.092548*(nt*rt)),tt.addScaledVector(st[5],1.092548*(rt*it)),tt.addScaledVector(st[6],.315392*(3*it*it-1)),tt.addScaledVector(st[7],1.092548*(nt*it)),tt.addScaledVector(st[8],.546274*(nt*nt-rt*rt)),tt}getIrradianceAt(_,tt){const nt=_.x,rt=_.y,it=_.z,st=this.coefficients;return tt.copy(st[0]).multiplyScalar(.886227),tt.addScaledVector(st[1],2*.511664*rt),tt.addScaledVector(st[2],2*.511664*it),tt.addScaledVector(st[3],2*.511664*nt),tt.addScaledVector(st[4],2*.429043*nt*rt),tt.addScaledVector(st[5],2*.429043*rt*it),tt.addScaledVector(st[6],.743125*it*it-.247708),tt.addScaledVector(st[7],2*.429043*nt*it),tt.addScaledVector(st[8],.429043*(nt*nt-rt*rt)),tt}add(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].add(_.coefficients[tt]);return this}addScaledSH(_,tt){for(let nt=0;nt<9;nt++)this.coefficients[nt].addScaledVector(_.coefficients[nt],tt);return this}scale(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].multiplyScalar(_);return this}lerp(_,tt){for(let nt=0;nt<9;nt++)this.coefficients[nt].lerp(_.coefficients[nt],tt);return this}equals(_){for(let tt=0;tt<9;tt++)if(!this.coefficients[tt].equals(_.coefficients[tt]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,tt=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].fromArray(_,tt+rt*3);return this}toArray(_=[],tt=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].toArray(_,tt+rt*3);return _}static getBasisAt(_,tt){const nt=_.x,rt=_.y,it=_.z;tt[0]=.282095,tt[1]=.488603*rt,tt[2]=.488603*it,tt[3]=.488603*nt,tt[4]=1.092548*nt*rt,tt[5]=1.092548*rt*it,tt[6]=.315392*(3*it*it-1),tt[7]=1.092548*nt*it,tt[8]=.546274*(nt*nt-rt*rt)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,tt=1){super(void 0,tt),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const tt=super.toJSON(_);return tt.object.sh=this.sh.toArray(),tt}}class MaterialLoader extends Loader{constructor(_){super(_),this.textures={}}load(_,tt,nt,rt){const it=this,st=new FileLoader(it.manager);st.setPath(it.path),st.setRequestHeader(it.requestHeader),st.setWithCredentials(it.withCredentials),st.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const tt=this.textures;function nt(it){return tt[it]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",it),tt[it]}const rt=this.createMaterialFromType(_.type);if(_.uuid!==void 0&&(rt.uuid=_.uuid),_.name!==void 0&&(rt.name=_.name),_.color!==void 0&&rt.color!==void 0&&rt.color.setHex(_.color),_.roughness!==void 0&&(rt.roughness=_.roughness),_.metalness!==void 0&&(rt.metalness=_.metalness),_.sheen!==void 0&&(rt.sheen=_.sheen),_.sheenColor!==void 0&&(rt.sheenColor=new Color$1().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(rt.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&rt.emissive!==void 0&&rt.emissive.setHex(_.emissive),_.specular!==void 0&&rt.specular!==void 0&&rt.specular.setHex(_.specular),_.specularIntensity!==void 0&&(rt.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&rt.specularColor!==void 0&&rt.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(rt.shininess=_.shininess),_.clearcoat!==void 0&&(rt.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(rt.clearcoatRoughness=_.clearcoatRoughness),_.dispersion!==void 0&&(rt.dispersion=_.dispersion),_.iridescence!==void 0&&(rt.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(rt.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(rt.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(rt.transmission=_.transmission),_.thickness!==void 0&&(rt.thickness=_.thickness),_.attenuationDistance!==void 0&&(rt.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&rt.attenuationColor!==void 0&&rt.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(rt.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(rt.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(rt.fog=_.fog),_.flatShading!==void 0&&(rt.flatShading=_.flatShading),_.blending!==void 0&&(rt.blending=_.blending),_.combine!==void 0&&(rt.combine=_.combine),_.side!==void 0&&(rt.side=_.side),_.shadowSide!==void 0&&(rt.shadowSide=_.shadowSide),_.opacity!==void 0&&(rt.opacity=_.opacity),_.transparent!==void 0&&(rt.transparent=_.transparent),_.alphaTest!==void 0&&(rt.alphaTest=_.alphaTest),_.alphaHash!==void 0&&(rt.alphaHash=_.alphaHash),_.depthFunc!==void 0&&(rt.depthFunc=_.depthFunc),_.depthTest!==void 0&&(rt.depthTest=_.depthTest),_.depthWrite!==void 0&&(rt.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(rt.colorWrite=_.colorWrite),_.blendSrc!==void 0&&(rt.blendSrc=_.blendSrc),_.blendDst!==void 0&&(rt.blendDst=_.blendDst),_.blendEquation!==void 0&&(rt.blendEquation=_.blendEquation),_.blendSrcAlpha!==void 0&&(rt.blendSrcAlpha=_.blendSrcAlpha),_.blendDstAlpha!==void 0&&(rt.blendDstAlpha=_.blendDstAlpha),_.blendEquationAlpha!==void 0&&(rt.blendEquationAlpha=_.blendEquationAlpha),_.blendColor!==void 0&&rt.blendColor!==void 0&&rt.blendColor.setHex(_.blendColor),_.blendAlpha!==void 0&&(rt.blendAlpha=_.blendAlpha),_.stencilWriteMask!==void 0&&(rt.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(rt.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(rt.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(rt.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(rt.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(rt.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(rt.stencilZPass=_.stencilZPass),_.stencilWrite!==void 0&&(rt.stencilWrite=_.stencilWrite),_.wireframe!==void 0&&(rt.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(rt.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(rt.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(rt.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(rt.rotation=_.rotation),_.linewidth!==void 0&&(rt.linewidth=_.linewidth),_.dashSize!==void 0&&(rt.dashSize=_.dashSize),_.gapSize!==void 0&&(rt.gapSize=_.gapSize),_.scale!==void 0&&(rt.scale=_.scale),_.polygonOffset!==void 0&&(rt.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(rt.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(rt.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(rt.dithering=_.dithering),_.alphaToCoverage!==void 0&&(rt.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(rt.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(rt.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(rt.visible=_.visible),_.toneMapped!==void 0&&(rt.toneMapped=_.toneMapped),_.userData!==void 0&&(rt.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?rt.vertexColors=_.vertexColors>0:rt.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const it in _.uniforms){const st=_.uniforms[it];switch(rt.uniforms[it]={},st.type){case"t":rt.uniforms[it].value=nt(st.value);break;case"c":rt.uniforms[it].value=new Color$1().setHex(st.value);break;case"v2":rt.uniforms[it].value=new Vector2().fromArray(st.value);break;case"v3":rt.uniforms[it].value=new Vector3().fromArray(st.value);break;case"v4":rt.uniforms[it].value=new Vector4().fromArray(st.value);break;case"m3":rt.uniforms[it].value=new Matrix3().fromArray(st.value);break;case"m4":rt.uniforms[it].value=new Matrix4().fromArray(st.value);break;default:rt.uniforms[it].value=st.value}}if(_.defines!==void 0&&(rt.defines=_.defines),_.vertexShader!==void 0&&(rt.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(rt.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(rt.glslVersion=_.glslVersion),_.extensions!==void 0)for(const it in _.extensions)rt.extensions[it]=_.extensions[it];if(_.lights!==void 0&&(rt.lights=_.lights),_.clipping!==void 0&&(rt.clipping=_.clipping),_.size!==void 0&&(rt.size=_.size),_.sizeAttenuation!==void 0&&(rt.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(rt.map=nt(_.map)),_.matcap!==void 0&&(rt.matcap=nt(_.matcap)),_.alphaMap!==void 0&&(rt.alphaMap=nt(_.alphaMap)),_.bumpMap!==void 0&&(rt.bumpMap=nt(_.bumpMap)),_.bumpScale!==void 0&&(rt.bumpScale=_.bumpScale),_.normalMap!==void 0&&(rt.normalMap=nt(_.normalMap)),_.normalMapType!==void 0&&(rt.normalMapType=_.normalMapType),_.normalScale!==void 0){let it=_.normalScale;Array.isArray(it)===!1&&(it=[it,it]),rt.normalScale=new Vector2().fromArray(it)}return _.displacementMap!==void 0&&(rt.displacementMap=nt(_.displacementMap)),_.displacementScale!==void 0&&(rt.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(rt.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(rt.roughnessMap=nt(_.roughnessMap)),_.metalnessMap!==void 0&&(rt.metalnessMap=nt(_.metalnessMap)),_.emissiveMap!==void 0&&(rt.emissiveMap=nt(_.emissiveMap)),_.emissiveIntensity!==void 0&&(rt.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(rt.specularMap=nt(_.specularMap)),_.specularIntensityMap!==void 0&&(rt.specularIntensityMap=nt(_.specularIntensityMap)),_.specularColorMap!==void 0&&(rt.specularColorMap=nt(_.specularColorMap)),_.envMap!==void 0&&(rt.envMap=nt(_.envMap)),_.envMapRotation!==void 0&&rt.envMapRotation.fromArray(_.envMapRotation),_.envMapIntensity!==void 0&&(rt.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(rt.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(rt.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(rt.lightMap=nt(_.lightMap)),_.lightMapIntensity!==void 0&&(rt.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(rt.aoMap=nt(_.aoMap)),_.aoMapIntensity!==void 0&&(rt.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(rt.gradientMap=nt(_.gradientMap)),_.clearcoatMap!==void 0&&(rt.clearcoatMap=nt(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(rt.clearcoatRoughnessMap=nt(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(rt.clearcoatNormalMap=nt(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(rt.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(rt.iridescenceMap=nt(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(rt.iridescenceThicknessMap=nt(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(rt.transmissionMap=nt(_.transmissionMap)),_.thicknessMap!==void 0&&(rt.thicknessMap=nt(_.thicknessMap)),_.anisotropyMap!==void 0&&(rt.anisotropyMap=nt(_.anisotropyMap)),_.sheenColorMap!==void 0&&(rt.sheenColorMap=nt(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(rt.sheenRoughnessMap=nt(_.sheenRoughnessMap)),rt}setTextures(_){return this.textures=_,this}createMaterialFromType(_){return MaterialLoader.createMaterialFromType(_)}static createMaterialFromType(_){const tt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new tt[_]}}class LoaderUtils{static decodeText(_){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(_);let tt="";for(let nt=0,rt=_.length;nt<rt;nt++)tt+=String.fromCharCode(_[nt]);try{return decodeURIComponent(escape(tt))}catch{return tt}}static extractUrlBase(_){const tt=_.lastIndexOf("/");return tt===-1?"./":_.slice(0,tt+1)}static resolveURL(_,tt){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(tt)&&/^\//.test(_)&&(tt=tt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:tt+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=new FileLoader(it.manager);st.setPath(it.path),st.setRequestHeader(it.requestHeader),st.setWithCredentials(it.withCredentials),st.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const tt={},nt={};function rt(ht,mt){if(tt[mt]!==void 0)return tt[mt];const vt=ht.interleavedBuffers[mt],pt=it(ht,vt.buffer),_t=getTypedArray(vt.type,pt),xt=new InterleavedBuffer(_t,vt.stride);return xt.uuid=vt.uuid,tt[mt]=xt,xt}function it(ht,mt){if(nt[mt]!==void 0)return nt[mt];const vt=ht.arrayBuffers[mt],pt=new Uint32Array(vt).buffer;return nt[mt]=pt,pt}const st=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ot=_.data.index;if(ot!==void 0){const ht=getTypedArray(ot.type,ot.array);st.setIndex(new BufferAttribute(ht,1))}const at=_.data.attributes;for(const ht in at){const mt=at[ht];let yt;if(mt.isInterleavedBufferAttribute){const vt=rt(_.data,mt.data);yt=new InterleavedBufferAttribute(vt,mt.itemSize,mt.offset,mt.normalized)}else{const vt=getTypedArray(mt.type,mt.array),pt=mt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;yt=new pt(vt,mt.itemSize,mt.normalized)}mt.name!==void 0&&(yt.name=mt.name),mt.usage!==void 0&&yt.setUsage(mt.usage),st.setAttribute(ht,yt)}const lt=_.data.morphAttributes;if(lt)for(const ht in lt){const mt=lt[ht],yt=[];for(let vt=0,pt=mt.length;vt<pt;vt++){const _t=mt[vt];let xt;if(_t.isInterleavedBufferAttribute){const St=rt(_.data,_t.data);xt=new InterleavedBufferAttribute(St,_t.itemSize,_t.offset,_t.normalized)}else{const St=getTypedArray(_t.type,_t.array);xt=new BufferAttribute(St,_t.itemSize,_t.normalized)}_t.name!==void 0&&(xt.name=_t.name),yt.push(xt)}st.morphAttributes[ht]=yt}_.data.morphTargetsRelative&&(st.morphTargetsRelative=!0);const ut=_.data.groups||_.data.drawcalls||_.data.offsets;if(ut!==void 0)for(let ht=0,mt=ut.length;ht!==mt;++ht){const yt=ut[ht];st.addGroup(yt.start,yt.count,yt.materialIndex)}const dt=_.data.boundingSphere;if(dt!==void 0){const ht=new Vector3;dt.center!==void 0&&ht.fromArray(dt.center),st.boundingSphere=new Sphere(ht,dt.radius)}return _.name&&(st.name=_.name),_.userData&&(st.userData=_.userData),st}}class ObjectLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||st;const ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(at){let lt=null;try{lt=JSON.parse(at)}catch(ut){rt!==void 0&&rt(ut),console.error("THREE:ObjectLoader: Can't parse "+_+".",ut.message);return}const ct=lt.metadata;if(ct===void 0||ct.type===void 0||ct.type.toLowerCase()==="geometry"){rt!==void 0&&rt(new Error("THREE.ObjectLoader: Can't load "+_)),console.error("THREE.ObjectLoader: Can't load "+_);return}it.parse(lt,tt)},nt,rt)}async loadAsync(_,tt){const nt=this,rt=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||rt;const it=new FileLoader(this.manager);it.setPath(this.path),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials);const st=await it.loadAsync(_,tt),ot=JSON.parse(st),at=ot.metadata;if(at===void 0||at.type===void 0||at.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await nt.parseAsync(ot)}parse(_,tt){const nt=this.parseAnimations(_.animations),rt=this.parseShapes(_.shapes),it=this.parseGeometries(_.geometries,rt),st=this.parseImages(_.images,function(){tt!==void 0&&tt(lt)}),ot=this.parseTextures(_.textures,st),at=this.parseMaterials(_.materials,ot),lt=this.parseObject(_.object,it,at,ot,nt),ct=this.parseSkeletons(_.skeletons,lt);if(this.bindSkeletons(lt,ct),this.bindLightTargets(lt),tt!==void 0){let ut=!1;for(const dt in st)if(st[dt].data instanceof HTMLImageElement){ut=!0;break}ut===!1&&tt(lt)}return lt}async parseAsync(_){const tt=this.parseAnimations(_.animations),nt=this.parseShapes(_.shapes),rt=this.parseGeometries(_.geometries,nt),it=await this.parseImagesAsync(_.images),st=this.parseTextures(_.textures,it),ot=this.parseMaterials(_.materials,st),at=this.parseObject(_.object,rt,ot,st,tt),lt=this.parseSkeletons(_.skeletons,at);return this.bindSkeletons(at,lt),this.bindLightTargets(at),at}parseShapes(_){const tt={};if(_!==void 0)for(let nt=0,rt=_.length;nt<rt;nt++){const it=new Shape().fromJSON(_[nt]);tt[it.uuid]=it}return tt}parseSkeletons(_,tt){const nt={},rt={};if(tt.traverse(function(it){it.isBone&&(rt[it.uuid]=it)}),_!==void 0)for(let it=0,st=_.length;it<st;it++){const ot=new Skeleton().fromJSON(_[it],rt);nt[ot.uuid]=ot}return nt}parseGeometries(_,tt){const nt={};if(_!==void 0){const rt=new BufferGeometryLoader;for(let it=0,st=_.length;it<st;it++){let ot;const at=_[it];switch(at.type){case"BufferGeometry":case"InstancedBufferGeometry":ot=rt.parse(at);break;default:at.type in Geometries?ot=Geometries[at.type].fromJSON(at,tt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${at.type}"`)}ot.uuid=at.uuid,at.name!==void 0&&(ot.name=at.name),at.userData!==void 0&&(ot.userData=at.userData),nt[at.uuid]=ot}}return nt}parseMaterials(_,tt){const nt={},rt={};if(_!==void 0){const it=new MaterialLoader;it.setTextures(tt);for(let st=0,ot=_.length;st<ot;st++){const at=_[st];nt[at.uuid]===void 0&&(nt[at.uuid]=it.parse(at)),rt[at.uuid]=nt[at.uuid]}}return rt}parseAnimations(_){const tt={};if(_!==void 0)for(let nt=0;nt<_.length;nt++){const rt=_[nt],it=AnimationClip.parse(rt);tt[it.uuid]=it}return tt}parseImages(_,tt){const nt=this,rt={};let it;function st(at){return nt.manager.itemStart(at),it.load(at,function(){nt.manager.itemEnd(at)},void 0,function(){nt.manager.itemError(at),nt.manager.itemEnd(at)})}function ot(at){if(typeof at=="string"){const lt=at,ct=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(lt)?lt:nt.resourcePath+lt;return st(ct)}else return at.data?{data:getTypedArray(at.type,at.data),width:at.width,height:at.height}:null}if(_!==void 0&&_.length>0){const at=new LoadingManager(tt);it=new ImageLoader(at),it.setCrossOrigin(this.crossOrigin);for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt],dt=ut.url;if(Array.isArray(dt)){const ht=[];for(let mt=0,yt=dt.length;mt<yt;mt++){const vt=dt[mt],pt=ot(vt);pt!==null&&(pt instanceof HTMLImageElement?ht.push(pt):ht.push(new DataTexture(pt.data,pt.width,pt.height)))}rt[ut.uuid]=new Source(ht)}else{const ht=ot(ut.url);rt[ut.uuid]=new Source(ht)}}}return rt}async parseImagesAsync(_){const tt=this,nt={};let rt;async function it(st){if(typeof st=="string"){const ot=st,at=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ot)?ot:tt.resourcePath+ot;return await rt.loadAsync(at)}else return st.data?{data:getTypedArray(st.type,st.data),width:st.width,height:st.height}:null}if(_!==void 0&&_.length>0){rt=new ImageLoader(this.manager),rt.setCrossOrigin(this.crossOrigin);for(let st=0,ot=_.length;st<ot;st++){const at=_[st],lt=at.url;if(Array.isArray(lt)){const ct=[];for(let ut=0,dt=lt.length;ut<dt;ut++){const ht=lt[ut],mt=await it(ht);mt!==null&&(mt instanceof HTMLImageElement?ct.push(mt):ct.push(new DataTexture(mt.data,mt.width,mt.height)))}nt[at.uuid]=new Source(ct)}else{const ct=await it(at.url);nt[at.uuid]=new Source(ct)}}}return nt}parseTextures(_,tt){function nt(it,st){return typeof it=="number"?it:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",it),st[it])}const rt={};if(_!==void 0)for(let it=0,st=_.length;it<st;it++){const ot=_[it];ot.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',ot.uuid),tt[ot.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",ot.image);const at=tt[ot.image],lt=at.data;let ct;Array.isArray(lt)?(ct=new CubeTexture,lt.length===6&&(ct.needsUpdate=!0)):(lt&&lt.data?ct=new DataTexture:ct=new Texture,lt&&(ct.needsUpdate=!0)),ct.source=at,ct.uuid=ot.uuid,ot.name!==void 0&&(ct.name=ot.name),ot.mapping!==void 0&&(ct.mapping=nt(ot.mapping,TEXTURE_MAPPING)),ot.channel!==void 0&&(ct.channel=ot.channel),ot.offset!==void 0&&ct.offset.fromArray(ot.offset),ot.repeat!==void 0&&ct.repeat.fromArray(ot.repeat),ot.center!==void 0&&ct.center.fromArray(ot.center),ot.rotation!==void 0&&(ct.rotation=ot.rotation),ot.wrap!==void 0&&(ct.wrapS=nt(ot.wrap[0],TEXTURE_WRAPPING),ct.wrapT=nt(ot.wrap[1],TEXTURE_WRAPPING)),ot.format!==void 0&&(ct.format=ot.format),ot.internalFormat!==void 0&&(ct.internalFormat=ot.internalFormat),ot.type!==void 0&&(ct.type=ot.type),ot.colorSpace!==void 0&&(ct.colorSpace=ot.colorSpace),ot.minFilter!==void 0&&(ct.minFilter=nt(ot.minFilter,TEXTURE_FILTER)),ot.magFilter!==void 0&&(ct.magFilter=nt(ot.magFilter,TEXTURE_FILTER)),ot.anisotropy!==void 0&&(ct.anisotropy=ot.anisotropy),ot.flipY!==void 0&&(ct.flipY=ot.flipY),ot.generateMipmaps!==void 0&&(ct.generateMipmaps=ot.generateMipmaps),ot.premultiplyAlpha!==void 0&&(ct.premultiplyAlpha=ot.premultiplyAlpha),ot.unpackAlignment!==void 0&&(ct.unpackAlignment=ot.unpackAlignment),ot.compareFunction!==void 0&&(ct.compareFunction=ot.compareFunction),ot.userData!==void 0&&(ct.userData=ot.userData),rt[ot.uuid]=ct}return rt}parseObject(_,tt,nt,rt,it){let st;function ot(dt){return tt[dt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",dt),tt[dt]}function at(dt){if(dt!==void 0){if(Array.isArray(dt)){const ht=[];for(let mt=0,yt=dt.length;mt<yt;mt++){const vt=dt[mt];nt[vt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",vt),ht.push(nt[vt])}return ht}return nt[dt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",dt),nt[dt]}}function lt(dt){return rt[dt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",dt),rt[dt]}let ct,ut;switch(_.type){case"Scene":st=new Scene$1,_.background!==void 0&&(Number.isInteger(_.background)?st.background=new Color$1(_.background):st.background=lt(_.background)),_.environment!==void 0&&(st.environment=lt(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?st.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(st.fog=new FogExp2(_.fog.color,_.fog.density)),_.fog.name!==""&&(st.fog.name=_.fog.name)),_.backgroundBlurriness!==void 0&&(st.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(st.backgroundIntensity=_.backgroundIntensity),_.backgroundRotation!==void 0&&st.backgroundRotation.fromArray(_.backgroundRotation),_.environmentIntensity!==void 0&&(st.environmentIntensity=_.environmentIntensity),_.environmentRotation!==void 0&&st.environmentRotation.fromArray(_.environmentRotation);break;case"PerspectiveCamera":st=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(st.focus=_.focus),_.zoom!==void 0&&(st.zoom=_.zoom),_.filmGauge!==void 0&&(st.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(st.filmOffset=_.filmOffset),_.view!==void 0&&(st.view=Object.assign({},_.view));break;case"OrthographicCamera":st=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(st.zoom=_.zoom),_.view!==void 0&&(st.view=Object.assign({},_.view));break;case"AmbientLight":st=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":st=new DirectionalLight(_.color,_.intensity),st.target=_.target||"";break;case"PointLight":st=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":st=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":st=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay),st.target=_.target||"";break;case"HemisphereLight":st=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":st=new LightProbe().fromJSON(_);break;case"SkinnedMesh":ct=ot(_.geometry),ut=at(_.material),st=new SkinnedMesh(ct,ut),_.bindMode!==void 0&&(st.bindMode=_.bindMode),_.bindMatrix!==void 0&&st.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(st.skeleton=_.skeleton);break;case"Mesh":ct=ot(_.geometry),ut=at(_.material),st=new Mesh(ct,ut);break;case"InstancedMesh":ct=ot(_.geometry),ut=at(_.material);const dt=_.count,ht=_.instanceMatrix,mt=_.instanceColor;st=new InstancedMesh(ct,ut,dt),st.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ht.array),16),mt!==void 0&&(st.instanceColor=new InstancedBufferAttribute(new Float32Array(mt.array),mt.itemSize));break;case"BatchedMesh":ct=ot(_.geometry),ut=at(_.material),st=new BatchedMesh(_.maxInstanceCount,_.maxVertexCount,_.maxIndexCount,ut),st.geometry=ct,st.perObjectFrustumCulled=_.perObjectFrustumCulled,st.sortObjects=_.sortObjects,st._drawRanges=_.drawRanges,st._reservedRanges=_.reservedRanges,st._visibility=_.visibility,st._active=_.active,st._bounds=_.bounds.map(yt=>{const vt=new Box3;vt.min.fromArray(yt.boxMin),vt.max.fromArray(yt.boxMax);const pt=new Sphere;return pt.radius=yt.sphereRadius,pt.center.fromArray(yt.sphereCenter),{boxInitialized:yt.boxInitialized,box:vt,sphereInitialized:yt.sphereInitialized,sphere:pt}}),st._maxInstanceCount=_.maxInstanceCount,st._maxVertexCount=_.maxVertexCount,st._maxIndexCount=_.maxIndexCount,st._geometryInitialized=_.geometryInitialized,st._geometryCount=_.geometryCount,st._matricesTexture=lt(_.matricesTexture.uuid),_.colorsTexture!==void 0&&(st._colorsTexture=lt(_.colorsTexture.uuid));break;case"LOD":st=new LOD;break;case"Line":st=new Line(ot(_.geometry),at(_.material));break;case"LineLoop":st=new LineLoop(ot(_.geometry),at(_.material));break;case"LineSegments":st=new LineSegments(ot(_.geometry),at(_.material));break;case"PointCloud":case"Points":st=new Points$1(ot(_.geometry),at(_.material));break;case"Sprite":st=new Sprite(at(_.material));break;case"Group":st=new Group;break;case"Bone":st=new Bone;break;default:st=new Object3D}if(st.uuid=_.uuid,_.name!==void 0&&(st.name=_.name),_.matrix!==void 0?(st.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(st.matrixAutoUpdate=_.matrixAutoUpdate),st.matrixAutoUpdate&&st.matrix.decompose(st.position,st.quaternion,st.scale)):(_.position!==void 0&&st.position.fromArray(_.position),_.rotation!==void 0&&st.rotation.fromArray(_.rotation),_.quaternion!==void 0&&st.quaternion.fromArray(_.quaternion),_.scale!==void 0&&st.scale.fromArray(_.scale)),_.up!==void 0&&st.up.fromArray(_.up),_.castShadow!==void 0&&(st.castShadow=_.castShadow),_.receiveShadow!==void 0&&(st.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.intensity!==void 0&&(st.shadow.intensity=_.shadow.intensity),_.shadow.bias!==void 0&&(st.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(st.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(st.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&st.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(st.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(st.visible=_.visible),_.frustumCulled!==void 0&&(st.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(st.renderOrder=_.renderOrder),_.userData!==void 0&&(st.userData=_.userData),_.layers!==void 0&&(st.layers.mask=_.layers),_.children!==void 0){const dt=_.children;for(let ht=0;ht<dt.length;ht++)st.add(this.parseObject(dt[ht],tt,nt,rt,it))}if(_.animations!==void 0){const dt=_.animations;for(let ht=0;ht<dt.length;ht++){const mt=dt[ht];st.animations.push(it[mt])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(st.autoUpdate=_.autoUpdate);const dt=_.levels;for(let ht=0;ht<dt.length;ht++){const mt=dt[ht],yt=st.getObjectByProperty("uuid",mt.object);yt!==void 0&&st.addLevel(yt,mt.distance,mt.hysteresis)}}return st}bindSkeletons(_,tt){Object.keys(tt).length!==0&&_.traverse(function(nt){if(nt.isSkinnedMesh===!0&&nt.skeleton!==void 0){const rt=tt[nt.skeleton];rt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",nt.skeleton):nt.bind(rt,nt.bindMatrix)}})}bindLightTargets(_){_.traverse(function(tt){if(tt.isDirectionalLight||tt.isSpotLight){const nt=tt.target,rt=_.getObjectByProperty("uuid",nt);rt!==void 0?tt.target=rt:tt.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(_){return this.options=_,this}load(_,tt,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,st=Cache.get(_);if(st!==void 0){if(it.manager.itemStart(_),st.then){st.then(lt=>{tt&&tt(lt),it.manager.itemEnd(_)}).catch(lt=>{rt&&rt(lt)});return}return setTimeout(function(){tt&&tt(st),it.manager.itemEnd(_)},0),st}const ot={};ot.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ot.headers=this.requestHeader;const at=fetch(_,ot).then(function(lt){return lt.blob()}).then(function(lt){return createImageBitmap(lt,Object.assign(it.options,{colorSpaceConversion:"none"}))}).then(function(lt){return Cache.add(_,lt),tt&&tt(lt),it.manager.itemEnd(_),lt}).catch(function(lt){rt&&rt(lt),Cache.remove(_),it.manager.itemError(_),it.manager.itemEnd(_)});Cache.add(_,at),it.manager.itemStart(_)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(_){_context=_}}class AudioLoader extends Loader{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,st=new FileLoader(this.manager);st.setResponseType("arraybuffer"),st.setPath(this.path),st.setRequestHeader(this.requestHeader),st.setWithCredentials(this.withCredentials),st.load(_,function(at){try{const lt=at.slice(0);AudioContext.getContext().decodeAudioData(lt,function(ut){tt(ut)}).catch(ot)}catch(lt){ot(lt)}},nt,rt);function ot(at){rt?rt(at):console.error(at),it.manager.itemError(_)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const tt=this._cache;if(tt.focus!==_.focus||tt.fov!==_.fov||tt.aspect!==_.aspect*this.aspect||tt.near!==_.near||tt.far!==_.far||tt.zoom!==_.zoom||tt.eyeSep!==this.eyeSep){tt.focus=_.focus,tt.fov=_.fov,tt.aspect=_.aspect*this.aspect,tt.near=_.near,tt.far=_.far,tt.zoom=_.zoom,tt.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const rt=tt.eyeSep/2,it=rt*tt.near/tt.focus,st=tt.near*Math.tan(DEG2RAD*tt.fov*.5)/tt.zoom;let ot,at;_eyeLeft.elements[12]=-rt,_eyeRight.elements[12]=rt,ot=-st*tt.aspect+it,at=st*tt.aspect+it,_projectionMatrix.elements[0]=2*tt.near/(at-ot),_projectionMatrix.elements[8]=(at+ot)/(at-ot),this.cameraL.projectionMatrix.copy(_projectionMatrix),ot=-st*tt.aspect-it,at=st*tt.aspect-it,_projectionMatrix.elements[0]=2*tt.near/(at-ot),_projectionMatrix.elements[8]=(at+ot)/(at-ot),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const tt=now$2();_=(tt-this.oldTime)/1e3,this.oldTime=tt,this.elapsedTime+=_}return _}}function now$2(){return performance.now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const tt=this.context.listener,nt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),tt.positionX){const rt=this.context.currentTime+this.timeDelta;tt.positionX.linearRampToValueAtTime(_position$1.x,rt),tt.positionY.linearRampToValueAtTime(_position$1.y,rt),tt.positionZ.linearRampToValueAtTime(_position$1.z,rt),tt.forwardX.linearRampToValueAtTime(_orientation$1.x,rt),tt.forwardY.linearRampToValueAtTime(_orientation$1.y,rt),tt.forwardZ.linearRampToValueAtTime(_orientation$1.z,rt),tt.upX.linearRampToValueAtTime(nt.x,rt),tt.upY.linearRampToValueAtTime(nt.y,rt),tt.upZ.linearRampToValueAtTime(nt.z,rt)}else tt.setPosition(_position$1.x,_position$1.y,_position$1.z),tt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,nt.x,nt.y,nt.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const tt=this.context.createBufferSource();return tt.buffer=this.buffer,tt.loop=this.loop,tt.loopStart=this.loopStart,tt.loopEnd=this.loopEnd,tt.onended=this.onEnded.bind(this),tt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=tt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(_=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+_),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,tt=this.filters.length;_<tt;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,tt=this.filters.length;_<tt;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){return this.detune=_,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,tt,nt){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=tt,this.panner.coneOuterGain=nt,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const tt=this.panner;if(tt.positionX){const nt=this.context.currentTime+this.listener.timeDelta;tt.positionX.linearRampToValueAtTime(_position.x,nt),tt.positionY.linearRampToValueAtTime(_position.y,nt),tt.positionZ.linearRampToValueAtTime(_position.z,nt),tt.orientationX.linearRampToValueAtTime(_orientation.x,nt),tt.orientationY.linearRampToValueAtTime(_orientation.y,nt),tt.orientationZ.linearRampToValueAtTime(_orientation.z,nt)}else tt.setPosition(_position.x,_position.y,_position.z),tt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,tt=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=tt,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const tt=this.getFrequencyData();for(let nt=0;nt<tt.length;nt++)_+=tt[nt];return _/tt.length}}class PropertyMixer{constructor(_,tt,nt){this.binding=_,this.valueSize=nt;let rt,it,st;switch(tt){case"quaternion":rt=this._slerp,it=this._slerpAdditive,st=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(nt*6),this._workIndex=5;break;case"string":case"bool":rt=this._select,it=this._select,st=this._setAdditiveIdentityOther,this.buffer=new Array(nt*5);break;default:rt=this._lerp,it=this._lerpAdditive,st=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(nt*5)}this._mixBufferRegion=rt,this._mixBufferRegionAdditive=it,this._setIdentity=st,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,tt){const nt=this.buffer,rt=this.valueSize,it=_*rt+rt;let st=this.cumulativeWeight;if(st===0){for(let ot=0;ot!==rt;++ot)nt[it+ot]=nt[ot];st=tt}else{st+=tt;const ot=tt/st;this._mixBufferRegion(nt,it,0,ot,rt)}this.cumulativeWeight=st}accumulateAdditive(_){const tt=this.buffer,nt=this.valueSize,rt=nt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(tt,rt,0,_,nt),this.cumulativeWeightAdditive+=_}apply(_){const tt=this.valueSize,nt=this.buffer,rt=_*tt+tt,it=this.cumulativeWeight,st=this.cumulativeWeightAdditive,ot=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,it<1){const at=tt*this._origIndex;this._mixBufferRegion(nt,rt,at,1-it,tt)}st>0&&this._mixBufferRegionAdditive(nt,rt,this._addIndex*tt,1,tt);for(let at=tt,lt=tt+tt;at!==lt;++at)if(nt[at]!==nt[at+tt]){ot.setValue(nt,rt);break}}saveOriginalState(){const _=this.binding,tt=this.buffer,nt=this.valueSize,rt=nt*this._origIndex;_.getValue(tt,rt);for(let it=nt,st=rt;it!==st;++it)tt[it]=tt[rt+it%nt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,tt=_+this.valueSize;for(let nt=_;nt<tt;nt++)this.buffer[nt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,tt=this._addIndex*this.valueSize;for(let nt=0;nt<this.valueSize;nt++)this.buffer[tt+nt]=this.buffer[_+nt]}_select(_,tt,nt,rt,it){if(rt>=.5)for(let st=0;st!==it;++st)_[tt+st]=_[nt+st]}_slerp(_,tt,nt,rt){Quaternion.slerpFlat(_,tt,_,tt,_,nt,rt)}_slerpAdditive(_,tt,nt,rt,it){const st=this._workIndex*it;Quaternion.multiplyQuaternionsFlat(_,st,_,tt,_,nt),Quaternion.slerpFlat(_,tt,_,tt,_,st,rt)}_lerp(_,tt,nt,rt,it){const st=1-rt;for(let ot=0;ot!==it;++ot){const at=tt+ot;_[at]=_[at]*st+_[nt+ot]*rt}}_lerpAdditive(_,tt,nt,rt,it){for(let st=0;st!==it;++st){const ot=tt+st;_[ot]=_[ot]+_[nt+st]*rt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,tt,nt){const rt=nt||PropertyBinding.parseTrackName(tt);this._targetGroup=_,this._bindings=_.subscribe_(tt,rt)}getValue(_,tt){this.bind();const nt=this._targetGroup.nCachedObjects_,rt=this._bindings[nt];rt!==void 0&&rt.getValue(_,tt)}setValue(_,tt){const nt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,it=nt.length;rt!==it;++rt)nt[rt].setValue(_,tt)}bind(){const _=this._bindings;for(let tt=this._targetGroup.nCachedObjects_,nt=_.length;tt!==nt;++tt)_[tt].bind()}unbind(){const _=this._bindings;for(let tt=this._targetGroup.nCachedObjects_,nt=_.length;tt!==nt;++tt)_[tt].unbind()}}class PropertyBinding{constructor(_,tt,nt){this.path=tt,this.parsedPath=nt||PropertyBinding.parseTrackName(tt),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,tt,nt){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,tt,nt):new PropertyBinding(_,tt,nt)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const tt=_trackRe.exec(_);if(tt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const nt={nodeName:tt[2],objectName:tt[3],objectIndex:tt[4],propertyName:tt[5],propertyIndex:tt[6]},rt=nt.nodeName&&nt.nodeName.lastIndexOf(".");if(rt!==void 0&&rt!==-1){const it=nt.nodeName.substring(rt+1);_supportedObjectNames.indexOf(it)!==-1&&(nt.nodeName=nt.nodeName.substring(0,rt),nt.objectName=it)}if(nt.propertyName===null||nt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return nt}static findNode(_,tt){if(tt===void 0||tt===""||tt==="."||tt===-1||tt===_.name||tt===_.uuid)return _;if(_.skeleton){const nt=_.skeleton.getBoneByName(tt);if(nt!==void 0)return nt}if(_.children){const nt=function(it){for(let st=0;st<it.length;st++){const ot=it[st];if(ot.name===tt||ot.uuid===tt)return ot;const at=nt(ot.children);if(at)return at}return null},rt=nt(_.children);if(rt)return rt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,tt){_[tt]=this.targetObject[this.propertyName]}_getValue_array(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)_[tt++]=nt[rt]}_getValue_arrayElement(_,tt){_[tt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,tt){this.resolvedProperty.toArray(_,tt)}_setValue_direct(_,tt){this.targetObject[this.propertyName]=_[tt]}_setValue_direct_setNeedsUpdate(_,tt){this.targetObject[this.propertyName]=_[tt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,tt){this.targetObject[this.propertyName]=_[tt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++]}_setValue_array_setNeedsUpdate(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt]}_setValue_arrayElement_setNeedsUpdate(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,tt){this.resolvedProperty.fromArray(_,tt)}_setValue_fromArray_setNeedsUpdate(_,tt){this.resolvedProperty.fromArray(_,tt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,tt){this.resolvedProperty.fromArray(_,tt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,tt){this.bind(),this.getValue(_,tt)}_setValue_unbound(_,tt){this.bind(),this.setValue(_,tt)}bind(){let _=this.node;const tt=this.parsedPath,nt=tt.objectName,rt=tt.propertyName;let it=tt.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,tt.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(nt){let lt=tt.objectIndex;switch(nt){case"materials":if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let ct=0;ct<_.length;ct++)if(_[ct].name===lt){lt=ct;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[nt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[nt]}if(lt!==void 0){if(_[lt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[lt]}}const st=_[rt];if(st===void 0){const lt=tt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+lt+"."+rt+" but it wasn't found.",_);return}let ot=this.Versioning.None;this.targetObject=_,_.needsUpdate!==void 0?ot=this.Versioning.NeedsUpdate:_.matrixWorldNeedsUpdate!==void 0&&(ot=this.Versioning.MatrixWorldNeedsUpdate);let at=this.BindingType.Direct;if(it!==void 0){if(rt==="morphTargetInfluences"){if(!_.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[it]!==void 0&&(it=_.morphTargetDictionary[it])}at=this.BindingType.ArrayElement,this.resolvedProperty=st,this.propertyIndex=it}else st.fromArray!==void 0&&st.toArray!==void 0?(at=this.BindingType.HasFromToArray,this.resolvedProperty=st):Array.isArray(st)?(at=this.BindingType.EntireArray,this.resolvedProperty=st):this.propertyName=rt;this.getValue=this.GetterByBindingType[at],this.setValue=this.SetterByBindingTypeAndVersioning[at][ot]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let nt=0,rt=arguments.length;nt!==rt;++nt)_[arguments[nt].uuid]=nt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const tt=this;this.stats={objects:{get total(){return tt._objects.length},get inUse(){return this.total-tt.nCachedObjects_}},get bindingsPerObject(){return tt._bindings.length}}}add(){const _=this._objects,tt=this._indicesByUUID,nt=this._paths,rt=this._parsedPaths,it=this._bindings,st=it.length;let ot,at=_.length,lt=this.nCachedObjects_;for(let ct=0,ut=arguments.length;ct!==ut;++ct){const dt=arguments[ct],ht=dt.uuid;let mt=tt[ht];if(mt===void 0){mt=at++,tt[ht]=mt,_.push(dt);for(let yt=0,vt=st;yt!==vt;++yt)it[yt].push(new PropertyBinding(dt,nt[yt],rt[yt]))}else if(mt<lt){ot=_[mt];const yt=--lt,vt=_[yt];tt[vt.uuid]=mt,_[mt]=vt,tt[ht]=yt,_[yt]=dt;for(let pt=0,_t=st;pt!==_t;++pt){const xt=it[pt],St=xt[yt];let At=xt[mt];xt[mt]=St,At===void 0&&(At=new PropertyBinding(dt,nt[pt],rt[pt])),xt[yt]=At}}else _[mt]!==ot&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=lt}remove(){const _=this._objects,tt=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_;for(let st=0,ot=arguments.length;st!==ot;++st){const at=arguments[st],lt=at.uuid,ct=tt[lt];if(ct!==void 0&&ct>=it){const ut=it++,dt=_[ut];tt[dt.uuid]=ct,_[ct]=dt,tt[lt]=ut,_[ut]=at;for(let ht=0,mt=rt;ht!==mt;++ht){const yt=nt[ht],vt=yt[ut],pt=yt[ct];yt[ct]=vt,yt[ut]=pt}}}this.nCachedObjects_=it}uncache(){const _=this._objects,tt=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_,st=_.length;for(let ot=0,at=arguments.length;ot!==at;++ot){const lt=arguments[ot],ct=lt.uuid,ut=tt[ct];if(ut!==void 0)if(delete tt[ct],ut<it){const dt=--it,ht=_[dt],mt=--st,yt=_[mt];tt[ht.uuid]=ut,_[ut]=ht,tt[yt.uuid]=dt,_[dt]=yt,_.pop();for(let vt=0,pt=rt;vt!==pt;++vt){const _t=nt[vt],xt=_t[dt],St=_t[mt];_t[ut]=xt,_t[dt]=St,_t.pop()}}else{const dt=--st,ht=_[dt];dt>0&&(tt[ht.uuid]=ut),_[ut]=ht,_.pop();for(let mt=0,yt=rt;mt!==yt;++mt){const vt=nt[mt];vt[ut]=vt[dt],vt.pop()}}}this.nCachedObjects_=it}subscribe_(_,tt){const nt=this._bindingsIndicesByPath;let rt=nt[_];const it=this._bindings;if(rt!==void 0)return it[rt];const st=this._paths,ot=this._parsedPaths,at=this._objects,lt=at.length,ct=this.nCachedObjects_,ut=new Array(lt);rt=it.length,nt[_]=rt,st.push(_),ot.push(tt),it.push(ut);for(let dt=ct,ht=at.length;dt!==ht;++dt){const mt=at[dt];ut[dt]=new PropertyBinding(mt,_,tt)}return ut}unsubscribe_(_){const tt=this._bindingsIndicesByPath,nt=tt[_];if(nt!==void 0){const rt=this._paths,it=this._parsedPaths,st=this._bindings,ot=st.length-1,at=st[ot],lt=_[ot];tt[lt]=nt,st[nt]=at,st.pop(),it[nt]=it[ot],it.pop(),rt[nt]=rt[ot],rt.pop()}}}class AnimationAction{constructor(_,tt,nt=null,rt=tt.blendMode){this._mixer=_,this._clip=tt,this._localRoot=nt,this.blendMode=rt;const it=tt.tracks,st=it.length,ot=new Array(st),at={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let lt=0;lt!==st;++lt){const ct=it[lt].createInterpolant(null);ot[lt]=ct,ct.settings=at}this._interpolantSettings=at,this._interpolants=ot,this._propertyBindings=new Array(st),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,tt){return this.loop=_,this.repetitions=tt,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,tt,nt){if(_.fadeOut(tt),this.fadeIn(tt),nt){const rt=this._clip.duration,it=_._clip.duration,st=it/rt,ot=rt/it;_.warp(1,st,tt),this.warp(ot,1,tt)}return this}crossFadeTo(_,tt,nt){return _.crossFadeFrom(this,tt,nt)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,tt,nt){const rt=this._mixer,it=rt.time,st=this.timeScale;let ot=this._timeScaleInterpolant;ot===null&&(ot=rt._lendControlInterpolant(),this._timeScaleInterpolant=ot);const at=ot.parameterPositions,lt=ot.sampleValues;return at[0]=it,at[1]=it+nt,lt[0]=_/st,lt[1]=tt/st,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,tt,nt,rt){if(!this.enabled){this._updateWeight(_);return}const it=this._startTime;if(it!==null){const at=(_-it)*nt;at<0||nt===0?tt=0:(this._startTime=null,tt=nt*at)}tt*=this._updateTimeScale(_);const st=this._updateTime(tt),ot=this._updateWeight(_);if(ot>0){const at=this._interpolants,lt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ct=0,ut=at.length;ct!==ut;++ct)at[ct].evaluate(st),lt[ct].accumulateAdditive(ot);break;case NormalAnimationBlendMode:default:for(let ct=0,ut=at.length;ct!==ut;++ct)at[ct].evaluate(st),lt[ct].accumulate(rt,ot)}}}_updateWeight(_){let tt=0;if(this.enabled){tt=this.weight;const nt=this._weightInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];tt*=rt,_>nt.parameterPositions[1]&&(this.stopFading(),rt===0&&(this.enabled=!1))}}return this._effectiveWeight=tt,tt}_updateTimeScale(_){let tt=0;if(!this.paused){tt=this.timeScale;const nt=this._timeScaleInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];tt*=rt,_>nt.parameterPositions[1]&&(this.stopWarping(),tt===0?this.paused=!0:this.timeScale=tt)}}return this._effectiveTimeScale=tt,tt}_updateTime(_){const tt=this._clip.duration,nt=this.loop;let rt=this.time+_,it=this._loopCount;const st=nt===LoopPingPong;if(_===0)return it===-1?rt:st&&(it&1)===1?tt-rt:rt;if(nt===LoopOnce){it===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(rt>=tt)rt=tt;else if(rt<0)rt=0;else{this.time=rt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(it===-1&&(_>=0?(it=0,this._setEndings(!0,this.repetitions===0,st)):this._setEndings(this.repetitions===0,!0,st)),rt>=tt||rt<0){const ot=Math.floor(rt/tt);rt-=tt*ot,it+=Math.abs(ot);const at=this.repetitions-it;if(at<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,rt=_>0?tt:0,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(at===1){const lt=_<0;this._setEndings(lt,!lt,st)}else this._setEndings(!1,!1,st);this._loopCount=it,this.time=rt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ot})}}else this.time=rt;if(st&&(it&1)===1)return tt-rt}return rt}_setEndings(_,tt,nt){const rt=this._interpolantSettings;nt?(rt.endingStart=ZeroSlopeEnding,rt.endingEnd=ZeroSlopeEnding):(_?rt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingStart=WrapAroundEnding,tt?rt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingEnd=WrapAroundEnding)}_scheduleFading(_,tt,nt){const rt=this._mixer,it=rt.time;let st=this._weightInterpolant;st===null&&(st=rt._lendControlInterpolant(),this._weightInterpolant=st);const ot=st.parameterPositions,at=st.sampleValues;return ot[0]=it,at[0]=tt,ot[1]=it+_,at[1]=nt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,tt){const nt=_._localRoot||this._root,rt=_._clip.tracks,it=rt.length,st=_._propertyBindings,ot=_._interpolants,at=nt.uuid,lt=this._bindingsByRootAndName;let ct=lt[at];ct===void 0&&(ct={},lt[at]=ct);for(let ut=0;ut!==it;++ut){const dt=rt[ut],ht=dt.name;let mt=ct[ht];if(mt!==void 0)++mt.referenceCount,st[ut]=mt;else{if(mt=st[ut],mt!==void 0){mt._cacheIndex===null&&(++mt.referenceCount,this._addInactiveBinding(mt,at,ht));continue}const yt=tt&&tt._propertyBindings[ut].binding.parsedPath;mt=new PropertyMixer(PropertyBinding.create(nt,ht,yt),dt.ValueTypeName,dt.getValueSize()),++mt.referenceCount,this._addInactiveBinding(mt,at,ht),st[ut]=mt}ot[ut].resultBuffer=mt.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const nt=(_._localRoot||this._root).uuid,rt=_._clip.uuid,it=this._actionsByClip[rt];this._bindAction(_,it&&it.knownActions[0]),this._addInactiveAction(_,rt,nt)}const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];it.useCount++===0&&(this._lendBinding(it),it.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];--it.useCount===0&&(it.restoreOriginalState(),this._takeBackBinding(it))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const tt=_._cacheIndex;return tt!==null&&tt<this._nActiveActions}_addInactiveAction(_,tt,nt){const rt=this._actions,it=this._actionsByClip;let st=it[tt];if(st===void 0)st={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,it[tt]=st;else{const ot=st.knownActions;_._byClipCacheIndex=ot.length,ot.push(_)}_._cacheIndex=rt.length,rt.push(_),st.actionByRoot[nt]=_}_removeInactiveAction(_){const tt=this._actions,nt=tt[tt.length-1],rt=_._cacheIndex;nt._cacheIndex=rt,tt[rt]=nt,tt.pop(),_._cacheIndex=null;const it=_._clip.uuid,st=this._actionsByClip,ot=st[it],at=ot.knownActions,lt=at[at.length-1],ct=_._byClipCacheIndex;lt._byClipCacheIndex=ct,at[ct]=lt,at.pop(),_._byClipCacheIndex=null;const ut=ot.actionByRoot,dt=(_._localRoot||this._root).uuid;delete ut[dt],at.length===0&&delete st[it],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];--it.referenceCount===0&&this._removeInactiveBinding(it)}}_lendAction(_){const tt=this._actions,nt=_._cacheIndex,rt=this._nActiveActions++,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_takeBackAction(_){const tt=this._actions,nt=_._cacheIndex,rt=--this._nActiveActions,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_addInactiveBinding(_,tt,nt){const rt=this._bindingsByRootAndName,it=this._bindings;let st=rt[tt];st===void 0&&(st={},rt[tt]=st),st[nt]=_,_._cacheIndex=it.length,it.push(_)}_removeInactiveBinding(_){const tt=this._bindings,nt=_.binding,rt=nt.rootNode.uuid,it=nt.path,st=this._bindingsByRootAndName,ot=st[rt],at=tt[tt.length-1],lt=_._cacheIndex;at._cacheIndex=lt,tt[lt]=at,tt.pop(),delete ot[it],Object.keys(ot).length===0&&delete st[rt]}_lendBinding(_){const tt=this._bindings,nt=_._cacheIndex,rt=this._nActiveBindings++,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_takeBackBinding(_){const tt=this._bindings,nt=_._cacheIndex,rt=--this._nActiveBindings,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_lendControlInterpolant(){const _=this._controlInterpolants,tt=this._nActiveControlInterpolants++;let nt=_[tt];return nt===void 0&&(nt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),nt.__cacheIndex=tt,_[tt]=nt),nt}_takeBackControlInterpolant(_){const tt=this._controlInterpolants,nt=_.__cacheIndex,rt=--this._nActiveControlInterpolants,it=tt[rt];_.__cacheIndex=rt,tt[rt]=_,it.__cacheIndex=nt,tt[nt]=it}clipAction(_,tt,nt){const rt=tt||this._root,it=rt.uuid;let st=typeof _=="string"?AnimationClip.findByName(rt,_):_;const ot=st!==null?st.uuid:_,at=this._actionsByClip[ot];let lt=null;if(nt===void 0&&(st!==null?nt=st.blendMode:nt=NormalAnimationBlendMode),at!==void 0){const ut=at.actionByRoot[it];if(ut!==void 0&&ut.blendMode===nt)return ut;lt=at.knownActions[0],st===null&&(st=lt._clip)}if(st===null)return null;const ct=new AnimationAction(this,st,tt,nt);return this._bindAction(ct,lt),this._addInactiveAction(ct,ot,it),ct}existingAction(_,tt){const nt=tt||this._root,rt=nt.uuid,it=typeof _=="string"?AnimationClip.findByName(nt,_):_,st=it?it.uuid:_,ot=this._actionsByClip[st];return ot!==void 0&&ot.actionByRoot[rt]||null}stopAllAction(){const _=this._actions,tt=this._nActiveActions;for(let nt=tt-1;nt>=0;--nt)_[nt].stop();return this}update(_){_*=this.timeScale;const tt=this._actions,nt=this._nActiveActions,rt=this.time+=_,it=Math.sign(_),st=this._accuIndex^=1;for(let lt=0;lt!==nt;++lt)tt[lt]._update(rt,_,it,st);const ot=this._bindings,at=this._nActiveBindings;for(let lt=0;lt!==at;++lt)ot[lt].apply(st);return this}setTime(_){this.time=0;for(let tt=0;tt<this._actions.length;tt++)this._actions[tt].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const tt=this._actions,nt=_.uuid,rt=this._actionsByClip,it=rt[nt];if(it!==void 0){const st=it.knownActions;for(let ot=0,at=st.length;ot!==at;++ot){const lt=st[ot];this._deactivateAction(lt);const ct=lt._cacheIndex,ut=tt[tt.length-1];lt._cacheIndex=null,lt._byClipCacheIndex=null,ut._cacheIndex=ct,tt[ct]=ut,tt.pop(),this._removeInactiveBindingsForAction(lt)}delete rt[nt]}}uncacheRoot(_){const tt=_.uuid,nt=this._actionsByClip;for(const st in nt){const ot=nt[st].actionByRoot,at=ot[tt];at!==void 0&&(this._deactivateAction(at),this._removeInactiveAction(at))}const rt=this._bindingsByRootAndName,it=rt[tt];if(it!==void 0)for(const st in it){const ot=it[st];ot.restoreOriginalState(),this._removeInactiveBinding(ot)}}uncacheAction(_,tt){const nt=this.existingAction(_,tt);nt!==null&&(this._deactivateAction(nt),this._removeInactiveAction(nt))}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const tt=this.uniforms.indexOf(_);return tt!==-1&&this.uniforms.splice(tt,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(_){this.name=_.name,this.usage=_.usage;const tt=_.uniforms;this.uniforms.length=0;for(let nt=0,rt=tt.length;nt<rt;nt++){const it=Array.isArray(tt[nt])?tt[nt]:[tt[nt]];for(let st=0;st<it.length;st++)this.uniforms.push(it[st].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,tt,nt=1){super(_,tt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=nt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const tt=super.clone(_);return tt.meshPerAttribute=this.meshPerAttribute,tt}toJSON(_){const tt=super.toJSON(_);return tt.isInstancedInterleavedBuffer=!0,tt.meshPerAttribute=this.meshPerAttribute,tt}}class GLBufferAttribute{constructor(_,tt,nt,rt,it){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=tt,this.itemSize=nt,this.elementSize=rt,this.count=it,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,tt){return this.type=_,this.elementSize=tt,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}const _matrix=new Matrix4;class Raycaster{constructor(_,tt,nt=0,rt=1/0){this.ray=new Ray(_,tt),this.near=nt,this.far=rt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,tt){this.ray.set(_,tt)}setFromCamera(_,tt){tt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(tt.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(tt).sub(this.ray.origin).normalize(),this.camera=tt):tt.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(tt.near+tt.far)/(tt.near-tt.far)).unproject(tt),this.ray.direction.set(0,0,-1).transformDirection(tt.matrixWorld),this.camera=tt):console.error("THREE.Raycaster: Unsupported camera type: "+tt.type)}setFromXRController(_){return _matrix.identity().extractRotation(_.matrixWorld),this.ray.origin.setFromMatrixPosition(_.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(_,tt=!0,nt=[]){return intersect(_,this,nt,tt),nt.sort(ascSort),nt}intersectObjects(_,tt=!0,nt=[]){for(let rt=0,it=_.length;rt<it;rt++)intersect(_[rt],this,nt,tt);return nt.sort(ascSort),nt}}function ascSort(_e,_){return _e.distance-_.distance}function intersect(_e,_,tt,nt){let rt=!0;if(_e.layers.test(_.layers)&&_e.raycast(_,tt)===!1&&(rt=!1),rt===!0&&nt===!0){const it=_e.children;for(let st=0,ot=it.length;st<ot;st++)intersect(it[st],_,tt,!0)}}class Spherical{constructor(_=1,tt=0,nt=0){return this.radius=_,this.phi=tt,this.theta=nt,this}set(_,tt,nt){return this.radius=_,this.phi=tt,this.theta=nt,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,tt,nt){return this.radius=Math.sqrt(_*_+tt*tt+nt*nt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,nt),this.phi=Math.acos(clamp$3(tt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,tt=0,nt=0){return this.radius=_,this.theta=tt,this.y=nt,this}set(_,tt,nt){return this.radius=_,this.theta=tt,this.y=nt,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,tt,nt){return this.radius=Math.sqrt(_*_+nt*nt),this.theta=Math.atan2(_,nt),this.y=tt,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(_,tt,nt,rt){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],_!==void 0&&this.set(_,tt,nt,rt)}identity(){return this.set(1,0,0,1),this}fromArray(_,tt=0){for(let nt=0;nt<4;nt++)this.elements[nt]=_[nt+tt];return this}set(_,tt,nt,rt){const it=this.elements;return it[0]=_,it[2]=tt,it[1]=nt,it[3]=rt,this}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),tt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=tt}set(_,tt){return this.min.copy(_),this.max.copy(tt),this}setFromPoints(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt++)this.expandByPoint(_[tt]);return this}setFromCenterAndSize(_,tt){const nt=_vector$4.copy(tt).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,tt){return tt.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y}clampPoint(_,tt){return tt.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(_=new Vector3,tt=new Vector3){this.start=_,this.end=tt}set(_,tt){return this.start.copy(_),this.end.copy(tt),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,tt){return this.delta(tt).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,tt){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const nt=_startEnd.dot(_startEnd);let it=_startEnd.dot(_startP)/nt;return tt&&(it=clamp$3(it,0,1)),it}closestPointToPoint(_,tt,nt){const rt=this.closestPointToPointParameter(_,tt);return this.delta(nt).multiplyScalar(rt).add(this.start)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,tt){super(),this.light=_,this.matrixAutoUpdate=!1,this.color=tt,this.type="SpotLightHelper";const nt=new BufferGeometry,rt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let st=0,ot=1,at=32;st<at;st++,ot++){const lt=st/at*Math.PI*2,ct=ot/at*Math.PI*2;rt.push(Math.cos(lt),Math.sin(lt),1,Math.cos(ct),Math.sin(ct),1)}nt.setAttribute("position",new Float32BufferAttribute(rt,3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(nt,it),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const _=this.light.distance?this.light.distance:1e3,tt=_*Math.tan(this.light.angle);this.cone.scale.set(tt,tt,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const tt=getBoneList(_),nt=new BufferGeometry,rt=[],it=[],st=new Color$1(0,0,1),ot=new Color$1(0,1,0);for(let lt=0;lt<tt.length;lt++){const ct=tt[lt];ct.parent&&ct.parent.isBone&&(rt.push(0,0,0),rt.push(0,0,0),it.push(st.r,st.g,st.b),it.push(ot.r,ot.g,ot.b))}nt.setAttribute("position",new Float32BufferAttribute(rt,3)),nt.setAttribute("color",new Float32BufferAttribute(it,3));const at=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(nt,at),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=tt,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(_){const tt=this.bones,nt=this.geometry,rt=nt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let it=0,st=0;it<tt.length;it++){const ot=tt[it];ot.parent&&ot.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,ot.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(st,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,ot.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(st+1,_vector$2.x,_vector$2.y,_vector$2.z),st+=2)}nt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(_e){const _=[];_e.isBone===!0&&_.push(_e);for(let tt=0;tt<_e.children.length;tt++)_.push.apply(_,getBoneList(_e.children[tt]));return _}class PointLightHelper extends Mesh{constructor(_,tt,nt){const rt=new SphereGeometry(tt,4,2),it=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(rt,it),this.light=_,this.color=nt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(_,tt,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="HemisphereLightHelper";const rt=new OctahedronGeometry(tt);rt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const it=rt.getAttribute("position"),st=new Float32Array(it.count*3);rt.setAttribute("color",new BufferAttribute(st,3)),this.add(new Mesh(rt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const tt=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let nt=0,rt=tt.count;nt<rt;nt++){const it=nt<rt/2?_color1:_color2;tt.setXYZ(nt,it.r,it.g,it.b)}tt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,tt=10,nt=4473924,rt=8947848){nt=new Color$1(nt),rt=new Color$1(rt);const it=tt/2,st=_/tt,ot=_/2,at=[],lt=[];for(let dt=0,ht=0,mt=-ot;dt<=tt;dt++,mt+=st){at.push(-ot,0,mt,ot,0,mt),at.push(mt,0,-ot,mt,0,ot);const yt=dt===it?nt:rt;yt.toArray(lt,ht),ht+=3,yt.toArray(lt,ht),ht+=3,yt.toArray(lt,ht),ht+=3,yt.toArray(lt,ht),ht+=3}const ct=new BufferGeometry;ct.setAttribute("position",new Float32BufferAttribute(at,3)),ct.setAttribute("color",new Float32BufferAttribute(lt,3));const ut=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ct,ut),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,tt=16,nt=8,rt=64,it=4473924,st=8947848){it=new Color$1(it),st=new Color$1(st);const ot=[],at=[];if(tt>1)for(let ut=0;ut<tt;ut++){const dt=ut/tt*(Math.PI*2),ht=Math.sin(dt)*_,mt=Math.cos(dt)*_;ot.push(0,0,0),ot.push(ht,0,mt);const yt=ut&1?it:st;at.push(yt.r,yt.g,yt.b),at.push(yt.r,yt.g,yt.b)}for(let ut=0;ut<nt;ut++){const dt=ut&1?it:st,ht=_-_/nt*ut;for(let mt=0;mt<rt;mt++){let yt=mt/rt*(Math.PI*2),vt=Math.sin(yt)*ht,pt=Math.cos(yt)*ht;ot.push(vt,0,pt),at.push(dt.r,dt.g,dt.b),yt=(mt+1)/rt*(Math.PI*2),vt=Math.sin(yt)*ht,pt=Math.cos(yt)*ht,ot.push(vt,0,pt),at.push(dt.r,dt.g,dt.b)}}const lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute(ot,3)),lt.setAttribute("color",new Float32BufferAttribute(at,3));const ct=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(lt,ct),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,tt,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="DirectionalLightHelper",tt===void 0&&(tt=1);let rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute([-tt,tt,0,tt,tt,0,tt,-tt,0,-tt,-tt,0,-tt,tt,0],3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(rt,it),this.add(this.lightPlane),rt=new BufferGeometry,rt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(rt,it),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(_){const tt=new BufferGeometry,nt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),rt=[],it=[],st={};ot("n1","n2"),ot("n2","n4"),ot("n4","n3"),ot("n3","n1"),ot("f1","f2"),ot("f2","f4"),ot("f4","f3"),ot("f3","f1"),ot("n1","f1"),ot("n2","f2"),ot("n3","f3"),ot("n4","f4"),ot("p","n1"),ot("p","n2"),ot("p","n3"),ot("p","n4"),ot("u1","u2"),ot("u2","u3"),ot("u3","u1"),ot("c","t"),ot("p","c"),ot("cn1","cn2"),ot("cn3","cn4"),ot("cf1","cf2"),ot("cf3","cf4");function ot(mt,yt){at(mt),at(yt)}function at(mt){rt.push(0,0,0),it.push(0,0,0),st[mt]===void 0&&(st[mt]=[]),st[mt].push(rt.length/3-1)}tt.setAttribute("position",new Float32BufferAttribute(rt,3)),tt.setAttribute("color",new Float32BufferAttribute(it,3)),super(tt,nt),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=st,this.update();const lt=new Color$1(16755200),ct=new Color$1(16711680),ut=new Color$1(43775),dt=new Color$1(16777215),ht=new Color$1(3355443);this.setColors(lt,ct,ut,dt,ht)}setColors(_,tt,nt,rt,it){const ot=this.geometry.getAttribute("color");ot.setXYZ(0,_.r,_.g,_.b),ot.setXYZ(1,_.r,_.g,_.b),ot.setXYZ(2,_.r,_.g,_.b),ot.setXYZ(3,_.r,_.g,_.b),ot.setXYZ(4,_.r,_.g,_.b),ot.setXYZ(5,_.r,_.g,_.b),ot.setXYZ(6,_.r,_.g,_.b),ot.setXYZ(7,_.r,_.g,_.b),ot.setXYZ(8,_.r,_.g,_.b),ot.setXYZ(9,_.r,_.g,_.b),ot.setXYZ(10,_.r,_.g,_.b),ot.setXYZ(11,_.r,_.g,_.b),ot.setXYZ(12,_.r,_.g,_.b),ot.setXYZ(13,_.r,_.g,_.b),ot.setXYZ(14,_.r,_.g,_.b),ot.setXYZ(15,_.r,_.g,_.b),ot.setXYZ(16,_.r,_.g,_.b),ot.setXYZ(17,_.r,_.g,_.b),ot.setXYZ(18,_.r,_.g,_.b),ot.setXYZ(19,_.r,_.g,_.b),ot.setXYZ(20,_.r,_.g,_.b),ot.setXYZ(21,_.r,_.g,_.b),ot.setXYZ(22,_.r,_.g,_.b),ot.setXYZ(23,_.r,_.g,_.b),ot.setXYZ(24,tt.r,tt.g,tt.b),ot.setXYZ(25,tt.r,tt.g,tt.b),ot.setXYZ(26,tt.r,tt.g,tt.b),ot.setXYZ(27,tt.r,tt.g,tt.b),ot.setXYZ(28,tt.r,tt.g,tt.b),ot.setXYZ(29,tt.r,tt.g,tt.b),ot.setXYZ(30,tt.r,tt.g,tt.b),ot.setXYZ(31,tt.r,tt.g,tt.b),ot.setXYZ(32,nt.r,nt.g,nt.b),ot.setXYZ(33,nt.r,nt.g,nt.b),ot.setXYZ(34,nt.r,nt.g,nt.b),ot.setXYZ(35,nt.r,nt.g,nt.b),ot.setXYZ(36,nt.r,nt.g,nt.b),ot.setXYZ(37,nt.r,nt.g,nt.b),ot.setXYZ(38,rt.r,rt.g,rt.b),ot.setXYZ(39,rt.r,rt.g,rt.b),ot.setXYZ(40,it.r,it.g,it.b),ot.setXYZ(41,it.r,it.g,it.b),ot.setXYZ(42,it.r,it.g,it.b),ot.setXYZ(43,it.r,it.g,it.b),ot.setXYZ(44,it.r,it.g,it.b),ot.setXYZ(45,it.r,it.g,it.b),ot.setXYZ(46,it.r,it.g,it.b),ot.setXYZ(47,it.r,it.g,it.b),ot.setXYZ(48,it.r,it.g,it.b),ot.setXYZ(49,it.r,it.g,it.b),ot.needsUpdate=!0}update(){const _=this.geometry,tt=this.pointMap,nt=1,rt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",tt,_,_camera,0,0,-1),setPoint("t",tt,_,_camera,0,0,1),setPoint("n1",tt,_,_camera,-nt,-rt,-1),setPoint("n2",tt,_,_camera,nt,-rt,-1),setPoint("n3",tt,_,_camera,-nt,rt,-1),setPoint("n4",tt,_,_camera,nt,rt,-1),setPoint("f1",tt,_,_camera,-nt,-rt,1),setPoint("f2",tt,_,_camera,nt,-rt,1),setPoint("f3",tt,_,_camera,-nt,rt,1),setPoint("f4",tt,_,_camera,nt,rt,1),setPoint("u1",tt,_,_camera,nt*.7,rt*1.1,-1),setPoint("u2",tt,_,_camera,-nt*.7,rt*1.1,-1),setPoint("u3",tt,_,_camera,0,rt*2,-1),setPoint("cf1",tt,_,_camera,-nt,0,1),setPoint("cf2",tt,_,_camera,nt,0,1),setPoint("cf3",tt,_,_camera,0,-rt,1),setPoint("cf4",tt,_,_camera,0,rt,1),setPoint("cn1",tt,_,_camera,-nt,0,-1),setPoint("cn2",tt,_,_camera,nt,0,-1),setPoint("cn3",tt,_,_camera,0,-rt,-1),setPoint("cn4",tt,_,_camera,0,rt,-1),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(_e,_,tt,nt,rt,it,st){_vector.set(rt,it,st).unproject(nt);const ot=_[_e];if(ot!==void 0){const at=tt.getAttribute("position");for(let lt=0,ct=ot.length;lt<ct;lt++)at.setXYZ(ot[lt],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,tt=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=new Float32Array(8*3),it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:tt,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(_){if(_!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const tt=_box.min,nt=_box.max,rt=this.geometry.attributes.position,it=rt.array;it[0]=nt.x,it[1]=nt.y,it[2]=nt.z,it[3]=tt.x,it[4]=nt.y,it[5]=nt.z,it[6]=tt.x,it[7]=tt.y,it[8]=nt.z,it[9]=nt.x,it[10]=tt.y,it[11]=nt.z,it[12]=nt.x,it[13]=nt.y,it[14]=tt.z,it[15]=tt.x,it[16]=nt.y,it[17]=tt.z,it[18]=tt.x,it[19]=tt.y,it[20]=tt.z,it[21]=nt.x,it[22]=tt.y,it[23]=tt.z,rt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,tt){return super.copy(_,tt),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,tt=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new Float32BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:tt,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const tt=this.box;tt.isEmpty()||(tt.getCenter(this.position),tt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,tt=1,nt=16776960){const rt=nt,it=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],st=new BufferGeometry;st.setAttribute("position",new Float32BufferAttribute(it,3)),st.computeBoundingSphere(),super(st,new LineBasicMaterial({color:rt,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=tt;const ot=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute(ot,3)),at.computeBoundingSphere(),this.add(new Mesh(at,new MeshBasicMaterial({color:rt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),tt=new Vector3(0,0,0),nt=1,rt=16776960,it=nt*.2,st=it*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(tt),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:rt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:rt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(nt,it,st)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const tt=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,tt)}}setLength(_,tt=_*.2,nt=tt*.2){this.line.scale.set(1,Math.max(1e-4,_-tt),1),this.line.updateMatrix(),this.cone.scale.set(nt,tt,nt),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const tt=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],nt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute(tt,3)),rt.setAttribute("color",new Float32BufferAttribute(nt,3));const it=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(rt,it),this.type="AxesHelper"}setColors(_,tt,nt){const rt=new Color$1,it=this.geometry.attributes.color.array;return rt.set(_),rt.toArray(it,0),rt.toArray(it,3),rt.set(tt),rt.toArray(it,6),rt.toArray(it,9),rt.set(nt),rt.toArray(it,12),rt.toArray(it,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(_,tt){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,tt),this}lineTo(_,tt){return this.currentPath.lineTo(_,tt),this}quadraticCurveTo(_,tt,nt,rt){return this.currentPath.quadraticCurveTo(_,tt,nt,rt),this}bezierCurveTo(_,tt,nt,rt,it,st){return this.currentPath.bezierCurveTo(_,tt,nt,rt,it,st),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function tt(pt){const _t=[];for(let xt=0,St=pt.length;xt<St;xt++){const At=pt[xt],bt=new Shape;bt.curves=At.curves,_t.push(bt)}return _t}function nt(pt,_t){const xt=_t.length;let St=!1;for(let At=xt-1,bt=0;bt<xt;At=bt++){let Et=_t[At],wt=_t[bt],Rt=wt.x-Et.x,Tt=wt.y-Et.y;if(Math.abs(Tt)>Number.EPSILON){if(Tt<0&&(Et=_t[bt],Rt=-Rt,wt=_t[At],Tt=-Tt),pt.y<Et.y||pt.y>wt.y)continue;if(pt.y===Et.y){if(pt.x===Et.x)return!0}else{const Mt=Tt*(pt.x-Et.x)-Rt*(pt.y-Et.y);if(Mt===0)return!0;if(Mt<0)continue;St=!St}}else{if(pt.y!==Et.y)continue;if(wt.x<=pt.x&&pt.x<=Et.x||Et.x<=pt.x&&pt.x<=wt.x)return!0}}return St}const rt=ShapeUtils.isClockWise,it=this.subPaths;if(it.length===0)return[];let st,ot,at;const lt=[];if(it.length===1)return ot=it[0],at=new Shape,at.curves=ot.curves,lt.push(at),lt;let ct=!rt(it[0].getPoints());ct=_?!ct:ct;const ut=[],dt=[];let ht=[],mt=0,yt;dt[mt]=void 0,ht[mt]=[];for(let pt=0,_t=it.length;pt<_t;pt++)ot=it[pt],yt=ot.getPoints(),st=rt(yt),st=_?!st:st,st?(!ct&&dt[mt]&&mt++,dt[mt]={s:new Shape,p:yt},dt[mt].s.curves=ot.curves,ct&&mt++,ht[mt]=[]):ht[mt].push({h:ot,p:yt[0]});if(!dt[0])return tt(it);if(dt.length>1){let pt=!1,_t=0;for(let xt=0,St=dt.length;xt<St;xt++)ut[xt]=[];for(let xt=0,St=dt.length;xt<St;xt++){const At=ht[xt];for(let bt=0;bt<At.length;bt++){const Et=At[bt];let wt=!0;for(let Rt=0;Rt<dt.length;Rt++)nt(Et.p,dt[Rt].p)&&(xt!==Rt&&_t++,wt?(wt=!1,ut[Rt].push(Et)):pt=!0);wt&&ut[xt].push(Et)}}_t>0&&pt===!1&&(ht=ut)}let vt;for(let pt=0,_t=dt.length;pt<_t;pt++){at=dt[pt].s,lt.push(at),vt=ht[pt];for(let xt=0,St=vt.length;xt<St;xt++)at.holes.push(vt[xt].h)}return lt}}class Controls extends EventDispatcher{constructor(_,tt=null){super(),this.object=_,this.domElement=tt,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1,rt={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(_,tt,{...rt,count:nt}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearDisplayP3ColorSpace,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace:LinearSRGBColorSpace$1,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,P3Primaries,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane:Plane$3,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points:Points$1,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,Rec709Primaries,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace:SRGBColorSpace$1,SRGBTransfer,Scene:Scene$1,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(_e){let _;const tt=new Set,nt=(lt,ct)=>{const ut=typeof lt=="function"?lt(_):lt;if(ut!==_){const dt=_;_=ct?ut:Object.assign({},_,ut),tt.forEach(ht=>ht(_,dt))}},rt=()=>_,it=(lt,ct=rt,ut=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let dt=ct(_);function ht(){const mt=ct(_);if(!ut(dt,mt)){const yt=dt;lt(dt=mt,yt)}}return tt.add(ht),()=>tt.delete(ht)},at={setState:nt,getState:rt,subscribe:(lt,ct,ut)=>ct||ut?it(lt,ct,ut):(tt.add(lt),()=>tt.delete(lt)),destroy:()=>tt.clear()};return _=_e(nt,rt,at),at}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(_e){const _=typeof _e=="function"?createStore$1(_e):_e,tt=(nt=_.getState,rt=Object.is)=>{const[,it]=reactExports.useReducer(vt=>vt+1,0),st=_.getState(),ot=reactExports.useRef(st),at=reactExports.useRef(nt),lt=reactExports.useRef(rt),ct=reactExports.useRef(!1),ut=reactExports.useRef();ut.current===void 0&&(ut.current=nt(st));let dt,ht=!1;(ot.current!==st||at.current!==nt||lt.current!==rt||ct.current)&&(dt=nt(st),ht=!rt(ut.current,dt)),useIsomorphicLayoutEffect$1(()=>{ht&&(ut.current=dt),ot.current=st,at.current=nt,lt.current=rt,ct.current=!1});const mt=reactExports.useRef(st);useIsomorphicLayoutEffect$1(()=>{const vt=()=>{try{const _t=_.getState(),xt=at.current(_t);lt.current(ut.current,xt)||(ot.current=_t,ut.current=xt,it())}catch{ct.current=!0,it()}},pt=_.subscribe(vt);return _.getState()!==mt.current&&vt(),pt},[]);const yt=ht?dt:ut.current;return reactExports.useDebugValue(yt),yt};return Object.assign(tt,_),tt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const nt=[tt,_];return{next(){const rt=nt.length<=0;return{value:nt.shift(),done:rt}}}},tt}const isPromise=_e=>typeof _e=="object"&&typeof _e.then=="function",globalCache=[];function shallowEqualArrays(_e,_,tt=(nt,rt)=>nt===rt){if(_e===_)return!0;if(!_e||!_)return!1;const nt=_e.length;if(_.length!==nt)return!1;for(let rt=0;rt<nt;rt++)if(!tt(_e[rt],_[rt]))return!1;return!0}function query(_e,_=null,tt=!1,nt={}){_===null&&(_=[_e]);for(const it of globalCache)if(shallowEqualArrays(_,it.keys,it.equal)){if(tt)return;if(Object.prototype.hasOwnProperty.call(it,"error"))throw it.error;if(Object.prototype.hasOwnProperty.call(it,"response"))return nt.lifespan&&nt.lifespan>0&&(it.timeout&&clearTimeout(it.timeout),it.timeout=setTimeout(it.remove,nt.lifespan)),it.response;if(!tt)throw it.promise}const rt={keys:_,equal:nt.equal,remove:()=>{const it=globalCache.indexOf(rt);it!==-1&&globalCache.splice(it,1)},promise:(isPromise(_e)?_e:_e(..._)).then(it=>{rt.response=it,nt.lifespan&&nt.lifespan>0&&(rt.timeout=setTimeout(rt.remove,nt.lifespan))}).catch(it=>rt.error=it)};if(globalCache.push(rt),!tt)throw rt.promise}const suspend=(_e,_,tt)=>query(_e,_,!1,tt),preload=(_e,_,tt)=>void query(_e,_,!0,tt),clear=_e=>{if(_e===void 0||_e.length===0)globalCache.splice(0,globalCache.length);else{const _=globalCache.find(tt=>shallowEqualArrays(_e,tt.keys,tt.equal));_&&_.remove()}};var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(_e){function _(Ot,kt){var Gt=Ot.length;Ot.push(kt);e:for(;0<Gt;){var zt=Gt-1>>>1,Vt=Ot[zt];if(0<rt(Vt,kt))Ot[zt]=kt,Ot[Gt]=Vt,Gt=zt;else break e}}function tt(Ot){return Ot.length===0?null:Ot[0]}function nt(Ot){if(Ot.length===0)return null;var kt=Ot[0],Gt=Ot.pop();if(Gt!==kt){Ot[0]=Gt;e:for(var zt=0,Vt=Ot.length,Dt=Vt>>>1;zt<Dt;){var It=2*(zt+1)-1,Ut=Ot[It],Yt=It+1,qt=Ot[Yt];if(0>rt(Ut,Gt))Yt<Vt&&0>rt(qt,Ut)?(Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt):(Ot[zt]=Ut,Ot[It]=Gt,zt=It);else if(Yt<Vt&&0>rt(qt,Gt))Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt;else break e}}return kt}function rt(Ot,kt){var Gt=Ot.sortIndex-kt.sortIndex;return Gt!==0?Gt:Ot.id-kt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var st=Date,ot=st.now();_e.unstable_now=function(){return st.now()-ot}}var at=[],lt=[],ct=1,ut=null,dt=3,ht=!1,mt=!1,yt=!1,vt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Ot){for(var kt=tt(lt);kt!==null;){if(kt.callback===null)nt(lt);else if(kt.startTime<=Ot)nt(lt),kt.sortIndex=kt.expirationTime,_(at,kt);else break;kt=tt(lt)}}function St(Ot){if(yt=!1,xt(Ot),!mt)if(tt(at)!==null)mt=!0,Wt(At);else{var kt=tt(lt);kt!==null&&Jt(St,kt.startTime-Ot)}}function At(Ot,kt){mt=!1,yt&&(yt=!1,pt(wt),wt=-1),ht=!0;var Gt=dt;try{for(xt(kt),ut=tt(at);ut!==null&&(!(ut.expirationTime>kt)||Ot&&!Mt());){var zt=ut.callback;if(typeof zt=="function"){ut.callback=null,dt=ut.priorityLevel;var Vt=zt(ut.expirationTime<=kt);kt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(at)&&nt(at),xt(kt)}else nt(at);ut=tt(at)}if(ut!==null)var Dt=!0;else{var It=tt(lt);It!==null&&Jt(St,It.startTime-kt),Dt=!1}return Dt}finally{ut=null,dt=Gt,ht=!1}}var bt=!1,Et=null,wt=-1,Rt=5,Tt=-1;function Mt(){return!(_e.unstable_now()-Tt<Rt)}function Lt(){if(Et!==null){var Ot=_e.unstable_now();Tt=Ot;var kt=!0;try{kt=Et(!0,Ot)}finally{kt?Ft():(bt=!1,Et=null)}}else bt=!1}var Ft;if(typeof _t=="function")Ft=function(){_t(Lt)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,Kt=Ht.port2;Ht.port1.onmessage=Lt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){vt(Lt,0)};function Wt(Ot){Et=Ot,bt||(bt=!0,Ft())}function Jt(Ot,kt){wt=vt(function(){Ot(_e.unstable_now())},kt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Ot){Ot.callback=null},_e.unstable_continueExecution=function(){mt||ht||(mt=!0,Wt(At))},_e.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<Ot?Math.floor(1e3/Ot):5},_e.unstable_getCurrentPriorityLevel=function(){return dt},_e.unstable_getFirstCallbackNode=function(){return tt(at)},_e.unstable_next=function(Ot){switch(dt){case 1:case 2:case 3:var kt=3;break;default:kt=dt}var Gt=dt;dt=kt;try{return Ot()}finally{dt=Gt}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Ot,kt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Gt=dt;dt=Ot;try{return kt()}finally{dt=Gt}},_e.unstable_scheduleCallback=function(Ot,kt,Gt){var zt=_e.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?zt+Gt:zt):Gt=zt,Ot){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=Gt+Vt,Ot={id:ct++,callback:kt,priorityLevel:Ot,startTime:Gt,expirationTime:Vt,sortIndex:-1},Gt>zt?(Ot.sortIndex=Gt,_(lt,Ot),tt(at)===null&&Ot===tt(lt)&&(yt?(pt(wt),wt=-1):yt=!0,Jt(St,Gt-zt))):(Ot.sortIndex=Vt,_(at,Ot),mt||ht||(mt=!0,Wt(At))),Ot},_e.unstable_shouldYield=Mt,_e.unstable_wrapCallback=function(Ot){var kt=dt;return function(){var Gt=dt;dt=kt;try{return Ot.apply(this,arguments)}finally{dt=Gt}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(_){var tt={},nt=reactExports,rt=requireScheduler(),it=Object.assign;function st(ft){for(var gt="https://reactjs.org/docs/error-decoder.html?invariant="+ft,Ct=1;Ct<arguments.length;Ct++)gt+="&args[]="+encodeURIComponent(arguments[Ct]);return"Minified React error #"+ft+"; visit "+gt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ot=nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,at=Symbol.for("react.element"),lt=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),ut=Symbol.for("react.strict_mode"),dt=Symbol.for("react.profiler"),ht=Symbol.for("react.provider"),mt=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),St=Symbol.for("react.offscreen"),At=Symbol.iterator;function bt(ft){return ft===null||typeof ft!="object"?null:(ft=At&&ft[At]||ft["@@iterator"],typeof ft=="function"?ft:null)}function Et(ft){if(ft==null)return null;if(typeof ft=="function")return ft.displayName||ft.name||null;if(typeof ft=="string")return ft;switch(ft){case ct:return"Fragment";case lt:return"Portal";case dt:return"Profiler";case ut:return"StrictMode";case vt:return"Suspense";case pt:return"SuspenseList"}if(typeof ft=="object")switch(ft.$$typeof){case mt:return(ft.displayName||"Context")+".Consumer";case ht:return(ft._context.displayName||"Context")+".Provider";case yt:var gt=ft.render;return ft=ft.displayName,ft||(ft=gt.displayName||gt.name||"",ft=ft!==""?"ForwardRef("+ft+")":"ForwardRef"),ft;case _t:return gt=ft.displayName||null,gt!==null?gt:Et(ft.type)||"Memo";case xt:gt=ft._payload,ft=ft._init;try{return Et(ft(gt))}catch{}}return null}function wt(ft){var gt=ft.type;switch(ft.tag){case 24:return"Cache";case 9:return(gt.displayName||"Context")+".Consumer";case 10:return(gt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ft=gt.render,ft=ft.displayName||ft.name||"",gt.displayName||(ft!==""?"ForwardRef("+ft+")":"ForwardRef");case 7:return"Fragment";case 5:return gt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Et(gt);case 8:return gt===ut?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof gt=="function")return gt.displayName||gt.name||null;if(typeof gt=="string")return gt}return null}function Rt(ft){var gt=ft,Ct=ft;if(ft.alternate)for(;gt.return;)gt=gt.return;else{ft=gt;do gt=ft,gt.flags&4098&&(Ct=gt.return),ft=gt.return;while(ft)}return gt.tag===3?Ct:null}function Tt(ft){if(Rt(ft)!==ft)throw Error(st(188))}function Mt(ft){var gt=ft.alternate;if(!gt){if(gt=Rt(ft),gt===null)throw Error(st(188));return gt!==ft?null:ft}for(var Ct=ft,Pt=gt;;){var Nt=Ct.return;if(Nt===null)break;var Zt=Nt.alternate;if(Zt===null){if(Pt=Nt.return,Pt!==null){Ct=Pt;continue}break}if(Nt.child===Zt.child){for(Zt=Nt.child;Zt;){if(Zt===Ct)return Tt(Nt),ft;if(Zt===Pt)return Tt(Nt),gt;Zt=Zt.sibling}throw Error(st(188))}if(Ct.return!==Pt.return)Ct=Nt,Pt=Zt;else{for(var In=!1,Zn=Nt.child;Zn;){if(Zn===Ct){In=!0,Ct=Nt,Pt=Zt;break}if(Zn===Pt){In=!0,Pt=Nt,Ct=Zt;break}Zn=Zn.sibling}if(!In){for(Zn=Zt.child;Zn;){if(Zn===Ct){In=!0,Ct=Zt,Pt=Nt;break}if(Zn===Pt){In=!0,Pt=Zt,Ct=Nt;break}Zn=Zn.sibling}if(!In)throw Error(st(189))}}if(Ct.alternate!==Pt)throw Error(st(190))}if(Ct.tag!==3)throw Error(st(188));return Ct.stateNode.current===Ct?ft:gt}function Lt(ft){return ft=Mt(ft),ft!==null?Ft(ft):null}function Ft(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){var gt=Ft(ft);if(gt!==null)return gt;ft=ft.sibling}return null}function Ht(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){if(ft.tag!==4){var gt=Ht(ft);if(gt!==null)return gt}ft=ft.sibling}return null}var Kt=Array.isArray,Wt=_.getPublicInstance,Jt=_.getRootHostContext,Ot=_.getChildHostContext,kt=_.prepareForCommit,Gt=_.resetAfterCommit,zt=_.createInstance,Vt=_.appendInitialChild,Dt=_.finalizeInitialChildren,It=_.prepareUpdate,Ut=_.shouldSetTextContent,Yt=_.createTextInstance,qt=_.scheduleTimeout,rn=_.cancelTimeout,gn=_.noTimeout,An=_.isPrimaryRenderer,En=_.supportsMutation,fn=_.supportsPersistence,nn=_.supportsHydration,Tn=_.getInstanceFromNode,Cn=_.preparePortalMount,vn=_.getCurrentEventPriority,_n=_.detachDeletedInstance,Qt=_.supportsMicrotasks,sn=_.scheduleMicrotask,jt=_.supportsTestSelectors,Bt=_.findFiberRoot,hn=_.getBoundingRect,cn=_.getTextContent,mn=_.isHiddenSubtree,an=_.matchAccessibilityRole,Hn=_.setFocusIfFocusable,Pn=_.setupIntersectionObserver,er=_.appendChild,cr=_.appendChildToContainer,ir=_.commitTextUpdate,Jn=_.commitMount,fr=_.commitUpdate,dr=_.insertBefore,lr=_.insertInContainerBefore,Nn=_.removeChild,bn=_.removeChildFromContainer,Rn=_.resetTextContent,Sn=_.hideInstance,or=_.hideTextInstance,xn=_.unhideInstance,on=_.unhideTextInstance,Gn=_.clearContainer,Xn=_.cloneInstance,pr=_.createContainerChildSet,Ar=_.appendChildToContainerChildSet,xr=_.finalizeContainerChildren,un=_.replaceContainerChildren,pn=_.cloneHiddenInstance,Fn=_.cloneHiddenTextInstance,Yn=_.canHydrateInstance,Qn=_.canHydrateTextInstance,ur=_.canHydrateSuspenseInstance,vr=_.isSuspenseInstancePending,Or=_.isSuspenseInstanceFallback,Fr=_.registerSuspenseInstanceRetry,br=_.getNextHydratableSibling,Lr=_.getFirstHydratableChild,Ir=_.getFirstHydratableChildWithinContainer,Ur=_.getFirstHydratableChildWithinSuspenseInstance,en=_.hydrateInstance,dn=_.hydrateTextInstance,Bn=_.hydrateSuspenseInstance,tr=_.getNextHydratableInstanceAfterSuspenseInstance,tn=_.commitHydratedContainer,yn=_.commitHydratedSuspenseInstance,On=_.clearSuspenseBoundary,kn=_.clearSuspenseBoundaryFromContainer,Mn=_.shouldDeleteUnhydratedTailInstances,ar=_.didNotMatchHydratedContainerTextInstance,hr=_.didNotMatchHydratedTextInstance,Wn;function Br(ft){if(Wn===void 0)try{throw Error()}catch(Ct){var gt=Ct.stack.trim().match(/\n( *(at )?)/);Wn=gt&&gt[1]||""}return`
`+Wn+ft}var Mr=!1;function wr(ft,gt){if(!ft||Mr)return"";Mr=!0;var Ct=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(gt)if(gt=function(){throw Error()},Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(Gr){var Pt=Gr}Reflect.construct(ft,[],gt)}else{try{gt.call()}catch(Gr){Pt=Gr}ft.call(gt.prototype)}else{try{throw Error()}catch(Gr){Pt=Gr}ft()}}catch(Gr){if(Gr&&Pt&&typeof Gr.stack=="string"){for(var Nt=Gr.stack.split(`
`),Zt=Pt.stack.split(`
`),In=Nt.length-1,Zn=Zt.length-1;1<=In&&0<=Zn&&Nt[In]!==Zt[Zn];)Zn--;for(;1<=In&&0<=Zn;In--,Zn--)if(Nt[In]!==Zt[Zn]){if(In!==1||Zn!==1)do if(In--,Zn--,0>Zn||Nt[In]!==Zt[Zn]){var Er=`
`+Nt[In].replace(" at new "," at ");return ft.displayName&&Er.includes("<anonymous>")&&(Er=Er.replace("<anonymous>",ft.displayName)),Er}while(1<=In&&0<=Zn);break}}}finally{Mr=!1,Error.prepareStackTrace=Ct}return(ft=ft?ft.displayName||ft.name:"")?Br(ft):""}var Pr=Object.prototype.hasOwnProperty,Wr=[],es=-1;function ts(ft){return{current:ft}}function Qr(ft){0>es||(ft.current=Wr[es],Wr[es]=null,es--)}function zr(ft,gt){es++,Wr[es]=ft.current,ft.current=gt}var kr={},ws=ts(kr),$r=ts(!1),Ps=kr;function Qs(ft,gt){var Ct=ft.type.contextTypes;if(!Ct)return kr;var Pt=ft.stateNode;if(Pt&&Pt.__reactInternalMemoizedUnmaskedChildContext===gt)return Pt.__reactInternalMemoizedMaskedChildContext;var Nt={},Zt;for(Zt in Ct)Nt[Zt]=gt[Zt];return Pt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=gt,ft.__reactInternalMemoizedMaskedChildContext=Nt),Nt}function Os(ft){return ft=ft.childContextTypes,ft!=null}function Ws(){Qr($r),Qr(ws)}function us(ft,gt,Ct){if(ws.current!==kr)throw Error(st(168));zr(ws,gt),zr($r,Ct)}function zs(ft,gt,Ct){var Pt=ft.stateNode;if(gt=gt.childContextTypes,typeof Pt.getChildContext!="function")return Ct;Pt=Pt.getChildContext();for(var Nt in Pt)if(!(Nt in gt))throw Error(st(108,wt(ft)||"Unknown",Nt));return it({},Ct,Pt)}function Ns(ft){return ft=(ft=ft.stateNode)&&ft.__reactInternalMemoizedMergedChildContext||kr,Ps=ws.current,zr(ws,ft),zr($r,$r.current),!0}function cs(ft,gt,Ct){var Pt=ft.stateNode;if(!Pt)throw Error(st(169));Ct?(ft=zs(ft,gt,Ps),Pt.__reactInternalMemoizedMergedChildContext=ft,Qr($r),Qr(ws),zr(ws,ft)):Qr($r),zr($r,Ct)}var Xs=Math.clz32?Math.clz32:Do,bo=Math.log,no=Math.LN2;function Do(ft){return ft>>>=0,ft===0?32:31-(bo(ft)/no|0)|0}var Xo=64,Ko=4194304;function $a(ft){switch(ft&-ft){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ft&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ft&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ft}}function yl(ft,gt){var Ct=ft.pendingLanes;if(Ct===0)return 0;var Pt=0,Nt=ft.suspendedLanes,Zt=ft.pingedLanes,In=Ct&268435455;if(In!==0){var Zn=In&~Nt;Zn!==0?Pt=$a(Zn):(Zt&=In,Zt!==0&&(Pt=$a(Zt)))}else In=Ct&~Nt,In!==0?Pt=$a(In):Zt!==0&&(Pt=$a(Zt));if(Pt===0)return 0;if(gt!==0&&gt!==Pt&&!(gt&Nt)&&(Nt=Pt&-Pt,Zt=gt&-gt,Nt>=Zt||Nt===16&&(Zt&4194240)!==0))return gt;if(Pt&4&&(Pt|=Ct&16),gt=ft.entangledLanes,gt!==0)for(ft=ft.entanglements,gt&=Pt;0<gt;)Ct=31-Xs(gt),Nt=1<<Ct,Pt|=ft[Ct],gt&=~Nt;return Pt}function fu(ft,gt){switch(ft){case 1:case 2:case 4:return gt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return gt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ql(ft,gt){for(var Ct=ft.suspendedLanes,Pt=ft.pingedLanes,Nt=ft.expirationTimes,Zt=ft.pendingLanes;0<Zt;){var In=31-Xs(Zt),Zn=1<<In,Er=Nt[In];Er===-1?(!(Zn&Ct)||Zn&Pt)&&(Nt[In]=fu(Zn,gt)):Er<=gt&&(ft.expiredLanes|=Zn),Zt&=~Zn}}function Ro(ft){return ft=ft.pendingLanes&-1073741825,ft!==0?ft:ft&1073741824?1073741824:0}function Fl(ft){for(var gt=[],Ct=0;31>Ct;Ct++)gt.push(ft);return gt}function zo(ft,gt,Ct){ft.pendingLanes|=gt,gt!==536870912&&(ft.suspendedLanes=0,ft.pingedLanes=0),ft=ft.eventTimes,gt=31-Xs(gt),ft[gt]=Ct}function wl(ft,gt){var Ct=ft.pendingLanes&~gt;ft.pendingLanes=gt,ft.suspendedLanes=0,ft.pingedLanes=0,ft.expiredLanes&=gt,ft.mutableReadLanes&=gt,ft.entangledLanes&=gt,gt=ft.entanglements;var Pt=ft.eventTimes;for(ft=ft.expirationTimes;0<Ct;){var Nt=31-Xs(Ct),Zt=1<<Nt;gt[Nt]=0,Pt[Nt]=-1,ft[Nt]=-1,Ct&=~Zt}}function Fo(ft,gt){var Ct=ft.entangledLanes|=gt;for(ft=ft.entanglements;Ct;){var Pt=31-Xs(Ct),Nt=1<<Pt;Nt&gt|ft[Pt]&gt&&(ft[Pt]|=gt),Ct&=~Nt}}var Fs=0;function Zl(ft){return ft&=-ft,1<ft?4<ft?ft&268435455?16:536870912:4:1}var Yo=rt.unstable_scheduleCallback,Ml=rt.unstable_cancelCallback,Tl=rt.unstable_shouldYield,pu=rt.unstable_requestPaint,co=rt.unstable_now,Rl=rt.unstable_ImmediatePriority,Xt=rt.unstable_UserBlockingPriority,ln=rt.unstable_NormalPriority,wn=rt.unstable_IdlePriority,Dn=null,Un=null;function $n(ft){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Dn,ft,void 0,(ft.current.flags&128)===128)}catch{}}function qn(ft,gt){return ft===gt&&(ft!==0||1/ft===1/gt)||ft!==ft&&gt!==gt}var Vn=typeof Object.is=="function"?Object.is:qn,Ln=null,Kn=!1,jn=!1;function Sr(ft){Ln===null?Ln=[ft]:Ln.push(ft)}function _r(ft){Kn=!0,Sr(ft)}function gr(){if(!jn&&Ln!==null){jn=!0;var ft=0,gt=Fs;try{var Ct=Ln;for(Fs=1;ft<Ct.length;ft++){var Pt=Ct[ft];do Pt=Pt(!0);while(Pt!==null)}Ln=null,Kn=!1}catch(Nt){throw Ln!==null&&(Ln=Ln.slice(ft+1)),Yo(Rl,gr),Nt}finally{Fs=gt,jn=!1}}return null}var Dr=ot.ReactCurrentBatchConfig;function Rr(ft,gt){if(Vn(ft,gt))return!0;if(typeof ft!="object"||ft===null||typeof gt!="object"||gt===null)return!1;var Ct=Object.keys(ft),Pt=Object.keys(gt);if(Ct.length!==Pt.length)return!1;for(Pt=0;Pt<Ct.length;Pt++){var Nt=Ct[Pt];if(!Pr.call(gt,Nt)||!Vn(ft[Nt],gt[Nt]))return!1}return!0}function Cr(ft){switch(ft.tag){case 5:return Br(ft.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return ft=wr(ft.type,!1),ft;case 11:return ft=wr(ft.type.render,!1),ft;case 1:return ft=wr(ft.type,!0),ft;default:return""}}function rs(ft,gt){if(ft&&ft.defaultProps){gt=it({},gt),ft=ft.defaultProps;for(var Ct in ft)gt[Ct]===void 0&&(gt[Ct]=ft[Ct]);return gt}return gt}var Vr=ts(null),Zr=null,_i=null,Hr=null;function as(){Hr=_i=Zr=null}function os(ft,gt,Ct){An?(zr(Vr,gt._currentValue),gt._currentValue=Ct):(zr(Vr,gt._currentValue2),gt._currentValue2=Ct)}function ys(ft){var gt=Vr.current;Qr(Vr),An?ft._currentValue=gt:ft._currentValue2=gt}function _s(ft,gt,Ct){for(;ft!==null;){var Pt=ft.alternate;if((ft.childLanes&gt)!==gt?(ft.childLanes|=gt,Pt!==null&&(Pt.childLanes|=gt)):Pt!==null&&(Pt.childLanes&gt)!==gt&&(Pt.childLanes|=gt),ft===Ct)break;ft=ft.return}}function fs(ft,gt){Zr=ft,Hr=_i=null,ft=ft.dependencies,ft!==null&&ft.firstContext!==null&&(ft.lanes&gt&&(jo=!0),ft.firstContext=null)}function ms(ft){var gt=An?ft._currentValue:ft._currentValue2;if(Hr!==ft)if(ft={context:ft,memoizedValue:gt,next:null},_i===null){if(Zr===null)throw Error(st(308));_i=ft,Zr.dependencies={lanes:0,firstContext:ft}}else _i=_i.next=ft;return gt}var Ms=null,Zs=!1;function eo(ft){ft.updateQueue={baseState:ft.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ho(ft,gt){ft=ft.updateQueue,gt.updateQueue===ft&&(gt.updateQueue={baseState:ft.baseState,firstBaseUpdate:ft.firstBaseUpdate,lastBaseUpdate:ft.lastBaseUpdate,shared:ft.shared,effects:ft.effects})}function Hs(ft,gt){return{eventTime:ft,lane:gt,tag:0,payload:null,callback:null,next:null}}function Ks(ft,gt){var Ct=ft.updateQueue;Ct!==null&&(Ct=Ct.shared,xo!==null&&ft.mode&1&&!(Gs&2)?(ft=Ct.interleaved,ft===null?(gt.next=gt,Ms===null?Ms=[Ct]:Ms.push(Ct)):(gt.next=ft.next,ft.next=gt),Ct.interleaved=gt):(ft=Ct.pending,ft===null?gt.next=gt:(gt.next=ft.next,ft.next=gt),Ct.pending=gt))}function ro(ft,gt,Ct){if(gt=gt.updateQueue,gt!==null&&(gt=gt.shared,(Ct&4194240)!==0)){var Pt=gt.lanes;Pt&=ft.pendingLanes,Ct|=Pt,gt.lanes=Ct,Fo(ft,Ct)}}function io(ft,gt){var Ct=ft.updateQueue,Pt=ft.alternate;if(Pt!==null&&(Pt=Pt.updateQueue,Ct===Pt)){var Nt=null,Zt=null;if(Ct=Ct.firstBaseUpdate,Ct!==null){do{var In={eventTime:Ct.eventTime,lane:Ct.lane,tag:Ct.tag,payload:Ct.payload,callback:Ct.callback,next:null};Zt===null?Nt=Zt=In:Zt=Zt.next=In,Ct=Ct.next}while(Ct!==null);Zt===null?Nt=Zt=gt:Zt=Zt.next=gt}else Nt=Zt=gt;Ct={baseState:Pt.baseState,firstBaseUpdate:Nt,lastBaseUpdate:Zt,shared:Pt.shared,effects:Pt.effects},ft.updateQueue=Ct;return}ft=Ct.lastBaseUpdate,ft===null?Ct.firstBaseUpdate=gt:ft.next=gt,Ct.lastBaseUpdate=gt}function po(ft,gt,Ct,Pt){var Nt=ft.updateQueue;Zs=!1;var Zt=Nt.firstBaseUpdate,In=Nt.lastBaseUpdate,Zn=Nt.shared.pending;if(Zn!==null){Nt.shared.pending=null;var Er=Zn,Gr=Er.next;Er.next=null,In===null?Zt=Gr:In.next=Gr,In=Er;var ns=ft.alternate;ns!==null&&(ns=ns.updateQueue,Zn=ns.lastBaseUpdate,Zn!==In&&(Zn===null?ns.firstBaseUpdate=Gr:Zn.next=Gr,ns.lastBaseUpdate=Er))}if(Zt!==null){var Is=Nt.baseState;In=0,ns=Gr=Er=null,Zn=Zt;do{var bs=Zn.lane,so=Zn.eventTime;if((Pt&bs)===bs){ns!==null&&(ns=ns.next={eventTime:so,lane:0,tag:Zn.tag,payload:Zn.payload,callback:Zn.callback,next:null});e:{var ps=ft,Io=Zn;switch(bs=gt,so=Ct,Io.tag){case 1:if(ps=Io.payload,typeof ps=="function"){Is=ps.call(so,Is,bs);break e}Is=ps;break e;case 3:ps.flags=ps.flags&-65537|128;case 0:if(ps=Io.payload,bs=typeof ps=="function"?ps.call(so,Is,bs):ps,bs==null)break e;Is=it({},Is,bs);break e;case 2:Zs=!0}}Zn.callback!==null&&Zn.lane!==0&&(ft.flags|=64,bs=Nt.effects,bs===null?Nt.effects=[Zn]:bs.push(Zn))}else so={eventTime:so,lane:bs,tag:Zn.tag,payload:Zn.payload,callback:Zn.callback,next:null},ns===null?(Gr=ns=so,Er=Is):ns=ns.next=so,In|=bs;if(Zn=Zn.next,Zn===null){if(Zn=Nt.shared.pending,Zn===null)break;bs=Zn,Zn=bs.next,bs.next=null,Nt.lastBaseUpdate=bs,Nt.shared.pending=null}}while(!0);if(ns===null&&(Er=Is),Nt.baseState=Er,Nt.firstBaseUpdate=Gr,Nt.lastBaseUpdate=ns,gt=Nt.shared.interleaved,gt!==null){Nt=gt;do In|=Nt.lane,Nt=Nt.next;while(Nt!==gt)}else Zt===null&&(Nt.shared.lanes=0);Eu|=In,ft.lanes=In,ft.memoizedState=Is}}function Ho(ft,gt,Ct){if(ft=gt.effects,gt.effects=null,ft!==null)for(gt=0;gt<ft.length;gt++){var Pt=ft[gt],Nt=Pt.callback;if(Nt!==null){if(Pt.callback=null,Pt=Ct,typeof Nt!="function")throw Error(st(191,Nt));Nt.call(Pt)}}}var No=new nt.Component().refs;function fo(ft,gt,Ct,Pt){gt=ft.memoizedState,Ct=Ct(Pt,gt),Ct=Ct==null?gt:it({},gt,Ct),ft.memoizedState=Ct,ft.lanes===0&&(ft.updateQueue.baseState=Ct)}var Eo={isMounted:function(ft){return(ft=ft._reactInternals)?Rt(ft)===ft:!1},enqueueSetState:function(ft,gt,Ct){ft=ft._reactInternals;var Pt=Oo(),Nt=Xl(ft),Zt=Hs(Pt,Nt);Zt.payload=gt,Ct!=null&&(Zt.callback=Ct),Ks(ft,Zt),gt=na(ft,Nt,Pt),gt!==null&&ro(gt,ft,Nt)},enqueueReplaceState:function(ft,gt,Ct){ft=ft._reactInternals;var Pt=Oo(),Nt=Xl(ft),Zt=Hs(Pt,Nt);Zt.tag=1,Zt.payload=gt,Ct!=null&&(Zt.callback=Ct),Ks(ft,Zt),gt=na(ft,Nt,Pt),gt!==null&&ro(gt,ft,Nt)},enqueueForceUpdate:function(ft,gt){ft=ft._reactInternals;var Ct=Oo(),Pt=Xl(ft),Nt=Hs(Ct,Pt);Nt.tag=2,gt!=null&&(Nt.callback=gt),Ks(ft,Nt),gt=na(ft,Pt,Ct),gt!==null&&ro(gt,ft,Pt)}};function qo(ft,gt,Ct,Pt,Nt,Zt,In){return ft=ft.stateNode,typeof ft.shouldComponentUpdate=="function"?ft.shouldComponentUpdate(Pt,Zt,In):gt.prototype&&gt.prototype.isPureReactComponent?!Rr(Ct,Pt)||!Rr(Nt,Zt):!0}function ls(ft,gt,Ct){var Pt=!1,Nt=kr,Zt=gt.contextType;return typeof Zt=="object"&&Zt!==null?Zt=ms(Zt):(Nt=Os(gt)?Ps:ws.current,Pt=gt.contextTypes,Zt=(Pt=Pt!=null)?Qs(ft,Nt):kr),gt=new gt(Ct,Zt),ft.memoizedState=gt.state!==null&&gt.state!==void 0?gt.state:null,gt.updater=Eo,ft.stateNode=gt,gt._reactInternals=ft,Pt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=Nt,ft.__reactInternalMemoizedMaskedChildContext=Zt),gt}function ss(ft,gt,Ct,Pt){ft=gt.state,typeof gt.componentWillReceiveProps=="function"&&gt.componentWillReceiveProps(Ct,Pt),typeof gt.UNSAFE_componentWillReceiveProps=="function"&&gt.UNSAFE_componentWillReceiveProps(Ct,Pt),gt.state!==ft&&Eo.enqueueReplaceState(gt,gt.state,null)}function Yr(ft,gt,Ct,Pt){var Nt=ft.stateNode;Nt.props=Ct,Nt.state=ft.memoizedState,Nt.refs=No,eo(ft);var Zt=gt.contextType;typeof Zt=="object"&&Zt!==null?Nt.context=ms(Zt):(Zt=Os(gt)?Ps:ws.current,Nt.context=Qs(ft,Zt)),Nt.state=ft.memoizedState,Zt=gt.getDerivedStateFromProps,typeof Zt=="function"&&(fo(ft,gt,Zt,Ct),Nt.state=ft.memoizedState),typeof gt.getDerivedStateFromProps=="function"||typeof Nt.getSnapshotBeforeUpdate=="function"||typeof Nt.UNSAFE_componentWillMount!="function"&&typeof Nt.componentWillMount!="function"||(gt=Nt.state,typeof Nt.componentWillMount=="function"&&Nt.componentWillMount(),typeof Nt.UNSAFE_componentWillMount=="function"&&Nt.UNSAFE_componentWillMount(),gt!==Nt.state&&Eo.enqueueReplaceState(Nt,Nt.state,null),po(ft,Ct,Nt,Pt),Nt.state=ft.memoizedState),typeof Nt.componentDidMount=="function"&&(ft.flags|=4194308)}var qr=[],Xr=0,ds=null,vs=0,jr=[],Nr=0,gs=null,xs=1,$s="";function Vs(ft,gt){qr[Xr++]=vs,qr[Xr++]=ds,ds=ft,vs=gt}function go(ft,gt,Ct){jr[Nr++]=xs,jr[Nr++]=$s,jr[Nr++]=gs,gs=ft;var Pt=xs;ft=$s;var Nt=32-Xs(Pt)-1;Pt&=~(1<<Nt),Ct+=1;var Zt=32-Xs(gt)+Nt;if(30<Zt){var In=Nt-Nt%5;Zt=(Pt&(1<<In)-1).toString(32),Pt>>=In,Nt-=In,xs=1<<32-Xs(gt)+Nt|Ct<<Nt|Pt,$s=Zt+ft}else xs=1<<Zt|Ct<<Nt|Pt,$s=ft}function Mo(ft){ft.return!==null&&(Vs(ft,1),go(ft,1,0))}function Es(ft){for(;ft===ds;)ds=qr[--Xr],qr[Xr]=null,vs=qr[--Xr],qr[Xr]=null;for(;ft===gs;)gs=jr[--Nr],jr[Nr]=null,$s=jr[--Nr],jr[Nr]=null,xs=jr[--Nr],jr[Nr]=null}var Ys=null,Bs=null,As=!1,oo=!1,Ls=null;function _l(ft,gt){var Ct=ga(5,null,null,0);Ct.elementType="DELETED",Ct.stateNode=gt,Ct.return=ft,gt=ft.deletions,gt===null?(ft.deletions=[Ct],ft.flags|=16):gt.push(Ct)}function Pl(ft,gt){switch(ft.tag){case 5:return gt=Yn(gt,ft.type,ft.pendingProps),gt!==null?(ft.stateNode=gt,Ys=ft,Bs=Lr(gt),!0):!1;case 6:return gt=Qn(gt,ft.pendingProps),gt!==null?(ft.stateNode=gt,Ys=ft,Bs=null,!0):!1;case 13:if(gt=ur(gt),gt!==null){var Ct=gs!==null?{id:xs,overflow:$s}:null;return ft.memoizedState={dehydrated:gt,treeContext:Ct,retryLane:1073741824},Ct=ga(18,null,null,0),Ct.stateNode=gt,Ct.return=ft,ft.child=Ct,Ys=ft,Bs=null,!0}return!1;default:return!1}}function Bl(ft){return(ft.mode&1)!==0&&(ft.flags&128)===0}function xl(ft){if(As){var gt=Bs;if(gt){var Ct=gt;if(!Pl(ft,gt)){if(Bl(ft))throw Error(st(418));gt=br(Ct);var Pt=Ys;gt&&Pl(ft,gt)?_l(Pt,Ct):(ft.flags=ft.flags&-4097|2,As=!1,Ys=ft)}}else{if(Bl(ft))throw Error(st(418));ft.flags=ft.flags&-4097|2,As=!1,Ys=ft}}}function Ol(ft){for(ft=ft.return;ft!==null&&ft.tag!==5&&ft.tag!==3&&ft.tag!==13;)ft=ft.return;Ys=ft}function _c(ft){if(!nn||ft!==Ys)return!1;if(!As)return Ol(ft),As=!0,!1;if(ft.tag!==3&&(ft.tag!==5||Mn(ft.type)&&!Ut(ft.type,ft.memoizedProps))){var gt=Bs;if(gt){if(Bl(ft)){for(ft=Bs;ft;)ft=br(ft);throw Error(st(418))}for(;gt;)_l(ft,gt),gt=br(gt)}}if(Ol(ft),ft.tag===13){if(!nn)throw Error(st(316));if(ft=ft.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(st(317));Bs=tr(ft)}else Bs=Ys?br(ft.stateNode):null;return!0}function yo(){nn&&(Bs=Ys=null,oo=As=!1)}function mu(ft){Ls===null?Ls=[ft]:Ls.push(ft)}function eu(ft,gt,Ct){if(ft=Ct.ref,ft!==null&&typeof ft!="function"&&typeof ft!="object"){if(Ct._owner){if(Ct=Ct._owner,Ct){if(Ct.tag!==1)throw Error(st(309));var Pt=Ct.stateNode}if(!Pt)throw Error(st(147,ft));var Nt=Pt,Zt=""+ft;return gt!==null&&gt.ref!==null&&typeof gt.ref=="function"&&gt.ref._stringRef===Zt?gt.ref:(gt=function(In){var Zn=Nt.refs;Zn===No&&(Zn=Nt.refs={}),In===null?delete Zn[Zt]:Zn[Zt]=In},gt._stringRef=Zt,gt)}if(typeof ft!="string")throw Error(st(284));if(!Ct._owner)throw Error(st(290,ft))}return ft}function js(ft,gt){throw ft=Object.prototype.toString.call(gt),Error(st(31,ft==="[object Object]"?"object with keys {"+Object.keys(gt).join(", ")+"}":ft))}function Ku(ft){var gt=ft._init;return gt(ft._payload)}function Sl(ft){function gt(mr,sr){if(ft){var yr=mr.deletions;yr===null?(mr.deletions=[sr],mr.flags|=16):yr.push(sr)}}function Ct(mr,sr){if(!ft)return null;for(;sr!==null;)gt(mr,sr),sr=sr.sibling;return null}function Pt(mr,sr){for(mr=new Map;sr!==null;)sr.key!==null?mr.set(sr.key,sr):mr.set(sr.index,sr),sr=sr.sibling;return mr}function Nt(mr,sr){return mr=Yl(mr,sr),mr.index=0,mr.sibling=null,mr}function Zt(mr,sr,yr){return mr.index=yr,ft?(yr=mr.alternate,yr!==null?(yr=yr.index,yr<sr?(mr.flags|=2,sr):yr):(mr.flags|=2,sr)):(mr.flags|=1048576,sr)}function In(mr){return ft&&mr.alternate===null&&(mr.flags|=2),mr}function Zn(mr,sr,yr,Jr){return sr===null||sr.tag!==6?(sr=um(yr,mr.mode,Jr),sr.return=mr,sr):(sr=Nt(sr,yr),sr.return=mr,sr)}function Er(mr,sr,yr,Jr){var hs=yr.type;return hs===ct?ns(mr,sr,yr.props.children,Jr,yr.key):sr!==null&&(sr.elementType===hs||typeof hs=="object"&&hs!==null&&hs.$$typeof===xt&&Ku(hs)===sr.type)?(Jr=Nt(sr,yr.props),Jr.ref=eu(mr,sr,yr),Jr.return=mr,Jr):(Jr=_p(yr.type,yr.key,yr.props,null,mr.mode,Jr),Jr.ref=eu(mr,sr,yr),Jr.return=mr,Jr)}function Gr(mr,sr,yr,Jr){return sr===null||sr.tag!==4||sr.stateNode.containerInfo!==yr.containerInfo||sr.stateNode.implementation!==yr.implementation?(sr=dm(yr,mr.mode,Jr),sr.return=mr,sr):(sr=Nt(sr,yr.children||[]),sr.return=mr,sr)}function ns(mr,sr,yr,Jr,hs){return sr===null||sr.tag!==7?(sr=du(yr,mr.mode,Jr,hs),sr.return=mr,sr):(sr=Nt(sr,yr),sr.return=mr,sr)}function Is(mr,sr,yr){if(typeof sr=="string"&&sr!==""||typeof sr=="number")return sr=um(""+sr,mr.mode,yr),sr.return=mr,sr;if(typeof sr=="object"&&sr!==null){switch(sr.$$typeof){case at:return yr=_p(sr.type,sr.key,sr.props,null,mr.mode,yr),yr.ref=eu(mr,null,sr),yr.return=mr,yr;case lt:return sr=dm(sr,mr.mode,yr),sr.return=mr,sr;case xt:var Jr=sr._init;return Is(mr,Jr(sr._payload),yr)}if(Kt(sr)||bt(sr))return sr=du(sr,mr.mode,yr,null),sr.return=mr,sr;js(mr,sr)}return null}function bs(mr,sr,yr,Jr){var hs=sr!==null?sr.key:null;if(typeof yr=="string"&&yr!==""||typeof yr=="number")return hs!==null?null:Zn(mr,sr,""+yr,Jr);if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case at:return yr.key===hs?Er(mr,sr,yr,Jr):null;case lt:return yr.key===hs?Gr(mr,sr,yr,Jr):null;case xt:return hs=yr._init,bs(mr,sr,hs(yr._payload),Jr)}if(Kt(yr)||bt(yr))return hs!==null?null:ns(mr,sr,yr,Jr,null);js(mr,yr)}return null}function so(mr,sr,yr,Jr,hs){if(typeof Jr=="string"&&Jr!==""||typeof Jr=="number")return mr=mr.get(yr)||null,Zn(sr,mr,""+Jr,hs);if(typeof Jr=="object"&&Jr!==null){switch(Jr.$$typeof){case at:return mr=mr.get(Jr.key===null?yr:Jr.key)||null,Er(sr,mr,Jr,hs);case lt:return mr=mr.get(Jr.key===null?yr:Jr.key)||null,Gr(sr,mr,Jr,hs);case xt:var Us=Jr._init;return so(mr,sr,yr,Us(Jr._payload),hs)}if(Kt(Jr)||bt(Jr))return mr=mr.get(yr)||null,ns(sr,mr,Jr,hs,null);js(sr,Jr)}return null}function ps(mr,sr,yr,Jr){for(var hs=null,Us=null,Ds=sr,qs=sr=0,Co=null;Ds!==null&&qs<yr.length;qs++){Ds.index>qs?(Co=Ds,Ds=null):Co=Ds.sibling;var Js=bs(mr,Ds,yr[qs],Jr);if(Js===null){Ds===null&&(Ds=Co);break}ft&&Ds&&Js.alternate===null&&gt(mr,Ds),sr=Zt(Js,sr,qs),Us===null?hs=Js:Us.sibling=Js,Us=Js,Ds=Co}if(qs===yr.length)return Ct(mr,Ds),As&&Vs(mr,qs),hs;if(Ds===null){for(;qs<yr.length;qs++)Ds=Is(mr,yr[qs],Jr),Ds!==null&&(sr=Zt(Ds,sr,qs),Us===null?hs=Ds:Us.sibling=Ds,Us=Ds);return As&&Vs(mr,qs),hs}for(Ds=Pt(mr,Ds);qs<yr.length;qs++)Co=so(Ds,mr,qs,yr[qs],Jr),Co!==null&&(ft&&Co.alternate!==null&&Ds.delete(Co.key===null?qs:Co.key),sr=Zt(Co,sr,qs),Us===null?hs=Co:Us.sibling=Co,Us=Co);return ft&&Ds.forEach(function(Jl){return gt(mr,Jl)}),As&&Vs(mr,qs),hs}function Io(mr,sr,yr,Jr){var hs=bt(yr);if(typeof hs!="function")throw Error(st(150));if(yr=hs.call(yr),yr==null)throw Error(st(151));for(var Us=hs=null,Ds=sr,qs=sr=0,Co=null,Js=yr.next();Ds!==null&&!Js.done;qs++,Js=yr.next()){Ds.index>qs?(Co=Ds,Ds=null):Co=Ds.sibling;var Jl=bs(mr,Ds,Js.value,Jr);if(Jl===null){Ds===null&&(Ds=Co);break}ft&&Ds&&Jl.alternate===null&&gt(mr,Ds),sr=Zt(Jl,sr,qs),Us===null?hs=Jl:Us.sibling=Jl,Us=Jl,Ds=Co}if(Js.done)return Ct(mr,Ds),As&&Vs(mr,qs),hs;if(Ds===null){for(;!Js.done;qs++,Js=yr.next())Js=Is(mr,Js.value,Jr),Js!==null&&(sr=Zt(Js,sr,qs),Us===null?hs=Js:Us.sibling=Js,Us=Js);return As&&Vs(mr,qs),hs}for(Ds=Pt(mr,Ds);!Js.done;qs++,Js=yr.next())Js=so(Ds,mr,qs,Js.value,Jr),Js!==null&&(ft&&Js.alternate!==null&&Ds.delete(Js.key===null?qs:Js.key),sr=Zt(Js,sr,qs),Us===null?hs=Js:Us.sibling=Js,Us=Js);return ft&&Ds.forEach(function(ly){return gt(mr,ly)}),As&&Vs(mr,qs),hs}function xa(mr,sr,yr,Jr){if(typeof yr=="object"&&yr!==null&&yr.type===ct&&yr.key===null&&(yr=yr.props.children),typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case at:e:{for(var hs=yr.key,Us=sr;Us!==null;){if(Us.key===hs){if(hs=yr.type,hs===ct){if(Us.tag===7){Ct(mr,Us.sibling),sr=Nt(Us,yr.props.children),sr.return=mr,mr=sr;break e}}else if(Us.elementType===hs||typeof hs=="object"&&hs!==null&&hs.$$typeof===xt&&Ku(hs)===Us.type){Ct(mr,Us.sibling),sr=Nt(Us,yr.props),sr.ref=eu(mr,Us,yr),sr.return=mr,mr=sr;break e}Ct(mr,Us);break}else gt(mr,Us);Us=Us.sibling}yr.type===ct?(sr=du(yr.props.children,mr.mode,Jr,yr.key),sr.return=mr,mr=sr):(Jr=_p(yr.type,yr.key,yr.props,null,mr.mode,Jr),Jr.ref=eu(mr,sr,yr),Jr.return=mr,mr=Jr)}return In(mr);case lt:e:{for(Us=yr.key;sr!==null;){if(sr.key===Us)if(sr.tag===4&&sr.stateNode.containerInfo===yr.containerInfo&&sr.stateNode.implementation===yr.implementation){Ct(mr,sr.sibling),sr=Nt(sr,yr.children||[]),sr.return=mr,mr=sr;break e}else{Ct(mr,sr);break}else gt(mr,sr);sr=sr.sibling}sr=dm(yr,mr.mode,Jr),sr.return=mr,mr=sr}return In(mr);case xt:return Us=yr._init,xa(mr,sr,Us(yr._payload),Jr)}if(Kt(yr))return ps(mr,sr,yr,Jr);if(bt(yr))return Io(mr,sr,yr,Jr);js(mr,yr)}return typeof yr=="string"&&yr!==""||typeof yr=="number"?(yr=""+yr,sr!==null&&sr.tag===6?(Ct(mr,sr.sibling),sr=Nt(sr,yr),sr.return=mr,mr=sr):(Ct(mr,sr),sr=um(yr,mr.mode,Jr),sr.return=mr,mr=sr),In(mr)):Ct(mr,sr)}return xa}var Nl=Sl(!0),Yu=Sl(!1),tu={},Po=ts(tu),Ul=ts(tu),Gl=ts(tu);function Jo(ft){if(ft===tu)throw Error(st(174));return ft}function Ru(ft,gt){zr(Gl,gt),zr(Ul,ft),zr(Po,tu),ft=Jt(gt),Qr(Po),zr(Po,ft)}function Bo(){Qr(Po),Qr(Ul),Qr(Gl)}function qu(ft){var gt=Jo(Gl.current),Ct=Jo(Po.current);gt=Ot(Ct,ft.type,gt),Ct!==gt&&(zr(Ul,ft),zr(Po,gt))}function gu(ft){Ul.current===ft&&(Qr(Po),Qr(Ul))}var ao=ts(0);function $l(ft){for(var gt=ft;gt!==null;){if(gt.tag===13){var Ct=gt.memoizedState;if(Ct!==null&&(Ct=Ct.dehydrated,Ct===null||vr(Ct)||Or(Ct)))return gt}else if(gt.tag===19&&gt.memoizedProps.revealOrder!==void 0){if(gt.flags&128)return gt}else if(gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===ft)break;for(;gt.sibling===null;){if(gt.return===null||gt.return===ft)return null;gt=gt.return}gt.sibling.return=gt.return,gt=gt.sibling}return null}var vu=[];function yu(){for(var ft=0;ft<vu.length;ft++){var gt=vu[ft];An?gt._workInProgressVersionPrimary=null:gt._workInProgressVersionSecondary=null}vu.length=0}var Qo=ot.ReactCurrentDispatcher,Uo=ot.ReactCurrentBatchConfig,Vl=0,lo=null,_o=null,mo=null,nu=!1,ru=!1,Ll=0,Bp=0;function wo(){throw Error(st(321))}function _u(ft,gt){if(gt===null)return!1;for(var Ct=0;Ct<gt.length&&Ct<ft.length;Ct++)if(!Vn(ft[Ct],gt[Ct]))return!1;return!0}function Tr(ft,gt,Ct,Pt,Nt,Zt){if(Vl=Zt,lo=gt,gt.memoizedState=null,gt.updateQueue=null,gt.lanes=0,Qo.current=ft===null||ft.memoizedState===null?O0:N0,ft=Ct(Pt,Nt),ru){Zt=0;do{if(ru=!1,Ll=0,25<=Zt)throw Error(st(301));Zt+=1,mo=_o=null,gt.updateQueue=null,Qo.current=U0,ft=Ct(Pt,Nt)}while(ru)}if(Qo.current=Zu,gt=_o!==null&&_o.next!==null,Vl=0,mo=_o=lo=null,nu=!1,gt)throw Error(st(300));return ft}function Ss(){var ft=Ll!==0;return Ll=0,ft}function Cs(){var ft={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mo===null?lo.memoizedState=mo=ft:mo=mo.next=ft,mo}function Rs(){if(_o===null){var ft=lo.alternate;ft=ft!==null?ft.memoizedState:null}else ft=_o.next;var gt=mo===null?lo.memoizedState:mo.next;if(gt!==null)mo=gt,_o=ft;else{if(ft===null)throw Error(st(310));_o=ft,ft={memoizedState:_o.memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},mo===null?lo.memoizedState=mo=ft:mo=mo.next=ft}return mo}function ks(ft,gt){return typeof gt=="function"?gt(ft):gt}function Ts(ft){var gt=Rs(),Ct=gt.queue;if(Ct===null)throw Error(st(311));Ct.lastRenderedReducer=ft;var Pt=_o,Nt=Pt.baseQueue,Zt=Ct.pending;if(Zt!==null){if(Nt!==null){var In=Nt.next;Nt.next=Zt.next,Zt.next=In}Pt.baseQueue=Nt=Zt,Ct.pending=null}if(Nt!==null){Zt=Nt.next,Pt=Pt.baseState;var Zn=In=null,Er=null,Gr=Zt;do{var ns=Gr.lane;if((Vl&ns)===ns)Er!==null&&(Er=Er.next={lane:0,action:Gr.action,hasEagerState:Gr.hasEagerState,eagerState:Gr.eagerState,next:null}),Pt=Gr.hasEagerState?Gr.eagerState:ft(Pt,Gr.action);else{var Is={lane:ns,action:Gr.action,hasEagerState:Gr.hasEagerState,eagerState:Gr.eagerState,next:null};Er===null?(Zn=Er=Is,In=Pt):Er=Er.next=Is,lo.lanes|=ns,Eu|=ns}Gr=Gr.next}while(Gr!==null&&Gr!==Zt);Er===null?In=Pt:Er.next=Zn,Vn(Pt,gt.memoizedState)||(jo=!0),gt.memoizedState=Pt,gt.baseState=In,gt.baseQueue=Er,Ct.lastRenderedState=Pt}if(ft=Ct.interleaved,ft!==null){Nt=ft;do Zt=Nt.lane,lo.lanes|=Zt,Eu|=Zt,Nt=Nt.next;while(Nt!==ft)}else Nt===null&&(Ct.lanes=0);return[gt.memoizedState,Ct.dispatch]}function uo(ft){var gt=Rs(),Ct=gt.queue;if(Ct===null)throw Error(st(311));Ct.lastRenderedReducer=ft;var Pt=Ct.dispatch,Nt=Ct.pending,Zt=gt.memoizedState;if(Nt!==null){Ct.pending=null;var In=Nt=Nt.next;do Zt=ft(Zt,In.action),In=In.next;while(In!==Nt);Vn(Zt,gt.memoizedState)||(jo=!0),gt.memoizedState=Zt,gt.baseQueue===null&&(gt.baseState=Zt),Ct.lastRenderedState=Zt}return[Zt,Pt]}function El(){}function xu(ft,gt){var Ct=lo,Pt=Rs(),Nt=gt(),Zt=!Vn(Pt.memoizedState,Nt);if(Zt&&(Pt.memoizedState=Nt,jo=!0),Pt=Pt.queue,Lu(su.bind(null,Ct,Pt,ft),[ft]),Pt.getSnapshot!==gt||Zt||mo!==null&&mo.memoizedState.tag&1){if(Ct.flags|=2048,Zo(9,Al.bind(null,Ct,Pt,Nt,gt),void 0,null),xo===null)throw Error(st(349));Vl&30||iu(Ct,gt,Nt)}return Nt}function iu(ft,gt,Ct){ft.flags|=16384,ft={getSnapshot:gt,value:Ct},gt=lo.updateQueue,gt===null?(gt={lastEffect:null,stores:null},lo.updateQueue=gt,gt.stores=[ft]):(Ct=gt.stores,Ct===null?gt.stores=[ft]:Ct.push(ft))}function Al(ft,gt,Ct,Pt){gt.value=Ct,gt.getSnapshot=Pt,Pu(gt)&&na(ft,1,-1)}function su(ft,gt,Ct){return Ct(function(){Pu(gt)&&na(ft,1,-1)})}function Pu(ft){var gt=ft.getSnapshot;ft=ft.value;try{var Ct=gt();return!Vn(ft,Ct)}catch{return!0}}function zl(ft){var gt=Cs();return typeof ft=="function"&&(ft=ft()),gt.memoizedState=gt.baseState=ft,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:ft},gt.queue=ft,ft=ft.dispatch=k0.bind(null,lo,ft),[gt.memoizedState,ft]}function Zo(ft,gt,Ct,Pt){return ft={tag:ft,create:gt,destroy:Ct,deps:Pt,next:null},gt=lo.updateQueue,gt===null?(gt={lastEffect:null,stores:null},lo.updateQueue=gt,gt.lastEffect=ft.next=ft):(Ct=gt.lastEffect,Ct===null?gt.lastEffect=ft.next=ft:(Pt=Ct.next,Ct.next=ft,ft.next=Pt,gt.lastEffect=ft)),ft}function Km(){return Rs().memoizedState}function Ju(ft,gt,Ct,Pt){var Nt=Cs();lo.flags|=ft,Nt.memoizedState=Zo(1|gt,Ct,void 0,Pt===void 0?null:Pt)}function Qu(ft,gt,Ct,Pt){var Nt=Rs();Pt=Pt===void 0?null:Pt;var Zt=void 0;if(_o!==null){var In=_o.memoizedState;if(Zt=In.destroy,Pt!==null&&_u(Pt,In.deps)){Nt.memoizedState=Zo(gt,Ct,Zt,Pt);return}}lo.flags|=ft,Nt.memoizedState=Zo(1|gt,Ct,Zt,Pt)}function kp(ft,gt){return Ju(8390656,8,ft,gt)}function Lu(ft,gt){return Qu(2048,8,ft,gt)}function Ym(ft,gt){return Qu(4,2,ft,gt)}function qm(ft,gt){return Qu(4,4,ft,gt)}function Jm(ft,gt){if(typeof gt=="function")return ft=ft(),gt(ft),function(){gt(null)};if(gt!=null)return ft=ft(),gt.current=ft,function(){gt.current=null}}function Qm(ft,gt,Ct){return Ct=Ct!=null?Ct.concat([ft]):null,Qu(4,4,Jm.bind(null,gt,ft),Ct)}function Op(){}function Zm(ft,gt){var Ct=Rs();gt=gt===void 0?null:gt;var Pt=Ct.memoizedState;return Pt!==null&&gt!==null&&_u(gt,Pt[1])?Pt[0]:(Ct.memoizedState=[ft,gt],ft)}function _g(ft,gt){var Ct=Rs();gt=gt===void 0?null:gt;var Pt=Ct.memoizedState;return Pt!==null&&gt!==null&&_u(gt,Pt[1])?Pt[0]:(ft=ft(),Ct.memoizedState=[ft,gt],ft)}function F0(ft,gt){var Ct=Fs;Fs=Ct!==0&&4>Ct?Ct:4,ft(!0);var Pt=Uo.transition;Uo.transition={};try{ft(!1),gt()}finally{Fs=Ct,Uo.transition=Pt}}function ev(){return Rs().memoizedState}function B0(ft,gt,Ct){var Pt=Xl(ft);Ct={lane:Pt,action:Ct,hasEagerState:!1,eagerState:null,next:null},tv(ft)?nv(gt,Ct):(rv(ft,gt,Ct),Ct=Oo(),ft=na(ft,Pt,Ct),ft!==null&&iv(ft,gt,Pt))}function k0(ft,gt,Ct){var Pt=Xl(ft),Nt={lane:Pt,action:Ct,hasEagerState:!1,eagerState:null,next:null};if(tv(ft))nv(gt,Nt);else{rv(ft,gt,Nt);var Zt=ft.alternate;if(ft.lanes===0&&(Zt===null||Zt.lanes===0)&&(Zt=gt.lastRenderedReducer,Zt!==null))try{var In=gt.lastRenderedState,Zn=Zt(In,Ct);if(Nt.hasEagerState=!0,Nt.eagerState=Zn,Vn(Zn,In))return}catch{}finally{}Ct=Oo(),ft=na(ft,Pt,Ct),ft!==null&&iv(ft,gt,Pt)}}function tv(ft){var gt=ft.alternate;return ft===lo||gt!==null&&gt===lo}function nv(ft,gt){ru=nu=!0;var Ct=ft.pending;Ct===null?gt.next=gt:(gt.next=Ct.next,Ct.next=gt),ft.pending=gt}function rv(ft,gt,Ct){xo!==null&&ft.mode&1&&!(Gs&2)?(ft=gt.interleaved,ft===null?(Ct.next=Ct,Ms===null?Ms=[gt]:Ms.push(gt)):(Ct.next=ft.next,ft.next=Ct),gt.interleaved=Ct):(ft=gt.pending,ft===null?Ct.next=Ct:(Ct.next=ft.next,ft.next=Ct),gt.pending=Ct)}function iv(ft,gt,Ct){if(Ct&4194240){var Pt=gt.lanes;Pt&=ft.pendingLanes,Ct|=Pt,gt.lanes=Ct,Fo(ft,Ct)}}var Zu={readContext:ms,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},O0={readContext:ms,useCallback:function(ft,gt){return Cs().memoizedState=[ft,gt===void 0?null:gt],ft},useContext:ms,useEffect:kp,useImperativeHandle:function(ft,gt,Ct){return Ct=Ct!=null?Ct.concat([ft]):null,Ju(4194308,4,Jm.bind(null,gt,ft),Ct)},useLayoutEffect:function(ft,gt){return Ju(4194308,4,ft,gt)},useInsertionEffect:function(ft,gt){return Ju(4,2,ft,gt)},useMemo:function(ft,gt){var Ct=Cs();return gt=gt===void 0?null:gt,ft=ft(),Ct.memoizedState=[ft,gt],ft},useReducer:function(ft,gt,Ct){var Pt=Cs();return gt=Ct!==void 0?Ct(gt):gt,Pt.memoizedState=Pt.baseState=gt,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:gt},Pt.queue=ft,ft=ft.dispatch=B0.bind(null,lo,ft),[Pt.memoizedState,ft]},useRef:function(ft){var gt=Cs();return ft={current:ft},gt.memoizedState=ft},useState:zl,useDebugValue:Op,useDeferredValue:function(ft){var gt=zl(ft),Ct=gt[0],Pt=gt[1];return kp(function(){var Nt=Uo.transition;Uo.transition={};try{Pt(ft)}finally{Uo.transition=Nt}},[ft]),Ct},useTransition:function(){var ft=zl(!1),gt=ft[0];return ft=F0.bind(null,ft[1]),Cs().memoizedState=ft,[gt,ft]},useMutableSource:function(){},useSyncExternalStore:function(ft,gt,Ct){var Pt=lo,Nt=Cs();if(As){if(Ct===void 0)throw Error(st(407));Ct=Ct()}else{if(Ct=gt(),xo===null)throw Error(st(349));Vl&30||iu(Pt,gt,Ct)}Nt.memoizedState=Ct;var Zt={value:Ct,getSnapshot:gt};return Nt.queue=Zt,kp(su.bind(null,Pt,Zt,ft),[ft]),Pt.flags|=2048,Zo(9,Al.bind(null,Pt,Zt,Ct,gt),void 0,null),Ct},useId:function(){var ft=Cs(),gt=xo.identifierPrefix;if(As){var Ct=$s,Pt=xs;Ct=(Pt&~(1<<32-Xs(Pt)-1)).toString(32)+Ct,gt=":"+gt+"R"+Ct,Ct=Ll++,0<Ct&&(gt+="H"+Ct.toString(32)),gt+=":"}else Ct=Bp++,gt=":"+gt+"r"+Ct.toString(32)+":";return ft.memoizedState=gt},unstable_isNewReconciler:!1},N0={readContext:ms,useCallback:Zm,useContext:ms,useEffect:Lu,useImperativeHandle:Qm,useInsertionEffect:Ym,useLayoutEffect:qm,useMemo:_g,useReducer:Ts,useRef:Km,useState:function(){return Ts(ks)},useDebugValue:Op,useDeferredValue:function(ft){var gt=Ts(ks),Ct=gt[0],Pt=gt[1];return Lu(function(){var Nt=Uo.transition;Uo.transition={};try{Pt(ft)}finally{Uo.transition=Nt}},[ft]),Ct},useTransition:function(){var ft=Ts(ks)[0],gt=Rs().memoizedState;return[ft,gt]},useMutableSource:El,useSyncExternalStore:xu,useId:ev,unstable_isNewReconciler:!1},U0={readContext:ms,useCallback:Zm,useContext:ms,useEffect:Lu,useImperativeHandle:Qm,useInsertionEffect:Ym,useLayoutEffect:qm,useMemo:_g,useReducer:uo,useRef:Km,useState:function(){return uo(ks)},useDebugValue:Op,useDeferredValue:function(ft){var gt=uo(ks),Ct=gt[0],Pt=gt[1];return Lu(function(){var Nt=Uo.transition;Uo.transition={};try{Pt(ft)}finally{Uo.transition=Nt}},[ft]),Ct},useTransition:function(){var ft=uo(ks)[0],gt=Rs().memoizedState;return[ft,gt]},useMutableSource:El,useSyncExternalStore:xu,useId:ev,unstable_isNewReconciler:!1};function Np(ft,gt){try{var Ct="",Pt=gt;do Ct+=Cr(Pt),Pt=Pt.return;while(Pt);var Nt=Ct}catch(Zt){Nt=`
Error generating stack: `+Zt.message+`
`+Zt.stack}return{value:ft,source:gt,stack:Nt}}function Up(ft,gt){try{console.error(gt.value)}catch(Ct){setTimeout(function(){throw Ct})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function sv(ft,gt,Ct){Ct=Hs(-1,Ct),Ct.tag=3,Ct.payload={element:null};var Pt=gt.value;return Ct.callback=function(){hp||(hp=!0,rm=Pt),Up(ft,gt)},Ct}function ov(ft,gt,Ct){Ct=Hs(-1,Ct),Ct.tag=3;var Pt=ft.type.getDerivedStateFromError;if(typeof Pt=="function"){var Nt=gt.value;Ct.payload=function(){return Pt(Nt)},Ct.callback=function(){Up(ft,gt)}}var Zt=ft.stateNode;return Zt!==null&&typeof Zt.componentDidCatch=="function"&&(Ct.callback=function(){Up(ft,gt),typeof Pt!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var In=gt.stack;this.componentDidCatch(gt.value,{componentStack:In!==null?In:""})}),Ct}function av(ft,gt,Ct){var Pt=ft.pingCache;if(Pt===null){Pt=ft.pingCache=new G0;var Nt=new Set;Pt.set(gt,Nt)}else Nt=Pt.get(gt),Nt===void 0&&(Nt=new Set,Pt.set(gt,Nt));Nt.has(Ct)||(Nt.add(Ct),ft=ey.bind(null,ft,gt,Ct),gt.then(ft,ft))}function lv(ft){do{var gt;if((gt=ft.tag===13)&&(gt=ft.memoizedState,gt=gt!==null?gt.dehydrated!==null:!0),gt)return ft;ft=ft.return}while(ft!==null);return null}function cv(ft,gt,Ct,Pt,Nt){return ft.mode&1?(ft.flags|=65536,ft.lanes=Nt,ft):(ft===gt?ft.flags|=65536:(ft.flags|=128,Ct.flags|=131072,Ct.flags&=-52805,Ct.tag===1&&(Ct.alternate===null?Ct.tag=17:(gt=Hs(-1,1),gt.tag=2,Ks(Ct,gt))),Ct.lanes|=1),ft)}function Cl(ft){ft.flags|=4}function uv(ft,gt){if(ft!==null&&ft.child===gt.child)return!0;if(gt.flags&16)return!1;for(ft=gt.child;ft!==null;){if(ft.flags&12854||ft.subtreeFlags&12854)return!1;ft=ft.sibling}return!0}var Iu,Du,_d,_h;if(En)Iu=function(ft,gt){for(var Ct=gt.child;Ct!==null;){if(Ct.tag===5||Ct.tag===6)Vt(ft,Ct.stateNode);else if(Ct.tag!==4&&Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}if(Ct===gt)break;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===gt)return;Ct=Ct.return}Ct.sibling.return=Ct.return,Ct=Ct.sibling}},Du=function(){},_d=function(ft,gt,Ct,Pt,Nt){if(ft=ft.memoizedProps,ft!==Pt){var Zt=gt.stateNode,In=Jo(Po.current);Ct=It(Zt,Ct,ft,Pt,Nt,In),(gt.updateQueue=Ct)&&Cl(gt)}},_h=function(ft,gt,Ct,Pt){Ct!==Pt&&Cl(gt)};else if(fn){Iu=function(ft,gt,Ct,Pt){for(var Nt=gt.child;Nt!==null;){if(Nt.tag===5){var Zt=Nt.stateNode;Ct&&Pt&&(Zt=pn(Zt,Nt.type,Nt.memoizedProps,Nt)),Vt(ft,Zt)}else if(Nt.tag===6)Zt=Nt.stateNode,Ct&&Pt&&(Zt=Fn(Zt,Nt.memoizedProps,Nt)),Vt(ft,Zt);else if(Nt.tag!==4){if(Nt.tag===22&&Nt.memoizedState!==null)Zt=Nt.child,Zt!==null&&(Zt.return=Nt),Iu(ft,Nt,!0,!0);else if(Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}}if(Nt===gt)break;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===gt)return;Nt=Nt.return}Nt.sibling.return=Nt.return,Nt=Nt.sibling}};var dv=function(ft,gt,Ct,Pt){for(var Nt=gt.child;Nt!==null;){if(Nt.tag===5){var Zt=Nt.stateNode;Ct&&Pt&&(Zt=pn(Zt,Nt.type,Nt.memoizedProps,Nt)),Ar(ft,Zt)}else if(Nt.tag===6)Zt=Nt.stateNode,Ct&&Pt&&(Zt=Fn(Zt,Nt.memoizedProps,Nt)),Ar(ft,Zt);else if(Nt.tag!==4){if(Nt.tag===22&&Nt.memoizedState!==null)Zt=Nt.child,Zt!==null&&(Zt.return=Nt),dv(ft,Nt,!0,!0);else if(Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}}if(Nt===gt)break;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===gt)return;Nt=Nt.return}Nt.sibling.return=Nt.return,Nt=Nt.sibling}};Du=function(ft,gt){var Ct=gt.stateNode;if(!uv(ft,gt)){ft=Ct.containerInfo;var Pt=pr(ft);dv(Pt,gt,!1,!1),Ct.pendingChildren=Pt,Cl(gt),xr(ft,Pt)}},_d=function(ft,gt,Ct,Pt,Nt){var Zt=ft.stateNode,In=ft.memoizedProps;if((ft=uv(ft,gt))&&In===Pt)gt.stateNode=Zt;else{var Zn=gt.stateNode,Er=Jo(Po.current),Gr=null;In!==Pt&&(Gr=It(Zn,Ct,In,Pt,Nt,Er)),ft&&Gr===null?gt.stateNode=Zt:(Zt=Xn(Zt,Gr,Ct,In,Pt,gt,ft,Zn),Dt(Zt,Ct,Pt,Nt,Er)&&Cl(gt),gt.stateNode=Zt,ft?Cl(gt):Iu(Zt,gt,!1,!1))}},_h=function(ft,gt,Ct,Pt){Ct!==Pt?(ft=Jo(Gl.current),Ct=Jo(Po.current),gt.stateNode=Yt(Pt,ft,Ct,gt),Cl(gt)):gt.stateNode=ft.stateNode}}else Du=function(){},_d=function(){},_h=function(){};function Fu(ft,gt){if(!As)switch(ft.tailMode){case"hidden":gt=ft.tail;for(var Ct=null;gt!==null;)gt.alternate!==null&&(Ct=gt),gt=gt.sibling;Ct===null?ft.tail=null:Ct.sibling=null;break;case"collapsed":Ct=ft.tail;for(var Pt=null;Ct!==null;)Ct.alternate!==null&&(Pt=Ct),Ct=Ct.sibling;Pt===null?gt||ft.tail===null?ft.tail=null:ft.tail.sibling=null:Pt.sibling=null}}function Lo(ft){var gt=ft.alternate!==null&&ft.alternate.child===ft.child,Ct=0,Pt=0;if(gt)for(var Nt=ft.child;Nt!==null;)Ct|=Nt.lanes|Nt.childLanes,Pt|=Nt.subtreeFlags&14680064,Pt|=Nt.flags&14680064,Nt.return=ft,Nt=Nt.sibling;else for(Nt=ft.child;Nt!==null;)Ct|=Nt.lanes|Nt.childLanes,Pt|=Nt.subtreeFlags,Pt|=Nt.flags,Nt.return=ft,Nt=Nt.sibling;return ft.subtreeFlags|=Pt,ft.childLanes=Ct,gt}function $0(ft,gt,Ct){var Pt=gt.pendingProps;switch(Es(gt),gt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lo(gt),null;case 1:return Os(gt.type)&&Ws(),Lo(gt),null;case 3:return Pt=gt.stateNode,Bo(),Qr($r),Qr(ws),yu(),Pt.pendingContext&&(Pt.context=Pt.pendingContext,Pt.pendingContext=null),(ft===null||ft.child===null)&&(_c(gt)?Cl(gt):ft===null||ft.memoizedState.isDehydrated&&!(gt.flags&256)||(gt.flags|=1024,Ls!==null&&(om(Ls),Ls=null))),Du(ft,gt),Lo(gt),null;case 5:gu(gt),Ct=Jo(Gl.current);var Nt=gt.type;if(ft!==null&&gt.stateNode!=null)_d(ft,gt,Nt,Pt,Ct),ft.ref!==gt.ref&&(gt.flags|=512,gt.flags|=2097152);else{if(!Pt){if(gt.stateNode===null)throw Error(st(166));return Lo(gt),null}if(ft=Jo(Po.current),_c(gt)){if(!nn)throw Error(st(175));ft=en(gt.stateNode,gt.type,gt.memoizedProps,Ct,ft,gt,!oo),gt.updateQueue=ft,ft!==null&&Cl(gt)}else{var Zt=zt(Nt,Pt,Ct,ft,gt);Iu(Zt,gt,!1,!1),gt.stateNode=Zt,Dt(Zt,Nt,Pt,Ct,ft)&&Cl(gt)}gt.ref!==null&&(gt.flags|=512,gt.flags|=2097152)}return Lo(gt),null;case 6:if(ft&&gt.stateNode!=null)_h(ft,gt,ft.memoizedProps,Pt);else{if(typeof Pt!="string"&&gt.stateNode===null)throw Error(st(166));if(ft=Jo(Gl.current),Ct=Jo(Po.current),_c(gt)){if(!nn)throw Error(st(176));if(ft=gt.stateNode,Pt=gt.memoizedProps,(Ct=dn(ft,Pt,gt,!oo))&&(Nt=Ys,Nt!==null))switch(Zt=(Nt.mode&1)!==0,Nt.tag){case 3:ar(Nt.stateNode.containerInfo,ft,Pt,Zt);break;case 5:hr(Nt.type,Nt.memoizedProps,Nt.stateNode,ft,Pt,Zt)}Ct&&Cl(gt)}else gt.stateNode=Yt(Pt,ft,Ct,gt)}return Lo(gt),null;case 13:if(Qr(ao),Pt=gt.memoizedState,As&&Bs!==null&&gt.mode&1&&!(gt.flags&128)){for(ft=Bs;ft;)ft=br(ft);return yo(),gt.flags|=98560,gt}if(Pt!==null&&Pt.dehydrated!==null){if(Pt=_c(gt),ft===null){if(!Pt)throw Error(st(318));if(!nn)throw Error(st(344));if(ft=gt.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(st(317));Bn(ft,gt)}else yo(),!(gt.flags&128)&&(gt.memoizedState=null),gt.flags|=4;return Lo(gt),null}return Ls!==null&&(om(Ls),Ls=null),gt.flags&128?(gt.lanes=Ct,gt):(Pt=Pt!==null,Ct=!1,ft===null?_c(gt):Ct=ft.memoizedState!==null,Pt&&!Ct&&(gt.child.flags|=8192,gt.mode&1&&(ft===null||ao.current&1?Ao===0&&(Ao=3):lm())),gt.updateQueue!==null&&(gt.flags|=4),Lo(gt),null);case 4:return Bo(),Du(ft,gt),ft===null&&Cn(gt.stateNode.containerInfo),Lo(gt),null;case 10:return ys(gt.type._context),Lo(gt),null;case 17:return Os(gt.type)&&Ws(),Lo(gt),null;case 19:if(Qr(ao),Nt=gt.memoizedState,Nt===null)return Lo(gt),null;if(Pt=(gt.flags&128)!==0,Zt=Nt.rendering,Zt===null)if(Pt)Fu(Nt,!1);else{if(Ao!==0||ft!==null&&ft.flags&128)for(ft=gt.child;ft!==null;){if(Zt=$l(ft),Zt!==null){for(gt.flags|=128,Fu(Nt,!1),ft=Zt.updateQueue,ft!==null&&(gt.updateQueue=ft,gt.flags|=4),gt.subtreeFlags=0,ft=Ct,Pt=gt.child;Pt!==null;)Ct=Pt,Nt=ft,Ct.flags&=14680066,Zt=Ct.alternate,Zt===null?(Ct.childLanes=0,Ct.lanes=Nt,Ct.child=null,Ct.subtreeFlags=0,Ct.memoizedProps=null,Ct.memoizedState=null,Ct.updateQueue=null,Ct.dependencies=null,Ct.stateNode=null):(Ct.childLanes=Zt.childLanes,Ct.lanes=Zt.lanes,Ct.child=Zt.child,Ct.subtreeFlags=0,Ct.deletions=null,Ct.memoizedProps=Zt.memoizedProps,Ct.memoizedState=Zt.memoizedState,Ct.updateQueue=Zt.updateQueue,Ct.type=Zt.type,Nt=Zt.dependencies,Ct.dependencies=Nt===null?null:{lanes:Nt.lanes,firstContext:Nt.firstContext}),Pt=Pt.sibling;return zr(ao,ao.current&1|2),gt.child}ft=ft.sibling}Nt.tail!==null&&co()>nm&&(gt.flags|=128,Pt=!0,Fu(Nt,!1),gt.lanes=4194304)}else{if(!Pt)if(ft=$l(Zt),ft!==null){if(gt.flags|=128,Pt=!0,ft=ft.updateQueue,ft!==null&&(gt.updateQueue=ft,gt.flags|=4),Fu(Nt,!0),Nt.tail===null&&Nt.tailMode==="hidden"&&!Zt.alternate&&!As)return Lo(gt),null}else 2*co()-Nt.renderingStartTime>nm&&Ct!==1073741824&&(gt.flags|=128,Pt=!0,Fu(Nt,!1),gt.lanes=4194304);Nt.isBackwards?(Zt.sibling=gt.child,gt.child=Zt):(ft=Nt.last,ft!==null?ft.sibling=Zt:gt.child=Zt,Nt.last=Zt)}return Nt.tail!==null?(gt=Nt.tail,Nt.rendering=gt,Nt.tail=gt.sibling,Nt.renderingStartTime=co(),gt.sibling=null,ft=ao.current,zr(ao,Pt?ft&1|2:ft&1),gt):(Lo(gt),null);case 22:case 23:return am(),Pt=gt.memoizedState!==null,ft!==null&&ft.memoizedState!==null!==Pt&&(gt.flags|=8192),Pt&&gt.mode&1?Wo&1073741824&&(Lo(gt),En&&gt.subtreeFlags&6&&(gt.flags|=8192)):Lo(gt),null;case 24:return null;case 25:return null}throw Error(st(156,gt.tag))}var V0=ot.ReactCurrentOwner,jo=!1;function ko(ft,gt,Ct,Pt){gt.child=ft===null?Yu(gt,null,Ct,Pt):Nl(gt,ft.child,Ct,Pt)}function hv(ft,gt,Ct,Pt,Nt){Ct=Ct.render;var Zt=gt.ref;return fs(gt,Nt),Pt=Tr(ft,gt,Ct,Pt,Zt,Nt),Ct=Ss(),ft!==null&&!jo?(gt.updateQueue=ft.updateQueue,gt.flags&=-2053,ft.lanes&=~Nt,Il(ft,gt,Nt)):(As&&Ct&&Mo(gt),gt.flags|=1,ko(ft,gt,Pt,Nt),gt.child)}function fv(ft,gt,Ct,Pt,Nt){if(ft===null){var Zt=Ct.type;return typeof Zt=="function"&&!cm(Zt)&&Zt.defaultProps===void 0&&Ct.compare===null&&Ct.defaultProps===void 0?(gt.tag=15,gt.type=Zt,pv(ft,gt,Zt,Pt,Nt)):(ft=_p(Ct.type,null,Pt,gt,gt.mode,Nt),ft.ref=gt.ref,ft.return=gt,gt.child=ft)}if(Zt=ft.child,!(ft.lanes&Nt)){var In=Zt.memoizedProps;if(Ct=Ct.compare,Ct=Ct!==null?Ct:Rr,Ct(In,Pt)&&ft.ref===gt.ref)return Il(ft,gt,Nt)}return gt.flags|=1,ft=Yl(Zt,Pt),ft.ref=gt.ref,ft.return=gt,gt.child=ft}function pv(ft,gt,Ct,Pt,Nt){if(ft!==null&&Rr(ft.memoizedProps,Pt)&&ft.ref===gt.ref)if(jo=!1,(ft.lanes&Nt)!==0)ft.flags&131072&&(jo=!0);else return gt.lanes=ft.lanes,Il(ft,gt,Nt);return Gp(ft,gt,Ct,Pt,Nt)}function mv(ft,gt,Ct){var Pt=gt.pendingProps,Nt=Pt.children,Zt=ft!==null?ft.memoizedState:null;if(Pt.mode==="hidden")if(!(gt.mode&1))gt.memoizedState={baseLanes:0,cachePool:null},zr(Su,Wo),Wo|=Ct;else if(Ct&1073741824)gt.memoizedState={baseLanes:0,cachePool:null},Pt=Zt!==null?Zt.baseLanes:Ct,zr(Su,Wo),Wo|=Pt;else return ft=Zt!==null?Zt.baseLanes|Ct:Ct,gt.lanes=gt.childLanes=1073741824,gt.memoizedState={baseLanes:ft,cachePool:null},gt.updateQueue=null,zr(Su,Wo),Wo|=ft,null;else Zt!==null?(Pt=Zt.baseLanes|Ct,gt.memoizedState=null):Pt=Ct,zr(Su,Wo),Wo|=Pt;return ko(ft,gt,Nt,Ct),gt.child}function gv(ft,gt){var Ct=gt.ref;(ft===null&&Ct!==null||ft!==null&&ft.ref!==Ct)&&(gt.flags|=512,gt.flags|=2097152)}function Gp(ft,gt,Ct,Pt,Nt){var Zt=Os(Ct)?Ps:ws.current;return Zt=Qs(gt,Zt),fs(gt,Nt),Ct=Tr(ft,gt,Ct,Pt,Zt,Nt),Pt=Ss(),ft!==null&&!jo?(gt.updateQueue=ft.updateQueue,gt.flags&=-2053,ft.lanes&=~Nt,Il(ft,gt,Nt)):(As&&Pt&&Mo(gt),gt.flags|=1,ko(ft,gt,Ct,Nt),gt.child)}function vv(ft,gt,Ct,Pt,Nt){if(Os(Ct)){var Zt=!0;Ns(gt)}else Zt=!1;if(fs(gt,Nt),gt.stateNode===null)ft!==null&&(ft.alternate=null,gt.alternate=null,gt.flags|=2),ls(gt,Ct,Pt),Yr(gt,Ct,Pt,Nt),Pt=!0;else if(ft===null){var In=gt.stateNode,Zn=gt.memoizedProps;In.props=Zn;var Er=In.context,Gr=Ct.contextType;typeof Gr=="object"&&Gr!==null?Gr=ms(Gr):(Gr=Os(Ct)?Ps:ws.current,Gr=Qs(gt,Gr));var ns=Ct.getDerivedStateFromProps,Is=typeof ns=="function"||typeof In.getSnapshotBeforeUpdate=="function";Is||typeof In.UNSAFE_componentWillReceiveProps!="function"&&typeof In.componentWillReceiveProps!="function"||(Zn!==Pt||Er!==Gr)&&ss(gt,In,Pt,Gr),Zs=!1;var bs=gt.memoizedState;In.state=bs,po(gt,Pt,In,Nt),Er=gt.memoizedState,Zn!==Pt||bs!==Er||$r.current||Zs?(typeof ns=="function"&&(fo(gt,Ct,ns,Pt),Er=gt.memoizedState),(Zn=Zs||qo(gt,Ct,Zn,Pt,bs,Er,Gr))?(Is||typeof In.UNSAFE_componentWillMount!="function"&&typeof In.componentWillMount!="function"||(typeof In.componentWillMount=="function"&&In.componentWillMount(),typeof In.UNSAFE_componentWillMount=="function"&&In.UNSAFE_componentWillMount()),typeof In.componentDidMount=="function"&&(gt.flags|=4194308)):(typeof In.componentDidMount=="function"&&(gt.flags|=4194308),gt.memoizedProps=Pt,gt.memoizedState=Er),In.props=Pt,In.state=Er,In.context=Gr,Pt=Zn):(typeof In.componentDidMount=="function"&&(gt.flags|=4194308),Pt=!1)}else{In=gt.stateNode,ho(ft,gt),Zn=gt.memoizedProps,Gr=gt.type===gt.elementType?Zn:rs(gt.type,Zn),In.props=Gr,Is=gt.pendingProps,bs=In.context,Er=Ct.contextType,typeof Er=="object"&&Er!==null?Er=ms(Er):(Er=Os(Ct)?Ps:ws.current,Er=Qs(gt,Er));var so=Ct.getDerivedStateFromProps;(ns=typeof so=="function"||typeof In.getSnapshotBeforeUpdate=="function")||typeof In.UNSAFE_componentWillReceiveProps!="function"&&typeof In.componentWillReceiveProps!="function"||(Zn!==Is||bs!==Er)&&ss(gt,In,Pt,Er),Zs=!1,bs=gt.memoizedState,In.state=bs,po(gt,Pt,In,Nt);var ps=gt.memoizedState;Zn!==Is||bs!==ps||$r.current||Zs?(typeof so=="function"&&(fo(gt,Ct,so,Pt),ps=gt.memoizedState),(Gr=Zs||qo(gt,Ct,Gr,Pt,bs,ps,Er)||!1)?(ns||typeof In.UNSAFE_componentWillUpdate!="function"&&typeof In.componentWillUpdate!="function"||(typeof In.componentWillUpdate=="function"&&In.componentWillUpdate(Pt,ps,Er),typeof In.UNSAFE_componentWillUpdate=="function"&&In.UNSAFE_componentWillUpdate(Pt,ps,Er)),typeof In.componentDidUpdate=="function"&&(gt.flags|=4),typeof In.getSnapshotBeforeUpdate=="function"&&(gt.flags|=1024)):(typeof In.componentDidUpdate!="function"||Zn===ft.memoizedProps&&bs===ft.memoizedState||(gt.flags|=4),typeof In.getSnapshotBeforeUpdate!="function"||Zn===ft.memoizedProps&&bs===ft.memoizedState||(gt.flags|=1024),gt.memoizedProps=Pt,gt.memoizedState=ps),In.props=Pt,In.state=ps,In.context=Er,Pt=Gr):(typeof In.componentDidUpdate!="function"||Zn===ft.memoizedProps&&bs===ft.memoizedState||(gt.flags|=4),typeof In.getSnapshotBeforeUpdate!="function"||Zn===ft.memoizedProps&&bs===ft.memoizedState||(gt.flags|=1024),Pt=!1)}return $p(ft,gt,Ct,Pt,Zt,Nt)}function $p(ft,gt,Ct,Pt,Nt,Zt){gv(ft,gt);var In=(gt.flags&128)!==0;if(!Pt&&!In)return Nt&&cs(gt,Ct,!1),Il(ft,gt,Zt);Pt=gt.stateNode,V0.current=gt;var Zn=In&&typeof Ct.getDerivedStateFromError!="function"?null:Pt.render();return gt.flags|=1,ft!==null&&In?(gt.child=Nl(gt,ft.child,null,Zt),gt.child=Nl(gt,null,Zn,Zt)):ko(ft,gt,Zn,Zt),gt.memoizedState=Pt.state,Nt&&cs(gt,Ct,!0),gt.child}function yv(ft){var gt=ft.stateNode;gt.pendingContext?us(ft,gt.pendingContext,gt.pendingContext!==gt.context):gt.context&&us(ft,gt.context,!1),Ru(ft,gt.containerInfo)}function _v(ft,gt,Ct,Pt,Nt){return yo(),mu(Nt),gt.flags|=256,ko(ft,gt,Ct,Pt),gt.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function ep(ft){return{baseLanes:ft,cachePool:null}}function xv(ft,gt,Ct){var Pt=gt.pendingProps,Nt=ao.current,Zt=!1,In=(gt.flags&128)!==0,Zn;if((Zn=In)||(Zn=ft!==null&&ft.memoizedState===null?!1:(Nt&2)!==0),Zn?(Zt=!0,gt.flags&=-129):(ft===null||ft.memoizedState!==null)&&(Nt|=1),zr(ao,Nt&1),ft===null)return xl(gt),ft=gt.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null)?(gt.mode&1?Or(ft)?gt.lanes=8:gt.lanes=1073741824:gt.lanes=1,null):(Nt=Pt.children,ft=Pt.fallback,Zt?(Pt=gt.mode,Zt=gt.child,Nt={mode:"hidden",children:Nt},!(Pt&1)&&Zt!==null?(Zt.childLanes=0,Zt.pendingProps=Nt):Zt=xp(Nt,Pt,0,null),ft=du(ft,Pt,Ct,null),Zt.return=gt,ft.return=gt,Zt.sibling=ft,gt.child=Zt,gt.child.memoizedState=ep(Ct),gt.memoizedState=_f,ft):Vp(gt,Nt));if(Nt=ft.memoizedState,Nt!==null){if(Zn=Nt.dehydrated,Zn!==null){if(In)return gt.flags&256?(gt.flags&=-257,tp(ft,gt,Ct,Error(st(422)))):gt.memoizedState!==null?(gt.child=ft.child,gt.flags|=128,null):(Zt=Pt.fallback,Nt=gt.mode,Pt=xp({mode:"visible",children:Pt.children},Nt,0,null),Zt=du(Zt,Nt,Ct,null),Zt.flags|=2,Pt.return=gt,Zt.return=gt,Pt.sibling=Zt,gt.child=Pt,gt.mode&1&&Nl(gt,ft.child,null,Ct),gt.child.memoizedState=ep(Ct),gt.memoizedState=_f,Zt);if(!(gt.mode&1))gt=tp(ft,gt,Ct,null);else if(Or(Zn))gt=tp(ft,gt,Ct,Error(st(419)));else if(Pt=(Ct&ft.childLanes)!==0,jo||Pt){if(Pt=xo,Pt!==null){switch(Ct&-Ct){case 4:Zt=2;break;case 16:Zt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Zt=32;break;case 536870912:Zt=268435456;break;default:Zt=0}Pt=Zt&(Pt.suspendedLanes|Ct)?0:Zt,Pt!==0&&Pt!==Nt.retryLane&&(Nt.retryLane=Pt,na(ft,Pt,-1))}lm(),gt=tp(ft,gt,Ct,Error(st(421)))}else vr(Zn)?(gt.flags|=128,gt.child=ft.child,gt=ty.bind(null,ft),Fr(Zn,gt),gt=null):(Ct=Nt.treeContext,nn&&(Bs=Ur(Zn),Ys=gt,As=!0,Ls=null,oo=!1,Ct!==null&&(jr[Nr++]=xs,jr[Nr++]=$s,jr[Nr++]=gs,xs=Ct.id,$s=Ct.overflow,gs=gt)),gt=Vp(gt,gt.pendingProps.children),gt.flags|=4096);return gt}return Zt?(Pt=Ev(ft,gt,Pt.children,Pt.fallback,Ct),Zt=gt.child,Nt=ft.child.memoizedState,Zt.memoizedState=Nt===null?ep(Ct):{baseLanes:Nt.baseLanes|Ct,cachePool:null},Zt.childLanes=ft.childLanes&~Ct,gt.memoizedState=_f,Pt):(Ct=Sv(ft,gt,Pt.children,Ct),gt.memoizedState=null,Ct)}return Zt?(Pt=Ev(ft,gt,Pt.children,Pt.fallback,Ct),Zt=gt.child,Nt=ft.child.memoizedState,Zt.memoizedState=Nt===null?ep(Ct):{baseLanes:Nt.baseLanes|Ct,cachePool:null},Zt.childLanes=ft.childLanes&~Ct,gt.memoizedState=_f,Pt):(Ct=Sv(ft,gt,Pt.children,Ct),gt.memoizedState=null,Ct)}function Vp(ft,gt){return gt=xp({mode:"visible",children:gt},ft.mode,0,null),gt.return=ft,ft.child=gt}function Sv(ft,gt,Ct,Pt){var Nt=ft.child;return ft=Nt.sibling,Ct=Yl(Nt,{mode:"visible",children:Ct}),!(gt.mode&1)&&(Ct.lanes=Pt),Ct.return=gt,Ct.sibling=null,ft!==null&&(Pt=gt.deletions,Pt===null?(gt.deletions=[ft],gt.flags|=16):Pt.push(ft)),gt.child=Ct}function Ev(ft,gt,Ct,Pt,Nt){var Zt=gt.mode;ft=ft.child;var In=ft.sibling,Zn={mode:"hidden",children:Ct};return!(Zt&1)&&gt.child!==ft?(Ct=gt.child,Ct.childLanes=0,Ct.pendingProps=Zn,gt.deletions=null):(Ct=Yl(ft,Zn),Ct.subtreeFlags=ft.subtreeFlags&14680064),In!==null?Pt=Yl(In,Pt):(Pt=du(Pt,Zt,Nt,null),Pt.flags|=2),Pt.return=gt,Ct.return=gt,Ct.sibling=Pt,gt.child=Ct,Pt}function tp(ft,gt,Ct,Pt){return Pt!==null&&mu(Pt),Nl(gt,ft.child,null,Ct),ft=Vp(gt,gt.pendingProps.children),ft.flags|=2,gt.memoizedState=null,ft}function Av(ft,gt,Ct){ft.lanes|=gt;var Pt=ft.alternate;Pt!==null&&(Pt.lanes|=gt),_s(ft.return,gt,Ct)}function zp(ft,gt,Ct,Pt,Nt){var Zt=ft.memoizedState;Zt===null?ft.memoizedState={isBackwards:gt,rendering:null,renderingStartTime:0,last:Pt,tail:Ct,tailMode:Nt}:(Zt.isBackwards=gt,Zt.rendering=null,Zt.renderingStartTime=0,Zt.last=Pt,Zt.tail=Ct,Zt.tailMode=Nt)}function bv(ft,gt,Ct){var Pt=gt.pendingProps,Nt=Pt.revealOrder,Zt=Pt.tail;if(ko(ft,gt,Pt.children,Ct),Pt=ao.current,Pt&2)Pt=Pt&1|2,gt.flags|=128;else{if(ft!==null&&ft.flags&128)e:for(ft=gt.child;ft!==null;){if(ft.tag===13)ft.memoizedState!==null&&Av(ft,Ct,gt);else if(ft.tag===19)Av(ft,Ct,gt);else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===gt)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===gt)break e;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}Pt&=1}if(zr(ao,Pt),!(gt.mode&1))gt.memoizedState=null;else switch(Nt){case"forwards":for(Ct=gt.child,Nt=null;Ct!==null;)ft=Ct.alternate,ft!==null&&$l(ft)===null&&(Nt=Ct),Ct=Ct.sibling;Ct=Nt,Ct===null?(Nt=gt.child,gt.child=null):(Nt=Ct.sibling,Ct.sibling=null),zp(gt,!1,Nt,Ct,Zt);break;case"backwards":for(Ct=null,Nt=gt.child,gt.child=null;Nt!==null;){if(ft=Nt.alternate,ft!==null&&$l(ft)===null){gt.child=Nt;break}ft=Nt.sibling,Nt.sibling=Ct,Ct=Nt,Nt=ft}zp(gt,!0,Ct,null,Zt);break;case"together":zp(gt,!1,null,null,void 0);break;default:gt.memoizedState=null}return gt.child}function Il(ft,gt,Ct){if(ft!==null&&(gt.dependencies=ft.dependencies),Eu|=gt.lanes,!(Ct&gt.childLanes))return null;if(ft!==null&&gt.child!==ft.child)throw Error(st(153));if(gt.child!==null){for(ft=gt.child,Ct=Yl(ft,ft.pendingProps),gt.child=Ct,Ct.return=gt;ft.sibling!==null;)ft=ft.sibling,Ct=Ct.sibling=Yl(ft,ft.pendingProps),Ct.return=gt;Ct.sibling=null}return gt.child}function z0(ft,gt,Ct){switch(gt.tag){case 3:yv(gt),yo();break;case 5:qu(gt);break;case 1:Os(gt.type)&&Ns(gt);break;case 4:Ru(gt,gt.stateNode.containerInfo);break;case 10:os(gt,gt.type._context,gt.memoizedProps.value);break;case 13:var Pt=gt.memoizedState;if(Pt!==null)return Pt.dehydrated!==null?(zr(ao,ao.current&1),gt.flags|=128,null):Ct&gt.child.childLanes?xv(ft,gt,Ct):(zr(ao,ao.current&1),ft=Il(ft,gt,Ct),ft!==null?ft.sibling:null);zr(ao,ao.current&1);break;case 19:if(Pt=(Ct&gt.childLanes)!==0,ft.flags&128){if(Pt)return bv(ft,gt,Ct);gt.flags|=128}var Nt=gt.memoizedState;if(Nt!==null&&(Nt.rendering=null,Nt.tail=null,Nt.lastEffect=null),zr(ao,ao.current),Pt)break;return null;case 22:case 23:return gt.lanes=0,mv(ft,gt,Ct)}return Il(ft,gt,Ct)}function H0(ft,gt){switch(Es(gt),gt.tag){case 1:return Os(gt.type)&&Ws(),ft=gt.flags,ft&65536?(gt.flags=ft&-65537|128,gt):null;case 3:return Bo(),Qr($r),Qr(ws),yu(),ft=gt.flags,ft&65536&&!(ft&128)?(gt.flags=ft&-65537|128,gt):null;case 5:return gu(gt),null;case 13:if(Qr(ao),ft=gt.memoizedState,ft!==null&&ft.dehydrated!==null){if(gt.alternate===null)throw Error(st(340));yo()}return ft=gt.flags,ft&65536?(gt.flags=ft&-65537|128,gt):null;case 19:return Qr(ao),null;case 4:return Bo(),null;case 10:return ys(gt.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var np=!1,ou=!1,j0=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function rp(ft,gt){var Ct=ft.ref;if(Ct!==null)if(typeof Ct=="function")try{Ct(null)}catch(Pt){Vo(ft,gt,Pt)}else Ct.current=null}function Hp(ft,gt,Ct){try{Ct()}catch(Pt){Vo(ft,gt,Pt)}}var wv=!1;function W0(ft,gt){for(kt(ft.containerInfo),Kr=gt;Kr!==null;)if(ft=Kr,gt=ft.child,(ft.subtreeFlags&1028)!==0&&gt!==null)gt.return=ft,Kr=gt;else for(;Kr!==null;){ft=Kr;try{var Ct=ft.alternate;if(ft.flags&1024)switch(ft.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Pt=Ct.memoizedProps,Nt=Ct.memoizedState,Zt=ft.stateNode,In=Zt.getSnapshotBeforeUpdate(ft.elementType===ft.type?Pt:rs(ft.type,Pt),Nt);Zt.__reactInternalSnapshotBeforeUpdate=In}break;case 3:En&&Gn(ft.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(Zn){Vo(ft,ft.return,Zn)}if(gt=ft.sibling,gt!==null){gt.return=ft.return,Kr=gt;break}Kr=ft.return}return Ct=wv,wv=!1,Ct}function au(ft,gt,Ct){var Pt=gt.updateQueue;if(Pt=Pt!==null?Pt.lastEffect:null,Pt!==null){var Nt=Pt=Pt.next;do{if((Nt.tag&ft)===ft){var Zt=Nt.destroy;Nt.destroy=void 0,Zt!==void 0&&Hp(gt,Ct,Zt)}Nt=Nt.next}while(Nt!==Pt)}}function Bu(ft,gt){if(gt=gt.updateQueue,gt=gt!==null?gt.lastEffect:null,gt!==null){var Ct=gt=gt.next;do{if((Ct.tag&ft)===ft){var Pt=Ct.create;Ct.destroy=Pt()}Ct=Ct.next}while(Ct!==gt)}}function jp(ft){var gt=ft.ref;if(gt!==null){var Ct=ft.stateNode;switch(ft.tag){case 5:ft=Wt(Ct);break;default:ft=Ct}typeof gt=="function"?gt(ft):gt.current=ft}}function Cv(ft,gt,Ct){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Dn,gt)}catch{}switch(gt.tag){case 0:case 11:case 14:case 15:if(ft=gt.updateQueue,ft!==null&&(ft=ft.lastEffect,ft!==null)){var Pt=ft=ft.next;do{var Nt=Pt,Zt=Nt.destroy;Nt=Nt.tag,Zt!==void 0&&(Nt&2||Nt&4)&&Hp(gt,Ct,Zt),Pt=Pt.next}while(Pt!==ft)}break;case 1:if(rp(gt,Ct),ft=gt.stateNode,typeof ft.componentWillUnmount=="function")try{ft.props=gt.memoizedProps,ft.state=gt.memoizedState,ft.componentWillUnmount()}catch(In){Vo(gt,Ct,In)}break;case 5:rp(gt,Ct);break;case 4:En?Iv(ft,gt,Ct):fn&&fn&&(gt=gt.stateNode.containerInfo,Ct=pr(gt),un(gt,Ct))}}function Mv(ft,gt,Ct){for(var Pt=gt;;)if(Cv(ft,Pt,Ct),Pt.child===null||En&&Pt.tag===4){if(Pt===gt)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===gt)return;Pt=Pt.return}Pt.sibling.return=Pt.return,Pt=Pt.sibling}else Pt.child.return=Pt,Pt=Pt.child}function Tv(ft){var gt=ft.alternate;gt!==null&&(ft.alternate=null,Tv(gt)),ft.child=null,ft.deletions=null,ft.sibling=null,ft.tag===5&&(gt=ft.stateNode,gt!==null&&_n(gt)),ft.stateNode=null,ft.return=null,ft.dependencies=null,ft.memoizedProps=null,ft.memoizedState=null,ft.pendingProps=null,ft.stateNode=null,ft.updateQueue=null}function Rv(ft){return ft.tag===5||ft.tag===3||ft.tag===4}function Pv(ft){e:for(;;){for(;ft.sibling===null;){if(ft.return===null||Rv(ft.return))return null;ft=ft.return}for(ft.sibling.return=ft.return,ft=ft.sibling;ft.tag!==5&&ft.tag!==6&&ft.tag!==18;){if(ft.flags&2||ft.child===null||ft.tag===4)continue e;ft.child.return=ft,ft=ft.child}if(!(ft.flags&2))return ft.stateNode}}function Lv(ft){if(En){e:{for(var gt=ft.return;gt!==null;){if(Rv(gt))break e;gt=gt.return}throw Error(st(160))}var Ct=gt;switch(Ct.tag){case 5:gt=Ct.stateNode,Ct.flags&32&&(Rn(gt),Ct.flags&=-33),Ct=Pv(ft),Xp(ft,Ct,gt);break;case 3:case 4:gt=Ct.stateNode.containerInfo,Ct=Pv(ft),Wp(ft,Ct,gt);break;default:throw Error(st(161))}}}function Wp(ft,gt,Ct){var Pt=ft.tag;if(Pt===5||Pt===6)ft=ft.stateNode,gt?lr(Ct,ft,gt):cr(Ct,ft);else if(Pt!==4&&(ft=ft.child,ft!==null))for(Wp(ft,gt,Ct),ft=ft.sibling;ft!==null;)Wp(ft,gt,Ct),ft=ft.sibling}function Xp(ft,gt,Ct){var Pt=ft.tag;if(Pt===5||Pt===6)ft=ft.stateNode,gt?dr(Ct,ft,gt):er(Ct,ft);else if(Pt!==4&&(ft=ft.child,ft!==null))for(Xp(ft,gt,Ct),ft=ft.sibling;ft!==null;)Xp(ft,gt,Ct),ft=ft.sibling}function Iv(ft,gt,Ct){for(var Pt=gt,Nt=!1,Zt,In;;){if(!Nt){Nt=Pt.return;e:for(;;){if(Nt===null)throw Error(st(160));switch(Zt=Nt.stateNode,Nt.tag){case 5:In=!1;break e;case 3:Zt=Zt.containerInfo,In=!0;break e;case 4:Zt=Zt.containerInfo,In=!0;break e}Nt=Nt.return}Nt=!0}if(Pt.tag===5||Pt.tag===6)Mv(ft,Pt,Ct),In?bn(Zt,Pt.stateNode):Nn(Zt,Pt.stateNode);else if(Pt.tag===18)In?kn(Zt,Pt.stateNode):On(Zt,Pt.stateNode);else if(Pt.tag===4){if(Pt.child!==null){Zt=Pt.stateNode.containerInfo,In=!0,Pt.child.return=Pt,Pt=Pt.child;continue}}else if(Cv(ft,Pt,Ct),Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===gt)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===gt)return;Pt=Pt.return,Pt.tag===4&&(Nt=!1)}Pt.sibling.return=Pt.return,Pt=Pt.sibling}}function Kp(ft,gt){if(En){switch(gt.tag){case 0:case 11:case 14:case 15:au(3,gt,gt.return),Bu(3,gt),au(5,gt,gt.return);return;case 1:return;case 5:var Ct=gt.stateNode;if(Ct!=null){var Pt=gt.memoizedProps;ft=ft!==null?ft.memoizedProps:Pt;var Nt=gt.type,Zt=gt.updateQueue;gt.updateQueue=null,Zt!==null&&fr(Ct,Zt,Nt,ft,Pt,gt)}return;case 6:if(gt.stateNode===null)throw Error(st(162));Ct=gt.memoizedProps,ir(gt.stateNode,ft!==null?ft.memoizedProps:Ct,Ct);return;case 3:nn&&ft!==null&&ft.memoizedState.isDehydrated&&tn(gt.stateNode.containerInfo);return;case 12:return;case 13:ip(gt);return;case 19:ip(gt);return;case 17:return}throw Error(st(163))}switch(gt.tag){case 0:case 11:case 14:case 15:au(3,gt,gt.return),Bu(3,gt),au(5,gt,gt.return);return;case 12:return;case 13:ip(gt);return;case 19:ip(gt);return;case 3:nn&&ft!==null&&ft.memoizedState.isDehydrated&&tn(gt.stateNode.containerInfo);break;case 22:case 23:return}e:if(fn){switch(gt.tag){case 1:case 5:case 6:break e;case 3:case 4:gt=gt.stateNode,un(gt.containerInfo,gt.pendingChildren);break e}throw Error(st(163))}}function ip(ft){var gt=ft.updateQueue;if(gt!==null){ft.updateQueue=null;var Ct=ft.stateNode;Ct===null&&(Ct=ft.stateNode=new j0),gt.forEach(function(Pt){var Nt=ny.bind(null,ft,Pt);Ct.has(Pt)||(Ct.add(Pt),Pt.then(Nt,Nt))})}}function X0(ft,gt){for(Kr=gt;Kr!==null;){gt=Kr;var Ct=gt.deletions;if(Ct!==null)for(var Pt=0;Pt<Ct.length;Pt++){var Nt=Ct[Pt];try{var Zt=ft;En?Iv(Zt,Nt,gt):Mv(Zt,Nt,gt);var In=Nt.alternate;In!==null&&(In.return=null),Nt.return=null}catch(hs){Vo(Nt,gt,hs)}}if(Ct=gt.child,gt.subtreeFlags&12854&&Ct!==null)Ct.return=gt,Kr=Ct;else for(;Kr!==null;){gt=Kr;try{var Zn=gt.flags;if(Zn&32&&En&&Rn(gt.stateNode),Zn&512){var Er=gt.alternate;if(Er!==null){var Gr=Er.ref;Gr!==null&&(typeof Gr=="function"?Gr(null):Gr.current=null)}}if(Zn&8192)switch(gt.tag){case 13:if(gt.memoizedState!==null){var ns=gt.alternate;(ns===null||ns.memoizedState===null)&&(tm=co())}break;case 22:var Is=gt.memoizedState!==null,bs=gt.alternate,so=bs!==null&&bs.memoizedState!==null;if(Ct=gt,En){e:if(Pt=Ct,Nt=Is,Zt=null,En)for(var ps=Pt;;){if(ps.tag===5){if(Zt===null){Zt=ps;var Io=ps.stateNode;Nt?Sn(Io):xn(ps.stateNode,ps.memoizedProps)}}else if(ps.tag===6){if(Zt===null){var xa=ps.stateNode;Nt?or(xa):on(xa,ps.memoizedProps)}}else if((ps.tag!==22&&ps.tag!==23||ps.memoizedState===null||ps===Pt)&&ps.child!==null){ps.child.return=ps,ps=ps.child;continue}if(ps===Pt)break;for(;ps.sibling===null;){if(ps.return===null||ps.return===Pt)break e;Zt===ps&&(Zt=null),ps=ps.return}Zt===ps&&(Zt=null),ps.sibling.return=ps.return,ps=ps.sibling}}if(Is&&!so&&Ct.mode&1){Kr=Ct;for(var mr=Ct.child;mr!==null;){for(Ct=Kr=mr;Kr!==null;){Pt=Kr;var sr=Pt.child;switch(Pt.tag){case 0:case 11:case 14:case 15:au(4,Pt,Pt.return);break;case 1:rp(Pt,Pt.return);var yr=Pt.stateNode;if(typeof yr.componentWillUnmount=="function"){var Jr=Pt.return;try{yr.props=Pt.memoizedProps,yr.state=Pt.memoizedState,yr.componentWillUnmount()}catch(hs){Vo(Pt,Jr,hs)}}break;case 5:rp(Pt,Pt.return);break;case 22:if(Pt.memoizedState!==null){Bv(Ct);continue}}sr!==null?(sr.return=Pt,Kr=sr):Bv(Ct)}mr=mr.sibling}}}switch(Zn&4102){case 2:Lv(gt),gt.flags&=-3;break;case 6:Lv(gt),gt.flags&=-3,Kp(gt.alternate,gt);break;case 4096:gt.flags&=-4097;break;case 4100:gt.flags&=-4097,Kp(gt.alternate,gt);break;case 4:Kp(gt.alternate,gt)}}catch(hs){Vo(gt,gt.return,hs)}if(Ct=gt.sibling,Ct!==null){Ct.return=gt.return,Kr=Ct;break}Kr=gt.return}}}function K0(ft,gt,Ct){Kr=ft,Dv(ft)}function Dv(ft,gt,Ct){for(var Pt=(ft.mode&1)!==0;Kr!==null;){var Nt=Kr,Zt=Nt.child;if(Nt.tag===22&&Pt){var In=Nt.memoizedState!==null||np;if(!In){var Zn=Nt.alternate,Er=Zn!==null&&Zn.memoizedState!==null||ou;Zn=np;var Gr=ou;if(np=In,(ou=Er)&&!Gr)for(Kr=Nt;Kr!==null;)In=Kr,Er=In.child,In.tag===22&&In.memoizedState!==null?kv(Nt):Er!==null?(Er.return=In,Kr=Er):kv(Nt);for(;Zt!==null;)Kr=Zt,Dv(Zt),Zt=Zt.sibling;Kr=Nt,np=Zn,ou=Gr}Fv(ft)}else Nt.subtreeFlags&8772&&Zt!==null?(Zt.return=Nt,Kr=Zt):Fv(ft)}}function Fv(ft){for(;Kr!==null;){var gt=Kr;if(gt.flags&8772){var Ct=gt.alternate;try{if(gt.flags&8772)switch(gt.tag){case 0:case 11:case 15:ou||Bu(5,gt);break;case 1:var Pt=gt.stateNode;if(gt.flags&4&&!ou)if(Ct===null)Pt.componentDidMount();else{var Nt=gt.elementType===gt.type?Ct.memoizedProps:rs(gt.type,Ct.memoizedProps);Pt.componentDidUpdate(Nt,Ct.memoizedState,Pt.__reactInternalSnapshotBeforeUpdate)}var Zt=gt.updateQueue;Zt!==null&&Ho(gt,Zt,Pt);break;case 3:var In=gt.updateQueue;if(In!==null){if(Ct=null,gt.child!==null)switch(gt.child.tag){case 5:Ct=Wt(gt.child.stateNode);break;case 1:Ct=gt.child.stateNode}Ho(gt,In,Ct)}break;case 5:var Zn=gt.stateNode;Ct===null&&gt.flags&4&&Jn(Zn,gt.type,gt.memoizedProps,gt);break;case 6:break;case 4:break;case 12:break;case 13:if(nn&&gt.memoizedState===null){var Er=gt.alternate;if(Er!==null){var Gr=Er.memoizedState;if(Gr!==null){var ns=Gr.dehydrated;ns!==null&&yn(ns)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(st(163))}ou||gt.flags&512&&jp(gt)}catch(Is){Vo(gt,gt.return,Is)}}if(gt===ft){Kr=null;break}if(Ct=gt.sibling,Ct!==null){Ct.return=gt.return,Kr=Ct;break}Kr=gt.return}}function Bv(ft){for(;Kr!==null;){var gt=Kr;if(gt===ft){Kr=null;break}var Ct=gt.sibling;if(Ct!==null){Ct.return=gt.return,Kr=Ct;break}Kr=gt.return}}function kv(ft){for(;Kr!==null;){var gt=Kr;try{switch(gt.tag){case 0:case 11:case 15:var Ct=gt.return;try{Bu(4,gt)}catch(Er){Vo(gt,Ct,Er)}break;case 1:var Pt=gt.stateNode;if(typeof Pt.componentDidMount=="function"){var Nt=gt.return;try{Pt.componentDidMount()}catch(Er){Vo(gt,Nt,Er)}}var Zt=gt.return;try{jp(gt)}catch(Er){Vo(gt,Zt,Er)}break;case 5:var In=gt.return;try{jp(gt)}catch(Er){Vo(gt,In,Er)}}}catch(Er){Vo(gt,gt.return,Er)}if(gt===ft){Kr=null;break}var Zn=gt.sibling;if(Zn!==null){Zn.return=gt.return,Kr=Zn;break}Kr=gt.return}}var sp=0,op=1,ap=2,lp=3,cp=4;if(typeof Symbol=="function"&&Symbol.for){var ku=Symbol.for;sp=ku("selector.component"),op=ku("selector.has_pseudo_class"),ap=ku("selector.role"),lp=ku("selector.test_id"),cp=ku("selector.text")}function Yp(ft){var gt=Tn(ft);if(gt!=null){if(typeof gt.memoizedProps["data-testname"]!="string")throw Error(st(364));return gt}if(ft=Bt(ft),ft===null)throw Error(st(362));return ft.stateNode.current}function qp(ft,gt){switch(gt.$$typeof){case sp:if(ft.type===gt.value)return!0;break;case op:e:{gt=gt.value,ft=[ft,0];for(var Ct=0;Ct<ft.length;){var Pt=ft[Ct++],Nt=ft[Ct++],Zt=gt[Nt];if(Pt.tag!==5||!mn(Pt)){for(;Zt!=null&&qp(Pt,Zt);)Nt++,Zt=gt[Nt];if(Nt===gt.length){gt=!0;break e}else for(Pt=Pt.child;Pt!==null;)ft.push(Pt,Nt),Pt=Pt.sibling}}gt=!1}return gt;case ap:if(ft.tag===5&&an(ft.stateNode,gt.value))return!0;break;case cp:if((ft.tag===5||ft.tag===6)&&(ft=cn(ft),ft!==null&&0<=ft.indexOf(gt.value)))return!0;break;case lp:if(ft.tag===5&&(ft=ft.memoizedProps["data-testname"],typeof ft=="string"&&ft.toLowerCase()===gt.value.toLowerCase()))return!0;break;default:throw Error(st(365))}return!1}function Jp(ft){switch(ft.$$typeof){case sp:return"<"+(Et(ft.value)||"Unknown")+">";case op:return":has("+(Jp(ft)||"")+")";case ap:return'[role="'+ft.value+'"]';case cp:return'"'+ft.value+'"';case lp:return'[data-testname="'+ft.value+'"]';default:throw Error(st(365))}}function Ov(ft,gt){var Ct=[];ft=[ft,0];for(var Pt=0;Pt<ft.length;){var Nt=ft[Pt++],Zt=ft[Pt++],In=gt[Zt];if(Nt.tag!==5||!mn(Nt)){for(;In!=null&&qp(Nt,In);)Zt++,In=gt[Zt];if(Zt===gt.length)Ct.push(Nt);else for(Nt=Nt.child;Nt!==null;)ft.push(Nt,Zt),Nt=Nt.sibling}}return Ct}function Qp(ft,gt){if(!jt)throw Error(st(363));ft=Yp(ft),ft=Ov(ft,gt),gt=[],ft=Array.from(ft);for(var Ct=0;Ct<ft.length;){var Pt=ft[Ct++];if(Pt.tag===5)mn(Pt)||gt.push(Pt.stateNode);else for(Pt=Pt.child;Pt!==null;)ft.push(Pt),Pt=Pt.sibling}return gt}var Y0=Math.ceil,up=ot.ReactCurrentDispatcher,Zp=ot.ReactCurrentOwner,vo=ot.ReactCurrentBatchConfig,Gs=0,xo=null,So=null,To=0,Wo=0,Su=ts(0),Ao=0,Ou=null,Eu=0,dp=0,em=0,Nu=null,Go=null,tm=0,nm=1/0;function Au(){nm=co()+500}var hp=!1,rm=null,Hl=null,fp=!1,Wl=null,pp=0,Uu=0,im=null,mp=-1,gp=0;function Oo(){return Gs&6?co():mp!==-1?mp:mp=co()}function Xl(ft){return ft.mode&1?Gs&2&&To!==0?To&-To:Dr.transition!==null?(gp===0&&(ft=Xo,Xo<<=1,!(Xo&4194240)&&(Xo=64),gp=ft),gp):(ft=Fs,ft!==0?ft:vn()):1}function na(ft,gt,Ct){if(50<Uu)throw Uu=0,im=null,Error(st(185));var Pt=vp(ft,gt);return Pt===null?null:(zo(Pt,gt,Ct),(!(Gs&2)||Pt!==xo)&&(Pt===xo&&(!(Gs&2)&&(dp|=gt),Ao===4&&Kl(Pt,To)),$o(Pt,Ct),gt===1&&Gs===0&&!(ft.mode&1)&&(Au(),Kn&&gr())),Pt)}function vp(ft,gt){ft.lanes|=gt;var Ct=ft.alternate;for(Ct!==null&&(Ct.lanes|=gt),Ct=ft,ft=ft.return;ft!==null;)ft.childLanes|=gt,Ct=ft.alternate,Ct!==null&&(Ct.childLanes|=gt),Ct=ft,ft=ft.return;return Ct.tag===3?Ct.stateNode:null}function $o(ft,gt){var Ct=ft.callbackNode;Ql(ft,gt);var Pt=yl(ft,ft===xo?To:0);if(Pt===0)Ct!==null&&Ml(Ct),ft.callbackNode=null,ft.callbackPriority=0;else if(gt=Pt&-Pt,ft.callbackPriority!==gt){if(Ct!=null&&Ml(Ct),gt===1)ft.tag===0?_r(Uv.bind(null,ft)):Sr(Uv.bind(null,ft)),Qt?sn(function(){Gs===0&&gr()}):Yo(Rl,gr),Ct=null;else{switch(Zl(Pt)){case 1:Ct=Rl;break;case 4:Ct=Xt;break;case 16:Ct=ln;break;case 536870912:Ct=wn;break;default:Ct=ln}Ct=Kv(Ct,Nv.bind(null,ft))}ft.callbackPriority=gt,ft.callbackNode=Ct}}function Nv(ft,gt){if(mp=-1,gp=0,Gs&6)throw Error(st(327));var Ct=ft.callbackNode;if(uu()&&ft.callbackNode!==Ct)return null;var Pt=yl(ft,ft===xo?To:0);if(Pt===0)return null;if(Pt&30||Pt&ft.expiredLanes||gt)gt=yp(ft,Pt);else{gt=Pt;var Nt=Gs;Gs|=2;var Zt=Vv();(xo!==ft||To!==gt)&&(Au(),lu(ft,gt));do try{Q0();break}catch(Zn){$v(ft,Zn)}while(!0);as(),up.current=Zt,Gs=Nt,So!==null?gt=0:(xo=null,To=0,gt=Ao)}if(gt!==0){if(gt===2&&(Nt=Ro(ft),Nt!==0&&(Pt=Nt,gt=sm(ft,Nt))),gt===1)throw Ct=Ou,lu(ft,0),Kl(ft,Pt),$o(ft,co()),Ct;if(gt===6)Kl(ft,Pt);else{if(Nt=ft.current.alternate,!(Pt&30)&&!q0(Nt)&&(gt=yp(ft,Pt),gt===2&&(Zt=Ro(ft),Zt!==0&&(Pt=Zt,gt=sm(ft,Zt))),gt===1))throw Ct=Ou,lu(ft,0),Kl(ft,Pt),$o(ft,co()),Ct;switch(ft.finishedWork=Nt,ft.finishedLanes=Pt,gt){case 0:case 1:throw Error(st(345));case 2:cu(ft,Go);break;case 3:if(Kl(ft,Pt),(Pt&130023424)===Pt&&(gt=tm+500-co(),10<gt)){if(yl(ft,0)!==0)break;if(Nt=ft.suspendedLanes,(Nt&Pt)!==Pt){Oo(),ft.pingedLanes|=ft.suspendedLanes&Nt;break}ft.timeoutHandle=qt(cu.bind(null,ft,Go),gt);break}cu(ft,Go);break;case 4:if(Kl(ft,Pt),(Pt&4194240)===Pt)break;for(gt=ft.eventTimes,Nt=-1;0<Pt;){var In=31-Xs(Pt);Zt=1<<In,In=gt[In],In>Nt&&(Nt=In),Pt&=~Zt}if(Pt=Nt,Pt=co()-Pt,Pt=(120>Pt?120:480>Pt?480:1080>Pt?1080:1920>Pt?1920:3e3>Pt?3e3:4320>Pt?4320:1960*Y0(Pt/1960))-Pt,10<Pt){ft.timeoutHandle=qt(cu.bind(null,ft,Go),Pt);break}cu(ft,Go);break;case 5:cu(ft,Go);break;default:throw Error(st(329))}}}return $o(ft,co()),ft.callbackNode===Ct?Nv.bind(null,ft):null}function sm(ft,gt){var Ct=Nu;return ft.current.memoizedState.isDehydrated&&(lu(ft,gt).flags|=256),ft=yp(ft,gt),ft!==2&&(gt=Go,Go=Ct,gt!==null&&om(gt)),ft}function om(ft){Go===null?Go=ft:Go.push.apply(Go,ft)}function q0(ft){for(var gt=ft;;){if(gt.flags&16384){var Ct=gt.updateQueue;if(Ct!==null&&(Ct=Ct.stores,Ct!==null))for(var Pt=0;Pt<Ct.length;Pt++){var Nt=Ct[Pt],Zt=Nt.getSnapshot;Nt=Nt.value;try{if(!Vn(Zt(),Nt))return!1}catch{return!1}}}if(Ct=gt.child,gt.subtreeFlags&16384&&Ct!==null)Ct.return=gt,gt=Ct;else{if(gt===ft)break;for(;gt.sibling===null;){if(gt.return===null||gt.return===ft)return!0;gt=gt.return}gt.sibling.return=gt.return,gt=gt.sibling}}return!0}function Kl(ft,gt){for(gt&=~em,gt&=~dp,ft.suspendedLanes|=gt,ft.pingedLanes&=~gt,ft=ft.expirationTimes;0<gt;){var Ct=31-Xs(gt),Pt=1<<Ct;ft[Ct]=-1,gt&=~Pt}}function Uv(ft){if(Gs&6)throw Error(st(327));uu();var gt=yl(ft,0);if(!(gt&1))return $o(ft,co()),null;var Ct=yp(ft,gt);if(ft.tag!==0&&Ct===2){var Pt=Ro(ft);Pt!==0&&(gt=Pt,Ct=sm(ft,Pt))}if(Ct===1)throw Ct=Ou,lu(ft,0),Kl(ft,gt),$o(ft,co()),Ct;if(Ct===6)throw Error(st(345));return ft.finishedWork=ft.current.alternate,ft.finishedLanes=gt,cu(ft,Go),$o(ft,co()),null}function Gv(ft){Wl!==null&&Wl.tag===0&&!(Gs&6)&&uu();var gt=Gs;Gs|=1;var Ct=vo.transition,Pt=Fs;try{if(vo.transition=null,Fs=1,ft)return ft()}finally{Fs=Pt,vo.transition=Ct,Gs=gt,!(Gs&6)&&gr()}}function am(){Wo=Su.current,Qr(Su)}function lu(ft,gt){ft.finishedWork=null,ft.finishedLanes=0;var Ct=ft.timeoutHandle;if(Ct!==gn&&(ft.timeoutHandle=gn,rn(Ct)),So!==null)for(Ct=So.return;Ct!==null;){var Pt=Ct;switch(Es(Pt),Pt.tag){case 1:Pt=Pt.type.childContextTypes,Pt!=null&&Ws();break;case 3:Bo(),Qr($r),Qr(ws),yu();break;case 5:gu(Pt);break;case 4:Bo();break;case 13:Qr(ao);break;case 19:Qr(ao);break;case 10:ys(Pt.type._context);break;case 22:case 23:am()}Ct=Ct.return}if(xo=ft,So=ft=Yl(ft.current,null),To=Wo=gt,Ao=0,Ou=null,em=dp=Eu=0,Go=Nu=null,Ms!==null){for(gt=0;gt<Ms.length;gt++)if(Ct=Ms[gt],Pt=Ct.interleaved,Pt!==null){Ct.interleaved=null;var Nt=Pt.next,Zt=Ct.pending;if(Zt!==null){var In=Zt.next;Zt.next=Nt,Pt.next=In}Ct.pending=Pt}Ms=null}return ft}function $v(ft,gt){do{var Ct=So;try{if(as(),Qo.current=Zu,nu){for(var Pt=lo.memoizedState;Pt!==null;){var Nt=Pt.queue;Nt!==null&&(Nt.pending=null),Pt=Pt.next}nu=!1}if(Vl=0,mo=_o=lo=null,ru=!1,Ll=0,Zp.current=null,Ct===null||Ct.return===null){Ao=1,Ou=gt,So=null;break}e:{var Zt=ft,In=Ct.return,Zn=Ct,Er=gt;if(gt=To,Zn.flags|=32768,Er!==null&&typeof Er=="object"&&typeof Er.then=="function"){var Gr=Er,ns=Zn,Is=ns.tag;if(!(ns.mode&1)&&(Is===0||Is===11||Is===15)){var bs=ns.alternate;bs?(ns.updateQueue=bs.updateQueue,ns.memoizedState=bs.memoizedState,ns.lanes=bs.lanes):(ns.updateQueue=null,ns.memoizedState=null)}var so=lv(In);if(so!==null){so.flags&=-257,cv(so,In,Zn,Zt,gt),so.mode&1&&av(Zt,Gr,gt),gt=so,Er=Gr;var ps=gt.updateQueue;if(ps===null){var Io=new Set;Io.add(Er),gt.updateQueue=Io}else ps.add(Er);break e}else{if(!(gt&1)){av(Zt,Gr,gt),lm();break e}Er=Error(st(426))}}else if(As&&Zn.mode&1){var xa=lv(In);if(xa!==null){!(xa.flags&65536)&&(xa.flags|=256),cv(xa,In,Zn,Zt,gt),mu(Er);break e}}Zt=Er,Ao!==4&&(Ao=2),Nu===null?Nu=[Zt]:Nu.push(Zt),Er=Np(Er,Zn),Zn=In;do{switch(Zn.tag){case 3:Zn.flags|=65536,gt&=-gt,Zn.lanes|=gt;var mr=sv(Zn,Er,gt);io(Zn,mr);break e;case 1:Zt=Er;var sr=Zn.type,yr=Zn.stateNode;if(!(Zn.flags&128)&&(typeof sr.getDerivedStateFromError=="function"||yr!==null&&typeof yr.componentDidCatch=="function"&&(Hl===null||!Hl.has(yr)))){Zn.flags|=65536,gt&=-gt,Zn.lanes|=gt;var Jr=ov(Zn,Zt,gt);io(Zn,Jr);break e}}Zn=Zn.return}while(Zn!==null)}Hv(Ct)}catch(hs){gt=hs,So===Ct&&Ct!==null&&(So=Ct=Ct.return);continue}break}while(!0)}function Vv(){var ft=up.current;return up.current=Zu,ft===null?Zu:ft}function lm(){(Ao===0||Ao===3||Ao===2)&&(Ao=4),xo===null||!(Eu&268435455)&&!(dp&268435455)||Kl(xo,To)}function yp(ft,gt){var Ct=Gs;Gs|=2;var Pt=Vv();xo===ft&&To===gt||lu(ft,gt);do try{J0();break}catch(Nt){$v(ft,Nt)}while(!0);if(as(),Gs=Ct,up.current=Pt,So!==null)throw Error(st(261));return xo=null,To=0,Ao}function J0(){for(;So!==null;)zv(So)}function Q0(){for(;So!==null&&!Tl();)zv(So)}function zv(ft){var gt=Xv(ft.alternate,ft,Wo);ft.memoizedProps=ft.pendingProps,gt===null?Hv(ft):So=gt,Zp.current=null}function Hv(ft){var gt=ft;do{var Ct=gt.alternate;if(ft=gt.return,gt.flags&32768){if(Ct=H0(Ct,gt),Ct!==null){Ct.flags&=32767,So=Ct;return}if(ft!==null)ft.flags|=32768,ft.subtreeFlags=0,ft.deletions=null;else{Ao=6,So=null;return}}else if(Ct=$0(Ct,gt,Wo),Ct!==null){So=Ct;return}if(gt=gt.sibling,gt!==null){So=gt;return}So=gt=ft}while(gt!==null);Ao===0&&(Ao=5)}function cu(ft,gt){var Ct=Fs,Pt=vo.transition;try{vo.transition=null,Fs=1,Z0(ft,gt,Ct)}finally{vo.transition=Pt,Fs=Ct}return null}function Z0(ft,gt,Ct){do uu();while(Wl!==null);if(Gs&6)throw Error(st(327));var Pt=ft.finishedWork,Nt=ft.finishedLanes;if(Pt===null)return null;if(ft.finishedWork=null,ft.finishedLanes=0,Pt===ft.current)throw Error(st(177));ft.callbackNode=null,ft.callbackPriority=0;var Zt=Pt.lanes|Pt.childLanes;if(wl(ft,Zt),ft===xo&&(So=xo=null,To=0),!(Pt.subtreeFlags&2064)&&!(Pt.flags&2064)||fp||(fp=!0,Kv(ln,function(){return uu(),null})),Zt=(Pt.flags&15990)!==0,Pt.subtreeFlags&15990||Zt){Zt=vo.transition,vo.transition=null;var In=Fs;Fs=1;var Zn=Gs;Gs|=4,Zp.current=null,W0(ft,Pt),X0(ft,Pt),Gt(ft.containerInfo),ft.current=Pt,K0(Pt),pu(),Gs=Zn,Fs=In,vo.transition=Zt}else ft.current=Pt;if(fp&&(fp=!1,Wl=ft,pp=Nt),Zt=ft.pendingLanes,Zt===0&&(Hl=null),$n(Pt.stateNode),$o(ft,co()),gt!==null)for(Ct=ft.onRecoverableError,Pt=0;Pt<gt.length;Pt++)Ct(gt[Pt]);if(hp)throw hp=!1,ft=rm,rm=null,ft;return pp&1&&ft.tag!==0&&uu(),Zt=ft.pendingLanes,Zt&1?ft===im?Uu++:(Uu=0,im=ft):Uu=0,gr(),null}function uu(){if(Wl!==null){var ft=Zl(pp),gt=vo.transition,Ct=Fs;try{if(vo.transition=null,Fs=16>ft?16:ft,Wl===null)var Pt=!1;else{if(ft=Wl,Wl=null,pp=0,Gs&6)throw Error(st(331));var Nt=Gs;for(Gs|=4,Kr=ft.current;Kr!==null;){var Zt=Kr,In=Zt.child;if(Kr.flags&16){var Zn=Zt.deletions;if(Zn!==null){for(var Er=0;Er<Zn.length;Er++){var Gr=Zn[Er];for(Kr=Gr;Kr!==null;){var ns=Kr;switch(ns.tag){case 0:case 11:case 15:au(8,ns,Zt)}var Is=ns.child;if(Is!==null)Is.return=ns,Kr=Is;else for(;Kr!==null;){ns=Kr;var bs=ns.sibling,so=ns.return;if(Tv(ns),ns===Gr){Kr=null;break}if(bs!==null){bs.return=so,Kr=bs;break}Kr=so}}}var ps=Zt.alternate;if(ps!==null){var Io=ps.child;if(Io!==null){ps.child=null;do{var xa=Io.sibling;Io.sibling=null,Io=xa}while(Io!==null)}}Kr=Zt}}if(Zt.subtreeFlags&2064&&In!==null)In.return=Zt,Kr=In;else e:for(;Kr!==null;){if(Zt=Kr,Zt.flags&2048)switch(Zt.tag){case 0:case 11:case 15:au(9,Zt,Zt.return)}var mr=Zt.sibling;if(mr!==null){mr.return=Zt.return,Kr=mr;break e}Kr=Zt.return}}var sr=ft.current;for(Kr=sr;Kr!==null;){In=Kr;var yr=In.child;if(In.subtreeFlags&2064&&yr!==null)yr.return=In,Kr=yr;else e:for(In=sr;Kr!==null;){if(Zn=Kr,Zn.flags&2048)try{switch(Zn.tag){case 0:case 11:case 15:Bu(9,Zn)}}catch(hs){Vo(Zn,Zn.return,hs)}if(Zn===In){Kr=null;break e}var Jr=Zn.sibling;if(Jr!==null){Jr.return=Zn.return,Kr=Jr;break e}Kr=Zn.return}}if(Gs=Nt,gr(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Dn,ft)}catch{}Pt=!0}return Pt}finally{Fs=Ct,vo.transition=gt}}return!1}function jv(ft,gt,Ct){gt=Np(Ct,gt),gt=sv(ft,gt,1),Ks(ft,gt),gt=Oo(),ft=vp(ft,1),ft!==null&&(zo(ft,1,gt),$o(ft,gt))}function Vo(ft,gt,Ct){if(ft.tag===3)jv(ft,ft,Ct);else for(;gt!==null;){if(gt.tag===3){jv(gt,ft,Ct);break}else if(gt.tag===1){var Pt=gt.stateNode;if(typeof gt.type.getDerivedStateFromError=="function"||typeof Pt.componentDidCatch=="function"&&(Hl===null||!Hl.has(Pt))){ft=Np(Ct,ft),ft=ov(gt,ft,1),Ks(gt,ft),ft=Oo(),gt=vp(gt,1),gt!==null&&(zo(gt,1,ft),$o(gt,ft));break}}gt=gt.return}}function ey(ft,gt,Ct){var Pt=ft.pingCache;Pt!==null&&Pt.delete(gt),gt=Oo(),ft.pingedLanes|=ft.suspendedLanes&Ct,xo===ft&&(To&Ct)===Ct&&(Ao===4||Ao===3&&(To&130023424)===To&&500>co()-tm?lu(ft,0):em|=Ct),$o(ft,gt)}function Wv(ft,gt){gt===0&&(ft.mode&1?(gt=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):gt=1);var Ct=Oo();ft=vp(ft,gt),ft!==null&&(zo(ft,gt,Ct),$o(ft,Ct))}function ty(ft){var gt=ft.memoizedState,Ct=0;gt!==null&&(Ct=gt.retryLane),Wv(ft,Ct)}function ny(ft,gt){var Ct=0;switch(ft.tag){case 13:var Pt=ft.stateNode,Nt=ft.memoizedState;Nt!==null&&(Ct=Nt.retryLane);break;case 19:Pt=ft.stateNode;break;default:throw Error(st(314))}Pt!==null&&Pt.delete(gt),Wv(ft,Ct)}var Xv;Xv=function(ft,gt,Ct){if(ft!==null)if(ft.memoizedProps!==gt.pendingProps||$r.current)jo=!0;else{if(!(ft.lanes&Ct)&&!(gt.flags&128))return jo=!1,z0(ft,gt,Ct);jo=!!(ft.flags&131072)}else jo=!1,As&&gt.flags&1048576&&go(gt,vs,gt.index);switch(gt.lanes=0,gt.tag){case 2:var Pt=gt.type;ft!==null&&(ft.alternate=null,gt.alternate=null,gt.flags|=2),ft=gt.pendingProps;var Nt=Qs(gt,ws.current);fs(gt,Ct),Nt=Tr(null,gt,Pt,ft,Nt,Ct);var Zt=Ss();return gt.flags|=1,typeof Nt=="object"&&Nt!==null&&typeof Nt.render=="function"&&Nt.$$typeof===void 0?(gt.tag=1,gt.memoizedState=null,gt.updateQueue=null,Os(Pt)?(Zt=!0,Ns(gt)):Zt=!1,gt.memoizedState=Nt.state!==null&&Nt.state!==void 0?Nt.state:null,eo(gt),Nt.updater=Eo,gt.stateNode=Nt,Nt._reactInternals=gt,Yr(gt,Pt,ft,Ct),gt=$p(null,gt,Pt,!0,Zt,Ct)):(gt.tag=0,As&&Zt&&Mo(gt),ko(null,gt,Nt,Ct),gt=gt.child),gt;case 16:Pt=gt.elementType;e:{switch(ft!==null&&(ft.alternate=null,gt.alternate=null,gt.flags|=2),ft=gt.pendingProps,Nt=Pt._init,Pt=Nt(Pt._payload),gt.type=Pt,Nt=gt.tag=iy(Pt),ft=rs(Pt,ft),Nt){case 0:gt=Gp(null,gt,Pt,ft,Ct);break e;case 1:gt=vv(null,gt,Pt,ft,Ct);break e;case 11:gt=hv(null,gt,Pt,ft,Ct);break e;case 14:gt=fv(null,gt,Pt,rs(Pt.type,ft),Ct);break e}throw Error(st(306,Pt,""))}return gt;case 0:return Pt=gt.type,Nt=gt.pendingProps,Nt=gt.elementType===Pt?Nt:rs(Pt,Nt),Gp(ft,gt,Pt,Nt,Ct);case 1:return Pt=gt.type,Nt=gt.pendingProps,Nt=gt.elementType===Pt?Nt:rs(Pt,Nt),vv(ft,gt,Pt,Nt,Ct);case 3:e:{if(yv(gt),ft===null)throw Error(st(387));Pt=gt.pendingProps,Zt=gt.memoizedState,Nt=Zt.element,ho(ft,gt),po(gt,Pt,null,Ct);var In=gt.memoizedState;if(Pt=In.element,nn&&Zt.isDehydrated)if(Zt={element:Pt,isDehydrated:!1,cache:In.cache,transitions:In.transitions},gt.updateQueue.baseState=Zt,gt.memoizedState=Zt,gt.flags&256){Nt=Error(st(423)),gt=_v(ft,gt,Pt,Ct,Nt);break e}else if(Pt!==Nt){Nt=Error(st(424)),gt=_v(ft,gt,Pt,Ct,Nt);break e}else for(nn&&(Bs=Ir(gt.stateNode.containerInfo),Ys=gt,As=!0,Ls=null,oo=!1),Ct=Yu(gt,null,Pt,Ct),gt.child=Ct;Ct;)Ct.flags=Ct.flags&-3|4096,Ct=Ct.sibling;else{if(yo(),Pt===Nt){gt=Il(ft,gt,Ct);break e}ko(ft,gt,Pt,Ct)}gt=gt.child}return gt;case 5:return qu(gt),ft===null&&xl(gt),Pt=gt.type,Nt=gt.pendingProps,Zt=ft!==null?ft.memoizedProps:null,In=Nt.children,Ut(Pt,Nt)?In=null:Zt!==null&&Ut(Pt,Zt)&&(gt.flags|=32),gv(ft,gt),ko(ft,gt,In,Ct),gt.child;case 6:return ft===null&&xl(gt),null;case 13:return xv(ft,gt,Ct);case 4:return Ru(gt,gt.stateNode.containerInfo),Pt=gt.pendingProps,ft===null?gt.child=Nl(gt,null,Pt,Ct):ko(ft,gt,Pt,Ct),gt.child;case 11:return Pt=gt.type,Nt=gt.pendingProps,Nt=gt.elementType===Pt?Nt:rs(Pt,Nt),hv(ft,gt,Pt,Nt,Ct);case 7:return ko(ft,gt,gt.pendingProps,Ct),gt.child;case 8:return ko(ft,gt,gt.pendingProps.children,Ct),gt.child;case 12:return ko(ft,gt,gt.pendingProps.children,Ct),gt.child;case 10:e:{if(Pt=gt.type._context,Nt=gt.pendingProps,Zt=gt.memoizedProps,In=Nt.value,os(gt,Pt,In),Zt!==null)if(Vn(Zt.value,In)){if(Zt.children===Nt.children&&!$r.current){gt=Il(ft,gt,Ct);break e}}else for(Zt=gt.child,Zt!==null&&(Zt.return=gt);Zt!==null;){var Zn=Zt.dependencies;if(Zn!==null){In=Zt.child;for(var Er=Zn.firstContext;Er!==null;){if(Er.context===Pt){if(Zt.tag===1){Er=Hs(-1,Ct&-Ct),Er.tag=2;var Gr=Zt.updateQueue;if(Gr!==null){Gr=Gr.shared;var ns=Gr.pending;ns===null?Er.next=Er:(Er.next=ns.next,ns.next=Er),Gr.pending=Er}}Zt.lanes|=Ct,Er=Zt.alternate,Er!==null&&(Er.lanes|=Ct),_s(Zt.return,Ct,gt),Zn.lanes|=Ct;break}Er=Er.next}}else if(Zt.tag===10)In=Zt.type===gt.type?null:Zt.child;else if(Zt.tag===18){if(In=Zt.return,In===null)throw Error(st(341));In.lanes|=Ct,Zn=In.alternate,Zn!==null&&(Zn.lanes|=Ct),_s(In,Ct,gt),In=Zt.sibling}else In=Zt.child;if(In!==null)In.return=Zt;else for(In=Zt;In!==null;){if(In===gt){In=null;break}if(Zt=In.sibling,Zt!==null){Zt.return=In.return,In=Zt;break}In=In.return}Zt=In}ko(ft,gt,Nt.children,Ct),gt=gt.child}return gt;case 9:return Nt=gt.type,Pt=gt.pendingProps.children,fs(gt,Ct),Nt=ms(Nt),Pt=Pt(Nt),gt.flags|=1,ko(ft,gt,Pt,Ct),gt.child;case 14:return Pt=gt.type,Nt=rs(Pt,gt.pendingProps),Nt=rs(Pt.type,Nt),fv(ft,gt,Pt,Nt,Ct);case 15:return pv(ft,gt,gt.type,gt.pendingProps,Ct);case 17:return Pt=gt.type,Nt=gt.pendingProps,Nt=gt.elementType===Pt?Nt:rs(Pt,Nt),ft!==null&&(ft.alternate=null,gt.alternate=null,gt.flags|=2),gt.tag=1,Os(Pt)?(ft=!0,Ns(gt)):ft=!1,fs(gt,Ct),ls(gt,Pt,Nt),Yr(gt,Pt,Nt,Ct),$p(null,gt,Pt,!0,ft,Ct);case 19:return bv(ft,gt,Ct);case 22:return mv(ft,gt,Ct)}throw Error(st(156,gt.tag))};function Kv(ft,gt){return Yo(ft,gt)}function ry(ft,gt,Ct,Pt){this.tag=ft,this.key=Ct,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=gt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Pt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(ft,gt,Ct,Pt){return new ry(ft,gt,Ct,Pt)}function cm(ft){return ft=ft.prototype,!(!ft||!ft.isReactComponent)}function iy(ft){if(typeof ft=="function")return cm(ft)?1:0;if(ft!=null){if(ft=ft.$$typeof,ft===yt)return 11;if(ft===_t)return 14}return 2}function Yl(ft,gt){var Ct=ft.alternate;return Ct===null?(Ct=ga(ft.tag,gt,ft.key,ft.mode),Ct.elementType=ft.elementType,Ct.type=ft.type,Ct.stateNode=ft.stateNode,Ct.alternate=ft,ft.alternate=Ct):(Ct.pendingProps=gt,Ct.type=ft.type,Ct.flags=0,Ct.subtreeFlags=0,Ct.deletions=null),Ct.flags=ft.flags&14680064,Ct.childLanes=ft.childLanes,Ct.lanes=ft.lanes,Ct.child=ft.child,Ct.memoizedProps=ft.memoizedProps,Ct.memoizedState=ft.memoizedState,Ct.updateQueue=ft.updateQueue,gt=ft.dependencies,Ct.dependencies=gt===null?null:{lanes:gt.lanes,firstContext:gt.firstContext},Ct.sibling=ft.sibling,Ct.index=ft.index,Ct.ref=ft.ref,Ct}function _p(ft,gt,Ct,Pt,Nt,Zt){var In=2;if(Pt=ft,typeof ft=="function")cm(ft)&&(In=1);else if(typeof ft=="string")In=5;else e:switch(ft){case ct:return du(Ct.children,Nt,Zt,gt);case ut:In=8,Nt|=8;break;case dt:return ft=ga(12,Ct,gt,Nt|2),ft.elementType=dt,ft.lanes=Zt,ft;case vt:return ft=ga(13,Ct,gt,Nt),ft.elementType=vt,ft.lanes=Zt,ft;case pt:return ft=ga(19,Ct,gt,Nt),ft.elementType=pt,ft.lanes=Zt,ft;case St:return xp(Ct,Nt,Zt,gt);default:if(typeof ft=="object"&&ft!==null)switch(ft.$$typeof){case ht:In=10;break e;case mt:In=9;break e;case yt:In=11;break e;case _t:In=14;break e;case xt:In=16,Pt=null;break e}throw Error(st(130,ft==null?ft:typeof ft,""))}return gt=ga(In,Ct,gt,Nt),gt.elementType=ft,gt.type=Pt,gt.lanes=Zt,gt}function du(ft,gt,Ct,Pt){return ft=ga(7,ft,Pt,gt),ft.lanes=Ct,ft}function xp(ft,gt,Ct,Pt){return ft=ga(22,ft,Pt,gt),ft.elementType=St,ft.lanes=Ct,ft.stateNode={},ft}function um(ft,gt,Ct){return ft=ga(6,ft,null,gt),ft.lanes=Ct,ft}function dm(ft,gt,Ct){return gt=ga(4,ft.children!==null?ft.children:[],ft.key,gt),gt.lanes=Ct,gt.stateNode={containerInfo:ft.containerInfo,pendingChildren:null,implementation:ft.implementation},gt}function sy(ft,gt,Ct,Pt,Nt){this.tag=gt,this.containerInfo=ft,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gn,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=Pt,this.onRecoverableError=Nt,nn&&(this.mutableSourceEagerHydrationData=null)}function Yv(ft,gt,Ct,Pt,Nt,Zt,In,Zn,Er){return ft=new sy(ft,gt,Ct,Zn,Er),gt===1?(gt=1,Zt===!0&&(gt|=8)):gt=0,Zt=ga(3,null,null,gt),ft.current=Zt,Zt.stateNode=ft,Zt.memoizedState={element:Pt,isDehydrated:Ct,cache:null,transitions:null},eo(Zt),ft}function qv(ft){if(!ft)return kr;ft=ft._reactInternals;e:{if(Rt(ft)!==ft||ft.tag!==1)throw Error(st(170));var gt=ft;do{switch(gt.tag){case 3:gt=gt.stateNode.context;break e;case 1:if(Os(gt.type)){gt=gt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}gt=gt.return}while(gt!==null);throw Error(st(171))}if(ft.tag===1){var Ct=ft.type;if(Os(Ct))return zs(ft,Ct,gt)}return gt}function Jv(ft){var gt=ft._reactInternals;if(gt===void 0)throw typeof ft.render=="function"?Error(st(188)):(ft=Object.keys(ft).join(","),Error(st(268,ft)));return ft=Lt(gt),ft===null?null:ft.stateNode}function Qv(ft,gt){if(ft=ft.memoizedState,ft!==null&&ft.dehydrated!==null){var Ct=ft.retryLane;ft.retryLane=Ct!==0&&Ct<gt?Ct:gt}}function hm(ft,gt){Qv(ft,gt),(ft=ft.alternate)&&Qv(ft,gt)}function oy(ft){return ft=Lt(ft),ft===null?null:ft.stateNode}function ay(){return null}return tt.attemptContinuousHydration=function(ft){if(ft.tag===13){var gt=Oo();na(ft,134217728,gt),hm(ft,134217728)}},tt.attemptHydrationAtCurrentPriority=function(ft){if(ft.tag===13){var gt=Oo(),Ct=Xl(ft);na(ft,Ct,gt),hm(ft,Ct)}},tt.attemptSynchronousHydration=function(ft){switch(ft.tag){case 3:var gt=ft.stateNode;if(gt.current.memoizedState.isDehydrated){var Ct=$a(gt.pendingLanes);Ct!==0&&(Fo(gt,Ct|1),$o(gt,co()),!(Gs&6)&&(Au(),gr()))}break;case 13:var Pt=Oo();Gv(function(){return na(ft,1,Pt)}),hm(ft,1)}},tt.batchedUpdates=function(ft,gt){var Ct=Gs;Gs|=1;try{return ft(gt)}finally{Gs=Ct,Gs===0&&(Au(),Kn&&gr())}},tt.createComponentSelector=function(ft){return{$$typeof:sp,value:ft}},tt.createContainer=function(ft,gt,Ct,Pt,Nt,Zt,In){return Yv(ft,gt,!1,null,Ct,Pt,Nt,Zt,In)},tt.createHasPseudoClassSelector=function(ft){return{$$typeof:op,value:ft}},tt.createHydrationContainer=function(ft,gt,Ct,Pt,Nt,Zt,In,Zn,Er){return ft=Yv(Ct,Pt,!0,ft,Nt,Zt,In,Zn,Er),ft.context=qv(null),Ct=ft.current,Pt=Oo(),Nt=Xl(Ct),Zt=Hs(Pt,Nt),Zt.callback=gt??null,Ks(Ct,Zt),ft.current.lanes=Nt,zo(ft,Nt,Pt),$o(ft,Pt),ft},tt.createPortal=function(ft,gt,Ct){var Pt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lt,key:Pt==null?null:""+Pt,children:ft,containerInfo:gt,implementation:Ct}},tt.createRoleSelector=function(ft){return{$$typeof:ap,value:ft}},tt.createTestNameSelector=function(ft){return{$$typeof:lp,value:ft}},tt.createTextSelector=function(ft){return{$$typeof:cp,value:ft}},tt.deferredUpdates=function(ft){var gt=Fs,Ct=vo.transition;try{return vo.transition=null,Fs=16,ft()}finally{Fs=gt,vo.transition=Ct}},tt.discreteUpdates=function(ft,gt,Ct,Pt,Nt){var Zt=Fs,In=vo.transition;try{return vo.transition=null,Fs=1,ft(gt,Ct,Pt,Nt)}finally{Fs=Zt,vo.transition=In,Gs===0&&Au()}},tt.findAllNodes=Qp,tt.findBoundingRects=function(ft,gt){if(!jt)throw Error(st(363));gt=Qp(ft,gt),ft=[];for(var Ct=0;Ct<gt.length;Ct++)ft.push(hn(gt[Ct]));for(gt=ft.length-1;0<gt;gt--){Ct=ft[gt];for(var Pt=Ct.x,Nt=Pt+Ct.width,Zt=Ct.y,In=Zt+Ct.height,Zn=gt-1;0<=Zn;Zn--)if(gt!==Zn){var Er=ft[Zn],Gr=Er.x,ns=Gr+Er.width,Is=Er.y,bs=Is+Er.height;if(Pt>=Gr&&Zt>=Is&&Nt<=ns&&In<=bs){ft.splice(gt,1);break}else if(Pt!==Gr||Ct.width!==Er.width||bs<Zt||Is>In){if(!(Zt!==Is||Ct.height!==Er.height||ns<Pt||Gr>Nt)){Gr>Pt&&(Er.width+=Gr-Pt,Er.x=Pt),ns<Nt&&(Er.width=Nt-Gr),ft.splice(gt,1);break}}else{Is>Zt&&(Er.height+=Is-Zt,Er.y=Zt),bs<In&&(Er.height=In-Is),ft.splice(gt,1);break}}}return ft},tt.findHostInstance=Jv,tt.findHostInstanceWithNoPortals=function(ft){return ft=Mt(ft),ft=ft!==null?Ht(ft):null,ft===null?null:ft.stateNode},tt.findHostInstanceWithWarning=function(ft){return Jv(ft)},tt.flushControlled=function(ft){var gt=Gs;Gs|=1;var Ct=vo.transition,Pt=Fs;try{vo.transition=null,Fs=1,ft()}finally{Fs=Pt,vo.transition=Ct,Gs=gt,Gs===0&&(Au(),gr())}},tt.flushPassiveEffects=uu,tt.flushSync=Gv,tt.focusWithin=function(ft,gt){if(!jt)throw Error(st(363));for(ft=Yp(ft),gt=Ov(ft,gt),gt=Array.from(gt),ft=0;ft<gt.length;){var Ct=gt[ft++];if(!mn(Ct)){if(Ct.tag===5&&Hn(Ct.stateNode))return!0;for(Ct=Ct.child;Ct!==null;)gt.push(Ct),Ct=Ct.sibling}}return!1},tt.getCurrentUpdatePriority=function(){return Fs},tt.getFindAllNodesFailureDescription=function(ft,gt){if(!jt)throw Error(st(363));var Ct=0,Pt=[];ft=[Yp(ft),0];for(var Nt=0;Nt<ft.length;){var Zt=ft[Nt++],In=ft[Nt++],Zn=gt[In];if((Zt.tag!==5||!mn(Zt))&&(qp(Zt,Zn)&&(Pt.push(Jp(Zn)),In++,In>Ct&&(Ct=In)),In<gt.length))for(Zt=Zt.child;Zt!==null;)ft.push(Zt,In),Zt=Zt.sibling}if(Ct<gt.length){for(ft=[];Ct<gt.length;Ct++)ft.push(Jp(gt[Ct]));return`findAllNodes was able to match part of the selector:
  `+(Pt.join(" > ")+`

No matching component was found for:
  `)+ft.join(" > ")}return null},tt.getPublicRootInstance=function(ft){if(ft=ft.current,!ft.child)return null;switch(ft.child.tag){case 5:return Wt(ft.child.stateNode);default:return ft.child.stateNode}},tt.injectIntoDevTools=function(ft){if(ft={bundleType:ft.bundleType,version:ft.version,rendererPackageName:ft.rendererPackageName,rendererConfig:ft.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ot.ReactCurrentDispatcher,findHostInstanceByFiber:oy,findFiberByHostInstance:ft.findFiberByHostInstance||ay,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")ft=!1;else{var gt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(gt.isDisabled||!gt.supportsFiber)ft=!0;else{try{Dn=gt.inject(ft),Un=gt}catch{}ft=!!gt.checkDCE}}return ft},tt.isAlreadyRendering=function(){return!1},tt.observeVisibleRects=function(ft,gt,Ct,Pt){if(!jt)throw Error(st(363));ft=Qp(ft,gt);var Nt=Pn(ft,Ct,Pt).disconnect;return{disconnect:function(){Nt()}}},tt.registerMutableSourceForHydration=function(ft,gt){var Ct=gt._getVersion;Ct=Ct(gt._source),ft.mutableSourceEagerHydrationData==null?ft.mutableSourceEagerHydrationData=[gt,Ct]:ft.mutableSourceEagerHydrationData.push(gt,Ct)},tt.runWithPriority=function(ft,gt){var Ct=Fs;try{return Fs=ft,gt()}finally{Fs=Ct}},tt.shouldError=function(){return null},tt.shouldSuspend=function(){return!1},tt.updateContainer=function(ft,gt,Ct,Pt){var Nt=gt.current,Zt=Oo(),In=Xl(Nt);return Ct=qv(Ct),gt.context===null?gt.context=Ct:gt.pendingContext=Ct,gt=Hs(Zt,In),gt.payload={element:ft},Pt=Pt===void 0?null:Pt,Pt!==null&&(gt.callback=Pt),Ks(Nt,gt),ft=na(Nt,In,Zt),ft!==null&&ro(ft,Nt,In),In},tt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Ot,kt){var Gt=Ot.length;Ot.push(kt);e:for(;0<Gt;){var zt=Gt-1>>>1,Vt=Ot[zt];if(0<rt(Vt,kt))Ot[zt]=kt,Ot[Gt]=Vt,Gt=zt;else break e}}function tt(Ot){return Ot.length===0?null:Ot[0]}function nt(Ot){if(Ot.length===0)return null;var kt=Ot[0],Gt=Ot.pop();if(Gt!==kt){Ot[0]=Gt;e:for(var zt=0,Vt=Ot.length,Dt=Vt>>>1;zt<Dt;){var It=2*(zt+1)-1,Ut=Ot[It],Yt=It+1,qt=Ot[Yt];if(0>rt(Ut,Gt))Yt<Vt&&0>rt(qt,Ut)?(Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt):(Ot[zt]=Ut,Ot[It]=Gt,zt=It);else if(Yt<Vt&&0>rt(qt,Gt))Ot[zt]=qt,Ot[Yt]=Gt,zt=Yt;else break e}}return kt}function rt(Ot,kt){var Gt=Ot.sortIndex-kt.sortIndex;return Gt!==0?Gt:Ot.id-kt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var st=Date,ot=st.now();_e.unstable_now=function(){return st.now()-ot}}var at=[],lt=[],ct=1,ut=null,dt=3,ht=!1,mt=!1,yt=!1,vt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Ot){for(var kt=tt(lt);kt!==null;){if(kt.callback===null)nt(lt);else if(kt.startTime<=Ot)nt(lt),kt.sortIndex=kt.expirationTime,_(at,kt);else break;kt=tt(lt)}}function St(Ot){if(yt=!1,xt(Ot),!mt)if(tt(at)!==null)mt=!0,Wt(At);else{var kt=tt(lt);kt!==null&&Jt(St,kt.startTime-Ot)}}function At(Ot,kt){mt=!1,yt&&(yt=!1,pt(wt),wt=-1),ht=!0;var Gt=dt;try{for(xt(kt),ut=tt(at);ut!==null&&(!(ut.expirationTime>kt)||Ot&&!Mt());){var zt=ut.callback;if(typeof zt=="function"){ut.callback=null,dt=ut.priorityLevel;var Vt=zt(ut.expirationTime<=kt);kt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(at)&&nt(at),xt(kt)}else nt(at);ut=tt(at)}if(ut!==null)var Dt=!0;else{var It=tt(lt);It!==null&&Jt(St,It.startTime-kt),Dt=!1}return Dt}finally{ut=null,dt=Gt,ht=!1}}var bt=!1,Et=null,wt=-1,Rt=5,Tt=-1;function Mt(){return!(_e.unstable_now()-Tt<Rt)}function Lt(){if(Et!==null){var Ot=_e.unstable_now();Tt=Ot;var kt=!0;try{kt=Et(!0,Ot)}finally{kt?Ft():(bt=!1,Et=null)}}else bt=!1}var Ft;if(typeof _t=="function")Ft=function(){_t(Lt)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,Kt=Ht.port2;Ht.port1.onmessage=Lt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){vt(Lt,0)};function Wt(Ot){Et=Ot,bt||(bt=!0,Ft())}function Jt(Ot,kt){wt=vt(function(){Ot(_e.unstable_now())},kt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Ot){Ot.callback=null},_e.unstable_continueExecution=function(){mt||ht||(mt=!0,Wt(At))},_e.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<Ot?Math.floor(1e3/Ot):5},_e.unstable_getCurrentPriorityLevel=function(){return dt},_e.unstable_getFirstCallbackNode=function(){return tt(at)},_e.unstable_next=function(Ot){switch(dt){case 1:case 2:case 3:var kt=3;break;default:kt=dt}var Gt=dt;dt=kt;try{return Ot()}finally{dt=Gt}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Ot,kt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Gt=dt;dt=Ot;try{return kt()}finally{dt=Gt}},_e.unstable_scheduleCallback=function(Ot,kt,Gt){var zt=_e.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?zt+Gt:zt):Gt=zt,Ot){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=Gt+Vt,Ot={id:ct++,callback:kt,priorityLevel:Ot,startTime:Gt,expirationTime:Vt,sortIndex:-1},Gt>zt?(Ot.sortIndex=Gt,_(lt,Ot),tt(at)===null&&Ot===tt(lt)&&(yt?(pt(wt),wt=-1):yt=!0,Jt(St,Gt-zt))):(Ot.sortIndex=Vt,_(at,Ot),mt||ht||(mt=!0,Wt(At))),Ot},_e.unstable_shouldYield=Mt,_e.unstable_wrapCallback=function(Ot){var kt=dt;return function(){var Gt=dt;dt=kt;try{return Ot.apply(this,arguments)}finally{dt=Gt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;const catalogue={},extend$2=_e=>void Object.assign(catalogue,_e);function createRenderer(_e,_){function tt(ct,{args:ut=[],attach:dt,...ht},mt){let yt=`${ct[0].toUpperCase()}${ct.slice(1)}`,vt;if(ct==="primitive"){if(ht.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const pt=ht.object;vt=prepare(pt,{type:ct,root:mt,attach:dt,primitive:!0})}else{const pt=catalogue[yt];if(!pt)throw new Error(`R3F: ${yt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(ut))throw new Error("R3F: The args prop must be an array!");vt=prepare(new pt(...ut),{type:ct,root:mt,attach:dt,memoizedProps:{args:ut}})}return vt.__r3f.attach===void 0&&(vt instanceof BufferGeometry?vt.__r3f.attach="geometry":vt instanceof Material&&(vt.__r3f.attach="material")),yt!=="inject"&&applyProps$1(vt,ht),vt}function nt(ct,ut){let dt=!1;if(ut){var ht,mt;(ht=ut.__r3f)!=null&&ht.attach?attach(ct,ut,ut.__r3f.attach):ut.isObject3D&&ct.isObject3D&&(ct.add(ut),dt=!0),dt||(mt=ct.__r3f)==null||mt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function rt(ct,ut,dt){let ht=!1;if(ut){var mt,yt;if((mt=ut.__r3f)!=null&&mt.attach)attach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){ut.parent=ct,ut.dispatchEvent({type:"added"}),ct.dispatchEvent({type:"childadded",child:ut});const vt=ct.children.filter(_t=>_t!==ut),pt=vt.indexOf(dt);ct.children=[...vt.slice(0,pt),ut,...vt.slice(pt)],ht=!0}ht||(yt=ct.__r3f)==null||yt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function it(ct,ut,dt=!1){ct&&[...ct].forEach(ht=>st(ut,ht,dt))}function st(ct,ut,dt){if(ut){var ht,mt,yt;if(ut.__r3f&&(ut.__r3f.parent=null),(ht=ct.__r3f)!=null&&ht.objects&&(ct.__r3f.objects=ct.__r3f.objects.filter(St=>St!==ut)),(mt=ut.__r3f)!=null&&mt.attach)detach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){var vt;ct.remove(ut),(vt=ut.__r3f)!=null&&vt.root&&removeInteractivity(findInitialRoot(ut),ut)}const _t=(yt=ut.__r3f)==null?void 0:yt.primitive,xt=!_t&&(dt===void 0?ut.dispose!==null:dt);if(!_t){var pt;it((pt=ut.__r3f)==null?void 0:pt.objects,ut,xt),it(ut.children,ut,xt)}if(delete ut.__r3f,xt&&ut.dispose&&ut.type!=="Scene"){const St=()=>{try{ut.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,St):St()}invalidateInstance(ct)}}function ot(ct,ut,dt,ht){var mt;const yt=(mt=ct.__r3f)==null?void 0:mt.parent;if(!yt)return;const vt=tt(ut,dt,ct.__r3f.root);if(ct.children){for(const pt of ct.children)pt.__r3f&&nt(vt,pt);ct.children=ct.children.filter(pt=>!pt.__r3f)}ct.__r3f.objects.forEach(pt=>nt(vt,pt)),ct.__r3f.objects=[],ct.__r3f.autoRemovedBeforeAppend||st(yt,ct),vt.parent&&(vt.__r3f.autoRemovedBeforeAppend=!0),nt(yt,vt),vt.raycast&&vt.__r3f.eventCount&&findInitialRoot(vt).getState().internal.interaction.push(vt),[ht,ht.alternate].forEach(pt=>{pt!==null&&(pt.stateNode=vt,pt.ref&&(typeof pt.ref=="function"?pt.ref(vt):pt.ref.current=vt))})}const at=()=>{};return{reconciler:Reconciler({createInstance:tt,removeChild:st,appendChild:nt,appendInitialChild:nt,insertBefore:rt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(ct,ut)=>{if(!ut)return;const dt=ct.getState().scene;dt.__r3f&&(dt.__r3f.root=ct,nt(dt,ut))},removeChildFromContainer:(ct,ut)=>{ut&&st(ct.getState().scene,ut)},insertInContainerBefore:(ct,ut,dt)=>{if(!ut||!dt)return;const ht=ct.getState().scene;ht.__r3f&&rt(ht,ut,dt)},getRootHostContext:()=>null,getChildHostContext:ct=>ct,finalizeInitialChildren(ct){var ut;return!!((ut=ct==null?void 0:ct.__r3f)!=null?ut:{}).handlers},prepareUpdate(ct,ut,dt,ht){var mt;if(((mt=ct==null?void 0:ct.__r3f)!=null?mt:{}).primitive&&ht.object&&ht.object!==ct)return[!0];{const{args:vt=[],children:pt,..._t}=ht,{args:xt=[],children:St,...At}=dt;if(!Array.isArray(vt))throw new Error("R3F: the args prop must be an array!");if(vt.some((Et,wt)=>Et!==xt[wt]))return[!0];const bt=diffProps(ct,_t,At,!0);return bt.changes.length?[!1,bt]:null}},commitUpdate(ct,[ut,dt],ht,mt,yt,vt){ut?ot(ct,ht,yt,vt):applyProps$1(ct,dt)},commitMount(ct,ut,dt,ht){var mt;const yt=(mt=ct.__r3f)!=null?mt:{};ct.raycast&&yt.handlers&&yt.eventCount&&findInitialRoot(ct).getState().internal.interaction.push(ct)},getPublicInstance:ct=>ct,prepareForCommit:()=>null,preparePortalMount:ct=>prepare(ct.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(ct){var ut;const{attach:dt,parent:ht}=(ut=ct.__r3f)!=null?ut:{};dt&&ht&&detach(ht,ct,dt),ct.isObject3D&&(ct.visible=!1),invalidateInstance(ct)},unhideInstance(ct,ut){var dt;const{attach:ht,parent:mt}=(dt=ct.__r3f)!=null?dt:{};ht&&mt&&attach(mt,ct,ht),(ct.isObject3D&&ut.visible==null||ut.visible)&&(ct.visible=!0),invalidateInstance(ct)},createTextInstance:at,hideTextInstance:at,unhideTextInstance:at,getCurrentEventPriority:()=>_?_():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace$1=_e=>"colorSpace"in _e||"outputColorSpace"in _e,getColorManagement=()=>{var _e;return(_e=catalogue.ColorManagement)!=null?_e:null},isOrthographicCamera=_e=>_e&&_e.isOrthographicCamera,isRef$1=_e=>_e&&_e.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(_e){const _=reactExports.useRef(_e);return useIsomorphicLayoutEffect(()=>void(_.current=_e),[_e]),_}function Block({set:_e}){return useIsomorphicLayoutEffect(()=>(_e(new Promise(()=>null)),()=>_e(!1)),[_e]),null}class ErrorBoundary extends reactExports.Component{constructor(..._){super(..._),this.state={error:!1}}componentDidCatch(_){this.props.set(_)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=_e=>_e&&!!_e.memoized&&!!_e.changes;function calculateDpr(_e){var _;const tt=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(_e)?Math.min(Math.max(_e[0],tt),_e[1]):_e}const getRootState=_e=>{var _;return(_=_e.__r3f)==null?void 0:_.root.getState()};function findInitialRoot(_e){let _=_e.__r3f.root;for(;_.getState().previousRoot;)_=_.getState().previousRoot;return _}const is={obj:_e=>_e===Object(_e)&&!is.arr(_e)&&typeof _e!="function",fun:_e=>typeof _e=="function",str:_e=>typeof _e=="string",num:_e=>typeof _e=="number",boo:_e=>typeof _e=="boolean",und:_e=>_e===void 0,arr:_e=>Array.isArray(_e),equ(_e,_,{arrays:tt="shallow",objects:nt="reference",strict:rt=!0}={}){if(typeof _e!=typeof _||!!_e!=!!_)return!1;if(is.str(_e)||is.num(_e)||is.boo(_e))return _e===_;const it=is.obj(_e);if(it&&nt==="reference")return _e===_;const st=is.arr(_e);if(st&&tt==="reference")return _e===_;if((st||it)&&_e===_)return!0;let ot;for(ot in _e)if(!(ot in _))return!1;if(it&&tt==="shallow"&&nt==="shallow"){for(ot in rt?_:_e)if(!is.equ(_e[ot],_[ot],{strict:rt,objects:"reference"}))return!1}else for(ot in rt?_:_e)if(_e[ot]!==_[ot])return!1;if(is.und(ot)){if(st&&_e.length===0&&_.length===0||it&&Object.keys(_e).length===0&&Object.keys(_).length===0)return!0;if(_e!==_)return!1}return!0}};function buildGraph(_e){const _={nodes:{},materials:{}};return _e&&_e.traverse(tt=>{tt.name&&(_.nodes[tt.name]=tt),tt.material&&!_.materials[tt.material.name]&&(_.materials[tt.material.name]=tt.material)}),_}function dispose(_e){_e.dispose&&_e.type!=="Scene"&&_e.dispose();for(const _ in _e)_.dispose==null||_.dispose(),delete _e[_]}function prepare(_e,_){const tt=_e;return tt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,..._},_e}function resolve(_e,_){let tt=_e;if(_.includes("-")){const nt=_.split("-"),rt=nt.pop();return tt=nt.reduce((it,st)=>it[st],_e),{target:tt,key:rt}}else return{target:tt,key:_}}const INDEX_REGEX=/-\d+$/;function attach(_e,_,tt){if(is.str(tt)){if(INDEX_REGEX.test(tt)){const it=tt.replace(INDEX_REGEX,""),{target:st,key:ot}=resolve(_e,it);Array.isArray(st[ot])||(st[ot]=[])}const{target:nt,key:rt}=resolve(_e,tt);_.__r3f.previousAttach=nt[rt],nt[rt]=_}else _.__r3f.previousAttach=tt(_e,_)}function detach(_e,_,tt){var nt,rt;if(is.str(tt)){const{target:it,key:st}=resolve(_e,tt),ot=_.__r3f.previousAttach;ot===void 0?delete it[st]:it[st]=ot}else(nt=_.__r3f)==null||nt.previousAttach==null||nt.previousAttach(_e,_);(rt=_.__r3f)==null||delete rt.previousAttach}function diffProps(_e,{children:_,key:tt,ref:nt,...rt},{children:it,key:st,ref:ot,...at}={},lt=!1){const ct=_e.__r3f,ut=Object.entries(rt),dt=[];if(lt){const mt=Object.keys(at);for(let yt=0;yt<mt.length;yt++)rt.hasOwnProperty(mt[yt])||ut.unshift([mt[yt],DEFAULT+"remove"])}ut.forEach(([mt,yt])=>{var vt;if((vt=_e.__r3f)!=null&&vt.primitive&&mt==="object"||is.equ(yt,at[mt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(mt))return dt.push([mt,yt,!0,[]]);let pt=[];mt.includes("-")&&(pt=mt.split("-")),dt.push([mt,yt,!1,pt]);for(const _t in rt){const xt=rt[_t];_t.startsWith(`${mt}-`)&&dt.push([_t,xt,!1,_t.split("-")])}});const ht={...rt};return ct!=null&&ct.memoizedProps&&ct!=null&&ct.memoizedProps.args&&(ht.args=ct.memoizedProps.args),ct!=null&&ct.memoizedProps&&ct!=null&&ct.memoizedProps.attach&&(ht.attach=ct.memoizedProps.attach),{memoized:ht,changes:dt}}const __DEV__=typeof process<"u"&&!1;function applyProps$1(_e,_){var tt;const nt=_e.__r3f,rt=nt==null?void 0:nt.root,it=rt==null||rt.getState==null?void 0:rt.getState(),{memoized:st,changes:ot}=isDiffSet(_)?_:diffProps(_e,_),at=nt==null?void 0:nt.eventCount;_e.__r3f&&(_e.__r3f.memoizedProps=st);for(let ct=0;ct<ot.length;ct++){let[ut,dt,ht,mt]=ot[ct];if(hasColorSpace$1(_e)){const _t="srgb",xt="srgb-linear";ut==="encoding"?(ut="colorSpace",dt=dt===3001?_t:xt):ut==="outputEncoding"&&(ut="outputColorSpace",dt=dt===3001?_t:xt)}let yt=_e,vt=yt[ut];if(mt.length&&(vt=mt.reduce((pt,_t)=>pt[_t],_e),!(vt&&vt.set))){const[pt,..._t]=mt.reverse();yt=_t.reverse().reduce((xt,St)=>xt[St],_e),ut=pt}if(dt===DEFAULT+"remove")if(yt.constructor){let pt=DEFAULTS.get(yt.constructor);pt||(pt=new yt.constructor,DEFAULTS.set(yt.constructor,pt)),dt=pt[ut]}else dt=0;if(ht&&nt)dt?nt.handlers[ut]=dt:delete nt.handlers[ut],nt.eventCount=Object.keys(nt.handlers).length;else if(vt&&vt.set&&(vt.copy||vt instanceof Layers)){if(Array.isArray(dt))vt.fromArray?vt.fromArray(dt):vt.set(...dt);else if(vt.copy&&dt&&dt.constructor&&(__DEV__?vt.constructor.name===dt.constructor.name:vt.constructor===dt.constructor))vt.copy(dt);else if(dt!==void 0){const pt=vt instanceof Color$1;!pt&&vt.setScalar?vt.setScalar(dt):vt instanceof Layers&&dt instanceof Layers?vt.mask=dt.mask:vt.set(dt),!getColorManagement()&&it&&!it.linear&&pt&&vt.convertSRGBToLinear()}}else if(yt[ut]=dt,yt[ut]instanceof Texture&&yt[ut].format===RGBAFormat&&yt[ut].type===UnsignedByteType&&it){const pt=yt[ut];hasColorSpace$1(pt)&&hasColorSpace$1(it.gl)?pt.colorSpace=it.gl.outputColorSpace:pt.encoding=it.gl.outputEncoding}invalidateInstance(_e)}if(nt&&nt.parent&&_e.raycast&&at!==nt.eventCount){const ct=findInitialRoot(_e).getState().internal,ut=ct.interaction.indexOf(_e);ut>-1&&ct.interaction.splice(ut,1),nt.eventCount&&ct.interaction.push(_e)}return!(ot.length===1&&ot[0][0]==="onUpdate")&&ot.length&&(tt=_e.__r3f)!=null&&tt.parent&&updateInstance(_e),_e}function invalidateInstance(_e){var _,tt;const nt=(_=_e.__r3f)==null||(tt=_.root)==null||tt.getState==null?void 0:tt.getState();nt&&nt.internal.frames===0&&nt.invalidate()}function updateInstance(_e){_e.onUpdate==null||_e.onUpdate(_e)}function updateCamera(_e,_){_e.manual||(isOrthographicCamera(_e)?(_e.left=_.width/-2,_e.right=_.width/2,_e.top=_.height/2,_e.bottom=_.height/-2):_e.aspect=_.width/_.height,_e.updateProjectionMatrix(),_e.updateMatrixWorld())}function makeId(_e){return(_e.eventObject||_e.object).uuid+"/"+_e.index+_e.instanceId}function getEventPriority(){var _e;const _=typeof self<"u"&&self||typeof window<"u"&&window;if(!_)return constantsExports.DefaultEventPriority;switch((_e=_.event)==null?void 0:_e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(_e,_,tt,nt){const rt=tt.get(_);rt&&(tt.delete(_),tt.size===0&&(_e.delete(nt),rt.target.releasePointerCapture(nt)))}function removeInteractivity(_e,_){const{internal:tt}=_e.getState();tt.interaction=tt.interaction.filter(nt=>nt!==_),tt.initialHits=tt.initialHits.filter(nt=>nt!==_),tt.hovered.forEach((nt,rt)=>{(nt.eventObject===_||nt.object===_)&&tt.hovered.delete(rt)}),tt.capturedMap.forEach((nt,rt)=>{releaseInternalPointerCapture(tt.capturedMap,_,nt,rt)})}function createEvents(_e){function _(at){const{internal:lt}=_e.getState(),ct=at.offsetX-lt.initialClick[0],ut=at.offsetY-lt.initialClick[1];return Math.round(Math.sqrt(ct*ct+ut*ut))}function tt(at){return at.filter(lt=>["Move","Over","Enter","Out","Leave"].some(ct=>{var ut;return(ut=lt.__r3f)==null?void 0:ut.handlers["onPointer"+ct]}))}function nt(at,lt){const ct=_e.getState(),ut=new Set,dt=[],ht=lt?lt(ct.internal.interaction):ct.internal.interaction;for(let pt=0;pt<ht.length;pt++){const _t=getRootState(ht[pt]);_t&&(_t.raycaster.camera=void 0)}ct.previousRoot||ct.events.compute==null||ct.events.compute(at,ct);function mt(pt){const _t=getRootState(pt);if(!_t||!_t.events.enabled||_t.raycaster.camera===null)return[];if(_t.raycaster.camera===void 0){var xt;_t.events.compute==null||_t.events.compute(at,_t,(xt=_t.previousRoot)==null?void 0:xt.getState()),_t.raycaster.camera===void 0&&(_t.raycaster.camera=null)}return _t.raycaster.camera?_t.raycaster.intersectObject(pt,!0):[]}let yt=ht.flatMap(mt).sort((pt,_t)=>{const xt=getRootState(pt.object),St=getRootState(_t.object);return!xt||!St?pt.distance-_t.distance:St.events.priority-xt.events.priority||pt.distance-_t.distance}).filter(pt=>{const _t=makeId(pt);return ut.has(_t)?!1:(ut.add(_t),!0)});ct.events.filter&&(yt=ct.events.filter(yt,ct));for(const pt of yt){let _t=pt.object;for(;_t;){var vt;(vt=_t.__r3f)!=null&&vt.eventCount&&dt.push({...pt,eventObject:_t}),_t=_t.parent}}if("pointerId"in at&&ct.internal.capturedMap.has(at.pointerId))for(let pt of ct.internal.capturedMap.get(at.pointerId).values())ut.has(makeId(pt.intersection))||dt.push(pt.intersection);return dt}function rt(at,lt,ct,ut){const dt=_e.getState();if(at.length){const ht={stopped:!1};for(const mt of at){const yt=getRootState(mt.object)||dt,{raycaster:vt,pointer:pt,camera:_t,internal:xt}=yt,St=new Vector3(pt.x,pt.y,0).unproject(_t),At=Tt=>{var Mt,Lt;return(Mt=(Lt=xt.capturedMap.get(Tt))==null?void 0:Lt.has(mt.eventObject))!=null?Mt:!1},bt=Tt=>{const Mt={intersection:mt,target:lt.target};xt.capturedMap.has(Tt)?xt.capturedMap.get(Tt).set(mt.eventObject,Mt):xt.capturedMap.set(Tt,new Map([[mt.eventObject,Mt]])),lt.target.setPointerCapture(Tt)},Et=Tt=>{const Mt=xt.capturedMap.get(Tt);Mt&&releaseInternalPointerCapture(xt.capturedMap,mt.eventObject,Mt,Tt)};let wt={};for(let Tt in lt){let Mt=lt[Tt];typeof Mt!="function"&&(wt[Tt]=Mt)}let Rt={...mt,...wt,pointer:pt,intersections:at,stopped:ht.stopped,delta:ct,unprojectedPoint:St,ray:vt.ray,camera:_t,stopPropagation(){const Tt="pointerId"in lt&&xt.capturedMap.get(lt.pointerId);if((!Tt||Tt.has(mt.eventObject))&&(Rt.stopped=ht.stopped=!0,xt.hovered.size&&Array.from(xt.hovered.values()).find(Mt=>Mt.eventObject===mt.eventObject))){const Mt=at.slice(0,at.indexOf(mt));it([...Mt,mt])}},target:{hasPointerCapture:At,setPointerCapture:bt,releasePointerCapture:Et},currentTarget:{hasPointerCapture:At,setPointerCapture:bt,releasePointerCapture:Et},nativeEvent:lt};if(ut(Rt),ht.stopped===!0)break}}return at}function it(at){const{internal:lt}=_e.getState();for(const ct of lt.hovered.values())if(!at.length||!at.find(ut=>ut.object===ct.object&&ut.index===ct.index&&ut.instanceId===ct.instanceId)){const dt=ct.eventObject.__r3f,ht=dt==null?void 0:dt.handlers;if(lt.hovered.delete(makeId(ct)),dt!=null&&dt.eventCount){const mt={...ct,intersections:at};ht.onPointerOut==null||ht.onPointerOut(mt),ht.onPointerLeave==null||ht.onPointerLeave(mt)}}}function st(at,lt){for(let ct=0;ct<lt.length;ct++){const ut=lt[ct].__r3f;ut==null||ut.handlers.onPointerMissed==null||ut.handlers.onPointerMissed(at)}}function ot(at){switch(at){case"onPointerLeave":case"onPointerCancel":return()=>it([]);case"onLostPointerCapture":return lt=>{const{internal:ct}=_e.getState();"pointerId"in lt&&ct.capturedMap.has(lt.pointerId)&&requestAnimationFrame(()=>{ct.capturedMap.has(lt.pointerId)&&(ct.capturedMap.delete(lt.pointerId),it([]))})}}return function(ct){const{onPointerMissed:ut,internal:dt}=_e.getState();dt.lastEvent.current=ct;const ht=at==="onPointerMove",mt=at==="onClick"||at==="onContextMenu"||at==="onDoubleClick",vt=nt(ct,ht?tt:void 0),pt=mt?_(ct):0;at==="onPointerDown"&&(dt.initialClick=[ct.offsetX,ct.offsetY],dt.initialHits=vt.map(xt=>xt.eventObject)),mt&&!vt.length&&pt<=2&&(st(ct,dt.interaction),ut&&ut(ct)),ht&&it(vt);function _t(xt){const St=xt.eventObject,At=St.__r3f,bt=At==null?void 0:At.handlers;if(At!=null&&At.eventCount)if(ht){if(bt.onPointerOver||bt.onPointerEnter||bt.onPointerOut||bt.onPointerLeave){const Et=makeId(xt),wt=dt.hovered.get(Et);wt?wt.stopped&&xt.stopPropagation():(dt.hovered.set(Et,xt),bt.onPointerOver==null||bt.onPointerOver(xt),bt.onPointerEnter==null||bt.onPointerEnter(xt))}bt.onPointerMove==null||bt.onPointerMove(xt)}else{const Et=bt[at];Et?(!mt||dt.initialHits.includes(St))&&(st(ct,dt.interaction.filter(wt=>!dt.initialHits.includes(wt))),Et(xt)):mt&&dt.initialHits.includes(St)&&st(ct,dt.interaction.filter(wt=>!dt.initialHits.includes(wt)))}}rt(vt,ct,pt,_t)}}return{handlePointer:ot}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=_e=>!!(_e!=null&&_e.render),context$1=reactExports.createContext(null),createStore=(_e,_)=>{const tt=create((ot,at)=>{const lt=new Vector3,ct=new Vector3,ut=new Vector3;function dt(pt=at().camera,_t=ct,xt=at().size){const{width:St,height:At,top:bt,left:Et}=xt,wt=St/At;_t instanceof Vector3?ut.copy(_t):ut.set(..._t);const Rt=pt.getWorldPosition(lt).distanceTo(ut);if(isOrthographicCamera(pt))return{width:St/pt.zoom,height:At/pt.zoom,top:bt,left:Et,factor:1,distance:Rt,aspect:wt};{const Tt=pt.fov*Math.PI/180,Mt=2*Math.tan(Tt/2)*Rt,Lt=Mt*(St/At);return{width:Lt,height:Mt,top:bt,left:Et,factor:St/Lt,distance:Rt,aspect:wt}}}let ht;const mt=pt=>ot(_t=>({performance:{..._t.performance,current:pt}})),yt=new Vector2;return{set:ot,get:at,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(pt=1)=>_e(at(),pt),advance:(pt,_t)=>_(pt,_t,at()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:yt,mouse:yt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const pt=at();ht&&clearTimeout(ht),pt.performance.current!==pt.performance.min&&mt(pt.performance.min),ht=setTimeout(()=>mt(at().performance.max),pt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:dt},setEvents:pt=>ot(_t=>({..._t,events:{..._t.events,...pt}})),setSize:(pt,_t,xt,St,At)=>{const bt=at().camera,Et={width:pt,height:_t,top:St||0,left:At||0,updateStyle:xt};ot(wt=>({size:Et,viewport:{...wt.viewport,...dt(bt,ct,Et)}}))},setDpr:pt=>ot(_t=>{const xt=calculateDpr(pt);return{viewport:{..._t.viewport,dpr:xt,initialDpr:_t.viewport.initialDpr||xt}}}),setFrameloop:(pt="always")=>{const _t=at().clock;_t.stop(),_t.elapsedTime=0,pt!=="never"&&(_t.start(),_t.elapsedTime=0),ot(()=>({frameloop:pt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(pt,_t,xt)=>{const St=at().internal;return St.priority=St.priority+(_t>0?1:0),St.subscribers.push({ref:pt,priority:_t,store:xt}),St.subscribers=St.subscribers.sort((At,bt)=>At.priority-bt.priority),()=>{const At=at().internal;At!=null&&At.subscribers&&(At.priority=At.priority-(_t>0?1:0),At.subscribers=At.subscribers.filter(bt=>bt.ref!==pt))}}}}}),nt=tt.getState();let rt=nt.size,it=nt.viewport.dpr,st=nt.camera;return tt.subscribe(()=>{const{camera:ot,size:at,viewport:lt,gl:ct,set:ut}=tt.getState();if(at.width!==rt.width||at.height!==rt.height||lt.dpr!==it){var dt;rt=at,it=lt.dpr,updateCamera(ot,at),ct.setPixelRatio(lt.dpr);const ht=(dt=at.updateStyle)!=null?dt:typeof HTMLCanvasElement<"u"&&ct.domElement instanceof HTMLCanvasElement;ct.setSize(at.width,at.height,ht)}ot!==st&&(st=ot,ut(ht=>({viewport:{...ht.viewport,...ht.viewport.getCurrentViewport(ot)}})))}),tt.subscribe(ot=>_e(ot)),tt};let i$5,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(_e,_){if(_e.size)for(const{callback:tt}of _e.values())tt(_)}function flushGlobalEffects(_e,_){switch(_e){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function render$1(_e,_,tt){let nt=_.clock.getDelta();for(_.frameloop==="never"&&typeof _e=="number"&&(nt=_e-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=_e),subscribers=_.internal.subscribers,i$5=0;i$5<subscribers.length;i$5++)subscription=subscribers[i$5],subscription.ref.current(subscription.store.getState(),nt,tt);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}function createLoop(_e){let _=!1,tt=!1,nt,rt,it;function st(lt){rt=requestAnimationFrame(st),_=!0,nt=0,flushGlobalEffects("before",lt),tt=!0;for(const ut of _e.values()){var ct;it=ut.store.getState(),it.internal.active&&(it.frameloop==="always"||it.internal.frames>0)&&!((ct=it.gl.xr)!=null&&ct.isPresenting)&&(nt+=render$1(lt,it))}if(tt=!1,flushGlobalEffects("after",lt),nt===0)return flushGlobalEffects("tail",lt),_=!1,cancelAnimationFrame(rt)}function ot(lt,ct=1){var ut;if(!lt)return _e.forEach(dt=>ot(dt.store.getState(),ct));(ut=lt.gl.xr)!=null&&ut.isPresenting||!lt.internal.active||lt.frameloop==="never"||(ct>1?lt.internal.frames=Math.min(60,lt.internal.frames+ct):tt?lt.internal.frames=2:lt.internal.frames=1,_||(_=!0,requestAnimationFrame(st)))}function at(lt,ct=!0,ut,dt){if(ct&&flushGlobalEffects("before",lt),ut)render$1(lt,ut,dt);else for(const ht of _e.values())render$1(lt,ht.store.getState());ct&&flushGlobalEffects("after",lt)}return{loop:st,invalidate:ot,advance:at}}function useStore(){const _e=reactExports.useContext(context$1);if(!_e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return _e}function useThree(_e=tt=>tt,_){return useStore()(_e,_)}function useFrame(_e,_=0){const tt=useStore(),nt=tt.getState().internal.subscribe,rt=useMutableCallback(_e);return useIsomorphicLayoutEffect(()=>nt(rt,_,tt),[_,nt,tt]),null}const memoizedLoaders=new WeakMap;function loadingFn(_e,_){return function(tt,...nt){let rt=memoizedLoaders.get(tt);return rt||(rt=new tt,memoizedLoaders.set(tt,rt)),_e&&_e(rt),Promise.all(nt.map(it=>new Promise((st,ot)=>rt.load(it,at=>{at.scene&&Object.assign(at,buildGraph(at.scene)),st(at)},_,at=>ot(new Error(`Could not load ${it}: ${at==null?void 0:at.message}`))))))}}function useLoader(_e,_,tt,nt){const rt=Array.isArray(_)?_:[_],it=suspend(loadingFn(tt,nt),[_e,...rt],{equal:is.equ});return Array.isArray(_)?it:it[0]}useLoader.preload=function(_e,_,tt){const nt=Array.isArray(_)?_:[_];return preload(loadingFn(tt),[_e,...nt])};useLoader.clear=function(_e,_){const tt=Array.isArray(_)?_:[_];return clear([_e,...tt])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(_e,_)=>{const tt=typeof _e=="function"?_e(_):_e;return isRenderer(tt)?tt:new WebGLRenderer({powerPreference:"high-performance",canvas:_,antialias:!0,alpha:!0,..._e})};function computeInitialSize(_e,_){const tt=typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement;if(_){const{width:nt,height:rt,top:it,left:st,updateStyle:ot=tt}=_;return{width:nt,height:rt,top:it,left:st,updateStyle:ot}}else if(typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement&&_e.parentElement){const{width:nt,height:rt,top:it,left:st}=_e.parentElement.getBoundingClientRect();return{width:nt,height:rt,top:it,left:st,updateStyle:tt}}else if(typeof OffscreenCanvas<"u"&&_e instanceof OffscreenCanvas)return{width:_e.width,height:_e.height,top:0,left:0,updateStyle:tt};return{width:0,height:0,top:0,left:0}}function createRoot(_e){const _=roots.get(_e),tt=_==null?void 0:_.fiber,nt=_==null?void 0:_.store;_&&console.warn("R3F.createRoot should only be called once!");const rt=typeof reportError=="function"?reportError:console.error,it=nt||createStore(invalidate,advance),st=tt||reconciler.createContainer(it,constantsExports.ConcurrentRoot,null,!1,null,"",rt,null);_||roots.set(_e,{fiber:st,store:it});let ot,at=!1,lt;return{configure(ct={}){let{gl:ut,size:dt,scene:ht,events:mt,onCreated:yt,shadows:vt=!1,linear:pt=!1,flat:_t=!1,legacy:xt=!1,orthographic:St=!1,frameloop:At="always",dpr:bt=[1,2],performance:Et,raycaster:wt,camera:Rt,onPointerMissed:Tt}=ct,Mt=it.getState(),Lt=Mt.gl;Mt.gl||Mt.set({gl:Lt=createRendererInstance(ut,_e)});let Ft=Mt.raycaster;Ft||Mt.set({raycaster:Ft=new Raycaster});const{params:Ht,...Kt}=wt||{};if(is.equ(Kt,Ft,shallowLoose)||applyProps(Ft,{...Kt}),is.equ(Ht,Ft.params,shallowLoose)||applyProps(Ft,{params:{...Ft.params,...Ht}}),!Mt.camera||Mt.camera===lt&&!is.equ(lt,Rt,shallowLoose)){lt=Rt;const Gt=Rt instanceof Camera,zt=Gt?Rt:St?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Gt||(zt.position.z=5,Rt&&(applyProps(zt,Rt),("aspect"in Rt||"left"in Rt||"right"in Rt||"bottom"in Rt||"top"in Rt)&&(zt.manual=!0,zt.updateProjectionMatrix())),!Mt.camera&&!(Rt!=null&&Rt.rotation)&&zt.lookAt(0,0,0)),Mt.set({camera:zt}),Ft.camera=zt}if(!Mt.scene){let Gt;ht instanceof Scene$1?Gt=ht:(Gt=new Scene$1,ht&&applyProps(Gt,ht)),Mt.set({scene:prepare(Gt)})}if(!Mt.xr){var Wt;const Gt=(Dt,It)=>{const Ut=it.getState();Ut.frameloop!=="never"&&advance(Dt,!0,Ut,It)},zt=()=>{const Dt=it.getState();Dt.gl.xr.enabled=Dt.gl.xr.isPresenting,Dt.gl.xr.setAnimationLoop(Dt.gl.xr.isPresenting?Gt:null),Dt.gl.xr.isPresenting||invalidate(Dt)},Vt={connect(){const Dt=it.getState().gl;Dt.xr.addEventListener("sessionstart",zt),Dt.xr.addEventListener("sessionend",zt)},disconnect(){const Dt=it.getState().gl;Dt.xr.removeEventListener("sessionstart",zt),Dt.xr.removeEventListener("sessionend",zt)}};typeof((Wt=Lt.xr)==null?void 0:Wt.addEventListener)=="function"&&Vt.connect(),Mt.set({xr:Vt})}if(Lt.shadowMap){const Gt=Lt.shadowMap.enabled,zt=Lt.shadowMap.type;if(Lt.shadowMap.enabled=!!vt,is.boo(vt))Lt.shadowMap.type=PCFSoftShadowMap;else if(is.str(vt)){var Jt;const Vt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Lt.shadowMap.type=(Jt=Vt[vt])!=null?Jt:PCFSoftShadowMap}else is.obj(vt)&&Object.assign(Lt.shadowMap,vt);(Gt!==Lt.shadowMap.enabled||zt!==Lt.shadowMap.type)&&(Lt.shadowMap.needsUpdate=!0)}const Ot=getColorManagement();Ot&&("enabled"in Ot?Ot.enabled=!xt:"legacyMode"in Ot&&(Ot.legacyMode=xt)),at||applyProps(Lt,{outputEncoding:pt?3e3:3001,toneMapping:_t?NoToneMapping:ACESFilmicToneMapping}),Mt.legacy!==xt&&Mt.set(()=>({legacy:xt})),Mt.linear!==pt&&Mt.set(()=>({linear:pt})),Mt.flat!==_t&&Mt.set(()=>({flat:_t})),ut&&!is.fun(ut)&&!isRenderer(ut)&&!is.equ(ut,Lt,shallowLoose)&&applyProps(Lt,ut),mt&&!Mt.events.handlers&&Mt.set({events:mt(it)});const kt=computeInitialSize(_e,dt);return is.equ(kt,Mt.size,shallowLoose)||Mt.setSize(kt.width,kt.height,kt.updateStyle,kt.top,kt.left),bt&&Mt.viewport.dpr!==calculateDpr(bt)&&Mt.setDpr(bt),Mt.frameloop!==At&&Mt.setFrameloop(At),Mt.onPointerMissed||Mt.set({onPointerMissed:Tt}),Et&&!is.equ(Et,Mt.performance,shallowLoose)&&Mt.set(Gt=>({performance:{...Gt.performance,...Et}})),ot=yt,at=!0,this},render(ct){return at||this.configure(),reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:it,children:ct,onCreated:ot,rootElement:_e}),st,null,()=>{}),it},unmount(){unmountComponentAtNode(_e)}}}function Provider({store:_e,children:_,onCreated:tt,rootElement:nt}){return useIsomorphicLayoutEffect(()=>{const rt=_e.getState();rt.set(it=>({internal:{...it.internal,active:!0}})),tt&&tt(rt),_e.getState().events.connected||rt.events.connect==null||rt.events.connect(nt)},[]),jsxRuntimeExports.jsx(context$1.Provider,{value:_e,children:_})}function unmountComponentAtNode(_e,_){const tt=roots.get(_e),nt=tt==null?void 0:tt.fiber;if(nt){const rt=tt==null?void 0:tt.store.getState();rt&&(rt.internal.active=!1),reconciler.updateContainer(null,nt,null,()=>{rt&&setTimeout(()=>{try{var it,st,ot,at;rt.events.disconnect==null||rt.events.disconnect(),(it=rt.gl)==null||(st=it.renderLists)==null||st.dispose==null||st.dispose(),(ot=rt.gl)==null||ot.forceContextLoss==null||ot.forceContextLoss(),(at=rt.gl)!=null&&at.xr&&rt.xr.disconnect(),dispose(rt),roots.delete(_e)}catch{}},500)})}}function createPortal(_e,_,tt){return jsxRuntimeExports.jsx(Portal$2,{children:_e,container:_,state:tt},_.uuid)}function Portal$2({state:_e={},children:_,container:tt}){const{events:nt,size:rt,...it}=_e,st=useStore(),[ot]=reactExports.useState(()=>new Raycaster),[at]=reactExports.useState(()=>new Vector2),lt=reactExports.useCallback((ut,dt)=>{const ht={...ut};Object.keys(ut).forEach(yt=>{(privateKeys.includes(yt)||ut[yt]!==dt[yt]&&dt[yt])&&delete ht[yt]});let mt;if(dt&&rt){const yt=dt.camera;mt=ut.viewport.getCurrentViewport(yt,new Vector3,rt),yt!==ut.camera&&updateCamera(yt,rt)}return{...ht,scene:tt,raycaster:ot,pointer:at,mouse:at,previousRoot:st,events:{...ut.events,...dt==null?void 0:dt.events,...nt},size:{...ut.size,...rt},viewport:{...ut.viewport,...mt},...it}},[_e]),[ct]=reactExports.useState(()=>{const ut=st.getState();return create((ht,mt)=>({...ut,scene:tt,raycaster:ot,pointer:at,mouse:at,previousRoot:st,events:{...ut.events,...nt},size:{...ut.size,...rt},...it,set:ht,get:mt,setEvents:yt=>ht(vt=>({...vt,events:{...vt.events,...yt}}))}))});return reactExports.useEffect(()=>{const ut=st.subscribe(dt=>ct.setState(ht=>lt(dt,ht)));return()=>{ut()}},[lt]),reactExports.useEffect(()=>{ct.setState(ut=>lt(st.getState(),ut))},[lt]),reactExports.useEffect(()=>()=>{ct.destroy()},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reconciler.createPortal(jsxRuntimeExports.jsx(context$1.Provider,{value:ct,children:_}),ct,null)})}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(_e){const{handlePointer:_}=createEvents(_e);return{priority:1,enabled:!0,compute(tt,nt,rt){nt.pointer.set(tt.offsetX/nt.size.width*2-1,-(tt.offsetY/nt.size.height)*2+1),nt.raycaster.setFromCamera(nt.pointer,nt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((tt,nt)=>({...tt,[nt]:_(nt)}),{}),update:()=>{var tt;const{events:nt,internal:rt}=_e.getState();(tt=rt.lastEvent)!=null&&tt.current&&nt.handlers&&nt.handlers.onPointerMove(rt.lastEvent.current)},connect:tt=>{var nt;const{set:rt,events:it}=_e.getState();it.disconnect==null||it.disconnect(),rt(st=>({events:{...st.events,connected:tt}})),Object.entries((nt=it.handlers)!=null?nt:[]).forEach(([st,ot])=>{const[at,lt]=DOM_EVENTS[st];tt.addEventListener(at,ot,{passive:lt})})},disconnect:()=>{const{set:tt,events:nt}=_e.getState();if(nt.connected){var rt;Object.entries((rt=nt.handlers)!=null?rt:[]).forEach(([it,st])=>{if(nt&&nt.connected instanceof HTMLElement){const[ot]=DOM_EVENTS[it];nt.connected.removeEventListener(ot,st)}}),tt(it=>({events:{...it.events,connected:void 0}}))}}}}function debounce$1(_e,_,tt){var nt,rt,it,st,ot;_==null&&(_=100);function at(){var ct=Date.now()-st;ct<_&&ct>=0?nt=setTimeout(at,_-ct):(nt=null,tt||(ot=_e.apply(it,rt),it=rt=null))}var lt=function(){it=this,rt=arguments,st=Date.now();var ct=tt&&!nt;return nt||(nt=setTimeout(at,_)),ct&&(ot=_e.apply(it,rt),it=rt=null),ot};return lt.clear=function(){nt&&(clearTimeout(nt),nt=null)},lt.flush=function(){nt&&(ot=_e.apply(it,rt),it=rt=null,clearTimeout(nt),nt=null)},lt}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;const createDebounce=getDefaultExportFromCjs(debounce_1);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(_e,_,tt)=>_ in _e?__defProp(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:tt}):_e[_]=tt,__spreadValues=(_e,_)=>{for(var tt in _||(_={}))__hasOwnProp.call(_,tt)&&__defNormalProp(_e,tt,_[tt]);if(__getOwnPropSymbols)for(var tt of __getOwnPropSymbols(_))__propIsEnum.call(_,tt)&&__defNormalProp(_e,tt,_[tt]);return _e},__spreadProps=(_e,_)=>__defProps(_e,__getOwnPropDescs(_)),_a$1,_b$1;typeof window<"u"&&((_a$1=window.document)!=null&&_a$1.createElement||((_b$1=window.navigator)==null?void 0:_b$1.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(_e,_,tt){if(!_e)return;if(tt(_e)===!0)return _e;let nt=_e.child;for(;nt;){const rt=traverseFiber(nt,_,tt);if(rt)return rt;nt=nt.sibling}}function wrapContext(_e){try{return Object.defineProperties(_e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return _e}}const error=console.error;console.error=function(){const _e=[...arguments].join("");if(_e!=null&&_e.startsWith("Warning:")&&_e.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const _e=reactExports.useContext(FiberContext);if(_e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const nt of[_e,_e==null?void 0:_e.alternate]){if(!nt)continue;const rt=traverseFiber(nt,!1,it=>{let st=it.memoizedState;for(;st;){if(st.memoizedState===_)return!0;st=st.next}});if(rt)return rt}},[_e,_])}function useContextMap(){const _e=useFiber(),[_]=reactExports.useState(()=>new Map);_.clear();let tt=_e;for(;tt;){if(tt.type&&typeof tt.type=="object"){const rt=tt.type._context===void 0&&tt.type.Provider===tt.type?tt.type:tt.type._context;rt&&rt!==FiberContext&&!_.has(rt)&&_.set(rt,reactExports.useContext(wrapContext(rt)))}tt=tt.return}return _}function useContextBridge(){const _e=useContextMap();return reactExports.useMemo(()=>Array.from(_e.keys()).reduce((_,tt)=>nt=>reactExports.createElement(_,null,reactExports.createElement(tt.Provider,__spreadProps(__spreadValues({},nt),{value:_e.get(tt)}))),_=>reactExports.createElement(FiberProvider,__spreadValues({},_))),[_e])}function useMeasure({debounce:_e,scroll:_,polyfill:tt,offsetSize:nt}={debounce:0,scroll:!1,offsetSize:!1}){const rt=tt||typeof window<"u"&&window.ResizeObserver,[it,st]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!rt)return it.width=1280,it.height=800,[()=>{},it,()=>{}];const ot=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:it,orientationHandler:null}),at=_e?typeof _e=="number"?_e:_e.scroll:null,lt=_e?typeof _e=="number"?_e:_e.resize:null,ct=reactExports.useRef(!1);reactExports.useEffect(()=>(ct.current=!0,()=>void(ct.current=!1)));const[ut,dt,ht]=reactExports.useMemo(()=>{const pt=()=>{if(!ot.current.element)return;const{left:_t,top:xt,width:St,height:At,bottom:bt,right:Et,x:wt,y:Rt}=ot.current.element.getBoundingClientRect(),Tt={left:_t,top:xt,width:St,height:At,bottom:bt,right:Et,x:wt,y:Rt};ot.current.element instanceof HTMLElement&&nt&&(Tt.height=ot.current.element.offsetHeight,Tt.width=ot.current.element.offsetWidth),Object.freeze(Tt),ct.current&&!areBoundsEqual(ot.current.lastBounds,Tt)&&st(ot.current.lastBounds=Tt)};return[pt,lt?createDebounce(pt,lt):pt,at?createDebounce(pt,at):pt]},[st,nt,at,lt]);function mt(){ot.current.scrollContainers&&(ot.current.scrollContainers.forEach(pt=>pt.removeEventListener("scroll",ht,!0)),ot.current.scrollContainers=null),ot.current.resizeObserver&&(ot.current.resizeObserver.disconnect(),ot.current.resizeObserver=null),ot.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",ot.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",ot.current.orientationHandler))}function yt(){var pt;ot.current.element&&(ot.current.resizeObserver=new rt(dt),(pt=ot.current.resizeObserver)==null||pt.observe(ot.current.element),_&&ot.current.scrollContainers&&ot.current.scrollContainers.forEach(_t=>_t.addEventListener("scroll",ht,{capture:!0,passive:!0})),ot.current.orientationHandler=()=>{ht()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",ot.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",ot.current.orientationHandler))}const vt=pt=>{!pt||pt===ot.current.element||(mt(),ot.current.element=pt,ot.current.scrollContainers=findScrollContainers(pt),yt())};return useOnWindowScroll(ht,!!_),useOnWindowResize(dt),reactExports.useEffect(()=>{mt(),yt()},[_,ht,dt]),reactExports.useEffect(()=>mt,[]),[vt,it,ut]}function useOnWindowResize(_e){reactExports.useEffect(()=>{const _=_e;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[_e])}function useOnWindowScroll(_e,_){reactExports.useEffect(()=>{if(_){const tt=_e;return window.addEventListener("scroll",tt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",tt,!0)}},[_e,_])}function findScrollContainers(_e){const _=[];if(!_e||_e===document.body)return _;const{overflow:tt,overflowX:nt,overflowY:rt}=window.getComputedStyle(_e);return[tt,nt,rt].some(it=>it==="auto"||it==="scroll")&&_.push(_e),[..._,...findScrollContainers(_e.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(_e,_)=>keys.every(tt=>_e[tt]===_[tt]),CanvasImpl=reactExports.forwardRef(function({children:_,fallback:tt,resize:nt,style:rt,gl:it,events:st=createPointerEvents,eventSource:ot,eventPrefix:at,shadows:lt,linear:ct,flat:ut,legacy:dt,orthographic:ht,frameloop:mt,dpr:yt,performance:vt,raycaster:pt,camera:_t,scene:xt,onPointerMissed:St,onCreated:At,...bt},Et){reactExports.useMemo(()=>extend$2(THREE),[]);const wt=useContextBridge(),[Rt,Tt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...nt}),Mt=reactExports.useRef(null),Lt=reactExports.useRef(null);reactExports.useImperativeHandle(Et,()=>Mt.current);const Ft=useMutableCallback(St),[Ht,Kt]=reactExports.useState(!1),[Wt,Jt]=reactExports.useState(!1);if(Ht)throw Ht;if(Wt)throw Wt;const Ot=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Gt=Mt.current;Tt.width>0&&Tt.height>0&&Gt&&(Ot.current||(Ot.current=createRoot(Gt)),Ot.current.configure({gl:it,events:st,shadows:lt,linear:ct,flat:ut,legacy:dt,orthographic:ht,frameloop:mt,dpr:yt,performance:vt,raycaster:pt,camera:_t,scene:xt,size:Tt,onPointerMissed:(...zt)=>Ft.current==null?void 0:Ft.current(...zt),onCreated:zt=>{zt.events.connect==null||zt.events.connect(ot?isRef$1(ot)?ot.current:ot:Lt.current),at&&zt.setEvents({compute:(Vt,Dt)=>{const It=Vt[at+"X"],Ut=Vt[at+"Y"];Dt.pointer.set(It/Dt.size.width*2-1,-(Ut/Dt.size.height)*2+1),Dt.raycaster.setFromCamera(Dt.pointer,Dt.camera)}}),At==null||At(zt)}}),Ot.current.render(jsxRuntimeExports.jsx(wt,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:Jt,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Kt}),children:_})})})))}),reactExports.useEffect(()=>{const Gt=Mt.current;if(Gt)return()=>unmountComponentAtNode(Gt)},[]);const kt=ot?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:Lt,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:kt,...rt},...bt,children:jsxRuntimeExports.jsx("div",{ref:Rt,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Mt,style:{display:"block"},children:tt})})})}),Canvas$1=reactExports.forwardRef(function(_,tt){return jsxRuntimeExports.jsx(FiberProvider,{children:jsxRuntimeExports.jsx(CanvasImpl,{..._,ref:tt})})});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)({}).hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends$1.apply(null,arguments)}function clamp$2(_e,_,tt){return Math.max(_,Math.min(_e,tt))}const V$2={toVector(_e,_){return _e===void 0&&(_e=_),Array.isArray(_e)?_e:[_e,_e]},add(_e,_){return[_e[0]+_[0],_e[1]+_[1]]},sub(_e,_){return[_e[0]-_[0],_e[1]-_[1]]},addTo(_e,_){_e[0]+=_[0],_e[1]+=_[1]},subTo(_e,_){_e[0]-=_[0],_e[1]-=_[1]}};function rubberband(_e,_,tt){return _===0||Math.abs(_)===1/0?Math.pow(_e,tt*5):_e*_*tt/(_+tt*_e)}function rubberbandIfOutOfBounds(_e,_,tt,nt=.15){return nt===0?clamp$2(_e,_,tt):_e<_?-rubberband(_-_e,tt-_,nt)+_:_e>tt?+rubberband(_e-tt,tt-_,nt)+tt:_e}function computeRubberband(_e,[_,tt],[nt,rt]){const[[it,st],[ot,at]]=_e;return[rubberbandIfOutOfBounds(_,it,st,nt),rubberbandIfOutOfBounds(tt,ot,at,rt)]}function _toPrimitive(_e,_){if(typeof _e!="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var nt=tt.call(_e,_||"default");if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _toPropertyKey(_e){var _=_toPrimitive(_e,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty$3(_e,_,tt){return _=_toPropertyKey(_),_ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function ownKeys$3(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2$1(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$3(Object(tt),!0).forEach(function(nt){_defineProperty$3(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$3(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(_e){return _e?_e[0].toUpperCase()+_e.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(_e=!1,_){return _e&&!actionsWithoutCaptureSupported.includes(_)}function toHandlerProp(_e,_="",tt=!1){const nt=EVENT_TYPE_MAP[_e],rt=nt&&nt[_]||_;return"on"+capitalize(_e)+capitalize(rt)+(hasCapture(tt,rt)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(_e){let _=_e.substring(2).toLowerCase();const tt=!!~_.indexOf("passive");tt&&(_=_.replace("passive",""));const nt=pointerCaptureEvents.includes(_)?"capturecapture":"capture",rt=!!~_.indexOf(nt);return rt&&(_=_.replace("capture","")),{device:_,capture:rt,passive:tt}}function toDomEventType(_e,_=""){const tt=EVENT_TYPE_MAP[_e],nt=tt&&tt[_]||_;return _e+nt}function isTouch(_e){return"touches"in _e}function getPointerType(_e){return isTouch(_e)?"touch":"pointerType"in _e?_e.pointerType:"mouse"}function getCurrentTargetTouchList(_e){return Array.from(_e.touches).filter(_=>{var tt,nt;return _.target===_e.currentTarget||((tt=_e.currentTarget)===null||tt===void 0||(nt=tt.contains)===null||nt===void 0?void 0:nt.call(tt,_.target))})}function getTouchList(_e){return _e.type==="touchend"||_e.type==="touchcancel"?_e.changedTouches:_e.targetTouches}function getValueEvent(_e){return isTouch(_e)?getTouchList(_e)[0]:_e}function touchIds(_e){return getCurrentTargetTouchList(_e).map(_=>_.identifier)}function pointerId(_e){const _=getValueEvent(_e);return isTouch(_e)?_.identifier:_.pointerId}function pointerValues(_e){const _=getValueEvent(_e);return[_.clientX,_.clientY]}function getEventDetails(_e){const _={};if("buttons"in _e&&(_.buttons=_e.buttons),"shiftKey"in _e){const{shiftKey:tt,altKey:nt,metaKey:rt,ctrlKey:it}=_e;Object.assign(_,{shiftKey:tt,altKey:nt,metaKey:rt,ctrlKey:it})}return _}function call(_e,..._){return typeof _e=="function"?_e(..._):_e}function noop$1(){}function chain(..._e){return _e.length===0?noop$1:_e.length===1?_e[0]:function(){let _;for(const tt of _e)_=tt.apply(this,arguments)||_;return _}}function assignDefault(_e,_){return Object.assign({},_,_e||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(_,tt,nt){this.ctrl=_,this.args=tt,this.key=nt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(_){this.ctrl.state[this.key]=_}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:_,shared:tt,ingKey:nt,args:rt}=this;tt[nt]=_._active=_.active=_._blocked=_._force=!1,_._step=[!1,!1],_.intentional=!1,_._movement=[0,0],_._distance=[0,0],_._direction=[0,0],_._delta=[0,0],_._bounds=[[-1/0,1/0],[-1/0,1/0]],_.args=rt,_.axis=void 0,_.memo=void 0,_.elapsedTime=_.timeDelta=0,_.direction=[0,0],_.distance=[0,0],_.overflow=[0,0],_._movementBound=[!1,!1],_.velocity=[0,0],_.movement=[0,0],_.delta=[0,0],_.timeStamp=0}start(_){const tt=this.state,nt=this.config;tt._active||(this.reset(),this.computeInitial(),tt._active=!0,tt.target=_.target,tt.currentTarget=_.currentTarget,tt.lastOffset=nt.from?call(nt.from,tt):tt.offset,tt.offset=tt.lastOffset,tt.startTime=tt.timeStamp=_.timeStamp)}computeValues(_){const tt=this.state;tt._values=_,tt.values=this.config.transform(_)}computeInitial(){const _=this.state;_._initial=_._values,_.initial=_.values}compute(_){const{state:tt,config:nt,shared:rt}=this;tt.args=this.args;let it=0;if(_&&(tt.event=_,nt.preventDefault&&_.cancelable&&tt.event.preventDefault(),tt.type=_.type,rt.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,rt.locked=!!document.pointerLockElement,Object.assign(rt,getEventDetails(_)),rt.down=rt.pressed=rt.buttons%2===1||rt.touches>0,it=_.timeStamp-tt.timeStamp,tt.timeStamp=_.timeStamp,tt.elapsedTime=tt.timeStamp-tt.startTime),tt._active){const bt=tt._delta.map(Math.abs);V$2.addTo(tt._distance,bt)}this.axisIntent&&this.axisIntent(_);const[st,ot]=tt._movement,[at,lt]=nt.threshold,{_step:ct,values:ut}=tt;if(nt.hasCustomTransform?(ct[0]===!1&&(ct[0]=Math.abs(st)>=at&&ut[0]),ct[1]===!1&&(ct[1]=Math.abs(ot)>=lt&&ut[1])):(ct[0]===!1&&(ct[0]=Math.abs(st)>=at&&Math.sign(st)*at),ct[1]===!1&&(ct[1]=Math.abs(ot)>=lt&&Math.sign(ot)*lt)),tt.intentional=ct[0]!==!1||ct[1]!==!1,!tt.intentional)return;const dt=[0,0];if(nt.hasCustomTransform){const[bt,Et]=ut;dt[0]=ct[0]!==!1?bt-ct[0]:0,dt[1]=ct[1]!==!1?Et-ct[1]:0}else dt[0]=ct[0]!==!1?st-ct[0]:0,dt[1]=ct[1]!==!1?ot-ct[1]:0;this.restrictToAxis&&!tt._blocked&&this.restrictToAxis(dt);const ht=tt.offset,mt=tt._active&&!tt._blocked||tt.active;mt&&(tt.first=tt._active&&!tt.active,tt.last=!tt._active&&tt.active,tt.active=rt[this.ingKey]=tt._active,_&&(tt.first&&("bounds"in nt&&(tt._bounds=call(nt.bounds,tt)),this.setup&&this.setup()),tt.movement=dt,this.computeOffset()));const[yt,vt]=tt.offset,[[pt,_t],[xt,St]]=tt._bounds;tt.overflow=[yt<pt?-1:yt>_t?1:0,vt<xt?-1:vt>St?1:0],tt._movementBound[0]=tt.overflow[0]?tt._movementBound[0]===!1?tt._movement[0]:tt._movementBound[0]:!1,tt._movementBound[1]=tt.overflow[1]?tt._movementBound[1]===!1?tt._movement[1]:tt._movementBound[1]:!1;const At=tt._active?nt.rubberband||[0,0]:[0,0];if(tt.offset=computeRubberband(tt._bounds,tt.offset,At),tt.delta=V$2.sub(tt.offset,ht),this.computeMovement(),mt&&(!tt.last||it>BEFORE_LAST_KINEMATICS_DELAY)){tt.delta=V$2.sub(tt.offset,ht);const bt=tt.delta.map(Math.abs);V$2.addTo(tt.distance,bt),tt.direction=tt.delta.map(Math.sign),tt._direction=tt._delta.map(Math.sign),!tt.first&&it>0&&(tt.velocity=[bt[0]/it,bt[1]/it],tt.timeDelta=it)}}emit(){const _=this.state,tt=this.shared,nt=this.config;if(_._active||this.clean(),(_._blocked||!_.intentional)&&!_._force&&!nt.triggerAllEvents)return;const rt=this.handler(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},tt),_),{},{[this.aliasKey]:_.values}));rt!==void 0&&(_.memo=rt)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([_e,_],tt){const nt=Math.abs(_e),rt=Math.abs(_);if(nt>rt&&nt>tt)return"x";if(rt>nt&&rt>tt)return"y"}class CoordinatesEngine extends Engine{constructor(..._){super(..._),_defineProperty$3(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$2.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$2.sub(this.state.offset,this.state.lastOffset)}axisIntent(_){const tt=this.state,nt=this.config;if(!tt.axis&&_){const rt=typeof nt.axisThreshold=="object"?nt.axisThreshold[getPointerType(_)]:nt.axisThreshold;tt.axis=selectAxis(tt._movement,rt)}tt._blocked=(nt.lockDirection||!!nt.axis)&&!tt.axis||!!nt.axis&&nt.axis!==tt.axis}restrictToAxis(_){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":_[1]=0;break;case"y":_[0]=0;break}}}const identity=_e=>_e,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(_e=!0){return _e},eventOptions(_e,_,tt){return _objectSpread2$1(_objectSpread2$1({},tt.shared.eventOptions),_e)},preventDefault(_e=!1){return _e},triggerAllEvents(_e=!1){return _e},rubberband(_e=0){switch(_e){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$2.toVector(_e)}},from(_e){if(typeof _e=="function")return _e;if(_e!=null)return V$2.toVector(_e)},transform(_e,_,tt){const nt=_e||tt.shared.transform;return this.hasCustomTransform=!!nt,nt||identity},threshold(_e){return V$2.toVector(_e,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{axis(_e,_,{axis:tt}){if(this.lockDirection=tt==="lock",!this.lockDirection)return tt},axisThreshold(_e=DEFAULT_AXIS_THRESHOLD){return _e},bounds(_e={}){if(typeof _e=="function")return it=>coordinatesConfigResolver.bounds(_e(it));if("current"in _e)return()=>_e.current;if(typeof HTMLElement=="function"&&_e instanceof HTMLElement)return _e;const{left:_=-1/0,right:tt=1/0,top:nt=-1/0,bottom:rt=1/0}=_e;return[[_,tt],[nt,rt]]}}),KEYS_DELTA_MAP={ArrowRight:(_e,_=1)=>[_e*_,0],ArrowLeft:(_e,_=1)=>[-1*_e*_,0],ArrowUp:(_e,_=1)=>[0,-1*_e*_],ArrowDown:(_e,_=1)=>[0,_e*_]};class DragEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty$3(this,"ingKey","dragging")}reset(){super.reset();const _=this.state;_._pointerId=void 0,_._pointerActive=!1,_._keyboardActive=!1,_._preventScroll=!1,_._delayed=!1,_.swipe=[0,0],_.tap=!1,_.canceled=!1,_.cancel=this.cancel.bind(this)}setup(){const _=this.state;if(_._bounds instanceof HTMLElement){const tt=_._bounds.getBoundingClientRect(),nt=_.currentTarget.getBoundingClientRect(),rt={left:tt.left-nt.left+_.offset[0],right:tt.right-nt.right+_.offset[0],top:tt.top-nt.top+_.offset[1],bottom:tt.bottom-nt.bottom+_.offset[1]};_._bounds=coordinatesConfigResolver.bounds(rt)}}cancel(){const _=this.state;_.canceled||(_.canceled=!0,_._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(_){const tt=this.config,nt=this.state;if(_.buttons!=null&&(Array.isArray(tt.pointerButtons)?!tt.pointerButtons.includes(_.buttons):tt.pointerButtons!==-1&&tt.pointerButtons!==_.buttons))return;const rt=this.ctrl.setEventIds(_);tt.pointerCapture&&_.target.setPointerCapture(_.pointerId),!(rt&&rt.size>1&&nt._pointerActive)&&(this.start(_),this.setupPointer(_),nt._pointerId=pointerId(_),nt._pointerActive=!0,this.computeValues(pointerValues(_)),this.computeInitial(),tt.preventScrollAxis&&getPointerType(_)!=="mouse"?(nt._active=!1,this.setupScrollPrevention(_)):tt.delay>0?(this.setupDelayTrigger(_),tt.triggerAllEvents&&(this.compute(_),this.emit())):this.startPointerDrag(_))}startPointerDrag(_){const tt=this.state;tt._active=!0,tt._preventScroll=!0,tt._delayed=!1,this.compute(_),this.emit()}pointerMove(_){const tt=this.state,nt=this.config;if(!tt._pointerActive)return;const rt=pointerId(_);if(tt._pointerId!==void 0&&rt!==tt._pointerId)return;const it=pointerValues(_);if(document.pointerLockElement===_.target?tt._delta=[_.movementX,_.movementY]:(tt._delta=V$2.sub(it,tt._values),this.computeValues(it)),V$2.addTo(tt._movement,tt._delta),this.compute(_),tt._delayed&&tt.intentional){this.timeoutStore.remove("dragDelay"),tt.active=!1,this.startPointerDrag(_);return}if(nt.preventScrollAxis&&!tt._preventScroll)if(tt.axis)if(tt.axis===nt.preventScrollAxis||nt.preventScrollAxis==="xy"){tt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(_);return}else return;this.emit()}pointerUp(_){this.ctrl.setEventIds(_);try{this.config.pointerCapture&&_.target.hasPointerCapture(_.pointerId)&&_.target.releasePointerCapture(_.pointerId)}catch{}const tt=this.state,nt=this.config;if(!tt._active||!tt._pointerActive)return;const rt=pointerId(_);if(tt._pointerId!==void 0&&rt!==tt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(_);const[it,st]=tt._distance;if(tt.tap=it<=nt.tapsThreshold&&st<=nt.tapsThreshold,tt.tap&&nt.filterTaps)tt._force=!0;else{const[ot,at]=tt._delta,[lt,ct]=tt._movement,[ut,dt]=nt.swipe.velocity,[ht,mt]=nt.swipe.distance,yt=nt.swipe.duration;if(tt.elapsedTime<yt){const vt=Math.abs(ot/tt.timeDelta),pt=Math.abs(at/tt.timeDelta);vt>ut&&Math.abs(lt)>ht&&(tt.swipe[0]=Math.sign(ot)),pt>dt&&Math.abs(ct)>mt&&(tt.swipe[1]=Math.sign(at))}}this.emit()}pointerClick(_){!this.state.tap&&_.detail>0&&(_.preventDefault(),_.stopPropagation())}setupPointer(_){const tt=this.config,nt=tt.device;tt.pointerLock&&_.currentTarget.requestPointerLock(),tt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,nt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(_){this.state._preventScroll&&_.cancelable&&_.preventDefault()}setupScrollPrevention(_){this.state._preventScroll=!1,persistEvent(_);const tt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",tt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",tt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,_)}setupDelayTrigger(_){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(_)},this.config.delay)}keyDown(_){const tt=KEYS_DELTA_MAP[_.key];if(tt){const nt=this.state,rt=_.shiftKey?10:_.altKey?.1:1;this.start(_),nt._delta=tt(this.config.keyboardDisplacement,rt),nt._keyboardActive=!0,V$2.addTo(nt._movement,nt._delta),this.compute(_),this.emit()}}keyUp(_){_.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(_),this.emit())}bind(_){const tt=this.config.device;_(tt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(_(tt,"change",this.pointerMove.bind(this)),_(tt,"end",this.pointerUp.bind(this)),_(tt,"cancel",this.pointerUp.bind(this)),_("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(_("key","down",this.keyDown.bind(this)),_("key","up",this.keyUp.bind(this))),this.config.filterTaps&&_("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(_e){"persist"in _e&&typeof _e.persist=="function"&&_e.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:supportsTouchEvents(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{device(_e,_,{pointer:{touch:tt=!1,lock:nt=!1,mouse:rt=!1}={}}){return this.pointerLock=nt&&SUPPORT.pointerLock,SUPPORT.touch&&tt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!rt?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(_e,_,{preventScroll:tt}){if(this.preventScrollDelay=typeof tt=="number"?tt:tt||tt===void 0&&_e?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||tt===!1))return _e||(tt!==void 0?"y":void 0)},pointerCapture(_e,_,{pointer:{capture:tt=!0,buttons:nt=1,keys:rt=!0}={}}){return this.pointerButtons=nt,this.keys=rt,!this.pointerLock&&this.device==="pointer"&&tt},threshold(_e,_,{filterTaps:tt=!1,tapsThreshold:nt=3,axis:rt=void 0}){const it=V$2.toVector(_e,tt?nt:rt?1:0);return this.filterTaps=tt,this.tapsThreshold=nt,it},swipe({velocity:_e=DEFAULT_SWIPE_VELOCITY,distance:_=DEFAULT_SWIPE_DISTANCE,duration:tt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$2.toVector(_e)),distance:this.transform(V$2.toVector(_)),duration:tt}},delay(_e=0){switch(_e){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return _e}},axisThreshold(_e){return _e?_objectSpread2$1(_objectSpread2$1({},DEFAULT_DRAG_AXIS_THRESHOLD),_e):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(_e=DEFAULT_KEYBOARD_DISPLACEMENT){return _e}});_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{device(_e,_,{shared:tt,pointer:{touch:nt=!1}={}}){if(tt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&nt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(_e,_,{scaleBounds:tt={},angleBounds:nt={}}){const rt=st=>{const ot=assignDefault(call(tt,st),{min:-1/0,max:1/0});return[ot.min,ot.max]},it=st=>{const ot=assignDefault(call(nt,st),{min:-1/0,max:1/0});return[ot.min,ot.max]};return typeof tt!="function"&&typeof nt!="function"?[rt(),it()]:st=>[rt(st),it(st)]},threshold(_e,_,tt){return this.lockDirection=tt.axis==="lock",V$2.toVector(_e,this.lockDirection?[.1,3]:0)},modifierKey(_e){return _e===void 0?"ctrlKey":_e},pinchOnWheel(_e=!0){return _e}});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(_e=!0)=>_e});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(_e=!0)=>_e});const EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(_e){EngineMap.set(_e.key,_e.engine),ConfigResolverMap.set(_e.key,_e.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver};function _objectWithoutPropertiesLoose$2(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}function _objectWithoutProperties$2(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$2(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}const sharedConfigResolver={target(_e){if(_e)return()=>"current"in _e?_e.current:_e},enabled(_e=!0){return _e},window(_e=SUPPORT.isBrowser?window:void 0){return _e},eventOptions({passive:_e=!0,capture:_=!1}={}){return{passive:_e,capture:_}},transform(_e){return _e}},_excluded$c=["target","eventOptions","window","enabled","transform"];function resolveWith(_e={},_){const tt={};for(const[nt,rt]of Object.entries(_))switch(typeof rt){case"function":tt[nt]=rt.call(tt,_e[nt],nt,_e);break;case"object":tt[nt]=resolveWith(_e[nt],rt);break;case"boolean":rt&&(tt[nt]=_e[nt]);break}return tt}function parse$1(_e,_,tt={}){const nt=_e,{target:rt,eventOptions:it,window:st,enabled:ot,transform:at}=nt,lt=_objectWithoutProperties$2(nt,_excluded$c);if(tt.shared=resolveWith({target:rt,eventOptions:it,window:st,enabled:ot,transform:at},sharedConfigResolver),_){const ct=ConfigResolverMap.get(_);tt[_]=resolveWith(_objectSpread2$1({shared:tt.shared},lt),ct)}else for(const ct in lt){const ut=ConfigResolverMap.get(ct);ut&&(tt[ct]=resolveWith(_objectSpread2$1({shared:tt.shared},lt[ct]),ut))}return tt}class EventStore{constructor(_,tt){_defineProperty$3(this,"_listeners",new Set),this._ctrl=_,this._gestureKey=tt}add(_,tt,nt,rt,it){const st=this._listeners,ot=toDomEventType(tt,nt),at=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},lt=_objectSpread2$1(_objectSpread2$1({},at),it);_.addEventListener(ot,rt,lt);const ct=()=>{_.removeEventListener(ot,rt,lt),st.delete(ct)};return st.add(ct),ct}clean(){this._listeners.forEach(_=>_()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$3(this,"_timeouts",new Map)}add(_,tt,nt=140,...rt){this.remove(_),this._timeouts.set(_,window.setTimeout(tt,nt,...rt))}remove(_){const tt=this._timeouts.get(_);tt&&window.clearTimeout(tt)}clean(){this._timeouts.forEach(_=>void window.clearTimeout(_)),this._timeouts.clear()}}class Controller{constructor(_){_defineProperty$3(this,"gestures",new Set),_defineProperty$3(this,"_targetEventStore",new EventStore(this)),_defineProperty$3(this,"gestureEventStores",{}),_defineProperty$3(this,"gestureTimeoutStores",{}),_defineProperty$3(this,"handlers",{}),_defineProperty$3(this,"config",{}),_defineProperty$3(this,"pointerIds",new Set),_defineProperty$3(this,"touchIds",new Set),_defineProperty$3(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,_)}setEventIds(_){if(isTouch(_))return this.touchIds=new Set(touchIds(_)),this.touchIds;if("pointerId"in _)return _.type==="pointerup"||_.type==="pointercancel"?this.pointerIds.delete(_.pointerId):_.type==="pointerdown"&&this.pointerIds.add(_.pointerId),this.pointerIds}applyHandlers(_,tt){this.handlers=_,this.nativeHandlers=tt}applyConfig(_,tt){this.config=parse$1(_,tt,this.config)}clean(){this._targetEventStore.clean();for(const _ of this.gestures)this.gestureEventStores[_].clean(),this.gestureTimeoutStores[_].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(..._){const tt=this.config.shared,nt={};let rt;if(!(tt.target&&(rt=tt.target(),!rt))){if(tt.enabled){for(const st of this.gestures){const ot=this.config[st],at=bindToProps(nt,ot.eventOptions,!!rt);if(ot.enabled){const lt=EngineMap.get(st);new lt(this,_,st).bind(at)}}const it=bindToProps(nt,tt.eventOptions,!!rt);for(const st in this.nativeHandlers)it(st,"",ot=>this.nativeHandlers[st](_objectSpread2$1(_objectSpread2$1({},this.state.shared),{},{event:ot,args:_})),void 0,!0)}for(const it in nt)nt[it]=chain(...nt[it]);if(!rt)return nt;for(const it in nt){const{device:st,capture:ot,passive:at}=parseProp(it);this._targetEventStore.add(rt,st,"",nt[it],{capture:ot,passive:at})}}}}function setupGesture(_e,_){_e.gestures.add(_),_e.gestureEventStores[_]=new EventStore(_e,_),_e.gestureTimeoutStores[_]=new TimeoutStore}function resolveGestures(_e,_){_.drag&&setupGesture(_e,"drag"),_.wheel&&setupGesture(_e,"wheel"),_.scroll&&setupGesture(_e,"scroll"),_.move&&setupGesture(_e,"move"),_.pinch&&setupGesture(_e,"pinch"),_.hover&&setupGesture(_e,"hover")}const bindToProps=(_e,_,tt)=>(nt,rt,it,st={},ot=!1)=>{var at,lt;const ct=(at=st.capture)!==null&&at!==void 0?at:_.capture,ut=(lt=st.passive)!==null&&lt!==void 0?lt:_.passive;let dt=ot?nt:toHandlerProp(nt,rt,ct);tt&&ut&&(dt+="Passive"),_e[dt]=_e[dt]||[],_e[dt].push(it)};function useRecognizers(_e,_={},tt,nt){const rt=React.useMemo(()=>new Controller(_e),[]);if(rt.applyHandlers(_e,nt),rt.applyConfig(_,tt),React.useEffect(rt.effect.bind(rt)),React.useEffect(()=>rt.clean.bind(rt),[]),_.target===void 0)return rt.bind.bind(rt)}function useDrag$1(_e,_){return registerAction(dragAction),useRecognizers({drag:_e},_||{},"drag")}const subscribeWithSelector=_e=>(_,tt,nt)=>{const rt=nt.subscribe;return nt.subscribe=(st,ot,at)=>{let lt=st;if(ot){const ct=(at==null?void 0:at.equalityFn)||Object.is;let ut=st(nt.getState());lt=dt=>{const ht=st(dt);if(!ct(ut,ht)){const mt=ut;ot(ut=ht,mt)}},at!=null&&at.fireImmediately&&ot(ut,ut)}return rt(lt)},_e(_,tt,nt)},version$1=parseInt(REVISION.replace(/\D+/g,""));function toTrianglesDrawMode(_e,_){if(_===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),_e;if(_===TriangleFanDrawMode||_===TriangleStripDrawMode){let tt=_e.getIndex();if(tt===null){const st=[],ot=_e.getAttribute("position");if(ot!==void 0){for(let at=0;at<ot.count;at++)st.push(at);_e.setIndex(st),tt=_e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),_e}const nt=tt.count-2,rt=[];if(tt)if(_===TriangleFanDrawMode)for(let st=1;st<=nt;st++)rt.push(tt.getX(0)),rt.push(tt.getX(st)),rt.push(tt.getX(st+1));else for(let st=0;st<nt;st++)st%2===0?(rt.push(tt.getX(st)),rt.push(tt.getX(st+1)),rt.push(tt.getX(st+2))):(rt.push(tt.getX(st+2)),rt.push(tt.getX(st+1)),rt.push(tt.getX(st)));rt.length/3!==nt&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const it=_e.clone();return it.setIndex(rt),it.clearGroups(),it}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",_),_e}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(_e,_){for(var tt=new u16(31),nt=0;nt<31;++nt)tt[nt]=_+=1<<_e[nt-1];for(var rt=new u32(tt[30]),nt=1;nt<30;++nt)for(var it=tt[nt];it<tt[nt+1];++it)rt[it]=it-tt[nt]<<5|nt;return[tt,rt]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i$4=0;i$4<32768;++i$4){var x$2=(i$4&43690)>>>1|(i$4&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev[i$4]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap=function(_e,_,tt){for(var nt=_e.length,rt=0,it=new u16(_);rt<nt;++rt)++it[_e[rt]-1];var st=new u16(_);for(rt=0;rt<_;++rt)st[rt]=st[rt-1]+it[rt-1]<<1;var ot;if(tt){ot=new u16(1<<_);var at=15-_;for(rt=0;rt<nt;++rt)if(_e[rt])for(var lt=rt<<4|_e[rt],ct=_-_e[rt],ut=st[_e[rt]-1]++<<ct,dt=ut|(1<<ct)-1;ut<=dt;++ut)ot[rev[ut]>>>at]=lt}else for(ot=new u16(nt),rt=0;rt<nt;++rt)_e[rt]&&(ot[rt]=rev[st[_e[rt]-1]++]>>>15-_e[rt]);return ot},flt=new u8(288);for(var i$4=0;i$4<144;++i$4)flt[i$4]=8;for(var i$4=144;i$4<256;++i$4)flt[i$4]=9;for(var i$4=256;i$4<280;++i$4)flt[i$4]=7;for(var i$4=280;i$4<288;++i$4)flt[i$4]=8;var fdt=new u8(32);for(var i$4=0;i$4<32;++i$4)fdt[i$4]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$1=function(_e){for(var _=_e[0],tt=1;tt<_e.length;++tt)_e[tt]>_&&(_=_e[tt]);return _},bits=function(_e,_,tt){var nt=_/8|0;return(_e[nt]|_e[nt+1]<<8)>>(_&7)&tt},bits16=function(_e,_){var tt=_/8|0;return(_e[tt]|_e[tt+1]<<8|_e[tt+2]<<16)>>(_&7)},shft=function(_e){return(_e/8|0)+(_e&7&&1)},slc=function(_e,_,tt){(tt==null||tt>_e.length)&&(tt=_e.length);var nt=new(_e instanceof u16?u16:_e instanceof u32?u32:u8)(tt-_);return nt.set(_e.subarray(_,tt)),nt},inflt=function(_e,_,tt){var nt=_e.length;if(!nt||tt&&!tt.l&&nt<5)return _||new u8(0);var rt=!_||tt,it=!tt||tt.i;tt||(tt={}),_||(_=new u8(nt*3));var st=function(Yt){var qt=_.length;if(Yt>qt){var rn=new u8(Math.max(qt*2,Yt));rn.set(_),_=rn}},ot=tt.f||0,at=tt.p||0,lt=tt.b||0,ct=tt.l,ut=tt.d,dt=tt.m,ht=tt.n,mt=nt*8;do{if(!ct){tt.f=ot=bits(_e,at,1);var yt=bits(_e,at+1,3);if(at+=3,yt)if(yt==1)ct=flrm,ut=fdrm,dt=9,ht=5;else if(yt==2){var xt=bits(_e,at,31)+257,St=bits(_e,at+10,15)+4,At=xt+bits(_e,at+5,31)+1;at+=14;for(var bt=new u8(At),Et=new u8(19),wt=0;wt<St;++wt)Et[clim[wt]]=bits(_e,at+wt*3,7);at+=St*3;for(var Rt=max$1(Et),Tt=(1<<Rt)-1,Mt=hMap(Et,Rt,1),wt=0;wt<At;){var Lt=Mt[bits(_e,at,Tt)];at+=Lt&15;var vt=Lt>>>4;if(vt<16)bt[wt++]=vt;else{var Ft=0,Ht=0;for(vt==16?(Ht=3+bits(_e,at,3),at+=2,Ft=bt[wt-1]):vt==17?(Ht=3+bits(_e,at,7),at+=3):vt==18&&(Ht=11+bits(_e,at,127),at+=7);Ht--;)bt[wt++]=Ft}}var Kt=bt.subarray(0,xt),Wt=bt.subarray(xt);dt=max$1(Kt),ht=max$1(Wt),ct=hMap(Kt,dt,1),ut=hMap(Wt,ht,1)}else throw"invalid block type";else{var vt=shft(at)+4,pt=_e[vt-4]|_e[vt-3]<<8,_t=vt+pt;if(_t>nt){if(it)throw"unexpected EOF";break}rt&&st(lt+pt),_.set(_e.subarray(vt,_t),lt),tt.b=lt+=pt,tt.p=at=_t*8;continue}if(at>mt){if(it)throw"unexpected EOF";break}}rt&&st(lt+131072);for(var Jt=(1<<dt)-1,Ot=(1<<ht)-1,kt=at;;kt=at){var Ft=ct[bits16(_e,at)&Jt],Gt=Ft>>>4;if(at+=Ft&15,at>mt){if(it)throw"unexpected EOF";break}if(!Ft)throw"invalid length/literal";if(Gt<256)_[lt++]=Gt;else if(Gt==256){kt=at,ct=null;break}else{var zt=Gt-254;if(Gt>264){var wt=Gt-257,Vt=fleb[wt];zt=bits(_e,at,(1<<Vt)-1)+fl[wt],at+=Vt}var Dt=ut[bits16(_e,at)&Ot],It=Dt>>>4;if(!Dt)throw"invalid distance";at+=Dt&15;var Wt=fd[It];if(It>3){var Vt=fdeb[It];Wt+=bits16(_e,at)&(1<<Vt)-1,at+=Vt}if(at>mt){if(it)throw"unexpected EOF";break}rt&&st(lt+131072);for(var Ut=lt+zt;lt<Ut;lt+=4)_[lt]=_[lt-Wt],_[lt+1]=_[lt+1-Wt],_[lt+2]=_[lt+2-Wt],_[lt+3]=_[lt+3-Wt];lt=Ut}}tt.l=ct,tt.p=kt,tt.b=lt,ct&&(ot=1,tt.m=dt,tt.d=ut,tt.n=ht)}while(!ot);return lt==_.length?_:slc(_,0,lt)},et=new u8(0),zlv=function(_e){if((_e[0]&15)!=8||_e[0]>>>4>7||(_e[0]<<8|_e[1])%31)throw"invalid zlib data";if(_e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(_e,_){return inflt((zlv(_e),_e.subarray(2,-4)),_)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}const isCubeTexture=_e=>_e&&_e.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(_,tt){var nt,rt;const it=isCubeTexture(_),ot=((rt=it?(nt=_.image[0])==null?void 0:nt.width:_.image.width)!=null?rt:1024)/4,at=Math.floor(Math.log2(ot)),lt=Math.pow(2,at),ct=3*Math.max(lt,16*7),ut=4*lt,dt=[it?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/ct}`,`#define CUBEUV_TEXEL_HEIGHT ${1/ut}`,`#define CUBEUV_MAX_MIP ${at}.0`],ht=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,mt=dt.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,yt={map:{value:_},height:{value:(tt==null?void 0:tt.height)||15},radius:{value:(tt==null?void 0:tt.radius)||100}},vt=new IcosahedronGeometry(1,16),pt=new ShaderMaterial({uniforms:yt,fragmentShader:mt,vertexShader:ht,side:DoubleSide});super(vt,pt)}set radius(_){this.material.uniforms.radius.value=_}get radius(){return this.material.uniforms.radius.value}set height(_){this.material.uniforms.height.value=_}get height(){return this.material.uniforms.height.value}}function decodeText(_e){if(typeof TextDecoder<"u")return new TextDecoder().decode(_e);let _="";for(let tt=0,nt=_e.length;tt<nt;tt++)_+=String.fromCharCode(_e[tt]);try{return decodeURIComponent(escape(_))}catch{return _}}const SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",sRGBEncoding$1=3001,LinearEncoding$1=3e3;class GLTFLoader extends Loader{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(tt){return new GLTFMaterialsClearcoatExtension(tt)}),this.register(function(tt){return new GLTFMaterialsDispersionExtension(tt)}),this.register(function(tt){return new GLTFTextureBasisUExtension(tt)}),this.register(function(tt){return new GLTFTextureWebPExtension(tt)}),this.register(function(tt){return new GLTFTextureAVIFExtension(tt)}),this.register(function(tt){return new GLTFMaterialsSheenExtension(tt)}),this.register(function(tt){return new GLTFMaterialsTransmissionExtension(tt)}),this.register(function(tt){return new GLTFMaterialsVolumeExtension(tt)}),this.register(function(tt){return new GLTFMaterialsIorExtension(tt)}),this.register(function(tt){return new GLTFMaterialsEmissiveStrengthExtension(tt)}),this.register(function(tt){return new GLTFMaterialsSpecularExtension(tt)}),this.register(function(tt){return new GLTFMaterialsIridescenceExtension(tt)}),this.register(function(tt){return new GLTFMaterialsAnisotropyExtension(tt)}),this.register(function(tt){return new GLTFMaterialsBumpExtension(tt)}),this.register(function(tt){return new GLTFLightsExtension(tt)}),this.register(function(tt){return new GLTFMeshoptCompression(tt)}),this.register(function(tt){return new GLTFMeshGpuInstancing(tt)})}load(_,tt,nt,rt){const it=this;let st;if(this.resourcePath!=="")st=this.resourcePath;else if(this.path!==""){const lt=LoaderUtils.extractUrlBase(_);st=LoaderUtils.resolveURL(lt,this.path)}else st=LoaderUtils.extractUrlBase(_);this.manager.itemStart(_);const ot=function(lt){rt?rt(lt):console.error(lt),it.manager.itemError(_),it.manager.itemEnd(_)},at=new FileLoader(this.manager);at.setPath(this.path),at.setResponseType("arraybuffer"),at.setRequestHeader(this.requestHeader),at.setWithCredentials(this.withCredentials),at.load(_,function(lt){try{it.parse(lt,st,function(ct){tt(ct),it.manager.itemEnd(_)},ot)}catch(ct){ot(ct)}},nt,ot)}setDRACOLoader(_){return this.dracoLoader=_,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,tt,nt,rt){let it;const st={},ot={};if(typeof _=="string")it=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(decodeText(new Uint8Array(_.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC){try{st[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(_)}catch(ct){rt&&rt(ct);return}it=JSON.parse(st[EXTENSIONS.KHR_BINARY_GLTF].content)}else it=JSON.parse(decodeText(new Uint8Array(_)));else it=_;if(it.asset===void 0||it.asset.version[0]<2){rt&&rt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const at=new GLTFParser(it,{path:tt||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});at.fileLoader.setRequestHeader(this.requestHeader);for(let lt=0;lt<this.pluginCallbacks.length;lt++){const ct=this.pluginCallbacks[lt](at);ct.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),ot[ct.name]=ct,st[ct.name]=!0}if(it.extensionsUsed)for(let lt=0;lt<it.extensionsUsed.length;++lt){const ct=it.extensionsUsed[lt],ut=it.extensionsRequired||[];switch(ct){case EXTENSIONS.KHR_MATERIALS_UNLIT:st[ct]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:st[ct]=new GLTFDracoMeshCompressionExtension(it,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:st[ct]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:st[ct]=new GLTFMeshQuantizationExtension;break;default:ut.indexOf(ct)>=0&&ot[ct]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ct+'".')}}at.setExtensions(st),at.setPlugins(ot),at.parse(nt,rt)}parseAsync(_,tt){const nt=this;return new Promise(function(rt,it){nt.parse(_,tt,rt,it)})}}function GLTFRegistry(){let _e={};return{get:function(_){return _e[_]},add:function(_,tt){_e[_]=tt},remove:function(_){delete _e[_]},removeAll:function(){_e={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,tt=this.parser.json.nodes||[];for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];it.extensions&&it.extensions[this.name]&&it.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,it.extensions[this.name].light)}}_loadLight(_){const tt=this.parser,nt="light:"+_;let rt=tt.cache.get(nt);if(rt)return rt;const it=tt.json,at=((it.extensions&&it.extensions[this.name]||{}).lights||[])[_];let lt;const ct=new Color$1(16777215);at.color!==void 0&&ct.setRGB(at.color[0],at.color[1],at.color[2],LinearSRGBColorSpace);const ut=at.range!==void 0?at.range:0;switch(at.type){case"directional":lt=new DirectionalLight(ct),lt.target.position.set(0,0,-1),lt.add(lt.target);break;case"point":lt=new PointLight(ct),lt.distance=ut;break;case"spot":lt=new SpotLight(ct),lt.distance=ut,at.spot=at.spot||{},at.spot.innerConeAngle=at.spot.innerConeAngle!==void 0?at.spot.innerConeAngle:0,at.spot.outerConeAngle=at.spot.outerConeAngle!==void 0?at.spot.outerConeAngle:Math.PI/4,lt.angle=at.spot.outerConeAngle,lt.penumbra=1-at.spot.innerConeAngle/at.spot.outerConeAngle,lt.target.position.set(0,0,-1),lt.add(lt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+at.type)}return lt.position.set(0,0,0),lt.decay=2,assignExtrasToUserData(lt,at),at.intensity!==void 0&&(lt.intensity=at.intensity),lt.name=tt.createUniqueName(at.name||"light_"+_),rt=Promise.resolve(lt),tt.cache.add(nt,rt),rt}getDependency(_,tt){if(_==="light")return this._loadLight(tt)}createNodeAttachment(_){const tt=this,nt=this.parser,it=nt.json.nodes[_],ot=(it.extensions&&it.extensions[this.name]||{}).light;return ot===void 0?null:this._loadLight(ot).then(function(at){return nt._getNodeRef(tt.cache,ot,at)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,tt,nt){const rt=[];_.color=new Color$1(1,1,1),_.opacity=1;const it=tt.pbrMetallicRoughness;if(it){if(Array.isArray(it.baseColorFactor)){const st=it.baseColorFactor;_.color.setRGB(st[0],st[1],st[2],LinearSRGBColorSpace),_.opacity=st[3]}it.baseColorTexture!==void 0&&rt.push(nt.assignTexture(_,"map",it.baseColorTexture,SRGBColorSpace))}return Promise.all(rt)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,tt){const rt=this.parser.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=rt.extensions[this.name].emissiveStrength;return it!==void 0&&(tt.emissiveIntensity=it),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];if(st.clearcoatFactor!==void 0&&(tt.clearcoat=st.clearcoatFactor),st.clearcoatTexture!==void 0&&it.push(nt.assignTexture(tt,"clearcoatMap",st.clearcoatTexture)),st.clearcoatRoughnessFactor!==void 0&&(tt.clearcoatRoughness=st.clearcoatRoughnessFactor),st.clearcoatRoughnessTexture!==void 0&&it.push(nt.assignTexture(tt,"clearcoatRoughnessMap",st.clearcoatRoughnessTexture)),st.clearcoatNormalTexture!==void 0&&(it.push(nt.assignTexture(tt,"clearcoatNormalMap",st.clearcoatNormalTexture)),st.clearcoatNormalTexture.scale!==void 0)){const ot=st.clearcoatNormalTexture.scale;tt.clearcoatNormalScale=new Vector2(ot,ot)}return Promise.all(it)}}class GLTFMaterialsDispersionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const rt=this.parser.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=rt.extensions[this.name];return tt.dispersion=it.dispersion!==void 0?it.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];return st.iridescenceFactor!==void 0&&(tt.iridescence=st.iridescenceFactor),st.iridescenceTexture!==void 0&&it.push(nt.assignTexture(tt,"iridescenceMap",st.iridescenceTexture)),st.iridescenceIor!==void 0&&(tt.iridescenceIOR=st.iridescenceIor),tt.iridescenceThicknessRange===void 0&&(tt.iridescenceThicknessRange=[100,400]),st.iridescenceThicknessMinimum!==void 0&&(tt.iridescenceThicknessRange[0]=st.iridescenceThicknessMinimum),st.iridescenceThicknessMaximum!==void 0&&(tt.iridescenceThicknessRange[1]=st.iridescenceThicknessMaximum),st.iridescenceThicknessTexture!==void 0&&it.push(nt.assignTexture(tt,"iridescenceThicknessMap",st.iridescenceThicknessTexture)),Promise.all(it)}}class GLTFMaterialsSheenExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[];tt.sheenColor=new Color$1(0,0,0),tt.sheenRoughness=0,tt.sheen=1;const st=rt.extensions[this.name];if(st.sheenColorFactor!==void 0){const ot=st.sheenColorFactor;tt.sheenColor.setRGB(ot[0],ot[1],ot[2],LinearSRGBColorSpace)}return st.sheenRoughnessFactor!==void 0&&(tt.sheenRoughness=st.sheenRoughnessFactor),st.sheenColorTexture!==void 0&&it.push(nt.assignTexture(tt,"sheenColorMap",st.sheenColorTexture,SRGBColorSpace)),st.sheenRoughnessTexture!==void 0&&it.push(nt.assignTexture(tt,"sheenRoughnessMap",st.sheenRoughnessTexture)),Promise.all(it)}}class GLTFMaterialsTransmissionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];return st.transmissionFactor!==void 0&&(tt.transmission=st.transmissionFactor),st.transmissionTexture!==void 0&&it.push(nt.assignTexture(tt,"transmissionMap",st.transmissionTexture)),Promise.all(it)}}class GLTFMaterialsVolumeExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];tt.thickness=st.thicknessFactor!==void 0?st.thicknessFactor:0,st.thicknessTexture!==void 0&&it.push(nt.assignTexture(tt,"thicknessMap",st.thicknessTexture)),tt.attenuationDistance=st.attenuationDistance||1/0;const ot=st.attenuationColor||[1,1,1];return tt.attenuationColor=new Color$1().setRGB(ot[0],ot[1],ot[2],LinearSRGBColorSpace),Promise.all(it)}}class GLTFMaterialsIorExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const rt=this.parser.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=rt.extensions[this.name];return tt.ior=it.ior!==void 0?it.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];tt.specularIntensity=st.specularFactor!==void 0?st.specularFactor:1,st.specularTexture!==void 0&&it.push(nt.assignTexture(tt,"specularIntensityMap",st.specularTexture));const ot=st.specularColorFactor||[1,1,1];return tt.specularColor=new Color$1().setRGB(ot[0],ot[1],ot[2],LinearSRGBColorSpace),st.specularColorTexture!==void 0&&it.push(nt.assignTexture(tt,"specularColorMap",st.specularColorTexture,SRGBColorSpace)),Promise.all(it)}}class GLTFMaterialsBumpExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];return tt.bumpScale=st.bumpFactor!==void 0?st.bumpFactor:1,st.bumpTexture!==void 0&&it.push(nt.assignTexture(tt,"bumpMap",st.bumpTexture)),Promise.all(it)}}class GLTFMaterialsAnisotropyExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,tt){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],st=rt.extensions[this.name];return st.anisotropyStrength!==void 0&&(tt.anisotropy=st.anisotropyStrength),st.anisotropyRotation!==void 0&&(tt.anisotropyRotation=st.anisotropyRotation),st.anisotropyTexture!==void 0&&it.push(nt.assignTexture(tt,"anisotropyMap",st.anisotropyTexture)),Promise.all(it)}}class GLTFTextureBasisUExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(_){const tt=this.parser,nt=tt.json,rt=nt.textures[_];if(!rt.extensions||!rt.extensions[this.name])return null;const it=rt.extensions[this.name],st=tt.options.ktx2Loader;if(!st){if(nt.extensionsRequired&&nt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return tt.loadTextureImage(_,it.source,st)}}class GLTFTextureWebPExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(_){const tt=this.name,nt=this.parser,rt=nt.json,it=rt.textures[_];if(!it.extensions||!it.extensions[tt])return null;const st=it.extensions[tt],ot=rt.images[st.source];let at=nt.textureLoader;if(ot.uri){const lt=nt.options.manager.getHandler(ot.uri);lt!==null&&(at=lt)}return this.detectSupport().then(function(lt){if(lt)return nt.loadTextureImage(_,st.source,at);if(rt.extensionsRequired&&rt.extensionsRequired.indexOf(tt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return nt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const tt=new Image;tt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",tt.onload=tt.onerror=function(){_(tt.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(_){const tt=this.name,nt=this.parser,rt=nt.json,it=rt.textures[_];if(!it.extensions||!it.extensions[tt])return null;const st=it.extensions[tt],ot=rt.images[st.source];let at=nt.textureLoader;if(ot.uri){const lt=nt.options.manager.getHandler(ot.uri);lt!==null&&(at=lt)}return this.detectSupport().then(function(lt){if(lt)return nt.loadTextureImage(_,st.source,at);if(rt.extensionsRequired&&rt.extensionsRequired.indexOf(tt)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return nt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const tt=new Image;tt.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",tt.onload=tt.onerror=function(){_(tt.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(_){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const tt=this.parser.json,nt=tt.bufferViews[_];if(nt.extensions&&nt.extensions[this.name]){const rt=nt.extensions[this.name],it=this.parser.getDependency("buffer",rt.buffer),st=this.parser.options.meshoptDecoder;if(!st||!st.supported){if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return it.then(function(ot){const at=rt.byteOffset||0,lt=rt.byteLength||0,ct=rt.count,ut=rt.byteStride,dt=new Uint8Array(ot,at,lt);return st.decodeGltfBufferAsync?st.decodeGltfBufferAsync(ct,ut,dt,rt.mode,rt.filter).then(function(ht){return ht.buffer}):st.ready.then(function(){const ht=new ArrayBuffer(ct*ut);return st.decodeGltfBuffer(new Uint8Array(ht),ct,ut,dt,rt.mode,rt.filter),ht})})}else return null}}class GLTFMeshGpuInstancing{constructor(_){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const tt=this.parser.json,nt=tt.nodes[_];if(!nt.extensions||!nt.extensions[this.name]||nt.mesh===void 0)return null;const rt=tt.meshes[nt.mesh];for(const lt of rt.primitives)if(lt.mode!==WEBGL_CONSTANTS.TRIANGLES&&lt.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&lt.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&lt.mode!==void 0)return null;const st=nt.extensions[this.name].attributes,ot=[],at={};for(const lt in st)ot.push(this.parser.getDependency("accessor",st[lt]).then(ct=>(at[lt]=ct,at[lt])));return ot.length<1?null:(ot.push(this.parser.createNodeMesh(_)),Promise.all(ot).then(lt=>{const ct=lt.pop(),ut=ct.isGroup?ct.children:[ct],dt=lt[0].count,ht=[];for(const mt of ut){const yt=new Matrix4,vt=new Vector3,pt=new Quaternion,_t=new Vector3(1,1,1),xt=new InstancedMesh(mt.geometry,mt.material,dt);for(let St=0;St<dt;St++)at.TRANSLATION&&vt.fromBufferAttribute(at.TRANSLATION,St),at.ROTATION&&pt.fromBufferAttribute(at.ROTATION,St),at.SCALE&&_t.fromBufferAttribute(at.SCALE,St),xt.setMatrixAt(St,yt.compose(vt,pt,_t));for(const St in at)if(St==="_COLOR_0"){const At=at[St];xt.instanceColor=new InstancedBufferAttribute(At.array,At.itemSize,At.normalized)}else St!=="TRANSLATION"&&St!=="ROTATION"&&St!=="SCALE"&&mt.geometry.setAttribute(St,at[St]);Object3D.prototype.copy.call(xt,mt),this.parser.assignFinalMaterial(xt),ht.push(xt)}return ct.isGroup?(ct.clear(),ct.add(...ht),ct):ht[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(_){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const tt=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:decodeText(new Uint8Array(_.slice(0,4))),version:tt.getUint32(4,!0),length:tt.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const nt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,rt=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH);let it=0;for(;it<nt;){const st=rt.getUint32(it,!0);it+=4;const ot=rt.getUint32(it,!0);if(it+=4,ot===BINARY_EXTENSION_CHUNK_TYPES.JSON){const at=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH+it,st);this.content=decodeText(at)}else if(ot===BINARY_EXTENSION_CHUNK_TYPES.BIN){const at=BINARY_EXTENSION_HEADER_LENGTH+it;this.body=_.slice(at,at+st)}it+=st}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(_,tt){if(!tt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=tt,this.dracoLoader.preload()}decodePrimitive(_,tt){const nt=this.json,rt=this.dracoLoader,it=_.extensions[this.name].bufferView,st=_.extensions[this.name].attributes,ot={},at={},lt={};for(const ct in st){const ut=ATTRIBUTES[ct]||ct.toLowerCase();ot[ut]=st[ct]}for(const ct in _.attributes){const ut=ATTRIBUTES[ct]||ct.toLowerCase();if(st[ct]!==void 0){const dt=nt.accessors[_.attributes[ct]],ht=WEBGL_COMPONENT_TYPES[dt.componentType];lt[ut]=ht.name,at[ut]=dt.normalized===!0}}return tt.getDependency("bufferView",it).then(function(ct){return new Promise(function(ut,dt){rt.decodeDracoFile(ct,function(ht){for(const mt in ht.attributes){const yt=ht.attributes[mt],vt=at[mt];vt!==void 0&&(yt.normalized=vt)}ut(ht)},ot,lt,LinearSRGBColorSpace,dt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(_,tt){return(tt.texCoord===void 0||tt.texCoord===_.channel)&&tt.offset===void 0&&tt.rotation===void 0&&tt.scale===void 0||(_=_.clone(),tt.texCoord!==void 0&&(_.channel=tt.texCoord),tt.offset!==void 0&&_.offset.fromArray(tt.offset),tt.rotation!==void 0&&(_.rotation=tt.rotation),tt.scale!==void 0&&_.repeat.fromArray(tt.scale),_.needsUpdate=!0),_}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}copySampleValue_(_){const tt=this.resultBuffer,nt=this.sampleValues,rt=this.valueSize,it=_*rt*3+rt;for(let st=0;st!==rt;st++)tt[st]=nt[it+st];return tt}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,st=this.sampleValues,ot=this.valueSize,at=ot*2,lt=ot*3,ct=rt-tt,ut=(nt-tt)/ct,dt=ut*ut,ht=dt*ut,mt=_*lt,yt=mt-lt,vt=-2*ht+3*dt,pt=ht-dt,_t=1-vt,xt=pt-dt+ut;for(let St=0;St!==ot;St++){const At=st[yt+St+ot],bt=st[yt+St+at]*ct,Et=st[mt+St+ot],wt=st[mt+St]*ct;it[St]=_t*At+xt*bt+vt*Et+pt*wt}return it}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(_,tt,nt,rt){const it=super.interpolate_(_,tt,nt,rt);return _q.fromArray(it).normalize().toArray(it),it}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...version$1>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(_e){return _e.DefaultMaterial===void 0&&(_e.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),_e.DefaultMaterial}function addUnknownExtensionsToUserData(_e,_,tt){for(const nt in tt.extensions)_e[nt]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[nt]=tt.extensions[nt])}function assignExtrasToUserData(_e,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(_e.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets(_e,_,tt){let nt=!1,rt=!1,it=!1;for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt];if(ut.POSITION!==void 0&&(nt=!0),ut.NORMAL!==void 0&&(rt=!0),ut.COLOR_0!==void 0&&(it=!0),nt&&rt&&it)break}if(!nt&&!rt&&!it)return Promise.resolve(_e);const st=[],ot=[],at=[];for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt];if(nt){const dt=ut.POSITION!==void 0?tt.getDependency("accessor",ut.POSITION):_e.attributes.position;st.push(dt)}if(rt){const dt=ut.NORMAL!==void 0?tt.getDependency("accessor",ut.NORMAL):_e.attributes.normal;ot.push(dt)}if(it){const dt=ut.COLOR_0!==void 0?tt.getDependency("accessor",ut.COLOR_0):_e.attributes.color;at.push(dt)}}return Promise.all([Promise.all(st),Promise.all(ot),Promise.all(at)]).then(function(lt){const ct=lt[0],ut=lt[1],dt=lt[2];return nt&&(_e.morphAttributes.position=ct),rt&&(_e.morphAttributes.normal=ut),it&&(_e.morphAttributes.color=dt),_e.morphTargetsRelative=!0,_e})}function updateMorphTargets(_e,_){if(_e.updateMorphTargets(),_.weights!==void 0)for(let tt=0,nt=_.weights.length;tt<nt;tt++)_e.morphTargetInfluences[tt]=_.weights[tt];if(_.extras&&Array.isArray(_.extras.targetNames)){const tt=_.extras.targetNames;if(_e.morphTargetInfluences.length===tt.length){_e.morphTargetDictionary={};for(let nt=0,rt=tt.length;nt<rt;nt++)_e.morphTargetDictionary[tt[nt]]=nt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(_e){let _;const tt=_e.extensions&&_e.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(tt?_="draco:"+tt.bufferView+":"+tt.indices+":"+createAttributesKey(tt.attributes):_=_e.indices+":"+createAttributesKey(_e.attributes)+":"+_e.mode,_e.targets!==void 0)for(let nt=0,rt=_e.targets.length;nt<rt;nt++)_+=":"+createAttributesKey(_e.targets[nt]);return _}function createAttributesKey(_e){let _="";const tt=Object.keys(_e).sort();for(let nt=0,rt=tt.length;nt<rt;nt++)_+=tt[nt]+":"+_e[tt[nt]]+";";return _}function getNormalizedComponentScale(_e){switch(_e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(_e){return _e.search(/\.jpe?g($|\?)/i)>0||_e.search(/^data\:image\/jpeg/)===0?"image/jpeg":_e.search(/\.webp($|\?)/i)>0||_e.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(_={},tt={}){this.json=_,this.extensions={},this.plugins={},this.options=tt,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let nt=!1,rt=!1,it=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(nt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,rt=navigator.userAgent.indexOf("Firefox")>-1,it=rt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||nt||rt&&it<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,tt){const nt=this,rt=this.json,it=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(st){return st._markDefs&&st._markDefs()}),Promise.all(this._invokeAll(function(st){return st.beforeRoot&&st.beforeRoot()})).then(function(){return Promise.all([nt.getDependencies("scene"),nt.getDependencies("animation"),nt.getDependencies("camera")])}).then(function(st){const ot={scene:st[0][rt.scene||0],scenes:st[0],animations:st[1],cameras:st[2],asset:rt.asset,parser:nt,userData:{}};return addUnknownExtensionsToUserData(it,ot,rt),assignExtrasToUserData(ot,rt),Promise.all(nt._invokeAll(function(at){return at.afterRoot&&at.afterRoot(ot)})).then(function(){for(const at of ot.scenes)at.updateMatrixWorld();_(ot)})}).catch(tt)}_markDefs(){const _=this.json.nodes||[],tt=this.json.skins||[],nt=this.json.meshes||[];for(let rt=0,it=tt.length;rt<it;rt++){const st=tt[rt].joints;for(let ot=0,at=st.length;ot<at;ot++)_[st[ot]].isBone=!0}for(let rt=0,it=_.length;rt<it;rt++){const st=_[rt];st.mesh!==void 0&&(this._addNodeRef(this.meshCache,st.mesh),st.skin!==void 0&&(nt[st.mesh].isSkinnedMesh=!0)),st.camera!==void 0&&this._addNodeRef(this.cameraCache,st.camera)}}_addNodeRef(_,tt){tt!==void 0&&(_.refs[tt]===void 0&&(_.refs[tt]=_.uses[tt]=0),_.refs[tt]++)}_getNodeRef(_,tt,nt){if(_.refs[tt]<=1)return nt;const rt=nt.clone(),it=(st,ot)=>{const at=this.associations.get(st);at!=null&&this.associations.set(ot,at);for(const[lt,ct]of st.children.entries())it(ct,ot.children[lt])};return it(nt,rt),rt.name+="_instance_"+_.uses[tt]++,rt}_invokeOne(_){const tt=Object.values(this.plugins);tt.push(this);for(let nt=0;nt<tt.length;nt++){const rt=_(tt[nt]);if(rt)return rt}return null}_invokeAll(_){const tt=Object.values(this.plugins);tt.unshift(this);const nt=[];for(let rt=0;rt<tt.length;rt++){const it=_(tt[rt]);it&&nt.push(it)}return nt}getDependency(_,tt){const nt=_+":"+tt;let rt=this.cache.get(nt);if(!rt){switch(_){case"scene":rt=this.loadScene(tt);break;case"node":rt=this._invokeOne(function(it){return it.loadNode&&it.loadNode(tt)});break;case"mesh":rt=this._invokeOne(function(it){return it.loadMesh&&it.loadMesh(tt)});break;case"accessor":rt=this.loadAccessor(tt);break;case"bufferView":rt=this._invokeOne(function(it){return it.loadBufferView&&it.loadBufferView(tt)});break;case"buffer":rt=this.loadBuffer(tt);break;case"material":rt=this._invokeOne(function(it){return it.loadMaterial&&it.loadMaterial(tt)});break;case"texture":rt=this._invokeOne(function(it){return it.loadTexture&&it.loadTexture(tt)});break;case"skin":rt=this.loadSkin(tt);break;case"animation":rt=this._invokeOne(function(it){return it.loadAnimation&&it.loadAnimation(tt)});break;case"camera":rt=this.loadCamera(tt);break;default:if(rt=this._invokeOne(function(it){return it!=this&&it.getDependency&&it.getDependency(_,tt)}),!rt)throw new Error("Unknown type: "+_);break}this.cache.add(nt,rt)}return rt}getDependencies(_){let tt=this.cache.get(_);if(!tt){const nt=this,rt=this.json[_+(_==="mesh"?"es":"s")]||[];tt=Promise.all(rt.map(function(it,st){return nt.getDependency(_,st)})),this.cache.add(_,tt)}return tt}loadBuffer(_){const tt=this.json.buffers[_],nt=this.fileLoader;if(tt.type&&tt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+tt.type+" buffer type is not supported.");if(tt.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const rt=this.options;return new Promise(function(it,st){nt.load(LoaderUtils.resolveURL(tt.uri,rt.path),it,void 0,function(){st(new Error('THREE.GLTFLoader: Failed to load buffer "'+tt.uri+'".'))})})}loadBufferView(_){const tt=this.json.bufferViews[_];return this.getDependency("buffer",tt.buffer).then(function(nt){const rt=tt.byteLength||0,it=tt.byteOffset||0;return nt.slice(it,it+rt)})}loadAccessor(_){const tt=this,nt=this.json,rt=this.json.accessors[_];if(rt.bufferView===void 0&&rt.sparse===void 0){const st=WEBGL_TYPE_SIZES[rt.type],ot=WEBGL_COMPONENT_TYPES[rt.componentType],at=rt.normalized===!0,lt=new ot(rt.count*st);return Promise.resolve(new BufferAttribute(lt,st,at))}const it=[];return rt.bufferView!==void 0?it.push(this.getDependency("bufferView",rt.bufferView)):it.push(null),rt.sparse!==void 0&&(it.push(this.getDependency("bufferView",rt.sparse.indices.bufferView)),it.push(this.getDependency("bufferView",rt.sparse.values.bufferView))),Promise.all(it).then(function(st){const ot=st[0],at=WEBGL_TYPE_SIZES[rt.type],lt=WEBGL_COMPONENT_TYPES[rt.componentType],ct=lt.BYTES_PER_ELEMENT,ut=ct*at,dt=rt.byteOffset||0,ht=rt.bufferView!==void 0?nt.bufferViews[rt.bufferView].byteStride:void 0,mt=rt.normalized===!0;let yt,vt;if(ht&&ht!==ut){const pt=Math.floor(dt/ht),_t="InterleavedBuffer:"+rt.bufferView+":"+rt.componentType+":"+pt+":"+rt.count;let xt=tt.cache.get(_t);xt||(yt=new lt(ot,pt*ht,rt.count*ht/ct),xt=new InterleavedBuffer(yt,ht/ct),tt.cache.add(_t,xt)),vt=new InterleavedBufferAttribute(xt,at,dt%ht/ct,mt)}else ot===null?yt=new lt(rt.count*at):yt=new lt(ot,dt,rt.count*at),vt=new BufferAttribute(yt,at,mt);if(rt.sparse!==void 0){const pt=WEBGL_TYPE_SIZES.SCALAR,_t=WEBGL_COMPONENT_TYPES[rt.sparse.indices.componentType],xt=rt.sparse.indices.byteOffset||0,St=rt.sparse.values.byteOffset||0,At=new _t(st[1],xt,rt.sparse.count*pt),bt=new lt(st[2],St,rt.sparse.count*at);ot!==null&&(vt=new BufferAttribute(vt.array.slice(),vt.itemSize,vt.normalized));for(let Et=0,wt=At.length;Et<wt;Et++){const Rt=At[Et];if(vt.setX(Rt,bt[Et*at]),at>=2&&vt.setY(Rt,bt[Et*at+1]),at>=3&&vt.setZ(Rt,bt[Et*at+2]),at>=4&&vt.setW(Rt,bt[Et*at+3]),at>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return vt})}loadTexture(_){const tt=this.json,nt=this.options,it=tt.textures[_].source,st=tt.images[it];let ot=this.textureLoader;if(st.uri){const at=nt.manager.getHandler(st.uri);at!==null&&(ot=at)}return this.loadTextureImage(_,it,ot)}loadTextureImage(_,tt,nt){const rt=this,it=this.json,st=it.textures[_],ot=it.images[tt],at=(ot.uri||ot.bufferView)+":"+st.sampler;if(this.textureCache[at])return this.textureCache[at];const lt=this.loadImageSource(tt,nt).then(function(ct){ct.flipY=!1,ct.name=st.name||ot.name||"",ct.name===""&&typeof ot.uri=="string"&&ot.uri.startsWith("data:image/")===!1&&(ct.name=ot.uri);const dt=(it.samplers||{})[st.sampler]||{};return ct.magFilter=WEBGL_FILTERS[dt.magFilter]||LinearFilter,ct.minFilter=WEBGL_FILTERS[dt.minFilter]||LinearMipmapLinearFilter,ct.wrapS=WEBGL_WRAPPINGS[dt.wrapS]||RepeatWrapping,ct.wrapT=WEBGL_WRAPPINGS[dt.wrapT]||RepeatWrapping,rt.associations.set(ct,{textures:_}),ct}).catch(function(){return null});return this.textureCache[at]=lt,lt}loadImageSource(_,tt){const nt=this,rt=this.json,it=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(ut=>ut.clone());const st=rt.images[_],ot=self.URL||self.webkitURL;let at=st.uri||"",lt=!1;if(st.bufferView!==void 0)at=nt.getDependency("bufferView",st.bufferView).then(function(ut){lt=!0;const dt=new Blob([ut],{type:st.mimeType});return at=ot.createObjectURL(dt),at});else if(st.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const ct=Promise.resolve(at).then(function(ut){return new Promise(function(dt,ht){let mt=dt;tt.isImageBitmapLoader===!0&&(mt=function(yt){const vt=new Texture(yt);vt.needsUpdate=!0,dt(vt)}),tt.load(LoaderUtils.resolveURL(ut,it.path),mt,void 0,ht)})}).then(function(ut){return lt===!0&&ot.revokeObjectURL(at),assignExtrasToUserData(ut,st),ut.userData.mimeType=st.mimeType||getImageURIMimeType(st.uri),ut}).catch(function(ut){throw console.error("THREE.GLTFLoader: Couldn't load texture",at),ut});return this.sourceCache[_]=ct,ct}assignTexture(_,tt,nt,rt){const it=this;return this.getDependency("texture",nt.index).then(function(st){if(!st)return null;if(nt.texCoord!==void 0&&nt.texCoord>0&&(st=st.clone(),st.channel=nt.texCoord),it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const ot=nt.extensions!==void 0?nt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(ot){const at=it.associations.get(st);st=it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(st,ot),it.associations.set(st,at)}}return rt!==void 0&&(typeof rt=="number"&&(rt=rt===sRGBEncoding$1?SRGBColorSpace:LinearSRGBColorSpace),"colorSpace"in st?st.colorSpace=rt:st.encoding=rt===SRGBColorSpace?sRGBEncoding$1:LinearEncoding$1),_[tt]=st,st})}assignFinalMaterial(_){const tt=_.geometry;let nt=_.material;const rt=tt.attributes.tangent===void 0,it=tt.attributes.color!==void 0,st=tt.attributes.normal===void 0;if(_.isPoints){const ot="PointsMaterial:"+nt.uuid;let at=this.cache.get(ot);at||(at=new PointsMaterial,Material.prototype.copy.call(at,nt),at.color.copy(nt.color),at.map=nt.map,at.sizeAttenuation=!1,this.cache.add(ot,at)),nt=at}else if(_.isLine){const ot="LineBasicMaterial:"+nt.uuid;let at=this.cache.get(ot);at||(at=new LineBasicMaterial,Material.prototype.copy.call(at,nt),at.color.copy(nt.color),at.map=nt.map,this.cache.add(ot,at)),nt=at}if(rt||it||st){let ot="ClonedMaterial:"+nt.uuid+":";rt&&(ot+="derivative-tangents:"),it&&(ot+="vertex-colors:"),st&&(ot+="flat-shading:");let at=this.cache.get(ot);at||(at=nt.clone(),it&&(at.vertexColors=!0),st&&(at.flatShading=!0),rt&&(at.normalScale&&(at.normalScale.y*=-1),at.clearcoatNormalScale&&(at.clearcoatNormalScale.y*=-1)),this.cache.add(ot,at),this.associations.set(at,this.associations.get(nt))),nt=at}_.material=nt}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const tt=this,nt=this.json,rt=this.extensions,it=nt.materials[_];let st;const ot={},at=it.extensions||{},lt=[];if(at[EXTENSIONS.KHR_MATERIALS_UNLIT]){const ut=rt[EXTENSIONS.KHR_MATERIALS_UNLIT];st=ut.getMaterialType(),lt.push(ut.extendParams(ot,it,tt))}else{const ut=it.pbrMetallicRoughness||{};if(ot.color=new Color$1(1,1,1),ot.opacity=1,Array.isArray(ut.baseColorFactor)){const dt=ut.baseColorFactor;ot.color.setRGB(dt[0],dt[1],dt[2],LinearSRGBColorSpace),ot.opacity=dt[3]}ut.baseColorTexture!==void 0&&lt.push(tt.assignTexture(ot,"map",ut.baseColorTexture,SRGBColorSpace)),ot.metalness=ut.metallicFactor!==void 0?ut.metallicFactor:1,ot.roughness=ut.roughnessFactor!==void 0?ut.roughnessFactor:1,ut.metallicRoughnessTexture!==void 0&&(lt.push(tt.assignTexture(ot,"metalnessMap",ut.metallicRoughnessTexture)),lt.push(tt.assignTexture(ot,"roughnessMap",ut.metallicRoughnessTexture))),st=this._invokeOne(function(dt){return dt.getMaterialType&&dt.getMaterialType(_)}),lt.push(Promise.all(this._invokeAll(function(dt){return dt.extendMaterialParams&&dt.extendMaterialParams(_,ot)})))}it.doubleSided===!0&&(ot.side=DoubleSide);const ct=it.alphaMode||ALPHA_MODES.OPAQUE;if(ct===ALPHA_MODES.BLEND?(ot.transparent=!0,ot.depthWrite=!1):(ot.transparent=!1,ct===ALPHA_MODES.MASK&&(ot.alphaTest=it.alphaCutoff!==void 0?it.alphaCutoff:.5)),it.normalTexture!==void 0&&st!==MeshBasicMaterial&&(lt.push(tt.assignTexture(ot,"normalMap",it.normalTexture)),ot.normalScale=new Vector2(1,1),it.normalTexture.scale!==void 0)){const ut=it.normalTexture.scale;ot.normalScale.set(ut,ut)}if(it.occlusionTexture!==void 0&&st!==MeshBasicMaterial&&(lt.push(tt.assignTexture(ot,"aoMap",it.occlusionTexture)),it.occlusionTexture.strength!==void 0&&(ot.aoMapIntensity=it.occlusionTexture.strength)),it.emissiveFactor!==void 0&&st!==MeshBasicMaterial){const ut=it.emissiveFactor;ot.emissive=new Color$1().setRGB(ut[0],ut[1],ut[2],LinearSRGBColorSpace)}return it.emissiveTexture!==void 0&&st!==MeshBasicMaterial&&lt.push(tt.assignTexture(ot,"emissiveMap",it.emissiveTexture,SRGBColorSpace)),Promise.all(lt).then(function(){const ut=new st(ot);return it.name&&(ut.name=it.name),assignExtrasToUserData(ut,it),tt.associations.set(ut,{materials:_}),it.extensions&&addUnknownExtensionsToUserData(rt,ut,it),ut})}createUniqueName(_){const tt=PropertyBinding.sanitizeNodeName(_||"");return tt in this.nodeNamesUsed?tt+"_"+ ++this.nodeNamesUsed[tt]:(this.nodeNamesUsed[tt]=0,tt)}loadGeometries(_){const tt=this,nt=this.extensions,rt=this.primitiveCache;function it(ot){return nt[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ot,tt).then(function(at){return addPrimitiveAttributes(at,ot,tt)})}const st=[];for(let ot=0,at=_.length;ot<at;ot++){const lt=_[ot],ct=createPrimitiveKey(lt),ut=rt[ct];if(ut)st.push(ut.promise);else{let dt;lt.extensions&&lt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?dt=it(lt):dt=addPrimitiveAttributes(new BufferGeometry,lt,tt),rt[ct]={primitive:lt,promise:dt},st.push(dt)}}return Promise.all(st)}loadMesh(_){const tt=this,nt=this.json,rt=this.extensions,it=nt.meshes[_],st=it.primitives,ot=[];for(let at=0,lt=st.length;at<lt;at++){const ct=st[at].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",st[at].material);ot.push(ct)}return ot.push(tt.loadGeometries(st)),Promise.all(ot).then(function(at){const lt=at.slice(0,at.length-1),ct=at[at.length-1],ut=[];for(let ht=0,mt=ct.length;ht<mt;ht++){const yt=ct[ht],vt=st[ht];let pt;const _t=lt[ht];if(vt.mode===WEBGL_CONSTANTS.TRIANGLES||vt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||vt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||vt.mode===void 0)pt=it.isSkinnedMesh===!0?new SkinnedMesh(yt,_t):new Mesh(yt,_t),pt.isSkinnedMesh===!0&&pt.normalizeSkinWeights(),vt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?pt.geometry=toTrianglesDrawMode(pt.geometry,TriangleStripDrawMode):vt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(pt.geometry=toTrianglesDrawMode(pt.geometry,TriangleFanDrawMode));else if(vt.mode===WEBGL_CONSTANTS.LINES)pt=new LineSegments(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.LINE_STRIP)pt=new Line(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.LINE_LOOP)pt=new LineLoop(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.POINTS)pt=new Points$1(yt,_t);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+vt.mode);Object.keys(pt.geometry.morphAttributes).length>0&&updateMorphTargets(pt,it),pt.name=tt.createUniqueName(it.name||"mesh_"+_),assignExtrasToUserData(pt,it),vt.extensions&&addUnknownExtensionsToUserData(rt,pt,vt),tt.assignFinalMaterial(pt),ut.push(pt)}for(let ht=0,mt=ut.length;ht<mt;ht++)tt.associations.set(ut[ht],{meshes:_,primitives:ht});if(ut.length===1)return it.extensions&&addUnknownExtensionsToUserData(rt,ut[0],it),ut[0];const dt=new Group;it.extensions&&addUnknownExtensionsToUserData(rt,dt,it),tt.associations.set(dt,{meshes:_});for(let ht=0,mt=ut.length;ht<mt;ht++)dt.add(ut[ht]);return dt})}loadCamera(_){let tt;const nt=this.json.cameras[_],rt=nt[nt.type];if(!rt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return nt.type==="perspective"?tt=new PerspectiveCamera(MathUtils.radToDeg(rt.yfov),rt.aspectRatio||1,rt.znear||1,rt.zfar||2e6):nt.type==="orthographic"&&(tt=new OrthographicCamera(-rt.xmag,rt.xmag,rt.ymag,-rt.ymag,rt.znear,rt.zfar)),nt.name&&(tt.name=this.createUniqueName(nt.name)),assignExtrasToUserData(tt,nt),Promise.resolve(tt)}loadSkin(_){const tt=this.json.skins[_],nt=[];for(let rt=0,it=tt.joints.length;rt<it;rt++)nt.push(this._loadNodeShallow(tt.joints[rt]));return tt.inverseBindMatrices!==void 0?nt.push(this.getDependency("accessor",tt.inverseBindMatrices)):nt.push(null),Promise.all(nt).then(function(rt){const it=rt.pop(),st=rt,ot=[],at=[];for(let lt=0,ct=st.length;lt<ct;lt++){const ut=st[lt];if(ut){ot.push(ut);const dt=new Matrix4;it!==null&&dt.fromArray(it.array,lt*16),at.push(dt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',tt.joints[lt])}return new Skeleton(ot,at)})}loadAnimation(_){const tt=this.json,nt=this,rt=tt.animations[_],it=rt.name?rt.name:"animation_"+_,st=[],ot=[],at=[],lt=[],ct=[];for(let ut=0,dt=rt.channels.length;ut<dt;ut++){const ht=rt.channels[ut],mt=rt.samplers[ht.sampler],yt=ht.target,vt=yt.node,pt=rt.parameters!==void 0?rt.parameters[mt.input]:mt.input,_t=rt.parameters!==void 0?rt.parameters[mt.output]:mt.output;yt.node!==void 0&&(st.push(this.getDependency("node",vt)),ot.push(this.getDependency("accessor",pt)),at.push(this.getDependency("accessor",_t)),lt.push(mt),ct.push(yt))}return Promise.all([Promise.all(st),Promise.all(ot),Promise.all(at),Promise.all(lt),Promise.all(ct)]).then(function(ut){const dt=ut[0],ht=ut[1],mt=ut[2],yt=ut[3],vt=ut[4],pt=[];for(let _t=0,xt=dt.length;_t<xt;_t++){const St=dt[_t],At=ht[_t],bt=mt[_t],Et=yt[_t],wt=vt[_t];if(St===void 0)continue;St.updateMatrix&&St.updateMatrix();const Rt=nt._createAnimationTracks(St,At,bt,Et,wt);if(Rt)for(let Tt=0;Tt<Rt.length;Tt++)pt.push(Rt[Tt])}return new AnimationClip(it,void 0,pt)})}createNodeMesh(_){const tt=this.json,nt=this,rt=tt.nodes[_];return rt.mesh===void 0?null:nt.getDependency("mesh",rt.mesh).then(function(it){const st=nt._getNodeRef(nt.meshCache,rt.mesh,it);return rt.weights!==void 0&&st.traverse(function(ot){if(ot.isMesh)for(let at=0,lt=rt.weights.length;at<lt;at++)ot.morphTargetInfluences[at]=rt.weights[at]}),st})}loadNode(_){const tt=this.json,nt=this,rt=tt.nodes[_],it=nt._loadNodeShallow(_),st=[],ot=rt.children||[];for(let lt=0,ct=ot.length;lt<ct;lt++)st.push(nt.getDependency("node",ot[lt]));const at=rt.skin===void 0?Promise.resolve(null):nt.getDependency("skin",rt.skin);return Promise.all([it,Promise.all(st),at]).then(function(lt){const ct=lt[0],ut=lt[1],dt=lt[2];dt!==null&&ct.traverse(function(ht){ht.isSkinnedMesh&&ht.bind(dt,_identityMatrix)});for(let ht=0,mt=ut.length;ht<mt;ht++)ct.add(ut[ht]);return ct})}_loadNodeShallow(_){const tt=this.json,nt=this.extensions,rt=this;if(this.nodeCache[_]!==void 0)return this.nodeCache[_];const it=tt.nodes[_],st=it.name?rt.createUniqueName(it.name):"",ot=[],at=rt._invokeOne(function(lt){return lt.createNodeMesh&&lt.createNodeMesh(_)});return at&&ot.push(at),it.camera!==void 0&&ot.push(rt.getDependency("camera",it.camera).then(function(lt){return rt._getNodeRef(rt.cameraCache,it.camera,lt)})),rt._invokeAll(function(lt){return lt.createNodeAttachment&&lt.createNodeAttachment(_)}).forEach(function(lt){ot.push(lt)}),this.nodeCache[_]=Promise.all(ot).then(function(lt){let ct;if(it.isBone===!0?ct=new Bone:lt.length>1?ct=new Group:lt.length===1?ct=lt[0]:ct=new Object3D,ct!==lt[0])for(let ut=0,dt=lt.length;ut<dt;ut++)ct.add(lt[ut]);if(it.name&&(ct.userData.name=it.name,ct.name=st),assignExtrasToUserData(ct,it),it.extensions&&addUnknownExtensionsToUserData(nt,ct,it),it.matrix!==void 0){const ut=new Matrix4;ut.fromArray(it.matrix),ct.applyMatrix4(ut)}else it.translation!==void 0&&ct.position.fromArray(it.translation),it.rotation!==void 0&&ct.quaternion.fromArray(it.rotation),it.scale!==void 0&&ct.scale.fromArray(it.scale);return rt.associations.has(ct)||rt.associations.set(ct,{}),rt.associations.get(ct).nodes=_,ct}),this.nodeCache[_]}loadScene(_){const tt=this.extensions,nt=this.json.scenes[_],rt=this,it=new Group;nt.name&&(it.name=rt.createUniqueName(nt.name)),assignExtrasToUserData(it,nt),nt.extensions&&addUnknownExtensionsToUserData(tt,it,nt);const st=nt.nodes||[],ot=[];for(let at=0,lt=st.length;at<lt;at++)ot.push(rt.getDependency("node",st[at]));return Promise.all(ot).then(function(at){for(let ct=0,ut=at.length;ct<ut;ct++)it.add(at[ct]);const lt=ct=>{const ut=new Map;for(const[dt,ht]of rt.associations)(dt instanceof Material||dt instanceof Texture)&&ut.set(dt,ht);return ct.traverse(dt=>{const ht=rt.associations.get(dt);ht!=null&&ut.set(dt,ht)}),ut};return rt.associations=lt(it),it})}_createAnimationTracks(_,tt,nt,rt,it){const st=[],ot=_.name?_.name:_.uuid,at=[];PATH_PROPERTIES[it.path]===PATH_PROPERTIES.weights?_.traverse(function(dt){dt.morphTargetInfluences&&at.push(dt.name?dt.name:dt.uuid)}):at.push(ot);let lt;switch(PATH_PROPERTIES[it.path]){case PATH_PROPERTIES.weights:lt=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:lt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:lt=VectorKeyframeTrack;break;default:switch(nt.itemSize){case 1:lt=NumberKeyframeTrack;break;case 2:case 3:default:lt=VectorKeyframeTrack;break}break}const ct=rt.interpolation!==void 0?INTERPOLATION[rt.interpolation]:InterpolateLinear,ut=this._getArrayFromAccessor(nt);for(let dt=0,ht=at.length;dt<ht;dt++){const mt=new lt(at[dt]+"."+PATH_PROPERTIES[it.path],tt.array,ut,ct);rt.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(mt),st.push(mt)}return st}_getArrayFromAccessor(_){let tt=_.array;if(_.normalized){const nt=getNormalizedComponentScale(tt.constructor),rt=new Float32Array(tt.length);for(let it=0,st=tt.length;it<st;it++)rt[it]=tt[it]*nt;tt=rt}return tt}_createCubicSplineTrackInterpolant(_){_.createInterpolant=function(nt){const rt=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new rt(this.times,this.values,this.getValueSize()/3,nt)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(_e,_,tt){const nt=_.attributes,rt=new Box3;if(nt.POSITION!==void 0){const ot=tt.json.accessors[nt.POSITION],at=ot.min,lt=ot.max;if(at!==void 0&&lt!==void 0){if(rt.set(new Vector3(at[0],at[1],at[2]),new Vector3(lt[0],lt[1],lt[2])),ot.normalized){const ct=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ot.componentType]);rt.min.multiplyScalar(ct),rt.max.multiplyScalar(ct)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const it=_.targets;if(it!==void 0){const ot=new Vector3,at=new Vector3;for(let lt=0,ct=it.length;lt<ct;lt++){const ut=it[lt];if(ut.POSITION!==void 0){const dt=tt.json.accessors[ut.POSITION],ht=dt.min,mt=dt.max;if(ht!==void 0&&mt!==void 0){if(at.setX(Math.max(Math.abs(ht[0]),Math.abs(mt[0]))),at.setY(Math.max(Math.abs(ht[1]),Math.abs(mt[1]))),at.setZ(Math.max(Math.abs(ht[2]),Math.abs(mt[2]))),dt.normalized){const yt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[dt.componentType]);at.multiplyScalar(yt)}ot.max(at)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}rt.expandByVector(ot)}_e.boundingBox=rt;const st=new Sphere;rt.getCenter(st.center),st.radius=rt.min.distanceTo(rt.max)/2,_e.boundingSphere=st}function addPrimitiveAttributes(_e,_,tt){const nt=_.attributes,rt=[];function it(st,ot){return tt.getDependency("accessor",st).then(function(at){_e.setAttribute(ot,at)})}for(const st in nt){const ot=ATTRIBUTES[st]||st.toLowerCase();ot in _e.attributes||rt.push(it(nt[st],ot))}if(_.indices!==void 0&&!_e.index){const st=tt.getDependency("accessor",_.indices).then(function(ot){_e.setIndex(ot)});rt.push(st)}return assignExtrasToUserData(_e,_),computeBounds(_e,_,tt),Promise.all(rt).then(function(){return _.targets!==void 0?addMorphTargets(_e,_.targets,tt):_e})}class RGBELoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const st=function(wt,Rt){switch(wt){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(Rt||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(Rt||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(Rt||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(Rt||""))}},ct=`
`,ut=function(wt,Rt,Tt){Rt=Rt||1024;let Lt=wt.pos,Ft=-1,Ht=0,Kt="",Wt=String.fromCharCode.apply(null,new Uint16Array(wt.subarray(Lt,Lt+128)));for(;0>(Ft=Wt.indexOf(ct))&&Ht<Rt&&Lt<wt.byteLength;)Kt+=Wt,Ht+=Wt.length,Lt+=128,Wt+=String.fromCharCode.apply(null,new Uint16Array(wt.subarray(Lt,Lt+128)));return-1<Ft?(wt.pos+=Ht+Ft+1,Kt+Wt.slice(0,Ft)):!1},dt=function(wt){const Rt=/^#\?(\S+)/,Tt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Mt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Lt=/^\s*FORMAT=(\S+)\s*$/,Ft=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Ht={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Kt,Wt;for((wt.pos>=wt.byteLength||!(Kt=ut(wt)))&&st(1,"no header found"),(Wt=Kt.match(Rt))||st(3,"bad initial token"),Ht.valid|=1,Ht.programtype=Wt[1],Ht.string+=Kt+`
`;Kt=ut(wt),Kt!==!1;){if(Ht.string+=Kt+`
`,Kt.charAt(0)==="#"){Ht.comments+=Kt+`
`;continue}if((Wt=Kt.match(Tt))&&(Ht.gamma=parseFloat(Wt[1])),(Wt=Kt.match(Mt))&&(Ht.exposure=parseFloat(Wt[1])),(Wt=Kt.match(Lt))&&(Ht.valid|=2,Ht.format=Wt[1]),(Wt=Kt.match(Ft))&&(Ht.valid|=4,Ht.height=parseInt(Wt[1],10),Ht.width=parseInt(Wt[2],10)),Ht.valid&2&&Ht.valid&4)break}return Ht.valid&2||st(3,"missing format specifier"),Ht.valid&4||st(3,"missing image size specifier"),Ht},ht=function(wt,Rt,Tt){const Mt=Rt;if(Mt<8||Mt>32767||wt[0]!==2||wt[1]!==2||wt[2]&128)return new Uint8Array(wt);Mt!==(wt[2]<<8|wt[3])&&st(3,"wrong scanline width");const Lt=new Uint8Array(4*Rt*Tt);Lt.length||st(4,"unable to allocate buffer space");let Ft=0,Ht=0;const Kt=4*Mt,Wt=new Uint8Array(4),Jt=new Uint8Array(Kt);let Ot=Tt;for(;Ot>0&&Ht<wt.byteLength;){Ht+4>wt.byteLength&&st(1),Wt[0]=wt[Ht++],Wt[1]=wt[Ht++],Wt[2]=wt[Ht++],Wt[3]=wt[Ht++],(Wt[0]!=2||Wt[1]!=2||(Wt[2]<<8|Wt[3])!=Mt)&&st(3,"bad rgbe scanline format");let kt=0,Gt;for(;kt<Kt&&Ht<wt.byteLength;){Gt=wt[Ht++];const Vt=Gt>128;if(Vt&&(Gt-=128),(Gt===0||kt+Gt>Kt)&&st(3,"bad scanline data"),Vt){const Dt=wt[Ht++];for(let It=0;It<Gt;It++)Jt[kt++]=Dt}else Jt.set(wt.subarray(Ht,Ht+Gt),kt),kt+=Gt,Ht+=Gt}const zt=Mt;for(let Vt=0;Vt<zt;Vt++){let Dt=0;Lt[Ft]=Jt[Vt+Dt],Dt+=Mt,Lt[Ft+1]=Jt[Vt+Dt],Dt+=Mt,Lt[Ft+2]=Jt[Vt+Dt],Dt+=Mt,Lt[Ft+3]=Jt[Vt+Dt],Ft+=4}Ot--}return Lt},mt=function(wt,Rt,Tt,Mt){const Lt=wt[Rt+3],Ft=Math.pow(2,Lt-128)/255;Tt[Mt+0]=wt[Rt+0]*Ft,Tt[Mt+1]=wt[Rt+1]*Ft,Tt[Mt+2]=wt[Rt+2]*Ft,Tt[Mt+3]=1},yt=function(wt,Rt,Tt,Mt){const Lt=wt[Rt+3],Ft=Math.pow(2,Lt-128)/255;Tt[Mt+0]=DataUtils.toHalfFloat(Math.min(wt[Rt+0]*Ft,65504)),Tt[Mt+1]=DataUtils.toHalfFloat(Math.min(wt[Rt+1]*Ft,65504)),Tt[Mt+2]=DataUtils.toHalfFloat(Math.min(wt[Rt+2]*Ft,65504)),Tt[Mt+3]=DataUtils.toHalfFloat(1)},vt=new Uint8Array(_);vt.pos=0;const pt=dt(vt),_t=pt.width,xt=pt.height,St=ht(vt.subarray(vt.pos),_t,xt);let At,bt,Et;switch(this.type){case FloatType:Et=St.length/4;const wt=new Float32Array(Et*4);for(let Tt=0;Tt<Et;Tt++)mt(St,Tt*4,wt,Tt*4);At=wt,bt=FloatType;break;case HalfFloatType:Et=St.length/4;const Rt=new Uint16Array(Et*4);for(let Tt=0;Tt<Et;Tt++)yt(St,Tt*4,Rt,Tt*4);At=Rt,bt=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_t,height:xt,data:At,header:pt.string,gamma:pt.gamma,exposure:pt.exposure,type:bt}}setDataType(_){return this.type=_,this}load(_,tt,nt,rt){function it(st,ot){switch(st.type){case FloatType:case HalfFloatType:"colorSpace"in st?st.colorSpace="srgb-linear":st.encoding=3e3,st.minFilter=LinearFilter,st.magFilter=LinearFilter,st.generateMipmaps=!1,st.flipY=!0;break}tt&&tt(st,ot)}return super.load(_,it,nt,rt)}}const hasColorSpace="colorSpace"in new Texture;class EXRLoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const Rt=Math.pow(2.7182818,2.2);function Tt(en,dn){for(var Bn=0,tr=0;tr<65536;++tr)(tr==0||en[tr>>3]&1<<(tr&7))&&(dn[Bn++]=tr);for(var tn=Bn-1;Bn<65536;)dn[Bn++]=0;return tn}function Mt(en){for(var dn=0;dn<16384;dn++)en[dn]={},en[dn].len=0,en[dn].lit=0,en[dn].p=null}const Lt={l:0,c:0,lc:0};function Ft(en,dn,Bn,tr,tn){for(;Bn<en;)dn=dn<<8|Nn(tr,tn),Bn+=8;Bn-=en,Lt.l=dn>>Bn&(1<<en)-1,Lt.c=dn,Lt.lc=Bn}const Ht=new Array(59);function Kt(en){for(var dn=0;dn<=58;++dn)Ht[dn]=0;for(var dn=0;dn<65537;++dn)Ht[en[dn]]+=1;for(var Bn=0,dn=58;dn>0;--dn){var tr=Bn+Ht[dn]>>1;Ht[dn]=Bn,Bn=tr}for(var dn=0;dn<65537;++dn){var tn=en[dn];tn>0&&(en[dn]=tn|Ht[tn]++<<6)}}function Wt(en,dn,Bn,tr,tn,yn,On){for(var kn=Bn,Mn=0,ar=0;tn<=yn;tn++){if(kn.value-Bn.value>tr)return!1;Ft(6,Mn,ar,en,kn);var hr=Lt.l;if(Mn=Lt.c,ar=Lt.lc,On[tn]=hr,hr==63){if(kn.value-Bn.value>tr)throw"Something wrong with hufUnpackEncTable";Ft(8,Mn,ar,en,kn);var Wn=Lt.l+6;if(Mn=Lt.c,ar=Lt.lc,tn+Wn>yn+1)throw"Something wrong with hufUnpackEncTable";for(;Wn--;)On[tn++]=0;tn--}else if(hr>=59){var Wn=hr-59+2;if(tn+Wn>yn+1)throw"Something wrong with hufUnpackEncTable";for(;Wn--;)On[tn++]=0;tn--}}Kt(On)}function Jt(en){return en&63}function Ot(en){return en>>6}function kt(en,dn,Bn,tr){for(;dn<=Bn;dn++){var tn=Ot(en[dn]),yn=Jt(en[dn]);if(tn>>yn)throw"Invalid table entry";if(yn>14){var On=tr[tn>>yn-14];if(On.len)throw"Invalid table entry";if(On.lit++,On.p){var kn=On.p;On.p=new Array(On.lit);for(var Mn=0;Mn<On.lit-1;++Mn)On.p[Mn]=kn[Mn]}else On.p=new Array(1);On.p[On.lit-1]=dn}else if(yn)for(var ar=0,Mn=1<<14-yn;Mn>0;Mn--){var On=tr[(tn<<14-yn)+ar];if(On.len||On.p)throw"Invalid table entry";On.len=yn,On.lit=dn,ar++}}return!0}const Gt={c:0,lc:0};function zt(en,dn,Bn,tr){en=en<<8|Nn(Bn,tr),dn+=8,Gt.c=en,Gt.lc=dn}const Vt={c:0,lc:0};function Dt(en,dn,Bn,tr,tn,yn,On,kn,Mn,ar){if(en==dn){tr<8&&(zt(Bn,tr,tn,On),Bn=Gt.c,tr=Gt.lc),tr-=8;var hr=Bn>>tr,hr=new Uint8Array([hr])[0];if(Mn.value+hr>ar)return!1;for(var Wn=kn[Mn.value-1];hr-- >0;)kn[Mn.value++]=Wn}else if(Mn.value<ar)kn[Mn.value++]=en;else return!1;Vt.c=Bn,Vt.lc=tr}function It(en){return en&65535}function Ut(en){var dn=It(en);return dn>32767?dn-65536:dn}const Yt={a:0,b:0};function qt(en,dn){var Bn=Ut(en),tr=Ut(dn),tn=tr,yn=Bn+(tn&1)+(tn>>1),On=yn,kn=yn-tn;Yt.a=On,Yt.b=kn}function rn(en,dn){var Bn=It(en),tr=It(dn),tn=Bn-(tr>>1)&65535,yn=tr+tn-32768&65535;Yt.a=yn,Yt.b=tn}function gn(en,dn,Bn,tr,tn,yn,On){for(var kn=On<16384,Mn=Bn>tn?tn:Bn,ar=1,hr;ar<=Mn;)ar<<=1;for(ar>>=1,hr=ar,ar>>=1;ar>=1;){for(var Wn=0,Br=Wn+yn*(tn-hr),Mr=yn*ar,wr=yn*hr,Pr=tr*ar,Wr=tr*hr,es,ts,Qr,zr;Wn<=Br;Wn+=wr){for(var kr=Wn,ws=Wn+tr*(Bn-hr);kr<=ws;kr+=Wr){var $r=kr+Pr,Ps=kr+Mr,Qs=Ps+Pr;kn?(qt(en[kr+dn],en[Ps+dn]),es=Yt.a,Qr=Yt.b,qt(en[$r+dn],en[Qs+dn]),ts=Yt.a,zr=Yt.b,qt(es,ts),en[kr+dn]=Yt.a,en[$r+dn]=Yt.b,qt(Qr,zr),en[Ps+dn]=Yt.a,en[Qs+dn]=Yt.b):(rn(en[kr+dn],en[Ps+dn]),es=Yt.a,Qr=Yt.b,rn(en[$r+dn],en[Qs+dn]),ts=Yt.a,zr=Yt.b,rn(es,ts),en[kr+dn]=Yt.a,en[$r+dn]=Yt.b,rn(Qr,zr),en[Ps+dn]=Yt.a,en[Qs+dn]=Yt.b)}if(Bn&ar){var Ps=kr+Mr;kn?qt(en[kr+dn],en[Ps+dn]):rn(en[kr+dn],en[Ps+dn]),es=Yt.a,en[Ps+dn]=Yt.b,en[kr+dn]=es}}if(tn&ar)for(var kr=Wn,ws=Wn+tr*(Bn-hr);kr<=ws;kr+=Wr){var $r=kr+Pr;kn?qt(en[kr+dn],en[$r+dn]):rn(en[kr+dn],en[$r+dn]),es=Yt.a,en[$r+dn]=Yt.b,en[kr+dn]=es}hr=ar,ar>>=1}return Wn}function An(en,dn,Bn,tr,tn,yn,On,kn,Mn,ar){for(var hr=0,Wn=0,Br=kn,Mr=Math.trunc(tn.value+(yn+7)/8);tn.value<Mr;)for(zt(hr,Wn,Bn,tn),hr=Gt.c,Wn=Gt.lc;Wn>=14;){var wr=hr>>Wn-14&16383,Pr=dn[wr];if(Pr.len)Wn-=Pr.len,Dt(Pr.lit,On,hr,Wn,Bn,tr,tn,Mn,ar,Br),hr=Vt.c,Wn=Vt.lc;else{if(!Pr.p)throw"hufDecode issues";var Wr;for(Wr=0;Wr<Pr.lit;Wr++){for(var es=Jt(en[Pr.p[Wr]]);Wn<es&&tn.value<Mr;)zt(hr,Wn,Bn,tn),hr=Gt.c,Wn=Gt.lc;if(Wn>=es&&Ot(en[Pr.p[Wr]])==(hr>>Wn-es&(1<<es)-1)){Wn-=es,Dt(Pr.p[Wr],On,hr,Wn,Bn,tr,tn,Mn,ar,Br),hr=Vt.c,Wn=Vt.lc;break}}if(Wr==Pr.lit)throw"hufDecode issues"}}var ts=8-yn&7;for(hr>>=ts,Wn-=ts;Wn>0;){var Pr=dn[hr<<14-Wn&16383];if(Pr.len)Wn-=Pr.len,Dt(Pr.lit,On,hr,Wn,Bn,tr,tn,Mn,ar,Br),hr=Vt.c,Wn=Vt.lc;else throw"hufDecode issues"}return!0}function En(en,dn,Bn,tr,tn,yn){var On={value:0},kn=Bn.value,Mn=lr(dn,Bn),ar=lr(dn,Bn);Bn.value+=4;var hr=lr(dn,Bn);if(Bn.value+=4,Mn<0||Mn>=65537||ar<0||ar>=65537)throw"Something wrong with HUF_ENCSIZE";var Wn=new Array(65537),Br=new Array(16384);Mt(Br);var Mr=tr-(Bn.value-kn);if(Wt(en,dn,Bn,Mr,Mn,ar,Wn),hr>8*(tr-(Bn.value-kn)))throw"Something wrong with hufUncompress";kt(Wn,Mn,ar,Br),An(Wn,Br,en,dn,Bn,hr,ar,yn,tn,On)}function fn(en,dn,Bn){for(var tr=0;tr<Bn;++tr)dn[tr]=en[dn[tr]]}function nn(en){for(var dn=1;dn<en.length;dn++){var Bn=en[dn-1]+en[dn]-128;en[dn]=Bn}}function Tn(en,dn){for(var Bn=0,tr=Math.floor((en.length+1)/2),tn=0,yn=en.length-1;!(tn>yn||(dn[tn++]=en[Bn++],tn>yn));)dn[tn++]=en[tr++]}function Cn(en){for(var dn=en.byteLength,Bn=new Array,tr=0,tn=new DataView(en);dn>0;){var yn=tn.getInt8(tr++);if(yn<0){var On=-yn;dn-=On+1;for(var kn=0;kn<On;kn++)Bn.push(tn.getUint8(tr++))}else{var On=yn;dn-=2;for(var Mn=tn.getUint8(tr++),kn=0;kn<On+1;kn++)Bn.push(Mn)}}return Bn}function vn(en,dn,Bn,tr,tn,yn){var $r=new DataView(yn.buffer),On=Bn[en.idx[0]].width,kn=Bn[en.idx[0]].height,Mn=3,ar=Math.floor(On/8),hr=Math.ceil(On/8),Wn=Math.ceil(kn/8),Br=On-(hr-1)*8,Mr=kn-(Wn-1)*8,wr={value:0},Pr=new Array(Mn),Wr=new Array(Mn),es=new Array(Mn),ts=new Array(Mn),Qr=new Array(Mn);for(let us=0;us<Mn;++us)Qr[us]=dn[en.idx[us]],Pr[us]=us<1?0:Pr[us-1]+hr*Wn,Wr[us]=new Float32Array(64),es[us]=new Uint16Array(64),ts[us]=new Uint16Array(hr*64);for(let us=0;us<Wn;++us){var zr=8;us==Wn-1&&(zr=Mr);var kr=8;for(let Ns=0;Ns<hr;++Ns){Ns==hr-1&&(kr=Br);for(let cs=0;cs<Mn;++cs)es[cs].fill(0),es[cs][0]=tn[Pr[cs]++],_n(wr,tr,es[cs]),Qt(es[cs],Wr[cs]),sn(Wr[cs]);jt(Wr);for(let cs=0;cs<Mn;++cs)Bt(Wr[cs],ts[cs],Ns*64)}let zs=0;for(let Ns=0;Ns<Mn;++Ns){const cs=Bn[en.idx[Ns]].type;for(let Xs=8*us;Xs<8*us+zr;++Xs){zs=Qr[Ns][Xs];for(let bo=0;bo<ar;++bo){const no=bo*64+(Xs&7)*8;$r.setUint16(zs+0*2*cs,ts[Ns][no+0],!0),$r.setUint16(zs+1*2*cs,ts[Ns][no+1],!0),$r.setUint16(zs+2*2*cs,ts[Ns][no+2],!0),$r.setUint16(zs+3*2*cs,ts[Ns][no+3],!0),$r.setUint16(zs+4*2*cs,ts[Ns][no+4],!0),$r.setUint16(zs+5*2*cs,ts[Ns][no+5],!0),$r.setUint16(zs+6*2*cs,ts[Ns][no+6],!0),$r.setUint16(zs+7*2*cs,ts[Ns][no+7],!0),zs+=8*2*cs}}if(ar!=hr)for(let Xs=8*us;Xs<8*us+zr;++Xs){const bo=Qr[Ns][Xs]+8*ar*2*cs,no=ar*64+(Xs&7)*8;for(let Do=0;Do<kr;++Do)$r.setUint16(bo+Do*2*cs,ts[Ns][no+Do],!0)}}}for(var ws=new Uint16Array(On),$r=new DataView(yn.buffer),Ps=0;Ps<Mn;++Ps){Bn[en.idx[Ps]].decoded=!0;var Qs=Bn[en.idx[Ps]].type;if(Bn[Ps].type==2)for(var Os=0;Os<kn;++Os){const us=Qr[Ps][Os];for(var Ws=0;Ws<On;++Ws)ws[Ws]=$r.getUint16(us+Ws*2*Qs,!0);for(var Ws=0;Ws<On;++Ws)$r.setFloat32(us+Ws*2*Qs,xn(ws[Ws]),!0)}}}function _n(en,dn,Bn){for(var tr,tn=1;tn<64;)tr=dn[en.value],tr==65280?tn=64:tr>>8==255?tn+=tr&255:(Bn[tn]=tr,tn++),en.value++}function Qt(en,dn){dn[0]=xn(en[0]),dn[1]=xn(en[1]),dn[2]=xn(en[5]),dn[3]=xn(en[6]),dn[4]=xn(en[14]),dn[5]=xn(en[15]),dn[6]=xn(en[27]),dn[7]=xn(en[28]),dn[8]=xn(en[2]),dn[9]=xn(en[4]),dn[10]=xn(en[7]),dn[11]=xn(en[13]),dn[12]=xn(en[16]),dn[13]=xn(en[26]),dn[14]=xn(en[29]),dn[15]=xn(en[42]),dn[16]=xn(en[3]),dn[17]=xn(en[8]),dn[18]=xn(en[12]),dn[19]=xn(en[17]),dn[20]=xn(en[25]),dn[21]=xn(en[30]),dn[22]=xn(en[41]),dn[23]=xn(en[43]),dn[24]=xn(en[9]),dn[25]=xn(en[11]),dn[26]=xn(en[18]),dn[27]=xn(en[24]),dn[28]=xn(en[31]),dn[29]=xn(en[40]),dn[30]=xn(en[44]),dn[31]=xn(en[53]),dn[32]=xn(en[10]),dn[33]=xn(en[19]),dn[34]=xn(en[23]),dn[35]=xn(en[32]),dn[36]=xn(en[39]),dn[37]=xn(en[45]),dn[38]=xn(en[52]),dn[39]=xn(en[54]),dn[40]=xn(en[20]),dn[41]=xn(en[22]),dn[42]=xn(en[33]),dn[43]=xn(en[38]),dn[44]=xn(en[46]),dn[45]=xn(en[51]),dn[46]=xn(en[55]),dn[47]=xn(en[60]),dn[48]=xn(en[21]),dn[49]=xn(en[34]),dn[50]=xn(en[37]),dn[51]=xn(en[47]),dn[52]=xn(en[50]),dn[53]=xn(en[56]),dn[54]=xn(en[59]),dn[55]=xn(en[61]),dn[56]=xn(en[35]),dn[57]=xn(en[36]),dn[58]=xn(en[48]),dn[59]=xn(en[49]),dn[60]=xn(en[57]),dn[61]=xn(en[58]),dn[62]=xn(en[62]),dn[63]=xn(en[63])}function sn(en){const dn=.5*Math.cos(.7853975),Bn=.5*Math.cos(3.14159/16),tr=.5*Math.cos(3.14159/8),tn=.5*Math.cos(3*3.14159/16),yn=.5*Math.cos(5*3.14159/16),On=.5*Math.cos(3*3.14159/8),kn=.5*Math.cos(7*3.14159/16);for(var Mn=new Array(4),ar=new Array(4),hr=new Array(4),Wn=new Array(4),Br=0;Br<8;++Br){var Mr=Br*8;Mn[0]=tr*en[Mr+2],Mn[1]=On*en[Mr+2],Mn[2]=tr*en[Mr+6],Mn[3]=On*en[Mr+6],ar[0]=Bn*en[Mr+1]+tn*en[Mr+3]+yn*en[Mr+5]+kn*en[Mr+7],ar[1]=tn*en[Mr+1]-kn*en[Mr+3]-Bn*en[Mr+5]-yn*en[Mr+7],ar[2]=yn*en[Mr+1]-Bn*en[Mr+3]+kn*en[Mr+5]+tn*en[Mr+7],ar[3]=kn*en[Mr+1]-yn*en[Mr+3]+tn*en[Mr+5]-Bn*en[Mr+7],hr[0]=dn*(en[Mr+0]+en[Mr+4]),hr[3]=dn*(en[Mr+0]-en[Mr+4]),hr[1]=Mn[0]+Mn[3],hr[2]=Mn[1]-Mn[2],Wn[0]=hr[0]+hr[1],Wn[1]=hr[3]+hr[2],Wn[2]=hr[3]-hr[2],Wn[3]=hr[0]-hr[1],en[Mr+0]=Wn[0]+ar[0],en[Mr+1]=Wn[1]+ar[1],en[Mr+2]=Wn[2]+ar[2],en[Mr+3]=Wn[3]+ar[3],en[Mr+4]=Wn[3]-ar[3],en[Mr+5]=Wn[2]-ar[2],en[Mr+6]=Wn[1]-ar[1],en[Mr+7]=Wn[0]-ar[0]}for(var wr=0;wr<8;++wr)Mn[0]=tr*en[16+wr],Mn[1]=On*en[16+wr],Mn[2]=tr*en[48+wr],Mn[3]=On*en[48+wr],ar[0]=Bn*en[8+wr]+tn*en[24+wr]+yn*en[40+wr]+kn*en[56+wr],ar[1]=tn*en[8+wr]-kn*en[24+wr]-Bn*en[40+wr]-yn*en[56+wr],ar[2]=yn*en[8+wr]-Bn*en[24+wr]+kn*en[40+wr]+tn*en[56+wr],ar[3]=kn*en[8+wr]-yn*en[24+wr]+tn*en[40+wr]-Bn*en[56+wr],hr[0]=dn*(en[wr]+en[32+wr]),hr[3]=dn*(en[wr]-en[32+wr]),hr[1]=Mn[0]+Mn[3],hr[2]=Mn[1]-Mn[2],Wn[0]=hr[0]+hr[1],Wn[1]=hr[3]+hr[2],Wn[2]=hr[3]-hr[2],Wn[3]=hr[0]-hr[1],en[0+wr]=Wn[0]+ar[0],en[8+wr]=Wn[1]+ar[1],en[16+wr]=Wn[2]+ar[2],en[24+wr]=Wn[3]+ar[3],en[32+wr]=Wn[3]-ar[3],en[40+wr]=Wn[2]-ar[2],en[48+wr]=Wn[1]-ar[1],en[56+wr]=Wn[0]-ar[0]}function jt(en){for(var dn=0;dn<64;++dn){var Bn=en[0][dn],tr=en[1][dn],tn=en[2][dn];en[0][dn]=Bn+1.5747*tn,en[1][dn]=Bn-.1873*tr-.4682*tn,en[2][dn]=Bn+1.8556*tr}}function Bt(en,dn,Bn){for(var tr=0;tr<64;++tr)dn[Bn+tr]=DataUtils.toHalfFloat(hn(en[tr]))}function hn(en){return en<=1?Math.sign(en)*Math.pow(Math.abs(en),2.2):Math.sign(en)*Math.pow(Rt,Math.abs(en)-1)}function cn(en){return new DataView(en.array.buffer,en.offset.value,en.size)}function mn(en){var dn=en.viewer.buffer.slice(en.offset.value,en.offset.value+en.size),Bn=new Uint8Array(Cn(dn)),tr=new Uint8Array(Bn.length);return nn(Bn),Tn(Bn,tr),new DataView(tr.buffer)}function an(en){var dn=en.array.slice(en.offset.value,en.offset.value+en.size),Bn=unzlibSync(dn),tr=new Uint8Array(Bn.length);return nn(Bn),Tn(Bn,tr),new DataView(tr.buffer)}function Hn(en){for(var dn=en.viewer,Bn={value:en.offset.value},tr=new Uint16Array(en.width*en.scanlineBlockSize*(en.channels*en.type)),tn=new Uint8Array(8192),yn=0,On=new Array(en.channels),kn=0;kn<en.channels;kn++)On[kn]={},On[kn].start=yn,On[kn].end=On[kn].start,On[kn].nx=en.width,On[kn].ny=en.lines,On[kn].size=en.type,yn+=On[kn].nx*On[kn].ny*On[kn].size;var Mn=on(dn,Bn),ar=on(dn,Bn);if(ar>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Mn<=ar)for(var kn=0;kn<ar-Mn+1;kn++)tn[kn+Mn]=bn(dn,Bn);var hr=new Uint16Array(65536),Wn=Tt(tn,hr),Br=lr(dn,Bn);En(en.array,dn,Bn,Br,tr,yn);for(var kn=0;kn<en.channels;++kn)for(var Mr=On[kn],wr=0;wr<On[kn].size;++wr)gn(tr,Mr.start+wr,Mr.nx,Mr.size,Mr.ny,Mr.nx*Mr.size,Wn);fn(hr,tr,yn);for(var Pr=0,Wr=new Uint8Array(tr.buffer.byteLength),es=0;es<en.lines;es++)for(var ts=0;ts<en.channels;ts++){var Mr=On[ts],Qr=Mr.nx*Mr.size,zr=new Uint8Array(tr.buffer,Mr.end*2,Qr*2);Wr.set(zr,Pr),Pr+=Qr*2,Mr.end+=Qr}return new DataView(Wr.buffer)}function Pn(en){var dn=en.array.slice(en.offset.value,en.offset.value+en.size),Bn=unzlibSync(dn);const tr=en.lines*en.channels*en.width,tn=en.type==1?new Uint16Array(tr):new Uint32Array(tr);let yn=0,On=0;const kn=new Array(4);for(let Mn=0;Mn<en.lines;Mn++)for(let ar=0;ar<en.channels;ar++){let hr=0;switch(en.type){case 1:kn[0]=yn,kn[1]=kn[0]+en.width,yn=kn[1]+en.width;for(let Wn=0;Wn<en.width;++Wn){const Br=Bn[kn[0]++]<<8|Bn[kn[1]++];hr+=Br,tn[On]=hr,On++}break;case 2:kn[0]=yn,kn[1]=kn[0]+en.width,kn[2]=kn[1]+en.width,yn=kn[2]+en.width;for(let Wn=0;Wn<en.width;++Wn){const Br=Bn[kn[0]++]<<24|Bn[kn[1]++]<<16|Bn[kn[2]++]<<8;hr+=Br,tn[On]=hr,On++}break}}return new DataView(tn.buffer)}function er(en){var dn=en.viewer,Bn={value:en.offset.value},tr=new Uint8Array(en.width*en.lines*(en.channels*en.type*2)),tn={version:Rn(dn,Bn),unknownUncompressedSize:Rn(dn,Bn),unknownCompressedSize:Rn(dn,Bn),acCompressedSize:Rn(dn,Bn),dcCompressedSize:Rn(dn,Bn),rleCompressedSize:Rn(dn,Bn),rleUncompressedSize:Rn(dn,Bn),rleRawSize:Rn(dn,Bn),totalAcUncompressedCount:Rn(dn,Bn),totalDcUncompressedCount:Rn(dn,Bn),acCompression:Rn(dn,Bn)};if(tn.version<2)throw"EXRLoader.parse: "+br.compression+" version "+tn.version+" is unsupported";for(var yn=new Array,On=on(dn,Bn)-2;On>0;){var kn=cr(dn.buffer,Bn),Mn=bn(dn,Bn),ar=Mn>>2&3,hr=(Mn>>4)-1,Wn=new Int8Array([hr])[0],Br=bn(dn,Bn);yn.push({name:kn,index:Wn,type:Br,compression:ar}),On-=kn.length+3}for(var Mr=br.channels,wr=new Array(en.channels),Pr=0;Pr<en.channels;++Pr){var Wr=wr[Pr]={},es=Mr[Pr];Wr.name=es.name,Wr.compression=0,Wr.decoded=!1,Wr.type=es.pixelType,Wr.pLinear=es.pLinear,Wr.width=en.width,Wr.height=en.lines}for(var ts={idx:new Array(3)},Qr=0;Qr<en.channels;++Qr)for(var Wr=wr[Qr],Pr=0;Pr<yn.length;++Pr){var zr=yn[Pr];Wr.name==zr.name&&(Wr.compression=zr.compression,zr.index>=0&&(ts.idx[zr.index]=Qr),Wr.offset=Qr)}if(tn.acCompressedSize>0)switch(tn.acCompression){case 0:var $r=new Uint16Array(tn.totalAcUncompressedCount);En(en.array,dn,Bn,tn.acCompressedSize,$r,tn.totalAcUncompressedCount);break;case 1:var kr=en.array.slice(Bn.value,Bn.value+tn.totalAcUncompressedCount),ws=unzlibSync(kr),$r=new Uint16Array(ws.buffer);Bn.value+=tn.totalAcUncompressedCount;break}if(tn.dcCompressedSize>0){var Ps={array:en.array,offset:Bn,size:tn.dcCompressedSize},Qs=new Uint16Array(an(Ps).buffer);Bn.value+=tn.dcCompressedSize}if(tn.rleRawSize>0){var kr=en.array.slice(Bn.value,Bn.value+tn.rleCompressedSize),ws=unzlibSync(kr),Os=Cn(ws.buffer);Bn.value+=tn.rleCompressedSize}for(var Ws=0,us=new Array(wr.length),Pr=0;Pr<us.length;++Pr)us[Pr]=new Array;for(var zs=0;zs<en.lines;++zs)for(var Ns=0;Ns<wr.length;++Ns)us[Ns].push(Ws),Ws+=wr[Ns].width*en.type*2;vn(ts,us,wr,$r,Qs,tr);for(var Pr=0;Pr<wr.length;++Pr){var Wr=wr[Pr];if(!Wr.decoded)switch(Wr.compression){case 2:for(var cs=0,Xs=0,zs=0;zs<en.lines;++zs){for(var bo=us[Pr][cs],no=0;no<Wr.width;++no){for(var Do=0;Do<2*Wr.type;++Do)tr[bo++]=Os[Xs+Do*Wr.width*Wr.height];Xs++}cs++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(tr.buffer)}function cr(en,dn){for(var Bn=new Uint8Array(en),tr=0;Bn[dn.value+tr]!=0;)tr+=1;var tn=new TextDecoder().decode(Bn.slice(dn.value,dn.value+tr));return dn.value=dn.value+tr+1,tn}function ir(en,dn,Bn){var tr=new TextDecoder().decode(new Uint8Array(en).slice(dn.value,dn.value+Bn));return dn.value=dn.value+Bn,tr}function Jn(en,dn){var Bn=dr(en,dn),tr=lr(en,dn);return[Bn,tr]}function fr(en,dn){var Bn=lr(en,dn),tr=lr(en,dn);return[Bn,tr]}function dr(en,dn){var Bn=en.getInt32(dn.value,!0);return dn.value=dn.value+4,Bn}function lr(en,dn){var Bn=en.getUint32(dn.value,!0);return dn.value=dn.value+4,Bn}function Nn(en,dn){var Bn=en[dn.value];return dn.value=dn.value+1,Bn}function bn(en,dn){var Bn=en.getUint8(dn.value);return dn.value=dn.value+1,Bn}const Rn=function(en,dn){let Bn;return"getBigInt64"in DataView.prototype?Bn=Number(en.getBigInt64(dn.value,!0)):Bn=en.getUint32(dn.value+4,!0)+Number(en.getUint32(dn.value,!0)<<32),dn.value+=8,Bn};function Sn(en,dn){var Bn=en.getFloat32(dn.value,!0);return dn.value+=4,Bn}function or(en,dn){return DataUtils.toHalfFloat(Sn(en,dn))}function xn(en){var dn=(en&31744)>>10,Bn=en&1023;return(en>>15?-1:1)*(dn?dn===31?Bn?NaN:1/0:Math.pow(2,dn-15)*(1+Bn/1024):6103515625e-14*(Bn/1024))}function on(en,dn){var Bn=en.getUint16(dn.value,!0);return dn.value+=2,Bn}function Gn(en,dn){return xn(on(en,dn))}function Xn(en,dn,Bn,tr){for(var tn=Bn.value,yn=[];Bn.value<tn+tr-1;){var On=cr(dn,Bn),kn=dr(en,Bn),Mn=bn(en,Bn);Bn.value+=3;var ar=dr(en,Bn),hr=dr(en,Bn);yn.push({name:On,pixelType:kn,pLinear:Mn,xSampling:ar,ySampling:hr})}return Bn.value+=1,yn}function pr(en,dn){var Bn=Sn(en,dn),tr=Sn(en,dn),tn=Sn(en,dn),yn=Sn(en,dn),On=Sn(en,dn),kn=Sn(en,dn),Mn=Sn(en,dn),ar=Sn(en,dn);return{redX:Bn,redY:tr,greenX:tn,greenY:yn,blueX:On,blueY:kn,whiteX:Mn,whiteY:ar}}function Ar(en,dn){var Bn=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],tr=bn(en,dn);return Bn[tr]}function xr(en,dn){var Bn=lr(en,dn),tr=lr(en,dn),tn=lr(en,dn),yn=lr(en,dn);return{xMin:Bn,yMin:tr,xMax:tn,yMax:yn}}function un(en,dn){var Bn=["INCREASING_Y"],tr=bn(en,dn);return Bn[tr]}function pn(en,dn){var Bn=Sn(en,dn),tr=Sn(en,dn);return[Bn,tr]}function Fn(en,dn){var Bn=Sn(en,dn),tr=Sn(en,dn),tn=Sn(en,dn);return[Bn,tr,tn]}function Yn(en,dn,Bn,tr,tn){if(tr==="string"||tr==="stringvector"||tr==="iccProfile")return ir(dn,Bn,tn);if(tr==="chlist")return Xn(en,dn,Bn,tn);if(tr==="chromaticities")return pr(en,Bn);if(tr==="compression")return Ar(en,Bn);if(tr==="box2i")return xr(en,Bn);if(tr==="lineOrder")return un(en,Bn);if(tr==="float")return Sn(en,Bn);if(tr==="v2f")return pn(en,Bn);if(tr==="v3f")return Fn(en,Bn);if(tr==="int")return dr(en,Bn);if(tr==="rational")return Jn(en,Bn);if(tr==="timecode")return fr(en,Bn);if(tr==="preview")return Bn.value+=tn,"skipped";Bn.value+=tn}function Qn(en,dn,Bn){const tr={};if(en.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";tr.version=en.getUint8(4);const tn=en.getUint8(5);tr.spec={singleTile:!!(tn&2),longName:!!(tn&4),deepFormat:!!(tn&8),multiPart:!!(tn&16)},Bn.value=8;for(var yn=!0;yn;){var On=cr(dn,Bn);if(On==0)yn=!1;else{var kn=cr(dn,Bn),Mn=lr(en,Bn),ar=Yn(en,dn,Bn,kn,Mn);ar===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${kn}'.`):tr[On]=ar}}if(tn&-5)throw console.error("EXRHeader:",tr),"THREE.EXRLoader: provided file is currently unsupported.";return tr}function ur(en,dn,Bn,tr,tn){const yn={size:0,viewer:dn,array:Bn,offset:tr,width:en.dataWindow.xMax-en.dataWindow.xMin+1,height:en.dataWindow.yMax-en.dataWindow.yMin+1,channels:en.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:en.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(en.compression){case"NO_COMPRESSION":yn.lines=1,yn.uncompress=cn;break;case"RLE_COMPRESSION":yn.lines=1,yn.uncompress=mn;break;case"ZIPS_COMPRESSION":yn.lines=1,yn.uncompress=an;break;case"ZIP_COMPRESSION":yn.lines=16,yn.uncompress=an;break;case"PIZ_COMPRESSION":yn.lines=32,yn.uncompress=Hn;break;case"PXR24_COMPRESSION":yn.lines=16,yn.uncompress=Pn;break;case"DWAA_COMPRESSION":yn.lines=32,yn.uncompress=er;break;case"DWAB_COMPRESSION":yn.lines=256,yn.uncompress=er;break;default:throw"EXRLoader.parse: "+en.compression+" is unsupported"}if(yn.scanlineBlockSize=yn.lines,yn.type==1)switch(tn){case FloatType:yn.getter=Gn,yn.inputSize=2;break;case HalfFloatType:yn.getter=on,yn.inputSize=2;break}else if(yn.type==2)switch(tn){case FloatType:yn.getter=Sn,yn.inputSize=4;break;case HalfFloatType:yn.getter=or,yn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+yn.type+" for "+en.compression+".";yn.blockCount=(en.dataWindow.yMax+1)/yn.scanlineBlockSize;for(var On=0;On<yn.blockCount;On++)Rn(dn,tr);yn.outputChannels=yn.channels==3?4:yn.channels;const kn=yn.width*yn.height*yn.outputChannels;switch(tn){case FloatType:yn.byteArray=new Float32Array(kn),yn.channels<yn.outputChannels&&yn.byteArray.fill(1,0,kn);break;case HalfFloatType:yn.byteArray=new Uint16Array(kn),yn.channels<yn.outputChannels&&yn.byteArray.fill(15360,0,kn);break;default:console.error("THREE.EXRLoader: unsupported type: ",tn);break}return yn.bytesPerLine=yn.width*yn.inputSize*yn.channels,yn.outputChannels==4?yn.format=RGBAFormat:yn.format=RedFormat,hasColorSpace?yn.colorSpace="srgb-linear":yn.encoding=3e3,yn}const vr=new DataView(_),Or=new Uint8Array(_),Fr={value:0},br=Qn(vr,_,Fr),Lr=ur(br,vr,Or,Fr,this.type),Ir={value:0},Ur={R:0,G:1,B:2,A:3,Y:0};for(let en=0;en<Lr.height/Lr.scanlineBlockSize;en++){const dn=lr(vr,Fr);Lr.size=lr(vr,Fr),Lr.lines=dn+Lr.scanlineBlockSize>Lr.height?Lr.height-dn:Lr.scanlineBlockSize;const tr=Lr.size<Lr.lines*Lr.bytesPerLine?Lr.uncompress(Lr):cn(Lr);Fr.value+=Lr.size;for(let tn=0;tn<Lr.scanlineBlockSize;tn++){const yn=tn+en*Lr.scanlineBlockSize;if(yn>=Lr.height)break;for(let On=0;On<Lr.channels;On++){const kn=Ur[br.channels[On].name];for(let Mn=0;Mn<Lr.width;Mn++){Ir.value=(tn*(Lr.channels*Lr.width)+On*Lr.width+Mn)*Lr.inputSize;const ar=(Lr.height-1-yn)*(Lr.width*Lr.outputChannels)+Mn*Lr.outputChannels+kn;Lr.byteArray[ar]=Lr.getter(tr,Ir)}}}}return{header:br,width:Lr.width,height:Lr.height,data:Lr.byteArray,format:Lr.format,[hasColorSpace?"colorSpace":"encoding"]:Lr[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(_){return this.type=_,this}load(_,tt,nt,rt){function it(st,ot){hasColorSpace?st.colorSpace=ot.colorSpace:st.encoding=ot.encoding,st.minFilter=LinearFilter,st.magFilter=LinearFilter,st.generateMipmaps=!1,st.flipY=!1,tt&&tt(st,ot)}return super.load(_,it,nt,rt)}}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,tt,nt,rt){const it=new FileLoader(this.manager);it.setPath(this.path),it.setResponseType("arraybuffer"),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials),it.load(_,st=>{const ot={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(st,ot).then(tt).catch(rt)},nt,rt)}decodeDracoFile(_,tt,nt,rt){const it={attributeIDs:nt||this.defaultAttributeIDs,attributeTypes:rt||this.defaultAttributeTypes,useUniqueIDs:!!nt};this.decodeGeometry(_,it).then(tt)}decodeGeometry(_,tt){for(const at in tt.attributeTypes){const lt=tt.attributeTypes[at];lt.BYTES_PER_ELEMENT!==void 0&&(tt.attributeTypes[at]=lt.name)}const nt=JSON.stringify(tt);if(_taskCache.has(_)){const at=_taskCache.get(_);if(at.key===nt)return at.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let rt;const it=this.workerNextTaskID++,st=_.byteLength,ot=this._getWorker(it,st).then(at=>(rt=at,new Promise((lt,ct)=>{rt._callbacks[it]={resolve:lt,reject:ct},rt.postMessage({type:"decode",id:it,taskConfig:tt,buffer:_},[_])}))).then(at=>this._createGeometry(at.geometry));return ot.catch(()=>!0).then(()=>{rt&&it&&this._releaseTask(rt,it)}),_taskCache.set(_,{key:nt,promise:ot}),ot}_createGeometry(_){const tt=new BufferGeometry;_.index&&tt.setIndex(new BufferAttribute(_.index.array,1));for(let nt=0;nt<_.attributes.length;nt++){const rt=_.attributes[nt],it=rt.name,st=rt.array,ot=rt.itemSize;tt.setAttribute(it,new BufferAttribute(st,ot))}return tt}_loadLibrary(_,tt){const nt=new FileLoader(this.manager);return nt.setPath(this.decoderPath),nt.setResponseType(tt),nt.setWithCredentials(this.withCredentials),new Promise((rt,it)=>{nt.load(_,rt,void 0,it)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",tt=[];return _?tt.push(this._loadLibrary("draco_decoder.js","text")):(tt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),tt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(tt).then(nt=>{const rt=nt[0];_||(this.decoderConfig.wasmBinary=nt[1]);const it=DRACOWorker.toString(),st=["/* draco decoder */",rt,"","/* worker */",it.substring(it.indexOf("{")+1,it.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([st]))}),this.decoderPending}_getWorker(_,tt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const rt=new Worker(this.workerSourceURL);rt._callbacks={},rt._taskCosts={},rt._taskLoad=0,rt.postMessage({type:"init",decoderConfig:this.decoderConfig}),rt.onmessage=function(it){const st=it.data;switch(st.type){case"decode":rt._callbacks[st.id].resolve(st);break;case"error":rt._callbacks[st.id].reject(st);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+st.type+'"')}},this.workerPool.push(rt)}else this.workerPool.sort(function(rt,it){return rt._taskLoad>it._taskLoad?-1:1});const nt=this.workerPool[this.workerPool.length-1];return nt._taskCosts[_]=tt,nt._taskLoad+=tt,nt})}_releaseTask(_,tt){_._taskLoad-=_._taskCosts[tt],delete _._callbacks[tt],delete _._taskCosts[tt]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let _e,_;onmessage=function(st){const ot=st.data;switch(ot.type){case"init":_e=ot.decoderConfig,_=new Promise(function(ct){_e.onModuleLoaded=function(ut){ct({draco:ut})},DracoDecoderModule(_e)});break;case"decode":const at=ot.buffer,lt=ot.taskConfig;_.then(ct=>{const ut=ct.draco,dt=new ut.Decoder,ht=new ut.DecoderBuffer;ht.Init(new Int8Array(at),at.byteLength);try{const mt=tt(ut,dt,ht,lt),yt=mt.attributes.map(vt=>vt.array.buffer);mt.index&&yt.push(mt.index.array.buffer),self.postMessage({type:"decode",id:ot.id,geometry:mt},yt)}catch(mt){console.error(mt),self.postMessage({type:"error",id:ot.id,error:mt.message})}finally{ut.destroy(ht),ut.destroy(dt)}});break}};function tt(st,ot,at,lt){const ct=lt.attributeIDs,ut=lt.attributeTypes;let dt,ht;const mt=ot.GetEncodedGeometryType(at);if(mt===st.TRIANGULAR_MESH)dt=new st.Mesh,ht=ot.DecodeBufferToMesh(at,dt);else if(mt===st.POINT_CLOUD)dt=new st.PointCloud,ht=ot.DecodeBufferToPointCloud(at,dt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ht.ok()||dt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ht.error_msg());const yt={index:null,attributes:[]};for(const vt in ct){const pt=self[ut[vt]];let _t,xt;if(lt.useUniqueIDs)xt=ct[vt],_t=ot.GetAttributeByUniqueId(dt,xt);else{if(xt=ot.GetAttributeId(dt,st[ct[vt]]),xt===-1)continue;_t=ot.GetAttribute(dt,xt)}yt.attributes.push(rt(st,ot,dt,vt,pt,_t))}return mt===st.TRIANGULAR_MESH&&(yt.index=nt(st,ot,dt)),st.destroy(dt),yt}function nt(st,ot,at){const ct=at.num_faces()*3,ut=ct*4,dt=st._malloc(ut);ot.GetTrianglesUInt32Array(at,ut,dt);const ht=new Uint32Array(st.HEAPF32.buffer,dt,ct).slice();return st._free(dt),{array:ht,itemSize:1}}function rt(st,ot,at,lt,ct,ut){const dt=ut.num_components(),mt=at.num_points()*dt,yt=mt*ct.BYTES_PER_ELEMENT,vt=it(st,ct),pt=st._malloc(yt);ot.GetAttributeDataArrayForAllPoints(at,ut,vt,yt,pt);const _t=new ct(st.HEAPF32.buffer,pt,mt).slice();return st._free(pt),{name:lt,array:_t,itemSize:dt}}function it(st,ot){switch(ot){case Float32Array:return st.DT_FLOAT32;case Int8Array:return st.DT_INT8;case Int16Array:return st.DT_INT16;case Int32Array:return st.DT_INT32;case Uint8Array:return st.DT_UINT8;case Uint16Array:return st.DT_UINT16;case Uint32Array:return st.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const _e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",_="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",tt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),nt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let rt=_e;WebAssembly.validate(tt)&&(rt=_);let it;const st=WebAssembly.instantiate(ot(rt),{}).then(ut=>{it=ut.instance,it.exports.__wasm_call_ctors()});function ot(ut){const dt=new Uint8Array(ut.length);for(let mt=0;mt<ut.length;++mt){const yt=ut.charCodeAt(mt);dt[mt]=yt>96?yt-71:yt>64?yt-65:yt>47?yt+4:yt>46?63:62}let ht=0;for(let mt=0;mt<ut.length;++mt)dt[ht++]=dt[mt]<60?nt[dt[mt]]:(dt[mt]-60)*64+dt[++mt];return dt.buffer.slice(0,ht)}function at(ut,dt,ht,mt,yt,vt){const pt=it.exports.sbrk,_t=ht+3&-4,xt=pt(_t*mt),St=pt(yt.length),At=new Uint8Array(it.exports.memory.buffer);At.set(yt,St);const bt=ut(xt,ht,mt,St,yt.length);if(bt===0&&vt&&vt(xt,_t,mt),dt.set(At.subarray(xt,xt+ht*mt)),pt(xt-pt(0)),bt!==0)throw new Error(`Malformed buffer data: ${bt}`)}const lt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ct={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:st,supported:!0,decodeVertexBuffer(ut,dt,ht,mt,yt){at(it.exports.meshopt_decodeVertexBuffer,ut,dt,ht,mt,it.exports[lt[yt]])},decodeIndexBuffer(ut,dt,ht,mt){at(it.exports.meshopt_decodeIndexBuffer,ut,dt,ht,mt)},decodeIndexSequence(ut,dt,ht,mt){at(it.exports.meshopt_decodeIndexSequence,ut,dt,ht,mt)},decodeGltfBuffer(ut,dt,ht,mt,yt,vt){at(it.exports[ct[yt]],ut,dt,ht,mt,it.exports[lt[vt]])}},generated};function shallow(_e,_){if(Object.is(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;const tt=Object.keys(_e);if(tt.length!==Object.keys(_).length)return!1;for(let nt=0;nt<tt.length;nt++)if(!Object.prototype.hasOwnProperty.call(_,tt[nt])||!Object.is(_e[tt[nt]],_[tt[nt]]))return!1;return!0}function workerBootstrap(){var _e=Object.create(null);function _(rt,it){var st=rt.id,ot=rt.name,at=rt.dependencies;at===void 0&&(at=[]);var lt=rt.init;lt===void 0&&(lt=function(){});var ct=rt.getTransferables;if(ct===void 0&&(ct=null),!_e[st])try{at=at.map(function(dt){return dt&&dt.isWorkerModule&&(_(dt,function(ht){if(ht instanceof Error)throw ht}),dt=_e[dt.id].value),dt}),lt=nt("<"+ot+">.init",lt),ct&&(ct=nt("<"+ot+">.getTransferables",ct));var ut=null;typeof lt=="function"?ut=lt.apply(void 0,at):console.error("worker module init function failed to rehydrate"),_e[st]={id:st,value:ut,getTransferables:ct},it(ut)}catch(dt){dt&&dt.noLog||console.error(dt),it(dt)}}function tt(rt,it){var st,ot=rt.id,at=rt.args;(!_e[ot]||typeof _e[ot].value!="function")&&it(new Error("Worker module "+ot+": not found or its 'init' did not return a function"));try{var lt=(st=_e[ot]).value.apply(st,at);lt&&typeof lt.then=="function"?lt.then(ct,function(ut){return it(ut instanceof Error?ut:new Error(""+ut))}):ct(lt)}catch(ut){it(ut)}function ct(ut){try{var dt=_e[ot].getTransferables&&_e[ot].getTransferables(ut);(!dt||!Array.isArray(dt)||!dt.length)&&(dt=void 0),it(ut,dt)}catch(ht){console.error(ht),it(ht)}}}function nt(rt,it){var st=void 0;self.troikaDefine=function(at){return st=at};var ot=URL.createObjectURL(new Blob(["/** "+rt.replace(/\*/g,"")+` **/

troikaDefine(
`+it+`
)`],{type:"application/javascript"}));try{importScripts(ot)}catch(at){console.error(at)}return URL.revokeObjectURL(ot),delete self.troikaDefine,st}self.addEventListener("message",function(rt){var it=rt.data,st=it.messageId,ot=it.action,at=it.data;try{ot==="registerModule"&&_(at,function(lt){lt instanceof Error?postMessage({messageId:st,success:!1,error:lt.message}):postMessage({messageId:st,success:!0,result:{isCallable:typeof lt=="function"}})}),ot==="callModule"&&tt(at,function(lt,ct){lt instanceof Error?postMessage({messageId:st,success:!1,error:lt.message}):postMessage({messageId:st,success:!0,result:lt},ct||void 0)})}catch(lt){postMessage({messageId:st,success:!1,error:lt.stack})}})}function defineMainThreadModule(_e){var _=function(){for(var tt=[],nt=arguments.length;nt--;)tt[nt]=arguments[nt];return _._getInitResult().then(function(rt){if(typeof rt=="function")return rt.apply(void 0,tt);throw new Error("Worker module function was called but `init` did not return a callable function")})};return _._getInitResult=function(){var tt=_e.dependencies,nt=_e.init;tt=Array.isArray(tt)?tt.map(function(it){return it&&it._getInitResult?it._getInitResult():it}):[];var rt=Promise.all(tt).then(function(it){return nt.apply(null,it)});return _._getInitResult=function(){return rt},rt},_}var supportsWorkers=function(){var _e=!1;if(typeof window<"u"&&typeof window.document<"u")try{var _=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));_.terminate(),_e=!0}catch(tt){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+tt.message+"]")}return supportsWorkers=function(){return _e},_e},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(_e){if((!_e||typeof _e.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var _=_e.dependencies,tt=_e.init,nt=_e.getTransferables,rt=_e.workerId;if(!supportsWorkers())return defineMainThreadModule(_e);rt==null&&(rt="#default");var it="workerModule"+ ++_workerModuleId,st=_e.name||it,ot=null;_=_&&_.map(function(lt){return typeof lt=="function"&&!lt.workerModuleData&&(_allowInitAsString=!0,lt=defineWorkerModule({workerId:rt,name:"<"+st+"> function dependency: "+lt.name,init:`function(){return (
`+stringifyFunction(lt)+`
)}`}),_allowInitAsString=!1),lt&&lt.workerModuleData&&(lt=lt.workerModuleData),lt});function at(){for(var lt=[],ct=arguments.length;ct--;)lt[ct]=arguments[ct];if(!ot){ot=callWorker(rt,"registerModule",at.workerModuleData);var ut=function(){ot=null,registeredModules[rt].delete(ut)};(registeredModules[rt]||(registeredModules[rt]=new Set)).add(ut)}return ot.then(function(dt){var ht=dt.isCallable;if(ht)return callWorker(rt,"callModule",{id:it,args:lt});throw new Error("Worker module function was called but `init` did not return a callable function")})}return at.workerModuleData={isWorkerModule:!0,id:it,name:st,dependencies:_,init:stringifyFunction(tt),getTransferables:nt&&stringifyFunction(nt)},at}function terminateWorker(_e){registeredModules[_e]&&registeredModules[_e].forEach(function(_){_()}),workers[_e]&&(workers[_e].terminate(),delete workers[_e])}function stringifyFunction(_e){var _=_e.toString();return!/^function/.test(_)&&/^\w+\s*\(/.test(_)&&(_="function "+_),_}function getWorker(_e){var _=workers[_e];if(!_){var tt=stringifyFunction(workerBootstrap);_=workers[_e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+_e.replace(/\*/g,"")+` **/

;(`+tt+")()"],{type:"application/javascript"}))),_.onmessage=function(nt){var rt=nt.data,it=rt.messageId,st=openRequests[it];if(!st)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[it],st(rt)}}return _}function callWorker(_e,_,tt){return new Promise(function(nt,rt){var it=++_messageId;openRequests[it]=function(st){st.success?nt(st.result):rt(new Error("Error in worker "+_+" call: "+st.error))},getWorker(_e).postMessage({messageId:it,action:_,data:tt})})}function SDFGenerator(){var _e=function(_){function tt(kt,Gt,zt,Vt,Dt,It,Ut,Yt){var qt=1-Ut;Yt.x=qt*qt*kt+2*qt*Ut*zt+Ut*Ut*Dt,Yt.y=qt*qt*Gt+2*qt*Ut*Vt+Ut*Ut*It}function nt(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn){var gn=1-qt;rn.x=gn*gn*gn*kt+3*gn*gn*qt*zt+3*gn*qt*qt*Dt+qt*qt*qt*Ut,rn.y=gn*gn*gn*Gt+3*gn*gn*qt*Vt+3*gn*qt*qt*It+qt*qt*qt*Yt}function rt(kt,Gt){for(var zt=/([MLQCZ])([^MLQCZ]*)/g,Vt,Dt,It,Ut,Yt;Vt=zt.exec(kt);){var qt=Vt[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(rn){return parseFloat(rn)});switch(Vt[1]){case"M":Ut=Dt=qt[0],Yt=It=qt[1];break;case"L":(qt[0]!==Ut||qt[1]!==Yt)&&Gt("L",Ut,Yt,Ut=qt[0],Yt=qt[1]);break;case"Q":{Gt("Q",Ut,Yt,Ut=qt[2],Yt=qt[3],qt[0],qt[1]);break}case"C":{Gt("C",Ut,Yt,Ut=qt[4],Yt=qt[5],qt[0],qt[1],qt[2],qt[3]);break}case"Z":(Ut!==Dt||Yt!==It)&&Gt("L",Ut,Yt,Dt,It);break}}}function it(kt,Gt,zt){zt===void 0&&(zt=16);var Vt={x:0,y:0};rt(kt,function(Dt,It,Ut,Yt,qt,rn,gn,An,En){switch(Dt){case"L":Gt(It,Ut,Yt,qt);break;case"Q":{for(var fn=It,nn=Ut,Tn=1;Tn<zt;Tn++)tt(It,Ut,rn,gn,Yt,qt,Tn/(zt-1),Vt),Gt(fn,nn,Vt.x,Vt.y),fn=Vt.x,nn=Vt.y;break}case"C":{for(var Cn=It,vn=Ut,_n=1;_n<zt;_n++)nt(It,Ut,rn,gn,An,En,Yt,qt,_n/(zt-1),Vt),Gt(Cn,vn,Vt.x,Vt.y),Cn=Vt.x,vn=Vt.y;break}}})}var st="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",ot="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",at=new WeakMap,lt={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function ct(kt,Gt){var zt=kt.getContext?kt.getContext("webgl",lt):kt,Vt=at.get(zt);if(!Vt){let Cn=function(Bt){var hn=It[Bt];if(!hn&&(hn=It[Bt]=zt.getExtension(Bt),!hn))throw new Error(Bt+" not supported");return hn},vn=function(Bt,hn){var cn=zt.createShader(hn);return zt.shaderSource(cn,Bt),zt.compileShader(cn),cn},_n=function(Bt,hn,cn,mn){if(!Ut[Bt]){var an={},Hn={},Pn=zt.createProgram();zt.attachShader(Pn,vn(hn,zt.VERTEX_SHADER)),zt.attachShader(Pn,vn(cn,zt.FRAGMENT_SHADER)),zt.linkProgram(Pn),Ut[Bt]={program:Pn,transaction:function(cr){zt.useProgram(Pn),cr({setUniform:function(Jn,fr){for(var dr=[],lr=arguments.length-2;lr-- >0;)dr[lr]=arguments[lr+2];var Nn=Hn[fr]||(Hn[fr]=zt.getUniformLocation(Pn,fr));zt["uniform"+Jn].apply(zt,[Nn].concat(dr))},setAttribute:function(Jn,fr,dr,lr,Nn){var bn=an[Jn];bn||(bn=an[Jn]={buf:zt.createBuffer(),loc:zt.getAttribLocation(Pn,Jn),data:null}),zt.bindBuffer(zt.ARRAY_BUFFER,bn.buf),zt.vertexAttribPointer(bn.loc,fr,zt.FLOAT,!1,0,0),zt.enableVertexAttribArray(bn.loc),Dt?zt.vertexAttribDivisor(bn.loc,lr):Cn("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(bn.loc,lr),Nn!==bn.data&&(zt.bufferData(zt.ARRAY_BUFFER,Nn,dr),bn.data=Nn)}})}}}Ut[Bt].transaction(mn)},Qt=function(Bt,hn){qt++;try{zt.activeTexture(zt.TEXTURE0+qt);var cn=Yt[Bt];cn||(cn=Yt[Bt]=zt.createTexture(),zt.bindTexture(zt.TEXTURE_2D,cn),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_MIN_FILTER,zt.NEAREST),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_MAG_FILTER,zt.NEAREST)),zt.bindTexture(zt.TEXTURE_2D,cn),hn(cn,qt)}finally{qt--}},sn=function(Bt,hn,cn){var mn=zt.createFramebuffer();rn.push(mn),zt.bindFramebuffer(zt.FRAMEBUFFER,mn),zt.activeTexture(zt.TEXTURE0+hn),zt.bindTexture(zt.TEXTURE_2D,Bt),zt.framebufferTexture2D(zt.FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_2D,Bt,0);try{cn(mn)}finally{zt.deleteFramebuffer(mn),zt.bindFramebuffer(zt.FRAMEBUFFER,rn[--rn.length-1]||null)}},jt=function(){It={},Ut={},Yt={},qt=-1,rn.length=0};var gn=Cn,An=vn,En=_n,fn=Qt,nn=sn,Tn=jt,Dt=typeof WebGL2RenderingContext<"u"&&zt instanceof WebGL2RenderingContext,It={},Ut={},Yt={},qt=-1,rn=[];zt.canvas.addEventListener("webglcontextlost",function(Bt){jt(),Bt.preventDefault()},!1),at.set(zt,Vt={gl:zt,isWebGL2:Dt,getExtension:Cn,withProgram:_n,withTexture:Qt,withTextureFramebuffer:sn,handleContextLoss:jt})}Gt(Vt)}function ut(kt,Gt,zt,Vt,Dt,It,Ut,Yt){Ut===void 0&&(Ut=15),Yt===void 0&&(Yt=null),ct(kt,function(qt){var rn=qt.gl,gn=qt.withProgram,An=qt.withTexture;An("copy",function(En,fn){rn.texImage2D(rn.TEXTURE_2D,0,rn.RGBA,Dt,It,0,rn.RGBA,rn.UNSIGNED_BYTE,Gt),gn("copy",st,ot,function(nn){var Tn=nn.setUniform,Cn=nn.setAttribute;Cn("aUV",2,rn.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Tn("1i","image",fn),rn.bindFramebuffer(rn.FRAMEBUFFER,Yt||null),rn.disable(rn.BLEND),rn.colorMask(Ut&8,Ut&4,Ut&2,Ut&1),rn.viewport(zt,Vt,Dt,It),rn.scissor(zt,Vt,Dt,It),rn.drawArrays(rn.TRIANGLES,0,3)})})})}function dt(kt,Gt,zt){var Vt=kt.width,Dt=kt.height;ct(kt,function(It){var Ut=It.gl,Yt=new Uint8Array(Vt*Dt*4);Ut.readPixels(0,0,Vt,Dt,Ut.RGBA,Ut.UNSIGNED_BYTE,Yt),kt.width=Gt,kt.height=zt,ut(Ut,Yt,0,0,Vt,Dt)})}var ht=Object.freeze({__proto__:null,withWebGLContext:ct,renderImageData:ut,resizeWebGLCanvasWithoutClearing:dt});function mt(kt,Gt,zt,Vt,Dt,It){It===void 0&&(It=1);var Ut=new Uint8Array(kt*Gt),Yt=Vt[2]-Vt[0],qt=Vt[3]-Vt[1],rn=[];it(zt,function(Cn,vn,_n,Qt){rn.push({x1:Cn,y1:vn,x2:_n,y2:Qt,minX:Math.min(Cn,_n),minY:Math.min(vn,Qt),maxX:Math.max(Cn,_n),maxY:Math.max(vn,Qt)})}),rn.sort(function(Cn,vn){return Cn.maxX-vn.maxX});for(var gn=0;gn<kt;gn++)for(var An=0;An<Gt;An++){var En=nn(Vt[0]+Yt*(gn+.5)/kt,Vt[1]+qt*(An+.5)/Gt),fn=Math.pow(1-Math.abs(En)/Dt,It)/2;En<0&&(fn=1-fn),fn=Math.max(0,Math.min(255,Math.round(fn*255))),Ut[An*kt+gn]=fn}return Ut;function nn(Cn,vn){for(var _n=1/0,Qt=1/0,sn=rn.length;sn--;){var jt=rn[sn];if(jt.maxX+Qt<=Cn)break;if(Cn+Qt>jt.minX&&vn-Qt<jt.maxY&&vn+Qt>jt.minY){var Bt=pt(Cn,vn,jt.x1,jt.y1,jt.x2,jt.y2);Bt<_n&&(_n=Bt,Qt=Math.sqrt(_n))}}return Tn(Cn,vn)&&(Qt=-Qt),Qt}function Tn(Cn,vn){for(var _n=0,Qt=rn.length;Qt--;){var sn=rn[Qt];if(sn.maxX<=Cn)break;var jt=sn.y1>vn!=sn.y2>vn&&Cn<(sn.x2-sn.x1)*(vn-sn.y1)/(sn.y2-sn.y1)+sn.x1;jt&&(_n+=sn.y1<sn.y2?1:-1)}return _n!==0}}function yt(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn){It===void 0&&(It=1),Yt===void 0&&(Yt=0),qt===void 0&&(qt=0),rn===void 0&&(rn=0),vt(kt,Gt,zt,Vt,Dt,It,Ut,null,Yt,qt,rn)}function vt(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn,gn){It===void 0&&(It=1),qt===void 0&&(qt=0),rn===void 0&&(rn=0),gn===void 0&&(gn=0);for(var An=mt(kt,Gt,zt,Vt,Dt,It),En=new Uint8Array(An.length*4),fn=0;fn<An.length;fn++)En[fn*4+gn]=An[fn];ut(Ut,En,qt,rn,kt,Gt,1<<3-gn,Yt)}function pt(kt,Gt,zt,Vt,Dt,It){var Ut=Dt-zt,Yt=It-Vt,qt=Ut*Ut+Yt*Yt,rn=qt?Math.max(0,Math.min(1,((kt-zt)*Ut+(Gt-Vt)*Yt)/qt)):0,gn=kt-(zt+rn*Ut),An=Gt-(Vt+rn*Yt);return gn*gn+An*An}var _t=Object.freeze({__proto__:null,generate:mt,generateIntoCanvas:yt,generateIntoFramebuffer:vt}),xt="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",St="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",At="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",bt=new Float32Array([0,0,2,0,0,2]),Et=null,wt=!1,Rt={},Tt=new WeakMap;function Mt(kt){if(!wt&&!Kt(kt))throw new Error("WebGL generation not supported")}function Lt(kt,Gt,zt,Vt,Dt,It,Ut){if(It===void 0&&(It=1),Ut===void 0&&(Ut=null),!Ut&&(Ut=Et,!Ut)){var Yt=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Yt)throw new Error("OffscreenCanvas or DOM canvas not supported");Ut=Et=Yt.getContext("webgl",{depth:!1})}Mt(Ut);var qt=new Uint8Array(kt*Gt*4);ct(Ut,function(En){var fn=En.gl,nn=En.withTexture,Tn=En.withTextureFramebuffer;nn("readable",function(Cn,vn){fn.texImage2D(fn.TEXTURE_2D,0,fn.RGBA,kt,Gt,0,fn.RGBA,fn.UNSIGNED_BYTE,null),Tn(Cn,vn,function(_n){Ht(kt,Gt,zt,Vt,Dt,It,fn,_n,0,0,0),fn.readPixels(0,0,kt,Gt,fn.RGBA,fn.UNSIGNED_BYTE,qt)})})});for(var rn=new Uint8Array(kt*Gt),gn=0,An=0;gn<qt.length;gn+=4)rn[An++]=qt[gn];return rn}function Ft(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn){It===void 0&&(It=1),Yt===void 0&&(Yt=0),qt===void 0&&(qt=0),rn===void 0&&(rn=0),Ht(kt,Gt,zt,Vt,Dt,It,Ut,null,Yt,qt,rn)}function Ht(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn,gn){It===void 0&&(It=1),qt===void 0&&(qt=0),rn===void 0&&(rn=0),gn===void 0&&(gn=0),Mt(Ut);var An=[];it(zt,function(En,fn,nn,Tn){An.push(En,fn,nn,Tn)}),An=new Float32Array(An),ct(Ut,function(En){var fn=En.gl,nn=En.isWebGL2,Tn=En.getExtension,Cn=En.withProgram,vn=En.withTexture,_n=En.withTextureFramebuffer,Qt=En.handleContextLoss;if(vn("rawDistances",function(sn,jt){(kt!==sn._lastWidth||Gt!==sn._lastHeight)&&fn.texImage2D(fn.TEXTURE_2D,0,fn.RGBA,sn._lastWidth=kt,sn._lastHeight=Gt,0,fn.RGBA,fn.UNSIGNED_BYTE,null),Cn("main",xt,St,function(Bt){var hn=Bt.setAttribute,cn=Bt.setUniform,mn=!nn&&Tn("ANGLE_instanced_arrays"),an=!nn&&Tn("EXT_blend_minmax");hn("aUV",2,fn.STATIC_DRAW,0,bt),hn("aLineSegment",4,fn.DYNAMIC_DRAW,1,An),cn.apply(void 0,["4f","uGlyphBounds"].concat(Vt)),cn("1f","uMaxDistance",Dt),cn("1f","uExponent",It),_n(sn,jt,function(Hn){fn.enable(fn.BLEND),fn.colorMask(!0,!0,!0,!0),fn.viewport(0,0,kt,Gt),fn.scissor(0,0,kt,Gt),fn.blendFunc(fn.ONE,fn.ONE),fn.blendEquationSeparate(fn.FUNC_ADD,nn?fn.MAX:an.MAX_EXT),fn.clear(fn.COLOR_BUFFER_BIT),nn?fn.drawArraysInstanced(fn.TRIANGLES,0,3,An.length/4):mn.drawArraysInstancedANGLE(fn.TRIANGLES,0,3,An.length/4)})}),Cn("post",st,At,function(Bt){Bt.setAttribute("aUV",2,fn.STATIC_DRAW,0,bt),Bt.setUniform("1i","tex",jt),fn.bindFramebuffer(fn.FRAMEBUFFER,Yt),fn.disable(fn.BLEND),fn.colorMask(gn===0,gn===1,gn===2,gn===3),fn.viewport(qt,rn,kt,Gt),fn.scissor(qt,rn,kt,Gt),fn.drawArrays(fn.TRIANGLES,0,3)})}),fn.isContextLost())throw Qt(),new Error("webgl context lost")})}function Kt(kt){var Gt=!kt||kt===Et?Rt:kt.canvas||kt,zt=Tt.get(Gt);if(zt===void 0){wt=!0;var Vt=null;try{var Dt=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],It=Lt(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,kt);zt=It&&Dt.length===It.length&&It.every(function(Ut,Yt){return Ut===Dt[Yt]}),zt||(Vt="bad trial run results",console.info(Dt,It))}catch(Ut){zt=!1,Vt=Ut.message}Vt&&console.warn("WebGL SDF generation not supported:",Vt),wt=!1,Tt.set(Gt,zt)}return zt}var Wt=Object.freeze({__proto__:null,generate:Lt,generateIntoCanvas:Ft,generateIntoFramebuffer:Ht,isSupported:Kt});function Jt(kt,Gt,zt,Vt,Dt,It){Dt===void 0&&(Dt=Math.max(Vt[2]-Vt[0],Vt[3]-Vt[1])/2),It===void 0&&(It=1);try{return Lt.apply(Wt,arguments)}catch(Ut){return console.info("WebGL SDF generation failed, falling back to JS",Ut),mt.apply(_t,arguments)}}function Ot(kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn){Dt===void 0&&(Dt=Math.max(Vt[2]-Vt[0],Vt[3]-Vt[1])/2),It===void 0&&(It=1),Yt===void 0&&(Yt=0),qt===void 0&&(qt=0),rn===void 0&&(rn=0);try{return Ft.apply(Wt,arguments)}catch(gn){return console.info("WebGL SDF generation failed, falling back to JS",gn),yt.apply(_t,arguments)}}return _.forEachPathCommand=rt,_.generate=Jt,_.generateIntoCanvas=Ot,_.javascript=_t,_.pathToLineSegments=it,_.webgl=Wt,_.webglUtils=ht,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return _e}function bidiFactory(){var _e=function(_){var tt={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},nt={},rt={};nt.L=1,rt[1]="L",Object.keys(tt).forEach(function(Qt,sn){nt[Qt]=1<<sn+1,rt[nt[Qt]]=Qt}),Object.freeze(nt);var it=nt.LRI|nt.RLI|nt.FSI,st=nt.L|nt.R|nt.AL,ot=nt.B|nt.S|nt.WS|nt.ON|nt.FSI|nt.LRI|nt.RLI|nt.PDI,at=nt.BN|nt.RLE|nt.LRE|nt.RLO|nt.LRO|nt.PDF,lt=nt.S|nt.WS|nt.B|it|nt.PDI|at,ct=null;function ut(){if(!ct){ct=new Map;var Qt=function(jt){if(tt.hasOwnProperty(jt)){var Bt=0;tt[jt].split(",").forEach(function(hn){var cn=hn.split("+"),mn=cn[0],an=cn[1];mn=parseInt(mn,36),an=an?parseInt(an,36):0,ct.set(Bt+=mn,nt[jt]);for(var Hn=0;Hn<an;Hn++)ct.set(++Bt,nt[jt])})}};for(var sn in tt)Qt(sn)}}function dt(Qt){return ut(),ct.get(Qt.codePointAt(0))||nt.L}function ht(Qt){return rt[dt(Qt)]}var mt={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function yt(Qt,sn){var jt=36,Bt=0,hn=new Map,cn=sn&&new Map,mn;return Qt.split(",").forEach(function an(Hn){if(Hn.indexOf("+")!==-1)for(var Pn=+Hn;Pn--;)an(mn);else{mn=Hn;var er=Hn.split(">"),cr=er[0],ir=er[1];cr=String.fromCodePoint(Bt+=parseInt(cr,jt)),ir=String.fromCodePoint(Bt+=parseInt(ir,jt)),hn.set(cr,ir),sn&&cn.set(ir,cr)}}),{map:hn,reverseMap:cn}}var vt,pt,_t;function xt(){if(!vt){var Qt=yt(mt.pairs,!0),sn=Qt.map,jt=Qt.reverseMap;vt=sn,pt=jt,_t=yt(mt.canonical,!1).map}}function St(Qt){return xt(),vt.get(Qt)||null}function At(Qt){return xt(),pt.get(Qt)||null}function bt(Qt){return xt(),_t.get(Qt)||null}var Et=nt.L,wt=nt.R,Rt=nt.EN,Tt=nt.ES,Mt=nt.ET,Lt=nt.AN,Ft=nt.CS,Ht=nt.B,Kt=nt.S,Wt=nt.ON,Jt=nt.BN,Ot=nt.NSM,kt=nt.AL,Gt=nt.LRO,zt=nt.RLO,Vt=nt.LRE,Dt=nt.RLE,It=nt.PDF,Ut=nt.LRI,Yt=nt.RLI,qt=nt.FSI,rn=nt.PDI;function gn(Qt,sn){for(var jt=125,Bt=new Uint32Array(Qt.length),hn=0;hn<Qt.length;hn++)Bt[hn]=dt(Qt[hn]);var cn=new Map;function mn(ys,_s){var fs=Bt[ys];Bt[ys]=_s,cn.set(fs,cn.get(fs)-1),fs&ot&&cn.set(ot,cn.get(ot)-1),cn.set(_s,(cn.get(_s)||0)+1),_s&ot&&cn.set(ot,(cn.get(ot)||0)+1)}for(var an=new Uint8Array(Qt.length),Hn=new Map,Pn=[],er=null,cr=0;cr<Qt.length;cr++)er||Pn.push(er={start:cr,end:Qt.length-1,level:sn==="rtl"?1:sn==="ltr"?0:as(cr,!1)}),Bt[cr]&Ht&&(er.end=cr,er=null);for(var ir=Dt|Vt|zt|Gt|it|rn|It|Ht,Jn=function(ys){return ys+(ys&1?1:2)},fr=function(ys){return ys+(ys&1?2:1)},dr=0;dr<Pn.length;dr++){er=Pn[dr];var lr=[{_level:er.level,_override:0,_isolate:0}],Nn=void 0,bn=0,Rn=0,Sn=0;cn.clear();for(var or=er.start;or<=er.end;or++){var xn=Bt[or];if(Nn=lr[lr.length-1],cn.set(xn,(cn.get(xn)||0)+1),xn&ot&&cn.set(ot,(cn.get(ot)||0)+1),xn&ir)if(xn&(Dt|Vt)){an[or]=Nn._level;var on=(xn===Dt?fr:Jn)(Nn._level);on<=jt&&!bn&&!Rn?lr.push({_level:on,_override:0,_isolate:0}):bn||Rn++}else if(xn&(zt|Gt)){an[or]=Nn._level;var Gn=(xn===zt?fr:Jn)(Nn._level);Gn<=jt&&!bn&&!Rn?lr.push({_level:Gn,_override:xn&zt?wt:Et,_isolate:0}):bn||Rn++}else if(xn&it){xn&qt&&(xn=as(or+1,!0)===1?Yt:Ut),an[or]=Nn._level,Nn._override&&mn(or,Nn._override);var Xn=(xn===Yt?fr:Jn)(Nn._level);Xn<=jt&&bn===0&&Rn===0?(Sn++,lr.push({_level:Xn,_override:0,_isolate:1,_isolInitIndex:or})):bn++}else if(xn&rn){if(bn>0)bn--;else if(Sn>0){for(Rn=0;!lr[lr.length-1]._isolate;)lr.pop();var pr=lr[lr.length-1]._isolInitIndex;pr!=null&&(Hn.set(pr,or),Hn.set(or,pr)),lr.pop(),Sn--}Nn=lr[lr.length-1],an[or]=Nn._level,Nn._override&&mn(or,Nn._override)}else xn&It?(bn===0&&(Rn>0?Rn--:!Nn._isolate&&lr.length>1&&(lr.pop(),Nn=lr[lr.length-1])),an[or]=Nn._level):xn&Ht&&(an[or]=er.level);else an[or]=Nn._level,Nn._override&&xn!==Jt&&mn(or,Nn._override)}for(var Ar=[],xr=null,un=er.start;un<=er.end;un++){var pn=Bt[un];if(!(pn&at)){var Fn=an[un],Yn=pn&it,Qn=pn===rn;xr&&Fn===xr._level?(xr._end=un,xr._endsWithIsolInit=Yn):Ar.push(xr={_start:un,_end:un,_level:Fn,_startsWithPDI:Qn,_endsWithIsolInit:Yn})}}for(var ur=[],vr=0;vr<Ar.length;vr++){var Or=Ar[vr];if(!Or._startsWithPDI||Or._startsWithPDI&&!Hn.has(Or._start)){for(var Fr=[xr=Or],br=void 0;xr&&xr._endsWithIsolInit&&(br=Hn.get(xr._end))!=null;)for(var Lr=vr+1;Lr<Ar.length;Lr++)if(Ar[Lr]._start===br){Fr.push(xr=Ar[Lr]);break}for(var Ir=[],Ur=0;Ur<Fr.length;Ur++)for(var en=Fr[Ur],dn=en._start;dn<=en._end;dn++)Ir.push(dn);for(var Bn=an[Ir[0]],tr=er.level,tn=Ir[0]-1;tn>=0;tn--)if(!(Bt[tn]&at)){tr=an[tn];break}var yn=Ir[Ir.length-1],On=an[yn],kn=er.level;if(!(Bt[yn]&it)){for(var Mn=yn+1;Mn<=er.end;Mn++)if(!(Bt[Mn]&at)){kn=an[Mn];break}}ur.push({_seqIndices:Ir,_sosType:Math.max(tr,Bn)%2?wt:Et,_eosType:Math.max(kn,On)%2?wt:Et})}}for(var ar=0;ar<ur.length;ar++){var hr=ur[ar],Wn=hr._seqIndices,Br=hr._sosType,Mr=hr._eosType,wr=an[Wn[0]]&1?wt:Et;if(cn.get(Ot))for(var Pr=0;Pr<Wn.length;Pr++){var Wr=Wn[Pr];if(Bt[Wr]&Ot){for(var es=Br,ts=Pr-1;ts>=0;ts--)if(!(Bt[Wn[ts]]&at)){es=Bt[Wn[ts]];break}mn(Wr,es&(it|rn)?Wt:es)}}if(cn.get(Rt))for(var Qr=0;Qr<Wn.length;Qr++){var zr=Wn[Qr];if(Bt[zr]&Rt)for(var kr=Qr-1;kr>=-1;kr--){var ws=kr===-1?Br:Bt[Wn[kr]];if(ws&st){ws===kt&&mn(zr,Lt);break}}}if(cn.get(kt))for(var $r=0;$r<Wn.length;$r++){var Ps=Wn[$r];Bt[Ps]&kt&&mn(Ps,wt)}if(cn.get(Tt)||cn.get(Ft))for(var Qs=1;Qs<Wn.length-1;Qs++){var Os=Wn[Qs];if(Bt[Os]&(Tt|Ft)){for(var Ws=0,us=0,zs=Qs-1;zs>=0&&(Ws=Bt[Wn[zs]],!!(Ws&at));zs--);for(var Ns=Qs+1;Ns<Wn.length&&(us=Bt[Wn[Ns]],!!(us&at));Ns++);Ws===us&&(Bt[Os]===Tt?Ws===Rt:Ws&(Rt|Lt))&&mn(Os,Ws)}}if(cn.get(Rt))for(var cs=0;cs<Wn.length;cs++){var Xs=Wn[cs];if(Bt[Xs]&Rt){for(var bo=cs-1;bo>=0&&Bt[Wn[bo]]&(Mt|at);bo--)mn(Wn[bo],Rt);for(cs++;cs<Wn.length&&Bt[Wn[cs]]&(Mt|at|Rt);cs++)Bt[Wn[cs]]!==Rt&&mn(Wn[cs],Rt)}}if(cn.get(Mt)||cn.get(Tt)||cn.get(Ft))for(var no=0;no<Wn.length;no++){var Do=Wn[no];if(Bt[Do]&(Mt|Tt|Ft)){mn(Do,Wt);for(var Xo=no-1;Xo>=0&&Bt[Wn[Xo]]&at;Xo--)mn(Wn[Xo],Wt);for(var Ko=no+1;Ko<Wn.length&&Bt[Wn[Ko]]&at;Ko++)mn(Wn[Ko],Wt)}}if(cn.get(Rt))for(var $a=0,yl=Br;$a<Wn.length;$a++){var fu=Wn[$a],Ql=Bt[fu];Ql&Rt?yl===Et&&mn(fu,Et):Ql&st&&(yl=Ql)}if(cn.get(ot)){var Ro=wt|Rt|Lt,Fl=Ro|Et,zo=[];{for(var wl=[],Fo=0;Fo<Wn.length;Fo++)if(Bt[Wn[Fo]]&ot){var Fs=Qt[Wn[Fo]],Zl=void 0;if(St(Fs)!==null)if(wl.length<63)wl.push({char:Fs,seqIndex:Fo});else break;else if((Zl=At(Fs))!==null)for(var Yo=wl.length-1;Yo>=0;Yo--){var Ml=wl[Yo].char;if(Ml===Zl||Ml===At(bt(Fs))||St(bt(Ml))===Fs){zo.push([wl[Yo].seqIndex,Fo]),wl.length=Yo;break}}}zo.sort(function(ys,_s){return ys[0]-_s[0]})}for(var Tl=0;Tl<zo.length;Tl++){for(var pu=zo[Tl],co=pu[0],Rl=pu[1],Xt=!1,ln=0,wn=co+1;wn<Rl;wn++){var Dn=Wn[wn];if(Bt[Dn]&Fl){Xt=!0;var Un=Bt[Dn]&Ro?wt:Et;if(Un===wr){ln=Un;break}}}if(Xt&&!ln){ln=Br;for(var $n=co-1;$n>=0;$n--){var qn=Wn[$n];if(Bt[qn]&Fl){var Vn=Bt[qn]&Ro?wt:Et;Vn!==wr?ln=Vn:ln=wr;break}}}if(ln){if(Bt[Wn[co]]=Bt[Wn[Rl]]=ln,ln!==wr){for(var Ln=co+1;Ln<Wn.length;Ln++)if(!(Bt[Wn[Ln]]&at)){dt(Qt[Wn[Ln]])&Ot&&(Bt[Wn[Ln]]=ln);break}}if(ln!==wr){for(var Kn=Rl+1;Kn<Wn.length;Kn++)if(!(Bt[Wn[Kn]]&at)){dt(Qt[Wn[Kn]])&Ot&&(Bt[Wn[Kn]]=ln);break}}}}for(var jn=0;jn<Wn.length;jn++)if(Bt[Wn[jn]]&ot){for(var Sr=jn,_r=jn,gr=Br,Dr=jn-1;Dr>=0;Dr--)if(Bt[Wn[Dr]]&at)Sr=Dr;else{gr=Bt[Wn[Dr]]&Ro?wt:Et;break}for(var Rr=Mr,Cr=jn+1;Cr<Wn.length;Cr++)if(Bt[Wn[Cr]]&(ot|at))_r=Cr;else{Rr=Bt[Wn[Cr]]&Ro?wt:Et;break}for(var rs=Sr;rs<=_r;rs++)Bt[Wn[rs]]=gr===Rr?gr:wr;jn=_r}}}for(var Vr=er.start;Vr<=er.end;Vr++){var Zr=an[Vr],_i=Bt[Vr];if(Zr&1?_i&(Et|Rt|Lt)&&an[Vr]++:_i&wt?an[Vr]++:_i&(Lt|Rt)&&(an[Vr]+=2),_i&at&&(an[Vr]=Vr===0?er.level:an[Vr-1]),Vr===er.end||dt(Qt[Vr])&(Kt|Ht))for(var Hr=Vr;Hr>=0&&dt(Qt[Hr])&lt;Hr--)an[Hr]=er.level}}return{levels:an,paragraphs:Pn};function as(ys,_s){for(var fs=ys;fs<Qt.length;fs++){var ms=Bt[fs];if(ms&(wt|kt))return 1;if(ms&(Ht|Et)||_s&&ms===rn)return 0;if(ms&it){var Ms=os(fs);fs=Ms===-1?Qt.length:Ms}}return 0}function os(ys){for(var _s=1,fs=ys+1;fs<Qt.length;fs++){var ms=Bt[fs];if(ms&Ht)break;if(ms&rn){if(--_s===0)return fs}else ms&it&&_s++}return-1}}var An="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",En;function fn(){if(!En){var Qt=yt(An,!0),sn=Qt.map,jt=Qt.reverseMap;jt.forEach(function(Bt,hn){sn.set(hn,Bt)}),En=sn}}function nn(Qt){return fn(),En.get(Qt)||null}function Tn(Qt,sn,jt,Bt){var hn=Qt.length;jt=Math.max(0,jt==null?0:+jt),Bt=Math.min(hn-1,Bt==null?hn-1:+Bt);for(var cn=new Map,mn=jt;mn<=Bt;mn++)if(sn[mn]&1){var an=nn(Qt[mn]);an!==null&&cn.set(mn,an)}return cn}function Cn(Qt,sn,jt,Bt){var hn=Qt.length;jt=Math.max(0,jt==null?0:+jt),Bt=Math.min(hn-1,Bt==null?hn-1:+Bt);var cn=[];return sn.paragraphs.forEach(function(mn){var an=Math.max(jt,mn.start),Hn=Math.min(Bt,mn.end);if(an<Hn){for(var Pn=sn.levels.slice(an,Hn+1),er=Hn;er>=an&&dt(Qt[er])&lt;er--)Pn[er]=mn.level;for(var cr=mn.level,ir=1/0,Jn=0;Jn<Pn.length;Jn++){var fr=Pn[Jn];fr>cr&&(cr=fr),fr<ir&&(ir=fr|1)}for(var dr=cr;dr>=ir;dr--)for(var lr=0;lr<Pn.length;lr++)if(Pn[lr]>=dr){for(var Nn=lr;lr+1<Pn.length&&Pn[lr+1]>=dr;)lr++;lr>Nn&&cn.push([Nn+an,lr+an])}}}),cn}function vn(Qt,sn,jt,Bt){var hn=_n(Qt,sn,jt,Bt),cn=[].concat(Qt);return hn.forEach(function(mn,an){cn[an]=(sn.levels[mn]&1?nn(Qt[mn]):null)||Qt[mn]}),cn.join("")}function _n(Qt,sn,jt,Bt){for(var hn=Cn(Qt,sn,jt,Bt),cn=[],mn=0;mn<Qt.length;mn++)cn[mn]=mn;return hn.forEach(function(an){for(var Hn=an[0],Pn=an[1],er=cn.slice(Hn,Pn+1),cr=er.length;cr--;)cn[Pn-cr]=er[cr]}),cn}return _.closingToOpeningBracket=At,_.getBidiCharType=dt,_.getBidiCharTypeName=ht,_.getCanonicalBracket=bt,_.getEmbeddingLevels=gn,_.getMirroredCharacter=nn,_.getMirroredCharactersMap=Tn,_.getReorderSegments=Cn,_.getReorderedIndices=_n,_.getReorderedString=vn,_.openingToClosingBracket=St,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return _e}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(_e){const _=/^[ \t]*#include +<([\w\d./]+)>/gm;function tt(nt,rt){let it=ShaderChunk[rt];return it?expandShaderIncludes(it):nt}return _e.replace(_,tt)}const _lut=[];for(let _e=0;_e<256;_e++)_lut[_e]=(_e<16?"0":"")+_e.toString(16);function generateUUID(){const _e=Math.random()*4294967295|0,_=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut[_e&255]+_lut[_e>>8&255]+_lut[_e>>16&255]+_lut[_e>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[tt&63|128]+_lut[tt>>8&255]+"-"+_lut[tt>>16&255]+_lut[tt>>24&255]+_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]).toUpperCase()}const assign$3=Object.assign||function(){let _e=arguments[0];for(let _=1,tt=arguments.length;_<tt;_++){let nt=arguments[_];if(nt)for(let rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(_e[rt]=nt[rt])}return _e},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(_e,_){const tt=getKeyForOptions(_);let nt=CONSTRUCTOR_CACHE.get(_e);if(nt||CONSTRUCTOR_CACHE.set(_e,nt=Object.create(null)),nt[tt])return new nt[tt];const rt=`_onBeforeCompile${tt}`,it=function(lt,ct){_e.onBeforeCompile.call(this,lt,ct);const ut=this.customProgramCacheKey()+"|"+lt.vertexShader+"|"+lt.fragmentShader;let dt=SHADER_UPGRADE_CACHE[ut];if(!dt){const ht=upgradeShaders(this,lt,_,tt);dt=SHADER_UPGRADE_CACHE[ut]=ht}lt.vertexShader=dt.vertexShader,lt.fragmentShader=dt.fragmentShader,assign$3(lt.uniforms,this.uniforms),_.timeUniform&&(lt.uniforms[_.timeUniform]={get value(){return Date.now()-epoch}}),this[rt]&&this[rt](lt)},st=function(){return ot(_.chained?_e:_e.clone())},ot=function(lt){const ct=Object.create(lt,at);return Object.defineProperty(ct,"baseMaterial",{value:_e}),Object.defineProperty(ct,"id",{value:materialInstanceId++}),ct.uuid=generateUUID(),ct.uniforms=assign$3({},lt.uniforms,_.uniforms),ct.defines=assign$3({},lt.defines,_.defines),ct.defines[`TROIKA_DERIVED_MATERIAL_${tt}`]="",ct.extensions=assign$3({},lt.extensions,_.extensions),ct._listeners=void 0,ct},at={constructor:{value:st},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return _e.customProgramCacheKey()+"|"+tt}},onBeforeCompile:{get(){return it},set(lt){this[rt]=lt}},copy:{writable:!0,configurable:!0,value:function(lt){return _e.copy.call(this,lt),!_e.isShaderMaterial&&!_e.isDerivedMaterial&&(assign$3(this.extensions,lt.extensions),assign$3(this.defines,lt.defines),assign$3(this.uniforms,UniformsUtils.clone(lt.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const lt=new _e.constructor;return ot(lt).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._depthMaterial;return lt||(lt=this._depthMaterial=createDerivedMaterial(_e.isDerivedMaterial?_e.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_),lt.defines.IS_DEPTH_MATERIAL="",lt.uniforms=this.uniforms),lt}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._distanceMaterial;return lt||(lt=this._distanceMaterial=createDerivedMaterial(_e.isDerivedMaterial?_e.getDistanceMaterial():new MeshDistanceMaterial,_),lt.defines.IS_DISTANCE_MATERIAL="",lt.uniforms=this.uniforms),lt}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:lt,_distanceMaterial:ct}=this;lt&&lt.dispose(),ct&&ct.dispose(),_e.dispose.call(this)}}};return nt[tt]=st,new st}function upgradeShaders(_e,{vertexShader:_,fragmentShader:tt},nt,rt){let{vertexDefs:it,vertexMainIntro:st,vertexMainOutro:ot,vertexTransform:at,fragmentDefs:lt,fragmentMainIntro:ct,fragmentMainOutro:ut,fragmentColorTransform:dt,customRewriter:ht,timeUniform:mt}=nt;if(it=it||"",st=st||"",ot=ot||"",lt=lt||"",ct=ct||"",ut=ut||"",(at||ht)&&(_=expandShaderIncludes(_)),(dt||ht)&&(tt=tt.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),tt=expandShaderIncludes(tt)),ht){let yt=ht({vertexShader:_,fragmentShader:tt});_=yt.vertexShader,tt=yt.fragmentShader}if(dt){let yt=[];tt=tt.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,vt=>(yt.push(vt),"")),ut=`${dt}
${yt.join(`
`)}
${ut}`}if(mt){const yt=`
uniform float ${mt};
`;it=yt+it,lt=yt+lt}return at&&(_=`vec3 troika_position_${rt};
vec3 troika_normal_${rt};
vec2 troika_uv_${rt};
${_}
`,it=`${it}
void troikaVertexTransform${rt}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${at}
}
`,st=`
troika_position_${rt} = vec3(position);
troika_normal_${rt} = vec3(normal);
troika_uv_${rt} = vec2(uv);
troikaVertexTransform${rt}(troika_position_${rt}, troika_normal_${rt}, troika_uv_${rt});
${st}
`,_=_.replace(/\b(position|normal|uv)\b/g,(yt,vt,pt,_t)=>/\battribute\s+vec[23]\s+$/.test(_t.substr(0,pt))?vt:`troika_${vt}_${rt}`),_e.map&&_e.map.channel>0||(_=_.replace(/\bMAP_UV\b/g,`troika_uv_${rt}`))),_=injectIntoShaderCode(_,rt,it,st,ot),tt=injectIntoShaderCode(tt,rt,lt,ct,ut),{vertexShader:_,fragmentShader:tt}}function injectIntoShaderCode(_e,_,tt,nt,rt){return(nt||rt||tt)&&(_e=_e.replace(voidMainRegExp,`
${tt}
void troikaOrigMain${_}() {`),_e+=`
void main() {
  ${nt}
  troikaOrigMain${_}();
  ${rt}
}`),_e}function optionsJsonReplacer(_e,_){return _e==="uniforms"?void 0:typeof _=="function"?_.toString():_}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(_e){const _=JSON.stringify(_e,optionsJsonReplacer);let tt=optionsHashesToIds.get(_);return tt==null&&optionsHashesToIds.set(_,tt=++_idCtr),tt}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window>"u"&&(self.window=self),function(_e){var _={parse:function(rt){var it=_._bin,st=new Uint8Array(rt);if(it.readASCII(st,0,4)=="ttcf"){var ot=4;it.readUshort(st,ot),ot+=2,it.readUshort(st,ot),ot+=2;var at=it.readUint(st,ot);ot+=4;for(var lt=[],ct=0;ct<at;ct++){var ut=it.readUint(st,ot);ot+=4,lt.push(_._readFont(st,ut))}return lt}return[_._readFont(st,0)]},_readFont:function(rt,it){var st=_._bin,ot=it;st.readFixed(rt,it),it+=4;var at=st.readUshort(rt,it);it+=2,st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2;for(var lt=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],ct={_data:rt,_offset:ot},ut={},dt=0;dt<at;dt++){var ht=st.readASCII(rt,it,4);it+=4,st.readUint(rt,it),it+=4;var mt=st.readUint(rt,it);it+=4;var yt=st.readUint(rt,it);it+=4,ut[ht]={offset:mt,length:yt}}for(dt=0;dt<lt.length;dt++){var vt=lt[dt];ut[vt]&&(ct[vt.trim()]=_[vt.trim()].parse(rt,ut[vt].offset,ut[vt].length,ct))}return ct},_tabOffset:function(rt,it,st){for(var ot=_._bin,at=ot.readUshort(rt,st+4),lt=st+12,ct=0;ct<at;ct++){var ut=ot.readASCII(rt,lt,4);lt+=4,ot.readUint(rt,lt),lt+=4;var dt=ot.readUint(rt,lt);if(lt+=4,ot.readUint(rt,lt),lt+=4,ut==it)return dt}return 0}};_._bin={readFixed:function(rt,it){return(rt[it]<<8|rt[it+1])+(rt[it+2]<<8|rt[it+3])/65540},readF2dot14:function(rt,it){return _._bin.readShort(rt,it)/16384},readInt:function(rt,it){return _._bin._view(rt).getInt32(it)},readInt8:function(rt,it){return _._bin._view(rt).getInt8(it)},readShort:function(rt,it){return _._bin._view(rt).getInt16(it)},readUshort:function(rt,it){return _._bin._view(rt).getUint16(it)},readUshorts:function(rt,it,st){for(var ot=[],at=0;at<st;at++)ot.push(_._bin.readUshort(rt,it+2*at));return ot},readUint:function(rt,it){return _._bin._view(rt).getUint32(it)},readUint64:function(rt,it){return 4294967296*_._bin.readUint(rt,it)+_._bin.readUint(rt,it+4)},readASCII:function(rt,it,st){for(var ot="",at=0;at<st;at++)ot+=String.fromCharCode(rt[it+at]);return ot},readUnicode:function(rt,it,st){for(var ot="",at=0;at<st;at++){var lt=rt[it++]<<8|rt[it++];ot+=String.fromCharCode(lt)}return ot},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(rt,it,st){var ot=_._bin._tdec;return ot&&it==0&&st==rt.length?ot.decode(rt):_._bin.readASCII(rt,it,st)},readBytes:function(rt,it,st){for(var ot=[],at=0;at<st;at++)ot.push(rt[it+at]);return ot},readASCIIArray:function(rt,it,st){for(var ot=[],at=0;at<st;at++)ot.push(String.fromCharCode(rt[it+at]));return ot},_view:function(rt){return rt._dataView||(rt._dataView=rt.buffer?new DataView(rt.buffer,rt.byteOffset,rt.byteLength):new DataView(new Uint8Array(rt).buffer))}},_._lctf={},_._lctf.parse=function(rt,it,st,ot,at){var lt=_._bin,ct={},ut=it;lt.readFixed(rt,it),it+=4;var dt=lt.readUshort(rt,it);it+=2;var ht=lt.readUshort(rt,it);it+=2;var mt=lt.readUshort(rt,it);return it+=2,ct.scriptList=_._lctf.readScriptList(rt,ut+dt),ct.featureList=_._lctf.readFeatureList(rt,ut+ht),ct.lookupList=_._lctf.readLookupList(rt,ut+mt,at),ct},_._lctf.readLookupList=function(rt,it,st){var ot=_._bin,at=it,lt=[],ct=ot.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var dt=ot.readUshort(rt,it);it+=2;var ht=_._lctf.readLookupTable(rt,at+dt,st);lt.push(ht)}return lt},_._lctf.readLookupTable=function(rt,it,st){var ot=_._bin,at=it,lt={tabs:[]};lt.ltype=ot.readUshort(rt,it),it+=2,lt.flag=ot.readUshort(rt,it),it+=2;var ct=ot.readUshort(rt,it);it+=2;for(var ut=lt.ltype,dt=0;dt<ct;dt++){var ht=ot.readUshort(rt,it);it+=2;var mt=st(rt,ut,at+ht,lt);lt.tabs.push(mt)}return lt},_._lctf.numOfOnes=function(rt){for(var it=0,st=0;st<32;st++)rt>>>st&1&&it++;return it},_._lctf.readClassDef=function(rt,it){var st=_._bin,ot=[],at=st.readUshort(rt,it);if(it+=2,at==1){var lt=st.readUshort(rt,it);it+=2;var ct=st.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++)ot.push(lt+ut),ot.push(lt+ut),ot.push(st.readUshort(rt,it)),it+=2}if(at==2){var dt=st.readUshort(rt,it);for(it+=2,ut=0;ut<dt;ut++)ot.push(st.readUshort(rt,it)),it+=2,ot.push(st.readUshort(rt,it)),it+=2,ot.push(st.readUshort(rt,it)),it+=2}return ot},_._lctf.getInterval=function(rt,it){for(var st=0;st<rt.length;st+=3){var ot=rt[st],at=rt[st+1];if(rt[st+2],ot<=it&&it<=at)return st}return-1},_._lctf.readCoverage=function(rt,it){var st=_._bin,ot={};ot.fmt=st.readUshort(rt,it),it+=2;var at=st.readUshort(rt,it);return it+=2,ot.fmt==1&&(ot.tab=st.readUshorts(rt,it,at)),ot.fmt==2&&(ot.tab=st.readUshorts(rt,it,3*at)),ot},_._lctf.coverageIndex=function(rt,it){var st=rt.tab;if(rt.fmt==1)return st.indexOf(it);if(rt.fmt==2){var ot=_._lctf.getInterval(st,it);if(ot!=-1)return st[ot+2]+(it-st[ot])}return-1},_._lctf.readFeatureList=function(rt,it){var st=_._bin,ot=it,at=[],lt=st.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=st.readASCII(rt,it,4);it+=4;var dt=st.readUshort(rt,it);it+=2;var ht=_._lctf.readFeatureTable(rt,ot+dt);ht.tag=ut.trim(),at.push(ht)}return at},_._lctf.readFeatureTable=function(rt,it){var st=_._bin,ot=it,at={},lt=st.readUshort(rt,it);it+=2,lt>0&&(at.featureParams=ot+lt);var ct=st.readUshort(rt,it);it+=2,at.tab=[];for(var ut=0;ut<ct;ut++)at.tab.push(st.readUshort(rt,it+2*ut));return at},_._lctf.readScriptList=function(rt,it){var st=_._bin,ot=it,at={},lt=st.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=st.readASCII(rt,it,4);it+=4;var dt=st.readUshort(rt,it);it+=2,at[ut.trim()]=_._lctf.readScriptTable(rt,ot+dt)}return at},_._lctf.readScriptTable=function(rt,it){var st=_._bin,ot=it,at={},lt=st.readUshort(rt,it);it+=2,lt>0&&(at.default=_._lctf.readLangSysTable(rt,ot+lt));var ct=st.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var dt=st.readASCII(rt,it,4);it+=4;var ht=st.readUshort(rt,it);it+=2,at[dt.trim()]=_._lctf.readLangSysTable(rt,ot+ht)}return at},_._lctf.readLangSysTable=function(rt,it){var st=_._bin,ot={};st.readUshort(rt,it),it+=2,ot.reqFeature=st.readUshort(rt,it),it+=2;var at=st.readUshort(rt,it);return it+=2,ot.features=st.readUshorts(rt,it,at),ot},_.CFF={},_.CFF.parse=function(rt,it,st){var ot=_._bin;(rt=new Uint8Array(rt.buffer,it,st))[it=0],rt[++it],rt[++it],rt[++it],it++;var at=[];it=_.CFF.readIndex(rt,it,at);for(var lt=[],ct=0;ct<at.length-1;ct++)lt.push(ot.readASCII(rt,it+at[ct],at[ct+1]-at[ct]));it+=at[at.length-1];var ut=[];it=_.CFF.readIndex(rt,it,ut);var dt=[];for(ct=0;ct<ut.length-1;ct++)dt.push(_.CFF.readDict(rt,it+ut[ct],it+ut[ct+1]));it+=ut[ut.length-1];var ht=dt[0],mt=[];it=_.CFF.readIndex(rt,it,mt);var yt=[];for(ct=0;ct<mt.length-1;ct++)yt.push(ot.readASCII(rt,it+mt[ct],mt[ct+1]-mt[ct]));if(it+=mt[mt.length-1],_.CFF.readSubrs(rt,it,ht),ht.CharStrings){it=ht.CharStrings,mt=[],it=_.CFF.readIndex(rt,it,mt);var vt=[];for(ct=0;ct<mt.length-1;ct++)vt.push(ot.readBytes(rt,it+mt[ct],mt[ct+1]-mt[ct]));ht.CharStrings=vt}if(ht.ROS){it=ht.FDArray;var pt=[];for(it=_.CFF.readIndex(rt,it,pt),ht.FDArray=[],ct=0;ct<pt.length-1;ct++){var _t=_.CFF.readDict(rt,it+pt[ct],it+pt[ct+1]);_.CFF._readFDict(rt,_t,yt),ht.FDArray.push(_t)}it+=pt[pt.length-1],it=ht.FDSelect,ht.FDSelect=[];var xt=rt[it];if(it++,xt!=3)throw xt;var St=ot.readUshort(rt,it);for(it+=2,ct=0;ct<St+1;ct++)ht.FDSelect.push(ot.readUshort(rt,it),rt[it+2]),it+=3}return ht.Encoding&&(ht.Encoding=_.CFF.readEncoding(rt,ht.Encoding,ht.CharStrings.length)),ht.charset&&(ht.charset=_.CFF.readCharset(rt,ht.charset,ht.CharStrings.length)),_.CFF._readFDict(rt,ht,yt),ht},_.CFF._readFDict=function(rt,it,st){var ot;for(var at in it.Private&&(ot=it.Private[1],it.Private=_.CFF.readDict(rt,ot,ot+it.Private[0]),it.Private.Subrs&&_.CFF.readSubrs(rt,ot+it.Private.Subrs,it.Private)),it)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(at)!=-1&&(it[at]=st[it[at]-426+35])},_.CFF.readSubrs=function(rt,it,st){var ot=_._bin,at=[];it=_.CFF.readIndex(rt,it,at);var lt,ct=at.length;lt=ct<1240?107:ct<33900?1131:32768,st.Bias=lt,st.Subrs=[];for(var ut=0;ut<at.length-1;ut++)st.Subrs.push(ot.readBytes(rt,it+at[ut],at[ut+1]-at[ut]))},_.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],_.CFF.glyphByUnicode=function(rt,it){for(var st=0;st<rt.charset.length;st++)if(rt.charset[st]==it)return st;return-1},_.CFF.glyphBySE=function(rt,it){return it<0||it>255?-1:_.CFF.glyphByUnicode(rt,_.CFF.tableSE[it])},_.CFF.readEncoding=function(rt,it,st){_._bin;var ot=[".notdef"],at=rt[it];if(it++,at!=0)throw"error: unknown encoding format: "+at;var lt=rt[it];it++;for(var ct=0;ct<lt;ct++)ot.push(rt[it+ct]);return ot},_.CFF.readCharset=function(rt,it,st){var ot=_._bin,at=[".notdef"],lt=rt[it];if(it++,lt==0)for(var ct=0;ct<st;ct++){var ut=ot.readUshort(rt,it);it+=2,at.push(ut)}else{if(lt!=1&&lt!=2)throw"error: format: "+lt;for(;at.length<st;){ut=ot.readUshort(rt,it),it+=2;var dt=0;for(lt==1?(dt=rt[it],it++):(dt=ot.readUshort(rt,it),it+=2),ct=0;ct<=dt;ct++)at.push(ut),ut++}}return at},_.CFF.readIndex=function(rt,it,st){var ot=_._bin,at=ot.readUshort(rt,it)+1,lt=rt[it+=2];if(it++,lt==1)for(var ct=0;ct<at;ct++)st.push(rt[it+ct]);else if(lt==2)for(ct=0;ct<at;ct++)st.push(ot.readUshort(rt,it+2*ct));else if(lt==3)for(ct=0;ct<at;ct++)st.push(16777215&ot.readUint(rt,it+3*ct-1));else if(at!=1)throw"unsupported offset size: "+lt+", count: "+at;return(it+=at*lt)-1},_.CFF.getCharString=function(rt,it,st){var ot=_._bin,at=rt[it],lt=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ct=1,ut=null,dt=null;at<=20&&(ut=at,ct=1),at==12&&(ut=100*at+lt,ct=2),21<=at&&at<=27&&(ut=at,ct=1),at==28&&(dt=ot.readShort(rt,it+1),ct=3),29<=at&&at<=31&&(ut=at,ct=1),32<=at&&at<=246&&(dt=at-139,ct=1),247<=at&&at<=250&&(dt=256*(at-247)+lt+108,ct=2),251<=at&&at<=254&&(dt=256*-(at-251)-lt-108,ct=2),at==255&&(dt=ot.readInt(rt,it+1)/65535,ct=5),st.val=dt??"o"+ut,st.size=ct},_.CFF.readCharString=function(rt,it,st){for(var ot=it+st,at=_._bin,lt=[];it<ot;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var dt=1,ht=null,mt=null;ct<=20&&(ht=ct,dt=1),ct==12&&(ht=100*ct+ut,dt=2),ct!=19&&ct!=20||(ht=ct,dt=2),21<=ct&&ct<=27&&(ht=ct,dt=1),ct==28&&(mt=at.readShort(rt,it+1),dt=3),29<=ct&&ct<=31&&(ht=ct,dt=1),32<=ct&&ct<=246&&(mt=ct-139,dt=1),247<=ct&&ct<=250&&(mt=256*(ct-247)+ut+108,dt=2),251<=ct&&ct<=254&&(mt=256*-(ct-251)-ut-108,dt=2),ct==255&&(mt=at.readInt(rt,it+1)/65535,dt=5),lt.push(mt??"o"+ht),it+=dt}return lt},_.CFF.readDict=function(rt,it,st){for(var ot=_._bin,at={},lt=[];it<st;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var dt=1,ht=null,mt=null;if(ct==28&&(mt=ot.readShort(rt,it+1),dt=3),ct==29&&(mt=ot.readInt(rt,it+1),dt=5),32<=ct&&ct<=246&&(mt=ct-139,dt=1),247<=ct&&ct<=250&&(mt=256*(ct-247)+ut+108,dt=2),251<=ct&&ct<=254&&(mt=256*-(ct-251)-ut-108,dt=2),ct==255)throw mt=ot.readInt(rt,it+1)/65535,dt=5,"unknown number";if(ct==30){var yt=[];for(dt=1;;){var vt=rt[it+dt];dt++;var pt=vt>>4,_t=15&vt;if(pt!=15&&yt.push(pt),_t!=15&&yt.push(_t),_t==15)break}for(var xt="",St=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],At=0;At<yt.length;At++)xt+=St[yt[At]];mt=parseFloat(xt)}ct<=21&&(ht=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][ct],dt=1,ct==12&&(ht=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][ut],dt=2)),ht!=null?(at[ht]=lt.length==1?lt[0]:lt,lt=[]):lt.push(mt),it+=dt}return at},_.cmap={},_.cmap.parse=function(rt,it,st){rt=new Uint8Array(rt.buffer,it,st),it=0;var ot=_._bin,at={};ot.readUshort(rt,it),it+=2;var lt=ot.readUshort(rt,it);it+=2;var ct=[];at.tables=[];for(var ut=0;ut<lt;ut++){var dt=ot.readUshort(rt,it);it+=2;var ht=ot.readUshort(rt,it);it+=2;var mt=ot.readUint(rt,it);it+=4;var yt="p"+dt+"e"+ht,vt=ct.indexOf(mt);if(vt==-1){var pt;vt=at.tables.length,ct.push(mt);var _t=ot.readUshort(rt,mt);_t==0?pt=_.cmap.parse0(rt,mt):_t==4?pt=_.cmap.parse4(rt,mt):_t==6?pt=_.cmap.parse6(rt,mt):_t==12?pt=_.cmap.parse12(rt,mt):console.debug("unknown format: "+_t,dt,ht,mt),at.tables.push(pt)}if(at[yt]!=null)throw"multiple tables for one platform+encoding";at[yt]=vt}return at},_.cmap.parse0=function(rt,it){var st=_._bin,ot={};ot.format=st.readUshort(rt,it),it+=2;var at=st.readUshort(rt,it);it+=2,st.readUshort(rt,it),it+=2,ot.map=[];for(var lt=0;lt<at-6;lt++)ot.map.push(rt[it+lt]);return ot},_.cmap.parse4=function(rt,it){var st=_._bin,ot=it,at={};at.format=st.readUshort(rt,it),it+=2;var lt=st.readUshort(rt,it);it+=2,st.readUshort(rt,it),it+=2;var ct=st.readUshort(rt,it);it+=2;var ut=ct/2;at.searchRange=st.readUshort(rt,it),it+=2,at.entrySelector=st.readUshort(rt,it),it+=2,at.rangeShift=st.readUshort(rt,it),it+=2,at.endCount=st.readUshorts(rt,it,ut),it+=2*ut,it+=2,at.startCount=st.readUshorts(rt,it,ut),it+=2*ut,at.idDelta=[];for(var dt=0;dt<ut;dt++)at.idDelta.push(st.readShort(rt,it)),it+=2;for(at.idRangeOffset=st.readUshorts(rt,it,ut),it+=2*ut,at.glyphIdArray=[];it<ot+lt;)at.glyphIdArray.push(st.readUshort(rt,it)),it+=2;return at},_.cmap.parse6=function(rt,it){var st=_._bin,ot={};ot.format=st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2,ot.firstCode=st.readUshort(rt,it),it+=2;var at=st.readUshort(rt,it);it+=2,ot.glyphIdArray=[];for(var lt=0;lt<at;lt++)ot.glyphIdArray.push(st.readUshort(rt,it)),it+=2;return ot},_.cmap.parse12=function(rt,it){var st=_._bin,ot={};ot.format=st.readUshort(rt,it),it+=2,it+=2,st.readUint(rt,it),it+=4,st.readUint(rt,it),it+=4;var at=st.readUint(rt,it);it+=4,ot.groups=[];for(var lt=0;lt<at;lt++){var ct=it+12*lt,ut=st.readUint(rt,ct+0),dt=st.readUint(rt,ct+4),ht=st.readUint(rt,ct+8);ot.groups.push([ut,dt,ht])}return ot},_.glyf={},_.glyf.parse=function(rt,it,st,ot){for(var at=[],lt=0;lt<ot.maxp.numGlyphs;lt++)at.push(null);return at},_.glyf._parseGlyf=function(rt,it){var st=_._bin,ot=rt._data,at=_._tabOffset(ot,"glyf",rt._offset)+rt.loca[it];if(rt.loca[it]==rt.loca[it+1])return null;var lt={};if(lt.noc=st.readShort(ot,at),at+=2,lt.xMin=st.readShort(ot,at),at+=2,lt.yMin=st.readShort(ot,at),at+=2,lt.xMax=st.readShort(ot,at),at+=2,lt.yMax=st.readShort(ot,at),at+=2,lt.xMin>=lt.xMax||lt.yMin>=lt.yMax)return null;if(lt.noc>0){lt.endPts=[];for(var ct=0;ct<lt.noc;ct++)lt.endPts.push(st.readUshort(ot,at)),at+=2;var ut=st.readUshort(ot,at);if(at+=2,ot.length-at<ut)return null;lt.instructions=st.readBytes(ot,at,ut),at+=ut;var dt=lt.endPts[lt.noc-1]+1;for(lt.flags=[],ct=0;ct<dt;ct++){var ht=ot[at];if(at++,lt.flags.push(ht),(8&ht)!=0){var mt=ot[at];at++;for(var yt=0;yt<mt;yt++)lt.flags.push(ht),ct++}}for(lt.xs=[],ct=0;ct<dt;ct++){var vt=(2&lt.flags[ct])!=0,pt=(16&lt.flags[ct])!=0;vt?(lt.xs.push(pt?ot[at]:-ot[at]),at++):pt?lt.xs.push(0):(lt.xs.push(st.readShort(ot,at)),at+=2)}for(lt.ys=[],ct=0;ct<dt;ct++)vt=(4&lt.flags[ct])!=0,pt=(32&lt.flags[ct])!=0,vt?(lt.ys.push(pt?ot[at]:-ot[at]),at++):pt?lt.ys.push(0):(lt.ys.push(st.readShort(ot,at)),at+=2);var _t=0,xt=0;for(ct=0;ct<dt;ct++)_t+=lt.xs[ct],xt+=lt.ys[ct],lt.xs[ct]=_t,lt.ys[ct]=xt}else{var St;lt.parts=[];do{St=st.readUshort(ot,at),at+=2;var At={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(lt.parts.push(At),At.glyphIndex=st.readUshort(ot,at),at+=2,1&St){var bt=st.readShort(ot,at);at+=2;var Et=st.readShort(ot,at);at+=2}else bt=st.readInt8(ot,at),at++,Et=st.readInt8(ot,at),at++;2&St?(At.m.tx=bt,At.m.ty=Et):(At.p1=bt,At.p2=Et),8&St?(At.m.a=At.m.d=st.readF2dot14(ot,at),at+=2):64&St?(At.m.a=st.readF2dot14(ot,at),at+=2,At.m.d=st.readF2dot14(ot,at),at+=2):128&St&&(At.m.a=st.readF2dot14(ot,at),at+=2,At.m.b=st.readF2dot14(ot,at),at+=2,At.m.c=st.readF2dot14(ot,at),at+=2,At.m.d=st.readF2dot14(ot,at),at+=2)}while(32&St);if(256&St){var wt=st.readUshort(ot,at);for(at+=2,lt.instr=[],ct=0;ct<wt;ct++)lt.instr.push(ot[at]),at++}}return lt},_.GDEF={},_.GDEF.parse=function(rt,it,st,ot){var at=it;it+=4;var lt=_._bin.readUshort(rt,it);return{glyphClassDef:lt===0?null:_._lctf.readClassDef(rt,at+lt)}},_.GPOS={},_.GPOS.parse=function(rt,it,st,ot){return _._lctf.parse(rt,it,st,ot,_.GPOS.subt)},_.GPOS.subt=function(rt,it,st,ot){var at=_._bin,lt=st,ct={};if(ct.fmt=at.readUshort(rt,st),st+=2,it==1||it==2||it==3||it==7||it==8&&ct.fmt<=2){var ut=at.readUshort(rt,st);st+=2,ct.coverage=_._lctf.readCoverage(rt,ut+lt)}if(it==1&&ct.fmt==1){var dt=at.readUshort(rt,st);st+=2,dt!=0&&(ct.pos=_.GPOS.readValueRecord(rt,st,dt))}else if(it==2&&ct.fmt>=1&&ct.fmt<=2){dt=at.readUshort(rt,st),st+=2;var ht=at.readUshort(rt,st);st+=2;var mt=_._lctf.numOfOnes(dt),yt=_._lctf.numOfOnes(ht);if(ct.fmt==1){ct.pairsets=[];var vt=at.readUshort(rt,st);st+=2;for(var pt=0;pt<vt;pt++){var _t=lt+at.readUshort(rt,st);st+=2;var xt=at.readUshort(rt,_t);_t+=2;for(var St=[],At=0;At<xt;At++){var bt=at.readUshort(rt,_t);_t+=2,dt!=0&&(Lt=_.GPOS.readValueRecord(rt,_t,dt),_t+=2*mt),ht!=0&&(Ft=_.GPOS.readValueRecord(rt,_t,ht),_t+=2*yt),St.push({gid2:bt,val1:Lt,val2:Ft})}ct.pairsets.push(St)}}if(ct.fmt==2){var Et=at.readUshort(rt,st);st+=2;var wt=at.readUshort(rt,st);st+=2;var Rt=at.readUshort(rt,st);st+=2;var Tt=at.readUshort(rt,st);for(st+=2,ct.classDef1=_._lctf.readClassDef(rt,lt+Et),ct.classDef2=_._lctf.readClassDef(rt,lt+wt),ct.matrix=[],pt=0;pt<Rt;pt++){var Mt=[];for(At=0;At<Tt;At++){var Lt=null,Ft=null;dt!=0&&(Lt=_.GPOS.readValueRecord(rt,st,dt),st+=2*mt),ht!=0&&(Ft=_.GPOS.readValueRecord(rt,st,ht),st+=2*yt),Mt.push({val1:Lt,val2:Ft})}ct.matrix.push(Mt)}}}else if(it==4&&ct.fmt==1)ct.markCoverage=_._lctf.readCoverage(rt,at.readUshort(rt,st)+lt),ct.baseCoverage=_._lctf.readCoverage(rt,at.readUshort(rt,st+2)+lt),ct.markClassCount=at.readUshort(rt,st+4),ct.markArray=_.GPOS.readMarkArray(rt,at.readUshort(rt,st+6)+lt),ct.baseArray=_.GPOS.readBaseArray(rt,at.readUshort(rt,st+8)+lt,ct.markClassCount);else if(it==6&&ct.fmt==1)ct.mark1Coverage=_._lctf.readCoverage(rt,at.readUshort(rt,st)+lt),ct.mark2Coverage=_._lctf.readCoverage(rt,at.readUshort(rt,st+2)+lt),ct.markClassCount=at.readUshort(rt,st+4),ct.mark1Array=_.GPOS.readMarkArray(rt,at.readUshort(rt,st+6)+lt),ct.mark2Array=_.GPOS.readBaseArray(rt,at.readUshort(rt,st+8)+lt,ct.markClassCount);else{if(it==9&&ct.fmt==1){var Ht=at.readUshort(rt,st);st+=2;var Kt=at.readUint(rt,st);if(st+=4,ot.ltype==9)ot.ltype=Ht;else if(ot.ltype!=Ht)throw"invalid extension substitution";return _.GPOS.subt(rt,ot.ltype,lt+Kt)}console.debug("unsupported GPOS table LookupType",it,"format",ct.fmt)}return ct},_.GPOS.readValueRecord=function(rt,it,st){var ot=_._bin,at=[];return at.push(1&st?ot.readShort(rt,it):0),it+=1&st?2:0,at.push(2&st?ot.readShort(rt,it):0),it+=2&st?2:0,at.push(4&st?ot.readShort(rt,it):0),it+=4&st?2:0,at.push(8&st?ot.readShort(rt,it):0),it+=8&st?2:0,at},_.GPOS.readBaseArray=function(rt,it,st){var ot=_._bin,at=[],lt=it,ct=ot.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){for(var dt=[],ht=0;ht<st;ht++)dt.push(_.GPOS.readAnchorRecord(rt,lt+ot.readUshort(rt,it))),it+=2;at.push(dt)}return at},_.GPOS.readMarkArray=function(rt,it){var st=_._bin,ot=[],at=it,lt=st.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=_.GPOS.readAnchorRecord(rt,st.readUshort(rt,it+2)+at);ut.markClass=st.readUshort(rt,it),ot.push(ut),it+=4}return ot},_.GPOS.readAnchorRecord=function(rt,it){var st=_._bin,ot={};return ot.fmt=st.readUshort(rt,it),ot.x=st.readShort(rt,it+2),ot.y=st.readShort(rt,it+4),ot},_.GSUB={},_.GSUB.parse=function(rt,it,st,ot){return _._lctf.parse(rt,it,st,ot,_.GSUB.subt)},_.GSUB.subt=function(rt,it,st,ot){var at=_._bin,lt=st,ct={};if(ct.fmt=at.readUshort(rt,st),st+=2,it!=1&&it!=2&&it!=4&&it!=5&&it!=6)return null;if(it==1||it==2||it==4||it==5&&ct.fmt<=2||it==6&&ct.fmt<=2){var ut=at.readUshort(rt,st);st+=2,ct.coverage=_._lctf.readCoverage(rt,lt+ut)}if(it==1&&ct.fmt>=1&&ct.fmt<=2){if(ct.fmt==1)ct.delta=at.readShort(rt,st),st+=2;else if(ct.fmt==2){var dt=at.readUshort(rt,st);st+=2,ct.newg=at.readUshorts(rt,st,dt),st+=2*ct.newg.length}}else if(it==2&&ct.fmt==1){dt=at.readUshort(rt,st),st+=2,ct.seqs=[];for(var ht=0;ht<dt;ht++){var mt=at.readUshort(rt,st)+lt;st+=2;var yt=at.readUshort(rt,mt);ct.seqs.push(at.readUshorts(rt,mt+2,yt))}}else if(it==4)for(ct.vals=[],dt=at.readUshort(rt,st),st+=2,ht=0;ht<dt;ht++){var vt=at.readUshort(rt,st);st+=2,ct.vals.push(_.GSUB.readLigatureSet(rt,lt+vt))}else if(it==5&&ct.fmt==2){if(ct.fmt==2){var pt=at.readUshort(rt,st);st+=2,ct.cDef=_._lctf.readClassDef(rt,lt+pt),ct.scset=[];var _t=at.readUshort(rt,st);for(st+=2,ht=0;ht<_t;ht++){var xt=at.readUshort(rt,st);st+=2,ct.scset.push(xt==0?null:_.GSUB.readSubClassSet(rt,lt+xt))}}}else if(it==6&&ct.fmt==3){if(ct.fmt==3){for(ht=0;ht<3;ht++){dt=at.readUshort(rt,st),st+=2;for(var St=[],At=0;At<dt;At++)St.push(_._lctf.readCoverage(rt,lt+at.readUshort(rt,st+2*At)));st+=2*dt,ht==0&&(ct.backCvg=St),ht==1&&(ct.inptCvg=St),ht==2&&(ct.ahedCvg=St)}dt=at.readUshort(rt,st),st+=2,ct.lookupRec=_.GSUB.readSubstLookupRecords(rt,st,dt)}}else{if(it==7&&ct.fmt==1){var bt=at.readUshort(rt,st);st+=2;var Et=at.readUint(rt,st);if(st+=4,ot.ltype==9)ot.ltype=bt;else if(ot.ltype!=bt)throw"invalid extension substitution";return _.GSUB.subt(rt,ot.ltype,lt+Et)}console.debug("unsupported GSUB table LookupType",it,"format",ct.fmt)}return ct},_.GSUB.readSubClassSet=function(rt,it){var st=_._bin.readUshort,ot=it,at=[],lt=st(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=st(rt,it);it+=2,at.push(_.GSUB.readSubClassRule(rt,ot+ut))}return at},_.GSUB.readSubClassRule=function(rt,it){var st=_._bin.readUshort,ot={},at=st(rt,it),lt=st(rt,it+=2);it+=2,ot.input=[];for(var ct=0;ct<at-1;ct++)ot.input.push(st(rt,it)),it+=2;return ot.substLookupRecords=_.GSUB.readSubstLookupRecords(rt,it,lt),ot},_.GSUB.readSubstLookupRecords=function(rt,it,st){for(var ot=_._bin.readUshort,at=[],lt=0;lt<st;lt++)at.push(ot(rt,it),ot(rt,it+2)),it+=4;return at},_.GSUB.readChainSubClassSet=function(rt,it){var st=_._bin,ot=it,at=[],lt=st.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=st.readUshort(rt,it);it+=2,at.push(_.GSUB.readChainSubClassRule(rt,ot+ut))}return at},_.GSUB.readChainSubClassRule=function(rt,it){for(var st=_._bin,ot={},at=["backtrack","input","lookahead"],lt=0;lt<at.length;lt++){var ct=st.readUshort(rt,it);it+=2,lt==1&&ct--,ot[at[lt]]=st.readUshorts(rt,it,ct),it+=2*ot[at[lt]].length}return ct=st.readUshort(rt,it),it+=2,ot.subst=st.readUshorts(rt,it,2*ct),it+=2*ot.subst.length,ot},_.GSUB.readLigatureSet=function(rt,it){var st=_._bin,ot=it,at=[],lt=st.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=st.readUshort(rt,it);it+=2,at.push(_.GSUB.readLigature(rt,ot+ut))}return at},_.GSUB.readLigature=function(rt,it){var st=_._bin,ot={chain:[]};ot.nglyph=st.readUshort(rt,it),it+=2;var at=st.readUshort(rt,it);it+=2;for(var lt=0;lt<at-1;lt++)ot.chain.push(st.readUshort(rt,it)),it+=2;return ot},_.head={},_.head.parse=function(rt,it,st){var ot=_._bin,at={};return ot.readFixed(rt,it),it+=4,at.fontRevision=ot.readFixed(rt,it),it+=4,ot.readUint(rt,it),it+=4,ot.readUint(rt,it),it+=4,at.flags=ot.readUshort(rt,it),it+=2,at.unitsPerEm=ot.readUshort(rt,it),it+=2,at.created=ot.readUint64(rt,it),it+=8,at.modified=ot.readUint64(rt,it),it+=8,at.xMin=ot.readShort(rt,it),it+=2,at.yMin=ot.readShort(rt,it),it+=2,at.xMax=ot.readShort(rt,it),it+=2,at.yMax=ot.readShort(rt,it),it+=2,at.macStyle=ot.readUshort(rt,it),it+=2,at.lowestRecPPEM=ot.readUshort(rt,it),it+=2,at.fontDirectionHint=ot.readShort(rt,it),it+=2,at.indexToLocFormat=ot.readShort(rt,it),it+=2,at.glyphDataFormat=ot.readShort(rt,it),it+=2,at},_.hhea={},_.hhea.parse=function(rt,it,st){var ot=_._bin,at={};return ot.readFixed(rt,it),it+=4,at.ascender=ot.readShort(rt,it),it+=2,at.descender=ot.readShort(rt,it),it+=2,at.lineGap=ot.readShort(rt,it),it+=2,at.advanceWidthMax=ot.readUshort(rt,it),it+=2,at.minLeftSideBearing=ot.readShort(rt,it),it+=2,at.minRightSideBearing=ot.readShort(rt,it),it+=2,at.xMaxExtent=ot.readShort(rt,it),it+=2,at.caretSlopeRise=ot.readShort(rt,it),it+=2,at.caretSlopeRun=ot.readShort(rt,it),it+=2,at.caretOffset=ot.readShort(rt,it),it+=2,it+=8,at.metricDataFormat=ot.readShort(rt,it),it+=2,at.numberOfHMetrics=ot.readUshort(rt,it),it+=2,at},_.hmtx={},_.hmtx.parse=function(rt,it,st,ot){for(var at=_._bin,lt={aWidth:[],lsBearing:[]},ct=0,ut=0,dt=0;dt<ot.maxp.numGlyphs;dt++)dt<ot.hhea.numberOfHMetrics&&(ct=at.readUshort(rt,it),it+=2,ut=at.readShort(rt,it),it+=2),lt.aWidth.push(ct),lt.lsBearing.push(ut);return lt},_.kern={},_.kern.parse=function(rt,it,st,ot){var at=_._bin,lt=at.readUshort(rt,it);if(it+=2,lt==1)return _.kern.parseV1(rt,it-2,st,ot);var ct=at.readUshort(rt,it);it+=2;for(var ut={glyph1:[],rval:[]},dt=0;dt<ct;dt++){it+=2,st=at.readUshort(rt,it),it+=2;var ht=at.readUshort(rt,it);it+=2;var mt=ht>>>8;if((mt&=15)!=0)throw"unknown kern table format: "+mt;it=_.kern.readFormat0(rt,it,ut)}return ut},_.kern.parseV1=function(rt,it,st,ot){var at=_._bin;at.readFixed(rt,it),it+=4;var lt=at.readUint(rt,it);it+=4;for(var ct={glyph1:[],rval:[]},ut=0;ut<lt;ut++){at.readUint(rt,it),it+=4;var dt=at.readUshort(rt,it);it+=2,at.readUshort(rt,it),it+=2;var ht=dt>>>8;if((ht&=15)!=0)throw"unknown kern table format: "+ht;it=_.kern.readFormat0(rt,it,ct)}return ct},_.kern.readFormat0=function(rt,it,st){var ot=_._bin,at=-1,lt=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readUshort(rt,it);it+=2;var dt=ot.readUshort(rt,it);it+=2;var ht=ot.readShort(rt,it);it+=2,ut!=at&&(st.glyph1.push(ut),st.rval.push({glyph2:[],vals:[]}));var mt=st.rval[st.rval.length-1];mt.glyph2.push(dt),mt.vals.push(ht),at=ut}return it},_.loca={},_.loca.parse=function(rt,it,st,ot){var at=_._bin,lt=[],ct=ot.head.indexToLocFormat,ut=ot.maxp.numGlyphs+1;if(ct==0)for(var dt=0;dt<ut;dt++)lt.push(at.readUshort(rt,it+(dt<<1))<<1);if(ct==1)for(dt=0;dt<ut;dt++)lt.push(at.readUint(rt,it+(dt<<2)));return lt},_.maxp={},_.maxp.parse=function(rt,it,st){var ot=_._bin,at={},lt=ot.readUint(rt,it);return it+=4,at.numGlyphs=ot.readUshort(rt,it),it+=2,lt==65536&&(at.maxPoints=ot.readUshort(rt,it),it+=2,at.maxContours=ot.readUshort(rt,it),it+=2,at.maxCompositePoints=ot.readUshort(rt,it),it+=2,at.maxCompositeContours=ot.readUshort(rt,it),it+=2,at.maxZones=ot.readUshort(rt,it),it+=2,at.maxTwilightPoints=ot.readUshort(rt,it),it+=2,at.maxStorage=ot.readUshort(rt,it),it+=2,at.maxFunctionDefs=ot.readUshort(rt,it),it+=2,at.maxInstructionDefs=ot.readUshort(rt,it),it+=2,at.maxStackElements=ot.readUshort(rt,it),it+=2,at.maxSizeOfInstructions=ot.readUshort(rt,it),it+=2,at.maxComponentElements=ot.readUshort(rt,it),it+=2,at.maxComponentDepth=ot.readUshort(rt,it),it+=2),at},_.name={},_.name.parse=function(rt,it,st){var ot=_._bin,at={};ot.readUshort(rt,it),it+=2;var lt=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it);for(var ct,ut=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],dt=it+=2,ht=0;ht<lt;ht++){var mt=ot.readUshort(rt,it);it+=2;var yt=ot.readUshort(rt,it);it+=2;var vt=ot.readUshort(rt,it);it+=2;var pt=ot.readUshort(rt,it);it+=2;var _t=ot.readUshort(rt,it);it+=2;var xt=ot.readUshort(rt,it);it+=2;var St,At=ut[pt],bt=dt+12*lt+xt;if(mt==0)St=ot.readUnicode(rt,bt,_t/2);else if(mt==3&&yt==0)St=ot.readUnicode(rt,bt,_t/2);else if(yt==0)St=ot.readASCII(rt,bt,_t);else if(yt==1)St=ot.readUnicode(rt,bt,_t/2);else if(yt==3)St=ot.readUnicode(rt,bt,_t/2);else{if(mt!=1)throw"unknown encoding "+yt+", platformID: "+mt;St=ot.readASCII(rt,bt,_t),console.debug("reading unknown MAC encoding "+yt+" as ASCII")}var Et="p"+mt+","+vt.toString(16);at[Et]==null&&(at[Et]={}),at[Et][At!==void 0?At:pt]=St,at[Et]._lang=vt}for(var wt in at)if(at[wt].postScriptName!=null&&at[wt]._lang==1033)return at[wt];for(var wt in at)if(at[wt].postScriptName!=null&&at[wt]._lang==0)return at[wt];for(var wt in at)if(at[wt].postScriptName!=null&&at[wt]._lang==3084)return at[wt];for(var wt in at)if(at[wt].postScriptName!=null)return at[wt];for(var wt in at){ct=wt;break}return console.debug("returning name table with languageID "+at[ct]._lang),at[ct]},_["OS/2"]={},_["OS/2"].parse=function(rt,it,st){var ot=_._bin.readUshort(rt,it);it+=2;var at={};if(ot==0)_["OS/2"].version0(rt,it,at);else if(ot==1)_["OS/2"].version1(rt,it,at);else if(ot==2||ot==3||ot==4)_["OS/2"].version2(rt,it,at);else{if(ot!=5)throw"unknown OS/2 table version: "+ot;_["OS/2"].version5(rt,it,at)}return at},_["OS/2"].version0=function(rt,it,st){var ot=_._bin;return st.xAvgCharWidth=ot.readShort(rt,it),it+=2,st.usWeightClass=ot.readUshort(rt,it),it+=2,st.usWidthClass=ot.readUshort(rt,it),it+=2,st.fsType=ot.readUshort(rt,it),it+=2,st.ySubscriptXSize=ot.readShort(rt,it),it+=2,st.ySubscriptYSize=ot.readShort(rt,it),it+=2,st.ySubscriptXOffset=ot.readShort(rt,it),it+=2,st.ySubscriptYOffset=ot.readShort(rt,it),it+=2,st.ySuperscriptXSize=ot.readShort(rt,it),it+=2,st.ySuperscriptYSize=ot.readShort(rt,it),it+=2,st.ySuperscriptXOffset=ot.readShort(rt,it),it+=2,st.ySuperscriptYOffset=ot.readShort(rt,it),it+=2,st.yStrikeoutSize=ot.readShort(rt,it),it+=2,st.yStrikeoutPosition=ot.readShort(rt,it),it+=2,st.sFamilyClass=ot.readShort(rt,it),it+=2,st.panose=ot.readBytes(rt,it,10),it+=10,st.ulUnicodeRange1=ot.readUint(rt,it),it+=4,st.ulUnicodeRange2=ot.readUint(rt,it),it+=4,st.ulUnicodeRange3=ot.readUint(rt,it),it+=4,st.ulUnicodeRange4=ot.readUint(rt,it),it+=4,st.achVendID=[ot.readInt8(rt,it),ot.readInt8(rt,it+1),ot.readInt8(rt,it+2),ot.readInt8(rt,it+3)],it+=4,st.fsSelection=ot.readUshort(rt,it),it+=2,st.usFirstCharIndex=ot.readUshort(rt,it),it+=2,st.usLastCharIndex=ot.readUshort(rt,it),it+=2,st.sTypoAscender=ot.readShort(rt,it),it+=2,st.sTypoDescender=ot.readShort(rt,it),it+=2,st.sTypoLineGap=ot.readShort(rt,it),it+=2,st.usWinAscent=ot.readUshort(rt,it),it+=2,st.usWinDescent=ot.readUshort(rt,it),it+=2},_["OS/2"].version1=function(rt,it,st){var ot=_._bin;return it=_["OS/2"].version0(rt,it,st),st.ulCodePageRange1=ot.readUint(rt,it),it+=4,st.ulCodePageRange2=ot.readUint(rt,it),it+=4},_["OS/2"].version2=function(rt,it,st){var ot=_._bin;return it=_["OS/2"].version1(rt,it,st),st.sxHeight=ot.readShort(rt,it),it+=2,st.sCapHeight=ot.readShort(rt,it),it+=2,st.usDefault=ot.readUshort(rt,it),it+=2,st.usBreak=ot.readUshort(rt,it),it+=2,st.usMaxContext=ot.readUshort(rt,it),it+=2},_["OS/2"].version5=function(rt,it,st){var ot=_._bin;return it=_["OS/2"].version2(rt,it,st),st.usLowerOpticalPointSize=ot.readUshort(rt,it),it+=2,st.usUpperOpticalPointSize=ot.readUshort(rt,it),it+=2},_.post={},_.post.parse=function(rt,it,st){var ot=_._bin,at={};return at.version=ot.readFixed(rt,it),it+=4,at.italicAngle=ot.readFixed(rt,it),it+=4,at.underlinePosition=ot.readShort(rt,it),it+=2,at.underlineThickness=ot.readShort(rt,it),it+=2,at},_==null&&(_={}),_.U==null&&(_.U={}),_.U.codeToGlyph=function(rt,it){var st=rt.cmap,ot=-1;if(st.p0e4!=null?ot=st.p0e4:st.p3e1!=null?ot=st.p3e1:st.p1e0!=null?ot=st.p1e0:st.p0e3!=null&&(ot=st.p0e3),ot==-1)throw"no familiar platform and encoding!";var at=st.tables[ot];if(at.format==0)return it>=at.map.length?0:at.map[it];if(at.format==4){for(var lt=-1,ct=0;ct<at.endCount.length;ct++)if(it<=at.endCount[ct]){lt=ct;break}return lt==-1||at.startCount[lt]>it?0:65535&(at.idRangeOffset[lt]!=0?at.glyphIdArray[it-at.startCount[lt]+(at.idRangeOffset[lt]>>1)-(at.idRangeOffset.length-lt)]:it+at.idDelta[lt])}if(at.format==12){if(it>at.groups[at.groups.length-1][1])return 0;for(ct=0;ct<at.groups.length;ct++){var ut=at.groups[ct];if(ut[0]<=it&&it<=ut[1])return ut[2]+(it-ut[0])}return 0}throw"unknown cmap table format "+at.format},_.U.glyphToPath=function(rt,it){var st={cmds:[],crds:[]};if(rt.SVG&&rt.SVG.entries[it]){var ot=rt.SVG.entries[it];return ot==null?st:(typeof ot=="string"&&(ot=_.SVG.toPath(ot),rt.SVG.entries[it]=ot),ot)}if(rt.CFF){var at={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:rt.CFF.Private?rt.CFF.Private.defaultWidthX:0,open:!1},lt=rt.CFF,ct=rt.CFF.Private;if(lt.ROS){for(var ut=0;lt.FDSelect[ut+2]<=it;)ut+=2;ct=lt.FDArray[lt.FDSelect[ut+1]].Private}_.U._drawCFF(rt.CFF.CharStrings[it],at,lt,ct,st)}else rt.glyf&&_.U._drawGlyf(it,rt,st);return st},_.U._drawGlyf=function(rt,it,st){var ot=it.glyf[rt];ot==null&&(ot=it.glyf[rt]=_.glyf._parseGlyf(it,rt)),ot!=null&&(ot.noc>-1?_.U._simpleGlyph(ot,st):_.U._compoGlyph(ot,it,st))},_.U._simpleGlyph=function(rt,it){for(var st=0;st<rt.noc;st++){for(var ot=st==0?0:rt.endPts[st-1]+1,at=rt.endPts[st],lt=ot;lt<=at;lt++){var ct=lt==ot?at:lt-1,ut=lt==at?ot:lt+1,dt=1&rt.flags[lt],ht=1&rt.flags[ct],mt=1&rt.flags[ut],yt=rt.xs[lt],vt=rt.ys[lt];if(lt==ot)if(dt){if(!ht){_.U.P.moveTo(it,yt,vt);continue}_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct])}else ht?_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct]):_.U.P.moveTo(it,(rt.xs[ct]+yt)/2,(rt.ys[ct]+vt)/2);dt?ht&&_.U.P.lineTo(it,yt,vt):mt?_.U.P.qcurveTo(it,yt,vt,rt.xs[ut],rt.ys[ut]):_.U.P.qcurveTo(it,yt,vt,(yt+rt.xs[ut])/2,(vt+rt.ys[ut])/2)}_.U.P.closePath(it)}},_.U._compoGlyph=function(rt,it,st){for(var ot=0;ot<rt.parts.length;ot++){var at={cmds:[],crds:[]},lt=rt.parts[ot];_.U._drawGlyf(lt.glyphIndex,it,at);for(var ct=lt.m,ut=0;ut<at.crds.length;ut+=2){var dt=at.crds[ut],ht=at.crds[ut+1];st.crds.push(dt*ct.a+ht*ct.b+ct.tx),st.crds.push(dt*ct.c+ht*ct.d+ct.ty)}for(ut=0;ut<at.cmds.length;ut++)st.cmds.push(at.cmds[ut])}},_.U._getGlyphClass=function(rt,it){var st=_._lctf.getInterval(it,rt);return st==-1?0:it[st+2]},_.U._applySubs=function(rt,it,st,ot){for(var at=rt.length-it-1,lt=0;lt<st.tabs.length;lt++)if(st.tabs[lt]!=null){var ct,ut=st.tabs[lt];if(!ut.coverage||(ct=_._lctf.coverageIndex(ut.coverage,rt[it]))!=-1){if(st.ltype==1)rt[it],ut.fmt==1?rt[it]=rt[it]+ut.delta:rt[it]=ut.newg[ct];else if(st.ltype==4)for(var dt=ut.vals[ct],ht=0;ht<dt.length;ht++){var mt=dt[ht],yt=mt.chain.length;if(!(yt>at)){for(var vt=!0,pt=0,_t=0;_t<yt;_t++){for(;rt[it+pt+(1+_t)]==-1;)pt++;mt.chain[_t]!=rt[it+pt+(1+_t)]&&(vt=!1)}if(vt){for(rt[it]=mt.nglyph,_t=0;_t<yt+pt;_t++)rt[it+_t+1]=-1;break}}}else if(st.ltype==5&&ut.fmt==2)for(var xt=_._lctf.getInterval(ut.cDef,rt[it]),St=ut.cDef[xt+2],At=ut.scset[St],bt=0;bt<At.length;bt++){var Et=At[bt],wt=Et.input;if(!(wt.length>at)){for(vt=!0,_t=0;_t<wt.length;_t++){var Rt=_._lctf.getInterval(ut.cDef,rt[it+1+_t]);if(xt==-1&&ut.cDef[Rt+2]!=wt[_t]){vt=!1;break}}if(vt){var Tt=Et.substLookupRecords;for(ht=0;ht<Tt.length;ht+=2)Tt[ht],Tt[ht+1]}}}else if(st.ltype==6&&ut.fmt==3){if(!_.U._glsCovered(rt,ut.backCvg,it-ut.backCvg.length)||!_.U._glsCovered(rt,ut.inptCvg,it)||!_.U._glsCovered(rt,ut.ahedCvg,it+ut.inptCvg.length))continue;var Mt=ut.lookupRec;for(bt=0;bt<Mt.length;bt+=2){xt=Mt[bt];var Lt=ot[Mt[bt+1]];_.U._applySubs(rt,it+xt,Lt,ot)}}}}},_.U._glsCovered=function(rt,it,st){for(var ot=0;ot<it.length;ot++)if(_._lctf.coverageIndex(it[ot],rt[st+ot])==-1)return!1;return!0},_.U.glyphsToPath=function(rt,it,st){for(var ot={cmds:[],crds:[]},at=0,lt=0;lt<it.length;lt++){var ct=it[lt];if(ct!=-1){for(var ut=lt<it.length-1&&it[lt+1]!=-1?it[lt+1]:0,dt=_.U.glyphToPath(rt,ct),ht=0;ht<dt.crds.length;ht+=2)ot.crds.push(dt.crds[ht]+at),ot.crds.push(dt.crds[ht+1]);for(st&&ot.cmds.push(st),ht=0;ht<dt.cmds.length;ht++)ot.cmds.push(dt.cmds[ht]);st&&ot.cmds.push("X"),at+=rt.hmtx.aWidth[ct],lt<it.length-1&&(at+=_.U.getPairAdjustment(rt,ct,ut))}}return ot},_.U.P={},_.U.P.moveTo=function(rt,it,st){rt.cmds.push("M"),rt.crds.push(it,st)},_.U.P.lineTo=function(rt,it,st){rt.cmds.push("L"),rt.crds.push(it,st)},_.U.P.curveTo=function(rt,it,st,ot,at,lt,ct){rt.cmds.push("C"),rt.crds.push(it,st,ot,at,lt,ct)},_.U.P.qcurveTo=function(rt,it,st,ot,at){rt.cmds.push("Q"),rt.crds.push(it,st,ot,at)},_.U.P.closePath=function(rt){rt.cmds.push("Z")},_.U._drawCFF=function(rt,it,st,ot,at){for(var lt=it.stack,ct=it.nStems,ut=it.haveWidth,dt=it.width,ht=it.open,mt=0,yt=it.x,vt=it.y,pt=0,_t=0,xt=0,St=0,At=0,bt=0,Et=0,wt=0,Rt=0,Tt=0,Mt={val:0,size:0};mt<rt.length;){_.CFF.getCharString(rt,mt,Mt);var Lt=Mt.val;if(mt+=Mt.size,Lt=="o1"||Lt=="o18")lt.length%2!=0&&!ut&&(dt=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Lt=="o3"||Lt=="o23")lt.length%2!=0&&!ut&&(dt=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Lt=="o4")lt.length>1&&!ut&&(dt=lt.shift()+ot.nominalWidthX,ut=!0),ht&&_.U.P.closePath(at),vt+=lt.pop(),_.U.P.moveTo(at,yt,vt),ht=!0;else if(Lt=="o5")for(;lt.length>0;)yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt);else if(Lt=="o6"||Lt=="o7")for(var Ft=lt.length,Ht=Lt=="o6",Kt=0;Kt<Ft;Kt++){var Wt=lt.shift();Ht?yt+=Wt:vt+=Wt,Ht=!Ht,_.U.P.lineTo(at,yt,vt)}else if(Lt=="o8"||Lt=="o24"){Ft=lt.length;for(var Jt=0;Jt+6<=Ft;)pt=yt+lt.shift(),_t=vt+lt.shift(),xt=pt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,yt,vt),Jt+=6;Lt=="o24"&&(yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt))}else{if(Lt=="o11")break;if(Lt=="o1234"||Lt=="o1235"||Lt=="o1236"||Lt=="o1237")Lt=="o1234"&&(_t=vt,xt=(pt=yt+lt.shift())+lt.shift(),Tt=St=_t+lt.shift(),bt=St,wt=vt,yt=(Et=(At=(Rt=xt+lt.shift())+lt.shift())+lt.shift())+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,Rt,Tt),_.U.P.curveTo(at,At,bt,Et,wt,yt,vt)),Lt=="o1235"&&(pt=yt+lt.shift(),_t=vt+lt.shift(),xt=pt+lt.shift(),St=_t+lt.shift(),Rt=xt+lt.shift(),Tt=St+lt.shift(),At=Rt+lt.shift(),bt=Tt+lt.shift(),Et=At+lt.shift(),wt=bt+lt.shift(),yt=Et+lt.shift(),vt=wt+lt.shift(),lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,Rt,Tt),_.U.P.curveTo(at,At,bt,Et,wt,yt,vt)),Lt=="o1236"&&(pt=yt+lt.shift(),_t=vt+lt.shift(),xt=pt+lt.shift(),Tt=St=_t+lt.shift(),bt=St,Et=(At=(Rt=xt+lt.shift())+lt.shift())+lt.shift(),wt=bt+lt.shift(),yt=Et+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,Rt,Tt),_.U.P.curveTo(at,At,bt,Et,wt,yt,vt)),Lt=="o1237"&&(pt=yt+lt.shift(),_t=vt+lt.shift(),xt=pt+lt.shift(),St=_t+lt.shift(),Rt=xt+lt.shift(),Tt=St+lt.shift(),At=Rt+lt.shift(),bt=Tt+lt.shift(),Et=At+lt.shift(),wt=bt+lt.shift(),Math.abs(Et-yt)>Math.abs(wt-vt)?yt=Et+lt.shift():vt=wt+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,Rt,Tt),_.U.P.curveTo(at,At,bt,Et,wt,yt,vt));else if(Lt=="o14"){if(lt.length>0&&!ut&&(dt=lt.shift()+st.nominalWidthX,ut=!0),lt.length==4){var Ot=lt.shift(),kt=lt.shift(),Gt=lt.shift(),zt=lt.shift(),Vt=_.CFF.glyphBySE(st,Gt),Dt=_.CFF.glyphBySE(st,zt);_.U._drawCFF(st.CharStrings[Vt],it,st,ot,at),it.x=Ot,it.y=kt,_.U._drawCFF(st.CharStrings[Dt],it,st,ot,at)}ht&&(_.U.P.closePath(at),ht=!1)}else if(Lt=="o19"||Lt=="o20")lt.length%2!=0&&!ut&&(dt=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0,mt+=ct+7>>3;else if(Lt=="o21")lt.length>2&&!ut&&(dt=lt.shift()+ot.nominalWidthX,ut=!0),vt+=lt.pop(),yt+=lt.pop(),ht&&_.U.P.closePath(at),_.U.P.moveTo(at,yt,vt),ht=!0;else if(Lt=="o22")lt.length>1&&!ut&&(dt=lt.shift()+ot.nominalWidthX,ut=!0),yt+=lt.pop(),ht&&_.U.P.closePath(at),_.U.P.moveTo(at,yt,vt),ht=!0;else if(Lt=="o25"){for(;lt.length>6;)yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt);pt=yt+lt.shift(),_t=vt+lt.shift(),xt=pt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,yt,vt)}else if(Lt=="o26")for(lt.length%2&&(yt+=lt.shift());lt.length>0;)pt=yt,_t=vt+lt.shift(),yt=xt=pt+lt.shift(),vt=(St=_t+lt.shift())+lt.shift(),_.U.P.curveTo(at,pt,_t,xt,St,yt,vt);else if(Lt=="o27")for(lt.length%2&&(vt+=lt.shift());lt.length>0;)_t=vt,xt=(pt=yt+lt.shift())+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St,_.U.P.curveTo(at,pt,_t,xt,St,yt,vt);else if(Lt=="o10"||Lt=="o29"){var It=Lt=="o10"?ot:st;if(lt.length==0)console.debug("error: empty stack");else{var Ut=lt.pop(),Yt=It.Subrs[Ut+It.Bias];it.x=yt,it.y=vt,it.nStems=ct,it.haveWidth=ut,it.width=dt,it.open=ht,_.U._drawCFF(Yt,it,st,ot,at),yt=it.x,vt=it.y,ct=it.nStems,ut=it.haveWidth,dt=it.width,ht=it.open}}else if(Lt=="o30"||Lt=="o31"){var qt=lt.length,rn=(Jt=0,Lt=="o31");for(Jt+=qt-(Ft=-3&qt);Jt<Ft;)rn?(_t=vt,xt=(pt=yt+lt.shift())+lt.shift(),vt=(St=_t+lt.shift())+lt.shift(),Ft-Jt==5?(yt=xt+lt.shift(),Jt++):yt=xt,rn=!1):(pt=yt,_t=vt+lt.shift(),xt=pt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),Ft-Jt==5?(vt=St+lt.shift(),Jt++):vt=St,rn=!0),_.U.P.curveTo(at,pt,_t,xt,St,yt,vt),Jt+=4}else{if((Lt+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Lt,rt),Lt;lt.push(Lt)}}}it.x=yt,it.y=vt,it.nStems=ct,it.haveWidth=ut,it.width=dt,it.open=ht};var tt=_,nt={Typr:tt};return _e.Typr=tt,_e.default=nt,Object.defineProperty(_e,"__esModule",{value:!0}),_e}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(_e){var _=Uint8Array,tt=Uint16Array,nt=Uint32Array,rt=new _([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),it=new _([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),st=new _([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ot=function(Lt,Ft){for(var Ht=new tt(31),Kt=0;Kt<31;++Kt)Ht[Kt]=Ft+=1<<Lt[Kt-1];var Wt=new nt(Ht[30]);for(Kt=1;Kt<30;++Kt)for(var Jt=Ht[Kt];Jt<Ht[Kt+1];++Jt)Wt[Jt]=Jt-Ht[Kt]<<5|Kt;return[Ht,Wt]},at=ot(rt,2),lt=at[0],ct=at[1];lt[28]=258,ct[258]=28;for(var ut=ot(it,0)[0],dt=new tt(32768),ht=0;ht<32768;++ht){var mt=(43690&ht)>>>1|(21845&ht)<<1;mt=(61680&(mt=(52428&mt)>>>2|(13107&mt)<<2))>>>4|(3855&mt)<<4,dt[ht]=((65280&mt)>>>8|(255&mt)<<8)>>>1}var yt=function(Lt,Ft,Ht){for(var Kt=Lt.length,Wt=0,Jt=new tt(Ft);Wt<Kt;++Wt)++Jt[Lt[Wt]-1];var Ot,kt=new tt(Ft);for(Wt=0;Wt<Ft;++Wt)kt[Wt]=kt[Wt-1]+Jt[Wt-1]<<1;{Ot=new tt(1<<Ft);var Gt=15-Ft;for(Wt=0;Wt<Kt;++Wt)if(Lt[Wt])for(var zt=Wt<<4|Lt[Wt],Vt=Ft-Lt[Wt],Dt=kt[Lt[Wt]-1]++<<Vt,It=Dt|(1<<Vt)-1;Dt<=It;++Dt)Ot[dt[Dt]>>>Gt]=zt}return Ot},vt=new _(288);for(ht=0;ht<144;++ht)vt[ht]=8;for(ht=144;ht<256;++ht)vt[ht]=9;for(ht=256;ht<280;++ht)vt[ht]=7;for(ht=280;ht<288;++ht)vt[ht]=8;var pt=new _(32);for(ht=0;ht<32;++ht)pt[ht]=5;var _t=yt(vt,9),xt=yt(pt,5),St=function(Lt){for(var Ft=Lt[0],Ht=1;Ht<Lt.length;++Ht)Lt[Ht]>Ft&&(Ft=Lt[Ht]);return Ft},At=function(Lt,Ft,Ht){var Kt=Ft/8|0;return(Lt[Kt]|Lt[Kt+1]<<8)>>(7&Ft)&Ht},bt=function(Lt,Ft){var Ht=Ft/8|0;return(Lt[Ht]|Lt[Ht+1]<<8|Lt[Ht+2]<<16)>>(7&Ft)},Et=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wt=function(Lt,Ft,Ht){var Kt=new Error(Ft||Et[Lt]);if(Kt.code=Lt,Error.captureStackTrace&&Error.captureStackTrace(Kt,wt),!Ht)throw Kt;return Kt},Rt=function(Lt,Ft,Ht){var Kt=Lt.length;if(!Kt||Ht&&!Ht.l&&Kt<5)return Ft||new _(0);var Wt=!Ft||Ht,Jt=!Ht||Ht.i;Ht||(Ht={}),Ft||(Ft=new _(3*Kt));var Ot,kt=function(Nn){var bn=Ft.length;if(Nn>bn){var Rn=new _(Math.max(2*bn,Nn));Rn.set(Ft),Ft=Rn}},Gt=Ht.f||0,zt=Ht.p||0,Vt=Ht.b||0,Dt=Ht.l,It=Ht.d,Ut=Ht.m,Yt=Ht.n,qt=8*Kt;do{if(!Dt){Ht.f=Gt=At(Lt,zt,1);var rn=At(Lt,zt+1,3);if(zt+=3,!rn){var gn=Lt[(jt=((Ot=zt)/8|0)+(7&Ot&&1)+4)-4]|Lt[jt-3]<<8,An=jt+gn;if(An>Kt){Jt&&wt(0);break}Wt&&kt(Vt+gn),Ft.set(Lt.subarray(jt,An),Vt),Ht.b=Vt+=gn,Ht.p=zt=8*An;continue}if(rn==1)Dt=_t,It=xt,Ut=9,Yt=5;else if(rn==2){var En=At(Lt,zt,31)+257,fn=At(Lt,zt+10,15)+4,nn=En+At(Lt,zt+5,31)+1;zt+=14;for(var Tn=new _(nn),Cn=new _(19),vn=0;vn<fn;++vn)Cn[st[vn]]=At(Lt,zt+3*vn,7);zt+=3*fn;var _n=St(Cn),Qt=(1<<_n)-1,sn=yt(Cn,_n);for(vn=0;vn<nn;){var jt,Bt=sn[At(Lt,zt,Qt)];if(zt+=15&Bt,(jt=Bt>>>4)<16)Tn[vn++]=jt;else{var hn=0,cn=0;for(jt==16?(cn=3+At(Lt,zt,3),zt+=2,hn=Tn[vn-1]):jt==17?(cn=3+At(Lt,zt,7),zt+=3):jt==18&&(cn=11+At(Lt,zt,127),zt+=7);cn--;)Tn[vn++]=hn}}var mn=Tn.subarray(0,En),an=Tn.subarray(En);Ut=St(mn),Yt=St(an),Dt=yt(mn,Ut),It=yt(an,Yt)}else wt(1);if(zt>qt){Jt&&wt(0);break}}Wt&&kt(Vt+131072);for(var Hn=(1<<Ut)-1,Pn=(1<<Yt)-1,er=zt;;er=zt){var cr=(hn=Dt[bt(Lt,zt)&Hn])>>>4;if((zt+=15&hn)>qt){Jt&&wt(0);break}if(hn||wt(2),cr<256)Ft[Vt++]=cr;else{if(cr==256){er=zt,Dt=null;break}var ir=cr-254;if(cr>264){var Jn=rt[vn=cr-257];ir=At(Lt,zt,(1<<Jn)-1)+lt[vn],zt+=Jn}var fr=It[bt(Lt,zt)&Pn],dr=fr>>>4;if(fr||wt(3),zt+=15&fr,an=ut[dr],dr>3&&(Jn=it[dr],an+=bt(Lt,zt)&(1<<Jn)-1,zt+=Jn),zt>qt){Jt&&wt(0);break}Wt&&kt(Vt+131072);for(var lr=Vt+ir;Vt<lr;Vt+=4)Ft[Vt]=Ft[Vt-an],Ft[Vt+1]=Ft[Vt+1-an],Ft[Vt+2]=Ft[Vt+2-an],Ft[Vt+3]=Ft[Vt+3-an];Vt=lr}}Ht.l=Dt,Ht.p=er,Ht.b=Vt,Dt&&(Gt=1,Ht.m=Ut,Ht.d=It,Ht.n=Yt)}while(!Gt);return Vt==Ft.length?Ft:function(Nn,bn,Rn){(Rn==null||Rn>Nn.length)&&(Rn=Nn.length);var Sn=new(Nn instanceof tt?tt:Nn instanceof nt?nt:_)(Rn-bn);return Sn.set(Nn.subarray(bn,Rn)),Sn}(Ft,0,Vt)},Tt=new _(0),Mt=typeof TextDecoder<"u"&&new TextDecoder;try{Mt.decode(Tt,{stream:!0})}catch{}return _e.convert_streams=function(Lt){var Ft=new DataView(Lt),Ht=0;function Kt(){var En=Ft.getUint16(Ht);return Ht+=2,En}function Wt(){var En=Ft.getUint32(Ht);return Ht+=4,En}function Jt(En){gn.setUint16(An,En),An+=2}function Ot(En){gn.setUint32(An,En),An+=4}for(var kt={signature:Wt(),flavor:Wt(),length:Wt(),numTables:Kt(),reserved:Kt(),totalSfntSize:Wt(),majorVersion:Kt(),minorVersion:Kt(),metaOffset:Wt(),metaLength:Wt(),metaOrigLength:Wt(),privOffset:Wt(),privLength:Wt()},Gt=0;Math.pow(2,Gt)<=kt.numTables;)Gt++;Gt--;for(var zt=16*Math.pow(2,Gt),Vt=16*kt.numTables-zt,Dt=12,It=[],Ut=0;Ut<kt.numTables;Ut++)It.push({tag:Wt(),offset:Wt(),compLength:Wt(),origLength:Wt(),origChecksum:Wt()}),Dt+=16;var Yt,qt=new Uint8Array(12+16*It.length+It.reduce(function(En,fn){return En+fn.origLength+4},0)),rn=qt.buffer,gn=new DataView(rn),An=0;return Ot(kt.flavor),Jt(kt.numTables),Jt(zt),Jt(Gt),Jt(Vt),It.forEach(function(En){Ot(En.tag),Ot(En.origChecksum),Ot(Dt),Ot(En.origLength),En.outOffset=Dt,(Dt+=En.origLength)%4!=0&&(Dt+=4-Dt%4)}),It.forEach(function(En){var fn,nn=Lt.slice(En.offset,En.offset+En.compLength);if(En.compLength!=En.origLength){var Tn=new Uint8Array(En.origLength);fn=new Uint8Array(nn,2),Rt(fn,Tn)}else Tn=new Uint8Array(nn);qt.set(Tn,En.outOffset);var Cn=0;(Dt=En.outOffset+En.origLength)%4!=0&&(Cn=4-Dt%4),qt.set(new Uint8Array(Cn).buffer,En.outOffset+En.origLength),Yt=Dt+Cn}),rn.slice(0,Yt)},Object.defineProperty(_e,"__esModule",{value:!0}),_e}({}).convert_streams}function parserFactory(_e,_){const tt={M:2,L:2,Q:4,C:6,Z:0},nt={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},rt=1,it=2,st=4,ot=8,at=16,lt=32;let ct;function ut(Et){if(!ct){const wt={R:it,L:rt,D:st,C:at,U:lt,T:ot};ct=new Map;for(let Rt in nt){let Tt=0;nt[Rt].split(",").forEach(Mt=>{let[Lt,Ft]=Mt.split("+");Lt=parseInt(Lt,36),Ft=Ft?parseInt(Ft,36):0,ct.set(Tt+=Lt,wt[Rt]);for(let Ht=Ft;Ht--;)ct.set(++Tt,wt[Rt])})}}return ct.get(Et)||lt}const dt=1,ht=2,mt=3,yt=4,vt=[null,"isol","init","fina","medi"];function pt(Et){const wt=new Uint8Array(Et.length);let Rt=lt,Tt=dt,Mt=-1;for(let Lt=0;Lt<Et.length;Lt++){const Ft=Et.codePointAt(Lt);let Ht=ut(Ft)|0,Kt=dt;Ht&ot||(Rt&(rt|st|at)?Ht&(it|st|at)?(Kt=mt,(Tt===dt||Tt===mt)&&wt[Mt]++):Ht&(rt|lt)&&(Tt===ht||Tt===yt)&&wt[Mt]--:Rt&(it|lt)&&(Tt===ht||Tt===yt)&&wt[Mt]--,Tt=wt[Lt]=Kt,Rt=Ht,Mt=Lt,Ft>65535&&Lt++)}return wt}function _t(Et,wt){const Rt=[];for(let Mt=0;Mt<wt.length;Mt++){const Lt=wt.codePointAt(Mt);Lt>65535&&Mt++,Rt.push(_e.U.codeToGlyph(Et,Lt))}const Tt=Et.GSUB;if(Tt){const{lookupList:Mt,featureList:Lt}=Tt;let Ft;const Ht=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Kt=[];Lt.forEach(Wt=>{if(Ht.test(Wt.tag))for(let Jt=0;Jt<Wt.tab.length;Jt++){if(Kt[Wt.tab[Jt]])continue;Kt[Wt.tab[Jt]]=!0;const Ot=Mt[Wt.tab[Jt]],kt=/^(isol|init|fina|medi)$/.test(Wt.tag);kt&&!Ft&&(Ft=pt(wt));for(let Gt=0;Gt<Rt.length;Gt++)(!Ft||!kt||vt[Ft[Gt]]===Wt.tag)&&_e.U._applySubs(Rt,Gt,Ot,Mt)}})}return Rt}function xt(Et,wt){const Rt=new Int16Array(wt.length*3);let Tt=0;for(;Tt<wt.length;Tt++){const Ht=wt[Tt];if(Ht===-1)continue;Rt[Tt*3+2]=Et.hmtx.aWidth[Ht];const Kt=Et.GPOS;if(Kt){const Wt=Kt.lookupList;for(let Jt=0;Jt<Wt.length;Jt++){const Ot=Wt[Jt];for(let kt=0;kt<Ot.tabs.length;kt++){const Gt=Ot.tabs[kt];if(Ot.ltype===1){if(_e._lctf.coverageIndex(Gt.coverage,Ht)!==-1&&Gt.pos){Ft(Gt.pos,Tt);break}}else if(Ot.ltype===2){let zt=null,Vt=Mt();if(Vt!==-1){const Dt=_e._lctf.coverageIndex(Gt.coverage,wt[Vt]);if(Dt!==-1){if(Gt.fmt===1){const It=Gt.pairsets[Dt];for(let Ut=0;Ut<It.length;Ut++)It[Ut].gid2===Ht&&(zt=It[Ut])}else if(Gt.fmt===2){const It=_e.U._getGlyphClass(wt[Vt],Gt.classDef1),Ut=_e.U._getGlyphClass(Ht,Gt.classDef2);zt=Gt.matrix[It][Ut]}if(zt){zt.val1&&Ft(zt.val1,Vt),zt.val2&&Ft(zt.val2,Tt);break}}}}else if(Ot.ltype===4){const zt=_e._lctf.coverageIndex(Gt.markCoverage,Ht);if(zt!==-1){const Vt=Mt(Lt),Dt=Vt===-1?-1:_e._lctf.coverageIndex(Gt.baseCoverage,wt[Vt]);if(Dt!==-1){const It=Gt.markArray[zt],Ut=Gt.baseArray[Dt][It.markClass];Rt[Tt*3]=Ut.x-It.x+Rt[Vt*3]-Rt[Vt*3+2],Rt[Tt*3+1]=Ut.y-It.y+Rt[Vt*3+1];break}}}else if(Ot.ltype===6){const zt=_e._lctf.coverageIndex(Gt.mark1Coverage,Ht);if(zt!==-1){const Vt=Mt();if(Vt!==-1){const Dt=wt[Vt];if(St(Et,Dt)===3){const It=_e._lctf.coverageIndex(Gt.mark2Coverage,Dt);if(It!==-1){const Ut=Gt.mark1Array[zt],Yt=Gt.mark2Array[It][Ut.markClass];Rt[Tt*3]=Yt.x-Ut.x+Rt[Vt*3]-Rt[Vt*3+2],Rt[Tt*3+1]=Yt.y-Ut.y+Rt[Vt*3+1];break}}}}}}}}else if(Et.kern&&!Et.cff){const Wt=Mt();if(Wt!==-1){const Jt=Et.kern.glyph1.indexOf(wt[Wt]);if(Jt!==-1){const Ot=Et.kern.rval[Jt].glyph2.indexOf(Ht);Ot!==-1&&(Rt[Wt*3+2]+=Et.kern.rval[Jt].vals[Ot])}}}}return Rt;function Mt(Ht){for(let Kt=Tt-1;Kt>=0;Kt--)if(wt[Kt]!==-1&&(!Ht||Ht(wt[Kt])))return Kt;return-1}function Lt(Ht){return St(Et,Ht)===1}function Ft(Ht,Kt){for(let Wt=0;Wt<3;Wt++)Rt[Kt*3+Wt]+=Ht[Wt]||0}}function St(Et,wt){const Rt=Et.GDEF&&Et.GDEF.glyphClassDef;return Rt?_e.U._getGlyphClass(wt,Rt):0}function At(...Et){for(let wt=0;wt<Et.length;wt++)if(typeof Et[wt]=="number")return Et[wt]}function bt(Et){const wt=Object.create(null),Rt=Et["OS/2"],Tt=Et.hhea,Mt=Et.head.unitsPerEm,Lt=At(Rt&&Rt.sTypoAscender,Tt&&Tt.ascender,Mt),Ft={unitsPerEm:Mt,ascender:Lt,descender:At(Rt&&Rt.sTypoDescender,Tt&&Tt.descender,0),capHeight:At(Rt&&Rt.sCapHeight,Lt),xHeight:At(Rt&&Rt.sxHeight,Lt),lineGap:At(Rt&&Rt.sTypoLineGap,Tt&&Tt.lineGap),supportsCodePoint(Ht){return _e.U.codeToGlyph(Et,Ht)>0},forEachGlyph(Ht,Kt,Wt,Jt){let Ot=0;const kt=1/Ft.unitsPerEm*Kt,Gt=_t(Et,Ht);let zt=0;const Vt=xt(Et,Gt);return Gt.forEach((Dt,It)=>{if(Dt!==-1){let Ut=wt[Dt];if(!Ut){const{cmds:Yt,crds:qt}=_e.U.glyphToPath(Et,Dt);let rn="",gn=0;for(let Tn=0,Cn=Yt.length;Tn<Cn;Tn++){const vn=tt[Yt[Tn]];rn+=Yt[Tn];for(let _n=1;_n<=vn;_n++)rn+=(_n>1?",":"")+qt[gn++]}let An,En,fn,nn;if(qt.length){An=En=1/0,fn=nn=-1/0;for(let Tn=0,Cn=qt.length;Tn<Cn;Tn+=2){let vn=qt[Tn],_n=qt[Tn+1];vn<An&&(An=vn),_n<En&&(En=_n),vn>fn&&(fn=vn),_n>nn&&(nn=_n)}}else An=fn=En=nn=0;Ut=wt[Dt]={index:Dt,advanceWidth:Et.hmtx.aWidth[Dt],xMin:An,yMin:En,xMax:fn,yMax:nn,path:rn}}Jt.call(null,Ut,Ot+Vt[It*3]*kt,Vt[It*3+1]*kt,zt),Ot+=Vt[It*3+2]*kt,Wt&&(Ot+=Wt*Kt)}zt+=Ht.codePointAt(zt)>65535?2:1}),Ot}};return Ft}return function(wt){const Rt=new Uint8Array(wt,0,4),Tt=_e._bin.readASCII(Rt,0,4);if(Tt==="wOFF")wt=_(wt);else if(Tt==="wOF2")throw new Error("woff2 fonts not supported");return bt(_e.parse(wt)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(_e,_,tt){const nt=_e(),rt=_();return tt(nt,rt)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function unicodeFontResolverClientFactory(){return function(_e){var _=function(){this.buckets=new Map};_.prototype.add=function(xt){var St=xt>>5;this.buckets.set(St,(this.buckets.get(St)||0)|1<<(31&xt))},_.prototype.has=function(xt){var St=this.buckets.get(xt>>5);return St!==void 0&&(St&1<<(31&xt))!=0},_.prototype.serialize=function(){var xt=[];return this.buckets.forEach(function(St,At){xt.push((+At).toString(36)+":"+St.toString(36))}),xt.join(",")},_.prototype.deserialize=function(xt){var St=this;this.buckets.clear(),xt.split(",").forEach(function(At){var bt=At.split(":");St.buckets.set(parseInt(bt[0],36),parseInt(bt[1],36))})};var tt=Math.pow(2,8),nt=tt-1,rt=~nt;function it(xt){var St=function(bt){return bt&rt}(xt).toString(16),At=function(bt){return(bt&rt)+tt-1}(xt).toString(16);return"codepoint-index/plane"+(xt>>16)+"/"+St+"-"+At+".json"}function st(xt,St){var At=xt&nt,bt=St.codePointAt(At/6|0);return((bt=(bt||48)-48)&1<<At%6)!=0}function ot(xt,St){var At;(At=xt,At.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(bt){return bt.split("-").map(function(Et){return parseInt(Et.trim(),16)})})).forEach(function(bt){var Et=bt[0],wt=bt[1];wt===void 0&&(wt=Et),St(Et,wt)})}function at(xt,St){ot(xt,function(At,bt){for(var Et=At;Et<=bt;Et++)St(Et)})}var lt={},ct={},ut=new WeakMap,dt="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function ht(xt){var St=ut.get(xt);return St||(St=new _,at(xt.ranges,function(At){return St.add(At)}),ut.set(xt,St)),St}var mt,yt=new Map;function vt(xt,St,At){return xt[St]?St:xt[At]?At:function(bt){for(var Et in bt)return Et}(xt)}function pt(xt,St){var At=St;if(!xt.includes(At)){At=1/0;for(var bt=0;bt<xt.length;bt++)Math.abs(xt[bt]-St)<Math.abs(At-St)&&(At=xt[bt])}return At}function _t(xt){return mt||(mt=new Set,at("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(St){mt.add(St)})),mt.has(xt)}return _e.CodePointSet=_,_e.clearCache=function(){lt={},ct={}},_e.getFontsForString=function(xt,St){St===void 0&&(St={});var At,bt=St.lang;bt===void 0&&(bt=new RegExp("\\p{Script=Hangul}","u").test(At=xt)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(At)?"ja":"en");var Et=St.category;Et===void 0&&(Et="sans-serif");var wt=St.style;wt===void 0&&(wt="normal");var Rt=St.weight;Rt===void 0&&(Rt=400);var Tt=(St.dataUrl||dt).replace(/\/$/g,""),Mt=new Map,Lt=new Uint8Array(xt.length),Ft={},Ht={},Kt=new Array(xt.length),Wt=new Map,Jt=!1;function Ot(zt){var Vt=yt.get(zt);return Vt||(Vt=fetch(Tt+"/"+zt).then(function(Dt){if(!Dt.ok)throw new Error(Dt.statusText);return Dt.json().then(function(It){if(!Array.isArray(It)||It[0]!==1)throw new Error("Incorrect schema version; need 1, got "+It[0]);return It[1]})}).catch(function(Dt){if(Tt!==dt)return Jt||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+Tt+'", trying default CDN. '+Dt.message),Jt=!0),Tt=dt,yt.delete(zt),Ot(zt);throw Dt}),yt.set(zt,Vt)),Vt}for(var kt=function(zt){var Vt=xt.codePointAt(zt),Dt=it(Vt);Kt[zt]=Dt,lt[Dt]||Wt.has(Dt)||Wt.set(Dt,Ot(Dt).then(function(It){lt[Dt]=It})),Vt>65535&&(zt++,Gt=zt)},Gt=0;Gt<xt.length;Gt++)kt(Gt);return Promise.all(Wt.values()).then(function(){Wt.clear();for(var zt=function(Dt){var It=xt.codePointAt(Dt),Ut=null,Yt=lt[Kt[Dt]],qt=void 0;for(var rn in Yt){var gn=Ht[rn];if(gn===void 0&&(gn=Ht[rn]=new RegExp(rn).test(bt||"en")),gn){for(var An in qt=rn,Yt[rn])if(st(It,Yt[rn][An])){Ut=An;break}break}}if(!Ut){e:for(var En in Yt)if(En!==qt){for(var fn in Yt[En])if(st(It,Yt[En][fn])){Ut=fn;break e}}}Ut||(console.debug("No font coverage for U+"+It.toString(16)),Ut="latin"),Kt[Dt]=Ut,ct[Ut]||Wt.has(Ut)||Wt.set(Ut,Ot("font-meta/"+Ut+".json").then(function(nn){ct[Ut]=nn})),It>65535&&(Dt++,Vt=Dt)},Vt=0;Vt<xt.length;Vt++)zt(Vt);return Promise.all(Wt.values())}).then(function(){for(var zt,Vt=null,Dt=0;Dt<xt.length;Dt++){var It=xt.codePointAt(Dt);if(Vt&&(_t(It)||ht(Vt).has(It)))Lt[Dt]=Lt[Dt-1];else{Vt=ct[Kt[Dt]];var Ut=Ft[Vt.id];if(!Ut){var Yt=Vt.typeforms,qt=vt(Yt,Et,"sans-serif"),rn=vt(Yt[qt],wt,"normal"),gn=pt((zt=Yt[qt])===null||zt===void 0?void 0:zt[rn],Rt);Ut=Ft[Vt.id]=Tt+"/font-files/"+Vt.id+"/"+qt+"."+rn+"."+gn+".woff"}var An=Mt.get(Ut);An==null&&(An=Mt.size,Mt.set(Ut,An)),Lt[Dt]=An}It>65535&&(Dt++,Lt[Dt]=Lt[Dt-1])}return{fontUrls:Array.from(Mt.keys()),chars:Lt}})},Object.defineProperty(_e,"__esModule",{value:!0}),_e}({})}function createFontResolver(_e,_){const tt=Object.create(null),nt=Object.create(null);function rt(st,ot){const at=lt=>{console.error(`Failure loading font ${st}`,lt)};try{const lt=new XMLHttpRequest;lt.open("get",st,!0),lt.responseType="arraybuffer",lt.onload=function(){if(lt.status>=400)at(new Error(lt.statusText));else if(lt.status>0)try{const ct=_e(lt.response);ct.src=st,ot(ct)}catch(ct){at(ct)}},lt.onerror=at,lt.send()}catch(lt){at(lt)}}function it(st,ot){let at=tt[st];at?ot(at):nt[st]?nt[st].push(ot):(nt[st]=[ot],rt(st,lt=>{lt.src=st,tt[st]=lt,nt[st].forEach(ct=>ct(lt)),delete nt[st]}))}return function(st,ot,{lang:at,fonts:lt=[],style:ct="normal",weight:ut="normal",unicodeFontsURL:dt}={}){const ht=new Uint8Array(st.length),mt=[];st.length||_t();const yt=new Map,vt=[];if(ct!=="italic"&&(ct="normal"),typeof ut!="number"&&(ut=ut==="bold"?700:400),lt&&!Array.isArray(lt)&&(lt=[lt]),lt=lt.slice().filter(St=>!St.lang||St.lang.test(at)).reverse(),lt.length){let Et=0;(function wt(Rt=0){for(let Tt=Rt,Mt=st.length;Tt<Mt;Tt++){const Lt=st.codePointAt(Tt);if(Et===1&&mt[ht[Tt-1]].supportsCodePoint(Lt)||/\s/.test(st[Tt]))ht[Tt]=ht[Tt-1],Et===2&&(vt[vt.length-1][1]=Tt);else for(let Ft=ht[Tt],Ht=lt.length;Ft<=Ht;Ft++)if(Ft===Ht){const Kt=Et===2?vt[vt.length-1]:vt[vt.length]=[Tt,Tt];Kt[1]=Tt,Et=2}else{ht[Tt]=Ft;const{src:Kt,unicodeRange:Wt}=lt[Ft];if(!Wt||xt(Lt,Wt)){const Jt=tt[Kt];if(!Jt){it(Kt,()=>{wt(Tt)});return}if(Jt.supportsCodePoint(Lt)){let Ot=yt.get(Jt);typeof Ot!="number"&&(Ot=mt.length,mt.push(Jt),yt.set(Jt,Ot)),ht[Tt]=Ot,Et=1;break}}}Lt>65535&&Tt+1<Mt&&(ht[Tt+1]=ht[Tt],Tt++,Et===2&&(vt[vt.length-1][1]=Tt))}pt()})()}else vt.push([0,st.length-1]),pt();function pt(){if(vt.length){const St=vt.map(At=>st.substring(At[0],At[1]+1)).join(`
`);_.getFontsForString(St,{lang:at||void 0,style:ct,weight:ut,dataUrl:dt}).then(({fontUrls:At,chars:bt})=>{const Et=mt.length;let wt=0;vt.forEach(Tt=>{for(let Mt=0,Lt=Tt[1]-Tt[0];Mt<=Lt;Mt++)ht[Tt[0]+Mt]=bt[wt++]+Et;wt++});let Rt=0;At.forEach((Tt,Mt)=>{it(Tt,Lt=>{mt[Mt+Et]=Lt,++Rt===At.length&&_t()})})})}else _t()}function _t(){ot({chars:ht,fonts:mt})}function xt(St,At){for(let bt=0;bt<At.length;bt++){const[Et,wt=Et]=At[bt];if(Et<=St&&St<=wt)return!0}return!1}}}const fontResolverWorkerModule=defineWorkerModule({name:"FontResolver",dependencies:[createFontResolver,workerModule,unicodeFontResolverClientFactory],init(_e,_,tt){return _e(_,tt())}});function createTypesetter(_e,_){const nt=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,rt="[^\\S\\u00A0]",it=new RegExp(`${rt}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function st({text:mt,lang:yt,fonts:vt,style:pt,weight:_t,preResolvedFonts:xt,unicodeFontsURL:St},At){const bt=({chars:Et,fonts:wt})=>{let Rt,Tt;const Mt=[];for(let Lt=0;Lt<Et.length;Lt++)Et[Lt]!==Tt?(Tt=Et[Lt],Mt.push(Rt={start:Lt,end:Lt,fontObj:wt[Et[Lt]]})):Rt.end=Lt;At(Mt)};xt?bt(xt):_e(mt,bt,{lang:yt,fonts:vt,style:pt,weight:_t,unicodeFontsURL:St})}function ot({text:mt="",font:yt,lang:vt,sdfGlyphSize:pt=64,fontSize:_t=400,fontWeight:xt=1,fontStyle:St="normal",letterSpacing:At=0,lineHeight:bt="normal",maxWidth:Et=1/0,direction:wt,textAlign:Rt="left",textIndent:Tt=0,whiteSpace:Mt="normal",overflowWrap:Lt="normal",anchorX:Ft=0,anchorY:Ht=0,metricsOnly:Kt=!1,unicodeFontsURL:Wt,preResolvedFonts:Jt=null,includeCaretPositions:Ot=!1,chunkedBoundsSize:kt=8192,colorRanges:Gt=null},zt){const Vt=ut(),Dt={fontLoad:0,typesetting:0};mt.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),mt=mt.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_t=+_t,At=+At,Et=+Et,bt=bt||"normal",Tt=+Tt,st({text:mt,lang:vt,style:St,weight:xt,fonts:typeof yt=="string"?[{src:yt}]:yt,unicodeFontsURL:Wt,preResolvedFonts:Jt},It=>{Dt.fontLoad=ut()-Vt;const Ut=isFinite(Et);let Yt=null,qt=null,rn=null,gn=null,An=null,En=null,fn=null,nn=null,Tn=0,Cn=0,vn=Mt!=="nowrap";const _n=new Map,Qt=ut();let sn=Tt,jt=0,Bt=new dt;const hn=[Bt];It.forEach(Pn=>{const{fontObj:er}=Pn,{ascender:cr,descender:ir,unitsPerEm:Jn,lineGap:fr,capHeight:dr,xHeight:lr}=er;let Nn=_n.get(er);if(!Nn){const xn=_t/Jn,on=bt==="normal"?(cr-ir+fr)*xn:bt*_t,Gn=(on-(cr-ir)*xn)/2,Xn=Math.min(on,(cr-ir)*xn),pr=(cr+ir)/2*xn+Xn/2;Nn={index:_n.size,src:er.src,fontObj:er,fontSizeMult:xn,unitsPerEm:Jn,ascender:cr*xn,descender:ir*xn,capHeight:dr*xn,xHeight:lr*xn,lineHeight:on,baseline:-Gn-cr*xn,caretTop:pr,caretBottom:pr-Xn},_n.set(er,Nn)}const{fontSizeMult:bn}=Nn,Rn=mt.slice(Pn.start,Pn.end+1);let Sn,or;er.forEachGlyph(Rn,_t,At,(xn,on,Gn,Xn)=>{on+=jt,Xn+=Pn.start,Sn=on,or=xn;const pr=mt.charAt(Xn),Ar=xn.advanceWidth*bn,xr=Bt.count;let un;if("isEmpty"in xn||(xn.isWhitespace=!!pr&&new RegExp(rt).test(pr),xn.canBreakAfter=!!pr&&it.test(pr),xn.isEmpty=xn.xMin===xn.xMax||xn.yMin===xn.yMax||nt.test(pr)),!xn.isWhitespace&&!xn.isEmpty&&Cn++,vn&&Ut&&!xn.isWhitespace&&on+Ar+sn>Et&&xr){if(Bt.glyphAt(xr-1).glyphObj.canBreakAfter)un=new dt,sn=-on;else for(let Fn=xr;Fn--;)if(Fn===0&&Lt==="break-word"){un=new dt,sn=-on;break}else if(Bt.glyphAt(Fn).glyphObj.canBreakAfter){un=Bt.splitAt(Fn+1);const Yn=un.glyphAt(0).x;sn-=Yn;for(let Qn=un.count;Qn--;)un.glyphAt(Qn).x-=Yn;break}un&&(Bt.isSoftWrapped=!0,Bt=un,hn.push(Bt),Tn=Et)}let pn=Bt.glyphAt(Bt.count);pn.glyphObj=xn,pn.x=on+sn,pn.y=Gn,pn.width=Ar,pn.charIndex=Xn,pn.fontData=Nn,pr===`
`&&(Bt=new dt,hn.push(Bt),sn=-(on+Ar+At*_t)+Tt)}),jt=Sn+or.advanceWidth*bn+At*_t});let cn=0;hn.forEach(Pn=>{let er=!0;for(let cr=Pn.count;cr--;){const ir=Pn.glyphAt(cr);er&&!ir.glyphObj.isWhitespace&&(Pn.width=ir.x+ir.width,Pn.width>Tn&&(Tn=Pn.width),er=!1);let{lineHeight:Jn,capHeight:fr,xHeight:dr,baseline:lr}=ir.fontData;Jn>Pn.lineHeight&&(Pn.lineHeight=Jn);const Nn=lr-Pn.baseline;Nn<0&&(Pn.baseline+=Nn,Pn.cap+=Nn,Pn.ex+=Nn),Pn.cap=Math.max(Pn.cap,Pn.baseline+fr),Pn.ex=Math.max(Pn.ex,Pn.baseline+dr)}Pn.baseline-=cn,Pn.cap-=cn,Pn.ex-=cn,cn+=Pn.lineHeight});let mn=0,an=0;if(Ft&&(typeof Ft=="number"?mn=-Ft:typeof Ft=="string"&&(mn=-Tn*(Ft==="left"?0:Ft==="center"?.5:Ft==="right"?1:lt(Ft)))),Ht&&(typeof Ht=="number"?an=-Ht:typeof Ht=="string"&&(an=Ht==="top"?0:Ht==="top-baseline"?-hn[0].baseline:Ht==="top-cap"?-hn[0].cap:Ht==="top-ex"?-hn[0].ex:Ht==="middle"?cn/2:Ht==="bottom"?cn:Ht==="bottom-baseline"?-hn[hn.length-1].baseline:lt(Ht)*cn)),!Kt){const Pn=_.getEmbeddingLevels(mt,wt);Yt=new Uint16Array(Cn),qt=new Uint8Array(Cn),rn=new Float32Array(Cn*2),gn={},fn=[1/0,1/0,-1/0,-1/0],nn=[],Ot&&(En=new Float32Array(mt.length*4)),Gt&&(An=new Uint8Array(Cn*3));let er=0,cr=-1,ir=-1,Jn,fr;if(hn.forEach((dr,lr)=>{let{count:Nn,width:bn}=dr;if(Nn>0){let Rn=0;for(let Xn=Nn;Xn--&&dr.glyphAt(Xn).glyphObj.isWhitespace;)Rn++;let Sn=0,or=0;if(Rt==="center")Sn=(Tn-bn)/2;else if(Rt==="right")Sn=Tn-bn;else if(Rt==="justify"&&dr.isSoftWrapped){let Xn=0;for(let pr=Nn-Rn;pr--;)dr.glyphAt(pr).glyphObj.isWhitespace&&Xn++;or=(Tn-bn)/Xn}if(or||Sn){let Xn=0;for(let pr=0;pr<Nn;pr++){let Ar=dr.glyphAt(pr);const xr=Ar.glyphObj;Ar.x+=Sn+Xn,or!==0&&xr.isWhitespace&&pr<Nn-Rn&&(Xn+=or,Ar.width+=or)}}const xn=_.getReorderSegments(mt,Pn,dr.glyphAt(0).charIndex,dr.glyphAt(dr.count-1).charIndex);for(let Xn=0;Xn<xn.length;Xn++){const[pr,Ar]=xn[Xn];let xr=1/0,un=-1/0;for(let pn=0;pn<Nn;pn++)if(dr.glyphAt(pn).charIndex>=pr){let Fn=pn,Yn=pn;for(;Yn<Nn;Yn++){let Qn=dr.glyphAt(Yn);if(Qn.charIndex>Ar)break;Yn<Nn-Rn&&(xr=Math.min(xr,Qn.x),un=Math.max(un,Qn.x+Qn.width))}for(let Qn=Fn;Qn<Yn;Qn++){const ur=dr.glyphAt(Qn);ur.x=un-(ur.x+ur.width-xr)}break}}let on;const Gn=Xn=>on=Xn;for(let Xn=0;Xn<Nn;Xn++){const pr=dr.glyphAt(Xn);on=pr.glyphObj;const Ar=on.index,xr=Pn.levels[pr.charIndex]&1;if(xr){const un=_.getMirroredCharacter(mt[pr.charIndex]);un&&pr.fontData.fontObj.forEachGlyph(un,0,0,Gn)}if(Ot){const{charIndex:un,fontData:pn}=pr,Fn=pr.x+mn,Yn=pr.x+pr.width+mn;En[un*4]=xr?Yn:Fn,En[un*4+1]=xr?Fn:Yn,En[un*4+2]=dr.baseline+pn.caretBottom+an,En[un*4+3]=dr.baseline+pn.caretTop+an;const Qn=un-cr;Qn>1&&ct(En,cr,Qn),cr=un}if(Gt){const{charIndex:un}=pr;for(;un>ir;)ir++,Gt.hasOwnProperty(ir)&&(fr=Gt[ir])}if(!on.isWhitespace&&!on.isEmpty){const un=er++,{fontSizeMult:pn,src:Fn,index:Yn}=pr.fontData,Qn=gn[Fn]||(gn[Fn]={});Qn[Ar]||(Qn[Ar]={path:on.path,pathBounds:[on.xMin,on.yMin,on.xMax,on.yMax]});const ur=pr.x+mn,vr=pr.y+dr.baseline+an;rn[un*2]=ur,rn[un*2+1]=vr;const Or=ur+on.xMin*pn,Fr=vr+on.yMin*pn,br=ur+on.xMax*pn,Lr=vr+on.yMax*pn;Or<fn[0]&&(fn[0]=Or),Fr<fn[1]&&(fn[1]=Fr),br>fn[2]&&(fn[2]=br),Lr>fn[3]&&(fn[3]=Lr),un%kt===0&&(Jn={start:un,end:un,rect:[1/0,1/0,-1/0,-1/0]},nn.push(Jn)),Jn.end++;const Ir=Jn.rect;if(Or<Ir[0]&&(Ir[0]=Or),Fr<Ir[1]&&(Ir[1]=Fr),br>Ir[2]&&(Ir[2]=br),Lr>Ir[3]&&(Ir[3]=Lr),Yt[un]=Ar,qt[un]=Yn,Gt){const Ur=un*3;An[Ur]=fr>>16&255,An[Ur+1]=fr>>8&255,An[Ur+2]=fr&255}}}}}),En){const dr=mt.length-cr;dr>1&&ct(En,cr,dr)}}const Hn=[];_n.forEach(({index:Pn,src:er,unitsPerEm:cr,ascender:ir,descender:Jn,lineHeight:fr,capHeight:dr,xHeight:lr})=>{Hn[Pn]={src:er,unitsPerEm:cr,ascender:ir,descender:Jn,lineHeight:fr,capHeight:dr,xHeight:lr}}),Dt.typesetting=ut()-Qt,zt({glyphIds:Yt,glyphFontIndices:qt,glyphPositions:rn,glyphData:gn,fontData:Hn,caretPositions:En,glyphColors:An,chunkedBounds:nn,fontSize:_t,topBaseline:an+hn[0].baseline,blockBounds:[mn,an-cn,mn+Tn,an],visibleBounds:fn,timings:Dt})})}function at(mt,yt){ot({...mt,metricsOnly:!0},vt=>{const[pt,_t,xt,St]=vt.blockBounds;yt({width:xt-pt,height:St-_t})})}function lt(mt){let yt=mt.match(/^([\d.]+)%$/),vt=yt?parseFloat(yt[1]):NaN;return isNaN(vt)?0:vt/100}function ct(mt,yt,vt){const pt=mt[yt*4],_t=mt[yt*4+1],xt=mt[yt*4+2],St=mt[yt*4+3],At=(_t-pt)/vt;for(let bt=0;bt<vt;bt++){const Et=(yt+bt)*4;mt[Et]=pt+At*bt,mt[Et+1]=pt+At*(bt+1),mt[Et+2]=xt,mt[Et+3]=St}}function ut(){return(self.performance||Date).now()}function dt(){this.data=[]}const ht=["glyphObj","x","y","width","charIndex","fontData"];return dt.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/ht.length)},glyphAt(mt){let yt=dt.flyweight;return yt.data=this.data,yt.index=mt,yt},splitAt(mt){let yt=new dt;return yt.data=this.data.splice(mt*ht.length),yt}},dt.flyweight=ht.reduce((mt,yt,vt,pt)=>(Object.defineProperty(mt,yt,{get(){return this.data[this.index*ht.length+vt]},set(_t){this.data[this.index*ht.length+vt]=_t}}),mt),{data:null,index:0}),{typeset:ot,measure:at}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(_e,_,tt,nt,rt,it,st,ot,at,lt,ct=!0){return ct?generateSDF_GL(_e,_,tt,nt,rt,it,st,ot,at,lt).then(null,ut=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",ut),warned=!0),generateSDF_JS_Worker(_e,_,tt,nt,rt,it,st,ot,at,lt))):generateSDF_JS_Worker(_e,_,tt,nt,rt,it,st,ot,at,lt)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const _e=now();for(;queue.length&&now()-_e<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(..._e)=>new Promise((_,tt)=>{queue.push(()=>{const nt=now();try{mainThreadGenerator.webgl.generateIntoCanvas(..._e),_({timing:now()-nt})}catch(rt){tt(rt)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(_e,_,tt,nt,rt,it,st,ot,at,lt){const ct="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let ut=threads[ct];return ut||(ut=threads[ct]={workerModule:defineWorkerModule({name:ct,workerId:ct,dependencies:[SDFGenerator,now],init(dt,ht){const mt=dt().javascript.generate;return function(...yt){const vt=ht();return{textureData:mt(...yt),timing:ht()-vt}}},getTransferables(dt){return[dt.textureData.buffer]}}),requests:0,idleTimer:null}),ut.requests++,clearTimeout(ut.idleTimer),ut.workerModule(_e,_,tt,nt,rt,it).then(({textureData:dt,timing:ht})=>{const mt=now(),yt=new Uint8Array(dt.length*4);for(let vt=0;vt<dt.length;vt++)yt[vt*4+lt]=dt[vt];return mainThreadGenerator.webglUtils.renderImageData(st,yt,ot,at,_e,_,1<<3-lt),ht+=now()-mt,--ut.requests===0&&(ut.idleTimer=setTimeout(()=>{terminateWorker(ct)},idleTimeout)),{timing:ht}})}function warmUpSDFCanvas(_e){_e._warm||(mainThreadGenerator.webgl.isSupported(_e),_e._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing,CONFIG={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color$1;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(_e,_){_e=assign$2({},_e);const tt=now$1(),{defaultFontURL:nt}=CONFIG,rt=[];if(nt&&rt.push({label:"default",src:toAbsoluteURL(nt)}),_e.font&&rt.push({label:"user",src:toAbsoluteURL(_e.font)}),_e.font=rt,_e.text=""+_e.text,_e.sdfGlyphSize=_e.sdfGlyphSize||CONFIG.sdfGlyphSize,_e.unicodeFontsURL=_e.unicodeFontsURL||CONFIG.unicodeFontsURL,_e.colorRanges!=null){let dt={};for(let ht in _e.colorRanges)if(_e.colorRanges.hasOwnProperty(ht)){let mt=_e.colorRanges[ht];typeof mt!="number"&&(mt=tempColor.set(mt).getHex()),dt[ht]=mt}_e.colorRanges=dt}Object.freeze(_e);const{textureWidth:it,sdfExponent:st}=CONFIG,{sdfGlyphSize:ot}=_e,at=it/ot*4;let lt=atlases[ot];if(!lt){const dt=document.createElement("canvas");dt.width=it,dt.height=ot*256/at,lt=atlases[ot]={glyphCount:0,sdfGlyphSize:ot,sdfCanvas:dt,sdfTexture:new Texture(dt,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},lt.sdfTexture.generateMipmaps=!1,initContextLossHandling(lt)}const{sdfTexture:ct,sdfCanvas:ut}=lt;typesetInWorker(_e).then(dt=>{const{glyphIds:ht,glyphFontIndices:mt,fontData:yt,glyphPositions:vt,fontSize:pt,timings:_t}=dt,xt=[],St=new Float32Array(ht.length*4);let At=0,bt=0;const Et=now$1(),wt=yt.map(Ft=>{let Ht=lt.glyphsByFont.get(Ft.src);return Ht||lt.glyphsByFont.set(Ft.src,Ht=new Map),Ht});ht.forEach((Ft,Ht)=>{const Kt=mt[Ht],{src:Wt,unitsPerEm:Jt}=yt[Kt];let Ot=wt[Kt].get(Ft);if(!Ot){const{path:Dt,pathBounds:It}=dt.glyphData[Wt][Ft],Ut=Math.max(It[2]-It[0],It[3]-It[1])/ot*(CONFIG.sdfMargin*ot+.5),Yt=lt.glyphCount++,qt=[It[0]-Ut,It[1]-Ut,It[2]+Ut,It[3]+Ut];wt[Kt].set(Ft,Ot={path:Dt,atlasIndex:Yt,sdfViewBox:qt}),xt.push(Ot)}const{sdfViewBox:kt}=Ot,Gt=vt[bt++],zt=vt[bt++],Vt=pt/Jt;St[At++]=Gt+kt[0]*Vt,St[At++]=zt+kt[1]*Vt,St[At++]=Gt+kt[2]*Vt,St[At++]=zt+kt[3]*Vt,ht[Ht]=Ot.atlasIndex}),_t.quads=(_t.quads||0)+(now$1()-Et);const Rt=now$1();_t.sdf={};const Tt=ut.height,Mt=Math.ceil(lt.glyphCount/at),Lt=Math.pow(2,Math.ceil(Math.log2(Mt*ot)));Lt>Tt&&(console.info(`Increasing SDF texture size ${Tt}->${Lt}`),resizeWebGLCanvasWithoutClearing(ut,it,Lt),ct.dispose()),Promise.all(xt.map(Ft=>generateGlyphSDF(Ft,lt,_e.gpuAccelerateSDF).then(({timing:Ht})=>{_t.sdf[Ft.atlasIndex]=Ht}))).then(()=>{xt.length&&!lt.contextLost&&(safariPre15Workaround(lt),ct.needsUpdate=!0),_t.sdfTotal=now$1()-Rt,_t.total=now$1()-tt,_(Object.freeze({parameters:_e,sdfTexture:ct,sdfGlyphSize:ot,sdfExponent:st,glyphBounds:St,glyphAtlasIndices:ht,glyphColors:dt.glyphColors,caretPositions:dt.caretPositions,chunkedBounds:dt.chunkedBounds,ascender:dt.ascender,descender:dt.descender,lineHeight:dt.lineHeight,capHeight:dt.capHeight,xHeight:dt.xHeight,topBaseline:dt.topBaseline,blockBounds:dt.blockBounds,visibleBounds:dt.visibleBounds,timings:dt.timings}))})}),Promise.resolve().then(()=>{lt.contextLost||warmUpSDFCanvas(ut)})}function generateGlyphSDF({path:_e,atlasIndex:_,sdfViewBox:tt},{sdfGlyphSize:nt,sdfCanvas:rt,contextLost:it},st){if(it)return Promise.resolve({timing:-1});const{textureWidth:ot,sdfExponent:at}=CONFIG,lt=Math.max(tt[2]-tt[0],tt[3]-tt[1]),ct=Math.floor(_/4),ut=ct%(ot/nt)*nt,dt=Math.floor(ct/(ot/nt))*nt,ht=_%4;return generateSDF(nt,nt,_e,tt,lt,at,rt,ut,dt,ht,st)}function initContextLossHandling(_e){const _=_e.sdfCanvas;_.addEventListener("webglcontextlost",tt=>{console.log("Context Lost",tt),tt.preventDefault(),_e.contextLost=!0}),_.addEventListener("webglcontextrestored",tt=>{console.log("Context Restored",tt),_e.contextLost=!1;const nt=[];_e.glyphsByFont.forEach(rt=>{rt.forEach(it=>{nt.push(generateGlyphSDF(it,_e,!0))})}),Promise.all(nt).then(()=>{safariPre15Workaround(_e),_e.sdfTexture.needsUpdate=!0})})}function preloadFont({font:_e,characters:_,sdfGlyphSize:tt},nt){let rt=Array.isArray(_)?_.join(`
`):""+_;getTextRenderInfo({font:_e,sdfGlyphSize:tt,text:rt},nt)}function assign$2(_e,_){for(let tt in _)_.hasOwnProperty(tt)&&(_e[tt]=_[tt]);return _e}let linkEl;function toAbsoluteURL(_e){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=_e,linkEl.href}function safariPre15Workaround(_e){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:_,sdfTexture:tt}=_e,{width:nt,height:rt}=_,it=_e.sdfCanvas.getContext("webgl");let st=tt.image.data;(!st||st.length!==nt*rt*4)&&(st=new Uint8Array(nt*rt*4),tt.image={width:nt,height:rt,data:st},tt.flipY=!1,tt.isDataTexture=!0),it.readPixels(0,0,nt,rt,it.RGBA,it.UNSIGNED_BYTE,st)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[createTypesetter,fontResolverWorkerModule,bidiFactory],init(_e,_,tt){return _e(_,tt())}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(_e){return function(_){return new Promise(tt=>{_e.typeset(_,tt)})}},getTransferables(_e){const _=[];for(let tt in _e)_e[tt]&&_e[tt].buffer&&_.push(_e[tt].buffer);return _}}),templateGeometries={};function getTemplateGeometry(_e){let _=templateGeometries[_e];if(!_){const tt=new PlaneGeometry(1,1,_e,_e),nt=tt.clone(),rt=tt.attributes,it=nt.attributes,st=new BufferGeometry,ot=rt.uv.count;for(let at=0;at<ot;at++)it.position.array[at*3]*=-1,it.normal.array[at*3+2]*=-1;["position","normal","uv"].forEach(at=>{st.setAttribute(at,new Float32BufferAttribute([...rt[at].array,...it[at].array],rt[at].itemSize))}),st.setIndex([...tt.index.array,...nt.index.array.map(at=>at+ot)]),st.translate(.5,.5,0),_=templateGeometries[_e]=st}return _}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(_){const tt=this.getIndex().count;this.setDrawRange(_===BackSide?tt/2:0,_===DoubleSide?tt:tt/2)}set detail(_){if(_!==this._detail){this._detail=_,(typeof _!="number"||_<1)&&(_=1);let tt=getTemplateGeometry(_);["position","normal","uv"].forEach(nt=>{this.attributes[nt]=tt.attributes[nt].clone()}),this.setIndex(tt.getIndex().clone())}}get detail(){return this._detail}set curveRadius(_){_!==this._curveRadius&&(this._curveRadius=_,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(_,tt,nt,rt,it){updateBufferAttr(this,glyphBoundsAttrName,_,4),updateBufferAttr(this,glyphIndexAttrName,tt,1),updateBufferAttr(this,glyphColorAttrName,it,3),this._blockBounds=nt,this._chunkedBounds=rt,this.instanceCount=tt.length,this._updateBounds()}_updateBounds(){const _=this._blockBounds;if(_){const{curveRadius:tt,boundingBox:nt}=this;if(tt){const{PI:rt,floor:it,min:st,max:ot,sin:at,cos:lt}=Math,ct=rt/2,ut=rt*2,dt=Math.abs(tt),ht=_[0]/dt,mt=_[2]/dt,yt=it((ht+ct)/ut)!==it((mt+ct)/ut)?-dt:st(at(ht)*dt,at(mt)*dt),vt=it((ht-ct)/ut)!==it((mt-ct)/ut)?dt:ot(at(ht)*dt,at(mt)*dt),pt=it((ht+rt)/ut)!==it((mt+rt)/ut)?dt*2:ot(dt-lt(ht)*dt,dt-lt(mt)*dt);nt.min.set(yt,_[1],tt<0?-pt:0),nt.max.set(vt,_[3],tt<0?0:pt)}else nt.min.set(_[0],_[1],0),nt.max.set(_[2],_[3],0);nt.getBoundingSphere(this.boundingSphere)}}applyClipRect(_){let tt=this.getAttribute(glyphIndexAttrName).count,nt=this._chunkedBounds;if(nt)for(let rt=nt.length;rt--;){tt=nt[rt].end;let it=nt[rt].rect;if(it[1]<_.w&&it[3]>_.y&&it[0]<_.z&&it[2]>_.x)break}this.instanceCount=tt}}function updateBufferAttr(_e,_,tt,nt){const rt=_e.getAttribute(_);tt?rt&&rt.array.length===tt.length?(rt.array.set(tt),rt.needsUpdate=!0):(_e.setAttribute(_,new InstancedBufferAttribute(tt,nt)),delete _e._maxInstanceCount,_e.dispose()):rt&&_e.deleteAttribute(_)}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(_e){const _=createDerivedMaterial(_e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color$1},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:tt,fragmentShader:nt}){let rt=/\buniform\s+vec3\s+diffuse\b/;return rt.test(nt)&&(nt=nt.replace(rt,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),rt.test(tt)||(tt=tt.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:tt,fragmentShader:nt}}});return _.transparent=!0,Object.defineProperties(_,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),_}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(_e){return Array.isArray(_e)?_e[0]:_e}let getFlatRaycastMesh=()=>{const _e=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>_e,_e},getCurvedRaycastMesh=()=>{const _e=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>_e,_e};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$1=class extends Mesh{constructor(){const _=new GlyphsGeometry;super(_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(_){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(_):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},tt=>{this._isSyncing=!1,this._textRenderInfo=tt,this.geometry.updateGlyphs(tt.glyphBounds,tt.glyphAtlasIndices,tt.blockBounds,tt.chunkedBounds,tt.glyphColors);const nt=this._queuedSyncs;nt&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{nt.forEach(rt=>rt&&rt())})),this.dispatchEvent(syncCompleteEvent),_&&_()})))}onBeforeRender(_,tt,nt,rt,it,st){this.sync(),it.isTroikaTextMaterial&&this._prepareForRender(it),it._hadOwnSide=it.hasOwnProperty("side"),this.geometry.setSide(it._actualSide=it.side),it.side=FrontSide}onAfterRender(_,tt,nt,rt,it,st){it._hadOwnSide?it.side=it._actualSide:delete it.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let _=this._derivedMaterial;const tt=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!_||_.baseMaterial!==tt)&&(_=this._derivedMaterial=createTextDerivedMaterial(tt),tt.addEventListener("dispose",function nt(){tt.removeEventListener("dispose",nt),_.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let nt=_._outlineMtl;return nt||(nt=_._outlineMtl=Object.create(_,{id:{value:_.id+.1}}),nt.isTextOutlineMaterial=!0,nt.depthWrite=!1,nt.map=null,_.addEventListener("dispose",function rt(){_.removeEventListener("dispose",rt),nt.dispose()})),[nt,_]}else return _}set material(_){_&&_.isTroikaTextMaterial?(this._derivedMaterial=_,this._baseMaterial=_.baseMaterial):this._baseMaterial=_}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(_){this.geometry.detail=_}get curveRadius(){return this.geometry.curveRadius}set curveRadius(_){this.geometry.curveRadius=_}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(_){const tt=_.isTextOutlineMaterial,nt=_.uniforms,rt=this.textRenderInfo;if(rt){const{sdfTexture:ot,blockBounds:at}=rt;nt.uTroikaSDFTexture.value=ot,nt.uTroikaSDFTextureSize.value.set(ot.image.width,ot.image.height),nt.uTroikaSDFGlyphSize.value=rt.sdfGlyphSize,nt.uTroikaSDFExponent.value=rt.sdfExponent,nt.uTroikaTotalBounds.value.fromArray(at),nt.uTroikaUseGlyphColors.value=!tt&&!!rt.glyphColors;let lt=0,ct=0,ut=0,dt,ht,mt,yt=0,vt=0;if(tt){let{outlineWidth:_t,outlineOffsetX:xt,outlineOffsetY:St,outlineBlur:At,outlineOpacity:bt}=this;lt=this._parsePercent(_t)||0,ct=Math.max(0,this._parsePercent(At)||0),dt=bt,yt=this._parsePercent(xt)||0,vt=this._parsePercent(St)||0}else ut=Math.max(0,this._parsePercent(this.strokeWidth)||0),ut&&(mt=this.strokeColor,nt.uTroikaStrokeColor.value.set(mt??defaultStrokeColor),ht=this.strokeOpacity,ht==null&&(ht=1)),dt=this.fillOpacity;nt.uTroikaDistanceOffset.value=lt,nt.uTroikaPositionOffset.value.set(yt,vt),nt.uTroikaBlurRadius.value=ct,nt.uTroikaStrokeWidth.value=ut,nt.uTroikaStrokeOpacity.value=ht,nt.uTroikaFillOpacity.value=dt??1,nt.uTroikaCurveRadius.value=this.curveRadius||0;let pt=this.clipRect;if(pt&&Array.isArray(pt)&&pt.length===4)nt.uTroikaClipRect.value.fromArray(pt);else{const _t=(this.fontSize||.1)*100;nt.uTroikaClipRect.value.set(at[0]-_t,at[1]-_t,at[2]+_t,at[3]+_t)}this.geometry.applyClipRect(nt.uTroikaClipRect.value)}nt.uTroikaSDFDebug.value=!!this.debugSDF,_.polygonOffset=!!this.depthOffset,_.polygonOffsetFactor=_.polygonOffsetUnits=this.depthOffset||0;const it=tt?this.outlineColor||0:this.color;if(it==null)delete _.color;else{const ot=_.hasOwnProperty("color")?_.color:_.color=new Color$1;(it!==ot._input||typeof it=="object")&&ot.set(ot._input=it)}let st=this.orientation||defaultOrient;if(st!==_._orientation){let ot=nt.uTroikaOrient.value;st=st.replace(/[^-+xyz]/g,"");let at=st!==defaultOrient&&st.match(/^([-+])([xyz])([-+])([xyz])$/);if(at){let[,lt,ct,ut,dt]=at;tempVec3a.set(0,0,0)[ct]=lt==="-"?1:-1,tempVec3b.set(0,0,0)[dt]=ut==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),ot.setFromMatrix4(tempMat4)}else ot.identity();_._orientation=st}}_parsePercent(_){if(typeof _=="string"){let tt=_.match(/^(-?[\d.]+)%$/),nt=tt?parseFloat(tt[1]):NaN;_=(isNaN(nt)?0:nt/100)*this.fontSize}return _}localPositionToTextCoords(_,tt=new Vector2){tt.copy(_);const nt=this.curveRadius;return nt&&(tt.x=Math.atan2(_.x,Math.abs(nt)-Math.abs(_.z))*Math.abs(nt)),tt}worldPositionToTextCoords(_,tt=new Vector2){return tempVec3a.copy(_),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),tt)}raycast(_,tt){const{textRenderInfo:nt,curveRadius:rt}=this;if(nt){const it=nt.blockBounds,st=rt?getCurvedRaycastMesh():getFlatRaycastMesh(),ot=st.geometry,{position:at,uv:lt}=ot.attributes;for(let ct=0;ct<lt.count;ct++){let ut=it[0]+lt.getX(ct)*(it[2]-it[0]);const dt=it[1]+lt.getY(ct)*(it[3]-it[1]);let ht=0;rt&&(ht=rt-Math.cos(ut/rt)*rt,ut=Math.sin(ut/rt)*rt),at.setXYZ(ct,ut,dt,ht)}ot.boundingSphere=this.geometry.boundingSphere,ot.boundingBox=this.geometry.boundingBox,st.matrixWorld=this.matrixWorld,st.material.side=this.material.side,tempArray.length=0,st.raycast(_,tempArray);for(let ct=0;ct<tempArray.length;ct++)tempArray[ct].object=this,tt.push(tempArray[ct])}}copy(_){const tt=this.geometry;return super.copy(_),this.geometry=tt,COPYABLE_PROPS.forEach(nt=>{this[nt]=_[nt]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(_e=>{const _="_private_"+_e;Object.defineProperty(Text$1.prototype,_e,{get(){return this[_]},set(tt){tt!==this[_]&&(this[_]=tt,this._needsSync=!0)}})});const Text=reactExports.forwardRef(({sdfGlyphSize:_e=64,anchorX:_="center",anchorY:tt="middle",font:nt,fontSize:rt=1,children:it,characters:st,onSync:ot,...at},lt)=>{const ct=useThree(({invalidate:mt})=>mt),[ut]=reactExports.useState(()=>new Text$1),[dt,ht]=reactExports.useMemo(()=>{const mt=[];let yt="";return reactExports.Children.forEach(it,vt=>{typeof vt=="string"||typeof vt=="number"?yt+=vt:mt.push(vt)}),[mt,yt]},[it]);return suspend(()=>new Promise(mt=>preloadFont({font:nt,characters:st},mt)),["troika-text",nt,st]),reactExports.useLayoutEffect(()=>void ut.sync(()=>{ct(),ot&&ot(ut)})),reactExports.useEffect(()=>()=>ut.dispose(),[ut]),reactExports.createElement("primitive",_extends$1({object:ut,ref:lt,font:nt,text:ht,anchorX:_,anchorY:tt,fontSize:rt,sdfGlyphSize:_e},at),dt)});function shaderMaterial(_e,_,tt,nt){const rt=class extends ShaderMaterial{constructor(st={}){const ot=Object.entries(_e);super({uniforms:ot.reduce((at,[lt,ct])=>{const ut=UniformsUtils.clone({[lt]:{value:ct}});return{...at,...ut}},{}),vertexShader:_,fragmentShader:tt}),this.key="",ot.forEach(([at])=>Object.defineProperty(this,at,{get:()=>this.uniforms[at].value,set:lt=>this.uniforms[at].value=lt})),Object.assign(this,st)}};return rt.key=MathUtils.generateUUID(),rt}const IsObject=_e=>_e===Object(_e)&&!Array.isArray(_e)&&typeof _e!="function";function useTexture(_e,_){const tt=useThree(it=>it.gl),nt=useLoader(TextureLoader,IsObject(_e)?Object.values(_e):_e);return reactExports.useLayoutEffect(()=>{_==null||_(nt)},[_]),reactExports.useEffect(()=>{if("initTexture"in tt){let it=[];Array.isArray(nt)?it=nt:nt instanceof Texture?it=[nt]:IsObject(nt)&&(it=Object.values(nt)),it.forEach(st=>{st instanceof Texture&&tt.initTexture(st)})}},[tt,nt]),reactExports.useMemo(()=>{if(IsObject(_e)){const it={};let st=0;for(const ot in _e)it[ot]=nt[st++];return it}else return nt},[_e,nt])}useTexture.preload=_e=>useLoader.preload(TextureLoader,_e);useTexture.clear=_e=>useLoader.clear(TextureLoader,_e);const getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version=getVersion();let dracoLoader=null,decoderPath="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function extensions(_e=!0,_=!0,tt){return nt=>{tt&&tt(nt),_e&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof _e=="string"?_e:decoderPath),nt.setDRACOLoader(dracoLoader)),_&&nt.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}const useGLTF=(_e,_,tt,nt)=>useLoader(GLTFLoader,_e,extensions(_,tt,nt));useGLTF.preload=(_e,_,tt,nt)=>useLoader.preload(GLTFLoader,_e,extensions(_,tt,nt));useGLTF.clear=_e=>useLoader.clear(GLTFLoader,_e);useGLTF.setDecoderPath=_e=>{decoderPath=_e};function useFBO(_e,_,tt){const nt=useThree(dt=>dt.size),rt=useThree(dt=>dt.viewport),it=typeof _e=="number"?_e:nt.width*rt.dpr,st=nt.height*rt.dpr,ot=(typeof _e=="number"?tt:_e)||{},{samples:at=0,depth:lt,...ct}=ot,ut=reactExports.useMemo(()=>{const dt=new WebGLRenderTarget(it,st,{minFilter:LinearFilter,magFilter:LinearFilter,type:HalfFloatType,...ct});return lt&&(dt.depthTexture=new DepthTexture(it,st,FloatType)),dt.samples=at,dt},[]);return reactExports.useLayoutEffect(()=>{ut.setSize(it,st),at&&(ut.samples=at)},[at,ut,it,st]),reactExports.useEffect(()=>()=>ut.dispose(),[]),ut}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _e(nt,rt,it,st,ot,at){if(at!==ReactPropTypesSecret){var lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw lt.name="Invariant Violation",lt}}_e.isRequired=_e;function _(){return _e}var tt={array:_e,bigint:_e,bool:_e,func:_e,number:_e,object:_e,string:_e,symbol:_e,any:_e,arrayOf:_,element:_e,elementType:_e,instanceOf:_,node:_e,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return tt.PropTypes=tt,tt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),LinearEncoding=3e3,sRGBEncoding=3001,DiscardMaterial=shaderMaterial({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class MeshTransmissionMaterialImpl extends MeshPhysicalMaterial{constructor(_=6,tt=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new Color$1("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=nt=>{nt.uniforms={...nt.uniforms,...this.uniforms},this.anisotropy>0&&(nt.defines.USE_ANISOTROPY=""),tt?nt.defines.USE_SAMPLER="":nt.defines.USE_TRANSMISSION="",nt.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float rand(float seed) {
        float result = randomBase(vec3(gl_FragCoord.xy, seed));
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+nt.fragmentShader,nt.fragmentShader=nt.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),nt.fragmentShader=nt.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        float runningSeed = 0.0;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand(runningSeed++);
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${_}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${_}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${_})) , material.thickness + thickness_smear * (i + randomCoords) / float(${_}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${_})), material.thickness + thickness_smear * (i + randomCoords) / float(${_}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${_}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(nt=>Object.defineProperty(this,nt,{get:()=>this.uniforms[nt].value,set:rt=>this.uniforms[nt].value=rt}))}}const MeshTransmissionMaterial=reactExports.forwardRef(({buffer:_e,transmissionSampler:_=!1,backside:tt=!1,side:nt=FrontSide,transmission:rt=1,thickness:it=0,backsideThickness:st=0,backsideEnvMapIntensity:ot=1,samples:at=10,resolution:lt,backsideResolution:ct,background:ut,anisotropy:dt,anisotropicBlur:ht,...mt},yt)=>{extend$2({MeshTransmissionMaterial:MeshTransmissionMaterialImpl});const vt=reactExports.useRef(null),[pt]=reactExports.useState(()=>new DiscardMaterial),_t=useFBO(ct||lt),xt=useFBO(lt);let St,At,bt,Et;return useFrame(wt=>{vt.current.time=wt.clock.getElapsedTime(),vt.current.buffer===xt.texture&&!_&&(Et=vt.current.__r3f.parent,Et&&(bt=wt.gl.toneMapping,St=wt.scene.background,At=vt.current.envMapIntensity,wt.gl.toneMapping=NoToneMapping,ut&&(wt.scene.background=ut),Et.material=pt,tt&&(wt.gl.setRenderTarget(_t),wt.gl.render(wt.scene,wt.camera),Et.material=vt.current,Et.material.buffer=_t.texture,Et.material.thickness=st,Et.material.side=BackSide,Et.material.envMapIntensity=ot),wt.gl.setRenderTarget(xt),wt.gl.render(wt.scene,wt.camera),Et.material=vt.current,Et.material.thickness=it,Et.material.side=nt,Et.material.buffer=xt.texture,Et.material.envMapIntensity=At,wt.scene.background=St,wt.gl.setRenderTarget(null),wt.gl.toneMapping=bt))}),reactExports.useImperativeHandle(yt,()=>vt.current,[]),reactExports.createElement("meshTransmissionMaterial",_extends$1({args:[at,_],ref:vt},mt,{buffer:_e||xt.texture,_transmission:rt,anisotropicBlur:ht??dt,transmission:_?rt:0,thickness:it,side:nt}))}),getBufferForType=(_e,_,tt)=>{let nt;switch(_e){case UnsignedByteType:nt=new Uint8ClampedArray(_*tt*4);break;case HalfFloatType:nt=new Uint16Array(_*tt*4);break;case UnsignedIntType:nt=new Uint32Array(_*tt*4);break;case ByteType:nt=new Int8Array(_*tt*4);break;case ShortType:nt=new Int16Array(_*tt*4);break;case IntType:nt=new Int32Array(_*tt*4);break;case FloatType:nt=new Float32Array(_*tt*4);break;default:throw new Error("Unsupported data type")}return nt};let _canReadPixelsResult;const canReadPixels=(_e,_,tt,nt)=>{if(_canReadPixelsResult!==void 0)return _canReadPixelsResult;const rt=new WebGLRenderTarget(1,1,nt);_.setRenderTarget(rt);const it=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16777215}));_.render(it,tt),_.setRenderTarget(null);const st=getBufferForType(_e,rt.width,rt.height);return _.readRenderTargetPixels(rt,0,0,rt.width,rt.height,st),rt.dispose(),it.geometry.dispose(),it.material.dispose(),_canReadPixelsResult=st[0]!==0,_canReadPixelsResult};class QuadRenderer{constructor(_){var tt,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,mt,yt,vt,pt;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(xt){throw this._renderer.setRenderTarget(null),xt}this._renderer.setRenderTarget(null)},this._width=_.width,this._height=_.height,this._type=_.type,this._colorSpace=_.colorSpace;const _t={format:RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((tt=_.renderTargetOptions)===null||tt===void 0?void 0:tt.anisotropy)!==void 0?(nt=_.renderTargetOptions)===null||nt===void 0?void 0:nt.anisotropy:1,generateMipmaps:((rt=_.renderTargetOptions)===null||rt===void 0?void 0:rt.generateMipmaps)!==void 0?(it=_.renderTargetOptions)===null||it===void 0?void 0:it.generateMipmaps:!1,magFilter:((st=_.renderTargetOptions)===null||st===void 0?void 0:st.magFilter)!==void 0?(ot=_.renderTargetOptions)===null||ot===void 0?void 0:ot.magFilter:LinearFilter,minFilter:((at=_.renderTargetOptions)===null||at===void 0?void 0:at.minFilter)!==void 0?(lt=_.renderTargetOptions)===null||lt===void 0?void 0:lt.minFilter:LinearFilter,samples:((ct=_.renderTargetOptions)===null||ct===void 0?void 0:ct.samples)!==void 0?(ut=_.renderTargetOptions)===null||ut===void 0?void 0:ut.samples:void 0,wrapS:((dt=_.renderTargetOptions)===null||dt===void 0?void 0:dt.wrapS)!==void 0?(ht=_.renderTargetOptions)===null||ht===void 0?void 0:ht.wrapS:ClampToEdgeWrapping,wrapT:((mt=_.renderTargetOptions)===null||mt===void 0?void 0:mt.wrapT)!==void 0?(yt=_.renderTargetOptions)===null||yt===void 0?void 0:yt.wrapT:ClampToEdgeWrapping};if(this._material=_.material,_.renderer?this._renderer=_.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Scene$1,this._camera=new OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!canReadPixels(this._type,this._renderer,this._camera,_t)){let xt;switch(this._type){case HalfFloatType:xt=this._renderer.extensions.has("EXT_color_buffer_float")?FloatType:void 0;break}xt!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`),this._type=xt):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mesh(new PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new WebGLRenderTarget(this.width,this.height,_t),this._renderTarget.texture.mapping=((vt=_.renderTargetOptions)===null||vt===void 0?void 0:vt.mapping)!==void 0?(pt=_.renderTargetOptions)===null||pt===void 0?void 0:pt.mapping:UVMapping}static instantiateRenderer(){const _=new WebGLRenderer;return _.setSize(128,128),_}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const _=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,_),_}toDataTexture(_){const tt=new DataTexture(this.toArray(),this.width,this.height,RGBAFormat,this._type,(_==null?void 0:_.mapping)||UVMapping,(_==null?void 0:_.wrapS)||ClampToEdgeWrapping,(_==null?void 0:_.wrapT)||ClampToEdgeWrapping,(_==null?void 0:_.magFilter)||LinearFilter,(_==null?void 0:_.minFilter)||LinearFilter,(_==null?void 0:_.anisotropy)||1,LinearSRGBColorSpace$1);return tt.generateMipmaps=(_==null?void 0:_.generateMipmaps)!==void 0?_==null?void 0:_.generateMipmaps:!1,tt}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(_){this.disposeOnDemandRenderer(),_&&this.renderTarget.dispose(),this.material instanceof ShaderMaterial&&Object.values(this.material.uniforms).forEach(tt=>{tt.value instanceof Texture&&tt.value.dispose()}),Object.values(this.material).forEach(tt=>{tt instanceof Texture&&tt.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(_){this._width=_,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(_){this._height=_,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(_){this._renderTarget=_,this._width=_.width,this._height=_.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const vertexShader=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class GainMapDecoderMaterial extends ShaderMaterial{constructor({gamma:_,offsetHdr:tt,offsetSdr:nt,gainMapMin:rt,gainMapMax:it,maxDisplayBoost:st,hdrCapacityMin:ot,hdrCapacityMax:at,sdr:lt,gainMap:ct}){super({name:"GainMapDecoderMaterial",vertexShader,fragmentShader,uniforms:{sdr:{value:lt},gainMap:{value:ct},gamma:{value:new Vector3(1/_[0],1/_[1],1/_[2])},offsetHdr:{value:new Vector3().fromArray(tt)},offsetSdr:{value:new Vector3().fromArray(nt)},gainMapMin:{value:new Vector3().fromArray(rt)},gainMapMax:{value:new Vector3().fromArray(it)},weightFactor:{value:(Math.log2(st)-ot)/(at-ot)}},blending:NoBlending,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=st,this._hdrCapacityMin=ot,this._hdrCapacityMax=at,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(_){this.uniforms.sdr.value=_}get gainMap(){return this.uniforms.gainMap.value}set gainMap(_){this.uniforms.gainMap.value=_}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(_){this.uniforms.offsetHdr.value.fromArray(_)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(_){this.uniforms.offsetSdr.value.fromArray(_)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(_){this.uniforms.gainMapMin.value.fromArray(_)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(_){this.uniforms.gainMapMax.value.fromArray(_)}get gamma(){const _=this.uniforms.gamma.value;return[1/_.x,1/_.y,1/_.z]}set gamma(_){const tt=this.uniforms.gamma.value;tt.x=1/_[0],tt.y=1/_[1],tt.z=1/_[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(_){this._hdrCapacityMin=_,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(_){this._hdrCapacityMax=_,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(_){this._maxDisplayBoost=Math.max(1,Math.min(65504,_)),this.calculateWeight()}calculateWeight(){const _=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,_))}}class GainMapNotFoundError extends Error{}class XMPMetadataNotFoundError extends Error{}const getAttribute=(_e,_,tt)=>{var nt;let rt;const it=(nt=_e.attributes.getNamedItem(_))===null||nt===void 0?void 0:nt.nodeValue;if(it)rt=it;else{const st=_e.getElementsByTagName(_)[0];if(st){const ot=st.getElementsByTagName("rdf:li");if(ot.length===3)rt=Array.from(ot).map(at=>at.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${_} but its length is not 3`)}else{if(tt)return tt;throw new Error(`Can't find ${_} in gainmap metadata`)}}return rt},extractXMP=_e=>{var _,tt;let nt;typeof TextDecoder<"u"?nt=new TextDecoder().decode(_e):nt=_e.toString();let rt=nt.indexOf("<x:xmpmeta");const it=new DOMParser;for(;rt!==-1;){const st=nt.indexOf("x:xmpmeta>",rt);nt.slice(rt,st+10);const ot=nt.slice(rt,st+10);try{const lt=it.parseFromString(ot,"text/xml").getElementsByTagName("rdf:Description")[0],ct=getAttribute(lt,"hdrgm:GainMapMin","0"),ut=getAttribute(lt,"hdrgm:GainMapMax"),dt=getAttribute(lt,"hdrgm:Gamma","1"),ht=getAttribute(lt,"hdrgm:OffsetSDR","0.015625"),mt=getAttribute(lt,"hdrgm:OffsetHDR","0.015625");let yt=(_=lt.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||_===void 0?void 0:_.nodeValue;yt||(yt="0");const vt=(tt=lt.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||tt===void 0?void 0:tt.nodeValue;if(!vt)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(ct)?ct.map(pt=>parseFloat(pt)):[parseFloat(ct),parseFloat(ct),parseFloat(ct)],gainMapMax:Array.isArray(ut)?ut.map(pt=>parseFloat(pt)):[parseFloat(ut),parseFloat(ut),parseFloat(ut)],gamma:Array.isArray(dt)?dt.map(pt=>parseFloat(pt)):[parseFloat(dt),parseFloat(dt),parseFloat(dt)],offsetSdr:Array.isArray(ht)?ht.map(pt=>parseFloat(pt)):[parseFloat(ht),parseFloat(ht),parseFloat(ht)],offsetHdr:Array.isArray(mt)?mt.map(pt=>parseFloat(pt)):[parseFloat(mt),parseFloat(mt),parseFloat(mt)],hdrCapacityMin:parseFloat(yt),hdrCapacityMax:parseFloat(vt)}}catch{}rt=nt.indexOf("<x:xmpmeta",st)}};class MPFExtractor{constructor(_){this.options={debug:_&&_.debug!==void 0?_.debug:!1,extractFII:_&&_.extractFII!==void 0?_.extractFII:!0,extractNonFII:_&&_.extractNonFII!==void 0?_.extractNonFII:!0}}extract(_){return new Promise((tt,nt)=>{const rt=this.options.debug,it=new DataView(_.buffer);if(it.getUint16(0)!==65496){nt(new Error("Not a valid jpeg"));return}const st=it.byteLength;let ot=2,at=0,lt;for(;ot<st;){if(++at>250){nt(new Error(`Found no marker after ${at} loops 😵`));return}if(it.getUint8(ot)!==255){nt(new Error(`Not a valid marker at offset 0x${ot.toString(16)}, found: 0x${it.getUint8(ot).toString(16)}`));return}if(lt=it.getUint8(ot+1),rt&&console.log(`Marker: ${lt.toString(16)}`),lt===226){rt&&console.log("Found APP2 marker (0xffe2)");const ct=ot+4;if(it.getUint32(ct)===1297106432){const ut=ct+4;let dt;if(it.getUint16(ut)===18761)dt=!1;else if(it.getUint16(ut)===19789)dt=!0;else{nt(new Error("No valid endianness marker found in TIFF header"));return}if(it.getUint16(ut+2,!dt)!==42){nt(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const ht=it.getUint32(ut+4,!dt);if(ht<8){nt(new Error("Not valid TIFF data! (First offset less than 8)"));return}const mt=ut+ht,yt=it.getUint16(mt,!dt),vt=mt+2;let pt=0;for(let At=vt;At<vt+12*yt;At+=12)it.getUint16(At,!dt)===45057&&(pt=it.getUint32(At+8,!dt));const xt=mt+2+yt*12+4,St=[];for(let At=xt;At<xt+pt*16;At+=16){const bt={MPType:it.getUint32(At,!dt),size:it.getUint32(At+4,!dt),dataOffset:it.getUint32(At+8,!dt),dependantImages:it.getUint32(At+12,!dt),start:-1,end:-1,isFII:!1};bt.dataOffset?(bt.start=ut+bt.dataOffset,bt.isFII=!1):(bt.start=0,bt.isFII=!0),bt.end=bt.start+bt.size,St.push(bt)}if(this.options.extractNonFII&&St.length){const At=new Blob([it]),bt=[];for(const Et of St){if(Et.isFII&&!this.options.extractFII)continue;const wt=At.slice(Et.start,Et.end+1,"image/jpeg");bt.push(wt)}tt(bt)}}}ot+=2+it.getUint16(ot+2)}})}}const extractGainmapFromJPEG=async _e=>{const _=extractXMP(_e);if(!_)throw new XMPMetadataNotFoundError("Gain map XMP metadata not found");const nt=await new MPFExtractor({extractFII:!0,extractNonFII:!0}).extract(_e);if(nt.length!==2)throw new GainMapNotFoundError("Gain map recovery image not found");return{sdr:new Uint8Array(await nt[0].arrayBuffer()),gainMap:new Uint8Array(await nt[1].arrayBuffer()),metadata:_}},getHTMLImageFromBlob=_e=>new Promise((_,tt)=>{const nt=document.createElement("img");nt.onload=()=>{_(nt)},nt.onerror=rt=>{tt(rt)},nt.src=URL.createObjectURL(_e)});class LoaderBase extends Loader{constructor(_,tt){super(tt),_&&(this._renderer=_),this._internalLoadingManager=new LoadingManager}setRenderer(_){return this._renderer=_,this}setRenderTargetOptions(_){return this._renderTargetOptions=_,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const _=new GainMapDecoderMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Texture,sdr:new Texture});return new QuadRenderer({width:16,height:16,type:HalfFloatType,colorSpace:LinearSRGBColorSpace$1,material:_,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(_,tt,nt,rt){const it=rt?new Blob([rt],{type:"image/jpeg"}):void 0,st=new Blob([nt],{type:"image/jpeg"});let ot,at,lt=!1;if(typeof createImageBitmap>"u"){const dt=await Promise.all([it?getHTMLImageFromBlob(it):Promise.resolve(void 0),getHTMLImageFromBlob(st)]);at=dt[0],ot=dt[1],lt=!0}else{const dt=await Promise.all([it?createImageBitmap(it,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(st,{imageOrientation:"flipY"})]);at=dt[0],ot=dt[1]}const ct=new Texture(at||new ImageData(2,2),UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,LinearSRGBColorSpace$1);ct.flipY=lt,ct.needsUpdate=!0;const ut=new Texture(ot,UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,SRGBColorSpace$1);ut.flipY=lt,ut.needsUpdate=!0,_.width=ot.width,_.height=ot.height,_.material.gainMap=ct,_.material.sdr=ut,_.material.gainMapMin=tt.gainMapMin,_.material.gainMapMax=tt.gainMapMax,_.material.offsetHdr=tt.offsetHdr,_.material.offsetSdr=tt.offsetSdr,_.material.gamma=tt.gamma,_.material.hdrCapacityMin=tt.hdrCapacityMin,_.material.hdrCapacityMax=tt.hdrCapacityMax,_.material.maxDisplayBoost=Math.pow(2,tt.hdrCapacityMax),_.material.needsUpdate=!0,_.render()}}class GainMapLoader extends LoaderBase{load([_,tt,nt],rt,it,st){const ot=this.prepareQuadRenderer();let at,lt,ct;const ut=async()=>{if(at&&lt&&ct){try{await this.render(ot,ct,at,lt)}catch(Rt){this.manager.itemError(_),this.manager.itemError(tt),this.manager.itemError(nt),typeof st=="function"&&st(Rt),ot.disposeOnDemandRenderer();return}typeof rt=="function"&&rt(ot),this.manager.itemEnd(_),this.manager.itemEnd(tt),this.manager.itemEnd(nt),ot.disposeOnDemandRenderer()}};let dt=!0,ht=0,mt=0,yt=!0,vt=0,pt=0,_t=!0,xt=0,St=0;const At=()=>{if(typeof it=="function"){const Rt=ht+vt+xt,Tt=mt+pt+St,Mt=dt&&yt&&_t;it(new ProgressEvent("progress",{lengthComputable:Mt,loaded:Tt,total:Rt}))}};this.manager.itemStart(_),this.manager.itemStart(tt),this.manager.itemStart(nt);const bt=new FileLoader(this._internalLoadingManager);bt.setResponseType("arraybuffer"),bt.setRequestHeader(this.requestHeader),bt.setPath(this.path),bt.setWithCredentials(this.withCredentials),bt.load(_,async Rt=>{if(typeof Rt=="string")throw new Error("Invalid sdr buffer");at=Rt,await ut()},Rt=>{dt=Rt.lengthComputable,mt=Rt.loaded,ht=Rt.total,At()},Rt=>{this.manager.itemError(_),typeof st=="function"&&st(Rt)});const Et=new FileLoader(this._internalLoadingManager);Et.setResponseType("arraybuffer"),Et.setRequestHeader(this.requestHeader),Et.setPath(this.path),Et.setWithCredentials(this.withCredentials),Et.load(tt,async Rt=>{if(typeof Rt=="string")throw new Error("Invalid gainmap buffer");lt=Rt,await ut()},Rt=>{yt=Rt.lengthComputable,pt=Rt.loaded,vt=Rt.total,At()},Rt=>{this.manager.itemError(tt),typeof st=="function"&&st(Rt)});const wt=new FileLoader(this._internalLoadingManager);return wt.setRequestHeader(this.requestHeader),wt.setPath(this.path),wt.setWithCredentials(this.withCredentials),wt.load(nt,async Rt=>{if(typeof Rt!="string")throw new Error("Invalid metadata string");ct=JSON.parse(Rt),await ut()},Rt=>{_t=Rt.lengthComputable,St=Rt.loaded,xt=Rt.total,At()},Rt=>{this.manager.itemError(nt),typeof st=="function"&&st(Rt)}),ot}}class HDRJPGLoader extends LoaderBase{load(_,tt,nt,rt){const it=this.prepareQuadRenderer(),st=new FileLoader(this._internalLoadingManager);return st.setResponseType("arraybuffer"),st.setRequestHeader(this.requestHeader),st.setPath(this.path),st.setWithCredentials(this.withCredentials),this.manager.itemStart(_),st.load(_,async ot=>{if(typeof ot=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const at=new Uint8Array(ot);let lt,ct,ut;try{const dt=await extractGainmapFromJPEG(at);lt=dt.sdr,ct=dt.gainMap,ut=dt.metadata}catch(dt){if(dt instanceof XMPMetadataNotFoundError||dt instanceof GainMapNotFoundError)console.warn(`Failure to reconstruct an HDR image from ${_}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),ut={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},lt=at;else throw dt}try{await this.render(it,ut,lt,ct)}catch(dt){this.manager.itemError(_),typeof rt=="function"&&rt(dt),it.disposeOnDemandRenderer();return}typeof tt=="function"&&tt(it),this.manager.itemEnd(_),it.disposeOnDemandRenderer()},nt,ot=>{this.manager.itemError(_),typeof rt=="function"&&rt(ot)}),it}}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=_e=>Array.isArray(_e),defaultFiles=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function useEnvironment({files:_e=defaultFiles,path:_="",preset:tt=void 0,encoding:nt=void 0,extensions:rt}={}){let it=null,st=!1;tt&&(validatePreset(tt),_e=presetsObj[tt],_=CUBEMAP_ROOT),st=isArray(_e);const{extension:ot,isCubemap:at}=getExtension(_e);if(it=getLoader(ot),!it)throw new Error("useEnvironment: Unrecognized file extension: "+_e);const lt=useThree(ht=>ht.gl);reactExports.useLayoutEffect(()=>{if(ot!=="webp"&&ot!=="jpg"&&ot!=="jpeg")return;function ht(){useLoader.clear(it,st?[_e]:_e)}lt.domElement.addEventListener("webglcontextlost",ht,{once:!0})},[_e,lt.domElement]);const ct=useLoader(it,st?[_e]:_e,ht=>{(ot==="webp"||ot==="jpg"||ot==="jpeg")&&ht.setRenderer(lt),ht.setPath==null||ht.setPath(_),rt&&rt(ht)});let ut=st?ct[0]:ct;if(ot==="jpg"||ot==="jpeg"||ot==="webp"){var dt;ut=(dt=ut.renderTarget)==null?void 0:dt.texture}return ut.mapping=at?CubeReflectionMapping:EquirectangularReflectionMapping,"colorSpace"in ut?ut.colorSpace=nt??at?"srgb":"srgb-linear":ut.encoding=nt??at?sRGBEncoding:LinearEncoding,ut}const preloadDefaultOptions={files:defaultFiles,path:"",preset:void 0,extensions:void 0};useEnvironment.preload=_e=>{const _={...preloadDefaultOptions,..._e};let{files:tt,path:nt=""}=_;const{preset:rt,extensions:it}=_;rt&&(validatePreset(rt),tt=presetsObj[rt],nt=CUBEMAP_ROOT);const{extension:st}=getExtension(tt);if(st==="webp"||st==="jpg"||st==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const ot=getLoader(st);if(!ot)throw new Error("useEnvironment: Unrecognized file extension: "+tt);useLoader.preload(ot,isArray(tt)?[tt]:tt,at=>{at.setPath==null||at.setPath(nt),it&&it(at)})};const clearDefaultOptins={files:defaultFiles,preset:void 0};useEnvironment.clear=_e=>{const _={...clearDefaultOptins,..._e};let{files:tt}=_;const{preset:nt}=_;nt&&(validatePreset(nt),tt=presetsObj[nt]);const{extension:rt}=getExtension(tt),it=getLoader(rt);if(!it)throw new Error("useEnvironment: Unrecognized file extension: "+tt);useLoader.clear(it,isArray(tt)?[tt]:tt)};function validatePreset(_e){if(!(_e in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "))}function getExtension(_e){var _;const tt=isArray(_e)&&_e.length===6,nt=isArray(_e)&&_e.length===3&&_e.some(st=>st.endsWith("json")),rt=isArray(_e)?_e[0]:_e;return{extension:tt?"cube":nt?"webp":rt.startsWith("data:application/exr")?"exr":rt.startsWith("data:application/hdr")?"hdr":rt.startsWith("data:image/jpeg")?"jpg":(_=rt.split(".").pop())==null||(_=_.split("?"))==null||(_=_.shift())==null?void 0:_.toLowerCase(),isCubemap:tt,isGainmap:nt}}function getLoader(_e){return _e==="cube"?CubeTextureLoader:_e==="hdr"?RGBELoader:_e==="exr"?EXRLoader:_e==="jpg"||_e==="jpeg"?HDRJPGLoader:_e==="webp"?GainMapLoader:null}const isRef=_e=>_e.current&&_e.current.isScene,resolveScene=_e=>isRef(_e)?_e.current:_e;function setEnvProps(_e,_,tt,nt,rt={}){var it,st,ot,at,lt;rt={backgroundBlurriness:(it=rt.blur)!==null&&it!==void 0?it:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...rt};const ct=resolveScene(_||tt),ut=ct.background,dt=ct.environment,ht={backgroundBlurriness:ct.backgroundBlurriness,backgroundIntensity:ct.backgroundIntensity,backgroundRotation:(st=(ot=ct.backgroundRotation)==null||ot.clone==null?void 0:ot.clone())!==null&&st!==void 0?st:[0,0,0],environmentIntensity:ct.environmentIntensity,environmentRotation:(at=(lt=ct.environmentRotation)==null||lt.clone==null?void 0:lt.clone())!==null&&at!==void 0?at:[0,0,0]};return _e!=="only"&&(ct.environment=nt),_e&&(ct.background=nt),applyProps(ct,rt),()=>{_e!=="only"&&(ct.environment=dt),_e&&(ct.background=ut),applyProps(ct,ht)}}function EnvironmentMap({scene:_e,background:_=!1,map:tt,...nt}){const rt=useThree(it=>it.scene);return reactExports.useLayoutEffect(()=>{if(tt)return setEnvProps(_,_e,rt,tt,nt)}),null}function EnvironmentCube({background:_e=!1,scene:_,blur:tt,backgroundBlurriness:nt,backgroundIntensity:rt,backgroundRotation:it,environmentIntensity:st,environmentRotation:ot,...at}){const lt=useEnvironment(at),ct=useThree(ut=>ut.scene);return reactExports.useLayoutEffect(()=>setEnvProps(_e,_,ct,lt,{blur:tt,backgroundBlurriness:nt,backgroundIntensity:rt,backgroundRotation:it,environmentIntensity:st,environmentRotation:ot})),null}function EnvironmentPortal({children:_e,near:_=1,far:tt=1e3,resolution:nt=256,frames:rt=1,map:it,background:st=!1,blur:ot,backgroundBlurriness:at,backgroundIntensity:lt,backgroundRotation:ct,environmentIntensity:ut,environmentRotation:dt,scene:ht,files:mt,path:yt,preset:vt=void 0,extensions:pt}){const _t=useThree(wt=>wt.gl),xt=useThree(wt=>wt.scene),St=reactExports.useRef(null),[At]=reactExports.useState(()=>new Scene$1),bt=reactExports.useMemo(()=>{const wt=new WebGLCubeRenderTarget(nt);return wt.texture.type=HalfFloatType,wt},[nt]);reactExports.useLayoutEffect(()=>(rt===1&&St.current.update(_t,At),setEnvProps(st,ht,xt,bt.texture,{blur:ot,backgroundBlurriness:at,backgroundIntensity:lt,backgroundRotation:ct,environmentIntensity:ut,environmentRotation:dt})),[_e,At,bt.texture,ht,xt,st,rt,_t]);let Et=1;return useFrame(()=>{(rt===1/0||Et<rt)&&(St.current.update(_t,At),Et++)}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,_e,reactExports.createElement("cubeCamera",{ref:St,args:[_,tt,bt]}),mt||vt?reactExports.createElement(EnvironmentCube,{background:!0,files:mt,preset:vt,path:yt,extensions:pt}):it?reactExports.createElement(EnvironmentMap,{background:!0,map:it,extensions:pt}):null),At))}function EnvironmentGround(_e){var _,tt,nt,rt;const it=useEnvironment(_e),st=_e.map||it;reactExports.useMemo(()=>extend$2({GroundProjectedEnvImpl:GroundProjectedEnv}),[]);const ot=reactExports.useMemo(()=>[st],[st]),at=(_=_e.ground)==null?void 0:_.height,lt=(tt=_e.ground)==null?void 0:tt.radius,ct=(nt=(rt=_e.ground)==null?void 0:rt.scale)!==null&&nt!==void 0?nt:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends$1({},_e,{map:st})),reactExports.createElement("groundProjectedEnvImpl",{args:ot,scale:ct,height:at,radius:lt}))}function Environment(_e){return _e.ground?reactExports.createElement(EnvironmentGround,_e):_e.map?reactExports.createElement(EnvironmentMap,_e):_e.children?reactExports.createElement(EnvironmentPortal,_e):reactExports.createElement(EnvironmentCube,_e)}class StarfieldMaterial extends ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const genStar=_e=>new Vector3().setFromSpherical(new Spherical(_e,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Stars$1=reactExports.forwardRef(({radius:_e=100,depth:_=50,count:tt=5e3,saturation:nt=0,factor:rt=4,fade:it=!1,speed:st=1},ot)=>{const at=reactExports.useRef(),[lt,ct,ut]=reactExports.useMemo(()=>{const ht=[],mt=[],yt=Array.from({length:tt},()=>(.5+.5*Math.random())*rt),vt=new Color$1;let pt=_e+_;const _t=_/tt;for(let xt=0;xt<tt;xt++)pt-=_t*Math.random(),ht.push(...genStar(pt).toArray()),vt.setHSL(xt/tt,nt,.9),mt.push(vt.r,vt.g,vt.b);return[new Float32Array(ht),new Float32Array(mt),new Float32Array(yt)]},[tt,_,rt,_e,nt]);useFrame(ht=>at.current&&(at.current.uniforms.time.value=ht.clock.getElapsedTime()*st));const[dt]=reactExports.useState(()=>new StarfieldMaterial);return reactExports.createElement("points",{ref:ot},reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",args:[lt,3]}),reactExports.createElement("bufferAttribute",{attach:"attributes-color",args:[ct,3]}),reactExports.createElement("bufferAttribute",{attach:"attributes-size",args:[ut,1]})),reactExports.createElement("primitive",{ref:at,object:dt,attach:"material",blending:AdditiveBlending,"uniforms-fade-value":it,depthWrite:!1,transparent:!0,vertexColors:!0}))});let i$3,positionRef;const context=reactExports.createContext(null),parentMatrix=new Matrix4,position=new Vector3,PointsInstances=reactExports.forwardRef(({children:_e,range:_,limit:tt=1e3,...nt},rt)=>{const it=reactExports.useRef(null);reactExports.useImperativeHandle(rt,()=>it.current,[]);const[st,ot]=reactExports.useState([]),[[at,lt,ct]]=reactExports.useState(()=>[new Float32Array(tt*3),Float32Array.from({length:tt*3},()=>1),Float32Array.from({length:tt},()=>1)]);reactExports.useEffect(()=>{it.current.geometry.attributes.position.needsUpdate=!0}),useFrame(()=>{for(it.current.updateMatrix(),it.current.updateMatrixWorld(),parentMatrix.copy(it.current.matrixWorld).invert(),it.current.geometry.drawRange.count=Math.min(tt,_!==void 0?_:tt,st.length),i$3=0;i$3<st.length;i$3++)positionRef=st[i$3].current,positionRef.getWorldPosition(position).applyMatrix4(parentMatrix),position.toArray(at,i$3*3),it.current.geometry.attributes.position.needsUpdate=!0,positionRef.matrixWorldNeedsUpdate=!0,positionRef.color.toArray(lt,i$3*3),it.current.geometry.attributes.color.needsUpdate=!0,ct.set([positionRef.size],i$3),it.current.geometry.attributes.size.needsUpdate=!0});const ut=reactExports.useMemo(()=>({getParent:()=>it,subscribe:dt=>(ot(ht=>[...ht,dt]),()=>ot(ht=>ht.filter(mt=>mt.current!==dt.current)))}),[]);return reactExports.createElement("points",_extends$1({userData:{instances:st},matrixAutoUpdate:!1,ref:it,raycast:()=>null},nt),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",count:at.length/3,array:at,itemSize:3,usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-color",count:lt.length/3,array:lt,itemSize:3,usage:DynamicDrawUsage}),reactExports.createElement("bufferAttribute",{attach:"attributes-size",count:ct.length,array:ct,itemSize:1,usage:DynamicDrawUsage})),reactExports.createElement(context.Provider,{value:ut},_e))}),PointsBuffer=reactExports.forwardRef(({children:_e,positions:_,colors:tt,sizes:nt,stride:rt=3,...it},st)=>{const ot=reactExports.useRef(null);return reactExports.useImperativeHandle(st,()=>ot.current,[]),useFrame(()=>{const at=ot.current.geometry.attributes;at.position.needsUpdate=!0,tt&&(at.color.needsUpdate=!0),nt&&(at.size.needsUpdate=!0)}),reactExports.createElement("points",_extends$1({ref:ot},it),reactExports.createElement("bufferGeometry",null,reactExports.createElement("bufferAttribute",{attach:"attributes-position",count:_.length/rt,array:_,itemSize:rt,usage:DynamicDrawUsage}),tt&&reactExports.createElement("bufferAttribute",{attach:"attributes-color",count:tt.length/rt,array:tt,itemSize:3,usage:DynamicDrawUsage}),nt&&reactExports.createElement("bufferAttribute",{attach:"attributes-size",count:nt.length/rt,array:nt,itemSize:1,usage:DynamicDrawUsage})),_e)}),Points=reactExports.forwardRef((_e,_)=>_e.positions instanceof Float32Array?reactExports.createElement(PointsBuffer,_extends$1({},_e,{ref:_})):reactExports.createElement(PointsInstances,_extends$1({},_e,{ref:_})));function setRef(_e,_){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)}function composeRefs(..._e){return _=>_e.forEach(tt=>setRef(tt,_))}function useComposedRefs(..._e){return reactExports.useCallback(composeRefs(..._e),_e)}var Slot=reactExports.forwardRef((_e,_)=>{const{children:tt,...nt}=_e,rt=reactExports.Children.toArray(tt),it=rt.find(isSlottable);if(it){const st=it.props.children,ot=rt.map(at=>at===it?reactExports.Children.count(st)>1?reactExports.Children.only(null):reactExports.isValidElement(st)?st.props.children:null:at);return jsxRuntimeExports.jsx(SlotClone,{...nt,ref:_,children:reactExports.isValidElement(st)?reactExports.cloneElement(st,void 0,ot):null})}return jsxRuntimeExports.jsx(SlotClone,{...nt,ref:_,children:tt})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_e,_)=>{const{children:tt,...nt}=_e;if(reactExports.isValidElement(tt)){const rt=getElementRef$1(tt);return reactExports.cloneElement(tt,{...mergeProps(nt,tt.props),ref:_?composeRefs(_,rt):rt})}return reactExports.Children.count(tt)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e});function isSlottable(_e){return reactExports.isValidElement(_e)&&_e.type===Slottable}function mergeProps(_e,_){const tt={..._};for(const nt in _){const rt=_e[nt],it=_[nt];/^on[A-Z]/.test(nt)?rt&&it?tt[nt]=(...ot)=>{it(...ot),rt(...ot)}:rt&&(tt[nt]=rt):nt==="style"?tt[nt]={...rt,...it}:nt==="className"&&(tt[nt]=[rt,it].filter(Boolean).join(" "))}return{..._e,...tt}}function getElementRef$1(_e){var nt,rt;let _=(nt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:nt.get,tt=_&&"isReactWarning"in _&&_.isReactWarning;return tt?_e.ref:(_=(rt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:rt.get,tt=_&&"isReactWarning"in _&&_.isReactWarning,tt?_e.props.ref:_e.props.ref||_e.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_e,_)=>{const tt=reactExports.forwardRef((nt,rt)=>{const{asChild:it,...st}=nt,ot=it?Slot:_;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(ot,{...st,ref:rt})});return tt.displayName=`Primitive.${_}`,{..._e,[_]:tt}},{});function dispatchDiscreteCustomEvent(_e,_){_e&&reactDomExports.flushSync(()=>_e.dispatchEvent(_))}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((_e,_)=>{var ot;const{container:tt,...nt}=_e,[rt,it]=reactExports.useState(!1);useLayoutEffect2(()=>it(!0),[]);const st=tt||rt&&((ot=globalThis==null?void 0:globalThis.document)==null?void 0:ot.body);return st?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...nt,ref:_}),st):null});Portal$1.displayName=PORTAL_NAME$1;var Root$2=Portal$1,has=Object.prototype.hasOwnProperty;function dequal(_e,_){var tt,nt;if(_e===_)return!0;if(_e&&_&&(tt=_e.constructor)===_.constructor){if(tt===Date)return _e.getTime()===_.getTime();if(tt===RegExp)return _e.toString()===_.toString();if(tt===Array){if((nt=_e.length)===_.length)for(;nt--&&dequal(_e[nt],_[nt]););return nt===-1}if(!tt||typeof _e=="object"){nt=0;for(tt in _e)if(has.call(_e,tt)&&++nt&&!has.call(_,tt)||!(tt in _)||!dequal(_e[tt],_[tt]))return!1;return Object.keys(_).length===nt}}return _e!==_e&&_!==_}var Rule=function(_,tt,nt,rt){this.name=_,this.fn=tt,this.args=nt,this.modifiers=rt};Rule.prototype._test=function(_){var tt=this.fn;try{testAux(this.modifiers.slice(),tt,this)(_)}catch{tt=function(){return!1}}try{return testAux(this.modifiers.slice(),tt,this)(_)}catch{return!1}};Rule.prototype._check=function(_){try{testAux(this.modifiers.slice(),this.fn,this)(_)}catch{if(testAux(this.modifiers.slice(),function(nt){return nt},this)(!1))return}if(!testAux(this.modifiers.slice(),this.fn,this)(_))throw null};Rule.prototype._testAsync=function(_){var tt=this;return new Promise(function(nt,rt){testAsyncAux(tt.modifiers.slice(),tt.fn,tt)(_).then(function(it){it?nt(_):rt(null)}).catch(function(it){return rt(it)})})};function pickFn(_e,_){return _===void 0&&(_="simple"),typeof _e=="object"?_e[_]:_e}function testAux(_e,_,tt){if(_e.length){var nt=_e.shift(),rt=testAux(_e,_,tt);return nt.perform(rt,tt)}else return pickFn(_)}function testAsyncAux(_e,_,tt){if(_e.length){var nt=_e.shift(),rt=testAsyncAux(_e,_,tt);return nt.performAsync(rt,tt)}else return function(it){return Promise.resolve(pickFn(_,"async")(it))}}var Modifier=function(_,tt,nt){this.name=_,this.perform=tt,this.performAsync=nt},ValidationError=function(_e){function _(tt,nt,rt,it){for(var st=[],ot=arguments.length-4;ot-- >0;)st[ot]=arguments[ot+4];_e.call(this,st),_e.captureStackTrace&&_e.captureStackTrace(this,_),this.rule=tt,this.value=nt,this.cause=rt,this.target=it}return _e&&(_.__proto__=_e),_.prototype=Object.create(_e&&_e.prototype),_.prototype.constructor=_,_}(Error),Context=function(_,tt){_===void 0&&(_=[]),tt===void 0&&(tt=[]),this.chain=_,this.nextRuleModifiers=tt};Context.prototype._applyRule=function(_,tt){var nt=this;return function(){for(var rt=[],it=arguments.length;it--;)rt[it]=arguments[it];return nt.chain.push(new Rule(tt,_.apply(nt,rt),rt,nt.nextRuleModifiers)),nt.nextRuleModifiers=[],nt}};Context.prototype._applyModifier=function(_,tt){return this.nextRuleModifiers.push(new Modifier(tt,_.simple,_.async)),this};Context.prototype._clone=function(){return new Context(this.chain.slice(),this.nextRuleModifiers.slice())};Context.prototype.test=function(_){return this.chain.every(function(tt){return tt._test(_)})};Context.prototype.testAll=function(_){var tt=[];return this.chain.forEach(function(nt){try{nt._check(_)}catch(rt){tt.push(new ValidationError(nt,_,rt))}}),tt};Context.prototype.check=function(_){this.chain.forEach(function(tt){try{tt._check(_)}catch(nt){throw new ValidationError(tt,_,nt)}})};Context.prototype.testAsync=function(_){var tt=this;return new Promise(function(nt,rt){executeAsyncRules(_,tt.chain.slice(),nt,rt)})};function executeAsyncRules(_e,_,tt,nt){if(_.length){var rt=_.shift();rt._testAsync(_e).then(function(){executeAsyncRules(_e,_,tt,nt)},function(it){nt(new ValidationError(rt,_e,it))})}else tt(_e)}var consideredEmpty=function(_e,_){return _&&typeof _e=="string"&&_e.trim().length===0?!0:_e==null};function optional(_e,_){return _===void 0&&(_=!1),{simple:function(tt){return consideredEmpty(tt,_)||_e.check(tt)===void 0},async:function(tt){return consideredEmpty(tt,_)||_e.testAsync(tt)}}}function v8n(){return typeof Proxy<"u"?proxyContext(new Context):proxylessContext(new Context)}var customRules={};v8n.extend=function(_e){Object.assign(customRules,_e)};v8n.clearCustomRules=function(){customRules={}};function proxyContext(_e){return new Proxy(_e,{get:function(tt,nt){if(nt in tt)return tt[nt];var rt=proxyContext(_e._clone());if(nt in availableModifiers)return rt._applyModifier(availableModifiers[nt],nt);if(nt in customRules)return rt._applyRule(customRules[nt],nt);if(nt in availableRules)return rt._applyRule(availableRules[nt],nt)}})}function proxylessContext(_e){var _=function(rt,it){return Object.keys(rt).forEach(function(st){it[st]=function(){for(var ot=[],at=arguments.length;at--;)ot[at]=arguments[at];var lt=proxylessContext(it._clone()),ct=lt._applyRule(rt[st],st).apply(void 0,ot);return ct}}),it},tt=_(availableRules,_e),nt=_(customRules,tt);return Object.keys(availableModifiers).forEach(function(rt){Object.defineProperty(nt,rt,{get:function(){var it=proxylessContext(nt._clone());return it._applyModifier(availableModifiers[rt],rt)}})}),nt}var availableModifiers={not:{simple:function(_e){return function(_){return!_e(_)}},async:function(_e){return function(_){return Promise.resolve(_e(_)).then(function(tt){return!tt}).catch(function(){return!0})}}},some:{simple:function(_e){return function(_){return split$1(_).some(function(tt){try{return _e(tt)}catch{return!1}})}},async:function(_e){return function(_){return Promise.all(split$1(_).map(function(tt){try{return _e(tt).catch(function(){return!1})}catch{return!1}})).then(function(tt){return tt.some(Boolean)})}}},every:{simple:function(_e){return function(_){return _!==!1&&split$1(_).every(_e)}},async:function(_e){return function(_){return Promise.all(split$1(_).map(_e)).then(function(tt){return tt.every(Boolean)})}}},strict:{simple:function(_e,_){return function(tt){return isSchemaRule(_)&&tt&&typeof tt=="object"?Object.keys(_.args[0]).length===Object.keys(tt).length&&_e(tt):_e(tt)}},async:function(_e,_){return function(tt){return Promise.resolve(_e(tt)).then(function(nt){return isSchemaRule(_)&&tt&&typeof tt=="object"?Object.keys(_.args[0]).length===Object.keys(tt).length&&nt:nt}).catch(function(){return!1})}}}};function isSchemaRule(_e){return _e&&_e.name==="schema"&&_e.args.length>0&&typeof _e.args[0]=="object"}function split$1(_e){return typeof _e=="string"?_e.split(""):_e}var availableRules={equal:function(_e){return function(_){return _==_e}},exact:function(_e){return function(_){return _===_e}},number:function(_e){return _e===void 0&&(_e=!0),function(_){return typeof _=="number"&&(_e||isFinite(_))}},integer:function(){return function(_e){var _=Number.isInteger||isIntegerPolyfill;return _(_e)}},numeric:function(){return function(_e){return!isNaN(parseFloat(_e))&&isFinite(_e)}},string:function(){return testType("string")},boolean:function(){return testType("boolean")},undefined:function(){return testType("undefined")},null:function(){return testType("null")},array:function(){return testType("array")},object:function(){return testType("object")},instanceOf:function(_e){return function(_){return _ instanceof _e}},pattern:function(_e){return function(_){return _e.test(_)}},lowercase:function(){return function(_e){return typeof _e=="boolean"||_e===_e.toLowerCase()&&_e.trim()!==""}},uppercase:function(){return function(_e){return _e===_e.toUpperCase()&&_e.trim()!==""}},vowel:function(){return function(_e){return/^[aeiou]+$/i.test(_e)}},consonant:function(){return function(_e){return/^(?=[^aeiou])([a-z]+)$/i.test(_e)}},first:function(_e){return function(_){return _[0]==_e}},last:function(_e){return function(_){return _[_.length-1]==_e}},empty:function(){return function(_e){return _e.length===0}},length:function(_e,_){return function(tt){return tt.length>=_e&&tt.length<=(_||_e)}},minLength:function(_e){return function(_){return _.length>=_e}},maxLength:function(_e){return function(_){return _.length<=_e}},negative:function(){return function(_e){return _e<0}},positive:function(){return function(_e){return _e>=0}},between:function(_e,_){return function(tt){return tt>=_e&&tt<=_}},range:function(_e,_){return function(tt){return tt>=_e&&tt<=_}},lessThan:function(_e){return function(_){return _<_e}},lessThanOrEqual:function(_e){return function(_){return _<=_e}},greaterThan:function(_e){return function(_){return _>_e}},greaterThanOrEqual:function(_e){return function(_){return _>=_e}},even:function(){return function(_e){return _e%2===0}},odd:function(){return function(_e){return _e%2!==0}},includes:function(_e){return function(_){return~_.indexOf(_e)}},schema:function(_e){return testSchema(_e)},passesAnyOf:function(){for(var _e=[],_=arguments.length;_--;)_e[_]=arguments[_];return function(tt){return _e.some(function(nt){return nt.test(tt)})}},optional};function testType(_e){return function(_){return Array.isArray(_)&&_e==="array"||_===null&&_e==="null"||typeof _===_e}}function isIntegerPolyfill(_e){return typeof _e=="number"&&isFinite(_e)&&Math.floor(_e)===_e}function testSchema(_e){return{simple:function(_){var tt=[];if(Object.keys(_e).forEach(function(nt){var rt=_e[nt];try{rt.check((_||{})[nt])}catch(it){it.target=nt,tt.push(it)}}),tt.length>0)throw tt;return!0},async:function(_){var tt=[],nt=Object.keys(_e).map(function(rt){var it=_e[rt];return it.testAsync((_||{})[rt]).catch(function(st){st.target=rt,tt.push(st)})});return Promise.all(nt).then(function(){if(tt.length>0)throw tt;return!0})}}}var e$1="colors",t$1="sizes",r$1="space",n$1={gap:r$1,gridGap:r$1,columnGap:r$1,gridColumnGap:r$1,rowGap:r$1,gridRowGap:r$1,inset:r$1,insetBlock:r$1,insetBlockEnd:r$1,insetBlockStart:r$1,insetInline:r$1,insetInlineEnd:r$1,insetInlineStart:r$1,margin:r$1,marginTop:r$1,marginRight:r$1,marginBottom:r$1,marginLeft:r$1,marginBlock:r$1,marginBlockEnd:r$1,marginBlockStart:r$1,marginInline:r$1,marginInlineEnd:r$1,marginInlineStart:r$1,padding:r$1,paddingTop:r$1,paddingRight:r$1,paddingBottom:r$1,paddingLeft:r$1,paddingBlock:r$1,paddingBlockEnd:r$1,paddingBlockStart:r$1,paddingInline:r$1,paddingInlineEnd:r$1,paddingInlineStart:r$1,top:r$1,right:r$1,bottom:r$1,left:r$1,scrollMargin:r$1,scrollMarginTop:r$1,scrollMarginRight:r$1,scrollMarginBottom:r$1,scrollMarginLeft:r$1,scrollMarginX:r$1,scrollMarginY:r$1,scrollMarginBlock:r$1,scrollMarginBlockEnd:r$1,scrollMarginBlockStart:r$1,scrollMarginInline:r$1,scrollMarginInlineEnd:r$1,scrollMarginInlineStart:r$1,scrollPadding:r$1,scrollPaddingTop:r$1,scrollPaddingRight:r$1,scrollPaddingBottom:r$1,scrollPaddingLeft:r$1,scrollPaddingX:r$1,scrollPaddingY:r$1,scrollPaddingBlock:r$1,scrollPaddingBlockEnd:r$1,scrollPaddingBlockStart:r$1,scrollPaddingInline:r$1,scrollPaddingInlineEnd:r$1,scrollPaddingInlineStart:r$1,fontSize:"fontSizes",background:e$1,backgroundColor:e$1,backgroundImage:e$1,borderImage:e$1,border:e$1,borderBlock:e$1,borderBlockEnd:e$1,borderBlockStart:e$1,borderBottom:e$1,borderBottomColor:e$1,borderColor:e$1,borderInline:e$1,borderInlineEnd:e$1,borderInlineStart:e$1,borderLeft:e$1,borderLeftColor:e$1,borderRight:e$1,borderRightColor:e$1,borderTop:e$1,borderTopColor:e$1,caretColor:e$1,color:e$1,columnRuleColor:e$1,fill:e$1,outline:e$1,outlineColor:e$1,stroke:e$1,textDecorationColor:e$1,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t$1,minBlockSize:t$1,maxBlockSize:t$1,inlineSize:t$1,minInlineSize:t$1,maxInlineSize:t$1,width:t$1,minWidth:t$1,maxWidth:t$1,height:t$1,minHeight:t$1,maxHeight:t$1,flexBasis:t$1,gridTemplateColumns:t$1,gridTemplateRows:t$1,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i$2=(_e,_)=>typeof _=="function"?{"()":Function.prototype.toString.call(_)}:_,o$1=()=>{const _e=Object.create(null);return(_,tt,...nt)=>{const rt=(it=>JSON.stringify(it,i$2))(_);return rt in _e?_e[rt]:_e[rt]=tt(_,...nt)}},l$1=Symbol.for("sxs.internal"),s$2=(_e,_)=>Object.defineProperties(_e,Object.getOwnPropertyDescriptors(_)),a$1=_e=>{for(const _ in _e)return!0;return!1},{hasOwnProperty:c$2}=Object.prototype,d$2=_e=>_e.includes("-")?_e:_e.replace(/[A-Z]/g,_=>"-"+_.toLowerCase()),g$2=/\s+(?![^()]*\))/,p$2=_e=>_=>_e(...typeof _=="string"?String(_).split(g$2):[_]),u$2={appearance:_e=>({WebkitAppearance:_e,appearance:_e}),backfaceVisibility:_e=>({WebkitBackfaceVisibility:_e,backfaceVisibility:_e}),backdropFilter:_e=>({WebkitBackdropFilter:_e,backdropFilter:_e}),backgroundClip:_e=>({WebkitBackgroundClip:_e,backgroundClip:_e}),boxDecorationBreak:_e=>({WebkitBoxDecorationBreak:_e,boxDecorationBreak:_e}),clipPath:_e=>({WebkitClipPath:_e,clipPath:_e}),content:_e=>({content:_e.includes('"')||_e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(_e)?_e:`"${_e}"`}),hyphens:_e=>({WebkitHyphens:_e,hyphens:_e}),maskImage:_e=>({WebkitMaskImage:_e,maskImage:_e}),maskSize:_e=>({WebkitMaskSize:_e,maskSize:_e}),tabSize:_e=>({MozTabSize:_e,tabSize:_e}),textSizeAdjust:_e=>({WebkitTextSizeAdjust:_e,textSizeAdjust:_e}),userSelect:_e=>({WebkitUserSelect:_e,userSelect:_e}),marginBlock:p$2((_e,_)=>({marginBlockStart:_e,marginBlockEnd:_||_e})),marginInline:p$2((_e,_)=>({marginInlineStart:_e,marginInlineEnd:_||_e})),maxSize:p$2((_e,_)=>({maxBlockSize:_e,maxInlineSize:_||_e})),minSize:p$2((_e,_)=>({minBlockSize:_e,minInlineSize:_||_e})),paddingBlock:p$2((_e,_)=>({paddingBlockStart:_e,paddingBlockEnd:_||_e})),paddingInline:p$2((_e,_)=>({paddingInlineStart:_e,paddingInlineEnd:_||_e}))},h$2=/([\d.]+)([^]*)/,f$2=(_e,_)=>_e.length?_e.reduce((tt,nt)=>(tt.push(..._.map(rt=>rt.includes("&")?rt.replace(/&/g,/[ +>|~]/.test(nt)&&/&.*&/.test(rt)?`:is(${nt})`:nt):nt+" "+rt)),tt),[]):_,m$2=(_e,_)=>_e in b$2&&typeof _=="string"?_.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(tt,nt,rt,it)=>nt+(rt==="stretch"?`-moz-available${it};${d$2(_e)}:${nt}-webkit-fill-available`:`-moz-fit-content${it};${d$2(_e)}:${nt}fit-content`)+it):String(_),b$2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$2=_e=>_e?_e+"-":"",k$2=(_e,_,tt)=>_e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(nt,rt,it,st,ot)=>st=="$"==!!it?nt:(rt||st=="--"?"calc(":"")+"var(--"+(st==="$"?S$2(_)+(ot.includes("$")?"":S$2(tt))+ot.replace(/\$/g,"-"):ot)+")"+(rt||st=="--"?"*"+(rt||"")+(it||"1")+")":"")),y$2=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$$2=(_e,_,tt,nt,rt)=>{let it,st,ot;const at=(lt,ct,ut)=>{let dt,ht;const mt=yt=>{for(dt in yt){const _t=dt.charCodeAt(0)===64,xt=_t&&Array.isArray(yt[dt])?yt[dt]:[yt[dt]];for(ht of xt){const St=/[A-Z]/.test(pt=dt)?pt:pt.replace(/-[^]/g,bt=>bt[1].toUpperCase()),At=typeof ht=="object"&&ht&&ht.toString===B&&(!nt.utils[St]||!ct.length);if(St in nt.utils&&!At){const bt=nt.utils[St];if(bt!==st){st=bt,mt(bt(ht)),st=null;continue}}else if(St in u$2){const bt=u$2[St];if(bt!==ot){ot=bt,mt(bt(ht)),ot=null;continue}}if(_t&&(vt=dt.slice(1)in nt.media?"@media "+nt.media[dt.slice(1)]:dt,dt=vt.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(bt,Et,wt,Rt,Tt,Mt)=>{const Lt=h$2.test(Et),Ft=.0625*(Lt?-1:1),[Ht,Kt]=Lt?[Rt,Et]:[Et,Rt];return"("+(wt[0]==="="?"":wt[0]===">"===Lt?"max-":"min-")+Ht+":"+(wt[0]!=="="&&wt.length===1?Kt.replace(h$2,(Wt,Jt,Ot)=>Number(Jt)+Ft*(wt===">"?1:-1)+Ot):Kt)+(Tt?") and ("+(Tt[0]===">"?"min-":"max-")+Ht+":"+(Tt.length===1?Mt.replace(h$2,(Wt,Jt,Ot)=>Number(Jt)+Ft*(Tt===">"?-1:1)+Ot):Mt):"")+")"})),At){const bt=_t?ut.concat(dt):[...ut],Et=_t?[...ct]:f$2(ct,dt.split(y$2));it!==void 0&&rt(x$1(...it)),it=void 0,at(ht,Et,bt)}else it===void 0&&(it=[[],ct,ut]),dt=_t||dt.charCodeAt(0)!==36?dt:`--${S$2(nt.prefix)}${dt.slice(1).replace(/\$/g,"-")}`,ht=At?ht:typeof ht=="number"?ht&&St in I$2?String(ht)+"px":String(ht):k$2(m$2(St,ht??""),nt.prefix,nt.themeMap[St]),it[0].push(`${_t?`${dt} `:`${d$2(dt)}:`}${ht}`)}}var vt,pt};mt(lt),it!==void 0&&rt(x$1(...it)),it=void 0};at(_e,_,tt)},x$1=(_e,_,tt)=>`${tt.map(nt=>`${nt}{`).join("")}${_.length?`${_.join(",")}{`:""}${_e.join(";")}${_.length?"}":""}${Array(tt.length?tt.length+1:0).join("}")}`,I$2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R=_e=>String.fromCharCode(_e+(_e>25?39:97)),z=_e=>(_=>{let tt,nt="";for(tt=Math.abs(_);tt>52;tt=tt/52|0)nt=R(tt%52)+nt;return R(tt%52)+nt})(((_,tt)=>{let nt=tt.length;for(;nt;)_=33*_^tt.charCodeAt(--nt);return _})(5381,JSON.stringify(_e))>>>0),W=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=_e=>{if(_e.href&&!_e.href.startsWith(location.origin))return!1;try{return!!_e.cssRules}catch{return!1}},E=_e=>{let _;const tt=()=>{const{cssRules:rt}=_.sheet;return[].map.call(rt,(it,st)=>{const{cssText:ot}=it;let at="";if(ot.startsWith("--sxs"))return"";if(rt[st-1]&&(at=rt[st-1].cssText).startsWith("--sxs")){if(!it.cssRules.length)return"";for(const lt in _.rules)if(_.rules[lt].group===it)return`--sxs{--sxs:${[..._.rules[lt].cache].join(" ")}}${ot}`;return it.cssRules.length?`${at}${ot}`:""}return ot}).join("")},nt=()=>{if(_){const{rules:ot,sheet:at}=_;if(!at.deleteRule){for(;Object(Object(at.cssRules)[0]).type===3;)at.cssRules.splice(0,1);at.cssRules=[]}for(const lt in ot)delete ot[lt]}const rt=Object(_e).styleSheets||[];for(const ot of rt)if(j$1(ot)){for(let at=0,lt=ot.cssRules;lt[at];++at){const ct=Object(lt[at]);if(ct.type!==1)continue;const ut=Object(lt[at+1]);if(ut.type!==4)continue;++at;const{cssText:dt}=ct;if(!dt.startsWith("--sxs"))continue;const ht=dt.slice(14,-3).trim().split(/\s+/),mt=W[ht[0]];mt&&(_||(_={sheet:ot,reset:nt,rules:{},toString:tt}),_.rules[mt]={group:ut,index:at,cache:new Set(ht)})}if(_)break}if(!_){const ot=(at,lt)=>({type:lt,cssRules:[],insertRule(ct,ut){this.cssRules.splice(ut,0,ot(ct,{import:3,undefined:1}[(ct.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return at==="@media{}"?`@media{${[].map.call(this.cssRules,ct=>ct.cssText).join("")}}`:at}});_={sheet:_e?(_e.head||_e).appendChild(document.createElement("style")).sheet:ot("","text/css"),rules:{},reset:nt,toString:tt}}const{sheet:it,rules:st}=_;for(let ot=W.length-1;ot>=0;--ot){const at=W[ot];if(!st[at]){const lt=W[ot+1],ct=st[lt]?st[lt].index:it.cssRules.length;it.insertRule("@media{}",ct),it.insertRule(`--sxs{--sxs:${ot}}`,ct),st[at]={group:it.cssRules[ct+1],index:ct,cache:new Set([ot])}}v$2(st[at])}};return nt(),_},v$2=_e=>{const _=_e.group;let tt=_.cssRules.length;_e.apply=nt=>{try{_.insertRule(nt,tt),++tt}catch{}}},T$1=Symbol(),w$1=o$1(),M$1=(_e,_)=>w$1(_e,()=>(...tt)=>{let nt={type:null,composers:new Set};for(const rt of tt)if(rt!=null)if(rt[l$1]){nt.type==null&&(nt.type=rt[l$1].type);for(const it of rt[l$1].composers)nt.composers.add(it)}else rt.constructor!==Object||rt.$$typeof?nt.type==null&&(nt.type=rt):nt.composers.add(C(rt,_e));return nt.type==null&&(nt.type="span"),nt.composers.size||nt.composers.add(["PJLV",{},[],[],{},[]]),P(_e,nt,_)}),C=({variants:_e,compoundVariants:_,defaultVariants:tt,...nt},rt)=>{const it=`${S$2(rt.prefix)}c-${z(nt)}`,st=[],ot=[],at=Object.create(null),lt=[];for(const dt in tt)at[dt]=String(tt[dt]);if(typeof _e=="object"&&_e)for(const dt in _e){ct=at,ut=dt,c$2.call(ct,ut)||(at[dt]="undefined");const ht=_e[dt];for(const mt in ht){const yt={[dt]:String(mt)};String(mt)==="undefined"&&lt.push(dt);const vt=ht[mt],pt=[yt,vt,!a$1(vt)];st.push(pt)}}var ct,ut;if(typeof _=="object"&&_)for(const dt of _){let{css:ht,...mt}=dt;ht=typeof ht=="object"&&ht||{};for(const vt in mt)mt[vt]=String(mt[vt]);const yt=[mt,ht,!a$1(ht)];ot.push(yt)}return[it,nt,st,ot,at,lt]},P=(_e,_,tt)=>{const[nt,rt,it,st]=L$1(_.composers),ot=typeof _.type=="function"||_.type.$$typeof?(ut=>{function dt(){for(let ht=0;ht<dt[T$1].length;ht++){const[mt,yt]=dt[T$1][ht];ut.rules[mt].apply(yt)}return dt[T$1]=[],null}return dt[T$1]=[],dt.rules={},W.forEach(ht=>dt.rules[ht]={apply:mt=>dt[T$1].push([ht,mt])}),dt})(tt):null,at=(ot||tt).rules,lt=`.${nt}${rt.length>1?`:where(.${rt.slice(1).join(".")})`:""}`,ct=ut=>{ut=typeof ut=="object"&&ut||A;const{css:dt,...ht}=ut,mt={};for(const pt in it)if(delete ht[pt],pt in ut){let _t=ut[pt];typeof _t=="object"&&_t?mt[pt]={"@initial":it[pt],..._t}:(_t=String(_t),mt[pt]=_t!=="undefined"||st.has(pt)?_t:it[pt])}else mt[pt]=it[pt];const yt=new Set([...rt]);for(const[pt,_t,xt,St]of _.composers){tt.rules.styled.cache.has(pt)||(tt.rules.styled.cache.add(pt),$$2(_t,[`.${pt}`],[],_e,Et=>{at.styled.apply(Et)}));const At=O(xt,mt,_e.media),bt=O(St,mt,_e.media,!0);for(const Et of At)if(Et!==void 0)for(const[wt,Rt,Tt]of Et){const Mt=`${pt}-${z(Rt)}-${wt}`;yt.add(Mt);const Lt=(Tt?tt.rules.resonevar:tt.rules.onevar).cache,Ft=Tt?at.resonevar:at.onevar;Lt.has(Mt)||(Lt.add(Mt),$$2(Rt,[`.${Mt}`],[],_e,Ht=>{Ft.apply(Ht)}))}for(const Et of bt)if(Et!==void 0)for(const[wt,Rt]of Et){const Tt=`${pt}-${z(Rt)}-${wt}`;yt.add(Tt),tt.rules.allvar.cache.has(Tt)||(tt.rules.allvar.cache.add(Tt),$$2(Rt,[`.${Tt}`],[],_e,Mt=>{at.allvar.apply(Mt)}))}}if(typeof dt=="object"&&dt){const pt=`${nt}-i${z(dt)}-css`;yt.add(pt),tt.rules.inline.cache.has(pt)||(tt.rules.inline.cache.add(pt),$$2(dt,[`.${pt}`],[],_e,_t=>{at.inline.apply(_t)}))}for(const pt of String(ut.className||"").trim().split(/\s+/))pt&&yt.add(pt);const vt=ht.className=[...yt].join(" ");return{type:_.type,className:vt,selector:lt,props:ht,toString:()=>vt,deferredInjector:ot}};return s$2(ct,{className:nt,selector:lt,[l$1]:_,toString:()=>(tt.rules.styled.cache.has(nt)||ct(),nt)})},L$1=_e=>{let _="";const tt=[],nt={},rt=[];for(const[it,,,,st,ot]of _e){_===""&&(_=it),tt.push(it),rt.push(...ot);for(const at in st){const lt=st[at];(nt[at]===void 0||lt!=="undefined"||ot.includes(lt))&&(nt[at]=lt)}}return[_,tt,nt,new Set(rt)]},O=(_e,_,tt,nt)=>{const rt=[];e:for(let[it,st,ot]of _e){if(ot)continue;let at,lt=0,ct=!1;for(at in it){const ut=it[at];let dt=_[at];if(dt!==ut){if(typeof dt!="object"||!dt)continue e;{let ht,mt,yt=0;for(const vt in dt){if(ut===String(dt[vt])){if(vt!=="@initial"){const pt=vt.slice(1);(mt=mt||[]).push(pt in tt?tt[pt]:vt.replace(/^@media ?/,"")),ct=!0}lt+=yt,ht=!0}++yt}if(mt&&mt.length&&(st={["@media "+mt.join(", ")]:st}),!ht)continue e}}}(rt[lt]=rt[lt]||[]).push([nt?"cv":`${at}-${it[at]}`,st,ct])}return rt},A={},N$1=o$1(),D=(_e,_)=>N$1(_e,()=>(...tt)=>{const nt=()=>{for(let rt of tt){rt=typeof rt=="object"&&rt||{};let it=z(rt);if(!_.rules.global.cache.has(it)){if(_.rules.global.cache.add(it),"@import"in rt){let st=[].indexOf.call(_.sheet.cssRules,_.rules.themed.group)-1;for(let ot of[].concat(rt["@import"]))ot=ot.includes('"')||ot.includes("'")?ot:`"${ot}"`,_.sheet.insertRule(`@import ${ot};`,st++);delete rt["@import"]}$$2(rt,[],[],_e,st=>{_.rules.global.apply(st)})}}return""};return s$2(nt,{toString:nt})}),H$1=o$1(),V$1=(_e,_)=>H$1(_e,()=>tt=>{const nt=`${S$2(_e.prefix)}k-${z(tt)}`,rt=()=>{if(!_.rules.global.cache.has(nt)){_.rules.global.cache.add(nt);const it=[];$$2(tt,[],[],_e,ot=>it.push(ot));const st=`@keyframes ${nt}{${it.join("")}}`;_.rules.global.apply(st)}return nt};return s$2(rt,{get name(){return rt()},toString:rt})}),G=class{constructor(_e,_,tt,nt){this.token=_e==null?"":String(_e),this.value=_==null?"":String(_),this.scale=tt==null?"":String(tt),this.prefix=nt==null?"":String(nt)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$2(this.prefix)+S$2(this.scale)+this.token}toString(){return this.computedValue}},F$1=o$1(),J$1=(_e,_)=>F$1(_e,()=>(tt,nt)=>{nt=typeof tt=="object"&&tt||Object(nt);const rt=`.${tt=(tt=typeof tt=="string"?tt:"")||`${S$2(_e.prefix)}t-${z(nt)}`}`,it={},st=[];for(const at in nt){it[at]={};for(const lt in nt[at]){const ct=`--${S$2(_e.prefix)}${at}-${lt}`,ut=k$2(String(nt[at][lt]),_e.prefix,at);it[at][lt]=new G(lt,ut,at,_e.prefix),st.push(`${ct}:${ut}`)}}const ot=()=>{if(st.length&&!_.rules.themed.cache.has(tt)){_.rules.themed.cache.add(tt);const at=`${nt===_e.theme?":root,":""}.${tt}{${st.join(";")}}`;_.rules.themed.apply(at)}return tt};return{...it,get className(){return ot()},selector:rt,toString:ot}}),U$1=o$1(),Y$1=o$1(),q$1=_e=>{const _=(tt=>{let nt=!1;const rt=U$1(tt,it=>{nt=!0;const st="prefix"in(it=typeof it=="object"&&it||{})?String(it.prefix):"",ot=typeof it.media=="object"&&it.media||{},at=typeof it.root=="object"?it.root||null:globalThis.document||null,lt=typeof it.theme=="object"&&it.theme||{},ct={prefix:st,media:ot,theme:lt,themeMap:typeof it.themeMap=="object"&&it.themeMap||{...n$1},utils:typeof it.utils=="object"&&it.utils||{}},ut=E(at),dt={css:M$1(ct,ut),globalCss:D(ct,ut),keyframes:V$1(ct,ut),createTheme:J$1(ct,ut),reset(){ut.reset(),dt.theme.toString()},theme:{},sheet:ut,config:ct,prefix:st,getCssText:ut.toString,toString:ut.toString};return String(dt.theme=dt.createTheme(lt)),dt});return nt||rt.reset(),rt})(_e);return _.styled=(({config:tt,sheet:nt})=>Y$1(tt,()=>{const rt=M$1(tt,nt);return(...it)=>{const st=rt(...it),ot=st[l$1].type,at=React.forwardRef((lt,ct)=>{const ut=lt&&lt.as||ot,{props:dt,deferredInjector:ht}=st(lt);return delete dt.as,dt.ref=ct,ht?React.createElement(React.Fragment,null,React.createElement(ut,dt),React.createElement(ht,null)):React.createElement(ut,dt)});return at.className=st.className,at.displayName=`Styled.${ot.displayName||ot.name||ot}`,at.selector=st.selector,at.toString=()=>st.selector,at[l$1]=st[l$1],at}}))(_),_};function composeEventHandlers$1(_e,_,{checkForDefaultPrevented:tt=!0}={}){return function(rt){if(_e==null||_e(rt),tt===!1||!rt.defaultPrevented)return _==null?void 0:_(rt)}}function createContextScope$1(_e,_=[]){let tt=[];function nt(it,st){const ot=reactExports.createContext(st),at=tt.length;tt=[...tt,st];const lt=ut=>{var pt;const{scope:dt,children:ht,...mt}=ut,yt=((pt=dt==null?void 0:dt[_e])==null?void 0:pt[at])||ot,vt=reactExports.useMemo(()=>mt,Object.values(mt));return jsxRuntimeExports.jsx(yt.Provider,{value:vt,children:ht})};lt.displayName=it+"Provider";function ct(ut,dt){var yt;const ht=((yt=dt==null?void 0:dt[_e])==null?void 0:yt[at])||ot,mt=reactExports.useContext(ht);if(mt)return mt;if(st!==void 0)return st;throw new Error(`\`${ut}\` must be used within \`${it}\``)}return[lt,ct]}const rt=()=>{const it=tt.map(st=>reactExports.createContext(st));return function(ot){const at=(ot==null?void 0:ot[_e])||it;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:at}}),[ot,at])}};return rt.scopeName=_e,[nt,composeContextScopes$1(rt,..._)]}function composeContextScopes$1(..._e){const _=_e[0];if(_e.length===1)return _;const tt=()=>{const nt=_e.map(rt=>({useScope:rt(),scopeName:rt.scopeName}));return function(it){const st=nt.reduce((ot,{useScope:at,scopeName:lt})=>{const ut=at(it)[`__scope${lt}`];return{...ot,...ut}},{});return reactExports.useMemo(()=>({[`__scope${_.scopeName}`]:st}),[st])}};return tt.scopeName=_.scopeName,tt}function useCallbackRef(_e){const _=reactExports.useRef(_e);return reactExports.useEffect(()=>{_.current=_e}),reactExports.useMemo(()=>(...tt)=>{var nt;return(nt=_.current)==null?void 0:nt.call(_,...tt)},[])}function useEscapeKeydown(_e,_=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef(_e);reactExports.useEffect(()=>{const nt=rt=>{rt.key==="Escape"&&tt(rt)};return _.addEventListener("keydown",nt,{capture:!0}),()=>_.removeEventListener("keydown",nt,{capture:!0})},[tt,_])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_e,_)=>{const{disableOutsidePointerEvents:tt=!1,onEscapeKeyDown:nt,onPointerDownOutside:rt,onFocusOutside:it,onInteractOutside:st,onDismiss:ot,...at}=_e,lt=reactExports.useContext(DismissableLayerContext),[ct,ut]=reactExports.useState(null),dt=(ct==null?void 0:ct.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ht]=reactExports.useState({}),mt=useComposedRefs(_,Et=>ut(Et)),yt=Array.from(lt.layers),[vt]=[...lt.layersWithOutsidePointerEventsDisabled].slice(-1),pt=yt.indexOf(vt),_t=ct?yt.indexOf(ct):-1,xt=lt.layersWithOutsidePointerEventsDisabled.size>0,St=_t>=pt,At=usePointerDownOutside(Et=>{const wt=Et.target,Rt=[...lt.branches].some(Tt=>Tt.contains(wt));!St||Rt||(rt==null||rt(Et),st==null||st(Et),Et.defaultPrevented||ot==null||ot())},dt),bt=useFocusOutside(Et=>{const wt=Et.target;[...lt.branches].some(Tt=>Tt.contains(wt))||(it==null||it(Et),st==null||st(Et),Et.defaultPrevented||ot==null||ot())},dt);return useEscapeKeydown(Et=>{_t===lt.layers.size-1&&(nt==null||nt(Et),!Et.defaultPrevented&&ot&&(Et.preventDefault(),ot()))},dt),reactExports.useEffect(()=>{if(ct)return tt&&(lt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=dt.body.style.pointerEvents,dt.body.style.pointerEvents="none"),lt.layersWithOutsidePointerEventsDisabled.add(ct)),lt.layers.add(ct),dispatchUpdate(),()=>{tt&&lt.layersWithOutsidePointerEventsDisabled.size===1&&(dt.body.style.pointerEvents=originalBodyPointerEvents)}},[ct,dt,tt,lt]),reactExports.useEffect(()=>()=>{ct&&(lt.layers.delete(ct),lt.layersWithOutsidePointerEventsDisabled.delete(ct),dispatchUpdate())},[ct,lt]),reactExports.useEffect(()=>{const Et=()=>ht({});return document.addEventListener(CONTEXT_UPDATE,Et),()=>document.removeEventListener(CONTEXT_UPDATE,Et)},[]),jsxRuntimeExports.jsx(Primitive.div,{...at,ref:mt,style:{pointerEvents:xt?St?"auto":"none":void 0,..._e.style},onFocusCapture:composeEventHandlers$1(_e.onFocusCapture,bt.onFocusCapture),onBlurCapture:composeEventHandlers$1(_e.onBlurCapture,bt.onBlurCapture),onPointerDownCapture:composeEventHandlers$1(_e.onPointerDownCapture,At.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_e,_)=>{const tt=reactExports.useContext(DismissableLayerContext),nt=reactExports.useRef(null),rt=useComposedRefs(_,nt);return reactExports.useEffect(()=>{const it=nt.current;if(it)return tt.branches.add(it),()=>{tt.branches.delete(it)}},[tt.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._e,ref:rt})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_e,_=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef(_e),nt=reactExports.useRef(!1),rt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const it=ot=>{if(ot.target&&!nt.current){let at=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,tt,lt,{discrete:!0})};const lt={originalEvent:ot};ot.pointerType==="touch"?(_.removeEventListener("click",rt.current),rt.current=at,_.addEventListener("click",rt.current,{once:!0})):at()}else _.removeEventListener("click",rt.current);nt.current=!1},st=window.setTimeout(()=>{_.addEventListener("pointerdown",it)},0);return()=>{window.clearTimeout(st),_.removeEventListener("pointerdown",it),_.removeEventListener("click",rt.current)}},[_,tt]),{onPointerDownCapture:()=>nt.current=!0}}function useFocusOutside(_e,_=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef(_e),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=it=>{it.target&&!nt.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,tt,{originalEvent:it},{discrete:!1})};return _.addEventListener("focusin",rt),()=>_.removeEventListener("focusin",rt)},[_,tt]),{onFocusCapture:()=>nt.current=!0,onBlurCapture:()=>nt.current=!1}}function dispatchUpdate(){const _e=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_e)}function handleAndDispatchCustomEvent(_e,_,tt,{discrete:nt}){const rt=tt.originalEvent.target,it=new CustomEvent(_e,{bubbles:!1,cancelable:!0,detail:tt});_&&rt.addEventListener(_e,_,{once:!0}),nt?dispatchDiscreteCustomEvent(rt,it):rt.dispatchEvent(it)}var useReactId=React$1.useId||(()=>{}),count=0;function useId(_e){const[_,tt]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{tt(nt=>nt??String(count++))},[_e]),_?`radix-${_}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,_,tt){return max(_e,min(_,tt))}function evaluate$1(_e,_){return typeof _e=="function"?_e(_):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,_,tt){tt===void 0&&(tt=!1);const nt=getAlignment(_e),rt=getAlignmentAxis(_e),it=getAxisLength(rt);let st=rt==="x"?nt===(tt?"end":"start")?"right":"left":nt==="start"?"bottom":"top";return _.reference[it]>_.floating[it]&&(st=getOppositePlacement(st)),[st,getOppositePlacement(st)]}function getExpandedPlacements(_e){const _=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(_e,_,tt){const nt=["left","right"],rt=["right","left"],it=["top","bottom"],st=["bottom","top"];switch(_e){case"top":case"bottom":return tt?_?rt:nt:_?nt:rt;case"left":case"right":return _?it:st;default:return[]}}function getOppositeAxisPlacements(_e,_,tt,nt){const rt=getAlignment(_e);let it=getSideList(getSide(_e),tt==="start",nt);return rt&&(it=it.map(st=>st+"-"+rt),_&&(it=it.concat(it.map(getOppositeAlignmentPlacement)))),it}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:_,y:tt,width:nt,height:rt}=_e;return{width:nt,height:rt,top:tt,left:_,right:_+nt,bottom:tt+rt,x:_,y:tt}}function computeCoordsFromPlacement(_e,_,tt){let{reference:nt,floating:rt}=_e;const it=getSideAxis(_),st=getAlignmentAxis(_),ot=getAxisLength(st),at=getSide(_),lt=it==="y",ct=nt.x+nt.width/2-rt.width/2,ut=nt.y+nt.height/2-rt.height/2,dt=nt[ot]/2-rt[ot]/2;let ht;switch(at){case"top":ht={x:ct,y:nt.y-rt.height};break;case"bottom":ht={x:ct,y:nt.y+nt.height};break;case"right":ht={x:nt.x+nt.width,y:ut};break;case"left":ht={x:nt.x-rt.width,y:ut};break;default:ht={x:nt.x,y:nt.y}}switch(getAlignment(_)){case"start":ht[st]-=dt*(tt&&lt?-1:1);break;case"end":ht[st]+=dt*(tt&&lt?-1:1);break}return ht}const computePosition$1=async(_e,_,tt)=>{const{placement:nt="bottom",strategy:rt="absolute",middleware:it=[],platform:st}=tt,ot=it.filter(Boolean),at=await(st.isRTL==null?void 0:st.isRTL(_));let lt=await st.getElementRects({reference:_e,floating:_,strategy:rt}),{x:ct,y:ut}=computeCoordsFromPlacement(lt,nt,at),dt=nt,ht={},mt=0;for(let yt=0;yt<ot.length;yt++){const{name:vt,fn:pt}=ot[yt],{x:_t,y:xt,data:St,reset:At}=await pt({x:ct,y:ut,initialPlacement:nt,placement:dt,strategy:rt,middlewareData:ht,rects:lt,platform:st,elements:{reference:_e,floating:_}});ct=_t??ct,ut=xt??ut,ht={...ht,[vt]:{...ht[vt],...St}},At&&mt<=50&&(mt++,typeof At=="object"&&(At.placement&&(dt=At.placement),At.rects&&(lt=At.rects===!0?await st.getElementRects({reference:_e,floating:_,strategy:rt}):At.rects),{x:ct,y:ut}=computeCoordsFromPlacement(lt,dt,at)),yt=-1)}return{x:ct,y:ut,placement:dt,strategy:rt,middlewareData:ht}};async function detectOverflow(_e,_){var tt;_===void 0&&(_={});const{x:nt,y:rt,platform:it,rects:st,elements:ot,strategy:at}=_e,{boundary:lt="clippingAncestors",rootBoundary:ct="viewport",elementContext:ut="floating",altBoundary:dt=!1,padding:ht=0}=evaluate$1(_,_e),mt=getPaddingObject(ht),vt=ot[dt?ut==="floating"?"reference":"floating":ut],pt=rectToClientRect(await it.getClippingRect({element:(tt=await(it.isElement==null?void 0:it.isElement(vt)))==null||tt?vt:vt.contextElement||await(it.getDocumentElement==null?void 0:it.getDocumentElement(ot.floating)),boundary:lt,rootBoundary:ct,strategy:at})),_t=ut==="floating"?{x:nt,y:rt,width:st.floating.width,height:st.floating.height}:st.reference,xt=await(it.getOffsetParent==null?void 0:it.getOffsetParent(ot.floating)),St=await(it.isElement==null?void 0:it.isElement(xt))?await(it.getScale==null?void 0:it.getScale(xt))||{x:1,y:1}:{x:1,y:1},At=rectToClientRect(it.convertOffsetParentRelativeRectToViewportRelativeRect?await it.convertOffsetParentRelativeRectToViewportRelativeRect({elements:ot,rect:_t,offsetParent:xt,strategy:at}):_t);return{top:(pt.top-At.top+mt.top)/St.y,bottom:(At.bottom-pt.bottom+mt.bottom)/St.y,left:(pt.left-At.left+mt.left)/St.x,right:(At.right-pt.right+mt.right)/St.x}}const arrow$3=_e=>({name:"arrow",options:_e,async fn(_){const{x:tt,y:nt,placement:rt,rects:it,platform:st,elements:ot,middlewareData:at}=_,{element:lt,padding:ct=0}=evaluate$1(_e,_)||{};if(lt==null)return{};const ut=getPaddingObject(ct),dt={x:tt,y:nt},ht=getAlignmentAxis(rt),mt=getAxisLength(ht),yt=await st.getDimensions(lt),vt=ht==="y",pt=vt?"top":"left",_t=vt?"bottom":"right",xt=vt?"clientHeight":"clientWidth",St=it.reference[mt]+it.reference[ht]-dt[ht]-it.floating[mt],At=dt[ht]-it.reference[ht],bt=await(st.getOffsetParent==null?void 0:st.getOffsetParent(lt));let Et=bt?bt[xt]:0;(!Et||!await(st.isElement==null?void 0:st.isElement(bt)))&&(Et=ot.floating[xt]||it.floating[mt]);const wt=St/2-At/2,Rt=Et/2-yt[mt]/2-1,Tt=min(ut[pt],Rt),Mt=min(ut[_t],Rt),Lt=Tt,Ft=Et-yt[mt]-Mt,Ht=Et/2-yt[mt]/2+wt,Kt=clamp$1(Lt,Ht,Ft),Wt=!at.arrow&&getAlignment(rt)!=null&&Ht!==Kt&&it.reference[mt]/2-(Ht<Lt?Tt:Mt)-yt[mt]/2<0,Jt=Wt?Ht<Lt?Ht-Lt:Ht-Ft:0;return{[ht]:dt[ht]+Jt,data:{[ht]:Kt,centerOffset:Ht-Kt-Jt,...Wt&&{alignmentOffset:Jt}},reset:Wt}}}),flip$2=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(_){var tt,nt;const{placement:rt,middlewareData:it,rects:st,initialPlacement:ot,platform:at,elements:lt}=_,{mainAxis:ct=!0,crossAxis:ut=!0,fallbackPlacements:dt,fallbackStrategy:ht="bestFit",fallbackAxisSideDirection:mt="none",flipAlignment:yt=!0,...vt}=evaluate$1(_e,_);if((tt=it.arrow)!=null&&tt.alignmentOffset)return{};const pt=getSide(rt),_t=getSideAxis(ot),xt=getSide(ot)===ot,St=await(at.isRTL==null?void 0:at.isRTL(lt.floating)),At=dt||(xt||!yt?[getOppositePlacement(ot)]:getExpandedPlacements(ot)),bt=mt!=="none";!dt&&bt&&At.push(...getOppositeAxisPlacements(ot,yt,mt,St));const Et=[ot,...At],wt=await detectOverflow(_,vt),Rt=[];let Tt=((nt=it.flip)==null?void 0:nt.overflows)||[];if(ct&&Rt.push(wt[pt]),ut){const Ht=getAlignmentSides(rt,st,St);Rt.push(wt[Ht[0]],wt[Ht[1]])}if(Tt=[...Tt,{placement:rt,overflows:Rt}],!Rt.every(Ht=>Ht<=0)){var Mt,Lt;const Ht=(((Mt=it.flip)==null?void 0:Mt.index)||0)+1,Kt=Et[Ht];if(Kt)return{data:{index:Ht,overflows:Tt},reset:{placement:Kt}};let Wt=(Lt=Tt.filter(Jt=>Jt.overflows[0]<=0).sort((Jt,Ot)=>Jt.overflows[1]-Ot.overflows[1])[0])==null?void 0:Lt.placement;if(!Wt)switch(ht){case"bestFit":{var Ft;const Jt=(Ft=Tt.filter(Ot=>{if(bt){const kt=getSideAxis(Ot.placement);return kt===_t||kt==="y"}return!0}).map(Ot=>[Ot.placement,Ot.overflows.filter(kt=>kt>0).reduce((kt,Gt)=>kt+Gt,0)]).sort((Ot,kt)=>Ot[1]-kt[1])[0])==null?void 0:Ft[0];Jt&&(Wt=Jt);break}case"initialPlacement":Wt=ot;break}if(rt!==Wt)return{reset:{placement:Wt}}}return{}}}};function getSideOffsets(_e,_){return{top:_e.top-_.height,right:_e.right-_.width,bottom:_e.bottom-_.height,left:_e.left-_.width}}function isAnySideFullyClipped(_e){return sides.some(_=>_e[_]>=0)}const hide$2=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(_){const{rects:tt}=_,{strategy:nt="referenceHidden",...rt}=evaluate$1(_e,_);switch(nt){case"referenceHidden":{const it=await detectOverflow(_,{...rt,elementContext:"reference"}),st=getSideOffsets(it,tt.reference);return{data:{referenceHiddenOffsets:st,referenceHidden:isAnySideFullyClipped(st)}}}case"escaped":{const it=await detectOverflow(_,{...rt,altBoundary:!0}),st=getSideOffsets(it,tt.floating);return{data:{escapedOffsets:st,escaped:isAnySideFullyClipped(st)}}}default:return{}}}}};async function convertValueToCoords(_e,_){const{placement:tt,platform:nt,elements:rt}=_e,it=await(nt.isRTL==null?void 0:nt.isRTL(rt.floating)),st=getSide(tt),ot=getAlignment(tt),at=getSideAxis(tt)==="y",lt=["left","top"].includes(st)?-1:1,ct=it&&at?-1:1,ut=evaluate$1(_,_e);let{mainAxis:dt,crossAxis:ht,alignmentAxis:mt}=typeof ut=="number"?{mainAxis:ut,crossAxis:0,alignmentAxis:null}:{mainAxis:ut.mainAxis||0,crossAxis:ut.crossAxis||0,alignmentAxis:ut.alignmentAxis};return ot&&typeof mt=="number"&&(ht=ot==="end"?mt*-1:mt),at?{x:ht*ct,y:dt*lt}:{x:dt*lt,y:ht*ct}}const offset$2=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(_){var tt,nt;const{x:rt,y:it,placement:st,middlewareData:ot}=_,at=await convertValueToCoords(_,_e);return st===((tt=ot.offset)==null?void 0:tt.placement)&&(nt=ot.arrow)!=null&&nt.alignmentOffset?{}:{x:rt+at.x,y:it+at.y,data:{...at,placement:st}}}}},shift$2=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(_){const{x:tt,y:nt,placement:rt}=_,{mainAxis:it=!0,crossAxis:st=!1,limiter:ot={fn:vt=>{let{x:pt,y:_t}=vt;return{x:pt,y:_t}}},...at}=evaluate$1(_e,_),lt={x:tt,y:nt},ct=await detectOverflow(_,at),ut=getSideAxis(getSide(rt)),dt=getOppositeAxis(ut);let ht=lt[dt],mt=lt[ut];if(it){const vt=dt==="y"?"top":"left",pt=dt==="y"?"bottom":"right",_t=ht+ct[vt],xt=ht-ct[pt];ht=clamp$1(_t,ht,xt)}if(st){const vt=ut==="y"?"top":"left",pt=ut==="y"?"bottom":"right",_t=mt+ct[vt],xt=mt-ct[pt];mt=clamp$1(_t,mt,xt)}const yt=ot.fn({..._,[dt]:ht,[ut]:mt});return{...yt,data:{x:yt.x-tt,y:yt.y-nt,enabled:{[dt]:it,[ut]:st}}}}}},limitShift$2=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(_){const{x:tt,y:nt,placement:rt,rects:it,middlewareData:st}=_,{offset:ot=0,mainAxis:at=!0,crossAxis:lt=!0}=evaluate$1(_e,_),ct={x:tt,y:nt},ut=getSideAxis(rt),dt=getOppositeAxis(ut);let ht=ct[dt],mt=ct[ut];const yt=evaluate$1(ot,_),vt=typeof yt=="number"?{mainAxis:yt,crossAxis:0}:{mainAxis:0,crossAxis:0,...yt};if(at){const xt=dt==="y"?"height":"width",St=it.reference[dt]-it.floating[xt]+vt.mainAxis,At=it.reference[dt]+it.reference[xt]-vt.mainAxis;ht<St?ht=St:ht>At&&(ht=At)}if(lt){var pt,_t;const xt=dt==="y"?"width":"height",St=["top","left"].includes(getSide(rt)),At=it.reference[ut]-it.floating[xt]+(St&&((pt=st.offset)==null?void 0:pt[ut])||0)+(St?0:vt.crossAxis),bt=it.reference[ut]+it.reference[xt]+(St?0:((_t=st.offset)==null?void 0:_t[ut])||0)-(St?vt.crossAxis:0);mt<At?mt=At:mt>bt&&(mt=bt)}return{[dt]:ht,[ut]:mt}}}},size$2=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(_){var tt,nt;const{placement:rt,rects:it,platform:st,elements:ot}=_,{apply:at=()=>{},...lt}=evaluate$1(_e,_),ct=await detectOverflow(_,lt),ut=getSide(rt),dt=getAlignment(rt),ht=getSideAxis(rt)==="y",{width:mt,height:yt}=it.floating;let vt,pt;ut==="top"||ut==="bottom"?(vt=ut,pt=dt===(await(st.isRTL==null?void 0:st.isRTL(ot.floating))?"start":"end")?"left":"right"):(pt=ut,vt=dt==="end"?"top":"bottom");const _t=yt-ct.top-ct.bottom,xt=mt-ct.left-ct.right,St=min(yt-ct[vt],_t),At=min(mt-ct[pt],xt),bt=!_.middlewareData.shift;let Et=St,wt=At;if((tt=_.middlewareData.shift)!=null&&tt.enabled.x&&(wt=xt),(nt=_.middlewareData.shift)!=null&&nt.enabled.y&&(Et=_t),bt&&!dt){const Tt=max(ct.left,0),Mt=max(ct.right,0),Lt=max(ct.top,0),Ft=max(ct.bottom,0);ht?wt=mt-2*(Tt!==0||Mt!==0?Tt+Mt:max(ct.left,ct.right)):Et=yt-2*(Lt!==0||Ft!==0?Lt+Ft:max(ct.top,ct.bottom))}await at({..._,availableWidth:wt,availableHeight:Et});const Rt=await st.getDimensions(ot.floating);return mt!==Rt.width||yt!==Rt.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var _;return(_e==null||(_=_e.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(_e){var _;return(_=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:_.documentElement}function isNode(_e){return hasWindow()?_e instanceof Node||_e instanceof getWindow(_e).Node:!1}function isElement(_e){return hasWindow()?_e instanceof Element||_e instanceof getWindow(_e).Element:!1}function isHTMLElement(_e){return hasWindow()?_e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement:!1}function isShadowRoot(_e){return!hasWindow()||typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:_,overflowX:tt,overflowY:nt,display:rt}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test(_+nt+tt)&&!["inline","contents"].includes(rt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some(_=>{try{return _e.matches(_)}catch{return!1}})}function isContainingBlock(_e){const _=isWebKit(),tt=isElement(_e)?getComputedStyle$1(_e):_e;return tt.transform!=="none"||tt.perspective!=="none"||(tt.containerType?tt.containerType!=="normal":!1)||!_&&(tt.backdropFilter?tt.backdropFilter!=="none":!1)||!_&&(tt.filter?tt.filter!=="none":!1)||["transform","perspective","filter"].some(nt=>(tt.willChange||"").includes(nt))||["paint","layout","strict","content"].some(nt=>(tt.contain||"").includes(nt))}function getContainingBlock(_e){let _=getParentNode(_e);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;if(isTopLayer(_))return null;_=getParentNode(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(_e){const _=getParentNode(_e);return isLastTraversableNode(_)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(_e,_,tt){var nt;_===void 0&&(_=[]),tt===void 0&&(tt=!0);const rt=getNearestOverflowAncestor(_e),it=rt===((nt=_e.ownerDocument)==null?void 0:nt.body),st=getWindow(rt);if(it){const ot=getFrameElement(st);return _.concat(st,st.visualViewport||[],isOverflowElement(rt)?rt:[],ot&&tt?getOverflowAncestors(ot):[])}return _.concat(rt,getOverflowAncestors(rt,[],tt))}function getFrameElement(_e){return _e.parent&&Object.getPrototypeOf(_e.parent)?_e.frameElement:null}function getCssDimensions(_e){const _=getComputedStyle$1(_e);let tt=parseFloat(_.width)||0,nt=parseFloat(_.height)||0;const rt=isHTMLElement(_e),it=rt?_e.offsetWidth:tt,st=rt?_e.offsetHeight:nt,ot=round(tt)!==it||round(nt)!==st;return ot&&(tt=it,nt=st),{width:tt,height:nt,$:ot}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const _=unwrapElement(_e);if(!isHTMLElement(_))return createCoords(1);const tt=_.getBoundingClientRect(),{width:nt,height:rt,$:it}=getCssDimensions(_);let st=(it?round(tt.width):tt.width)/nt,ot=(it?round(tt.height):tt.height)/rt;return(!st||!Number.isFinite(st))&&(st=1),(!ot||!Number.isFinite(ot))&&(ot=1),{x:st,y:ot}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const _=getWindow(_e);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,_,tt){return _===void 0&&(_=!1),!tt||_&&tt!==getWindow(_e)?!1:_}function getBoundingClientRect(_e,_,tt,nt){_===void 0&&(_=!1),tt===void 0&&(tt=!1);const rt=_e.getBoundingClientRect(),it=unwrapElement(_e);let st=createCoords(1);_&&(nt?isElement(nt)&&(st=getScale(nt)):st=getScale(_e));const ot=shouldAddVisualOffsets(it,tt,nt)?getVisualOffsets(it):createCoords(0);let at=(rt.left+ot.x)/st.x,lt=(rt.top+ot.y)/st.y,ct=rt.width/st.x,ut=rt.height/st.y;if(it){const dt=getWindow(it),ht=nt&&isElement(nt)?getWindow(nt):nt;let mt=dt,yt=getFrameElement(mt);for(;yt&&nt&&ht!==mt;){const vt=getScale(yt),pt=yt.getBoundingClientRect(),_t=getComputedStyle$1(yt),xt=pt.left+(yt.clientLeft+parseFloat(_t.paddingLeft))*vt.x,St=pt.top+(yt.clientTop+parseFloat(_t.paddingTop))*vt.y;at*=vt.x,lt*=vt.y,ct*=vt.x,ut*=vt.y,at+=xt,lt+=St,mt=getWindow(yt),yt=getFrameElement(mt)}}return rectToClientRect({width:ct,height:ut,x:at,y:lt})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:_,rect:tt,offsetParent:nt,strategy:rt}=_e;const it=rt==="fixed",st=getDocumentElement(nt),ot=_?isTopLayer(_.floating):!1;if(nt===st||ot&&it)return tt;let at={scrollLeft:0,scrollTop:0},lt=createCoords(1);const ct=createCoords(0),ut=isHTMLElement(nt);if((ut||!ut&&!it)&&((getNodeName(nt)!=="body"||isOverflowElement(st))&&(at=getNodeScroll(nt)),isHTMLElement(nt))){const dt=getBoundingClientRect(nt);lt=getScale(nt),ct.x=dt.x+nt.clientLeft,ct.y=dt.y+nt.clientTop}return{width:tt.width*lt.x,height:tt.height*lt.y,x:tt.x*lt.x-at.scrollLeft*lt.x+ct.x,y:tt.y*lt.y-at.scrollTop*lt.y+ct.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e,_){const tt=getNodeScroll(_e).scrollLeft;return _?_.left+tt:getBoundingClientRect(getDocumentElement(_e)).left+tt}function getDocumentRect(_e){const _=getDocumentElement(_e),tt=getNodeScroll(_e),nt=_e.ownerDocument.body,rt=max(_.scrollWidth,_.clientWidth,nt.scrollWidth,nt.clientWidth),it=max(_.scrollHeight,_.clientHeight,nt.scrollHeight,nt.clientHeight);let st=-tt.scrollLeft+getWindowScrollBarX(_e);const ot=-tt.scrollTop;return getComputedStyle$1(nt).direction==="rtl"&&(st+=max(_.clientWidth,nt.clientWidth)-rt),{width:rt,height:it,x:st,y:ot}}function getViewportRect(_e,_){const tt=getWindow(_e),nt=getDocumentElement(_e),rt=tt.visualViewport;let it=nt.clientWidth,st=nt.clientHeight,ot=0,at=0;if(rt){it=rt.width,st=rt.height;const lt=isWebKit();(!lt||lt&&_==="fixed")&&(ot=rt.offsetLeft,at=rt.offsetTop)}return{width:it,height:st,x:ot,y:at}}function getInnerBoundingClientRect(_e,_){const tt=getBoundingClientRect(_e,!0,_==="fixed"),nt=tt.top+_e.clientTop,rt=tt.left+_e.clientLeft,it=isHTMLElement(_e)?getScale(_e):createCoords(1),st=_e.clientWidth*it.x,ot=_e.clientHeight*it.y,at=rt*it.x,lt=nt*it.y;return{width:st,height:ot,x:at,y:lt}}function getClientRectFromClippingAncestor(_e,_,tt){let nt;if(_==="viewport")nt=getViewportRect(_e,tt);else if(_==="document")nt=getDocumentRect(getDocumentElement(_e));else if(isElement(_))nt=getInnerBoundingClientRect(_,tt);else{const rt=getVisualOffsets(_e);nt={..._,x:_.x-rt.x,y:_.y-rt.y}}return rectToClientRect(nt)}function hasFixedPositionAncestor(_e,_){const tt=getParentNode(_e);return tt===_||!isElement(tt)||isLastTraversableNode(tt)?!1:getComputedStyle$1(tt).position==="fixed"||hasFixedPositionAncestor(tt,_)}function getClippingElementAncestors(_e,_){const tt=_.get(_e);if(tt)return tt;let nt=getOverflowAncestors(_e,[],!1).filter(ot=>isElement(ot)&&getNodeName(ot)!=="body"),rt=null;const it=getComputedStyle$1(_e).position==="fixed";let st=it?getParentNode(_e):_e;for(;isElement(st)&&!isLastTraversableNode(st);){const ot=getComputedStyle$1(st),at=isContainingBlock(st);!at&&ot.position==="fixed"&&(rt=null),(it?!at&&!rt:!at&&ot.position==="static"&&!!rt&&["absolute","fixed"].includes(rt.position)||isOverflowElement(st)&&!at&&hasFixedPositionAncestor(_e,st))?nt=nt.filter(ct=>ct!==st):rt=ot,st=getParentNode(st)}return _.set(_e,nt),nt}function getClippingRect(_e){let{element:_,boundary:tt,rootBoundary:nt,strategy:rt}=_e;const st=[...tt==="clippingAncestors"?isTopLayer(_)?[]:getClippingElementAncestors(_,this._c):[].concat(tt),nt],ot=st[0],at=st.reduce((lt,ct)=>{const ut=getClientRectFromClippingAncestor(_,ct,rt);return lt.top=max(ut.top,lt.top),lt.right=min(ut.right,lt.right),lt.bottom=min(ut.bottom,lt.bottom),lt.left=max(ut.left,lt.left),lt},getClientRectFromClippingAncestor(_,ot,rt));return{width:at.right-at.left,height:at.bottom-at.top,x:at.left,y:at.top}}function getDimensions(_e){const{width:_,height:tt}=getCssDimensions(_e);return{width:_,height:tt}}function getRectRelativeToOffsetParent(_e,_,tt){const nt=isHTMLElement(_),rt=getDocumentElement(_),it=tt==="fixed",st=getBoundingClientRect(_e,!0,it,_);let ot={scrollLeft:0,scrollTop:0};const at=createCoords(0);if(nt||!nt&&!it)if((getNodeName(_)!=="body"||isOverflowElement(rt))&&(ot=getNodeScroll(_)),nt){const ht=getBoundingClientRect(_,!0,it,_);at.x=ht.x+_.clientLeft,at.y=ht.y+_.clientTop}else rt&&(at.x=getWindowScrollBarX(rt));let lt=0,ct=0;if(rt&&!nt&&!it){const ht=rt.getBoundingClientRect();ct=ht.top+ot.scrollTop,lt=ht.left+ot.scrollLeft-getWindowScrollBarX(rt,ht)}const ut=st.left+ot.scrollLeft-at.x-lt,dt=st.top+ot.scrollTop-at.y-ct;return{x:ut,y:dt,width:st.width,height:st.height}}function isStaticPositioned(_e){return getComputedStyle$1(_e).position==="static"}function getTrueOffsetParent(_e,_){if(!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed")return null;if(_)return _(_e);let tt=_e.offsetParent;return getDocumentElement(_e)===tt&&(tt=tt.ownerDocument.body),tt}function getOffsetParent(_e,_){const tt=getWindow(_e);if(isTopLayer(_e))return tt;if(!isHTMLElement(_e)){let rt=getParentNode(_e);for(;rt&&!isLastTraversableNode(rt);){if(isElement(rt)&&!isStaticPositioned(rt))return rt;rt=getParentNode(rt)}return tt}let nt=getTrueOffsetParent(_e,_);for(;nt&&isTableElement(nt)&&isStaticPositioned(nt);)nt=getTrueOffsetParent(nt,_);return nt&&isLastTraversableNode(nt)&&isStaticPositioned(nt)&&!isContainingBlock(nt)?tt:nt||getContainingBlock(_e)||tt}const getElementRects=async function(_e){const _=this.getOffsetParent||getOffsetParent,tt=this.getDimensions,nt=await tt(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await _(_e.floating),_e.strategy),floating:{x:0,y:0,width:nt.width,height:nt.height}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,_){let tt=null,nt;const rt=getDocumentElement(_e);function it(){var ot;clearTimeout(nt),(ot=tt)==null||ot.disconnect(),tt=null}function st(ot,at){ot===void 0&&(ot=!1),at===void 0&&(at=1),it();const{left:lt,top:ct,width:ut,height:dt}=_e.getBoundingClientRect();if(ot||_(),!ut||!dt)return;const ht=floor(ct),mt=floor(rt.clientWidth-(lt+ut)),yt=floor(rt.clientHeight-(ct+dt)),vt=floor(lt),_t={rootMargin:-ht+"px "+-mt+"px "+-yt+"px "+-vt+"px",threshold:max(0,min(1,at))||1};let xt=!0;function St(At){const bt=At[0].intersectionRatio;if(bt!==at){if(!xt)return st();bt?st(!1,bt):nt=setTimeout(()=>{st(!1,1e-7)},1e3)}xt=!1}try{tt=new IntersectionObserver(St,{..._t,root:rt.ownerDocument})}catch{tt=new IntersectionObserver(St,_t)}tt.observe(_e)}return st(!0),it}function autoUpdate(_e,_,tt,nt){nt===void 0&&(nt={});const{ancestorScroll:rt=!0,ancestorResize:it=!0,elementResize:st=typeof ResizeObserver=="function",layoutShift:ot=typeof IntersectionObserver=="function",animationFrame:at=!1}=nt,lt=unwrapElement(_e),ct=rt||it?[...lt?getOverflowAncestors(lt):[],...getOverflowAncestors(_)]:[];ct.forEach(pt=>{rt&&pt.addEventListener("scroll",tt,{passive:!0}),it&&pt.addEventListener("resize",tt)});const ut=lt&&ot?observeMove(lt,tt):null;let dt=-1,ht=null;st&&(ht=new ResizeObserver(pt=>{let[_t]=pt;_t&&_t.target===lt&&ht&&(ht.unobserve(_),cancelAnimationFrame(dt),dt=requestAnimationFrame(()=>{var xt;(xt=ht)==null||xt.observe(_)})),tt()}),lt&&!at&&ht.observe(lt),ht.observe(_));let mt,yt=at?getBoundingClientRect(_e):null;at&&vt();function vt(){const pt=getBoundingClientRect(_e);yt&&(pt.x!==yt.x||pt.y!==yt.y||pt.width!==yt.width||pt.height!==yt.height)&&tt(),yt=pt,mt=requestAnimationFrame(vt)}return tt(),()=>{var pt;ct.forEach(_t=>{rt&&_t.removeEventListener("scroll",tt),it&&_t.removeEventListener("resize",tt)}),ut==null||ut(),(pt=ht)==null||pt.disconnect(),ht=null,at&&cancelAnimationFrame(mt)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_e,_,tt)=>{const nt=new Map,rt={platform,...tt},it={...rt.platform,_c:nt};return computePosition$1(_e,_,{...rt,platform:it})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_e,_){if(_e===_)return!0;if(typeof _e!=typeof _)return!1;if(typeof _e=="function"&&_e.toString()===_.toString())return!0;let tt,nt,rt;if(_e&&_&&typeof _e=="object"){if(Array.isArray(_e)){if(tt=_e.length,tt!==_.length)return!1;for(nt=tt;nt--!==0;)if(!deepEqual(_e[nt],_[nt]))return!1;return!0}if(rt=Object.keys(_e),tt=rt.length,tt!==Object.keys(_).length)return!1;for(nt=tt;nt--!==0;)if(!{}.hasOwnProperty.call(_,rt[nt]))return!1;for(nt=tt;nt--!==0;){const it=rt[nt];if(!(it==="_owner"&&_e.$$typeof)&&!deepEqual(_e[it],_[it]))return!1}return!0}return _e!==_e&&_!==_}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,_){const tt=getDPR(_e);return Math.round(_*tt)/tt}function useLatestRef(_e){const _=reactExports.useRef(_e);return index(()=>{_.current=_e}),_}function useFloating(_e){_e===void 0&&(_e={});const{placement:_="bottom",strategy:tt="absolute",middleware:nt=[],platform:rt,elements:{reference:it,floating:st}={},transform:ot=!0,whileElementsMounted:at,open:lt}=_e,[ct,ut]=reactExports.useState({x:0,y:0,strategy:tt,placement:_,middlewareData:{},isPositioned:!1}),[dt,ht]=reactExports.useState(nt);deepEqual(dt,nt)||ht(nt);const[mt,yt]=reactExports.useState(null),[vt,pt]=reactExports.useState(null),_t=reactExports.useCallback(Ot=>{Ot!==bt.current&&(bt.current=Ot,yt(Ot))},[]),xt=reactExports.useCallback(Ot=>{Ot!==Et.current&&(Et.current=Ot,pt(Ot))},[]),St=it||mt,At=st||vt,bt=reactExports.useRef(null),Et=reactExports.useRef(null),wt=reactExports.useRef(ct),Rt=at!=null,Tt=useLatestRef(at),Mt=useLatestRef(rt),Lt=useLatestRef(lt),Ft=reactExports.useCallback(()=>{if(!bt.current||!Et.current)return;const Ot={placement:_,strategy:tt,middleware:dt};Mt.current&&(Ot.platform=Mt.current),computePosition(bt.current,Et.current,Ot).then(kt=>{const Gt={...kt,isPositioned:Lt.current!==!1};Ht.current&&!deepEqual(wt.current,Gt)&&(wt.current=Gt,reactDomExports.flushSync(()=>{ut(Gt)}))})},[dt,_,tt,Mt,Lt]);index(()=>{lt===!1&&wt.current.isPositioned&&(wt.current.isPositioned=!1,ut(Ot=>({...Ot,isPositioned:!1})))},[lt]);const Ht=reactExports.useRef(!1);index(()=>(Ht.current=!0,()=>{Ht.current=!1}),[]),index(()=>{if(St&&(bt.current=St),At&&(Et.current=At),St&&At){if(Tt.current)return Tt.current(St,At,Ft);Ft()}},[St,At,Ft,Tt,Rt]);const Kt=reactExports.useMemo(()=>({reference:bt,floating:Et,setReference:_t,setFloating:xt}),[_t,xt]),Wt=reactExports.useMemo(()=>({reference:St,floating:At}),[St,At]),Jt=reactExports.useMemo(()=>{const Ot={position:tt,left:0,top:0};if(!Wt.floating)return Ot;const kt=roundByDPR(Wt.floating,ct.x),Gt=roundByDPR(Wt.floating,ct.y);return ot?{...Ot,transform:"translate("+kt+"px, "+Gt+"px)",...getDPR(Wt.floating)>=1.5&&{willChange:"transform"}}:{position:tt,left:kt,top:Gt}},[tt,ot,Wt.floating,ct.x,ct.y]);return reactExports.useMemo(()=>({...ct,update:Ft,refs:Kt,elements:Wt,floatingStyles:Jt}),[ct,Ft,Kt,Wt,Jt])}const arrow$1=_e=>{function _(tt){return{}.hasOwnProperty.call(tt,"current")}return{name:"arrow",options:_e,fn(tt){const{element:nt,padding:rt}=typeof _e=="function"?_e(tt):_e;return nt&&_(nt)?nt.current!=null?arrow$2({element:nt.current,padding:rt}).fn(tt):{}:nt?arrow$2({element:nt,padding:rt}).fn(tt):{}}}},offset=(_e,_)=>({...offset$1(_e),options:[_e,_]}),shift=(_e,_)=>({...shift$1(_e),options:[_e,_]}),limitShift=(_e,_)=>({...limitShift$1(_e),options:[_e,_]}),flip=(_e,_)=>({...flip$1(_e),options:[_e,_]}),size=(_e,_)=>({...size$1(_e),options:[_e,_]}),hide=(_e,_)=>({...hide$1(_e),options:[_e,_]}),arrow=(_e,_)=>({...arrow$1(_e),options:[_e,_]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((_e,_)=>{const{children:tt,width:nt=10,height:rt=5,...it}=_e;return jsxRuntimeExports.jsx(Primitive.svg,{...it,ref:_,width:nt,height:rt,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_e.asChild?tt:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$1=Arrow$1;function createContextScope(_e,_=[]){let tt=[];function nt(it,st){const ot=reactExports.createContext(st),at=tt.length;tt=[...tt,st];function lt(ut){const{scope:dt,children:ht,...mt}=ut,yt=(dt==null?void 0:dt[_e][at])||ot,vt=reactExports.useMemo(()=>mt,Object.values(mt));return jsxRuntimeExports.jsx(yt.Provider,{value:vt,children:ht})}function ct(ut,dt){const ht=(dt==null?void 0:dt[_e][at])||ot,mt=reactExports.useContext(ht);if(mt)return mt;if(st!==void 0)return st;throw new Error(`\`${ut}\` must be used within \`${it}\``)}return lt.displayName=it+"Provider",[lt,ct]}const rt=()=>{const it=tt.map(st=>reactExports.createContext(st));return function(ot){const at=(ot==null?void 0:ot[_e])||it;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:at}}),[ot,at])}};return rt.scopeName=_e,[nt,composeContextScopes(rt,..._)]}function composeContextScopes(..._e){const _=_e[0];if(_e.length===1)return _;const tt=()=>{const nt=_e.map(rt=>({useScope:rt(),scopeName:rt.scopeName}));return function(it){const st=nt.reduce((ot,{useScope:at,scopeName:lt})=>{const ut=at(it)[`__scope${lt}`];return{...ot,...ut}},{});return reactExports.useMemo(()=>({[`__scope${_.scopeName}`]:st}),[st])}};return tt.scopeName=_.scopeName,tt}function useSize(_e){const[_,tt]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_e){tt({width:_e.offsetWidth,height:_e.offsetHeight});const nt=new ResizeObserver(rt=>{if(!Array.isArray(rt)||!rt.length)return;const it=rt[0];let st,ot;if("borderBoxSize"in it){const at=it.borderBoxSize,lt=Array.isArray(at)?at[0]:at;st=lt.inlineSize,ot=lt.blockSize}else st=_e.offsetWidth,ot=_e.offsetHeight;tt({width:st,height:ot})});return nt.observe(_e,{box:"border-box"}),()=>nt.unobserve(_e)}else tt(void 0)},[_e]),_}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_e=>{const{__scopePopper:_,children:tt}=_e,[nt,rt]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:_,anchor:nt,onAnchorChange:rt,children:tt})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_e,_)=>{const{__scopePopper:tt,virtualRef:nt,...rt}=_e,it=usePopperContext(ANCHOR_NAME,tt),st=reactExports.useRef(null),ot=useComposedRefs(_,st);return reactExports.useEffect(()=>{it.onAnchorChange((nt==null?void 0:nt.current)||st.current)}),nt?null:jsxRuntimeExports.jsx(Primitive.div,{...rt,ref:ot})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((_e,_)=>{var qt,rn,gn,An,En,fn;const{__scopePopper:tt,side:nt="bottom",sideOffset:rt=0,align:it="center",alignOffset:st=0,arrowPadding:ot=0,avoidCollisions:at=!0,collisionBoundary:lt=[],collisionPadding:ct=0,sticky:ut="partial",hideWhenDetached:dt=!1,updatePositionStrategy:ht="optimized",onPlaced:mt,...yt}=_e,vt=usePopperContext(CONTENT_NAME$1,tt),[pt,_t]=reactExports.useState(null),xt=useComposedRefs(_,nn=>_t(nn)),[St,At]=reactExports.useState(null),bt=useSize(St),Et=(bt==null?void 0:bt.width)??0,wt=(bt==null?void 0:bt.height)??0,Rt=nt+(it!=="center"?"-"+it:""),Tt=typeof ct=="number"?ct:{top:0,right:0,bottom:0,left:0,...ct},Mt=Array.isArray(lt)?lt:[lt],Lt=Mt.length>0,Ft={padding:Tt,boundary:Mt.filter(isNotNull),altBoundary:Lt},{refs:Ht,floatingStyles:Kt,placement:Wt,isPositioned:Jt,middlewareData:Ot}=useFloating({strategy:"fixed",placement:Rt,whileElementsMounted:(...nn)=>autoUpdate(...nn,{animationFrame:ht==="always"}),elements:{reference:vt.anchor},middleware:[offset({mainAxis:rt+wt,alignmentAxis:st}),at&&shift({mainAxis:!0,crossAxis:!1,limiter:ut==="partial"?limitShift():void 0,...Ft}),at&&flip({...Ft}),size({...Ft,apply:({elements:nn,rects:Tn,availableWidth:Cn,availableHeight:vn})=>{const{width:_n,height:Qt}=Tn.reference,sn=nn.floating.style;sn.setProperty("--radix-popper-available-width",`${Cn}px`),sn.setProperty("--radix-popper-available-height",`${vn}px`),sn.setProperty("--radix-popper-anchor-width",`${_n}px`),sn.setProperty("--radix-popper-anchor-height",`${Qt}px`)}}),St&&arrow({element:St,padding:ot}),transformOrigin({arrowWidth:Et,arrowHeight:wt}),dt&&hide({strategy:"referenceHidden",...Ft})]}),[kt,Gt]=getSideAndAlignFromPlacement(Wt),zt=useCallbackRef(mt);useLayoutEffect2(()=>{Jt&&(zt==null||zt())},[Jt,zt]);const Vt=(qt=Ot.arrow)==null?void 0:qt.x,Dt=(rn=Ot.arrow)==null?void 0:rn.y,It=((gn=Ot.arrow)==null?void 0:gn.centerOffset)!==0,[Ut,Yt]=reactExports.useState();return useLayoutEffect2(()=>{pt&&Yt(window.getComputedStyle(pt).zIndex)},[pt]),jsxRuntimeExports.jsx("div",{ref:Ht.setFloating,"data-radix-popper-content-wrapper":"",style:{...Kt,transform:Jt?Kt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ut,"--radix-popper-transform-origin":[(An=Ot.transformOrigin)==null?void 0:An.x,(En=Ot.transformOrigin)==null?void 0:En.y].join(" "),...((fn=Ot.hide)==null?void 0:fn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_e.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:tt,placedSide:kt,onArrowChange:At,arrowX:Vt,arrowY:Dt,shouldHideArrow:It,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":kt,"data-align":Gt,...yt,ref:xt,style:{...yt.style,animation:Jt?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(_,tt){const{__scopePopper:nt,...rt}=_,it=useContentContext(ARROW_NAME$1,nt),st=OPPOSITE_SIDE[it.placedSide];return jsxRuntimeExports.jsx("span",{ref:it.onArrowChange,style:{position:"absolute",left:it.arrowX,top:it.arrowY,[st]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[it.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[it.placedSide],visibility:it.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{...rt,ref:tt,style:{...rt.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(_e){return _e!==null}var transformOrigin=_e=>({name:"transformOrigin",options:_e,fn(_){var vt,pt,_t;const{placement:tt,rects:nt,middlewareData:rt}=_,st=((vt=rt.arrow)==null?void 0:vt.centerOffset)!==0,ot=st?0:_e.arrowWidth,at=st?0:_e.arrowHeight,[lt,ct]=getSideAndAlignFromPlacement(tt),ut={start:"0%",center:"50%",end:"100%"}[ct],dt=(((pt=rt.arrow)==null?void 0:pt.x)??0)+ot/2,ht=(((_t=rt.arrow)==null?void 0:_t.y)??0)+at/2;let mt="",yt="";return lt==="bottom"?(mt=st?ut:`${dt}px`,yt=`${-at}px`):lt==="top"?(mt=st?ut:`${dt}px`,yt=`${nt.floating.height+at}px`):lt==="right"?(mt=`${-at}px`,yt=st?ut:`${ht}px`):lt==="left"&&(mt=`${nt.floating.width+at}px`,yt=st?ut:`${ht}px`),{data:{x:mt,y:yt}}}});function getSideAndAlignFromPlacement(_e){const[_,tt="center"]=_e.split("-");return[_,tt]}var Root2=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow;function useStateMachine(_e,_){return reactExports.useReducer((tt,nt)=>_[tt][nt]??tt,_e)}var Presence=_e=>{const{present:_,children:tt}=_e,nt=usePresence(_),rt=typeof tt=="function"?tt({present:nt.isPresent}):reactExports.Children.only(tt),it=useComposedRefs(nt.ref,getElementRef(rt));return typeof tt=="function"||nt.isPresent?reactExports.cloneElement(rt,{ref:it}):null};Presence.displayName="Presence";function usePresence(_e){const[_,tt]=reactExports.useState(),nt=reactExports.useRef({}),rt=reactExports.useRef(_e),it=reactExports.useRef("none"),st=_e?"mounted":"unmounted",[ot,at]=useStateMachine(st,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const lt=getAnimationName(nt.current);it.current=ot==="mounted"?lt:"none"},[ot]),useLayoutEffect2(()=>{const lt=nt.current,ct=rt.current;if(ct!==_e){const dt=it.current,ht=getAnimationName(lt);_e?at("MOUNT"):ht==="none"||(lt==null?void 0:lt.display)==="none"?at("UNMOUNT"):at(ct&&dt!==ht?"ANIMATION_OUT":"UNMOUNT"),rt.current=_e}},[_e,at]),useLayoutEffect2(()=>{if(_){let lt;const ct=_.ownerDocument.defaultView??window,ut=ht=>{const yt=getAnimationName(nt.current).includes(ht.animationName);if(ht.target===_&&yt&&(at("ANIMATION_END"),!rt.current)){const vt=_.style.animationFillMode;_.style.animationFillMode="forwards",lt=ct.setTimeout(()=>{_.style.animationFillMode==="forwards"&&(_.style.animationFillMode=vt)})}},dt=ht=>{ht.target===_&&(it.current=getAnimationName(nt.current))};return _.addEventListener("animationstart",dt),_.addEventListener("animationcancel",ut),_.addEventListener("animationend",ut),()=>{ct.clearTimeout(lt),_.removeEventListener("animationstart",dt),_.removeEventListener("animationcancel",ut),_.removeEventListener("animationend",ut)}}else at("ANIMATION_END")},[_,at]),{isPresent:["mounted","unmountSuspended"].includes(ot),ref:reactExports.useCallback(lt=>{lt&&(nt.current=getComputedStyle(lt)),tt(lt)},[])}}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function getElementRef(_e){var nt,rt;let _=(nt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:nt.get,tt=_&&"isReactWarning"in _&&_.isReactWarning;return tt?_e.ref:(_=(rt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:rt.get,tt=_&&"isReactWarning"in _&&_.isReactWarning,tt?_e.props.ref:_e.props.ref||_e.ref)}function useControllableState({prop:_e,defaultProp:_,onChange:tt=()=>{}}){const[nt,rt]=useUncontrolledState({defaultProp:_,onChange:tt}),it=_e!==void 0,st=it?_e:nt,ot=useCallbackRef(tt),at=reactExports.useCallback(lt=>{if(it){const ut=typeof lt=="function"?lt(_e):lt;ut!==_e&&ot(ut)}else rt(lt)},[it,_e,rt,ot]);return[st,at]}function useUncontrolledState({defaultProp:_e,onChange:_}){const tt=reactExports.useState(_e),[nt]=tt,rt=reactExports.useRef(nt),it=useCallbackRef(_);return reactExports.useEffect(()=>{rt.current!==nt&&(it(nt),rt.current=nt)},[nt,rt,it]),tt}var NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:_,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._e.style}}));VisuallyHidden.displayName=NAME;var Root=VisuallyHidden,[createTooltipContext,createTooltipScope]=createContextScope$1("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip=_e=>{const{__scopeTooltip:_,children:tt,open:nt,defaultOpen:rt=!1,onOpenChange:it,disableHoverableContent:st,delayDuration:ot}=_e,at=useTooltipProviderContext(TOOLTIP_NAME,_e.__scopeTooltip),lt=usePopperScope(_),[ct,ut]=reactExports.useState(null),dt=useId(),ht=reactExports.useRef(0),mt=st??at.disableHoverableContent,yt=ot??at.delayDuration,vt=reactExports.useRef(!1),[pt=!1,_t]=useControllableState({prop:nt,defaultProp:rt,onChange:Et=>{Et?(at.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):at.onClose(),it==null||it(Et)}}),xt=reactExports.useMemo(()=>pt?vt.current?"delayed-open":"instant-open":"closed",[pt]),St=reactExports.useCallback(()=>{window.clearTimeout(ht.current),vt.current=!1,_t(!0)},[_t]),At=reactExports.useCallback(()=>{window.clearTimeout(ht.current),_t(!1)},[_t]),bt=reactExports.useCallback(()=>{window.clearTimeout(ht.current),ht.current=window.setTimeout(()=>{vt.current=!0,_t(!0)},yt)},[yt,_t]);return reactExports.useEffect(()=>()=>window.clearTimeout(ht.current),[]),jsxRuntimeExports.jsx(Root2,{...lt,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:_,contentId:dt,open:pt,stateAttribute:xt,trigger:ct,onTriggerChange:ut,onTriggerEnter:reactExports.useCallback(()=>{at.isOpenDelayed?bt():St()},[at.isOpenDelayed,bt,St]),onTriggerLeave:reactExports.useCallback(()=>{mt?At():window.clearTimeout(ht.current)},[At,mt]),onOpen:St,onClose:At,disableHoverableContent:mt,children:tt})})};Tooltip.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,...nt}=_e,rt=useTooltipContext(TRIGGER_NAME,tt),it=useTooltipProviderContext(TRIGGER_NAME,tt),st=usePopperScope(tt),ot=reactExports.useRef(null),at=useComposedRefs(_,ot,rt.onTriggerChange),lt=reactExports.useRef(!1),ct=reactExports.useRef(!1),ut=reactExports.useCallback(()=>lt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",ut),[ut]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...st,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":rt.open?rt.contentId:void 0,"data-state":rt.stateAttribute,...nt,ref:at,onPointerMove:composeEventHandlers$1(_e.onPointerMove,dt=>{dt.pointerType!=="touch"&&!ct.current&&!it.isPointerInTransitRef.current&&(rt.onTriggerEnter(),ct.current=!0)}),onPointerLeave:composeEventHandlers$1(_e.onPointerLeave,()=>{rt.onTriggerLeave(),ct.current=!1}),onPointerDown:composeEventHandlers$1(_e.onPointerDown,()=>{lt.current=!0,document.addEventListener("pointerup",ut,{once:!0})}),onFocus:composeEventHandlers$1(_e.onFocus,()=>{lt.current||rt.onOpen()}),onBlur:composeEventHandlers$1(_e.onBlur,rt.onClose),onClick:composeEventHandlers$1(_e.onClick,rt.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),CONTENT_NAME="TooltipContent",TooltipContent=reactExports.forwardRef((_e,_)=>{const tt=usePortalContext(CONTENT_NAME,_e.__scopeTooltip),{forceMount:nt=tt.forceMount,side:rt="top",...it}=_e,st=useTooltipContext(CONTENT_NAME,_e.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:nt||st.open,children:st.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:rt,...it,ref:_}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:rt,...it,ref:_})})}),TooltipContentHoverable=reactExports.forwardRef((_e,_)=>{const tt=useTooltipContext(CONTENT_NAME,_e.__scopeTooltip),nt=useTooltipProviderContext(CONTENT_NAME,_e.__scopeTooltip),rt=reactExports.useRef(null),it=useComposedRefs(_,rt),[st,ot]=reactExports.useState(null),{trigger:at,onClose:lt}=tt,ct=rt.current,{onPointerInTransitChange:ut}=nt,dt=reactExports.useCallback(()=>{ot(null),ut(!1)},[ut]),ht=reactExports.useCallback((mt,yt)=>{const vt=mt.currentTarget,pt={x:mt.clientX,y:mt.clientY},_t=getExitSideFromRect(pt,vt.getBoundingClientRect()),xt=getPaddedExitPoints(pt,_t),St=getPointsFromRect(yt.getBoundingClientRect()),At=getHull([...xt,...St]);ot(At),ut(!0)},[ut]);return reactExports.useEffect(()=>()=>dt(),[dt]),reactExports.useEffect(()=>{if(at&&ct){const mt=vt=>ht(vt,ct),yt=vt=>ht(vt,at);return at.addEventListener("pointerleave",mt),ct.addEventListener("pointerleave",yt),()=>{at.removeEventListener("pointerleave",mt),ct.removeEventListener("pointerleave",yt)}}},[at,ct,ht,dt]),reactExports.useEffect(()=>{if(st){const mt=yt=>{const vt=yt.target,pt={x:yt.clientX,y:yt.clientY},_t=(at==null?void 0:at.contains(vt))||(ct==null?void 0:ct.contains(vt)),xt=!isPointInPolygon(pt,st);_t?dt():xt&&(dt(),lt())};return document.addEventListener("pointermove",mt),()=>document.removeEventListener("pointermove",mt)}},[at,ct,st,lt,dt]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._e,ref:it})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,children:nt,"aria-label":rt,onEscapeKeyDown:it,onPointerDownOutside:st,...ot}=_e,at=useTooltipContext(CONTENT_NAME,tt),lt=usePopperScope(tt),{onClose:ct}=at;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,ct),()=>document.removeEventListener(TOOLTIP_OPEN,ct)),[ct]),reactExports.useEffect(()=>{if(at.trigger){const ut=dt=>{const ht=dt.target;ht!=null&&ht.contains(at.trigger)&&ct()};return window.addEventListener("scroll",ut,{capture:!0}),()=>window.removeEventListener("scroll",ut,{capture:!0})}},[at.trigger,ct]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:it,onPointerDownOutside:st,onFocusOutside:ut=>ut.preventDefault(),onDismiss:ct,children:jsxRuntimeExports.jsxs(Content,{"data-state":at.stateAttribute,...lt,...ot,ref:_,style:{...ot.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:nt}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:tt,isInside:!0,children:jsxRuntimeExports.jsx(Root,{id:at.contentId,role:"tooltip",children:rt||nt})})]})})});TooltipContent.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,...nt}=_e,rt=usePopperScope(tt);return useVisuallyHiddenContentContext(ARROW_NAME,tt).isInside?null:jsxRuntimeExports.jsx(Arrow,{...rt,...nt,ref:_})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(_e,_){const tt=Math.abs(_.top-_e.y),nt=Math.abs(_.bottom-_e.y),rt=Math.abs(_.right-_e.x),it=Math.abs(_.left-_e.x);switch(Math.min(tt,nt,rt,it)){case it:return"left";case rt:return"right";case tt:return"top";case nt:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_e,_,tt=5){const nt=[];switch(_){case"top":nt.push({x:_e.x-tt,y:_e.y+tt},{x:_e.x+tt,y:_e.y+tt});break;case"bottom":nt.push({x:_e.x-tt,y:_e.y-tt},{x:_e.x+tt,y:_e.y-tt});break;case"left":nt.push({x:_e.x+tt,y:_e.y-tt},{x:_e.x+tt,y:_e.y+tt});break;case"right":nt.push({x:_e.x-tt,y:_e.y-tt},{x:_e.x-tt,y:_e.y+tt});break}return nt}function getPointsFromRect(_e){const{top:_,right:tt,bottom:nt,left:rt}=_e;return[{x:rt,y:_},{x:tt,y:_},{x:tt,y:nt},{x:rt,y:nt}]}function isPointInPolygon(_e,_){const{x:tt,y:nt}=_e;let rt=!1;for(let it=0,st=_.length-1;it<_.length;st=it++){const ot=_[it].x,at=_[it].y,lt=_[st].x,ct=_[st].y;at>nt!=ct>nt&&tt<(lt-ot)*(nt-at)/(ct-at)+ot&&(rt=!rt)}return rt}function getHull(_e){const _=_e.slice();return _.sort((tt,nt)=>tt.x<nt.x?-1:tt.x>nt.x?1:tt.y<nt.y?-1:tt.y>nt.y?1:0),getHullPresorted(_)}function getHullPresorted(_e){if(_e.length<=1)return _e.slice();const _=[];for(let nt=0;nt<_e.length;nt++){const rt=_e[nt];for(;_.length>=2;){const it=_[_.length-1],st=_[_.length-2];if((it.x-st.x)*(rt.y-st.y)>=(it.y-st.y)*(rt.x-st.x))_.pop();else break}_.push(rt)}_.pop();const tt=[];for(let nt=_e.length-1;nt>=0;nt--){const rt=_e[nt];for(;tt.length>=2;){const it=tt[tt.length-1],st=tt[tt.length-2];if((it.x-st.x)*(rt.y-st.y)>=(it.y-st.y)*(rt.x-st.x))tt.pop();else break}tt.push(rt)}return tt.pop(),_.length===1&&tt.length===1&&_[0].x===tt[0].x&&_[0].y===tt[0].y?_:_.concat(tt)}var Root3=Tooltip,Trigger=TooltipTrigger,Content2=TooltipContent,Arrow2=TooltipArrow;function _objectWithoutPropertiesLoose$1(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}function _objectWithoutProperties$1(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$1(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}let LevaErrors;(function(_e){_e[_e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",_e[_e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",_e[_e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",_e[_e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",_e[_e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",_e[_e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",_e[_e.THEME_ERROR=6]="THEME_ERROR",_e[_e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",_e[_e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",_e[_e.EMPTY_KEY=9]="EMPTY_KEY"})(LevaErrors||(LevaErrors={}));const ErrorList={[LevaErrors.UNSUPPORTED_INPUT]:(_e,_)=>[`An input with type \`${_e}\` input was found at path \`${_}\` but it's not supported yet.`],[LevaErrors.NO_COMPONENT_FOR_TYPE]:(_e,_)=>[`Type \`${_e}\` found at path \`${_}\` can't be displayed in panel because no component supports it yet.`],[LevaErrors.UNKNOWN_INPUT]:(_e,_)=>[`input at path \`${_e}\` is not recognized.`,_],[LevaErrors.DUPLICATE_KEYS]:(_e,_,tt)=>[`Key \`${_e}\` of path \`${_}\` already exists at path \`${tt}\`. Even nested keys need to be unique. Rename one of the keys.`],[LevaErrors.ALREADY_REGISTERED_TYPE]:_e=>[`Type ${_e} has already been registered. You can't register a component with the same type.`],[LevaErrors.CLIPBOARD_ERROR]:_e=>["Error copying the value",_e],[LevaErrors.THEME_ERROR]:(_e,_)=>[`Error accessing the theme \`${_e}.${_}\` value.`],[LevaErrors.PATH_DOESNT_EXIST]:_e=>[`Error getting the value at path \`${_e}\`. There is probably an error in your \`render\` function.`],[LevaErrors.PATH_DOESNT_EXIST]:_e=>[`Error accessing the value at path \`${_e}\``],[LevaErrors.INPUT_TYPE_OVERRIDE]:(_e,_,tt)=>[`Input at path \`${_e}\` already exists with type: \`${_}\`. Its type cannot be overridden with type \`${tt}\`.`],[LevaErrors.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function _log(_e,_,...tt){const[nt,...rt]=ErrorList[_](...tt);console[_e]("LEVA: "+nt,...rt)}const warn=_log.bind(null,"warn"),log=_log.bind(null,"log"),_excluded$a=["value"],_excluded2$4=["schema"],_excluded3$1=["value"],Schemas=[],Plugins={};function getValueType(_e){let{value:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$a);for(let nt of Schemas){const rt=nt(_,tt);if(rt)return rt}}function register(_e,_){let{schema:tt}=_,nt=_objectWithoutProperties$1(_,_excluded2$4);if(_e in Plugins){warn(LevaErrors.ALREADY_REGISTERED_TYPE,_e);return}Schemas.push((rt,it)=>tt(rt,it)&&_e),Plugins[_e]=nt}function createInternalPlugin(_e){return _e}function normalize$3$1(_e,_,tt,nt){const{normalize:rt}=Plugins[_e];if(rt)return rt(_,tt,nt);if(typeof _!="object"||!("value"in _))return{value:_};const{value:it}=_,st=_objectWithoutProperties$1(_,_excluded3$1);return{value:it,settings:st}}function sanitize$4(_e,_,tt,nt,rt,it){const{sanitize:st}=Plugins[_e];return st?st(_,tt,nt,rt,it):_}function format$2(_e,_,tt){const{format:nt}=Plugins[_e];return nt?nt(_,tt):_}function _defineProperty$2(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function ownKeys$2(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(tt),!0).forEach(function(nt){_defineProperty$2(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$2(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}const clamp=(_e,_,tt)=>_e>tt?tt:_e<_?_:_e,parseNumber=_e=>{if(_e===""||typeof _e=="number")return _e;try{const _=evaluate(_e);if(!isNaN(_))return _}catch{}return parseFloat(_e)},log10=Math.log(10);function getStep(_e){let _=Math.abs(+String(_e).replace(".",""));if(_===0)return .01;for(;_!==0&&_%10===0;)_/=10;const tt=Math.floor(Math.log(_)/log10)+1,nt=Math.floor(Math.log10(Math.abs(_e))),rt=Math.pow(10,nt-tt);return Math.max(rt,.001)}const range=(_e,_,tt)=>tt===_?0:(clamp(_e,_,tt)-_)/(tt-_),invertedRange=(_e,_,tt)=>_e*(tt-_)+_,getUid=()=>"_"+Math.random().toString(36).substr(2,9),parens=/\(([0-9+\-*/^ .]+)\)/,exp=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,mul=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,div=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,add=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,sub=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function evaluate(_e){if(isNaN(Number(_e)))if(parens.test(_e)){const _=_e.replace(parens,(tt,nt)=>String(evaluate(nt)));return evaluate(_)}else if(exp.test(_e)){const _=_e.replace(exp,(tt,nt,rt)=>String(Math.pow(Number(nt),Number(rt))));return evaluate(_)}else if(mul.test(_e)){const _=_e.replace(mul,(tt,nt,rt)=>String(Number(nt)*Number(rt)));return evaluate(_)}else if(div.test(_e)){const _=_e.replace(div,(tt,nt,rt)=>{if(rt!=0)return String(Number(nt)/Number(rt));throw new Error("Division by zero")});return evaluate(_)}else if(add.test(_e)){const _=_e.replace(add,(tt,nt,rt)=>String(Number(nt)+Number(rt)));return evaluate(_)}else if(sub.test(_e)){const _=_e.replace(sub,(tt,nt,rt)=>String(Number(nt)-Number(rt)));return evaluate(_)}else return Number(_e);return Number(_e)}function pick(_e,_){return _.reduce((tt,nt)=>(_e&&_e.hasOwnProperty(nt)&&(tt[nt]=_e[nt]),tt),{})}function omit(_e,_){const tt=_objectSpread2({},_e);return _.forEach(nt=>nt in _e&&delete tt[nt]),tt}function mapArrayToKeys(_e,_){return _e.reduce((tt,nt,rt)=>Object.assign(tt,{[_[rt]]:nt}),{})}function isObject$8(_e){return Object.prototype.toString.call(_e)==="[object Object]"}const isEmptyObject=_e=>isObject$8(_e)&&Object.keys(_e).length===0;let SpecialInputs;(function(_e){_e.BUTTON="BUTTON",_e.BUTTON_GROUP="BUTTON_GROUP",_e.MONITOR="MONITOR",_e.FOLDER="FOLDER"})(SpecialInputs||(SpecialInputs={}));let LevaInputs;(function(_e){_e.SELECT="SELECT",_e.IMAGE="IMAGE",_e.NUMBER="NUMBER",_e.COLOR="COLOR",_e.STRING="STRING",_e.BOOLEAN="BOOLEAN",_e.INTERVAL="INTERVAL",_e.VECTOR3D="VECTOR3D",_e.VECTOR2D="VECTOR2D"})(LevaInputs||(LevaInputs={}));const _excluded$9=["type","__customInput"],_excluded2$3=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_excluded3$2=["type"];function parseOptions(_e,_,tt={},nt){var rt,it;if(typeof _e!="object"||Array.isArray(_e))return{type:nt,input:_e,options:_objectSpread2({key:_,label:_,optional:!1,disabled:!1,order:0},tt)};if("__customInput"in _e){const{type:At,__customInput:bt}=_e,Et=_objectWithoutProperties$1(_e,_excluded$9);return parseOptions(bt,_,Et,At)}const{render:st,label:ot,optional:at,order:lt=0,disabled:ct,hint:ut,onChange:dt,onEditStart:ht,onEditEnd:mt,transient:yt}=_e,vt=_objectWithoutProperties$1(_e,_excluded2$3),pt=_objectSpread2({render:st,key:_,label:ot??_,hint:ut,transient:yt??!!dt,onEditStart:ht,onEditEnd:mt,disabled:ct,optional:at,order:lt},tt);let{type:_t}=vt,xt=_objectWithoutProperties$1(vt,_excluded3$2);if(_t=nt??_t,_t in SpecialInputs)return{type:_t,input:xt,options:pt};let St;return nt&&isObject$8(xt)&&"value"in xt?St=xt.value:St=isEmptyObject(xt)?void 0:xt,{type:_t,input:St,options:_objectSpread2(_objectSpread2({},pt),{},{onChange:dt,optional:(rt=pt.optional)!==null&&rt!==void 0?rt:!1,disabled:(it=pt.disabled)!==null&&it!==void 0?it:!1})}}function normalizeInput(_e,_,tt,nt){const rt=parseOptions(_e,_),{type:it,input:st,options:ot}=rt;if(it)return it in SpecialInputs?rt:{type:it,input:normalize$3$1(it,st,tt,nt),options:ot};let at=getValueType(st);return at?{type:at,input:normalize$3$1(at,st,tt,nt),options:ot}:(at=getValueType({value:st}),at?{type:at,input:normalize$3$1(at,{value:st},tt,nt),options:ot}:!1)}function updateInput(_e,_,tt,nt,rt){const{value:it,type:st,settings:ot}=_e;_e.value=sanitizeValue({type:st,value:it,settings:ot},_,tt,nt),_e.fromPanel=rt}const ValueError=function(_,tt,nt){this.type="LEVA_ERROR",this.message="LEVA: "+_,this.previousValue=tt,this.error=nt};function sanitizeValue({type:_e,value:_,settings:tt},nt,rt,it){const st=_e!=="SELECT"&&typeof nt=="function"?nt(_):nt;let ot;try{ot=sanitize$4(_e,st,tt,_,rt,it)}catch(at){throw new ValueError(`The value \`${nt}\` did not result in a correct value.`,_,at)}return dequal(ot,_)?_:ot}const debounce=(_e,_,tt=!1)=>{let nt=0;return function(){const rt=arguments,it=tt&&!nt,st=()=>_e.apply(this,rt);window.clearTimeout(nt),nt=window.setTimeout(st,_),it&&st()}},multiplyStep=_e=>_e.shiftKey?5:_e.altKey?1/5:1;function render(_e,_){const tt=console.error;console.error=()=>{},ReactDOM.render(_e,_),console.error=tt}const _excluded$8=["value"],_excluded2$2$1=["min","max"],schema$3=_e=>{if(typeof _e=="number")return!0;if(typeof _e=="string"){const _=parseFloat(_e);return isNaN(_)?!1:_e.substring((""+_).length).trim().length<4}return!1},sanitize$3=(_e,{min:_=-1/0,max:tt=1/0,suffix:nt})=>{const rt=parseFloat(_e);if(_e===""||isNaN(rt))throw Error("Invalid number");const it=clamp(rt,_,tt);return nt?it+nt:it},format$1$1=(_e,{pad:_=0,suffix:tt})=>{const nt=parseFloat(_e).toFixed(_);return tt?nt+tt:nt},normalize$2$1=_e=>{let{value:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$8);const{min:nt=-1/0,max:rt=1/0}=tt,it=_objectWithoutProperties$1(tt,_excluded2$2$1);let st=parseFloat(_);const ot=typeof _=="string"?_.substring((""+st).length):void 0;st=clamp(st,nt,rt);let at=tt.step;at||(Number.isFinite(nt)?Number.isFinite(rt)?at=+(Math.abs(rt-nt)/100).toPrecision(1):at=+(Math.abs(st-nt)/100).toPrecision(1):Number.isFinite(rt)&&(at=+(Math.abs(rt-st)/100).toPrecision(1)));const lt=at?getStep(at)*10:getStep(st);at=at||lt/10;const ct=Math.round(clamp(Math.log10(1/lt),0,2));return{value:ot?st+ot:st,settings:_objectSpread2({initialValue:st,step:at,pad:ct,min:nt,max:rt,suffix:ot},it)}},sanitizeStep$1=(_e,{step:_,initialValue:tt})=>{const nt=Math.round((_e-tt)/_);return tt+nt*_};var props$3=Object.freeze({__proto__:null,schema:schema$3,sanitize:sanitize$3,format:format$1$1,normalize:normalize$2$1,sanitizeStep:sanitizeStep$1});function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends.apply(this,arguments)}const InputContext=reactExports.createContext({});function useInputContext(){return reactExports.useContext(InputContext)}const ThemeContext=reactExports.createContext(null),StoreContext=reactExports.createContext(null),PanelSettingsContext=reactExports.createContext(null);function useStoreContext(){return reactExports.useContext(StoreContext)}function usePanelSettingsContext(){return reactExports.useContext(PanelSettingsContext)}const getDefaultTheme=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function createStateClass(_e,_){const[tt,nt]=_e.split(" "),rt={};return tt!=="none"&&(rt.boxShadow=`${_.inset?"inset ":""}0 0 0 $borderWidths${[_.key]} $colors${tt!=="default"&&tt||_.borderColor}`),nt&&(rt.backgroundColor=nt),rt}const utils={$inputStyle:()=>_e=>createStateClass(_e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>_e=>createStateClass(_e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>_e=>createStateClass(_e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>_e=>createStateClass(_e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled,css,createTheme,globalCss,keyframes}=q$1({prefix:"leva",theme:getDefaultTheme(),utils:_objectSpread2(_objectSpread2({},utils),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:_e=>({"&:focus":utils.$focusStyle()(_e)}),$focusWithin:_e=>({"&:focus-within":utils.$focusStyle()(_e)}),$hover:_e=>({"&:hover":utils.$hoverStyle()(_e)}),$active:_e=>({"&:active":utils.$activeStyle()(_e)})})}),globalStyles=globalCss({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function mergeTheme(_e){const _=getDefaultTheme();if(!_e)return{theme:_,className:""};Object.keys(_e).forEach(nt=>{Object.assign(_[nt],_e[nt])});const tt=createTheme(_);return{theme:_,className:tt.className}}function useTh(_e,_){const{theme:tt}=reactExports.useContext(ThemeContext);if(!(_e in tt)||!(_ in tt[_e]))return warn(LevaErrors.THEME_ERROR,_e,_),"";let nt=_;for(;;){let rt=tt[_e][nt];if(typeof rt=="string"&&rt.charAt(0)==="$")nt=rt.substr(1);else return rt}}const StyledInput=styled("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),InnerLabel=styled("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${StyledInput}`]:{paddingLeft:0}}),InnerNumberLabel=styled(InnerLabel,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),InputContainer=styled("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),_excluded$7$1=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_excluded2$1$1=["onUpdate"];function ValueInput(_e){let{innerLabel:_,value:tt,onUpdate:nt,onChange:rt,onKeyDown:it,type:st,id:ot,inputType:at="text",rows:lt=0}=_e,ct=_objectWithoutProperties$1(_e,_excluded$7$1);const{id:ut,emitOnEditStart:dt,emitOnEditEnd:ht,disabled:mt}=useInputContext(),yt=ot||ut,vt=reactExports.useRef(null),pt=lt>0,_t=pt?"textarea":"input",xt=reactExports.useCallback(bt=>Et=>{const wt=Et.currentTarget.value;bt(wt)},[]);React.useEffect(()=>{const bt=vt.current,Et=xt(wt=>{nt(wt),ht()});return bt==null||bt.addEventListener("blur",Et),()=>bt==null?void 0:bt.removeEventListener("blur",Et)},[xt,nt,ht]);const St=reactExports.useCallback(bt=>{bt.key==="Enter"&&xt(nt)(bt)},[xt,nt]),At=Object.assign({as:_t},pt?{rows:lt}:{},ct);return React.createElement(InputContainer,{textArea:pt},_&&typeof _=="string"?React.createElement(InnerLabel,null,_):_,React.createElement(StyledInput,_extends({levaType:st,ref:vt,id:yt,type:at,autoComplete:"off",spellCheck:"false",value:tt,onChange:xt(rt),onFocus:()=>dt(),onKeyPress:St,onKeyDown:it,disabled:mt},At)))}function NumberInput(_e){let{onUpdate:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded2$1$1);const nt=reactExports.useCallback(it=>_(parseNumber(it)),[_]),rt=reactExports.useCallback(it=>{const st=it.key==="ArrowUp"?1:it.key==="ArrowDown"?-1:0;if(st){it.preventDefault();const ot=it.altKey?.1:it.shiftKey?10:1;_(at=>parseFloat(at)+st*ot)}},[_]);return React.createElement(ValueInput,_extends({},tt,{onUpdate:nt,onKeyDown:rt,type:"number"}))}const StyledFolder=styled("div",{}),StyledWrapper=styled("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),StyledTitle=styled("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & > svg`]:{opacity:1}}),StyledContent=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${StyledFolder}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),StyledRow=styled("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${StyledContent} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),StyledInputRow=styled(StyledRow,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),CopyLabelContainer=styled("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),StyledOptionalToggle=styled("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),StyledLabel=styled("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),StyledInputWrapper$1=styled("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${StyledLabel}`]:{pointerEvents:"auto"}}}}}),Overlay=styled("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),StyledToolTipContent=styled("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ToolTipArrow=styled(Arrow2,{fill:"$toolTipBackground"});function Portal({children:_e}){const{className:_}=reactExports.useContext(ThemeContext);return React.createElement(Root$2,{className:_},_e)}const _excluded$6$1=["align"];function OptionalToggle(){const{id:_e,disable:_,disabled:tt}=useInputContext();return React.createElement(React.Fragment,null,React.createElement(StyledOptionalToggle,{id:_e+"__disable",type:"checkbox",checked:!tt,onChange:()=>_(!tt)}),React.createElement("label",{htmlFor:_e+"__disable"}))}function RawLabel(_e){const{id:_,optional:tt,hint:nt}=useInputContext(),rt=_e.htmlFor||(_?{htmlFor:_}:null),it=!nt&&typeof _e.children=="string"?{title:_e.children}:null;return React.createElement(React.Fragment,null,tt&&React.createElement(OptionalToggle,null),nt!==void 0?React.createElement(Root3,null,React.createElement(Trigger,{asChild:!0},React.createElement(StyledLabel,_extends({},rt,_e))),React.createElement(Content2,{side:"top",sideOffset:2},React.createElement(StyledToolTipContent,null,nt,React.createElement(ToolTipArrow,null)))):React.createElement(StyledLabel,_extends({},rt,it,_e)))}function Label(_e){let{align:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$6$1);const{value:nt,label:rt,key:it,disabled:st}=useInputContext(),{hideCopyButton:ot}=usePanelSettingsContext(),at=!ot&&it!==void 0,[lt,ct]=reactExports.useState(!1),ut=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[it]:nt??""})),ct(!0)}catch{warn(LevaErrors.CLIPBOARD_ERROR,{[it]:nt})}};return React.createElement(CopyLabelContainer,{align:_,onPointerLeave:()=>ct(!1)},React.createElement(RawLabel,tt),at&&!st&&React.createElement("div",{title:`Click to copy ${typeof rt=="string"?rt:it} value`},lt?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),React.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):React.createElement("svg",{onClick:ut,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),React.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const _excluded$5$1=["toggled"],Svg=styled("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Chevron(_e){let{toggled:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$5$1);return React.createElement(Svg,_extends({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${_?0:-90}deg)`}},tt),React.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const _excluded$4$1=["input"];function Row(_e){let{input:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$4$1);return _?React.createElement(StyledInputRow,tt):React.createElement(StyledRow,tt)}function useInputSetters({value:_e,type:_,settings:tt,setValue:nt}){const[rt,it]=reactExports.useState(format$2(_,_e,tt)),st=reactExports.useRef(_e),ot=reactExports.useRef(tt);ot.current=tt;const at=reactExports.useCallback(ct=>it(format$2(_,ct,ot.current)),[_]),lt=reactExports.useCallback(ct=>{try{nt(ct)}catch(ut){const{type:dt,previousValue:ht}=ut;if(dt!=="LEVA_ERROR")throw ut;at(ht)}},[at,nt]);return reactExports.useEffect(()=>{dequal(_e,st.current)||at(_e),st.current=_e},[_e,at]),{displayValue:rt,onChange:it,onUpdate:lt}}function useDrag(_e,_){const{emitOnEditStart:tt,emitOnEditEnd:nt}=useInputContext();return useDrag$1(rt=>{rt.first&&(document.body.classList.add("leva__panel__dragged"),tt==null||tt());const it=_e(rt);return rt.last&&(document.body.classList.remove("leva__panel__dragged"),nt==null||nt()),it},_)}function useCanvas2d(_e){const _=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=debounce(()=>{_.current.width=_.current.offsetWidth*window.devicePixelRatio,_.current.height=_.current.offsetHeight*window.devicePixelRatio,_e(_.current,tt.current)},250);return window.addEventListener("resize",rt),nt.current||(rt(),nt.current=!0),()=>window.removeEventListener("resize",rt)},[_e]),reactExports.useEffect(()=>{tt.current=_.current.getContext("2d")},[]),[_,tt]}function useTransform(){const _e=reactExports.useRef(null),_=reactExports.useRef({x:0,y:0}),tt=reactExports.useCallback(nt=>{Object.assign(_.current,nt),_e.current&&(_e.current.style.transform=`translate3d(${_.current.x}px, ${_.current.y}px, 0)`)},[]);return[_e,tt]}const _excluded$3$1=["__refCount"],getInputAtPath=(_e,_)=>{if(!_e[_])return null;const tt=_e[_];return _objectWithoutProperties$1(tt,_excluded$3$1)};function useInput(_e){const _=useStoreContext(),[tt,nt]=reactExports.useState(getInputAtPath(_.getData(),_e)),rt=reactExports.useCallback(lt=>_.setValueAtPath(_e,lt,!0),[_e,_]),it=reactExports.useCallback(lt=>_.setSettingsAtPath(_e,lt),[_e,_]),st=reactExports.useCallback(lt=>_.disableInputAtPath(_e,lt),[_e,_]),ot=reactExports.useCallback(()=>_.emitOnEditStart(_e),[_e,_]),at=reactExports.useCallback(()=>_.emitOnEditEnd(_e),[_e,_]);return reactExports.useEffect(()=>{nt(getInputAtPath(_.getData(),_e));const lt=_.useStore.subscribe(ct=>getInputAtPath(ct.data,_e),nt,{equalityFn:shallow});return()=>lt()},[_,_e]),[tt,{set:rt,setSettings:it,disable:st,storeId:_.storeId,emitOnEditStart:ot,emitOnEditEnd:at}]}const RangeGrid=styled("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Range=styled("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Scrubber=styled("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),RangeWrapper=styled("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Indicator=styled("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function RangeSlider({value:_e,min:_,max:tt,onDrag:nt,step:rt,initialValue:it}){const st=reactExports.useRef(null),ot=reactExports.useRef(null),at=reactExports.useRef(0),lt=useTh("sizes","scrubberWidth"),ct=useDrag(({event:dt,first:ht,xy:[mt],movement:[yt],memo:vt})=>{if(ht){const{width:_t,left:xt}=st.current.getBoundingClientRect();at.current=_t-parseFloat(lt),vt=(dt==null?void 0:dt.target)===ot.current?_e:invertedRange((mt-xt)/_t,_,tt)}const pt=vt+invertedRange(yt/at.current,0,tt-_);return nt(sanitizeStep$1(pt,{step:rt,initialValue:it})),vt}),ut=range(_e,_,tt);return React.createElement(RangeWrapper,_extends({ref:st},ct()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:0,right:`${(1-ut)*100}%`}})),React.createElement(Scrubber,{ref:ot,style:{left:`calc(${ut} * (100% - ${lt}))`}}))}const DraggableLabel=React.memo(({label:_e,onUpdate:_,step:tt,innerLabelTrim:nt})=>{const[rt,it]=reactExports.useState(!1),st=useDrag(({active:ot,delta:[at],event:lt,memo:ct=0})=>(it(ot),ct+=at/2,Math.abs(ct)>=1&&(_(ut=>parseFloat(ut)+Math.floor(ct)*tt*multiplyStep(lt)),ct=0),ct));return React.createElement(InnerNumberLabel,_extends({dragging:rt,title:_e.length>1?_e:""},st()),_e.slice(0,nt))});function Number$1({label:_e,id:_,displayValue:tt,onUpdate:nt,onChange:rt,settings:it,innerLabelTrim:st=1}){const ot=st>0&&React.createElement(DraggableLabel,{label:_e,step:it.step,onUpdate:nt,innerLabelTrim:st});return React.createElement(NumberInput,{id:_,value:String(tt),onUpdate:nt,onChange:rt,innerLabel:ot})}function NumberComponent(){const _e=useInputContext(),{label:_,value:tt,onUpdate:nt,settings:rt,id:it}=_e,{min:st,max:ot}=rt,at=ot!==1/0&&st!==-1/0;return React.createElement(Row,{input:!0},React.createElement(Label,null,_),React.createElement(RangeGrid,{hasRange:at},at&&React.createElement(RangeSlider,_extends({value:parseFloat(tt),onDrag:nt},rt)),React.createElement(Number$1,_extends({},_e,{id:it,label:"value",innerLabelTrim:at?0:1}))))}const{sanitizeStep}=props$3,rest=_objectWithoutProperties$1(props$3,["sanitizeStep"]);var number$1=_objectSpread2({component:NumberComponent},rest);const schema$2$1=(_e,_)=>v8n().schema({options:v8n().passesAnyOf(v8n().object(),v8n().array())}).test(_),sanitize$2$1=(_e,{values:_})=>{if(_.indexOf(_e)<0)throw Error("Selected value doesn't match Select options");return _e},format$3=(_e,{values:_})=>_.indexOf(_e),normalize$1$1=_e=>{let{value:_,options:tt}=_e,nt,rt;return Array.isArray(tt)?(rt=tt,nt=tt.map(it=>String(it))):(rt=Object.values(tt),nt=Object.keys(tt)),"value"in _e?rt.includes(_)||(nt.unshift(String(_)),rt.unshift(_)):_=rt[0],Object.values(tt).includes(_)||(tt[String(_)]=_),{value:_,settings:{keys:nt,values:rt}}};var props$2$1=Object.freeze({__proto__:null,schema:schema$2$1,sanitize:sanitize$2$1,format:format$3,normalize:normalize$1$1});const SelectContainer=styled("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),NativeSelect=styled("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),PresentationalSelect=styled("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${NativeSelect}:focus + &`]:{$focusStyle:""},[`${NativeSelect}:hover + &`]:{$hoverStyle:""}});function Select({displayValue:_e,value:_,onUpdate:tt,id:nt,settings:rt,disabled:it}){const{keys:st,values:ot}=rt,at=reactExports.useRef();return _===ot[_e]&&(at.current=st[_e]),React.createElement(SelectContainer,null,React.createElement(NativeSelect,{id:nt,value:_e,onChange:lt=>tt(ot[Number(lt.currentTarget.value)]),disabled:it},st.map((lt,ct)=>React.createElement("option",{key:lt,value:ct},lt))),React.createElement(PresentationalSelect,null,at.current),React.createElement(Chevron,{toggled:!0}))}function SelectComponent(){const{label:_e,value:_,displayValue:tt,onUpdate:nt,id:rt,disabled:it,settings:st}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Select,{id:rt,value:_,displayValue:tt,onUpdate:nt,settings:st,disabled:it}))}var select=_objectSpread2({component:SelectComponent},props$2$1);const schema$1$1=_e=>v8n().string().test(_e),sanitize$1$1=_e=>{if(typeof _e!="string")throw Error("Invalid string");return _e},normalize$4=({value:_e,editable:_=!0,rows:tt=!1})=>({value:_e,settings:{editable:_,rows:typeof tt=="number"?tt:tt?5:0}});var props$1$1=Object.freeze({__proto__:null,schema:schema$1$1,sanitize:sanitize$1$1,normalize:normalize$4});const _excluded$2$1=["displayValue","onUpdate","onChange","editable"],NonEditableString=styled("div",{whiteSpace:"pre-wrap"});function String$1(_e){let{displayValue:_,onUpdate:tt,onChange:nt,editable:rt=!0}=_e,it=_objectWithoutProperties$1(_e,_excluded$2$1);return rt?React.createElement(ValueInput,_extends({value:_,onUpdate:tt,onChange:nt},it)):React.createElement(NonEditableString,null,_)}function StringComponent(){const{label:_e,settings:_,displayValue:tt,onUpdate:nt,onChange:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(String$1,_extends({displayValue:tt,onUpdate:nt,onChange:rt},_)))}var string=_objectSpread2({component:StringComponent},props$1$1);const schema$4=_e=>v8n().boolean().test(_e),sanitize$5=_e=>{if(typeof _e!="boolean")throw Error("Invalid boolean");return _e};var props$4=Object.freeze({__proto__:null,schema:schema$4,sanitize:sanitize$5});const StyledInputWrapper=styled("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Boolean$1({value:_e,onUpdate:_,id:tt,disabled:nt}){return React.createElement(StyledInputWrapper,null,React.createElement("input",{id:tt,type:"checkbox",checked:_e,onChange:rt=>_(rt.currentTarget.checked),disabled:nt}),React.createElement("label",{htmlFor:tt},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function BooleanComponent(){const{label:_e,value:_,onUpdate:tt,disabled:nt,id:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Boolean$1,{value:_,onUpdate:tt,id:rt,disabled:nt}))}var boolean=_objectSpread2({component:BooleanComponent},props$4);const _excluded$1$1=["locked"];function Coordinate({value:_e,id:_,valueKey:tt,settings:nt,onUpdate:rt,innerLabelTrim:it}){const st=reactExports.useRef(_e[tt]);st.current=_e[tt];const ot=reactExports.useCallback(lt=>rt({[tt]:sanitizeValue({type:"NUMBER",value:st.current,settings:nt},lt)}),[rt,nt,tt]),at=useInputSetters({type:"NUMBER",value:_e[tt],settings:nt,setValue:ot});return React.createElement(Number$1,{id:_,label:tt,value:_e[tt],displayValue:at.displayValue,onUpdate:at.onUpdate,onChange:at.onChange,settings:nt,innerLabelTrim:it})}const Container$2=styled("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Lock(_e){let{locked:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$1$1);return React.createElement("svg",_extends({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt),_?React.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):React.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Vector({value:_e,onUpdate:_,settings:tt,innerLabelTrim:nt}){const{id:rt,setSettings:it}=useInputContext(),{lock:st,locked:ot}=tt;return React.createElement(Container$2,{withLock:st},st&&React.createElement(Lock,{locked:ot,onClick:()=>it({locked:!ot})}),Object.keys(_e).map((at,lt)=>React.createElement(Coordinate,{id:lt===0?rt:`${rt}.${at}`,key:at,valueKey:at,value:_e,settings:tt[at],onUpdate:_,innerLabelTrim:nt})))}const normalizeKeyedNumberSettings=(_e,_)=>{const tt={};let nt=0,rt=1/0;Object.entries(_e).forEach(([it,st])=>{tt[it]=normalize$2$1(_objectSpread2({value:st},_[it])).settings,nt=Math.max(nt,tt[it].step),rt=Math.min(rt,tt[it].pad)});for(let it in tt){const{step:st,min:ot,max:at}=_[it]||{};!isFinite(st)&&(!isFinite(ot)||!isFinite(at))&&(tt[it].step=nt,tt[it].pad=rt)}return tt},_excluded$b=["lock"],_excluded2$5=["value"];function getVectorSchema(_e){const _=v8n().array().length(_e).every.number(),tt=nt=>{if(!nt||typeof nt!="object")return!1;const rt=Object.values(nt);return rt.length===_e&&rt.every(it=>isFinite(it))};return nt=>_.test(nt)||tt(nt)}function getVectorType(_e){return Array.isArray(_e)?"array":"object"}function convert$1(_e,_,tt){return getVectorType(_e)===_?_e:_==="array"?Object.values(_e):mapArrayToKeys(_e,tt)}const sanitizeVector=(_e,_,tt)=>{const nt=convert$1(_e,"object",_.keys);for(let st in nt)nt[st]=sanitize$3(nt[st],_[st]);const rt=Object.keys(nt);let it={};if(rt.length===_.keys.length)it=nt;else{const st=convert$1(tt,"object",_.keys);if(rt.length===1&&_.locked){const ot=rt[0],at=nt[ot],lt=st[ot],ct=lt!==0?at/lt:1;for(let ut in st)ut===ot?it[ot]=at:it[ut]=st[ut]*ct}else it=_objectSpread2(_objectSpread2({},st),nt)}return convert$1(it,_.format,_.keys)},formatVector=(_e,_)=>convert$1(_e,"object",_.keys),isNumberSettings=_e=>!!_e&&("step"in _e||"min"in _e||"max"in _e);function normalizeVector(_e,_,tt=[]){const{lock:nt=!1}=_,rt=_objectWithoutProperties$1(_,_excluded$b),it=Array.isArray(_e)?"array":"object",st=it==="object"?Object.keys(_e):tt,ot=convert$1(_e,"object",st),at=isNumberSettings(rt)?st.reduce((ct,ut)=>Object.assign(ct,{[ut]:rt}),{}):rt,lt=normalizeKeyedNumberSettings(ot,at);return{value:it==="array"?_e:ot,settings:_objectSpread2(_objectSpread2({},lt),{},{format:it,keys:st,lock:nt,locked:!1})}}function getVectorPlugin(_e){return{schema:getVectorSchema(_e.length),normalize:_=>{let{value:tt}=_,nt=_objectWithoutProperties$1(_,_excluded2$5);return normalizeVector(tt,nt,_e)},format:(_,tt)=>formatVector(_,tt),sanitize:(_,tt,nt)=>sanitizeVector(_,tt,nt)}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_e){return typeof _e=="string"?_e.length>0:typeof _e=="number"},n=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=Math.pow(10,_)),Math.round(tt*_e)/tt+0},e=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=1),_e>tt?tt:_e>_?_e:_},u$1=function(_e){return(_e=isFinite(_e)?_e%360:0)>0?_e:_e+360},a=function(_e){return{r:e(_e.r,0,255),g:e(_e.g,0,255),b:e(_e.b,0,255),a:e(_e.a)}},o=function(_e){return{r:n(_e.r),g:n(_e.g),b:n(_e.b),a:n(_e.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s$1=function(_e){var _=_e.toString(16);return _.length<2?"0"+_:_},h$1=function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=Math.max(_,tt,nt),st=it-Math.min(_,tt,nt),ot=st?it===_?(tt-nt)/st:it===tt?2+(nt-_)/st:4+(_-tt)/st:0;return{h:60*(ot<0?ot+6:ot),s:it?st/it*100:0,v:it/255*100,a:rt}},b$1=function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a;_=_/360*6,tt/=100,nt/=100;var it=Math.floor(_),st=nt*(1-tt),ot=nt*(1-(_-it)*tt),at=nt*(1-(1-_+it)*tt),lt=it%6;return{r:255*[nt,ot,st,st,at,nt][lt],g:255*[at,nt,nt,ot,st,st][lt],b:255*[st,st,at,nt,nt,ot][lt],a:rt}},g$1=function(_e){return{h:u$1(_e.h),s:e(_e.s,0,100),l:e(_e.l,0,100),a:e(_e.a)}},d$1=function(_e){return{h:n(_e.h),s:n(_e.s),l:n(_e.l),a:n(_e.a,3)}},f$1=function(_e){return b$1((tt=(_=_e).s,{h:_.h,s:(tt*=((nt=_.l)<50?nt:100-nt)/100)>0?2*tt/(nt+tt)*100:0,v:nt+tt,a:_.a}));var _,tt,nt},c$1=function(_e){return{h:(_=h$1(_e)).h,s:(rt=(200-(tt=_.s))*(nt=_.v)/100)>0&&rt<200?tt*nt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,tt,nt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(_e){var _=i$1.exec(_e);return _?(_e=_[1]).length<=4?{r:parseInt(_e[0]+_e[0],16),g:parseInt(_e[1]+_e[1],16),b:parseInt(_e[2]+_e[2],16),a:_e.length===4?n(parseInt(_e[3]+_e[3],16)/255,2):1}:_e.length===6||_e.length===8?{r:parseInt(_e.substr(0,2),16),g:parseInt(_e.substr(2,2),16),b:parseInt(_e.substr(4,2),16),a:_e.length===8?n(parseInt(_e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_e){var _=v$1.exec(_e)||m$1.exec(_e);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(_e){var _=l.exec(_e)||p$1.exec(_e);if(!_)return null;var tt,nt,rt=g$1({h:(tt=_[1],nt=_[2],nt===void 0&&(nt="deg"),Number(tt)*(r[nt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f$1(rt)},"hsl"]],object:[[function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=rt===void 0?1:rt;return t(_)&&t(tt)&&t(nt)?a({r:Number(_),g:Number(tt),b:Number(nt),a:Number(it)}):null},"rgb"],[function(_e){var _=_e.h,tt=_e.s,nt=_e.l,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(tt)||!t(nt))return null;var st=g$1({h:Number(_),s:Number(tt),l:Number(nt),a:Number(it)});return f$1(st)},"hsl"],[function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(tt)||!t(nt))return null;var st=function(ot){return{h:u$1(ot.h),s:e(ot.s,0,100),v:e(ot.v,0,100),a:e(ot.a)}}({h:Number(_),s:Number(tt),v:Number(nt),a:Number(it)});return b$1(st)},"hsv"]]},N=function(_e,_){for(var tt=0;tt<_.length;tt++){var nt=_[tt][0](_e);if(nt)return[nt,_[tt][1]]}return[null,void 0]},x=function(_e){return typeof _e=="string"?N(_e.trim(),y$1.string):typeof _e=="object"&&_e!==null?N(_e,y$1.object):[null,void 0]},I$1=function(_e){return x(_e)[1]},M=function(_e,_){var tt=c$1(_e);return{h:tt.h,s:e(tt.s+100*_,0,100),l:tt.l,a:tt.a}},H=function(_e){return(299*_e.r+587*_e.g+114*_e.b)/1e3/255},$$1=function(_e,_){var tt=c$1(_e);return{h:tt.h,s:tt.s,l:e(tt.l+100*_,0,100),a:tt.a}},j=function(){function _e(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _e.prototype.isValid=function(){return this.parsed!==null},_e.prototype.brightness=function(){return n(H(this.rgba),2)},_e.prototype.isDark=function(){return H(this.rgba)<.5},_e.prototype.isLight=function(){return H(this.rgba)>=.5},_e.prototype.toHex=function(){return _=o(this.rgba),tt=_.r,nt=_.g,rt=_.b,st=(it=_.a)<1?s$1(n(255*it)):"","#"+s$1(tt)+s$1(nt)+s$1(rt)+st;var _,tt,nt,rt,it,st},_e.prototype.toRgb=function(){return o(this.rgba)},_e.prototype.toRgbString=function(){return _=o(this.rgba),tt=_.r,nt=_.g,rt=_.b,(it=_.a)<1?"rgba("+tt+", "+nt+", "+rt+", "+it+")":"rgb("+tt+", "+nt+", "+rt+")";var _,tt,nt,rt,it},_e.prototype.toHsl=function(){return d$1(c$1(this.rgba))},_e.prototype.toHslString=function(){return _=d$1(c$1(this.rgba)),tt=_.h,nt=_.s,rt=_.l,(it=_.a)<1?"hsla("+tt+", "+nt+"%, "+rt+"%, "+it+")":"hsl("+tt+", "+nt+"%, "+rt+"%)";var _,tt,nt,rt,it},_e.prototype.toHsv=function(){return _=h$1(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},_e.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},_e.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},_e.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},_e.prototype.grayscale=function(){return w(M(this.rgba,-1))},_e.prototype.lighten=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,_))},_e.prototype.darken=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,-_))},_e.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},_e.prototype.alpha=function(_){return typeof _=="number"?w({r:(tt=this.rgba).r,g:tt.g,b:tt.b,a:_}):n(this.rgba.a,3);var tt},_e.prototype.hue=function(_){var tt=c$1(this.rgba);return typeof _=="number"?w({h:_,s:tt.s,l:tt.l,a:tt.a}):n(tt.h)},_e.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},_e}(),w=function(_e){return _e instanceof j?_e:new j(_e)},S$1=[],k$1=function(_e){_e.forEach(function(_){S$1.indexOf(_)<0&&(_(j,y$1),S$1.push(_))})};function namesPlugin(_e,_){var tt={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},nt={};for(var rt in tt)nt[tt[rt]]=rt;var it={};_e.prototype.toName=function(st){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var ot,at,lt=nt[this.toHex()];if(lt)return lt;if(st!=null&&st.closest){var ct=this.toRgb(),ut=1/0,dt="black";if(!it.length)for(var ht in tt)it[ht]=new _e(tt[ht]).toRgb();for(var mt in tt){var yt=(ot=ct,at=it[mt],Math.pow(ot.r-at.r,2)+Math.pow(ot.g-at.g,2)+Math.pow(ot.b-at.b,2));yt<ut&&(ut=yt,dt=mt)}return dt}},_.string.push([function(st){var ot=st.toLowerCase(),at=ot==="transparent"?"#0000":tt[ot];return at?new _e(at).toRgb():null},"name"])}function u(){return(u=Object.assign||function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e}).apply(this,arguments)}function c(_e,_){if(_e==null)return{};var tt,nt,rt={},it=Object.keys(_e);for(nt=0;nt<it.length;nt++)_.indexOf(tt=it[nt])>=0||(rt[tt]=_e[tt]);return rt}function i(_e){var _=reactExports.useRef(_e),tt=reactExports.useRef(function(nt){_.current&&_.current(nt)});return _.current=_e,tt.current}var s=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=1),_e>tt?tt:_e<_?_:_e},f=function(_e){return"touches"in _e},v=function(_e){return _e&&_e.ownerDocument.defaultView||self},d=function(_e,_,tt){var nt=_e.getBoundingClientRect(),rt=f(_)?function(it,st){for(var ot=0;ot<it.length;ot++)if(it[ot].identifier===st)return it[ot];return it[0]}(_.touches,tt):_;return{left:s((rt.pageX-(nt.left+v(_e).pageXOffset))/nt.width),top:s((rt.pageY-(nt.top+v(_e).pageYOffset))/nt.height)}},h=function(_e){!f(_e)&&_e.preventDefault()},m=React.memo(function(_e){var _=_e.onMove,tt=_e.onKey,nt=c(_e,["onMove","onKey"]),rt=reactExports.useRef(null),it=i(_),st=i(tt),ot=reactExports.useRef(null),at=reactExports.useRef(!1),lt=reactExports.useMemo(function(){var ht=function(vt){h(vt),(f(vt)?vt.touches.length>0:vt.buttons>0)&&rt.current?it(d(rt.current,vt,ot.current)):yt(!1)},mt=function(){return yt(!1)};function yt(vt){var pt=at.current,_t=v(rt.current),xt=vt?_t.addEventListener:_t.removeEventListener;xt(pt?"touchmove":"mousemove",ht),xt(pt?"touchend":"mouseup",mt)}return[function(vt){var pt=vt.nativeEvent,_t=rt.current;if(_t&&(h(pt),!function(St,At){return At&&!f(St)}(pt,at.current)&&_t)){if(f(pt)){at.current=!0;var xt=pt.changedTouches||[];xt.length&&(ot.current=xt[0].identifier)}_t.focus(),it(d(_t,pt,ot.current)),yt(!0)}},function(vt){var pt=vt.which||vt.keyCode;pt<37||pt>40||(vt.preventDefault(),st({left:pt===39?.05:pt===37?-.05:0,top:pt===40?.05:pt===38?-.05:0}))},yt]},[st,it]),ct=lt[0],ut=lt[1],dt=lt[2];return reactExports.useEffect(function(){return dt},[dt]),React.createElement("div",u({},nt,{onTouchStart:ct,onMouseDown:ct,className:"react-colorful__interactive",ref:rt,onKeyDown:ut,tabIndex:0,role:"slider"}))}),g=function(_e){return _e.filter(Boolean).join(" ")},p=function(_e){var _=_e.color,tt=_e.left,nt=_e.top,rt=nt===void 0?.5:nt,it=g(["react-colorful__pointer",_e.className]);return React.createElement("div",{className:it,style:{top:100*rt+"%",left:100*tt+"%"}},React.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:_}}))},b=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=Math.pow(10,_)),Math.round(tt*_e)/tt},y=function(_e){var _=_e.s,tt=_e.v,nt=_e.a,rt=(200-_)*tt/100;return{h:b(_e.h),s:b(rt>0&&rt<200?_*tt/100/(rt<=100?rt:200-rt)*100:0),l:b(rt/2),a:b(nt,2)}},q=function(_e){var _=y(_e);return"hsl("+_.h+", "+_.s+"%, "+_.l+"%)"},k=function(_e){var _=y(_e);return"hsla("+_.h+", "+_.s+"%, "+_.l+"%, "+_.a+")"},I=function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a;_=_/360*6,tt/=100,nt/=100;var it=Math.floor(_),st=nt*(1-tt),ot=nt*(1-(_-it)*tt),at=nt*(1-(1-_+it)*tt),lt=it%6;return{r:b(255*[nt,ot,st,st,at,nt][lt]),g:b(255*[at,nt,nt,ot,st,st][lt]),b:b(255*[st,st,at,nt,nt,ot][lt]),a:b(rt,2)}},L=function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=Math.max(_,tt,nt),st=it-Math.min(_,tt,nt),ot=st?it===_?(tt-nt)/st:it===tt?2+(nt-_)/st:4+(_-tt)/st:0;return{h:b(60*(ot<0?ot+6:ot)),s:b(it?st/it*100:0),v:b(it/255*100),a:rt}},S=React.memo(function(_e){var _=_e.hue,tt=_e.onChange,nt=g(["react-colorful__hue",_e.className]);return React.createElement("div",{className:nt},React.createElement(m,{onMove:function(rt){tt({h:360*rt.left})},onKey:function(rt){tt({h:s(_+360*rt.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(_),"aria-valuemax":"360","aria-valuemin":"0"},React.createElement(p,{className:"react-colorful__hue-pointer",left:_/360,color:q({h:_,s:100,v:100,a:1})})))}),T=React.memo(function(_e){var _=_e.hsva,tt=_e.onChange,nt={backgroundColor:q({h:_.h,s:100,v:100,a:1})};return React.createElement("div",{className:"react-colorful__saturation",style:nt},React.createElement(m,{onMove:function(rt){tt({s:100*rt.left,v:100-100*rt.top})},onKey:function(rt){tt({s:s(_.s+100*rt.left,0,100),v:s(_.v-100*rt.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(_.s)+"%, Brightness "+b(_.v)+"%"},React.createElement(p,{className:"react-colorful__saturation-pointer",top:1-_.v/100,left:_.s/100,color:q(_)})))}),F=function(_e,_){if(_e===_)return!0;for(var tt in _e)if(_e[tt]!==_[tt])return!1;return!0};function Y(_e,_,tt){var nt=i(tt),rt=reactExports.useState(function(){return _e.toHsva(_)}),it=rt[0],st=rt[1],ot=reactExports.useRef({color:_,hsva:it});reactExports.useEffect(function(){if(!_e.equal(_,ot.current.color)){var lt=_e.toHsva(_);ot.current={hsva:lt,color:_},st(lt)}},[_,_e]),reactExports.useEffect(function(){var lt;F(it,ot.current.hsva)||_e.equal(lt=_e.fromHsva(it),ot.current.color)||(ot.current={hsva:it,color:lt},nt(lt))},[it,_e,nt]);var at=reactExports.useCallback(function(lt){st(function(ct){return Object.assign({},ct,lt)})},[]);return[it,at]}var V=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},J=new Map,Q=function(_e){V(function(){var _=_e.current?_e.current.ownerDocument:document;if(_!==void 0&&!J.has(_)){var tt=_.createElement("style");tt.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,J.set(_,tt);var nt=$();nt&&tt.setAttribute("nonce",nt),_.head.appendChild(tt)}},[])},U=function(_e){var _=_e.className,tt=_e.colorModel,nt=_e.color,rt=nt===void 0?tt.defaultColor:nt,it=_e.onChange,st=c(_e,["className","colorModel","color","onChange"]),ot=reactExports.useRef(null);Q(ot);var at=Y(tt,rt,it),lt=at[0],ct=at[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},st,{ref:ot,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct,className:"react-colorful__last-control"}))},ee=function(_e){var _=_e.className,tt=_e.hsva,nt=_e.onChange,rt={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},tt,{a:0}))+", "+k(Object.assign({},tt,{a:1}))+")"},it=g(["react-colorful__alpha",_]),st=b(100*tt.a);return React.createElement("div",{className:it},React.createElement("div",{className:"react-colorful__alpha-gradient",style:rt}),React.createElement(m,{onMove:function(ot){nt({a:ot.left})},onKey:function(ot){nt({a:s(tt.a+ot.left)})},"aria-label":"Alpha","aria-valuetext":st+"%","aria-valuenow":st,"aria-valuemin":"0","aria-valuemax":"100"},React.createElement(p,{className:"react-colorful__alpha-pointer",left:tt.a,color:k(tt)})))},re=function(_e){var _=_e.className,tt=_e.colorModel,nt=_e.color,rt=nt===void 0?tt.defaultColor:nt,it=_e.onChange,st=c(_e,["className","colorModel","color","onChange"]),ot=reactExports.useRef(null);Q(ot);var at=Y(tt,rt,it),lt=at[0],ct=at[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},st,{ref:ot,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct}),React.createElement(ee,{hsva:lt,onChange:ct,className:"react-colorful__last-control"}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(_e){return React.createElement(re,u({},_e,{colorModel:xe}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(_e){return L({r:_e.r,g:_e.g,b:_e.b,a:1})},fromHsva:function(_e){return{r:(_=I(_e)).r,g:_.g,b:_.b};var _},equal:F},Ne=function(_e){return React.createElement(U,u({},_e,{colorModel:Me}))};function __awaiter(_e,_,tt,nt){function rt(it){return it instanceof tt?it:new tt(function(st){st(it)})}return new(tt||(tt=Promise))(function(it,st){function ot(ct){try{lt(nt.next(ct))}catch(ut){st(ut)}}function at(ct){try{lt(nt.throw(ct))}catch(ut){st(ut)}}function lt(ct){ct.done?it(ct.value):rt(ct.value).then(ot,at)}lt((nt=nt.apply(_e,_||[])).next())})}function __generator(_e,_){var tt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,rt,it,st=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return st.next=ot(0),st.throw=ot(1),st.return=ot(2),typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function ot(lt){return function(ct){return at([lt,ct])}}function at(lt){if(nt)throw new TypeError("Generator is already executing.");for(;st&&(st=0,lt[0]&&(tt=0)),tt;)try{if(nt=1,rt&&(it=lt[0]&2?rt.return:lt[0]?rt.throw||((it=rt.return)&&it.call(rt),0):rt.next)&&!(it=it.call(rt,lt[1])).done)return it;switch(rt=0,it&&(lt=[lt[0]&2,it.value]),lt[0]){case 0:case 1:it=lt;break;case 4:return tt.label++,{value:lt[1],done:!1};case 5:tt.label++,rt=lt[1],lt=[0];continue;case 7:lt=tt.ops.pop(),tt.trys.pop();continue;default:if(it=tt.trys,!(it=it.length>0&&it[it.length-1])&&(lt[0]===6||lt[0]===2)){tt=0;continue}if(lt[0]===3&&(!it||lt[1]>it[0]&&lt[1]<it[3])){tt.label=lt[1];break}if(lt[0]===6&&tt.label<it[1]){tt.label=it[1],it=lt;break}if(it&&tt.label<it[2]){tt.label=it[2],tt.ops.push(lt);break}it[2]&&tt.ops.pop(),tt.trys.pop();continue}lt=_.call(_e,tt)}catch(ct){lt=[6,ct],rt=0}finally{nt=it=0}if(lt[0]&5)throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}}function __read(_e,_){var tt=typeof Symbol=="function"&&_e[Symbol.iterator];if(!tt)return _e;var nt=tt.call(_e),rt,it=[],st;try{for(;(_===void 0||_-- >0)&&!(rt=nt.next()).done;)it.push(rt.value)}catch(ot){st={error:ot}}finally{try{rt&&!rt.done&&(tt=nt.return)&&tt.call(nt)}finally{if(st)throw st.error}}return it}function __spread(){for(var _e=[],_=0;_<arguments.length;_++)_e=_e.concat(__read(arguments[_]));return _e}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(_e,_){var tt=withMimeType(_e);if(typeof tt.path!="string"){var nt=_e.webkitRelativePath;Object.defineProperty(tt,"path",{value:typeof _=="string"?_:typeof nt=="string"&&nt.length>0?nt:_e.name,writable:!1,configurable:!1,enumerable:!0})}return tt}function withMimeType(_e){var _=_e.name,tt=_&&_.lastIndexOf(".")!==-1;if(tt&&!_e.type){var nt=_.split(".").pop().toLowerCase(),rt=COMMON_MIME_TYPES.get(nt);rt&&Object.defineProperty(_e,"type",{value:rt,writable:!1,configurable:!1,enumerable:!0})}return _e}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return isObject$7(_e)&&isDataTransfer(_e)?[2,getDataTransferFiles(_e.dataTransfer,_e.type)]:isChangeEvt(_e)?[2,getInputFiles(_e)]:Array.isArray(_e)&&_e.every(function(tt){return"getFile"in tt&&typeof tt.getFile=="function"})?[2,getFsHandleFiles(_e)]:[2,[]]})})}function isDataTransfer(_e){return isObject$7(_e.dataTransfer)}function isChangeEvt(_e){return isObject$7(_e)&&isObject$7(_e.target)}function isObject$7(_e){return typeof _e=="object"&&_e!==null}function getInputFiles(_e){return fromList(_e.target.files).map(function(_){return toFileWithPath(_)})}function getFsHandleFiles(_e){return __awaiter(this,void 0,void 0,function(){var _;return __generator(this,function(tt){switch(tt.label){case 0:return[4,Promise.all(_e.map(function(nt){return nt.getFile()}))];case 1:return _=tt.sent(),[2,_.map(function(nt){return toFileWithPath(nt)})]}})})}function getDataTransferFiles(_e,_){return __awaiter(this,void 0,void 0,function(){var tt,nt;return __generator(this,function(rt){switch(rt.label){case 0:return _e===null?[2,[]]:_e.items?(tt=fromList(_e.items).filter(function(it){return it.kind==="file"}),_!=="drop"?[2,tt]:[4,Promise.all(tt.map(toFilePromises))]):[3,2];case 1:return nt=rt.sent(),[2,noIgnoredFiles(flatten(nt))];case 2:return[2,noIgnoredFiles(fromList(_e.files).map(function(it){return toFileWithPath(it)}))]}})})}function noIgnoredFiles(_e){return _e.filter(function(_){return FILES_TO_IGNORE.indexOf(_.name)===-1})}function fromList(_e){if(_e===null)return[];for(var _=[],tt=0;tt<_e.length;tt++){var nt=_e[tt];_.push(nt)}return _}function toFilePromises(_e){if(typeof _e.webkitGetAsEntry!="function")return fromDataTransferItem(_e);var _=_e.webkitGetAsEntry();return _&&_.isDirectory?fromDirEntry(_):fromDataTransferItem(_e)}function flatten(_e){return _e.reduce(function(_,tt){return __spread(_,Array.isArray(tt)?flatten(tt):[tt])},[])}function fromDataTransferItem(_e){var _=_e.getAsFile();if(!_)return Promise.reject(_e+" is not a File");var tt=toFileWithPath(_);return Promise.resolve(tt)}function fromEntry(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,_e.isDirectory?fromDirEntry(_e):fromFileEntry(_e)]})})}function fromDirEntry(_e){var _=_e.createReader();return new Promise(function(tt,nt){var rt=[];function it(){var st=this;_.readEntries(function(ot){return __awaiter(st,void 0,void 0,function(){var at,lt,ct;return __generator(this,function(ut){switch(ut.label){case 0:if(ot.length)return[3,5];ut.label=1;case 1:return ut.trys.push([1,3,,4]),[4,Promise.all(rt)];case 2:return at=ut.sent(),tt(at),[3,4];case 3:return lt=ut.sent(),nt(lt),[3,4];case 4:return[3,6];case 5:ct=Promise.all(ot.map(fromEntry)),rt.push(ct),it(),ut.label=6;case 6:return[2]}})})},function(ot){nt(ot)})}it()})}function fromFileEntry(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,new Promise(function(tt,nt){_e.file(function(rt){var it=toFileWithPath(rt,_e.fullPath);tt(it)},function(rt){nt(rt)})})]})})}var _default=function(_e,_){if(_e&&_){var tt=Array.isArray(_)?_:_.split(",");if(tt.length===0)return!0;var nt=_e.name||"",rt=(_e.type||"").toLowerCase(),it=rt.replace(/\/.*$/,"");return tt.some(function(st){var ot=st.trim().toLowerCase();return ot.charAt(0)==="."?nt.toLowerCase().endsWith(ot):ot.endsWith("/*")?it===ot.replace(/\/.*$/,""):rt===ot})}return!0};function ownKeys$1(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread$1(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(tt),!0).forEach(function(nt){_defineProperty$1(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$1(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}function _defineProperty$1(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function _slicedToArray$1(_e,_){return _arrayWithHoles$1(_e)||_iterableToArrayLimit$1(_e,_)||_unsupportedIterableToArray$1(_e,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$1(_e,_);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$1(_e,_)}}function _arrayLikeToArray$1(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var tt=0,nt=new Array(_);tt<_;tt++)nt[tt]=_e[tt];return nt}function _iterableToArrayLimit$1(_e,_){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var nt=[],rt=!0,it=!1,st,ot;try{for(tt=tt.call(_e);!(rt=(st=tt.next()).done)&&(nt.push(st.value),!(_&&nt.length===_));rt=!0);}catch(at){it=!0,ot=at}finally{try{!rt&&tt.return!=null&&tt.return()}finally{if(it)throw ot}}return nt}}function _arrayWithHoles$1(_e){if(Array.isArray(_e))return _e}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(_){_=Array.isArray(_)&&_.length===1?_[0]:_;var tt=Array.isArray(_)?"one of ".concat(_.join(", ")):_;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(tt)}},getTooLargeRejectionErr=function(_){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(_," ").concat(_===1?"byte":"bytes")}},getTooSmallRejectionErr=function(_){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(_," ").concat(_===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(_e,_){var tt=_e.type==="application/x-moz-file"||_default(_e,_);return[tt,tt?null:getInvalidTypeRejectionErr(_)]}function fileMatchSize(_e,_,tt){if(isDefined(_e.size))if(isDefined(_)&&isDefined(tt)){if(_e.size>tt)return[!1,getTooLargeRejectionErr(tt)];if(_e.size<_)return[!1,getTooSmallRejectionErr(_)]}else{if(isDefined(_)&&_e.size<_)return[!1,getTooSmallRejectionErr(_)];if(isDefined(tt)&&_e.size>tt)return[!1,getTooLargeRejectionErr(tt)]}return[!0,null]}function isDefined(_e){return _e!=null}function allFilesAccepted(_e){var _=_e.files,tt=_e.accept,nt=_e.minSize,rt=_e.maxSize,it=_e.multiple,st=_e.maxFiles;return!it&&_.length>1||it&&st>=1&&_.length>st?!1:_.every(function(ot){var at=fileAccepted(ot,tt),lt=_slicedToArray$1(at,1),ct=lt[0],ut=fileMatchSize(ot,nt,rt),dt=_slicedToArray$1(ut,1),ht=dt[0];return ct&&ht})}function isPropagationStopped(_e){return typeof _e.isPropagationStopped=="function"?_e.isPropagationStopped():typeof _e.cancelBubble<"u"?_e.cancelBubble:!1}function isEvtWithFiles(_e){return _e.dataTransfer?Array.prototype.some.call(_e.dataTransfer.types,function(_){return _==="Files"||_==="application/x-moz-file"}):!!_e.target&&!!_e.target.files}function onDocumentDragOver(_e){_e.preventDefault()}function isIe(_e){return _e.indexOf("MSIE")!==-1||_e.indexOf("Trident/")!==-1}function isEdge(_e){return _e.indexOf("Edge/")!==-1}function isIeOrEdge(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(_e)||isEdge(_e)}function composeEventHandlers(){for(var _e=arguments.length,_=new Array(_e),tt=0;tt<_e;tt++)_[tt]=arguments[tt];return function(nt){for(var rt=arguments.length,it=new Array(rt>1?rt-1:0),st=1;st<rt;st++)it[st-1]=arguments[st];return _.some(function(ot){return!isPropagationStopped(nt)&&ot&&ot.apply(void 0,[nt].concat(it)),isPropagationStopped(nt)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function filePickerOptionsTypes(_e){return _e=typeof _e=="string"?_e.split(","):_e,[{description:"everything",accept:Array.isArray(_e)?_e.filter(function(_){return _==="audio/*"||_==="video/*"||_==="image/*"||_==="text/*"||/\w+\/[-+.\w]+/g.test(_)}).reduce(function(_,tt){return _objectSpread$1(_objectSpread$1({},_),{},_defineProperty$1({},tt,[]))},{}):{}}]}function isAbort(_e){return _e instanceof DOMException&&(_e.name==="AbortError"||_e.code===_e.ABORT_ERR)}function isSecurityError(_e){return _e instanceof DOMException&&(_e.name==="SecurityError"||_e.code===_e.SECURITY_ERR)}var _excluded=["children"],_excluded2$2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(_e){return _arrayWithoutHoles(_e)||_iterableToArray(_e)||_unsupportedIterableToArray(_e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles(_e){if(Array.isArray(_e))return _arrayLikeToArray(_e)}function _slicedToArray(_e,_){return _arrayWithHoles(_e)||_iterableToArrayLimit(_e,_)||_unsupportedIterableToArray(_e,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,_);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray(_e,_)}}function _arrayLikeToArray(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var tt=0,nt=new Array(_);tt<_;tt++)nt[tt]=_e[tt];return nt}function _iterableToArrayLimit(_e,_){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var nt=[],rt=!0,it=!1,st,ot;try{for(tt=tt.call(_e);!(rt=(st=tt.next()).done)&&(nt.push(st.value),!(_&&nt.length===_));rt=!0);}catch(at){it=!0,ot=at}finally{try{!rt&&tt.return!=null&&tt.return()}finally{if(it)throw ot}}return nt}}function _arrayWithHoles(_e){if(Array.isArray(_e))return _e}function ownKeys(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(tt),!0).forEach(function(nt){_defineProperty(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}function _defineProperty(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function _objectWithoutProperties(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}function _objectWithoutPropertiesLoose(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}var Dropzone=reactExports.forwardRef(function(_e,_){var tt=_e.children,nt=_objectWithoutProperties(_e,_excluded),rt=useDropzone(nt),it=rt.open,st=_objectWithoutProperties(rt,_excluded2$2);return reactExports.useImperativeHandle(_,function(){return{open:it}},[it]),React.createElement(reactExports.Fragment,null,tt(_objectSpread(_objectSpread({},st),{},{open:it})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function useDropzone(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=_objectSpread(_objectSpread({},defaultProps),_e),tt=_.accept,nt=_.disabled,rt=_.getFilesFromEvent,it=_.maxSize,st=_.minSize,ot=_.multiple,at=_.maxFiles,lt=_.onDragEnter,ct=_.onDragLeave,ut=_.onDragOver,dt=_.onDrop,ht=_.onDropAccepted,mt=_.onDropRejected,yt=_.onFileDialogCancel,vt=_.onFileDialogOpen,pt=_.useFsAccessApi,_t=_.preventDropOnDocument,xt=_.noClick,St=_.noKeyboard,At=_.noDrag,bt=_.noDragEventsBubbling,Et=_.validator,wt=reactExports.useMemo(function(){return typeof vt=="function"?vt:noop},[vt]),Rt=reactExports.useMemo(function(){return typeof yt=="function"?yt:noop},[yt]),Tt=reactExports.useRef(null),Mt=reactExports.useRef(null),Lt=reactExports.useReducer(reducer,initialState),Ft=_slicedToArray(Lt,2),Ht=Ft[0],Kt=Ft[1],Wt=Ht.isFocused,Jt=Ht.isFileDialogActive,Ot=Ht.draggedFiles,kt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&pt&&canUseFileSystemAccessAPI()),Gt=function(){!kt.current&&Jt&&setTimeout(function(){if(Mt.current){var mn=Mt.current.files;mn.length||(Kt({type:"closeDialog"}),Rt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",Gt,!1),function(){window.removeEventListener("focus",Gt,!1)}},[Mt,Jt,Rt,kt]);var zt=reactExports.useRef([]),Vt=function(mn){Tt.current&&Tt.current.contains(mn.target)||(mn.preventDefault(),zt.current=[])};reactExports.useEffect(function(){return _t&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Vt,!1)),function(){_t&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Vt))}},[Tt,_t]);var Dt=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),vn(cn),zt.current=[].concat(_toConsumableArray(zt.current),[cn.target]),isEvtWithFiles(cn)&&Promise.resolve(rt(cn)).then(function(mn){isPropagationStopped(cn)&&!bt||(Kt({draggedFiles:mn,isDragActive:!0,type:"setDraggedFiles"}),lt&&lt(cn))})},[rt,lt,bt]),It=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),vn(cn);var mn=isEvtWithFiles(cn);if(mn&&cn.dataTransfer)try{cn.dataTransfer.dropEffect="copy"}catch{}return mn&&ut&&ut(cn),!1},[ut,bt]),Ut=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),vn(cn);var mn=zt.current.filter(function(Hn){return Tt.current&&Tt.current.contains(Hn)}),an=mn.indexOf(cn.target);an!==-1&&mn.splice(an,1),zt.current=mn,!(mn.length>0)&&(Kt({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),isEvtWithFiles(cn)&&ct&&ct(cn))},[Tt,ct,bt]),Yt=reactExports.useCallback(function(cn,mn){var an=[],Hn=[];cn.forEach(function(Pn){var er=fileAccepted(Pn,tt),cr=_slicedToArray(er,2),ir=cr[0],Jn=cr[1],fr=fileMatchSize(Pn,st,it),dr=_slicedToArray(fr,2),lr=dr[0],Nn=dr[1],bn=Et?Et(Pn):null;if(ir&&lr&&!bn)an.push(Pn);else{var Rn=[Jn,Nn];bn&&(Rn=Rn.concat(bn)),Hn.push({file:Pn,errors:Rn.filter(function(Sn){return Sn})})}}),(!ot&&an.length>1||ot&&at>=1&&an.length>at)&&(an.forEach(function(Pn){Hn.push({file:Pn,errors:[TOO_MANY_FILES_REJECTION]})}),an.splice(0)),Kt({acceptedFiles:an,fileRejections:Hn,type:"setFiles"}),dt&&dt(an,Hn,mn),Hn.length>0&&mt&&mt(Hn,mn),an.length>0&&ht&&ht(an,mn)},[Kt,ot,tt,st,it,at,dt,ht,mt,Et]),qt=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),vn(cn),zt.current=[],isEvtWithFiles(cn)&&Promise.resolve(rt(cn)).then(function(mn){isPropagationStopped(cn)&&!bt||Yt(mn,cn)}),Kt({type:"reset"})},[rt,Yt,bt]),rn=reactExports.useCallback(function(){if(kt.current){Kt({type:"openDialog"}),wt();var cn={multiple:ot,types:filePickerOptionsTypes(tt)};window.showOpenFilePicker(cn).then(function(mn){return rt(mn)}).then(function(mn){Yt(mn,null),Kt({type:"closeDialog"})}).catch(function(mn){isAbort(mn)?(Rt(mn),Kt({type:"closeDialog"})):isSecurityError(mn)&&(kt.current=!1,Mt.current&&(Mt.current.value=null,Mt.current.click()))});return}Mt.current&&(Kt({type:"openDialog"}),wt(),Mt.current.value=null,Mt.current.click())},[Kt,wt,Rt,pt,Yt,tt,ot]),gn=reactExports.useCallback(function(cn){!Tt.current||!Tt.current.isEqualNode(cn.target)||(cn.key===" "||cn.key==="Enter"||cn.keyCode===32||cn.keyCode===13)&&(cn.preventDefault(),rn())},[Tt,rn]),An=reactExports.useCallback(function(){Kt({type:"focus"})},[]),En=reactExports.useCallback(function(){Kt({type:"blur"})},[]),fn=reactExports.useCallback(function(){xt||(isIeOrEdge()?setTimeout(rn,0):rn())},[xt,rn]),nn=function(mn){return nt?null:mn},Tn=function(mn){return St?null:nn(mn)},Cn=function(mn){return At?null:nn(mn)},vn=function(mn){bt&&mn.stopPropagation()},_n=reactExports.useMemo(function(){return function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mn=cn.refKey,an=mn===void 0?"ref":mn,Hn=cn.role,Pn=cn.onKeyDown,er=cn.onFocus,cr=cn.onBlur,ir=cn.onClick,Jn=cn.onDragEnter,fr=cn.onDragOver,dr=cn.onDragLeave,lr=cn.onDrop,Nn=_objectWithoutProperties(cn,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Tn(composeEventHandlers(Pn,gn)),onFocus:Tn(composeEventHandlers(er,An)),onBlur:Tn(composeEventHandlers(cr,En)),onClick:nn(composeEventHandlers(ir,fn)),onDragEnter:Cn(composeEventHandlers(Jn,Dt)),onDragOver:Cn(composeEventHandlers(fr,It)),onDragLeave:Cn(composeEventHandlers(dr,Ut)),onDrop:Cn(composeEventHandlers(lr,qt)),role:typeof Hn=="string"&&Hn!==""?Hn:"button"},an,Tt),!nt&&!St?{tabIndex:0}:{}),Nn)}},[Tt,gn,An,En,fn,Dt,It,Ut,qt,St,At,nt]),Qt=reactExports.useCallback(function(cn){cn.stopPropagation()},[]),sn=reactExports.useMemo(function(){return function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mn=cn.refKey,an=mn===void 0?"ref":mn,Hn=cn.onChange,Pn=cn.onClick,er=_objectWithoutProperties(cn,_excluded4),cr=_defineProperty({accept:tt,multiple:ot,type:"file",style:{display:"none"},onChange:nn(composeEventHandlers(Hn,qt)),onClick:nn(composeEventHandlers(Pn,Qt)),tabIndex:-1},an,Mt);return _objectSpread(_objectSpread({},cr),er)}},[Mt,tt,ot,qt,nt]),jt=Ot.length,Bt=jt>0&&allFilesAccepted({files:Ot,accept:tt,minSize:st,maxSize:it,multiple:ot,maxFiles:at}),hn=jt>0&&!Bt;return _objectSpread(_objectSpread({},Ht),{},{isDragAccept:Bt,isDragReject:hn,isFocused:Wt&&!nt,getRootProps:_n,getInputProps:sn,rootRef:Tt,inputRef:Mt,open:nn(rn)})}function reducer(_e,_){switch(_.type){case"focus":return _objectSpread(_objectSpread({},_e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},_e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},_e),{},{isFileDialogActive:!1});case"setDraggedFiles":var tt=_.isDragActive,nt=_.draggedFiles;return _objectSpread(_objectSpread({},_e),{},{draggedFiles:nt,isDragActive:tt});case"setFiles":return _objectSpread(_objectSpread({},_e),{},{acceptedFiles:_.acceptedFiles,fileRejections:_.fileRejections});case"reset":return _objectSpread({},initialState);default:return _e}}function noop(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isobject=function(_){return _!=null&&typeof _=="object"&&Array.isArray(_)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject$6=isobject;function isObjectObject(_e){return isObject$6(_e)===!0&&Object.prototype.toString.call(_e)==="[object Object]"}var isPlainObject$2=function(_){var tt,nt;return!(isObjectObject(_)===!1||(tt=_.constructor,typeof tt!="function")||(nt=tt.prototype,isObjectObject(nt)===!1)||nt.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isPlainObject$1=isPlainObject$2,isExtendable$4=function(_){return isPlainObject$1(_)||typeof _=="function"||Array.isArray(_)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var forIn$1=function(_,tt,nt){for(var rt in _)if(tt.call(nt,_[rt],rt,_)===!1)break},isExtendable$3=isExtendable$4,forIn=forIn$1;function mixinDeep(_e,_){for(var tt=arguments.length,nt=0;++nt<tt;){var rt=arguments[nt];isObject$5(rt)&&forIn(rt,copy,_e)}return _e}function copy(_e,_){if(isValidKey$1(_)){var tt=this[_];isObject$5(_e)&&isObject$5(tt)?mixinDeep(tt,_e):this[_]=_e}}function isObject$5(_e){return isExtendable$3(_e)&&!Array.isArray(_e)}function isValidKey$1(_e){return _e!=="__proto__"&&_e!=="constructor"&&_e!=="prototype"}var mixinDeep_1=mixinDeep;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var getValue$1=function(_e,_,tt,nt,rt){if(!isObject$4(_e)||!_)return _e;if(_=toString(_),tt&&(_+="."+toString(tt)),nt&&(_+="."+toString(nt)),rt&&(_+="."+toString(rt)),_ in _e)return _e[_];for(var it=_.split("."),st=it.length,ot=-1;_e&&++ot<st;){for(var at=it[ot];at[at.length-1]==="\\";)at=at.slice(0,-1)+"."+it[++ot];_e=_e[at]}return _e};function isObject$4(_e){return _e!==null&&(typeof _e=="object"||typeof _e=="function")}function toString(_e){return _e?Array.isArray(_e)?_e.join("."):_e:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var assignSymbols$1=function(_e,_){if(_e===null||typeof _e>"u")throw new TypeError("expected first argument to be an object.");if(typeof _>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return _e;for(var tt=Object.prototype.propertyIsEnumerable,nt=Object(_e),rt=arguments.length,it=0;++it<rt;)for(var st=Object(arguments[it]),ot=Object.getOwnPropertySymbols(st),at=0;at<ot.length;at++){var lt=ot[at];tt.call(st,lt)&&(nt[lt]=st[lt])}return nt},isExtendable$2=isExtendable$4,assignSymbols=assignSymbols$1,extendShallow$1=Object.assign||function(_e){if(_e===null||typeof _e>"u")throw new TypeError("Cannot convert undefined or null to object");isObject$3(_e)||(_e={});for(var _=1;_<arguments.length;_++){var tt=arguments[_];isString(tt)&&(tt=toObject(tt)),isObject$3(tt)&&(assign$1(_e,tt),assignSymbols(_e,tt))}return _e};function assign$1(_e,_){for(var tt in _)hasOwn$1(_,tt)&&(_e[tt]=_[tt])}function isString(_e){return _e&&typeof _e=="string"}function toObject(_e){var _={};for(var tt in _e)_[tt]=_e[tt];return _}function isObject$3(_e){return _e&&typeof _e=="object"||isExtendable$2(_e)}function hasOwn$1(_e,_){return Object.prototype.hasOwnProperty.call(_e,_)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var extend$1=extendShallow$1,splitString=function(_e,_,tt){if(typeof _e!="string")throw new TypeError("expected a string");typeof _=="function"&&(tt=_,_=null),typeof _=="string"&&(_={sep:_});var nt=extend$1({sep:"."},_),rt=nt.quotes||['"',"'","`"],it;nt.brackets===!0?it={"<":">","(":")","[":"]","{":"}"}:nt.brackets&&(it=nt.brackets);var st=[],ot=[],at=[""],lt=nt.sep,ct=_e.length,ut=-1,dt;function ht(){if(it&&ot.length)return it[ot[ot.length-1]]}for(;++ut<ct;){var mt=_e[ut],yt=_e[ut+1],vt={val:mt,idx:ut,arr:at,str:_e};if(st.push(vt),mt==="\\"){vt.val=keepEscaping(nt,_e,ut)===!0?mt+yt:yt,vt.escaped=!0,typeof tt=="function"&&tt(vt),at[at.length-1]+=vt.val,ut++;continue}if(it&&it[mt]){ot.push(mt);var pt=ht(),_t=ut+1;if(_e.indexOf(pt,_t+1)!==-1)for(;ot.length&&_t<ct;){var xt=_e[++_t];if(xt==="\\"){xt++;continue}if(rt.indexOf(xt)!==-1){_t=getClosingQuote(_e,xt,_t+1);continue}if(pt=ht(),ot.length&&_e.indexOf(pt,_t+1)===-1)break;if(it[xt]){ot.push(xt);continue}pt===xt&&ot.pop()}if(dt=_t,dt===-1){at[at.length-1]+=mt;continue}mt=_e.slice(ut,dt+1),vt.val=mt,vt.idx=ut=dt}if(rt.indexOf(mt)!==-1){if(dt=getClosingQuote(_e,mt,ut+1),dt===-1){at[at.length-1]+=mt;continue}keepQuotes(mt,nt)===!0?mt=_e.slice(ut,dt+1):mt=_e.slice(ut+1,dt),vt.val=mt,vt.idx=ut=dt}if(typeof tt=="function"&&(tt(vt,st),mt=vt.val,ut=vt.idx),vt.val===lt&&vt.split!==!1){at.push("");continue}at[at.length-1]+=vt.val}return at};function getClosingQuote(_e,_,tt,nt){var rt=_e.indexOf(_,tt);return _e.charAt(rt-1)==="\\"?getClosingQuote(_e,_,rt+1):rt}function keepQuotes(_e,_){return _.keepDoubleQuotes===!0&&_e==='"'||_.keepSingleQuotes===!0&&_e==="'"?!0:_.keepQuotes}function keepEscaping(_e,_,tt){return typeof _e.keepEscaping=="function"?_e.keepEscaping(_,tt):_e.keepEscaping===!0||_[tt+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable$1=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")},isObject$2=isExtendable$1,extendShallow=function(_){isObject$2(_)||(_={});for(var tt=arguments.length,nt=1;nt<tt;nt++){var rt=arguments[nt];isObject$2(rt)&&assign(_,rt)}return _};function assign(_e,_){for(var tt in _)hasOwn(_,tt)&&(_e[tt]=_[tt])}function hasOwn(_e,_){return Object.prototype.hasOwnProperty.call(_e,_)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var split=splitString,extend=extendShallow,isPlainObject=isPlainObject$2,isObject$1=isExtendable,setValue=function(_e,_,tt){if(!isObject$1(_e)||(Array.isArray(_)&&(_=[].concat.apply([],_).join(".")),typeof _!="string"))return _e;for(var nt=split(_,{sep:".",brackets:!0}).filter(isValidKey),rt=nt.length,it=-1,st=_e;++it<rt;){var ot=nt[it];if(it!==rt-1){isObject$1(st[ot])||(st[ot]={}),st=st[ot];continue}isPlainObject(st[ot])&&isPlainObject(tt)?st[ot]=extend({},st[ot],tt):st[ot]=tt}return _e};function isValidKey(_e){return _e!=="__proto__"&&_e!=="constructor"&&_e!=="prototype"}var isObject=isExtendable$4,merge=mixinDeep_1,get=getValue$1,set=setValue,mergeValue=function(_,tt,nt){if(!isObject(_))throw new TypeError("expected an object");if(typeof tt!="string"||nt==null)return merge.apply(null,arguments);if(typeof nt=="string")return set(_,tt,nt),_;var rt=get(_,tt);return isObject(nt)&&isObject(rt)&&(nt=merge({},rt,nt)),set(_,tt,nt),_};const merge$1=getDefaultExportFromCjs(mergeValue),join=(..._e)=>_e.filter(Boolean).join(".");function getKeyPath(_e){const _=_e.split(".");return[_.pop(),_.join(".")||void 0]}function getValuesForPaths(_e,_){return Object.entries(pick(_e,_)).reduce((tt,[,{value:nt,disabled:rt,key:it}])=>(tt[it]=rt?void 0:nt,tt),{})}function useCompareMemoize(_e,_){const tt=reactExports.useRef();return dequal(_e,tt.current)||(tt.current=_e),tt.current}function useDeepMemo(_e,_){return reactExports.useMemo(_e,useCompareMemoize(_))}function useToggle(_e){const _=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useRef(!0);return reactExports.useLayoutEffect(()=>{_e||(_.current.style.height="0px",_.current.style.overflow="hidden")},[]),reactExports.useEffect(()=>{if(nt.current){nt.current=!1;return}let rt;const it=_.current,st=()=>{_e&&(it.style.removeProperty("height"),it.style.removeProperty("overflow"),tt.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};it.addEventListener("transitionend",st,{once:!0});const{height:ot}=tt.current.getBoundingClientRect();return it.style.height=ot+"px",_e||(it.style.overflow="hidden",rt=window.setTimeout(()=>it.style.height="0px",50)),()=>{it.removeEventListener("transitionend",st),clearTimeout(rt)}},[_e]),{wrapperRef:_,contentRef:tt}}const useVisiblePaths=_e=>{const[_,tt]=reactExports.useState(_e.getVisiblePaths());return reactExports.useEffect(()=>{tt(_e.getVisiblePaths());const nt=_e.useStore.subscribe(_e.getVisiblePaths,tt,{equalityFn:shallow});return()=>nt()},[_e]),_};function useValuesForPath(_e,_,tt){return _e.useStore(rt=>{const it=_objectSpread2(_objectSpread2({},tt),rt.data);return getValuesForPaths(it,_)},shallow)}function usePopin(_e=3){const _=reactExports.useRef(null),tt=reactExports.useRef(null),[nt,rt]=reactExports.useState(!1),it=reactExports.useCallback(()=>rt(!0),[]),st=reactExports.useCallback(()=>rt(!1),[]);return reactExports.useLayoutEffect(()=>{if(nt){const{bottom:ot,top:at,left:lt}=_.current.getBoundingClientRect(),{height:ct}=tt.current.getBoundingClientRect(),ut=ot+ct>window.innerHeight-40?"up":"down";tt.current.style.position="fixed",tt.current.style.zIndex="10000",tt.current.style.left=lt+"px",ut==="down"?tt.current.style.top=ot+_e+"px":tt.current.style.bottom=window.innerHeight-at+_e+"px"}},[_e,nt]),{popinRef:_,wrapperRef:tt,shown:nt,show:it,hide:st}}k$1([namesPlugin]);const convertMap={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};v8n.extend({color:()=>_e=>w(_e).isValid()});const schema$2=_e=>v8n().color().test(_e);function convert(_e,{format:_,hasAlpha:tt,isString:nt}){const rt=convertMap[_]+(nt&&_!=="hex"?"String":""),it=_e[rt]();return typeof it=="object"&&!tt?omit(it,["a"]):it}const sanitize$2=(_e,_)=>{const tt=w(_e);if(!tt.isValid())throw Error("Invalid color");return convert(tt,_)},format$1=(_e,_)=>convert(w(_e),_objectSpread2(_objectSpread2({},_),{},{isString:!0,format:"hex"})),normalize$3=({value:_e})=>{const _=I$1(_e),tt=_==="name"?"hex":_,nt=typeof _e=="object"?"a"in _e:_==="hex"&&_e.length===8||/^(rgba)|(hsla)|(hsva)/.test(_e),rt={format:tt,hasAlpha:nt,isString:typeof _e=="string"};return{value:sanitize$2(_e,rt),settings:rt}};var props$2=Object.freeze({__proto__:null,schema:schema$2,sanitize:sanitize$2,format:format$1,normalize:normalize$3});const ColorPreview=styled("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),PickerContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),PickerWrapper=styled("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function convertToRgb(_e,_){return _!=="rgb"?w(_e).toRgb():_e}function Color({value:_e,displayValue:_,settings:tt,onUpdate:nt}){const{emitOnEditStart:rt,emitOnEditEnd:it}=useInputContext(),{format:st,hasAlpha:ot}=tt,{popinRef:at,wrapperRef:lt,shown:ct,show:ut,hide:dt}=usePopin(),ht=reactExports.useRef(0),[mt,yt]=reactExports.useState(()=>convertToRgb(_e,st)),vt=ot?Ce:Ne,pt=()=>{yt(convertToRgb(_e,st)),ut(),rt()},_t=()=>{dt(),it(),window.clearTimeout(ht.current)},xt=()=>{ht.current=window.setTimeout(_t,500)};return reactExports.useEffect(()=>()=>window.clearTimeout(ht.current),[]),React.createElement(React.Fragment,null,React.createElement(ColorPreview,{ref:at,active:ct,onClick:()=>pt(),style:{color:_}}),ct&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:_t}),React.createElement(PickerWrapper,{ref:lt,onMouseEnter:()=>window.clearTimeout(ht.current),onMouseLeave:St=>St.buttons===0&&xt()},React.createElement(vt,{color:mt,onChange:nt}))))}function ColorComponent(){const{value:_e,displayValue:_,label:tt,onChange:nt,onUpdate:rt,settings:it}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(PickerContainer,null,React.createElement(Color,{value:_e,displayValue:_,onChange:nt,onUpdate:rt,settings:it}),React.createElement(ValueInput,{value:_,onChange:nt,onUpdate:rt})))}var color=_objectSpread2({component:ColorComponent},props$2);function Vector3dComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Vector,{value:_,settings:nt,onUpdate:tt}))}var vector3d=_objectSpread2({component:Vector3dComponent},getVectorPlugin(["x","y","z"]));const JoystickTrigger=styled("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),JoystickPlayground=styled("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Joystick({value:_e,settings:_,onUpdate:tt}){const nt=reactExports.useRef(),rt=reactExports.useRef(0),it=reactExports.useRef(0),st=reactExports.useRef(1),[ot,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),[ut,dt]=useTransform(),ht=reactExports.useRef(null),mt=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{if(ot){const{top:Lt,left:Ft,width:Ht,height:Kt}=ht.current.getBoundingClientRect();mt.current.style.left=Ft+Ht/2+"px",mt.current.style.top=Lt+Kt/2+"px"}},[ot]);const{keys:[yt,vt],joystick:pt}=_,_t=pt==="invertY"?1:-1,{[yt]:{step:xt},[vt]:{step:St}}=_,At=useTh("sizes","joystickWidth"),bt=useTh("sizes","joystickHeight"),Et=parseFloat(At)*.8/2,wt=parseFloat(bt)*.8/2,Rt=reactExports.useCallback(()=>{nt.current||(ct(!0),rt.current&&dt({x:rt.current*Et}),it.current&&dt({y:it.current*-wt}),nt.current=window.setInterval(()=>{tt(Lt=>{const Ft=xt*rt.current*st.current,Ht=_t*St*it.current*st.current;return Array.isArray(Lt)?{[yt]:Lt[0]+Ft,[vt]:Lt[1]+Ht}:{[yt]:Lt[yt]+Ft,[vt]:Lt[vt]+Ht}})},16))},[Et,wt,tt,dt,xt,St,yt,vt,_t]),Tt=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=void 0,ct(!1)},[]);reactExports.useEffect(()=>{function Lt(Ft){st.current=multiplyStep(Ft)}return window.addEventListener("keydown",Lt),window.addEventListener("keyup",Lt),()=>{window.clearTimeout(nt.current),window.removeEventListener("keydown",Lt),window.removeEventListener("keyup",Lt)}},[]);const Mt=useDrag(({first:Lt,active:Ft,delta:[Ht,Kt],movement:[Wt,Jt]})=>{Lt&&at(!0);const Ot=clamp(Wt,-Et,Et),kt=clamp(Jt,-wt,wt);rt.current=Math.abs(Wt)>Math.abs(Ot)?Math.sign(Wt-Ot):0,it.current=Math.abs(Jt)>Math.abs(kt)?Math.sign(kt-Jt):0;let Gt=_e[yt],zt=_e[vt];Ft?(rt.current||(Gt+=Ht*xt*st.current,dt({x:Ot})),it.current||(zt-=_t*Kt*St*st.current,dt({y:kt})),rt.current||it.current?Rt():Tt(),tt({[yt]:Gt,[vt]:zt})):(at(!1),rt.current=0,it.current=0,dt({x:0,y:0}),Tt())});return React.createElement(JoystickTrigger,_extends({ref:ht},Mt()),ot&&React.createElement(Portal,null,React.createElement(JoystickPlayground,{ref:mt,isOutOfBounds:lt},React.createElement("div",null),React.createElement("span",{ref:ut}))))}const Container$1=styled("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Vector2dComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Container$1,{withJoystick:!!nt.joystick},nt.joystick&&React.createElement(Joystick,{value:_,settings:nt,onUpdate:tt}),React.createElement(Vector,{value:_,settings:nt,onUpdate:tt})))}const _excluded$7=["joystick"],plugin=getVectorPlugin(["x","y"]),normalize$2=_e=>{let{joystick:_=!0}=_e,tt=_objectWithoutProperties$1(_e,_excluded$7);const{value:nt,settings:rt}=plugin.normalize(tt);return{value:nt,settings:_objectSpread2(_objectSpread2({},rt),{},{joystick:_})}};var vector2d=_objectSpread2(_objectSpread2({component:Vector2dComponent},plugin),{},{normalize:normalize$2});const sanitize$1=_e=>{if(_e!==void 0){if(_e instanceof File)try{return URL.createObjectURL(_e)}catch{return}if(typeof _e=="string"&&_e.indexOf("blob:")===0)return _e;throw Error("Invalid image format [undefined | blob | File].")}},schema$1=(_e,_)=>typeof _=="object"&&"image"in _,normalize$1=({image:_e})=>({value:_e});var props$1=Object.freeze({__proto__:null,sanitize:sanitize$1,schema:schema$1,normalize:normalize$1});const ImageContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),DropZone=styled("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ImagePreview=styled("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ImageLargePreview=styled("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Instructions=styled("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Remove=styled("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ImageComponent(){const{label:_e,value:_,onUpdate:tt,disabled:nt}=useInputContext(),{popinRef:rt,wrapperRef:it,shown:st,show:ot,hide:at}=usePopin(),lt=reactExports.useCallback(mt=>{mt.length&&tt(mt[0])},[tt]),ct=reactExports.useCallback(mt=>{mt.stopPropagation(),tt(void 0)},[tt]),{getRootProps:ut,getInputProps:dt,isDragAccept:ht}=useDropzone({maxFiles:1,accept:"image/*",onDrop:lt,disabled:nt});return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(ImageContainer,null,React.createElement(ImagePreview,{ref:rt,hasImage:!!_,onPointerDown:()=>!!_&&ot(),onPointerUp:at,style:{backgroundImage:_?`url(${_})`:"none"}}),st&&!!_&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:at,style:{cursor:"pointer"}}),React.createElement(ImageLargePreview,{ref:it,style:{backgroundImage:`url(${_})`}})),React.createElement(DropZone,ut({isDragAccept:ht}),React.createElement("input",dt()),React.createElement(Instructions,null,ht?"drop image":"click or drop")),React.createElement(Remove,{onClick:ct,disabled:!_})))}var image=_objectSpread2({component:ImageComponent},props$1);const number=v8n().number(),schema=(_e,_)=>v8n().array().length(2).every.number().test(_e)&&v8n().schema({min:number,max:number}).test(_),format=_e=>({min:_e[0],max:_e[1]}),sanitize=(_e,{bounds:[_,tt]},nt)=>{const rt=Array.isArray(_e)?format(_e):_e,it={min:nt[0],max:nt[1]},{min:st,max:ot}=_objectSpread2(_objectSpread2({},it),rt);return[clamp(Number(st),_,Math.max(_,ot)),clamp(Number(ot),Math.min(tt,st),tt)]},normalize=({value:_e,min:_,max:tt})=>{const nt={min:_,max:tt},rt=normalizeKeyedNumberSettings(format(_e),{min:nt,max:nt}),it=[_,tt],st=_objectSpread2(_objectSpread2({},rt),{},{bounds:it});return{value:sanitize(format(_e),st,_e),settings:st}};var props=Object.freeze({__proto__:null,schema,format,sanitize,normalize});const _excluded$6=["value","bounds","onDrag"],_excluded2$1=["bounds"],Container=styled("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function IntervalSlider(_e){let{value:_,bounds:[tt,nt],onDrag:rt}=_e,it=_objectWithoutProperties$1(_e,_excluded$6);const st=reactExports.useRef(null),ot=reactExports.useRef(null),at=reactExports.useRef(null),lt=reactExports.useRef(0),ct=useTh("sizes","scrubberWidth"),ut=useDrag(({event:mt,first:yt,xy:[vt],movement:[pt],memo:_t={}})=>{if(yt){const{width:St,left:At}=st.current.getBoundingClientRect();lt.current=St-parseFloat(ct);const bt=(mt==null?void 0:mt.target)===ot.current||(mt==null?void 0:mt.target)===at.current;_t.pos=invertedRange((vt-At)/St,tt,nt);const Et=Math.abs(_t.pos-_.min)-Math.abs(_t.pos-_.max);_t.key=Et<0||Et===0&&_t.pos<=_.min?"min":"max",bt&&(_t.pos=_[_t.key])}const xt=_t.pos+invertedRange(pt/lt.current,0,nt-tt);return rt({[_t.key]:sanitizeStep(xt,it[_t.key])}),_t}),dt=`calc(${range(_.min,tt,nt)} * (100% - ${ct} - 8px) + 4px)`,ht=`calc(${1-range(_.max,tt,nt)} * (100% - ${ct} - 8px) + 4px)`;return React.createElement(RangeWrapper,_extends({ref:st},ut()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:dt,right:ht}})),React.createElement(Scrubber,{position:"left",ref:ot,style:{left:dt}}),React.createElement(Scrubber,{position:"right",ref:at,style:{right:ht}}))}function IntervalComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext(),rt=_objectWithoutProperties$1(nt,_excluded2$1);return React.createElement(React.Fragment,null,React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Container,null,React.createElement(IntervalSlider,_extends({value:_},nt,{onDrag:tt})),React.createElement(Vector,{value:_,settings:rt,onUpdate:tt,innerLabelTrim:0}))))}var interval=_objectSpread2({component:IntervalComponent},props);const createEventEmitter=()=>{const _e=new Map;return{on:(_,tt)=>{let nt=_e.get(_);nt===void 0&&(nt=new Set,_e.set(_,nt)),nt.add(tt)},off:(_,tt)=>{const nt=_e.get(_);nt!==void 0&&(nt.delete(tt),nt.size===0&&_e.delete(_))},emit:(_,...tt)=>{const nt=_e.get(_);if(nt!==void 0)for(const rt of nt)rt(...tt)}}},_excluded$5=["type","value"],_excluded2=["onChange","transient","onEditStart","onEditEnd"],Store=function(){const _=create(subscribeWithSelector(()=>({data:{}}))),tt=createEventEmitter();this.storeId=getUid(),this.useStore=_;const nt={},rt=new Set;this.getVisiblePaths=()=>{const st=this.getData(),ot=Object.keys(st),at=[];Object.entries(nt).forEach(([ct,ut])=>{ut.render&&ot.some(dt=>dt.indexOf(ct)===0)&&!ut.render(this.get)&&at.push(ct+".")});const lt=[];return rt.forEach(ct=>{ct in st&&st[ct].__refCount>0&&at.every(ut=>ct.indexOf(ut)===-1)&&(!st[ct].render||st[ct].render(this.get))&&lt.push(ct)}),lt},this.setOrderedPaths=st=>{st.forEach(ot=>rt.add(ot))},this.orderPaths=st=>(this.setOrderedPaths(st),st),this.disposePaths=st=>{_.setState(ot=>{const at=ot.data;return st.forEach(lt=>{if(lt in at){const ct=at[lt];ct.__refCount--,ct.__refCount===0&&ct.type in SpecialInputs&&delete at[lt]}}),{data:at}})},this.dispose=()=>{_.setState(()=>({data:{}}))},this.getFolderSettings=st=>nt[st]||{},this.getData=()=>_.getState().data,this.addData=(st,ot)=>{_.setState(at=>{const lt=at.data;return Object.entries(st).forEach(([ct,ut])=>{let dt=lt[ct];if(dt){const{type:ht,value:mt}=ut,yt=_objectWithoutProperties$1(ut,_excluded$5);ht!==dt.type?warn(LevaErrors.INPUT_TYPE_OVERRIDE,ht):((dt.__refCount===0||ot)&&Object.assign(dt,yt),dt.__refCount++)}else lt[ct]=_objectSpread2(_objectSpread2({},ut),{},{__refCount:1})}),{data:lt}})},this.setValueAtPath=(st,ot,at)=>{_.setState(lt=>{const ct=lt.data;return updateInput(ct[st],ot,st,this,at),{data:ct}})},this.setSettingsAtPath=(st,ot)=>{_.setState(at=>{const lt=at.data;return lt[st].settings=_objectSpread2(_objectSpread2({},lt[st].settings),ot),{data:lt}})},this.disableInputAtPath=(st,ot)=>{_.setState(at=>{const lt=at.data;return lt[st].disabled=ot,{data:lt}})},this.set=(st,ot)=>{_.setState(at=>{const lt=at.data;return Object.entries(st).forEach(([ct,ut])=>{try{updateInput(lt[ct],ut,void 0,void 0,ot)}catch{}}),{data:lt}})},this.getInput=st=>{try{return this.getData()[st]}catch{warn(LevaErrors.PATH_DOESNT_EXIST,st)}},this.get=st=>{var ot;return(ot=this.getInput(st))===null||ot===void 0?void 0:ot.value},this.emitOnEditStart=st=>{tt.emit(`onEditStart:${st}`,this.get(st),st,_objectSpread2(_objectSpread2({},this.getInput(st)),{},{get:this.get}))},this.emitOnEditEnd=st=>{tt.emit(`onEditEnd:${st}`,this.get(st),st,_objectSpread2(_objectSpread2({},this.getInput(st)),{},{get:this.get}))},this.subscribeToEditStart=(st,ot)=>{const at=`onEditStart:${st}`;return tt.on(at,ot),()=>tt.off(at,ot)},this.subscribeToEditEnd=(st,ot)=>{const at=`onEditEnd:${st}`;return tt.on(at,ot),()=>tt.off(at,ot)};const it=(st,ot,at)=>{const lt={};return Object.entries(st).forEach(([ct,ut])=>{if(ct==="")return warn(LevaErrors.EMPTY_KEY);let dt=join(ot,ct);if(ut.type===SpecialInputs.FOLDER){const ht=it(ut.schema,dt,at);Object.assign(lt,ht),dt in nt||(nt[dt]=ut.settings)}else if(ct in at)warn(LevaErrors.DUPLICATE_KEYS,ct,dt,at[ct].path);else{const ht=normalizeInput(ut,ct,dt,lt);if(ht){const{type:mt,options:yt,input:vt}=ht,{onChange:pt,transient:_t,onEditStart:xt,onEditEnd:St}=yt,At=_objectWithoutProperties$1(yt,_excluded2);lt[dt]=_objectSpread2(_objectSpread2(_objectSpread2({type:mt},At),vt),{},{fromPanel:!0}),at[ct]={path:dt,onChange:pt,transient:_t,onEditStart:xt,onEditEnd:St}}else warn(LevaErrors.UNKNOWN_INPUT,dt,ut)}}),lt};this.getDataFromSchema=st=>{const ot={};return[it(st,"",ot),ot]}},levaStore=new Store,defaultSettings$2={collapsed:!1};function folder(_e,_){return{type:SpecialInputs.FOLDER,schema:_e,settings:_objectSpread2(_objectSpread2({},defaultSettings$2),_)}}const isInput=_e=>"__levaInput"in _e,buildTree=(_e,_)=>{const tt={},nt=_?_.toLowerCase():null;return _e.forEach(rt=>{const[it,st]=getKeyPath(rt);(!nt||it.toLowerCase().indexOf(nt)>-1)&&merge$1(tt,st,{[it]:{__levaInput:!0,path:rt}})}),tt},_excluded$4=["type","label","path","valueKey","value","settings","setValue","disabled"];function ControlInput(_e){let{type:_,label:tt,path:nt,valueKey:rt,value:it,settings:st,setValue:ot,disabled:at}=_e,lt=_objectWithoutProperties$1(_e,_excluded$4);const{displayValue:ct,onChange:ut,onUpdate:dt}=useInputSetters({type:_,value:it,settings:st,setValue:ot}),ht=Plugins[_].component;return ht?React.createElement(InputContext.Provider,{value:_objectSpread2({key:rt,path:nt,id:""+nt,label:tt,displayValue:ct,value:it,onChange:ut,onUpdate:dt,settings:st,setValue:ot,disabled:at},lt)},React.createElement(StyledInputWrapper$1,{disabled:at},React.createElement(ht,null))):(warn(LevaErrors.NO_COMPONENT_FOR_TYPE,_,nt),null)}const StyledButton=styled("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Button({onClick:_e,settings:_,label:tt}){const nt=useStoreContext();return React.createElement(Row,null,React.createElement(StyledButton,{disabled:_.disabled,onClick:()=>_e(nt.get)},tt))}const StyledButtonGroup=styled("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),StyledButtonGroupButton=styled("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),getOpts=({label:_e,opts:_})=>{let tt=typeof _e=="string"&&_e.trim()===""?null:_e,nt=_;return typeof _.opts=="object"&&(nt.label!==void 0&&(tt=_.label),nt=_.opts),{label:tt,opts:nt}};function ButtonGroup(_e){const{label:_,opts:tt}=getOpts(_e),nt=useStoreContext();return React.createElement(Row,{input:!!_},_&&React.createElement(Label,null,_),React.createElement(StyledButtonGroup,null,Object.entries(tt).map(([rt,it])=>React.createElement(StyledButtonGroupButton,{key:rt,onClick:()=>it(nt.get)},rt))))}const Canvas=styled("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),POINTS=100;function push(_e,_){_e.push(_),_e.length>POINTS&&_e.shift()}const MonitorCanvas=reactExports.forwardRef(function({initialValue:_e},_){const tt=useTh("colors","highlight3"),nt=useTh("colors","elevation2"),rt=useTh("colors","highlight1"),[it,st]=reactExports.useMemo(()=>[w(rt).alpha(.4).toRgbString(),w(rt).alpha(.1).toRgbString()],[rt]),ot=reactExports.useRef([_e]),at=reactExports.useRef(_e),lt=reactExports.useRef(_e),ct=reactExports.useRef(),ut=reactExports.useCallback((mt,yt)=>{if(!mt)return;const{width:vt,height:pt}=mt,_t=new Path2D,xt=vt/POINTS,St=pt*.05;for(let Et=0;Et<ot.current.length;Et++){const wt=range(ot.current[Et],at.current,lt.current),Rt=xt*Et,Tt=pt-wt*(pt-St*2)-St;_t.lineTo(Rt,Tt)}yt.clearRect(0,0,vt,pt);const At=new Path2D(_t);At.lineTo(xt*(ot.current.length+1),pt),At.lineTo(0,pt),At.lineTo(0,0);const bt=yt.createLinearGradient(0,0,0,pt);bt.addColorStop(0,it),bt.addColorStop(1,st),yt.fillStyle=bt,yt.fill(At),yt.strokeStyle=nt,yt.lineJoin="round",yt.lineWidth=14,yt.stroke(_t),yt.strokeStyle=tt,yt.lineWidth=2,yt.stroke(_t)},[tt,nt,it,st]),[dt,ht]=useCanvas2d(ut);return reactExports.useImperativeHandle(_,()=>({frame:mt=>{(at.current===void 0||mt<at.current)&&(at.current=mt),(lt.current===void 0||mt>lt.current)&&(lt.current=mt),push(ot.current,mt),ct.current=requestAnimationFrame(()=>ut(dt.current,ht.current))}}),[dt,ht,ut]),reactExports.useEffect(()=>()=>cancelAnimationFrame(ct.current),[]),React.createElement(Canvas,{ref:dt})}),parse=_e=>Number.isFinite(_e)?_e.toPrecision(2):_e.toString(),MonitorLog=reactExports.forwardRef(function({initialValue:_e},_){const[tt,nt]=reactExports.useState(parse(_e));return reactExports.useImperativeHandle(_,()=>({frame:rt=>nt(parse(rt))}),[]),React.createElement("div",null,tt)});function getValue(_e){return typeof _e=="function"?_e():_e.current}function Monitor({label:_e,objectOrFn:_,settings:tt}){const nt=reactExports.useRef(),rt=reactExports.useRef(getValue(_));return reactExports.useEffect(()=>{const it=window.setInterval(()=>{var st;document.hidden||(st=nt.current)===null||st===void 0||st.frame(getValue(_))},tt.interval);return()=>window.clearInterval(it)},[_,tt.interval]),React.createElement(Row,{input:!0},React.createElement(Label,{align:"top"},_e),tt.graph?React.createElement(MonitorCanvas,{ref:nt,initialValue:rt.current}):React.createElement(MonitorLog,{ref:nt,initialValue:rt.current}))}const _excluded$3=["type","label","key"],specialComponents={[SpecialInputs.BUTTON]:Button,[SpecialInputs.BUTTON_GROUP]:ButtonGroup,[SpecialInputs.MONITOR]:Monitor},Control=React.memo(({path:_e})=>{const[_,{set:tt,setSettings:nt,disable:rt,storeId:it,emitOnEditStart:st,emitOnEditEnd:ot}]=useInput(_e);if(!_)return null;const{type:at,label:lt,key:ct}=_,ut=_objectWithoutProperties$1(_,_excluded$3);if(at in SpecialInputs){const dt=specialComponents[at];return React.createElement(dt,_extends({label:lt,path:_e},ut))}return at in Plugins?React.createElement(ControlInput,_extends({key:it+_e,type:at,label:lt,storeId:it,path:_e,valueKey:ct,setValue:tt,setSettings:nt,disable:rt,emitOnEditStart:st,emitOnEditEnd:ot},ut)):(log(LevaErrors.UNSUPPORTED_INPUT,at,_e),null)});function FolderTitle({toggle:_e,toggled:_,name:tt}){return React.createElement(StyledTitle,{onClick:()=>_e()},React.createElement(Chevron,{toggled:_}),React.createElement("div",null,tt))}const Folder=({name:_e,path:_,tree:tt})=>{const nt=useStoreContext(),rt=join(_,_e),{collapsed:it,color:st}=nt.getFolderSettings(rt),[ot,at]=reactExports.useState(!it),lt=reactExports.useRef(null),ct=useTh("colors","folderWidgetColor"),ut=useTh("colors","folderTextColor");return reactExports.useLayoutEffect(()=>{lt.current.style.setProperty("--leva-colors-folderWidgetColor",st||ct),lt.current.style.setProperty("--leva-colors-folderTextColor",st||ut)},[st,ct,ut]),React.createElement(StyledFolder,{ref:lt},React.createElement(FolderTitle,{name:_e,toggled:ot,toggle:()=>at(dt=>!dt)}),React.createElement(TreeWrapper,{parent:rt,tree:tt,toggled:ot}))},TreeWrapper=React.memo(({isRoot:_e=!1,fill:_=!1,flat:tt=!1,parent:nt,tree:rt,toggled:it})=>{const{wrapperRef:st,contentRef:ot}=useToggle(it),at=useStoreContext(),lt=([ut,dt])=>{var ht;return(isInput(dt)?(ht=at.getInput(dt.path))===null||ht===void 0?void 0:ht.order:at.getFolderSettings(join(nt,ut)).order)||0},ct=Object.entries(rt).sort((ut,dt)=>lt(ut)-lt(dt));return React.createElement(StyledWrapper,{ref:st,isRoot:_e,fill:_,flat:tt},React.createElement(StyledContent,{ref:ot,isRoot:_e,toggled:it},ct.map(([ut,dt])=>isInput(dt)?React.createElement(Control,{key:dt.path,valueKey:dt.valueKey,path:dt.path}):React.createElement(Folder,{key:ut,name:ut,path:nt,tree:dt}))))}),StyledRoot=styled("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${StyledInputRow}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),iconWidth=40,Icon=styled("i",{$flexCenter:"",width:iconWidth,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),StyledTitleWithFilter=styled("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),FilterWrapper=styled("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Icon}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),StyledFilterInput=styled("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),TitleContainer=styled("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:iconWidth}}}}),FilterInput=React.forwardRef(({setFilter:_e,toggle:_},tt)=>{const[nt,rt]=reactExports.useState(""),it=reactExports.useMemo(()=>debounce(_e,250),[_e]),st=()=>{_e(""),rt("")},ot=at=>{const lt=at.currentTarget.value;_(!0),rt(lt)};return reactExports.useEffect(()=>{it(nt)},[nt,it]),React.createElement(React.Fragment,null,React.createElement(StyledFilterInput,{ref:tt,value:nt,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:at=>at.stopPropagation(),onChange:ot}),React.createElement(Icon,{onClick:()=>st(),style:{visibility:nt?"visible":"hidden"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function TitleWithFilter({setFilter:_e,onDrag:_,onDragStart:tt,onDragEnd:nt,toggle:rt,toggled:it,title:st,drag:ot,filterEnabled:at,from:lt}){const[ct,ut]=reactExports.useState(!1),dt=reactExports.useRef(null);reactExports.useEffect(()=>{var mt,yt;ct?(mt=dt.current)===null||mt===void 0||mt.focus():(yt=dt.current)===null||yt===void 0||yt.blur()},[ct]);const ht=useDrag(({offset:[mt,yt],first:vt,last:pt})=>{_({x:mt,y:yt}),vt&&tt({x:mt,y:yt}),pt&&nt({x:mt,y:yt})},{filterTaps:!0,from:({offset:[mt,yt]})=>[(lt==null?void 0:lt.x)||mt,(lt==null?void 0:lt.y)||yt]});return reactExports.useEffect(()=>{const mt=yt=>{yt.key==="L"&&yt.shiftKey&&yt.metaKey&&ut(vt=>!vt)};return window.addEventListener("keydown",mt),()=>window.removeEventListener("keydown",mt)},[]),React.createElement(React.Fragment,null,React.createElement(StyledTitleWithFilter,{mode:ot?"drag":void 0},React.createElement(Icon,{active:!it,onClick:()=>rt()},React.createElement(Chevron,{toggled:it,width:12,height:8})),React.createElement(TitleContainer,_extends({},ot?ht():{},{drag:ot,filterEnabled:at}),st===void 0&&ot?React.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"2",cy:"2",r:"2"}),React.createElement("circle",{cx:"14",cy:"2",r:"2"}),React.createElement("circle",{cx:"26",cy:"2",r:"2"}),React.createElement("circle",{cx:"2",cy:"12",r:"2"}),React.createElement("circle",{cx:"14",cy:"12",r:"2"}),React.createElement("circle",{cx:"26",cy:"12",r:"2"})):st),at&&React.createElement(Icon,{active:ct,onClick:()=>ut(mt=>!mt)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},React.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),React.createElement(FilterWrapper,{toggled:ct},React.createElement(FilterInput,{ref:dt,setFilter:_e,toggle:rt})))}const _excluded$2=["store","hidden","theme","collapsed"];function LevaRoot(_e){let{store:_,hidden:tt=!1,theme:nt,collapsed:rt=!1}=_e,it=_objectWithoutProperties$1(_e,_excluded$2);const st=useDeepMemo(()=>mergeTheme(nt),[nt]),[ot,at]=reactExports.useState(!rt),lt=typeof rt=="object"?!rt.collapsed:ot,ct=reactExports.useMemo(()=>typeof rt=="object"?ut=>{typeof ut=="function"?rt.onChange(!ut(!rt.collapsed)):rt.onChange(!ut)}:at,[rt]);return!_||tt?null:React.createElement(ThemeContext.Provider,{value:st},React.createElement(LevaCore,_extends({store:_},it,{toggled:lt,setToggle:ct,rootClass:st.className})))}const LevaCore=React.memo(({store:_e,rootClass:_,fill:tt=!1,flat:nt=!1,neverHide:rt=!1,oneLineLabels:it=!1,titleBar:st={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:ot=!1,toggled:at,setToggle:lt})=>{var ct,ut;const dt=useVisiblePaths(_e),[ht,mt]=reactExports.useState(""),yt=reactExports.useMemo(()=>buildTree(dt,ht),[dt,ht]),[vt,pt]=useTransform(),_t=rt||dt.length>0,xt=typeof st=="object"&&st.title||void 0,St=typeof st=="object"&&(ct=st.drag)!==null&&ct!==void 0?ct:!0,At=typeof st=="object"&&(ut=st.filter)!==null&&ut!==void 0?ut:!0,bt=typeof st=="object"&&st.position||void 0,Et=typeof st=="object"&&st.onDrag||void 0,wt=typeof st=="object"&&st.onDragStart||void 0,Rt=typeof st=="object"&&st.onDragEnd||void 0;return React.useEffect(()=>{pt({x:bt==null?void 0:bt.x,y:bt==null?void 0:bt.y})},[bt,pt]),globalStyles(),React.createElement(PanelSettingsContext.Provider,{value:{hideCopyButton:ot}},React.createElement(StyledRoot,{ref:vt,className:_,fill:tt,flat:nt,oneLineLabels:it,hideTitleBar:!st,style:{display:_t?"block":"none"}},st&&React.createElement(TitleWithFilter,{onDrag:Tt=>{pt(Tt),Et==null||Et(Tt)},onDragStart:Tt=>wt==null?void 0:wt(Tt),onDragEnd:Tt=>Rt==null?void 0:Rt(Tt),setFilter:mt,toggle:Tt=>lt(Mt=>Tt??!Mt),toggled:at,title:xt,drag:St,filterEnabled:At,from:bt}),_t&&React.createElement(StoreContext.Provider,{value:_e},React.createElement(TreeWrapper,{isRoot:!0,fill:tt,flat:nt,tree:yt,toggled:at}))))}),_excluded$1=["isRoot"];let rootInitialized=!1,rootEl=null;function Leva(_e){let{isRoot:_=!1}=_e,tt=_objectWithoutProperties$1(_e,_excluded$1);return reactExports.useEffect(()=>(rootInitialized=!0,!_&&rootEl&&(rootEl.remove(),rootEl=null),()=>{_||(rootInitialized=!1)}),[_]),React.createElement(LevaRoot,_extends({store:levaStore},tt))}function useRenderRoot(_e){reactExports.useEffect(()=>{_e&&!rootInitialized&&(rootEl||(rootEl=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(rootEl),render(React.createElement(Leva,{isRoot:!0}),rootEl))),rootInitialized=!0)},[_e])}function parseArgs(_e,_,tt,nt,rt){let it,st,ot,at,lt;return typeof _e=="string"?(st=_e,it=_,Array.isArray(tt)&&(lt=tt)):(it=_e,Array.isArray(_)?lt=_:(at=_,lt=tt)),{schema:it,folderName:st,folderSettings:ot,hookSettings:at,deps:lt||[]}}function useControls(_e,_,tt,nt,rt){const{folderName:it,schema:st,folderSettings:ot,hookSettings:at,deps:lt}=parseArgs(_e,_,tt),ct=typeof st=="function",ut=reactExports.useRef(!1),dt=reactExports.useRef(!0),ht=useDeepMemo(()=>{ut.current=!0;const Mt=typeof st=="function"?st():st;return it?{[it]:folder(Mt,ot)}:Mt},lt),mt=!(at!=null&&at.store);useRenderRoot(mt);const[yt]=reactExports.useState(()=>(at==null?void 0:at.store)||levaStore),[vt,pt]=reactExports.useMemo(()=>yt.getDataFromSchema(ht),[yt,ht]),[_t,xt,St,At,bt]=reactExports.useMemo(()=>{const Mt=[],Lt=[],Ft={},Ht={},Kt={};return Object.values(pt).forEach(({path:Wt,onChange:Jt,onEditStart:Ot,onEditEnd:kt,transient:Gt})=>{Mt.push(Wt),Jt?(Ft[Wt]=Jt,Gt||Lt.push(Wt)):Lt.push(Wt),Ot&&(Ht[Wt]=Ot),kt&&(Kt[Wt]=kt)}),[Mt,Lt,Ft,Ht,Kt]},[pt]),Et=reactExports.useMemo(()=>yt.orderPaths(_t),[_t,yt]),wt=useValuesForPath(yt,xt,vt),Rt=reactExports.useCallback(Mt=>{const Lt=Object.entries(Mt).reduce((Ft,[Ht,Kt])=>Object.assign(Ft,{[pt[Ht].path]:Kt}),{});yt.set(Lt,!1)},[yt,pt]),Tt=reactExports.useCallback(Mt=>yt.get(pt[Mt].path),[yt,pt]);return reactExports.useEffect(()=>{const Mt=!dt.current&&ut.current;return yt.addData(vt,Mt),dt.current=!1,ut.current=!1,()=>yt.disposePaths(Et)},[yt,Et,vt]),reactExports.useEffect(()=>{const Mt=[];return Object.entries(St).forEach(([Lt,Ft])=>{Ft(yt.get(Lt),Lt,_objectSpread2({initial:!0,get:yt.get},yt.getInput(Lt)));const Ht=yt.useStore.subscribe(Kt=>{const Wt=Kt.data[Lt];return[Wt.disabled?void 0:Wt.value,Wt]},([Kt,Wt])=>Ft(Kt,Lt,_objectSpread2({initial:!1,get:yt.get},Wt)),{equalityFn:shallow});Mt.push(Ht)}),()=>Mt.forEach(Lt=>Lt())},[yt,St]),reactExports.useEffect(()=>{const Mt=[];return Object.entries(At).forEach(([Lt,Ft])=>Mt.push(yt.subscribeToEditStart(Lt,Ft))),Object.entries(bt).forEach(([Lt,Ft])=>Mt.push(yt.subscribeToEditEnd(Lt,Ft))),()=>Mt.forEach(Lt=>Lt())},[At,bt,yt]),ct?[wt,Rt,Tt]:wt}register(LevaInputs.SELECT,select);register(LevaInputs.IMAGE,image);register(LevaInputs.NUMBER,number$1);register(LevaInputs.COLOR,color);register(LevaInputs.STRING,string);register(LevaInputs.BOOLEAN,boolean);register(LevaInputs.INTERVAL,interval);register(LevaInputs.VECTOR3D,vector3d);register(LevaInputs.VECTOR2D,vector2d);useGLTF.preload("portfolio/medias/portfolio.glb");const Model=()=>{const _e=reactExports.useRef(null),{nodes:_}=useGLTF("portfolio/medias/portfolio.glb"),[tt,nt]=reactExports.useState(0),[rt,it]=reactExports.useState(-15),[st,ot]=reactExports.useState(0),{size:at}=useThree(),lt=at.width<768,ct=useControls({thickness:{value:.25,min:0,max:3,step:.05},roughness:{value:0,min:0,max:1,step:.1},transmission:{value:1,min:0,max:1,step:.1},ior:{value:1.2,min:0,max:3,step:.1},chromaticAberration:{value:.08,min:0,max:1},backside:{value:!0}}),ut=reactExports.useMemo(()=>_.Texte.geometry,[_.Texte.geometry]),dt=jsxRuntimeExports.jsx(MeshTransmissionMaterial,{...ct}),ht=lt?[.4,2.5,.5]:[1.2,5,1.5];let mt=!1;return reactExports.useEffect(()=>{},[]),useFrame(()=>{!lt&&_e.current&&mt&&(nt(yt=>yt+.05),_e.current.rotation.y=Math.sin(tt)*(Math.PI/80),_e.current.rotation.z=Math.sin(tt)*(Math.PI/80)),it(yt=>yt<-5.22?yt+.025:(ot(1),mt=!0,yt))}),jsxRuntimeExports.jsx("group",{children:jsxRuntimeExports.jsx("group",{position:[0,-.5,0],rotation:[Math.PI/2,0,0],children:!lt&&jsxRuntimeExports.jsx("mesh",{ref:_e,scale:ht,geometry:ut,position:[0,rt,.4],"material-opacity":st,children:dt})})})};extend$2({DodecahedronGeometry});const Spark=()=>{const _=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useMemo(()=>new Object3D,[]),rt=reactExports.useMemo(()=>{const st=new Float32Array(300);for(let ot=0;ot<100;ot++)st[ot*3+0]=Math.random(),st[ot*3+1]=Math.random(),st[ot*3+2]=Math.random();return st},[100]),it=reactExports.useMemo(()=>{const st=[];for(let ot=0;ot<100;ot++){const at=Math.random()*100,lt=20+Math.random()*100,ct=.005+Math.random()*.01,ut=Math.random()*100-50,dt=Math.random()*100-50,ht=Math.random()*100-70;st.push({time:at,factor:lt,speed:ct,x:ut,y:dt,z:ht})}return st},[100]);return useFrame(()=>{it.forEach((st,ot)=>{let{factor:at,speed:lt,x:ct,y:ut,z:dt}=st;const ht=st.time+=lt;nt.position.set(ct+Math.cos(ht/10*at)+Math.sin(ht*1)*at/10,ut+Math.sin(ht/10*at)+Math.cos(ht*2)*at/10,dt+Math.cos(ht/10*at)+Math.sin(ht*3)*at/10);const mt=Math.cos(ht);nt.scale.set(mt,mt,mt),nt.rotation.set(mt*5,mt*5,mt*5),nt.updateMatrix(),_.current.setMatrixAt(ot,nt.matrix)}),_.current.instanceMatrix.needsUpdate=!0}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("pointLight",{ref:tt,distance:50,intensity:1e3,color:"blue"}),jsxRuntimeExports.jsxs("instancedMesh",{ref:_,args:[new DodecahedronGeometry(.2,0),new MeshStandardMaterial({color:16777215}),100],children:[jsxRuntimeExports.jsx("dodecahedronGeometry",{args:[.2,0]}),jsxRuntimeExports.jsx("meshStandardMaterial",{vertexColors:!0,emissive:"#949292",metalness:.5,roughness:1}),jsxRuntimeExports.jsx("bufferAttribute",{attach:"attributes.color",array:rt,itemSize:3,count:100})]})]})},Stars=()=>{const _=new Float32Array(15e3);for(let tt=0;tt<5e3;tt++)_[tt*3]=(Math.random()-.5)*100,_[tt*3+1]=(Math.random()-.5)*100,_[tt*3+2]=(Math.random()-.5)*100;return jsxRuntimeExports.jsx(Points,{positions:_,children:jsxRuntimeExports.jsx("pointsMaterial",{size:.05,color:"white"})})},Title=({onComplete:_e})=>{const{size:_}=useThree(),nt=_.width<768?.5:1,rt="LUCIEN LACHAUD",[it,st]=reactExports.useState(Array(rt.length).fill(0)),ot=reactExports.useRef([]),at=1.1,lt=.5,ct=rt.split("").reduce((yt,vt)=>yt+(vt===" "?lt:at)*nt,0),ut=[7,0,13,4,10,2,9,8,6,1,11,3,12,5],[dt,ht]=reactExports.useState(0);useFrame(()=>{st(vt=>vt.map((pt,_t)=>{const xt=rt[_t];return ut[dt]===_t?xt===" "?1:Math.min(pt+.03,1):pt}));const yt=ut[dt];it[yt]>=1&&dt<ut.length-1&&ht(vt=>vt+1),dt===ut.length-1&&it[yt]>=1&&_e()});let mt=-(ct-.8)/2;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rt.split("").map((yt,vt)=>{const _t=yt===" "?lt:at,xt=[mt,1,-6];return mt+=_t*nt,jsxRuntimeExports.jsx(Text,{ref:St=>ot.current[vt]=St,font:"portfolio/fonts/ppneuemontreal-bold.otf",position:xt,fontSize:nt,anchorX:"center",anchorY:"middle","material-opacity":it[vt],children:yt},vt)})})},Scene=()=>{const[_e,_]=reactExports.useState(!1),tt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),nt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars,{}),[]);return jsxRuntimeExports.jsxs(Canvas$1,{gl:{alpha:!1,antialias:!0},style:{display:"block"},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:.1}),jsxRuntimeExports.jsx("directionalLight",{intensity:1.5,position:[2,3,4]}),jsxRuntimeExports.jsx(Environment,{preset:"city"}),nt,tt,jsxRuntimeExports.jsx(Title,{onComplete:()=>_(!0)}),_e&&jsxRuntimeExports.jsx(Model,{})]})},Home=()=>{const[_e,_]=reactExports.useState(!1);return reactExports.useEffect(()=>{_(navigator.maxTouchPoints>0)},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Scene,{}),jsxRuntimeExports.jsx("div",{className:"drag-down-indicator",children:jsxRuntimeExports.jsx("span",{className:"vertical-text",children:_e?"Hold Finger ---":"Hold & Drag Down -->"})})]})},CustomCursor=({x:_e,y:_,isTitleHovered:tt})=>{const[nt,rt]=reactExports.useState(25),[it,st]=reactExports.useState("black");return reactExports.useEffect(()=>{const ot=tt?80:25,at=setInterval(()=>{rt(lt=>lt<ot?Math.min(lt+1,ot):lt>ot?Math.max(lt-1,ot):lt)},10);return()=>clearInterval(at)},[tt]),reactExports.useEffect(()=>{st(tt?"orange":"black")},[tt]),jsxRuntimeExports.jsx("div",{className:"custom-cursor",style:{left:_e,top:_,width:`${nt}px`,height:`${nt}px`,backgroundColor:it,borderRadius:"50%",zIndex:"100"},children:jsxRuntimeExports.jsx("div",{className:`cursor-text ${tt?"fade-out":"fade-in"}`,children:"HOLD & SLIDE"})})};extend$2({PlaneGeometry});const Plane$2=({texture:_e})=>jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("planeGeometry",{attach:"geometry",args:[16,8]}),jsxRuntimeExports.jsx("meshBasicMaterial",{attach:"material",map:_e})]}),DropdownMenu$1=({className:_e="",projects:_})=>{const[tt,nt]=reactExports.useState(()=>{const Mt=sessionStorage.getItem("currentIndex");return Mt?Number(Mt):0}),[rt,it]=reactExports.useState(!0),st=reactExports.useRef(null),[ot,at]=reactExports.useState(5),[lt,ct]=reactExports.useState(5),ut=reactExports.useRef(!1),dt=reactExports.useRef(0),ht=reactExports.useRef(0),[mt,yt]=reactExports.useState(null),vt=reactExports.useRef(sessionStorage.getItem("scrollPosition")?Number(sessionStorage.getItem("scrollPosition")):0),[pt,_t]=reactExports.useState(!1),[xt,St]=reactExports.useState(!1);reactExports.useEffect(()=>{sessionStorage.setItem("currentIndex",tt.toString())},[tt]),reactExports.useEffect(()=>{const Mt=_[tt],Lt=new TextureLoader;if(typeof Mt.image=="string")Lt.load(Mt.image,Ft=>{st.current=Ft});else{const Ft=Mt.image,Ht=new VideoTexture(Ft);Ft.crossOrigin="anonymous",Ft.muted=!0,Ft.play().catch(Kt=>console.log("Error playing video:",Kt)),st.current=Ht}},[tt,_]),reactExports.useEffect(()=>{const Mt=Lt=>{};return window.addEventListener("wheel",Mt),()=>window.removeEventListener("wheel",Mt)},[_.length]),reactExports.useEffect(()=>{let Mt=null;const Lt=Wt=>{Wt.button===0&&(ut.current=!0,dt.current=Wt.clientY,ht.current=0,Mt=setTimeout(()=>{ut.current&&at(15)},500))},Ft=Wt=>{if(Wt.button===0){ut.current=!1,Mt&&clearTimeout(Mt),at(5);const Jt=document.querySelector(".titles-slider");Jt&&(vt.current=Jt.scrollTop,sessionStorage.setItem("scrollPosition",Jt.scrollTop.toString()))}},Ht=.07,Kt=Wt=>{if(ut.current){const Jt=(Wt.clientY-dt.current)*Ht;ht.current-=Jt;const Ot=document.querySelector(".titles-slider");if(Ot){const kt=Ot.scrollHeight-Ot.clientHeight,Gt=Math.min(kt,Math.max(0,Ot.scrollTop-ht.current));Ot.scrollTop=Gt}dt.current=Wt.clientY}};return window.addEventListener("mousedown",Lt),window.addEventListener("mouseup",Ft),window.addEventListener("mousemove",Kt),()=>{window.removeEventListener("mousedown",Lt),window.removeEventListener("mouseup",Ft),window.removeEventListener("mousemove",Kt),Mt&&clearTimeout(Mt)}},[]);const[At,bt]=reactExports.useState({x:0,y:0});reactExports.useEffect(()=>{const Mt=Lt=>{bt({x:Lt.clientX,y:Lt.clientY})};return window.addEventListener("mousemove",Mt),()=>{window.removeEventListener("mousemove",Mt)}},[]),reactExports.useEffect(()=>{if(pt){const Mt=document.querySelector(".titles-slider");Mt&&(Mt.scrollTop=vt.current)}},[pt,_.length]);const Et=()=>{const{camera:Mt}=useThree();return useFrame(()=>{ct(Lt=>MathUtils.lerp(Lt,ot,.1)),Mt.position.z=lt,_t(Mt.position.z>10)}),null},wt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),Rt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars,{}),[]),Tt=_[tt];return jsxRuntimeExports.jsxs("div",{className:`dropdown-menu ${_e}`,children:[jsxRuntimeExports.jsxs(Canvas$1,{children:[pt&&jsxRuntimeExports.jsxs("group",{children:[wt,Rt]}),jsxRuntimeExports.jsx(Et,{}),st.current&&jsxRuntimeExports.jsx(Plane$2,{texture:st.current})]}),pt&&jsxRuntimeExports.jsx("div",{className:`titles-slider ${pt?"show":""}`,children:_.map((Mt,Lt)=>jsxRuntimeExports.jsx("div",{className:`project-title ${mt===Lt||tt===Lt?"hovered":""}`,onMouseEnter:()=>{yt(Lt),nt(Lt)},onMouseLeave:()=>yt(null),children:Mt.title},Lt))}),!pt&&jsxRuntimeExports.jsx("div",{className:`project-details ${rt?"show":""}`,children:jsxRuntimeExports.jsxs("div",{className:"project-details-div",children:[jsxRuntimeExports.jsx("h2",{className:"project-details-h2",onMouseEnter:()=>St(!0),onMouseLeave:()=>St(!1),children:Tt.title}),Tt.sector&&jsxRuntimeExports.jsxs("p",{className:"p-p",children:[jsxRuntimeExports.jsx("strong",{children:"Secteur:"})," ",Tt.sector]}),Tt.description&&jsxRuntimeExports.jsx("p",{className:"description",children:Tt.description}),Tt.readMoreLink&&jsxRuntimeExports.jsx(Link,{to:Tt.readMoreLink,onClick:Mt=>{Mt.preventDefault(),Tt.readMoreLink&&(window.location.href=Tt.readMoreLink,window.location.reload())},children:"Read more"})]})}),jsxRuntimeExports.jsx(CustomCursor,{x:At.x,y:At.y,isTitleHovered:xt})]})};extend$2({PlaneGeometry});const Plane$1=({texture:_e})=>jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("planeGeometry",{attach:"geometry",args:[16,8]}),jsxRuntimeExports.jsx("meshBasicMaterial",{attach:"material",map:_e})]}),DropdownMenu=({className:_e="",projects:_})=>{const[tt,nt]=reactExports.useState(()=>{const Lt=sessionStorage.getItem("currentIndex");return Lt?Number(Lt):0}),[rt,it]=reactExports.useState(!0),st=reactExports.useRef(null),[ot,at]=reactExports.useState(5),[lt,ct]=reactExports.useState(5),ut=reactExports.useRef(!1),dt=reactExports.useRef(0),ht=reactExports.useRef(0),[mt,yt]=reactExports.useState(null),vt=reactExports.useRef(sessionStorage.getItem("scrollPosition")?Number(sessionStorage.getItem("scrollPosition")):0),[pt,_t]=reactExports.useState(!1),xt=300,St=reactExports.useRef(0),At=Lt=>{const Ft=_[Lt],Ht=new TextureLoader;if(typeof Ft.image=="string")Ht.load(Ft.image,Kt=>{st.current=Kt});else{const Kt=Ft.image,Wt=new VideoTexture(Kt);Kt.crossOrigin="anonymous",Kt.muted=!0,Kt.play().catch(Jt=>console.log("Error playing video:",Jt)),st.current=Wt}};reactExports.useEffect(()=>{sessionStorage.setItem("currentIndex",tt.toString())},[tt]),reactExports.useEffect(()=>{const Lt=_[tt],Ft=new TextureLoader;if(typeof Lt.image=="string")Ft.load(Lt.image,Ht=>{st.current=Ht});else{const Ht=Lt.image,Kt=new VideoTexture(Ht);Ht.crossOrigin="anonymous",Ht.muted=!0,Ht.play().catch(Wt=>console.log("Error playing video:",Wt)),st.current=Kt}},[tt,_]),reactExports.useEffect(()=>{const Lt=Ft=>{};return window.addEventListener("wheel",Lt),()=>window.removeEventListener("wheel",Lt)},[_.length]),reactExports.useEffect(()=>{let Lt=null;const Ft=Jt=>{Jt.button===0&&(ut.current=!0,dt.current=Jt.clientY,ht.current=0,Lt=setTimeout(()=>{ut.current&&at(15)},500))},Ht=Jt=>{if(Jt.button===0){ut.current=!1,Lt&&clearTimeout(Lt),at(5);const Ot=document.querySelector(".titles-slider");Ot&&(vt.current=Ot.scrollTop,sessionStorage.setItem("scrollPosition",Ot.scrollTop.toString()))}},Kt=.07,Wt=Jt=>{if(ut.current){const Ot=(Jt.clientY-dt.current)*Kt;ht.current-=Ot;const kt=document.querySelector(".titles-slider");if(kt){const Gt=kt.scrollHeight-kt.clientHeight,zt=Math.min(Gt,Math.max(0,kt.scrollTop-ht.current));kt.scrollTop=zt}dt.current=Jt.clientY}};return window.addEventListener("mousedown",Ft),window.addEventListener("mouseup",Ht),window.addEventListener("mousemove",Wt),()=>{window.removeEventListener("mousedown",Ft),window.removeEventListener("mouseup",Ht),window.removeEventListener("mousemove",Wt),Lt&&clearTimeout(Lt)}},[]),reactExports.useEffect(()=>{if(pt){const Lt=document.querySelector(".titles-slider");Lt&&(Lt.scrollTop=vt.current)}},[pt,_.length]);const bt=()=>{const{camera:Lt}=useThree();return useFrame(()=>{ct(Ft=>MathUtils.lerp(Ft,ot,.1)),Lt.position.z=lt}),null},Et=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),wt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars,{}),[]),Rt=_[tt],Tt=()=>{_t(Lt=>!Lt)},Mt=()=>{const Lt=Date.now();Lt-St.current<xt&&Tt(),St.current=Lt};return reactExports.useEffect(()=>(window.addEventListener("touchstart",Mt),()=>window.removeEventListener("touchstart",Mt)),[]),jsxRuntimeExports.jsxs("div",{className:`dropdown-menu ${_e}`,children:[jsxRuntimeExports.jsxs(Canvas$1,{children:[pt&&jsxRuntimeExports.jsxs("group",{children:[Et,wt]}),jsxRuntimeExports.jsx(bt,{}),st.current&&jsxRuntimeExports.jsx(Plane$1,{texture:st.current})]}),jsxRuntimeExports.jsx("div",{className:"doubletap",children:"Double Tap To Switch Project"}),pt&&jsxRuntimeExports.jsx("div",{className:`titles-slider ${pt?"show":""}`,children:_.map((Lt,Ft)=>jsxRuntimeExports.jsx("div",{className:`project-title ${mt===Ft||tt===Ft?"hovered":""}`,onMouseEnter:()=>{yt(Ft),nt(Ft),At(Ft)},onMouseLeave:()=>yt(null),children:Lt.title},Ft))}),!pt&&jsxRuntimeExports.jsxs("div",{className:`project-details ${rt?"show":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"project-details-div",children:[jsxRuntimeExports.jsx("h2",{className:"project-details-h2",children:Rt.title}),Rt.sector&&jsxRuntimeExports.jsxs("p",{className:"p-p",children:[jsxRuntimeExports.jsx("strong",{children:"Secteur:"})," ",Rt.sector]}),Rt.description&&jsxRuntimeExports.jsx("p",{className:"description",children:Rt.description}),Rt.readMoreLink&&jsxRuntimeExports.jsx(Link,{to:Rt.readMoreLink,onClick:Lt=>{Lt.preventDefault(),Rt.readMoreLink&&(window.location.href=Rt.readMoreLink,window.location.reload())},children:"Read more"})]}),jsxRuntimeExports.jsx("div",{})]})]})},Work=({projects:_e})=>{const _=/Mobi|Tablet|Android|iPad|iPhone/.test(navigator.userAgent);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_?jsxRuntimeExports.jsx(DropdownMenu,{projects:_e,className:"show"}):jsxRuntimeExports.jsx(DropdownMenu$1,{projects:_e,className:"show"})})},Background=({image:_e,opacity:_,animated:tt=!1})=>{const nt=useTexture(_e),rt=reactExports.useRef(null);return useFrame(({clock:it})=>{tt&&rt.current&&(rt.current.opacity=.4+.3*Math.sin(it.elapsedTime))}),jsxRuntimeExports.jsxs("mesh",{position:[0,-10,-100],scale:[16,10,.1],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[20,20]}),jsxRuntimeExports.jsx("meshBasicMaterial",{ref:rt,map:nt,transparent:!0,opacity:_})]})},InteractiveScene=({onFranceClick:_e})=>{const{raycaster:_,mouse:tt,scene:nt,camera:rt}=useThree(),it=reactExports.useRef(null);return reactExports.useEffect(()=>{const st=ot=>{tt.x=ot.clientX/window.innerWidth*2-1,tt.y=-(ot.clientY/window.innerHeight)*2+1,_.setFromCamera(tt,rt);const at=_.intersectObjects(nt.children,!0);at.length>0&&at[0].object===it.current&&(_e(),console.log("clickerd"))};return window.addEventListener("click",st),()=>{window.removeEventListener("click",st)}},[_,tt,rt,nt,_e]),jsxRuntimeExports.jsx("group",{children:jsxRuntimeExports.jsxs("mesh",{ref:it,position:[-.2,2,-1],scale:.6,children:[jsxRuntimeExports.jsx("boxGeometry",{args:[1,1,1]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"green",transparent:!0,opacity:0})]})})},About=()=>{const _e=[{name:"Data Science",skills:[{name:"Python",level:4,description:"Utilisé pour le traitement et l'analyse de données."},{name:"Pandas",level:4,description:"Utilisé dans des projets académiques de machine learning,prétraitement de données et gestion de base de données."},{name:"TensorFlow",level:3,description:"Utilisé pour construire des modèles de machine learning."},{name:"PyTorch",level:4,description:"Utilisé pour mes travaux dirigé et mes projets acadèmiques dans le domaine du deep learning."}]},{name:"Learning Reinforcement",skills:[{name:"Python",level:4,description:"Langage de programmation utilisé dans ce domaine."},{name:"Deep LR",level:3,description:"Utilisation dans projets sur des agents Qlearning,SARSA,MonteCarlo pour entraînement sur des environnements diverses."},{name:"Notion",level:4,description:"Notion mathèmatiques des différents agents,formules ,environnements."}]},{name:"Backend",skills:[{name:"Java",level:4,description:"Utilisé pour développer des applications d'entreprise."},{name:"Spring Boot",level:3,description:"Utilisé pour construire des microservices."},{name:"Flask",level:4,description:"Utilisé dans des projets de gestion de base de données"}]},{name:"Frontend",skills:[{name:"HTML",level:5,description:"Utilisé pour créer la structure des pages web."},{name:"CSS",level:4,description:"Utilisé pour styliser les pages et rendre les sites responsives."},{name:"JavaScript",level:3,description:"Utilisé pour ajouter de l'interactivité aux pages web."},{name:"React",level:4,description:"Utilisé pour construire des interfaces utilisateur dynamiques."},{name:"Vuejs",level:4,description:"Utilisé pour développer des applications web avec une approche progressive."}]},{name:"Graphics engine",skills:[{name:"Unity",level:3,description:"Conception de petits projets (jeu d'horreur,jeu en ligne)"},{name:"C#",level:4,description:"Language utilisé durant la réalisation de petis projets sur le moteur graphique Unity"},{name:"Blender",level:1,description:"Tentative d'apprendre à modèliser sur ce logiciel de modèlisation 3D"}]}],[_,tt]=reactExports.useState(0),[nt,rt]=reactExports.useState(0),[it,st]=reactExports.useState({x:0,y:0}),[ot,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),ut=_e[_].skills[nt],dt=()=>{at(!0),setTimeout(()=>ct(!0),3e3)},ht=pt=>{pt==="up"?rt(_t=>Math.max(_t-1,0)):pt==="down"?rt(_t=>Math.min(_t+1,_e[_].skills.length-1)):pt==="left"?(tt(_t=>_t===0?_e.length-1:_t-1),rt(0)):pt==="right"&&(tt(_t=>(_t+1)%_e.length),rt(0))},mt=()=>{const pt=_e[_].skills;return jsxRuntimeExports.jsx("div",{className:"skill-cube-container",children:pt.map((_t,xt)=>jsxRuntimeExports.jsx("div",{className:`skill-cube ${xt===nt?"active-skill":""}`,children:jsxRuntimeExports.jsx("div",{className:"skill-label",children:_t.name})},xt))})};reactExports.useEffect(()=>{const pt=_t=>{st({x:_t.clientX,y:_t.clientY})};return window.addEventListener("mousemove",pt),()=>{window.removeEventListener("mousemove",pt)}},[]);const yt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),vt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars,{}),[]);return jsxRuntimeExports.jsxs("div",{className:"custom-cursor-container",children:[jsxRuntimeExports.jsx("div",{className:"custom-cursor",style:{transform:`translate3d(${it.x}px, ${it.y}px, 0)`}}),jsxRuntimeExports.jsxs(Canvas$1,{className:"canvas",children:[jsxRuntimeExports.jsxs("group",{children:[yt,vt]}),jsxRuntimeExports.jsx(Background,{image:"./portfolio/about/background.jpg",opacity:.5}),jsxRuntimeExports.jsx(Background,{image:"./portfolio/about/overlay.png",opacity:.95,animated:!0}),jsxRuntimeExports.jsx(InteractiveScene,{onFranceClick:dt})]}),jsxRuntimeExports.jsx("div",{className:"drag-down-indicator",children:!ot&&jsxRuntimeExports.jsx("span",{className:"vertical-text",children:"Clique sur la France"})}),jsxRuntimeExports.jsx("div",{className:`retro-container scanline-effect ${ot?"expanded":""}`,id:"big",children:lt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"retro-container scanline-effect",id:"nav_retro",children:jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsx("h1",{}),jsxRuntimeExports.jsxs("nav",{children:[jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{children:"PROFILE"})})}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{children:"COMPETENCES"})})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"retro-container scanline-effect",id:"window1",children:[jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx("section",{id:"screen-1",children:jsxRuntimeExports.jsxs("article",{children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx("h2",{children:"Lucien Lachaud"})}),jsxRuntimeExports.jsxs("div",{className:"content",children:["Né à Bordeaux",jsxRuntimeExports.jsx("h2",{children:"Formation :"}),"Licence Informatique 2020-2023",jsxRuntimeExports.jsx("br",{}),"Master Informatique spec IA 2023-2025"]})]})})}),jsxRuntimeExports.jsx("footer",{children:jsxRuntimeExports.jsx("p",{})})]}),jsxRuntimeExports.jsx("div",{className:"retro-container scanline-effect",id:"window2",children:jsxRuntimeExports.jsxs("div",{className:"dpad",children:[jsxRuntimeExports.jsx("button",{className:"dpad-btn",id:"up",onClick:()=>ht("left"),children:"▲"}),jsxRuntimeExports.jsx("button",{className:"dpad-btn",id:"left",onClick:()=>ht("up"),children:"◄"}),jsxRuntimeExports.jsx("button",{className:"dpad-btn",id:"right",onClick:()=>ht("down"),children:"►"}),jsxRuntimeExports.jsx("button",{className:"dpad-btn",id:"down",onClick:()=>ht("right"),children:"▼"})]})}),jsxRuntimeExports.jsxs("div",{className:"retro-container scanline-effect",id:"screen_skills",children:[jsxRuntimeExports.jsx("h2",{children:_e[_].name}),jsxRuntimeExports.jsx(mt,{}),jsxRuntimeExports.jsxs("div",{className:"skill-info",children:[jsxRuntimeExports.jsx("p",{children:ut.name}),jsxRuntimeExports.jsxs("p",{className:"skill-level",children:["Niveau de connaissance: ",[...Array(5)].map((pt,_t)=>jsxRuntimeExports.jsx("div",{className:`skill-point ${_t<ut.level?"green":"blue-black"}`},_t))]}),jsxRuntimeExports.jsxs("p",{className:"skill-infop",children:["Utilisations:",jsxRuntimeExports.jsx("br",{}),ut.description]})]})]})]}):!lt&&jsxRuntimeExports.jsx("div",{className:"retro-container scanline-effect",id:"loading-bar-container",children:jsxRuntimeExports.jsx("div",{id:"loading-bar"})})})]})},cvPage="_cvPage_112wh_1",canvasWrapper="_canvasWrapper_112wh_9",cvContainer="_cvContainer_112wh_16",pdfViewer="_pdfViewer_112wh_26",downloadLink="_downloadLink_112wh_35",styles={cvPage,canvasWrapper,cvContainer,pdfViewer,downloadLink};var lib={exports:{}},core_min={};function commonjsRequire(_e){throw new Error('Could not dynamically require "'+_e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(_,tt){module.exports=_.pdfjsLib=tt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(_e,_)=>{var lr;Object.defineProperty(_,"__esModule",{value:!0}),_.VerbosityLevel=_.Util=_.UnknownErrorException=_.UnexpectedResponseException=_.TextRenderingMode=_.RenderingIntentFlag=_.PromiseCapability=_.PermissionFlag=_.PasswordResponses=_.PasswordException=_.PageActionEventType=_.OPS=_.MissingPDFException=_.MAX_IMAGE_SIZE_TO_CACHE=_.LINE_FACTOR=_.LINE_DESCENT_FACTOR=_.InvalidPDFException=_.ImageKind=_.IDENTITY_MATRIX=_.FormatError=_.FeatureTest=_.FONT_IDENTITY_MATRIX=_.DocumentActionEventType=_.CMapCompressionType=_.BaseException=_.BASELINE_FACTOR=_.AnnotationType=_.AnnotationReplyType=_.AnnotationPrefix=_.AnnotationMode=_.AnnotationFlag=_.AnnotationFieldFlag=_.AnnotationEditorType=_.AnnotationEditorPrefix=_.AnnotationEditorParamsType=_.AnnotationBorderStyleType=_.AnnotationActionEventType=_.AbortException=void 0,_.assert=kt,_.bytesToString=En,_.createValidAbsoluteUrl=zt,_.getModificationDate=Pn,_.getUuid=fr,_.getVerbosityLevel=Kt,_.info=Wt,_.isArrayBuffer=an,_.isArrayEqual=Hn,_.isNodeJS=void 0,_.normalizeUnicode=Jn,_.objectFromMap=Cn,_.objectSize=Tn,_.setVerbosityLevel=Ht,_.shadow=Vt,_.string32=nn,_.stringToBytes=fn,_.stringToPDFString=hn,_.stringToUTF8String=cn,_.unreachable=Ot,_.utf8StringToString=mn,_.warn=Jt;const tt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");_.isNodeJS=tt;const nt=[1,0,0,1,0,0];_.IDENTITY_MATRIX=nt;const rt=[.001,0,0,.001,0,0];_.FONT_IDENTITY_MATRIX=rt;const it=1e7;_.MAX_IMAGE_SIZE_TO_CACHE=it;const st=1.35;_.LINE_FACTOR=st;const ot=.35;_.LINE_DESCENT_FACTOR=ot;const at=ot/st;_.BASELINE_FACTOR=at;const lt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};_.RenderingIntentFlag=lt;const ct={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};_.AnnotationMode=ct;const ut="pdfjs_internal_editor_";_.AnnotationEditorPrefix=ut;const dt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};_.AnnotationEditorType=dt;const ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};_.AnnotationEditorParamsType=ht;const mt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};_.PermissionFlag=mt;const yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};_.TextRenderingMode=yt;const vt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};_.ImageKind=vt;const pt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};_.AnnotationType=pt;const _t={GROUP:"Group",REPLY:"R"};_.AnnotationReplyType=_t;const xt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};_.AnnotationFlag=xt;const St={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};_.AnnotationFieldFlag=St;const At={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};_.AnnotationBorderStyleType=At;const bt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};_.AnnotationActionEventType=bt;const Et={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};_.DocumentActionEventType=Et;const wt={O:"PageOpen",C:"PageClose"};_.PageActionEventType=wt;const Rt={ERRORS:0,WARNINGS:1,INFOS:5};_.VerbosityLevel=Rt;const Tt={NONE:0,BINARY:1};_.CMapCompressionType=Tt;const Mt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};_.OPS=Mt;const Lt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};_.PasswordResponses=Lt;let Ft=Rt.WARNINGS;function Ht(Nn){Number.isInteger(Nn)&&(Ft=Nn)}function Kt(){return Ft}function Wt(Nn){Ft>=Rt.INFOS&&console.log(`Info: ${Nn}`)}function Jt(Nn){Ft>=Rt.WARNINGS&&console.log(`Warning: ${Nn}`)}function Ot(Nn){throw new Error(Nn)}function kt(Nn,bn){Nn||Ot(bn)}function Gt(Nn){switch(Nn==null?void 0:Nn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function zt(Nn,bn=null,Rn=null){if(!Nn)return null;try{if(Rn&&typeof Nn=="string"){if(Rn.addDefaultProtocol&&Nn.startsWith("www.")){const or=Nn.match(/\./g);(or==null?void 0:or.length)>=2&&(Nn=`http://${Nn}`)}if(Rn.tryConvertEncoding)try{Nn=cn(Nn)}catch{}}const Sn=bn?new URL(Nn,bn):new URL(Nn);if(Gt(Sn))return Sn}catch{}return null}function Vt(Nn,bn,Rn,Sn=!1){return Object.defineProperty(Nn,bn,{value:Rn,enumerable:!Sn,configurable:!0,writable:!1}),Rn}const Dt=function(){function bn(Rn,Sn){this.constructor===bn&&Ot("Cannot initialize BaseException."),this.message=Rn,this.name=Sn}return bn.prototype=new Error,bn.constructor=bn,bn}();_.BaseException=Dt;class It extends Dt{constructor(bn,Rn){super(bn,"PasswordException"),this.code=Rn}}_.PasswordException=It;class Ut extends Dt{constructor(bn,Rn){super(bn,"UnknownErrorException"),this.details=Rn}}_.UnknownErrorException=Ut;class Yt extends Dt{constructor(bn){super(bn,"InvalidPDFException")}}_.InvalidPDFException=Yt;class qt extends Dt{constructor(bn){super(bn,"MissingPDFException")}}_.MissingPDFException=qt;class rn extends Dt{constructor(bn,Rn){super(bn,"UnexpectedResponseException"),this.status=Rn}}_.UnexpectedResponseException=rn;class gn extends Dt{constructor(bn){super(bn,"FormatError")}}_.FormatError=gn;class An extends Dt{constructor(bn){super(bn,"AbortException")}}_.AbortException=An;function En(Nn){(typeof Nn!="object"||(Nn==null?void 0:Nn.length)===void 0)&&Ot("Invalid argument for bytesToString");const bn=Nn.length,Rn=8192;if(bn<Rn)return String.fromCharCode.apply(null,Nn);const Sn=[];for(let or=0;or<bn;or+=Rn){const xn=Math.min(or+Rn,bn),on=Nn.subarray(or,xn);Sn.push(String.fromCharCode.apply(null,on))}return Sn.join("")}function fn(Nn){typeof Nn!="string"&&Ot("Invalid argument for stringToBytes");const bn=Nn.length,Rn=new Uint8Array(bn);for(let Sn=0;Sn<bn;++Sn)Rn[Sn]=Nn.charCodeAt(Sn)&255;return Rn}function nn(Nn){return String.fromCharCode(Nn>>24&255,Nn>>16&255,Nn>>8&255,Nn&255)}function Tn(Nn){return Object.keys(Nn).length}function Cn(Nn){const bn=Object.create(null);for(const[Rn,Sn]of Nn)bn[Rn]=Sn;return bn}function vn(){const Nn=new Uint8Array(4);return Nn[0]=1,new Uint32Array(Nn.buffer,0,1)[0]===1}function _n(){try{return new Function(""),!0}catch{return!1}}class Qt{static get isLittleEndian(){return Vt(this,"isLittleEndian",vn())}static get isEvalSupported(){return Vt(this,"isEvalSupported",_n())}static get isOffscreenCanvasSupported(){return Vt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Vt(this,"platform",{isWin:!1,isMac:!1}):Vt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var bn,Rn;return Vt(this,"isCSSRoundSupported",(Rn=(bn=globalThis.CSS)==null?void 0:bn.supports)==null?void 0:Rn.call(bn,"width: round(1.5px, 1px)"))}}_.FeatureTest=Qt;const sn=[...Array(256).keys()].map(Nn=>Nn.toString(16).padStart(2,"0"));class jt{static makeHexColor(bn,Rn,Sn){return`#${sn[bn]}${sn[Rn]}${sn[Sn]}`}static scaleMinMax(bn,Rn){let Sn;bn[0]?(bn[0]<0&&(Sn=Rn[0],Rn[0]=Rn[1],Rn[1]=Sn),Rn[0]*=bn[0],Rn[1]*=bn[0],bn[3]<0&&(Sn=Rn[2],Rn[2]=Rn[3],Rn[3]=Sn),Rn[2]*=bn[3],Rn[3]*=bn[3]):(Sn=Rn[0],Rn[0]=Rn[2],Rn[2]=Sn,Sn=Rn[1],Rn[1]=Rn[3],Rn[3]=Sn,bn[1]<0&&(Sn=Rn[2],Rn[2]=Rn[3],Rn[3]=Sn),Rn[2]*=bn[1],Rn[3]*=bn[1],bn[2]<0&&(Sn=Rn[0],Rn[0]=Rn[1],Rn[1]=Sn),Rn[0]*=bn[2],Rn[1]*=bn[2]),Rn[0]+=bn[4],Rn[1]+=bn[4],Rn[2]+=bn[5],Rn[3]+=bn[5]}static transform(bn,Rn){return[bn[0]*Rn[0]+bn[2]*Rn[1],bn[1]*Rn[0]+bn[3]*Rn[1],bn[0]*Rn[2]+bn[2]*Rn[3],bn[1]*Rn[2]+bn[3]*Rn[3],bn[0]*Rn[4]+bn[2]*Rn[5]+bn[4],bn[1]*Rn[4]+bn[3]*Rn[5]+bn[5]]}static applyTransform(bn,Rn){const Sn=bn[0]*Rn[0]+bn[1]*Rn[2]+Rn[4],or=bn[0]*Rn[1]+bn[1]*Rn[3]+Rn[5];return[Sn,or]}static applyInverseTransform(bn,Rn){const Sn=Rn[0]*Rn[3]-Rn[1]*Rn[2],or=(bn[0]*Rn[3]-bn[1]*Rn[2]+Rn[2]*Rn[5]-Rn[4]*Rn[3])/Sn,xn=(-bn[0]*Rn[1]+bn[1]*Rn[0]+Rn[4]*Rn[1]-Rn[5]*Rn[0])/Sn;return[or,xn]}static getAxialAlignedBoundingBox(bn,Rn){const Sn=this.applyTransform(bn,Rn),or=this.applyTransform(bn.slice(2,4),Rn),xn=this.applyTransform([bn[0],bn[3]],Rn),on=this.applyTransform([bn[2],bn[1]],Rn);return[Math.min(Sn[0],or[0],xn[0],on[0]),Math.min(Sn[1],or[1],xn[1],on[1]),Math.max(Sn[0],or[0],xn[0],on[0]),Math.max(Sn[1],or[1],xn[1],on[1])]}static inverseTransform(bn){const Rn=bn[0]*bn[3]-bn[1]*bn[2];return[bn[3]/Rn,-bn[1]/Rn,-bn[2]/Rn,bn[0]/Rn,(bn[2]*bn[5]-bn[4]*bn[3])/Rn,(bn[4]*bn[1]-bn[5]*bn[0])/Rn]}static singularValueDecompose2dScale(bn){const Rn=[bn[0],bn[2],bn[1],bn[3]],Sn=bn[0]*Rn[0]+bn[1]*Rn[2],or=bn[0]*Rn[1]+bn[1]*Rn[3],xn=bn[2]*Rn[0]+bn[3]*Rn[2],on=bn[2]*Rn[1]+bn[3]*Rn[3],Gn=(Sn+on)/2,Xn=Math.sqrt((Sn+on)**2-4*(Sn*on-xn*or))/2,pr=Gn+Xn||1,Ar=Gn-Xn||1;return[Math.sqrt(pr),Math.sqrt(Ar)]}static normalizeRect(bn){const Rn=bn.slice(0);return bn[0]>bn[2]&&(Rn[0]=bn[2],Rn[2]=bn[0]),bn[1]>bn[3]&&(Rn[1]=bn[3],Rn[3]=bn[1]),Rn}static intersect(bn,Rn){const Sn=Math.max(Math.min(bn[0],bn[2]),Math.min(Rn[0],Rn[2])),or=Math.min(Math.max(bn[0],bn[2]),Math.max(Rn[0],Rn[2]));if(Sn>or)return null;const xn=Math.max(Math.min(bn[1],bn[3]),Math.min(Rn[1],Rn[3])),on=Math.min(Math.max(bn[1],bn[3]),Math.max(Rn[1],Rn[3]));return xn>on?null:[Sn,xn,or,on]}static bezierBoundingBox(bn,Rn,Sn,or,xn,on,Gn,Xn){const pr=[],Ar=[[],[]];let xr,un,pn,Fn,Yn,Qn,ur,vr;for(let Lr=0;Lr<2;++Lr){if(Lr===0?(un=6*bn-12*Sn+6*xn,xr=-3*bn+9*Sn-9*xn+3*Gn,pn=3*Sn-3*bn):(un=6*Rn-12*or+6*on,xr=-3*Rn+9*or-9*on+3*Xn,pn=3*or-3*Rn),Math.abs(xr)<1e-12){if(Math.abs(un)<1e-12)continue;Fn=-pn/un,0<Fn&&Fn<1&&pr.push(Fn);continue}ur=un*un-4*pn*xr,vr=Math.sqrt(ur),!(ur<0)&&(Yn=(-un+vr)/(2*xr),0<Yn&&Yn<1&&pr.push(Yn),Qn=(-un-vr)/(2*xr),0<Qn&&Qn<1&&pr.push(Qn))}let Or=pr.length,Fr;const br=Or;for(;Or--;)Fn=pr[Or],Fr=1-Fn,Ar[0][Or]=Fr*Fr*Fr*bn+3*Fr*Fr*Fn*Sn+3*Fr*Fn*Fn*xn+Fn*Fn*Fn*Gn,Ar[1][Or]=Fr*Fr*Fr*Rn+3*Fr*Fr*Fn*or+3*Fr*Fn*Fn*on+Fn*Fn*Fn*Xn;return Ar[0][br]=bn,Ar[1][br]=Rn,Ar[0][br+1]=Gn,Ar[1][br+1]=Xn,Ar[0].length=Ar[1].length=br+2,[Math.min(...Ar[0]),Math.min(...Ar[1]),Math.max(...Ar[0]),Math.max(...Ar[1])]}}_.Util=jt;const Bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function hn(Nn){if(Nn[0]>="ï"){let Rn;if(Nn[0]==="þ"&&Nn[1]==="ÿ"?Rn="utf-16be":Nn[0]==="ÿ"&&Nn[1]==="þ"?Rn="utf-16le":Nn[0]==="ï"&&Nn[1]==="»"&&Nn[2]==="¿"&&(Rn="utf-8"),Rn)try{const Sn=new TextDecoder(Rn,{fatal:!0}),or=fn(Nn);return Sn.decode(or)}catch(Sn){Jt(`stringToPDFString: "${Sn}".`)}}const bn=[];for(let Rn=0,Sn=Nn.length;Rn<Sn;Rn++){const or=Bt[Nn.charCodeAt(Rn)];bn.push(or?String.fromCharCode(or):Nn.charAt(Rn))}return bn.join("")}function cn(Nn){return decodeURIComponent(escape(Nn))}function mn(Nn){return unescape(encodeURIComponent(Nn))}function an(Nn){return typeof Nn=="object"&&(Nn==null?void 0:Nn.byteLength)!==void 0}function Hn(Nn,bn){if(Nn.length!==bn.length)return!1;for(let Rn=0,Sn=Nn.length;Rn<Sn;Rn++)if(Nn[Rn]!==bn[Rn])return!1;return!0}function Pn(Nn=new Date){return[Nn.getUTCFullYear().toString(),(Nn.getUTCMonth()+1).toString().padStart(2,"0"),Nn.getUTCDate().toString().padStart(2,"0"),Nn.getUTCHours().toString().padStart(2,"0"),Nn.getUTCMinutes().toString().padStart(2,"0"),Nn.getUTCSeconds().toString().padStart(2,"0")].join("")}class er{constructor(){nr(this,lr,!1);this.promise=new Promise((bn,Rn)=>{this.resolve=Sn=>{rr(this,lr,!0),bn(Sn)},this.reject=Sn=>{rr(this,lr,!0),Rn(Sn)}})}get settled(){return $t(this,lr)}}lr=new WeakMap,_.PromiseCapability=er;let cr=null,ir=null;function Jn(Nn){return cr||(cr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ir=new Map([["ﬅ","ſt"]])),Nn.replaceAll(cr,(bn,Rn,Sn)=>Rn?Rn.normalize("NFKC"):ir.get(Sn))}function fr(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Nn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Nn);else for(let bn=0;bn<32;bn++)Nn[bn]=Math.floor(Math.random()*255);return En(Nn)}const dr="pdfjs_internal_id_";_.AnnotationPrefix=dr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _e,tt,nt,rt,bu,Sp,ot,at,lt,ct,ut,dt,ht,mt,yt,Ep,pt,_t,pm,St,At;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Et){if(typeof Et=="string"||Et instanceof URL?Et={url:Et}:(0,_util.isArrayBuffer)(Et)&&(Et={data:Et}),typeof Et!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Et.url&&!Et.data&&!Et.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const wt=new PDFDocumentLoadingTask,{docId:Rt}=wt,Tt=Et.url?getUrlProp(Et.url):null,Mt=Et.data?getDataProp(Et.data):null,Lt=Et.httpHeaders||null,Ft=Et.withCredentials===!0,Ht=Et.password??null,Kt=Et.range instanceof PDFDataRangeTransport?Et.range:null,Wt=Number.isInteger(Et.rangeChunkSize)&&Et.rangeChunkSize>0?Et.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Jt=Et.worker instanceof PDFWorker?Et.worker:null;const Ot=Et.verbosity,kt=typeof Et.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Et.docBaseUrl)?Et.docBaseUrl:null,Gt=typeof Et.cMapUrl=="string"?Et.cMapUrl:null,zt=Et.cMapPacked!==!1,Vt=Et.CMapReaderFactory||DefaultCMapReaderFactory,Dt=typeof Et.standardFontDataUrl=="string"?Et.standardFontDataUrl:null,It=Et.StandardFontDataFactory||DefaultStandardFontDataFactory,Ut=Et.stopAtErrors!==!0,Yt=Number.isInteger(Et.maxImageSize)&&Et.maxImageSize>-1?Et.maxImageSize:-1,qt=Et.isEvalSupported!==!1,rn=typeof Et.isOffscreenCanvasSupported=="boolean"?Et.isOffscreenCanvasSupported:!_util.isNodeJS,gn=Number.isInteger(Et.canvasMaxAreaInBytes)?Et.canvasMaxAreaInBytes:-1,An=typeof Et.disableFontFace=="boolean"?Et.disableFontFace:_util.isNodeJS,En=Et.fontExtraProperties===!0,fn=Et.enableXfa===!0,nn=Et.ownerDocument||globalThis.document,Tn=Et.disableRange===!0,Cn=Et.disableStream===!0,vn=Et.disableAutoFetch===!0,_n=Et.pdfBug===!0,Qt=Kt?Kt.length:Et.length??NaN,sn=typeof Et.useSystemFonts=="boolean"?Et.useSystemFonts:!_util.isNodeJS&&!An,jt=typeof Et.useWorkerFetch=="boolean"?Et.useWorkerFetch:Vt===_display_utils.DOMCMapReaderFactory&&It===_display_utils.DOMStandardFontDataFactory&&Gt&&Dt&&(0,_display_utils.isValidFetchUrl)(Gt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Dt,document.baseURI),Bt=Et.canvasFactory||new DefaultCanvasFactory({ownerDocument:nn}),hn=Et.filterFactory||new DefaultFilterFactory({docId:Rt,ownerDocument:nn}),cn=null;(0,_util.setVerbosityLevel)(Ot);const mn={canvasFactory:Bt,filterFactory:hn};if(jt||(mn.cMapReaderFactory=new Vt({baseUrl:Gt,isCompressed:zt}),mn.standardFontDataFactory=new It({baseUrl:Dt})),!Jt){const Pn={verbosity:Ot,port:_worker_options.GlobalWorkerOptions.workerPort};Jt=Pn.port?PDFWorker.fromPort(Pn):new PDFWorker(Pn),wt._worker=Jt}const an={docId:Rt,apiVersion:"3.11.174",data:Mt,password:Ht,disableAutoFetch:vn,rangeChunkSize:Wt,length:Qt,docBaseUrl:kt,enableXfa:fn,evaluatorOptions:{maxImageSize:Yt,disableFontFace:An,ignoreErrors:Ut,isEvalSupported:qt,isOffscreenCanvasSupported:rn,canvasMaxAreaInBytes:gn,fontExtraProperties:En,useSystemFonts:sn,cMapUrl:jt?Gt:null,standardFontDataUrl:jt?Dt:null}},Hn={ignoreErrors:Ut,isEvalSupported:qt,disableFontFace:An,fontExtraProperties:En,enableXfa:fn,ownerDocument:nn,disableAutoFetch:vn,pdfBug:_n,styleElement:cn};return Jt.promise.then(function(){if(wt.destroyed)throw new Error("Loading aborted");const Pn=_fetchDocument(Jt,an),er=new Promise(function(cr){let ir;Kt?ir=new _transport_stream.PDFDataTransportStream({length:Qt,initialData:Kt.initialData,progressiveDone:Kt.progressiveDone,contentDispositionFilename:Kt.contentDispositionFilename,disableRange:Tn,disableStream:Cn},Kt):Mt||(ir=(fr=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(fr):(0,_display_utils.isValidFetchUrl)(fr.url)?new _displayFetch_stream.PDFFetchStream(fr):new _displayNetwork.PDFNetworkStream(fr))({url:Tt,length:Qt,httpHeaders:Lt,withCredentials:Ft,rangeChunkSize:Wt,disableRange:Tn,disableStream:Cn})),cr(ir)});return Promise.all([Pn,er]).then(function([cr,ir]){if(wt.destroyed)throw new Error("Loading aborted");const Jn=new _message_handler.MessageHandler(Rt,cr,Jt.port),fr=new WorkerTransport(Jn,wt,ir,Hn,mn);wt._transport=fr,Jn.send("Ready",null)})}).catch(wt._capability.reject),wt}async function _fetchDocument(Et,wt){if(Et.destroyed)throw new Error("Worker was destroyed");const Rt=await Et.messageHandler.sendWithPromise("GetDocRequest",wt,wt.data?[wt.data.buffer]:null);if(Et.destroyed)throw new Error("Worker was destroyed");return Rt}function getUrlProp(Et){if(Et instanceof URL)return Et.href;try{return new URL(Et,window.location).href}catch{if(_util.isNodeJS&&typeof Et=="string")return Et}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Et){if(_util.isNodeJS&&typeof Buffer<"u"&&Et instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Et instanceof Uint8Array&&Et.byteLength===Et.buffer.byteLength)return Et;if(typeof Et=="string")return(0,_util.stringToBytes)(Et);if(typeof Et=="object"&&!isNaN(Et==null?void 0:Et.length)||(0,_util.isArrayBuffer)(Et))return new Uint8Array(Et);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const _=class _{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Gu(_,_e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var wt,Rt,Tt;this.destroyed=!0;try{(wt=this._worker)!=null&&wt.port&&(this._worker._pendingDestroy=!0),await((Rt=this._transport)==null?void 0:Rt.destroy())}catch(Mt){throw(Tt=this._worker)!=null&&Tt.port&&delete this._worker._pendingDestroy,Mt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_e=new WeakMap,nr(_,_e,0);let PDFDocumentLoadingTask=_;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(wt,Rt,Tt=!1,Mt=null){this.length=wt,this.initialData=Rt,this.progressiveDone=Tt,this.contentDispositionFilename=Mt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(wt){this._rangeListeners.push(wt)}addProgressListener(wt){this._progressListeners.push(wt)}addProgressiveReadListener(wt){this._progressiveReadListeners.push(wt)}addProgressiveDoneListener(wt){this._progressiveDoneListeners.push(wt)}onDataRange(wt,Rt){for(const Tt of this._rangeListeners)Tt(wt,Rt)}onDataProgress(wt,Rt){this._readyCapability.promise.then(()=>{for(const Tt of this._progressListeners)Tt(wt,Rt)})}onDataProgressiveRead(wt){this._readyCapability.promise.then(()=>{for(const Rt of this._progressiveReadListeners)Rt(wt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const wt of this._progressiveDoneListeners)wt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(wt,Rt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(wt,Rt){this._pdfInfo=wt,this._transport=Rt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Tt=>{if(!Tt)return Tt;const Mt=[];for(const Lt in Tt)Mt.push(...Tt[Lt]);return Mt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(wt){return this._transport.getPage(wt)}getPageIndex(wt){return this._transport.getPageIndex(wt)}getDestinations(){return this._transport.getDestinations()}getDestination(wt){return this._transport.getDestination(wt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(wt=!1){return this._transport.startCleanup(wt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(wt,Rt,Tt,Mt=!1){nr(this,rt);nr(this,tt,null);nr(this,nt,!1);this._pageIndex=wt,this._pageInfo=Rt,this._transport=Tt,this._stats=Mt?new _display_utils.StatTimer:null,this._pdfBug=Mt,this.commonObjs=Tt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:wt,rotation:Rt=this.rotate,offsetX:Tt=0,offsetY:Mt=0,dontFlip:Lt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:wt,rotation:Rt,offsetX:Tt,offsetY:Mt,dontFlip:Lt})}getAnnotations({intent:wt="display"}={}){const Rt=this._transport.getRenderingIntent(wt);return this._transport.getAnnotations(this._pageIndex,Rt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var wt;return((wt=this._transport._htmlForXfa)==null?void 0:wt.children[this._pageIndex])||null}render({canvasContext:wt,viewport:Rt,intent:Tt="display",annotationMode:Mt=_util.AnnotationMode.ENABLE,transform:Lt=null,background:Ft=null,optionalContentConfigPromise:Ht=null,annotationCanvasMap:Kt=null,pageColors:Wt=null,printAnnotationStorage:Jt=null}){var It,Ut;(It=this._stats)==null||It.time("Overall");const Ot=this._transport.getRenderingIntent(Tt,Mt,Jt);rr(this,nt,!1),zn(this,rt,Sp).call(this),Ht||(Ht=this._transport.getOptionalContentConfig());let kt=this._intentStates.get(Ot.cacheKey);kt||(kt=Object.create(null),this._intentStates.set(Ot.cacheKey,kt)),kt.streamReaderCancelTimeout&&(clearTimeout(kt.streamReaderCancelTimeout),kt.streamReaderCancelTimeout=null);const Gt=!!(Ot.renderingIntent&_util.RenderingIntentFlag.PRINT);kt.displayReadyCapability||(kt.displayReadyCapability=new _util.PromiseCapability,kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ut=this._stats)==null||Ut.time("Page Request"),this._pumpOperatorList(Ot));const zt=Yt=>{var qt,rn;kt.renderTasks.delete(Vt),(this._maybeCleanupAfterRender||Gt)&&rr(this,nt,!0),zn(this,rt,bu).call(this,!Gt),Yt?(Vt.capability.reject(Yt),this._abortOperatorList({intentState:kt,reason:Yt instanceof Error?Yt:new Error(Yt)})):Vt.capability.resolve(),(qt=this._stats)==null||qt.timeEnd("Rendering"),(rn=this._stats)==null||rn.timeEnd("Overall")},Vt=new InternalRenderTask({callback:zt,params:{canvasContext:wt,viewport:Rt,transform:Lt,background:Ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Kt,operatorList:kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Gt,pdfBug:this._pdfBug,pageColors:Wt});(kt.renderTasks||(kt.renderTasks=new Set)).add(Vt);const Dt=Vt.task;return Promise.all([kt.displayReadyCapability.promise,Ht]).then(([Yt,qt])=>{var rn;if(this.destroyed){zt();return}(rn=this._stats)==null||rn.time("Rendering"),Vt.initializeGraphics({transparency:Yt,optionalContentConfig:qt}),Vt.operatorListChanged()}).catch(zt),Dt}getOperatorList({intent:wt="display",annotationMode:Rt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Tt=null}={}){var Kt;function Mt(){Ft.operatorList.lastChunk&&(Ft.opListReadCapability.resolve(Ft.operatorList),Ft.renderTasks.delete(Ht))}const Lt=this._transport.getRenderingIntent(wt,Rt,Tt,!0);let Ft=this._intentStates.get(Lt.cacheKey);Ft||(Ft=Object.create(null),this._intentStates.set(Lt.cacheKey,Ft));let Ht;return Ft.opListReadCapability||(Ht=Object.create(null),Ht.operatorListChanged=Mt,Ft.opListReadCapability=new _util.PromiseCapability,(Ft.renderTasks||(Ft.renderTasks=new Set)).add(Ht),Ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Kt=this._stats)==null||Kt.time("Page Request"),this._pumpOperatorList(Lt)),Ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:wt=!1,disableNormalization:Rt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:wt===!0,disableNormalization:Rt===!0},{highWaterMark:100,size(Mt){return Mt.items.length}})}getTextContent(wt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Tt=>_xfa_text.XfaText.textContent(Tt));const Rt=this.streamTextContent(wt);return new Promise(function(Tt,Mt){function Lt(){Ft.read().then(function({value:Kt,done:Wt}){if(Wt){Tt(Ht);return}Object.assign(Ht.styles,Kt.styles),Ht.items.push(...Kt.items),Lt()},Mt)}const Ft=Rt.getReader(),Ht={items:[],styles:Object.create(null)};Lt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const wt=[];for(const Rt of this._intentStates.values())if(this._abortOperatorList({intentState:Rt,reason:new Error("Page was destroyed."),force:!0}),!Rt.opListReadCapability)for(const Tt of Rt.renderTasks)wt.push(Tt.completed),Tt.cancel();return this.objs.clear(),rr(this,nt,!1),zn(this,rt,Sp).call(this),Promise.all(wt)}cleanup(wt=!1){rr(this,nt,!0);const Rt=zn(this,rt,bu).call(this,!1);return wt&&Rt&&this._stats&&(this._stats=new _display_utils.StatTimer),Rt}_startRenderPage(wt,Rt){var Mt,Lt;const Tt=this._intentStates.get(Rt);Tt&&((Mt=this._stats)==null||Mt.timeEnd("Page Request"),(Lt=Tt.displayReadyCapability)==null||Lt.resolve(wt))}_renderPageChunk(wt,Rt){for(let Tt=0,Mt=wt.length;Tt<Mt;Tt++)Rt.operatorList.fnArray.push(wt.fnArray[Tt]),Rt.operatorList.argsArray.push(wt.argsArray[Tt]);Rt.operatorList.lastChunk=wt.lastChunk,Rt.operatorList.separateAnnots=wt.separateAnnots;for(const Tt of Rt.renderTasks)Tt.operatorListChanged();wt.lastChunk&&zn(this,rt,bu).call(this,!0)}_pumpOperatorList({renderingIntent:wt,cacheKey:Rt,annotationStorageSerializable:Tt}){const{map:Mt,transfers:Lt}=Tt,Ht=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:wt,cacheKey:Rt,annotationStorage:Mt},Lt).getReader(),Kt=this._intentStates.get(Rt);Kt.streamReader=Ht;const Wt=()=>{Ht.read().then(({value:Jt,done:Ot})=>{if(Ot){Kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Jt,Kt),Wt())},Jt=>{if(Kt.streamReader=null,!this._transport.destroyed){if(Kt.operatorList){Kt.operatorList.lastChunk=!0;for(const Ot of Kt.renderTasks)Ot.operatorListChanged();zn(this,rt,bu).call(this,!0)}if(Kt.displayReadyCapability)Kt.displayReadyCapability.reject(Jt);else if(Kt.opListReadCapability)Kt.opListReadCapability.reject(Jt);else throw Jt}})};Wt()}_abortOperatorList({intentState:wt,reason:Rt,force:Tt=!1}){if(wt.streamReader){if(wt.streamReaderCancelTimeout&&(clearTimeout(wt.streamReaderCancelTimeout),wt.streamReaderCancelTimeout=null),!Tt){if(wt.renderTasks.size>0)return;if(Rt instanceof _display_utils.RenderingCancelledException){let Mt=RENDERING_CANCELLED_TIMEOUT;Rt.extraDelay>0&&Rt.extraDelay<1e3&&(Mt+=Rt.extraDelay),wt.streamReaderCancelTimeout=setTimeout(()=>{wt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:wt,reason:Rt,force:!0})},Mt);return}}if(wt.streamReader.cancel(new _util.AbortException(Rt.message)).catch(()=>{}),wt.streamReader=null,!this._transport.destroyed){for(const[Mt,Lt]of this._intentStates)if(Lt===wt){this._intentStates.delete(Mt);break}this.cleanup()}}}get stats(){return this._stats}}tt=new WeakMap,nt=new WeakMap,rt=new WeakSet,bu=function(wt=!1){if(zn(this,rt,Sp).call(this),!$t(this,nt)||this.destroyed)return!1;if(wt)return rr(this,tt,setTimeout(()=>{rr(this,tt,null),zn(this,rt,bu).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Rt,operatorList:Tt}of this._intentStates.values())if(Rt.size>0||!Tt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rr(this,nt,!1),!0},Sp=function(){$t(this,tt)&&(clearTimeout($t(this,tt)),rr(this,tt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){nr(this,ot,new Set);nr(this,at,Promise.resolve())}postMessage(wt,Rt){const Tt={data:structuredClone(wt,Rt?{transfer:Rt}:null)};$t(this,at).then(()=>{for(const Mt of $t(this,ot))Mt.call(this,Tt)})}addEventListener(wt,Rt){$t(this,ot).add(Rt)}removeEventListener(wt,Rt){$t(this,ot).delete(Rt)}terminate(){$t(this,ot).clear()}}ot=new WeakMap,at=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Et=(lt=document==null?void 0:document.currentScript)==null?void 0:lt.src;Et&&(PDFWorkerUtil.fallbackWorkerSrc=Et.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Et,wt){let Rt;try{if(Rt=new URL(Et),!Rt.origin||Rt.origin==="null")return!1}catch{return!1}const Tt=new URL(wt,Rt);return Rt.origin===Tt.origin},PDFWorkerUtil.createCDNWrapper=function(Et){const wt=`importScripts("${Et}");`;return URL.createObjectURL(new Blob([wt]))}}const _PDFWorker=class _PDFWorker{constructor({name:Et=null,port:wt=null,verbosity:Rt=(0,_util.getVerbosityLevel)()}={}){var Tt;if(this.name=Et,this.destroyed=!1,this.verbosity=Rt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,wt){if((Tt=$t(_PDFWorker,ct))!=null&&Tt.has(wt))throw new Error("Cannot use more than one PDFWorker per port.");($t(_PDFWorker,ct)||rr(_PDFWorker,ct,new WeakMap)).set(wt,this),this._initializeFromPort(wt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Et){this._port=Et,this._messageHandler=new _message_handler.MessageHandler("main","worker",Et),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Et}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Et)||(Et=PDFWorkerUtil.createCDNWrapper(new URL(Et,window.location).href));const wt=new Worker(Et),Rt=new _message_handler.MessageHandler("main","worker",wt),Tt=()=>{wt.removeEventListener("error",Mt),Rt.destroy(),wt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Mt=()=>{this._webWorker||Tt()};wt.addEventListener("error",Mt),Rt.on("test",Ft=>{if(wt.removeEventListener("error",Mt),this.destroyed){Tt();return}Ft?(this._messageHandler=Rt,this._port=wt,this._webWorker=wt,this._readyCapability.resolve(),Rt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Rt.destroy(),wt.terminate())}),Rt.on("ready",Ft=>{if(wt.removeEventListener("error",Mt),this.destroyed){Tt();return}try{Lt()}catch{this._setupFakeWorker()}});const Lt=()=>{const Ft=new Uint8Array;Rt.send("test",Ft,[Ft.buffer])};Lt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Et=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const wt=new LoopbackPort;this._port=wt;const Rt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Tt=new _message_handler.MessageHandler(Rt+"_worker",Rt,wt);Et.setup(Tt,wt);const Mt=new _message_handler.MessageHandler(Rt,Rt+"_worker",wt);this._messageHandler=Mt,this._readyCapability.resolve(),Mt.send("configure",{verbosity:this.verbosity})}).catch(Et=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Et.message}".`))})}destroy(){var Et;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Et=$t(_PDFWorker,ct))==null||Et.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Et){var Rt;if(!(Et!=null&&Et.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const wt=(Rt=$t(this,ct))==null?void 0:Rt.get(Et.port);if(wt){if(wt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return wt}return new _PDFWorker(Et)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Et;try{return((Et=globalThis.pdfjsWorker)==null?void 0:Et.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};ct=new WeakMap,nr(_PDFWorker,ct);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(wt,Rt,Tt,Mt,Lt){nr(this,yt);nr(this,ut,new Map);nr(this,dt,new Map);nr(this,ht,new Map);nr(this,mt,null);this.messageHandler=wt,this.loadingTask=Rt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Mt.ownerDocument,styleElement:Mt.styleElement}),this._params=Mt,this.canvasFactory=Lt.canvasFactory,this.filterFactory=Lt.filterFactory,this.cMapReaderFactory=Lt.cMapReaderFactory,this.standardFontDataFactory=Lt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Tt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(wt,Rt=_util.AnnotationMode.ENABLE,Tt=null,Mt=!1){let Lt=_util.RenderingIntentFlag.DISPLAY,Ft=_annotation_storage.SerializableEmpty;switch(wt){case"any":Lt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Lt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${wt}`)}switch(Rt){case _util.AnnotationMode.DISABLE:Lt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Lt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Lt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Ft=(Lt&_util.RenderingIntentFlag.PRINT&&Tt instanceof _annotation_storage.PrintAnnotationStorage?Tt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Rt}`)}return Mt&&(Lt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Lt,cacheKey:`${Lt}_${Ft.hash}`,annotationStorageSerializable:Ft}}destroy(){var Tt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Tt=$t(this,mt))==null||Tt.reject(new Error("Worker was destroyed during onPassword callback"));const wt=[];for(const Mt of $t(this,dt).values())wt.push(Mt._destroy());$t(this,dt).clear(),$t(this,ht).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Rt=this.messageHandler.sendWithPromise("Terminate",null);return wt.push(Rt),Promise.all(wt).then(()=>{var Mt;this.commonObjs.clear(),this.fontLoader.clear(),$t(this,ut).clear(),this.filterFactory.destroy(),(Mt=this._networkStream)==null||Mt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:wt,loadingTask:Rt}=this;wt.on("GetReader",(Tt,Mt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Lt=>{this._lastProgress={loaded:Lt.loaded,total:Lt.total}},Mt.onPull=()=>{this._fullReader.read().then(function({value:Lt,done:Ft}){if(Ft){Mt.close();return}(0,_util.assert)(Lt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Mt.enqueue(new Uint8Array(Lt),1,[Lt])}).catch(Lt=>{Mt.error(Lt)})},Mt.onCancel=Lt=>{this._fullReader.cancel(Lt),Mt.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}}),wt.on("ReaderHeadersReady",Tt=>{const Mt=new _util.PromiseCapability,Lt=this._fullReader;return Lt.headersReady.then(()=>{var Ft;(!Lt.isStreamingSupported||!Lt.isRangeSupported)&&(this._lastProgress&&((Ft=Rt.onProgress)==null||Ft.call(Rt,this._lastProgress)),Lt.onProgress=Ht=>{var Kt;(Kt=Rt.onProgress)==null||Kt.call(Rt,{loaded:Ht.loaded,total:Ht.total})}),Mt.resolve({isStreamingSupported:Lt.isStreamingSupported,isRangeSupported:Lt.isRangeSupported,contentLength:Lt.contentLength})},Mt.reject),Mt.promise}),wt.on("GetRangeReader",(Tt,Mt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Lt=this._networkStream.getRangeReader(Tt.begin,Tt.end);if(!Lt){Mt.close();return}Mt.onPull=()=>{Lt.read().then(function({value:Ft,done:Ht}){if(Ht){Mt.close();return}(0,_util.assert)(Ft instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Mt.enqueue(new Uint8Array(Ft),1,[Ft])}).catch(Ft=>{Mt.error(Ft)})},Mt.onCancel=Ft=>{Lt.cancel(Ft),Mt.ready.catch(Ht=>{if(!this.destroyed)throw Ht})}}),wt.on("GetDoc",({pdfInfo:Tt})=>{this._numPages=Tt.numPages,this._htmlForXfa=Tt.htmlForXfa,delete Tt.htmlForXfa,Rt._capability.resolve(new PDFDocumentProxy(Tt,this))}),wt.on("DocException",function(Tt){let Mt;switch(Tt.name){case"PasswordException":Mt=new _util.PasswordException(Tt.message,Tt.code);break;case"InvalidPDFException":Mt=new _util.InvalidPDFException(Tt.message);break;case"MissingPDFException":Mt=new _util.MissingPDFException(Tt.message);break;case"UnexpectedResponseException":Mt=new _util.UnexpectedResponseException(Tt.message,Tt.status);break;case"UnknownErrorException":Mt=new _util.UnknownErrorException(Tt.message,Tt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Rt._capability.reject(Mt)}),wt.on("PasswordRequest",Tt=>{if(rr(this,mt,new _util.PromiseCapability),Rt.onPassword){const Mt=Lt=>{Lt instanceof Error?$t(this,mt).reject(Lt):$t(this,mt).resolve({password:Lt})};try{Rt.onPassword(Mt,Tt.code)}catch(Lt){$t(this,mt).reject(Lt)}}else $t(this,mt).reject(new _util.PasswordException(Tt.message,Tt.code));return $t(this,mt).promise}),wt.on("DataLoaded",Tt=>{var Mt;(Mt=Rt.onProgress)==null||Mt.call(Rt,{loaded:Tt.length,total:Tt.length}),this.downloadInfoCapability.resolve(Tt)}),wt.on("StartRenderPage",Tt=>{if(this.destroyed)return;$t(this,dt).get(Tt.pageIndex)._startRenderPage(Tt.transparency,Tt.cacheKey)}),wt.on("commonobj",([Tt,Mt,Lt])=>{var Ft;if(!this.destroyed&&!this.commonObjs.has(Tt))switch(Mt){case"Font":const Ht=this._params;if("error"in Lt){const Jt=Lt.error;(0,_util.warn)(`Error during font loading: ${Jt}`),this.commonObjs.resolve(Tt,Jt);break}const Kt=Ht.pdfBug&&((Ft=globalThis.FontInspector)!=null&&Ft.enabled)?(Jt,Ot)=>globalThis.FontInspector.fontAdded(Jt,Ot):null,Wt=new _font_loader.FontFaceObject(Lt,{isEvalSupported:Ht.isEvalSupported,disableFontFace:Ht.disableFontFace,ignoreErrors:Ht.ignoreErrors,inspectFont:Kt});this.fontLoader.bind(Wt).catch(Jt=>wt.sendWithPromise("FontFallback",{id:Tt})).finally(()=>{!Ht.fontExtraProperties&&Wt.data&&(Wt.data=null),this.commonObjs.resolve(Tt,Wt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Tt,Lt);break;default:throw new Error(`Got unknown common object type ${Mt}`)}}),wt.on("obj",([Tt,Mt,Lt,Ft])=>{var Kt;if(this.destroyed)return;const Ht=$t(this,dt).get(Mt);if(!Ht.objs.has(Tt))switch(Lt){case"Image":if(Ht.objs.resolve(Tt,Ft),Ft){let Wt;if(Ft.bitmap){const{width:Jt,height:Ot}=Ft;Wt=Jt*Ot*4}else Wt=((Kt=Ft.data)==null?void 0:Kt.length)||0;Wt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Ht._maybeCleanupAfterRender=!0)}break;case"Pattern":Ht.objs.resolve(Tt,Ft);break;default:throw new Error(`Got unknown object type ${Lt}`)}}),wt.on("DocProgress",Tt=>{var Mt;this.destroyed||(Mt=Rt.onProgress)==null||Mt.call(Rt,{loaded:Tt.loaded,total:Tt.total})}),wt.on("FetchBuiltInCMap",Tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Tt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),wt.on("FetchStandardFontData",Tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Tt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Tt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:wt,transfers:Rt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:wt,filename:((Tt=this._fullReader)==null?void 0:Tt.filename)??null},Rt).finally(()=>{this.annotationStorage.resetModified()})}getPage(wt){if(!Number.isInteger(wt)||wt<=0||wt>this._numPages)return Promise.reject(new Error("Invalid page request."));const Rt=wt-1,Tt=$t(this,ht).get(Rt);if(Tt)return Tt;const Mt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Rt}).then(Lt=>{if(this.destroyed)throw new Error("Transport destroyed");const Ft=new PDFPageProxy(Rt,Lt,this,this._params.pdfBug);return $t(this,dt).set(Rt,Ft),Ft});return $t(this,ht).set(Rt,Mt),Mt}getPageIndex(wt){return typeof wt!="object"||wt===null||!Number.isInteger(wt.num)||wt.num<0||!Number.isInteger(wt.gen)||wt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:wt.num,gen:wt.gen})}getAnnotations(wt,Rt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:wt,intent:Rt})}getFieldObjects(){return zn(this,yt,Ep).call(this,"GetFieldObjects")}hasJSActions(){return zn(this,yt,Ep).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(wt){return typeof wt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:wt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return zn(this,yt,Ep).call(this,"GetDocJSActions")}getPageJSActions(wt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:wt})}getStructTree(wt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:wt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(wt=>new _optional_content_config.OptionalContentConfig(wt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const wt="GetMetadata",Rt=$t(this,ut).get(wt);if(Rt)return Rt;const Tt=this.messageHandler.sendWithPromise(wt,null).then(Mt=>{var Lt,Ft;return{info:Mt[0],metadata:Mt[1]?new _metadata.Metadata(Mt[1]):null,contentDispositionFilename:((Lt=this._fullReader)==null?void 0:Lt.filename)??null,contentLength:((Ft=this._fullReader)==null?void 0:Ft.contentLength)??null}});return $t(this,ut).set(wt,Tt),Tt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(wt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Rt of $t(this,dt).values())if(!Rt.cleanup())throw new Error(`startCleanup: Page ${Rt.pageNumber} is currently rendering.`);this.commonObjs.clear(),wt||this.fontLoader.clear(),$t(this,ut).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:wt,enableXfa:Rt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:wt,enableXfa:Rt})}}ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakSet,Ep=function(wt,Rt=null){const Tt=$t(this,ut).get(wt);if(Tt)return Tt;const Mt=this.messageHandler.sendWithPromise(wt,Rt);return $t(this,ut).set(wt,Mt),Mt};class PDFObjects{constructor(){nr(this,_t);nr(this,pt,Object.create(null))}get(wt,Rt=null){if(Rt){const Mt=zn(this,_t,pm).call(this,wt);return Mt.capability.promise.then(()=>Rt(Mt.data)),null}const Tt=$t(this,pt)[wt];if(!(Tt!=null&&Tt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${wt}.`);return Tt.data}has(wt){const Rt=$t(this,pt)[wt];return(Rt==null?void 0:Rt.capability.settled)||!1}resolve(wt,Rt=null){const Tt=zn(this,_t,pm).call(this,wt);Tt.data=Rt,Tt.capability.resolve()}clear(){var wt;for(const Rt in $t(this,pt)){const{data:Tt}=$t(this,pt)[Rt];(wt=Tt==null?void 0:Tt.bitmap)==null||wt.close()}rr(this,pt,Object.create(null))}}pt=new WeakMap,_t=new WeakSet,pm=function(wt){var Rt;return(Rt=$t(this,pt))[wt]||(Rt[wt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(wt){nr(this,St,null);rr(this,St,wt),this.onContinue=null}get promise(){return $t(this,St).capability.promise}cancel(wt=0){$t(this,St).cancel(null,wt)}get separateAnnots(){const{separateAnnots:wt}=$t(this,St).operatorList;if(!wt)return!1;const{annotationCanvasMap:Rt}=$t(this,St);return wt.form||wt.canvas&&(Rt==null?void 0:Rt.size)>0}}St=new WeakMap,exports.RenderTask=RenderTask;const bt=class bt{constructor({callback:wt,params:Rt,objs:Tt,commonObjs:Mt,annotationCanvasMap:Lt,operatorList:Ft,pageIndex:Ht,canvasFactory:Kt,filterFactory:Wt,useRequestAnimationFrame:Jt=!1,pdfBug:Ot=!1,pageColors:kt=null}){this.callback=wt,this.params=Rt,this.objs=Tt,this.commonObjs=Mt,this.annotationCanvasMap=Lt,this.operatorListIdx=null,this.operatorList=Ft,this._pageIndex=Ht,this.canvasFactory=Kt,this.filterFactory=Wt,this._pdfBug=Ot,this.pageColors=kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Jt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Rt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:wt=!1,optionalContentConfig:Rt}){var Ht,Kt;if(this.cancelled)return;if(this._canvas){if($t(bt,At).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");$t(bt,At).add(this._canvas)}this._pdfBug&&((Ht=globalThis.StepperManager)!=null&&Ht.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Tt,viewport:Mt,transform:Lt,background:Ft}=this.params;this.gfx=new _canvas.CanvasGraphics(Tt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Rt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Lt,viewport:Mt,transparency:wt,background:Ft}),this.operatorListIdx=0,this.graphicsReady=!0,(Kt=this.graphicsReadyCallback)==null||Kt.call(this)}cancel(wt=null,Rt=0){var Tt;this.running=!1,this.cancelled=!0,(Tt=this.gfx)==null||Tt.endDrawing(),$t(bt,At).delete(this._canvas),this.callback(wt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Rt))}operatorListChanged(){var wt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(wt=this.stepper)==null||wt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),$t(bt,At).delete(this._canvas),this.callback())))}};At=new WeakMap,nr(bt,At,new WeakSet);let InternalRenderTask=bt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(_e,_,tt)=>{var lt,ct,ut,e0,ht;Object.defineProperty(_,"__esModule",{value:!0}),_.SerializableEmpty=_.PrintAnnotationStorage=_.AnnotationStorage=void 0;var nt=tt(1),rt=tt(4),it=tt(8);const st=Object.freeze({map:null,hash:"",transfers:void 0});_.SerializableEmpty=st;class ot{constructor(){nr(this,ut);nr(this,lt,!1);nr(this,ct,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(yt,vt){const pt=$t(this,ct).get(yt);return pt===void 0?vt:Object.assign(vt,pt)}getRawValue(yt){return $t(this,ct).get(yt)}remove(yt){if($t(this,ct).delete(yt),$t(this,ct).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const vt of $t(this,ct).values())if(vt instanceof rt.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(yt,vt){const pt=$t(this,ct).get(yt);let _t=!1;if(pt!==void 0)for(const[xt,St]of Object.entries(vt))pt[xt]!==St&&(_t=!0,pt[xt]=St);else _t=!0,$t(this,ct).set(yt,vt);_t&&zn(this,ut,e0).call(this),vt instanceof rt.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(vt.constructor._type)}has(yt){return $t(this,ct).has(yt)}getAll(){return $t(this,ct).size>0?(0,nt.objectFromMap)($t(this,ct)):null}setAll(yt){for(const[vt,pt]of Object.entries(yt))this.setValue(vt,pt)}get size(){return $t(this,ct).size}resetModified(){$t(this,lt)&&(rr(this,lt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new at(this)}get serializable(){if($t(this,ct).size===0)return st;const yt=new Map,vt=new it.MurmurHash3_64,pt=[],_t=Object.create(null);let xt=!1;for(const[St,At]of $t(this,ct)){const bt=At instanceof rt.AnnotationEditor?At.serialize(!1,_t):At;bt&&(yt.set(St,bt),vt.update(`${St}:${JSON.stringify(bt)}`),xt||(xt=!!bt.bitmap))}if(xt)for(const St of yt.values())St.bitmap&&pt.push(St.bitmap);return yt.size>0?{map:yt,hash:vt.hexdigest(),transfers:pt}:st}}lt=new WeakMap,ct=new WeakMap,ut=new WeakSet,e0=function(){$t(this,lt)||(rr(this,lt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},_.AnnotationStorage=ot;class at extends ot{constructor(vt){super();nr(this,ht);const{map:pt,hash:_t,transfers:xt}=vt.serializable,St=structuredClone(pt,xt?{transfer:xt}:null);rr(this,ht,{map:St,hash:_t,transfers:xt})}get print(){(0,nt.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return $t(this,ht)}}ht=new WeakMap,_.PrintAnnotationStorage=at},(_e,_,tt)=>{var at,lt,ct,ut,dt,ht,mt,yt,vt,pt,_t,xt,St,At,bt,mm,gm,Rt,vm,ym,t0,n0,r0,_m,i0;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditor=void 0;var nt=tt(5),rt=tt(1),it=tt(6);const Jt=class Jt{constructor(kt){nr(this,bt);nr(this,at,"");nr(this,lt,!1);nr(this,ct,null);nr(this,ut,null);nr(this,dt,null);nr(this,ht,!1);nr(this,mt,null);nr(this,yt,this.focusin.bind(this));nr(this,vt,this.focusout.bind(this));nr(this,pt,!1);nr(this,_t,!1);nr(this,xt,!1);to(this,"_initialOptions",Object.create(null));to(this,"_uiManager",null);to(this,"_focusEventsAllowed",!0);to(this,"_l10nPromise",null);nr(this,St,!1);nr(this,At,Jt._zIndex++);this.constructor===Jt&&(0,rt.unreachable)("Cannot initialize AnnotationEditor."),this.parent=kt.parent,this.id=kt.id,this.width=this.height=null,this.pageIndex=kt.parent.pageIndex,this.name=kt.name,this.div=null,this._uiManager=kt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=kt.isCentered,this._structTreeParentId=null;const{rotation:Gt,rawDims:{pageWidth:zt,pageHeight:Vt,pageX:Dt,pageY:It}}=this.parent.viewport;this.rotation=Gt,this.pageRotation=(360+Gt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[zt,Vt],this.pageTranslation=[Dt,It];const[Ut,Yt]=this.parentDimensions;this.x=kt.x/Ut,this.y=kt.y/Yt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,rt.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(kt){const Gt=new ot({id:kt.parent.getNextId(),parent:kt.parent,uiManager:kt._uiManager});Gt.annotationElementId=kt.annotationElementId,Gt.deleted=!0,Gt._uiManager.addToAnnotationStorage(Gt)}static initialize(kt,Gt=null){if(Jt._l10nPromise||(Jt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Vt=>[Vt,kt.get(Vt)]))),Gt!=null&&Gt.strings)for(const Vt of Gt.strings)Jt._l10nPromise.set(Vt,kt.get(Vt));if(Jt._borderLineWidth!==-1)return;const zt=getComputedStyle(document.documentElement);Jt._borderLineWidth=parseFloat(zt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(kt,Gt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(kt){return!1}static paste(kt,Gt){(0,rt.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return $t(this,St)}set _isDraggable(kt){var Gt;rr(this,St,kt),(Gt=this.div)==null||Gt.classList.toggle("draggable",kt)}center(){const[kt,Gt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Gt/(kt*2),this.y+=this.width*kt/(Gt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Gt/(kt*2),this.y-=this.width*kt/(Gt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(kt){this._uiManager.addCommands(kt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=$t(this,At)}setParent(kt){kt!==null&&(this.pageIndex=kt.pageIndex,this.pageDimensions=kt.pageDimensions),this.parent=kt}focusin(kt){this._focusEventsAllowed&&($t(this,pt)?rr(this,pt,!1):this.parent.setSelected(this))}focusout(kt){var zt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Gt=kt.relatedTarget;Gt!=null&&Gt.closest(`#${this.id}`)||(kt.preventDefault(),(zt=this.parent)!=null&&zt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(kt,Gt,zt,Vt){const[Dt,It]=this.parentDimensions;[zt,Vt]=this.screenToPageTranslation(zt,Vt),this.x=(kt+zt)/Dt,this.y=(Gt+Vt)/It,this.fixAndSetPosition()}translate(kt,Gt){zn(this,bt,mm).call(this,this.parentDimensions,kt,Gt)}translateInPage(kt,Gt){zn(this,bt,mm).call(this,this.pageDimensions,kt,Gt),this.div.scrollIntoView({block:"nearest"})}drag(kt,Gt){const[zt,Vt]=this.parentDimensions;if(this.x+=kt/zt,this.y+=Gt/Vt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:qt,y:rn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,qt,rn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Dt,y:It}=this;const[Ut,Yt]=zn(this,bt,gm).call(this);Dt+=Ut,It+=Yt,this.div.style.left=`${(100*Dt).toFixed(2)}%`,this.div.style.top=`${(100*It).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[kt,Gt]=this.pageDimensions;let{x:zt,y:Vt,width:Dt,height:It}=this;switch(Dt*=kt,It*=Gt,zt*=kt,Vt*=Gt,this.rotation){case 0:zt=Math.max(0,Math.min(kt-Dt,zt)),Vt=Math.max(0,Math.min(Gt-It,Vt));break;case 90:zt=Math.max(0,Math.min(kt-It,zt)),Vt=Math.min(Gt,Math.max(Dt,Vt));break;case 180:zt=Math.min(kt,Math.max(Dt,zt)),Vt=Math.min(Gt,Math.max(It,Vt));break;case 270:zt=Math.min(kt,Math.max(It,zt)),Vt=Math.max(0,Math.min(Gt-Dt,Vt));break}this.x=zt/=kt,this.y=Vt/=Gt;const[Ut,Yt]=zn(this,bt,gm).call(this);zt+=Ut,Vt+=Yt;const{style:qt}=this.div;qt.left=`${(100*zt).toFixed(2)}%`,qt.top=`${(100*Vt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(kt,Gt){var zt;return zn(zt=Jt,Rt,vm).call(zt,kt,Gt,this.parentRotation)}pageTranslationToScreen(kt,Gt){var zt;return zn(zt=Jt,Rt,vm).call(zt,kt,Gt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:kt,pageDimensions:[Gt,zt]}=this,Vt=Gt*kt,Dt=zt*kt;return rt.FeatureTest.isCSSRoundSupported?[Math.round(Vt),Math.round(Dt)]:[Vt,Dt]}setDims(kt,Gt){var Dt;const[zt,Vt]=this.parentDimensions;this.div.style.width=`${(100*kt/zt).toFixed(2)}%`,$t(this,ht)||(this.div.style.height=`${(100*Gt/Vt).toFixed(2)}%`),(Dt=$t(this,ct))==null||Dt.classList.toggle("small",kt<Jt.SMALL_EDITOR_SIZE||Gt<Jt.SMALL_EDITOR_SIZE)}fixDims(){const{style:kt}=this.div,{height:Gt,width:zt}=kt,Vt=zt.endsWith("%"),Dt=!$t(this,ht)&&Gt.endsWith("%");if(Vt&&Dt)return;const[It,Ut]=this.parentDimensions;Vt||(kt.width=`${(100*parseFloat(zt)/It).toFixed(2)}%`),!$t(this,ht)&&!Dt&&(kt.height=`${(100*parseFloat(Gt)/Ut).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if($t(this,ct))return;const kt=rr(this,ct,document.createElement("button"));kt.className="altText";const Gt=await Jt._l10nPromise.get("editor_alt_text_button_label");kt.textContent=Gt,kt.setAttribute("aria-label",Gt),kt.tabIndex="0",kt.addEventListener("contextmenu",it.noContextMenu),kt.addEventListener("pointerdown",zt=>zt.stopPropagation()),kt.addEventListener("click",zt=>{zt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),kt.addEventListener("keydown",zt=>{zt.target===kt&&zt.key==="Enter"&&(zt.preventDefault(),this._uiManager.editAltText(this))}),zn(this,bt,_m).call(this),this.div.append(kt),Jt.SMALL_EDITOR_SIZE||(Jt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(kt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:$t(this,at),decorative:$t(this,lt)}}set altTextData({altText:kt,decorative:Gt}){$t(this,at)===kt&&$t(this,lt)===Gt||(rr(this,at,kt),rr(this,lt,Gt),zn(this,bt,_m).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",$t(this,yt)),this.div.addEventListener("focusout",$t(this,vt));const[kt,Gt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Gt/kt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*kt/Gt).toFixed(2)}%`);const[zt,Vt]=this.getInitialTranslation();return this.translate(zt,Vt),(0,nt.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(kt){const{isMac:Gt}=rt.FeatureTest.platform;if(kt.button!==0||kt.ctrlKey&&Gt){kt.preventDefault();return}rr(this,pt,!0),zn(this,bt,i0).call(this,kt)}moveInDOM(){var kt;(kt=this.parent)==null||kt.moveEditorInDOM(this)}_setParentAndPosition(kt,Gt,zt){kt.changeParent(this),this.x=Gt,this.y=zt,this.fixAndSetPosition()}getRect(kt,Gt){const zt=this.parentScale,[Vt,Dt]=this.pageDimensions,[It,Ut]=this.pageTranslation,Yt=kt/zt,qt=Gt/zt,rn=this.x*Vt,gn=this.y*Dt,An=this.width*Vt,En=this.height*Dt;switch(this.rotation){case 0:return[rn+Yt+It,Dt-gn-qt-En+Ut,rn+Yt+An+It,Dt-gn-qt+Ut];case 90:return[rn+qt+It,Dt-gn+Yt+Ut,rn+qt+En+It,Dt-gn+Yt+An+Ut];case 180:return[rn-Yt-An+It,Dt-gn+qt+Ut,rn-Yt+It,Dt-gn+qt+En+Ut];case 270:return[rn-qt-En+It,Dt-gn-Yt-An+Ut,rn-qt+It,Dt-gn-Yt+Ut];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(kt,Gt){const[zt,Vt,Dt,It]=kt,Ut=Dt-zt,Yt=It-Vt;switch(this.rotation){case 0:return[zt,Gt-It,Ut,Yt];case 90:return[zt,Gt-Vt,Yt,Ut];case 180:return[Dt,Gt-Vt,Ut,Yt];case 270:return[Dt,Gt-It,Yt,Ut];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rr(this,xt,!0)}disableEditMode(){rr(this,xt,!1)}isInEditMode(){return $t(this,xt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var kt,Gt;(kt=this.div)==null||kt.addEventListener("focusin",$t(this,yt)),(Gt=this.div)==null||Gt.addEventListener("focusout",$t(this,vt))}serialize(kt=!1,Gt=null){(0,rt.unreachable)("An editor must be serializable")}static deserialize(kt,Gt,zt){const Vt=new this.prototype.constructor({parent:Gt,id:Gt.getNextId(),uiManager:zt});Vt.rotation=kt.rotation;const[Dt,It]=Vt.pageDimensions,[Ut,Yt,qt,rn]=Vt.getRectInCurrentCoords(kt.rect,It);return Vt.x=Ut/Dt,Vt.y=Yt/It,Vt.width=qt/Dt,Vt.height=rn/It,Vt}remove(){var kt;this.div.removeEventListener("focusin",$t(this,yt)),this.div.removeEventListener("focusout",$t(this,vt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(kt=$t(this,ct))==null||kt.remove(),rr(this,ct,null),rr(this,ut,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(zn(this,bt,t0).call(this),$t(this,mt).classList.remove("hidden"))}select(){var kt;this.makeResizable(),(kt=this.div)==null||kt.classList.add("selectedEditor")}unselect(){var kt,Gt,zt;(kt=$t(this,mt))==null||kt.classList.add("hidden"),(Gt=this.div)==null||Gt.classList.remove("selectedEditor"),(zt=this.div)!=null&&zt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(kt,Gt){}disableEditing(){$t(this,ct)&&($t(this,ct).hidden=!0)}enableEditing(){$t(this,ct)&&($t(this,ct).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return $t(this,_t)}set isEditing(kt){rr(this,_t,kt),this.parent&&(kt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(kt,Gt){rr(this,ht,!0);const zt=kt/Gt,{style:Vt}=this.div;Vt.aspectRatio=zt,Vt.height="auto"}static get MIN_SIZE(){return 16}};at=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakMap,_t=new WeakMap,xt=new WeakMap,St=new WeakMap,At=new WeakMap,bt=new WeakSet,mm=function([kt,Gt],zt,Vt){[zt,Vt]=this.screenToPageTranslation(zt,Vt),this.x+=zt/kt,this.y+=Vt/Gt,this.fixAndSetPosition()},gm=function(){const[kt,Gt]=this.parentDimensions,{_borderLineWidth:zt}=Jt,Vt=zt/kt,Dt=zt/Gt;switch(this.rotation){case 90:return[-Vt,Dt];case 180:return[Vt,Dt];case 270:return[Vt,-Dt];default:return[-Vt,-Dt]}},Rt=new WeakSet,vm=function(kt,Gt,zt){switch(zt){case 90:return[Gt,-kt];case 180:return[-kt,-Gt];case 270:return[-Gt,kt];default:return[kt,Gt]}},ym=function(kt){switch(kt){case 90:{const[Gt,zt]=this.pageDimensions;return[0,-Gt/zt,zt/Gt,0]}case 180:return[-1,0,0,-1];case 270:{const[Gt,zt]=this.pageDimensions;return[0,Gt/zt,-zt/Gt,0]}default:return[1,0,0,1]}},t0=function(){if($t(this,mt))return;rr(this,mt,document.createElement("div")),$t(this,mt).classList.add("resizers");const kt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||kt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Gt of kt){const zt=document.createElement("div");$t(this,mt).append(zt),zt.classList.add("resizer",Gt),zt.addEventListener("pointerdown",zn(this,bt,n0).bind(this,Gt)),zt.addEventListener("contextmenu",it.noContextMenu)}this.div.prepend($t(this,mt))},n0=function(kt,Gt){Gt.preventDefault();const{isMac:zt}=rt.FeatureTest.platform;if(Gt.button!==0||Gt.ctrlKey&&zt)return;const Vt=zn(this,bt,r0).bind(this,kt),Dt=this._isDraggable;this._isDraggable=!1;const It={passive:!0,capture:!0};window.addEventListener("pointermove",Vt,It);const Ut=this.x,Yt=this.y,qt=this.width,rn=this.height,gn=this.parent.div.style.cursor,An=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Gt.target).cursor;const En=()=>{this._isDraggable=Dt,window.removeEventListener("pointerup",En),window.removeEventListener("blur",En),window.removeEventListener("pointermove",Vt,It),this.parent.div.style.cursor=gn,this.div.style.cursor=An;const fn=this.x,nn=this.y,Tn=this.width,Cn=this.height;fn===Ut&&nn===Yt&&Tn===qt&&Cn===rn||this.addCommands({cmd:()=>{this.width=Tn,this.height=Cn,this.x=fn,this.y=nn;const[vn,_n]=this.parentDimensions;this.setDims(vn*Tn,_n*Cn),this.fixAndSetPosition()},undo:()=>{this.width=qt,this.height=rn,this.x=Ut,this.y=Yt;const[vn,_n]=this.parentDimensions;this.setDims(vn*qt,_n*rn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",En),window.addEventListener("blur",En)},r0=function(kt,Gt){const[zt,Vt]=this.parentDimensions,Dt=this.x,It=this.y,Ut=this.width,Yt=this.height,qt=Jt.MIN_SIZE/zt,rn=Jt.MIN_SIZE/Vt,gn=Jn=>Math.round(Jn*1e4)/1e4,An=zn(this,bt,ym).call(this,this.rotation),En=(Jn,fr)=>[An[0]*Jn+An[2]*fr,An[1]*Jn+An[3]*fr],fn=zn(this,bt,ym).call(this,360-this.rotation),nn=(Jn,fr)=>[fn[0]*Jn+fn[2]*fr,fn[1]*Jn+fn[3]*fr];let Tn,Cn,vn=!1,_n=!1;switch(kt){case"topLeft":vn=!0,Tn=(Jn,fr)=>[0,0],Cn=(Jn,fr)=>[Jn,fr];break;case"topMiddle":Tn=(Jn,fr)=>[Jn/2,0],Cn=(Jn,fr)=>[Jn/2,fr];break;case"topRight":vn=!0,Tn=(Jn,fr)=>[Jn,0],Cn=(Jn,fr)=>[0,fr];break;case"middleRight":_n=!0,Tn=(Jn,fr)=>[Jn,fr/2],Cn=(Jn,fr)=>[0,fr/2];break;case"bottomRight":vn=!0,Tn=(Jn,fr)=>[Jn,fr],Cn=(Jn,fr)=>[0,0];break;case"bottomMiddle":Tn=(Jn,fr)=>[Jn/2,fr],Cn=(Jn,fr)=>[Jn/2,0];break;case"bottomLeft":vn=!0,Tn=(Jn,fr)=>[0,fr],Cn=(Jn,fr)=>[Jn,0];break;case"middleLeft":_n=!0,Tn=(Jn,fr)=>[0,fr/2],Cn=(Jn,fr)=>[Jn,fr/2];break}const Qt=Tn(Ut,Yt),sn=Cn(Ut,Yt);let jt=En(...sn);const Bt=gn(Dt+jt[0]),hn=gn(It+jt[1]);let cn=1,mn=1,[an,Hn]=this.screenToPageTranslation(Gt.movementX,Gt.movementY);if([an,Hn]=nn(an/zt,Hn/Vt),vn){const Jn=Math.hypot(Ut,Yt);cn=mn=Math.max(Math.min(Math.hypot(sn[0]-Qt[0]-an,sn[1]-Qt[1]-Hn)/Jn,1/Ut,1/Yt),qt/Ut,rn/Yt)}else _n?cn=Math.max(qt,Math.min(1,Math.abs(sn[0]-Qt[0]-an)))/Ut:mn=Math.max(rn,Math.min(1,Math.abs(sn[1]-Qt[1]-Hn)))/Yt;const Pn=gn(Ut*cn),er=gn(Yt*mn);jt=En(...Cn(Pn,er));const cr=Bt-jt[0],ir=hn-jt[1];this.width=Pn,this.height=er,this.x=cr,this.y=ir,this.setDims(zt*Pn,Vt*er),this.fixAndSetPosition()},_m=async function(){var zt;const kt=$t(this,ct);if(!kt)return;if(!$t(this,at)&&!$t(this,lt)){kt.classList.remove("done"),(zt=$t(this,ut))==null||zt.remove();return}Jt._l10nPromise.get("editor_alt_text_edit_button_label").then(Vt=>{kt.setAttribute("aria-label",Vt)});let Gt=$t(this,ut);if(!Gt){rr(this,ut,Gt=document.createElement("span")),Gt.className="tooltip",Gt.setAttribute("role","tooltip");const Vt=Gt.id=`alt-text-tooltip-${this.id}`;kt.setAttribute("aria-describedby",Vt);const Dt=100;kt.addEventListener("mouseenter",()=>{rr(this,dt,setTimeout(()=>{rr(this,dt,null),$t(this,ut).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Dt))}),kt.addEventListener("mouseleave",()=>{var It;clearTimeout($t(this,dt)),rr(this,dt,null),(It=$t(this,ut))==null||It.classList.remove("show")})}kt.classList.add("done"),Gt.innerText=$t(this,lt)?await Jt._l10nPromise.get("editor_alt_text_decorative_tooltip"):$t(this,at),Gt.parentNode||kt.append(Gt)},i0=function(kt){if(!this._isDraggable)return;const Gt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let zt,Vt;Gt&&(zt={passive:!0,capture:!0},Vt=It=>{const[Ut,Yt]=this.screenToPageTranslation(It.movementX,It.movementY);this._uiManager.dragSelectedEditors(Ut,Yt)},window.addEventListener("pointermove",Vt,zt));const Dt=()=>{if(window.removeEventListener("pointerup",Dt),window.removeEventListener("blur",Dt),Gt&&window.removeEventListener("pointermove",Vt,zt),rr(this,pt,!1),!this._uiManager.endDragSession()){const{isMac:It}=rt.FeatureTest.platform;kt.ctrlKey&&!It||kt.shiftKey||kt.metaKey&&It?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Dt),window.addEventListener("blur",Dt)},nr(Jt,Rt),to(Jt,"_borderLineWidth",-1),to(Jt,"_colorManager",new nt.ColorManager),to(Jt,"_zIndex",1),to(Jt,"SMALL_EDITOR_SIZE",0);let st=Jt;_.AnnotationEditor=st;class ot extends st{constructor(kt){super(kt),this.annotationElementId=kt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(_e,_,tt)=>{var ht,mt,yt,vt,pt,xm,St,At,bt,Et,wt,s0,Mt,Lt,Ft,Ht,Kt,Wt,Jt,Ot,kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn,gn,An,En,fn,nn,Tn,Cn,vn,_n,Qt,sn,jt,Bt,hn,cn,mn,an,o0,Sm,Em,Ap,Am,bm,ba,$u,a0,l0,wm,Vu,Cm;Object.defineProperty(_,"__esModule",{value:!0}),_.KeyboardManager=_.CommandManager=_.ColorManager=_.AnnotationEditorUIManager=void 0,_.bindEvents=it,_.opacityToHex=st;var nt=tt(1),rt=tt(6);function it(xn,on,Gn){for(const Xn of Gn)on.addEventListener(Xn,xn[Xn].bind(xn))}function st(xn){return Math.round(Math.min(255,Math.max(1,255*xn))).toString(16).padStart(2,"0")}class ot{constructor(){nr(this,ht,0)}getId(){return`${nt.AnnotationEditorPrefix}${Gu(this,ht)._++}`}}ht=new WeakMap;const xt=class xt{constructor(){nr(this,pt);nr(this,mt,(0,nt.getUuid)());nr(this,yt,0);nr(this,vt,null)}static get _isSVGFittingCanvas(){const on='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Xn=new OffscreenCanvas(1,3).getContext("2d"),pr=new Image;pr.src=on;const Ar=pr.decode().then(()=>(Xn.drawImage(pr,0,0,1,1,0,0,1,3),new Uint32Array(Xn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,nt.shadow)(this,"_isSVGFittingCanvas",Ar)}async getFromFile(on){const{lastModified:Gn,name:Xn,size:pr,type:Ar}=on;return zn(this,pt,xm).call(this,`${Gn}_${Xn}_${pr}_${Ar}`,on)}async getFromUrl(on){return zn(this,pt,xm).call(this,on,on)}async getFromId(on){$t(this,vt)||rr(this,vt,new Map);const Gn=$t(this,vt).get(on);return Gn?Gn.bitmap?(Gn.refCounter+=1,Gn):Gn.file?this.getFromFile(Gn.file):this.getFromUrl(Gn.url):null}getSvgUrl(on){const Gn=$t(this,vt).get(on);return Gn!=null&&Gn.isSvg?Gn.svgUrl:null}deleteId(on){$t(this,vt)||rr(this,vt,new Map);const Gn=$t(this,vt).get(on);Gn&&(Gn.refCounter-=1,Gn.refCounter===0&&(Gn.bitmap=null))}isValidId(on){return on.startsWith(`image_${$t(this,mt)}_`)}};mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakSet,xm=async function(on,Gn){$t(this,vt)||rr(this,vt,new Map);let Xn=$t(this,vt).get(on);if(Xn===null)return null;if(Xn!=null&&Xn.bitmap)return Xn.refCounter+=1,Xn;try{Xn||(Xn={bitmap:null,id:`image_${$t(this,mt)}_${Gu(this,yt)._++}`,refCounter:0,isSvg:!1});let pr;if(typeof Gn=="string"){Xn.url=Gn;const Ar=await fetch(Gn);if(!Ar.ok)throw new Error(Ar.statusText);pr=await Ar.blob()}else pr=Xn.file=Gn;if(pr.type==="image/svg+xml"){const Ar=xt._isSVGFittingCanvas,xr=new FileReader,un=new Image,pn=new Promise((Fn,Yn)=>{un.onload=()=>{Xn.bitmap=un,Xn.isSvg=!0,Fn()},xr.onload=async()=>{const Qn=Xn.svgUrl=xr.result;un.src=await Ar?`${Qn}#svgView(preserveAspectRatio(none))`:Qn},un.onerror=xr.onerror=Yn});xr.readAsDataURL(pr),await pn}else Xn.bitmap=await createImageBitmap(pr);Xn.refCounter=1}catch(pr){console.error(pr),Xn=null}return $t(this,vt).set(on,Xn),Xn&&$t(this,vt).set(Xn.id,Xn),Xn};let at=xt;class lt{constructor(on=128){nr(this,St,[]);nr(this,At,!1);nr(this,bt);nr(this,Et,-1);rr(this,bt,on)}add({cmd:on,undo:Gn,mustExec:Xn,type:pr=NaN,overwriteIfSameType:Ar=!1,keepUndo:xr=!1}){if(Xn&&on(),$t(this,At))return;const un={cmd:on,undo:Gn,type:pr};if($t(this,Et)===-1){$t(this,St).length>0&&($t(this,St).length=0),rr(this,Et,0),$t(this,St).push(un);return}if(Ar&&$t(this,St)[$t(this,Et)].type===pr){xr&&(un.undo=$t(this,St)[$t(this,Et)].undo),$t(this,St)[$t(this,Et)]=un;return}const pn=$t(this,Et)+1;pn===$t(this,bt)?$t(this,St).splice(0,1):(rr(this,Et,pn),pn<$t(this,St).length&&$t(this,St).splice(pn)),$t(this,St).push(un)}undo(){$t(this,Et)!==-1&&(rr(this,At,!0),$t(this,St)[$t(this,Et)].undo(),rr(this,At,!1),rr(this,Et,$t(this,Et)-1))}redo(){$t(this,Et)<$t(this,St).length-1&&(rr(this,Et,$t(this,Et)+1),rr(this,At,!0),$t(this,St)[$t(this,Et)].cmd(),rr(this,At,!1))}hasSomethingToUndo(){return $t(this,Et)!==-1}hasSomethingToRedo(){return $t(this,Et)<$t(this,St).length-1}destroy(){rr(this,St,null)}}St=new WeakMap,At=new WeakMap,bt=new WeakMap,Et=new WeakMap,_.CommandManager=lt;class ct{constructor(on){nr(this,wt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Gn}=nt.FeatureTest.platform;for(const[Xn,pr,Ar={}]of on)for(const xr of Xn){const un=xr.startsWith("mac+");Gn&&un?(this.callbacks.set(xr.slice(4),{callback:pr,options:Ar}),this.allKeys.add(xr.split("+").at(-1))):!Gn&&!un&&(this.callbacks.set(xr,{callback:pr,options:Ar}),this.allKeys.add(xr.split("+").at(-1)))}}exec(on,Gn){if(!this.allKeys.has(Gn.key))return;const Xn=this.callbacks.get(zn(this,wt,s0).call(this,Gn));if(!Xn)return;const{callback:pr,options:{bubbles:Ar=!1,args:xr=[],checker:un=null}}=Xn;un&&!un(on,Gn)||(pr.bind(on,...xr)(),Ar||(Gn.stopPropagation(),Gn.preventDefault()))}}wt=new WeakSet,s0=function(on){on.altKey&&this.buffer.push("alt"),on.ctrlKey&&this.buffer.push("ctrl"),on.metaKey&&this.buffer.push("meta"),on.shiftKey&&this.buffer.push("shift"),this.buffer.push(on.key);const Gn=this.buffer.join("+");return this.buffer.length=0,Gn},_.KeyboardManager=ct;const Tt=class Tt{get _colors(){const on=new Map([["CanvasText",null],["Canvas",null]]);return(0,rt.getColorValues)(on),(0,nt.shadow)(this,"_colors",on)}convert(on){const Gn=(0,rt.getRGB)(on);if(!window.matchMedia("(forced-colors: active)").matches)return Gn;for(const[Xn,pr]of this._colors)if(pr.every((Ar,xr)=>Ar===Gn[xr]))return Tt._colorsMapping.get(Xn);return Gn}getHexCode(on){const Gn=this._colors.get(on);return Gn?nt.Util.makeHexColor(...Gn):on}};to(Tt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ut=Tt;_.ColorManager=ut;const or=class or{constructor(on,Gn,Xn,pr,Ar,xr){nr(this,an);nr(this,Mt,null);nr(this,Lt,new Map);nr(this,Ft,new Map);nr(this,Ht,null);nr(this,Kt,null);nr(this,Wt,new lt);nr(this,Jt,0);nr(this,Ot,new Set);nr(this,kt,null);nr(this,Gt,null);nr(this,zt,new Set);nr(this,Vt,null);nr(this,Dt,new ot);nr(this,It,!1);nr(this,Ut,!1);nr(this,Yt,null);nr(this,qt,nt.AnnotationEditorType.NONE);nr(this,rn,new Set);nr(this,gn,null);nr(this,An,this.blur.bind(this));nr(this,En,this.focus.bind(this));nr(this,fn,this.copy.bind(this));nr(this,nn,this.cut.bind(this));nr(this,Tn,this.paste.bind(this));nr(this,Cn,this.keydown.bind(this));nr(this,vn,this.onEditingAction.bind(this));nr(this,_n,this.onPageChanging.bind(this));nr(this,Qt,this.onScaleChanging.bind(this));nr(this,sn,this.onRotationChanging.bind(this));nr(this,jt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});nr(this,Bt,[0,0]);nr(this,hn,null);nr(this,cn,null);nr(this,mn,null);rr(this,cn,on),rr(this,mn,Gn),rr(this,Ht,Xn),this._eventBus=pr,this._eventBus._on("editingaction",$t(this,vn)),this._eventBus._on("pagechanging",$t(this,_n)),this._eventBus._on("scalechanging",$t(this,Qt)),this._eventBus._on("rotationchanging",$t(this,sn)),rr(this,Kt,Ar.annotationStorage),rr(this,Vt,Ar.filterFactory),rr(this,gn,xr),this.viewParameters={realScale:rt.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const on=or.prototype,Gn=Ar=>{const{activeElement:xr}=document;return xr&&$t(Ar,cn).contains(xr)&&Ar.hasSomethingToControl()},Xn=this.TRANSLATE_SMALL,pr=this.TRANSLATE_BIG;return(0,nt.shadow)(this,"_keyboardManager",new ct([[["ctrl+a","mac+meta+a"],on.selectAll],[["ctrl+z","mac+meta+z"],on.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],on.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],on.delete],[["Escape","mac+Escape"],on.unselectAll],[["ArrowLeft","mac+ArrowLeft"],on.translateSelectedEditors,{args:[-Xn,0],checker:Gn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],on.translateSelectedEditors,{args:[-pr,0],checker:Gn}],[["ArrowRight","mac+ArrowRight"],on.translateSelectedEditors,{args:[Xn,0],checker:Gn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],on.translateSelectedEditors,{args:[pr,0],checker:Gn}],[["ArrowUp","mac+ArrowUp"],on.translateSelectedEditors,{args:[0,-Xn],checker:Gn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],on.translateSelectedEditors,{args:[0,-pr],checker:Gn}],[["ArrowDown","mac+ArrowDown"],on.translateSelectedEditors,{args:[0,Xn],checker:Gn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],on.translateSelectedEditors,{args:[0,pr],checker:Gn}]]))}destroy(){zn(this,an,Ap).call(this),zn(this,an,Sm).call(this),this._eventBus._off("editingaction",$t(this,vn)),this._eventBus._off("pagechanging",$t(this,_n)),this._eventBus._off("scalechanging",$t(this,Qt)),this._eventBus._off("rotationchanging",$t(this,sn));for(const on of $t(this,Ft).values())on.destroy();$t(this,Ft).clear(),$t(this,Lt).clear(),$t(this,zt).clear(),rr(this,Mt,null),$t(this,rn).clear(),$t(this,Wt).destroy(),$t(this,Ht).destroy()}get hcmFilter(){return(0,nt.shadow)(this,"hcmFilter",$t(this,gn)?$t(this,Vt).addHCMFilter($t(this,gn).foreground,$t(this,gn).background):"none")}get direction(){return(0,nt.shadow)(this,"direction",getComputedStyle($t(this,cn)).direction)}editAltText(on){var Gn;(Gn=$t(this,Ht))==null||Gn.editAltText(this,on)}onPageChanging({pageNumber:on}){rr(this,Jt,on-1)}focusMainContainer(){$t(this,cn).focus()}findParent(on,Gn){for(const Xn of $t(this,Ft).values()){const{x:pr,y:Ar,width:xr,height:un}=Xn.div.getBoundingClientRect();if(on>=pr&&on<=pr+xr&&Gn>=Ar&&Gn<=Ar+un)return Xn}return null}disableUserSelect(on=!1){$t(this,mn).classList.toggle("noUserSelect",on)}addShouldRescale(on){$t(this,zt).add(on)}removeShouldRescale(on){$t(this,zt).delete(on)}onScaleChanging({scale:on}){this.commitOrRemove(),this.viewParameters.realScale=on*rt.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Gn of $t(this,zt))Gn.onScaleChanging()}onRotationChanging({pagesRotation:on}){this.commitOrRemove(),this.viewParameters.rotation=on}addToAnnotationStorage(on){!on.isEmpty()&&$t(this,Kt)&&!$t(this,Kt).has(on.id)&&$t(this,Kt).setValue(on.id,on)}blur(){if(!this.hasSelection)return;const{activeElement:on}=document;for(const Gn of $t(this,rn))if(Gn.div.contains(on)){rr(this,Yt,[Gn,on]),Gn._focusEventsAllowed=!1;break}}focus(){if(!$t(this,Yt))return;const[on,Gn]=$t(this,Yt);rr(this,Yt,null),Gn.addEventListener("focusin",()=>{on._focusEventsAllowed=!0},{once:!0}),Gn.focus()}addEditListeners(){zn(this,an,Em).call(this),zn(this,an,Am).call(this)}removeEditListeners(){zn(this,an,Ap).call(this),zn(this,an,bm).call(this)}copy(on){var Xn;if(on.preventDefault(),(Xn=$t(this,Mt))==null||Xn.commitOrRemove(),!this.hasSelection)return;const Gn=[];for(const pr of $t(this,rn)){const Ar=pr.serialize(!0);Ar&&Gn.push(Ar)}Gn.length!==0&&on.clipboardData.setData("application/pdfjs",JSON.stringify(Gn))}cut(on){this.copy(on),this.delete()}paste(on){on.preventDefault();const{clipboardData:Gn}=on;for(const Ar of Gn.items)for(const xr of $t(this,Gt))if(xr.isHandlingMimeForPasting(Ar.type)){xr.paste(Ar,this.currentLayer);return}let Xn=Gn.getData("application/pdfjs");if(!Xn)return;try{Xn=JSON.parse(Xn)}catch(Ar){(0,nt.warn)(`paste: "${Ar.message}".`);return}if(!Array.isArray(Xn))return;this.unselectAll();const pr=this.currentLayer;try{const Ar=[];for(const pn of Xn){const Fn=pr.deserialize(pn);if(!Fn)return;Ar.push(Fn)}const xr=()=>{for(const pn of Ar)zn(this,an,wm).call(this,pn);zn(this,an,Cm).call(this,Ar)},un=()=>{for(const pn of Ar)pn.remove()};this.addCommands({cmd:xr,undo:un,mustExec:!0})}catch(Ar){(0,nt.warn)(`paste: "${Ar.message}".`)}}keydown(on){var Gn;(Gn=this.getActive())!=null&&Gn.shouldGetKeyboardEvents()||or._keyboardManager.exec(this,on)}onEditingAction(on){["undo","redo","delete","selectAll"].includes(on.name)&&this[on.name]()}setEditingState(on){on?(zn(this,an,o0).call(this),zn(this,an,Em).call(this),zn(this,an,Am).call(this),zn(this,an,ba).call(this,{isEditing:$t(this,qt)!==nt.AnnotationEditorType.NONE,isEmpty:zn(this,an,Vu).call(this),hasSomethingToUndo:$t(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:$t(this,Wt).hasSomethingToRedo(),hasSelectedEditor:!1})):(zn(this,an,Sm).call(this),zn(this,an,Ap).call(this),zn(this,an,bm).call(this),zn(this,an,ba).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(on){if(!$t(this,Gt)){rr(this,Gt,on);for(const Gn of $t(this,Gt))zn(this,an,$u).call(this,Gn.defaultPropertiesToUpdate)}}getId(){return $t(this,Dt).getId()}get currentLayer(){return $t(this,Ft).get($t(this,Jt))}getLayer(on){return $t(this,Ft).get(on)}get currentPageIndex(){return $t(this,Jt)}addLayer(on){$t(this,Ft).set(on.pageIndex,on),$t(this,It)?on.enable():on.disable()}removeLayer(on){$t(this,Ft).delete(on.pageIndex)}updateMode(on,Gn=null){if($t(this,qt)!==on){if(rr(this,qt,on),on===nt.AnnotationEditorType.NONE){this.setEditingState(!1),zn(this,an,l0).call(this);return}this.setEditingState(!0),zn(this,an,a0).call(this),this.unselectAll();for(const Xn of $t(this,Ft).values())Xn.updateMode(on);if(Gn){for(const Xn of $t(this,Lt).values())if(Xn.annotationElementId===Gn){this.setSelected(Xn),Xn.enterInEditMode();break}}}}updateToolbar(on){on!==$t(this,qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:on})}updateParams(on,Gn){if($t(this,Gt)){if(on===nt.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(on);return}for(const Xn of $t(this,rn))Xn.updateParams(on,Gn);for(const Xn of $t(this,Gt))Xn.updateDefaultParams(on,Gn)}}enableWaiting(on=!1){if($t(this,Ut)!==on){rr(this,Ut,on);for(const Gn of $t(this,Ft).values())on?Gn.disableClick():Gn.enableClick(),Gn.div.classList.toggle("waiting",on)}}getEditors(on){const Gn=[];for(const Xn of $t(this,Lt).values())Xn.pageIndex===on&&Gn.push(Xn);return Gn}getEditor(on){return $t(this,Lt).get(on)}addEditor(on){$t(this,Lt).set(on.id,on)}removeEditor(on){var Gn;$t(this,Lt).delete(on.id),this.unselect(on),(!on.annotationElementId||!$t(this,Ot).has(on.annotationElementId))&&((Gn=$t(this,Kt))==null||Gn.remove(on.id))}addDeletedAnnotationElement(on){$t(this,Ot).add(on.annotationElementId),on.deleted=!0}isDeletedAnnotationElement(on){return $t(this,Ot).has(on)}removeDeletedAnnotationElement(on){$t(this,Ot).delete(on.annotationElementId),on.deleted=!1}setActiveEditor(on){$t(this,Mt)!==on&&(rr(this,Mt,on),on&&zn(this,an,$u).call(this,on.propertiesToUpdate))}toggleSelected(on){if($t(this,rn).has(on)){$t(this,rn).delete(on),on.unselect(),zn(this,an,ba).call(this,{hasSelectedEditor:this.hasSelection});return}$t(this,rn).add(on),on.select(),zn(this,an,$u).call(this,on.propertiesToUpdate),zn(this,an,ba).call(this,{hasSelectedEditor:!0})}setSelected(on){for(const Gn of $t(this,rn))Gn!==on&&Gn.unselect();$t(this,rn).clear(),$t(this,rn).add(on),on.select(),zn(this,an,$u).call(this,on.propertiesToUpdate),zn(this,an,ba).call(this,{hasSelectedEditor:!0})}isSelected(on){return $t(this,rn).has(on)}unselect(on){on.unselect(),$t(this,rn).delete(on),zn(this,an,ba).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return $t(this,rn).size!==0}undo(){$t(this,Wt).undo(),zn(this,an,ba).call(this,{hasSomethingToUndo:$t(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:zn(this,an,Vu).call(this)})}redo(){$t(this,Wt).redo(),zn(this,an,ba).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:$t(this,Wt).hasSomethingToRedo(),isEmpty:zn(this,an,Vu).call(this)})}addCommands(on){$t(this,Wt).add(on),zn(this,an,ba).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:zn(this,an,Vu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const on=[...$t(this,rn)],Gn=()=>{for(const pr of on)pr.remove()},Xn=()=>{for(const pr of on)zn(this,an,wm).call(this,pr)};this.addCommands({cmd:Gn,undo:Xn,mustExec:!0})}commitOrRemove(){var on;(on=$t(this,Mt))==null||on.commitOrRemove()}hasSomethingToControl(){return $t(this,Mt)||this.hasSelection}selectAll(){for(const on of $t(this,rn))on.commit();zn(this,an,Cm).call(this,$t(this,Lt).values())}unselectAll(){if($t(this,Mt)){$t(this,Mt).commitOrRemove();return}if(this.hasSelection){for(const on of $t(this,rn))on.unselect();$t(this,rn).clear(),zn(this,an,ba).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(on,Gn,Xn=!1){if(Xn||this.commitOrRemove(),!this.hasSelection)return;$t(this,Bt)[0]+=on,$t(this,Bt)[1]+=Gn;const[pr,Ar]=$t(this,Bt),xr=[...$t(this,rn)],un=1e3;$t(this,hn)&&clearTimeout($t(this,hn)),rr(this,hn,setTimeout(()=>{rr(this,hn,null),$t(this,Bt)[0]=$t(this,Bt)[1]=0,this.addCommands({cmd:()=>{for(const pn of xr)$t(this,Lt).has(pn.id)&&pn.translateInPage(pr,Ar)},undo:()=>{for(const pn of xr)$t(this,Lt).has(pn.id)&&pn.translateInPage(-pr,-Ar)},mustExec:!1})},un));for(const pn of xr)pn.translateInPage(on,Gn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rr(this,kt,new Map);for(const on of $t(this,rn))$t(this,kt).set(on,{savedX:on.x,savedY:on.y,savedPageIndex:on.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!$t(this,kt))return!1;this.disableUserSelect(!1);const on=$t(this,kt);rr(this,kt,null);let Gn=!1;for(const[{x:pr,y:Ar,pageIndex:xr},un]of on)un.newX=pr,un.newY=Ar,un.newPageIndex=xr,Gn||(Gn=pr!==un.savedX||Ar!==un.savedY||xr!==un.savedPageIndex);if(!Gn)return!1;const Xn=(pr,Ar,xr,un)=>{if($t(this,Lt).has(pr.id)){const pn=$t(this,Ft).get(un);pn?pr._setParentAndPosition(pn,Ar,xr):(pr.pageIndex=un,pr.x=Ar,pr.y=xr)}};return this.addCommands({cmd:()=>{for(const[pr,{newX:Ar,newY:xr,newPageIndex:un}]of on)Xn(pr,Ar,xr,un)},undo:()=>{for(const[pr,{savedX:Ar,savedY:xr,savedPageIndex:un}]of on)Xn(pr,Ar,xr,un)},mustExec:!0}),!0}dragSelectedEditors(on,Gn){if($t(this,kt))for(const Xn of $t(this,kt).keys())Xn.drag(on,Gn)}rebuild(on){if(on.parent===null){const Gn=this.getLayer(on.pageIndex);Gn?(Gn.changeParent(on),Gn.addOrRebuild(on)):(this.addEditor(on),this.addToAnnotationStorage(on),on.rebuild())}else on.parent.addOrRebuild(on)}isActive(on){return $t(this,Mt)===on}getActive(){return $t(this,Mt)}getMode(){return $t(this,qt)}get imageManager(){return(0,nt.shadow)(this,"imageManager",new at)}};Mt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,Wt=new WeakMap,Jt=new WeakMap,Ot=new WeakMap,kt=new WeakMap,Gt=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Dt=new WeakMap,It=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,qt=new WeakMap,rn=new WeakMap,gn=new WeakMap,An=new WeakMap,En=new WeakMap,fn=new WeakMap,nn=new WeakMap,Tn=new WeakMap,Cn=new WeakMap,vn=new WeakMap,_n=new WeakMap,Qt=new WeakMap,sn=new WeakMap,jt=new WeakMap,Bt=new WeakMap,hn=new WeakMap,cn=new WeakMap,mn=new WeakMap,an=new WeakSet,o0=function(){window.addEventListener("focus",$t(this,En)),window.addEventListener("blur",$t(this,An))},Sm=function(){window.removeEventListener("focus",$t(this,En)),window.removeEventListener("blur",$t(this,An))},Em=function(){window.addEventListener("keydown",$t(this,Cn),{capture:!0})},Ap=function(){window.removeEventListener("keydown",$t(this,Cn),{capture:!0})},Am=function(){document.addEventListener("copy",$t(this,fn)),document.addEventListener("cut",$t(this,nn)),document.addEventListener("paste",$t(this,Tn))},bm=function(){document.removeEventListener("copy",$t(this,fn)),document.removeEventListener("cut",$t(this,nn)),document.removeEventListener("paste",$t(this,Tn))},ba=function(on){Object.entries(on).some(([Xn,pr])=>$t(this,jt)[Xn]!==pr)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign($t(this,jt),on)})},$u=function(on){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:on})},a0=function(){if(!$t(this,It)){rr(this,It,!0);for(const on of $t(this,Ft).values())on.enable()}},l0=function(){if(this.unselectAll(),$t(this,It)){rr(this,It,!1);for(const on of $t(this,Ft).values())on.disable()}},wm=function(on){const Gn=$t(this,Ft).get(on.pageIndex);Gn?Gn.addOrRebuild(on):this.addEditor(on)},Vu=function(){if($t(this,Lt).size===0)return!0;if($t(this,Lt).size===1)for(const on of $t(this,Lt).values())return on.isEmpty();return!1},Cm=function(on){$t(this,rn).clear();for(const Gn of on)Gn.isEmpty()||($t(this,rn).add(Gn),Gn.select());zn(this,an,ba).call(this,{hasSelectedEditor:!0})},to(or,"TRANSLATE_SMALL",1),to(or,"TRANSLATE_BIG",10);let dt=or;_.AnnotationEditorUIManager=dt},(_e,_,tt)=>{var Jt,Ot,kt,Gt,zt,Vt,Dt,It,Ut,Yt,qt,rn,wu,Cu,Mm,bp,wp,zu,Hu;Object.defineProperty(_,"__esModule",{value:!0}),_.StatTimer=_.RenderingCancelledException=_.PixelsPerInch=_.PageViewport=_.PDFDateString=_.DOMStandardFontDataFactory=_.DOMSVGFactory=_.DOMFilterFactory=_.DOMCanvasFactory=_.DOMCMapReaderFactory=void 0,_.deprecated=Et,_.getColorValues=Lt,_.getCurrentTransform=Ft,_.getCurrentTransformInverse=Ht,_.getFilenameFromUrl=pt,_.getPdfFilenameFromUrl=_t,_.getRGB=Mt,_.getXfaPageViewport=Tt,_.isDataScheme=yt,_.isPdfFile=vt,_.isValidFetchUrl=St,_.loadScript=bt,_.noContextMenu=At,_.setLayerDimensions=Kt;var nt=tt(7),rt=tt(1);const it="http://www.w3.org/2000/svg",Wt=class Wt{};to(Wt,"CSS",96),to(Wt,"PDF",72),to(Wt,"PDF_TO_CSS_UNITS",Wt.CSS/Wt.PDF);let st=Wt;_.PixelsPerInch=st;class ot extends nt.BaseFilterFactory{constructor({docId:Qt,ownerDocument:sn=globalThis.document}={}){super();nr(this,rn);nr(this,Jt);nr(this,Ot);nr(this,kt);nr(this,Gt);nr(this,zt);nr(this,Vt);nr(this,Dt);nr(this,It);nr(this,Ut);nr(this,Yt);nr(this,qt,0);rr(this,kt,Qt),rr(this,Gt,sn)}addFilter(Qt){if(!Qt)return"none";let sn=$t(this,rn,wu).get(Qt);if(sn)return sn;let jt,Bt,hn,cn;if(Qt.length===1){const Pn=Qt[0],er=new Array(256);for(let cr=0;cr<256;cr++)er[cr]=Pn[cr]/255;cn=jt=Bt=hn=er.join(",")}else{const[Pn,er,cr]=Qt,ir=new Array(256),Jn=new Array(256),fr=new Array(256);for(let dr=0;dr<256;dr++)ir[dr]=Pn[dr]/255,Jn[dr]=er[dr]/255,fr[dr]=cr[dr]/255;jt=ir.join(","),Bt=Jn.join(","),hn=fr.join(","),cn=`${jt}${Bt}${hn}`}if(sn=$t(this,rn,wu).get(cn),sn)return $t(this,rn,wu).set(Qt,sn),sn;const mn=`g_${$t(this,kt)}_transfer_map_${Gu(this,qt)._++}`,an=`url(#${mn})`;$t(this,rn,wu).set(Qt,an),$t(this,rn,wu).set(cn,an);const Hn=zn(this,rn,bp).call(this,mn);return zn(this,rn,zu).call(this,jt,Bt,hn,Hn),an}addHCMFilter(Qt,sn){var er;const jt=`${Qt}-${sn}`;if($t(this,Vt)===jt)return $t(this,Dt);if(rr(this,Vt,jt),rr(this,Dt,"none"),(er=$t(this,zt))==null||er.remove(),!Qt||!sn)return $t(this,Dt);const Bt=zn(this,rn,Hu).call(this,Qt);Qt=rt.Util.makeHexColor(...Bt);const hn=zn(this,rn,Hu).call(this,sn);if(sn=rt.Util.makeHexColor(...hn),$t(this,rn,Cu).style.color="",Qt==="#000000"&&sn==="#ffffff"||Qt===sn)return $t(this,Dt);const cn=new Array(256);for(let cr=0;cr<=255;cr++){const ir=cr/255;cn[cr]=ir<=.03928?ir/12.92:((ir+.055)/1.055)**2.4}const mn=cn.join(","),an=`g_${$t(this,kt)}_hcm_filter`,Hn=rr(this,It,zn(this,rn,bp).call(this,an));zn(this,rn,zu).call(this,mn,mn,mn,Hn),zn(this,rn,Mm).call(this,Hn);const Pn=(cr,ir)=>{const Jn=Bt[cr]/255,fr=hn[cr]/255,dr=new Array(ir+1);for(let lr=0;lr<=ir;lr++)dr[lr]=Jn+lr/ir*(fr-Jn);return dr.join(",")};return zn(this,rn,zu).call(this,Pn(0,5),Pn(1,5),Pn(2,5),Hn),rr(this,Dt,`url(#${an})`),$t(this,Dt)}addHighlightHCMFilter(Qt,sn,jt,Bt){var fr;const hn=`${Qt}-${sn}-${jt}-${Bt}`;if($t(this,Ut)===hn)return $t(this,Yt);if(rr(this,Ut,hn),rr(this,Yt,"none"),(fr=$t(this,It))==null||fr.remove(),!Qt||!sn)return $t(this,Yt);const[cn,mn]=[Qt,sn].map(zn(this,rn,Hu).bind(this));let an=Math.round(.2126*cn[0]+.7152*cn[1]+.0722*cn[2]),Hn=Math.round(.2126*mn[0]+.7152*mn[1]+.0722*mn[2]),[Pn,er]=[jt,Bt].map(zn(this,rn,Hu).bind(this));Hn<an&&([an,Hn,Pn,er]=[Hn,an,er,Pn]),$t(this,rn,Cu).style.color="";const cr=(dr,lr,Nn)=>{const bn=new Array(256),Rn=(Hn-an)/Nn,Sn=dr/255,or=(lr-dr)/(255*Nn);let xn=0;for(let on=0;on<=Nn;on++){const Gn=Math.round(an+on*Rn),Xn=Sn+on*or;for(let pr=xn;pr<=Gn;pr++)bn[pr]=Xn;xn=Gn+1}for(let on=xn;on<256;on++)bn[on]=bn[xn-1];return bn.join(",")},ir=`g_${$t(this,kt)}_hcm_highlight_filter`,Jn=rr(this,It,zn(this,rn,bp).call(this,ir));return zn(this,rn,Mm).call(this,Jn),zn(this,rn,zu).call(this,cr(Pn[0],er[0],5),cr(Pn[1],er[1],5),cr(Pn[2],er[2],5),Jn),rr(this,Yt,`url(#${ir})`),$t(this,Yt)}destroy(Qt=!1){Qt&&($t(this,Dt)||$t(this,Yt))||($t(this,Ot)&&($t(this,Ot).parentNode.parentNode.remove(),rr(this,Ot,null)),$t(this,Jt)&&($t(this,Jt).clear(),rr(this,Jt,null)),rr(this,qt,0))}}Jt=new WeakMap,Ot=new WeakMap,kt=new WeakMap,Gt=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Dt=new WeakMap,It=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,qt=new WeakMap,rn=new WeakSet,wu=function(){return $t(this,Jt)||rr(this,Jt,new Map)},Cu=function(){if(!$t(this,Ot)){const Qt=$t(this,Gt).createElement("div"),{style:sn}=Qt;sn.visibility="hidden",sn.contain="strict",sn.width=sn.height=0,sn.position="absolute",sn.top=sn.left=0,sn.zIndex=-1;const jt=$t(this,Gt).createElementNS(it,"svg");jt.setAttribute("width",0),jt.setAttribute("height",0),rr(this,Ot,$t(this,Gt).createElementNS(it,"defs")),Qt.append(jt),jt.append($t(this,Ot)),$t(this,Gt).body.append(Qt)}return $t(this,Ot)},Mm=function(Qt){const sn=$t(this,Gt).createElementNS(it,"feColorMatrix");sn.setAttribute("type","matrix"),sn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Qt.append(sn)},bp=function(Qt){const sn=$t(this,Gt).createElementNS(it,"filter");return sn.setAttribute("color-interpolation-filters","sRGB"),sn.setAttribute("id",Qt),$t(this,rn,Cu).append(sn),sn},wp=function(Qt,sn,jt){const Bt=$t(this,Gt).createElementNS(it,sn);Bt.setAttribute("type","discrete"),Bt.setAttribute("tableValues",jt),Qt.append(Bt)},zu=function(Qt,sn,jt,Bt){const hn=$t(this,Gt).createElementNS(it,"feComponentTransfer");Bt.append(hn),zn(this,rn,wp).call(this,hn,"feFuncR",Qt),zn(this,rn,wp).call(this,hn,"feFuncG",sn),zn(this,rn,wp).call(this,hn,"feFuncB",jt)},Hu=function(Qt){return $t(this,rn,Cu).style.color=Qt,Mt(getComputedStyle($t(this,rn,Cu)).getPropertyValue("color"))},_.DOMFilterFactory=ot;class at extends nt.BaseCanvasFactory{constructor({ownerDocument:_n=globalThis.document}={}){super(),this._document=_n}_createCanvas(_n,Qt){const sn=this._document.createElement("canvas");return sn.width=_n,sn.height=Qt,sn}}_.DOMCanvasFactory=at;async function lt(vn,_n=!1){if(St(vn,document.baseURI)){const Qt=await fetch(vn);if(!Qt.ok)throw new Error(Qt.statusText);return _n?new Uint8Array(await Qt.arrayBuffer()):(0,rt.stringToBytes)(await Qt.text())}return new Promise((Qt,sn)=>{const jt=new XMLHttpRequest;jt.open("GET",vn,!0),_n&&(jt.responseType="arraybuffer"),jt.onreadystatechange=()=>{if(jt.readyState===XMLHttpRequest.DONE){if(jt.status===200||jt.status===0){let Bt;if(_n&&jt.response?Bt=new Uint8Array(jt.response):!_n&&jt.responseText&&(Bt=(0,rt.stringToBytes)(jt.responseText)),Bt){Qt(Bt);return}}sn(new Error(jt.statusText))}},jt.send(null)})}class ct extends nt.BaseCMapReaderFactory{_fetchData(_n,Qt){return lt(_n,this.isCompressed).then(sn=>({cMapData:sn,compressionType:Qt}))}}_.DOMCMapReaderFactory=ct;class ut extends nt.BaseStandardFontDataFactory{_fetchData(_n){return lt(_n,!0)}}_.DOMStandardFontDataFactory=ut;class dt extends nt.BaseSVGFactory{_createSVG(_n){return document.createElementNS(it,_n)}}_.DOMSVGFactory=dt;class ht{constructor({viewBox:_n,scale:Qt,rotation:sn,offsetX:jt=0,offsetY:Bt=0,dontFlip:hn=!1}){this.viewBox=_n,this.scale=Qt,this.rotation=sn,this.offsetX=jt,this.offsetY=Bt;const cn=(_n[2]+_n[0])/2,mn=(_n[3]+_n[1])/2;let an,Hn,Pn,er;switch(sn%=360,sn<0&&(sn+=360),sn){case 180:an=-1,Hn=0,Pn=0,er=1;break;case 90:an=0,Hn=1,Pn=1,er=0;break;case 270:an=0,Hn=-1,Pn=-1,er=0;break;case 0:an=1,Hn=0,Pn=0,er=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}hn&&(Pn=-Pn,er=-er);let cr,ir,Jn,fr;an===0?(cr=Math.abs(mn-_n[1])*Qt+jt,ir=Math.abs(cn-_n[0])*Qt+Bt,Jn=(_n[3]-_n[1])*Qt,fr=(_n[2]-_n[0])*Qt):(cr=Math.abs(cn-_n[0])*Qt+jt,ir=Math.abs(mn-_n[1])*Qt+Bt,Jn=(_n[2]-_n[0])*Qt,fr=(_n[3]-_n[1])*Qt),this.transform=[an*Qt,Hn*Qt,Pn*Qt,er*Qt,cr-an*Qt*cn-Pn*Qt*mn,ir-Hn*Qt*cn-er*Qt*mn],this.width=Jn,this.height=fr}get rawDims(){const{viewBox:_n}=this;return(0,rt.shadow)(this,"rawDims",{pageWidth:_n[2]-_n[0],pageHeight:_n[3]-_n[1],pageX:_n[0],pageY:_n[1]})}clone({scale:_n=this.scale,rotation:Qt=this.rotation,offsetX:sn=this.offsetX,offsetY:jt=this.offsetY,dontFlip:Bt=!1}={}){return new ht({viewBox:this.viewBox.slice(),scale:_n,rotation:Qt,offsetX:sn,offsetY:jt,dontFlip:Bt})}convertToViewportPoint(_n,Qt){return rt.Util.applyTransform([_n,Qt],this.transform)}convertToViewportRectangle(_n){const Qt=rt.Util.applyTransform([_n[0],_n[1]],this.transform),sn=rt.Util.applyTransform([_n[2],_n[3]],this.transform);return[Qt[0],Qt[1],sn[0],sn[1]]}convertToPdfPoint(_n,Qt){return rt.Util.applyInverseTransform([_n,Qt],this.transform)}}_.PageViewport=ht;class mt extends rt.BaseException{constructor(_n,Qt=0){super(_n,"RenderingCancelledException"),this.extraDelay=Qt}}_.RenderingCancelledException=mt;function yt(vn){const _n=vn.length;let Qt=0;for(;Qt<_n&&vn[Qt].trim()==="";)Qt++;return vn.substring(Qt,Qt+5).toLowerCase()==="data:"}function vt(vn){return typeof vn=="string"&&/\.pdf$/i.test(vn)}function pt(vn,_n=!1){return _n||([vn]=vn.split(/[#?]/,1)),vn.substring(vn.lastIndexOf("/")+1)}function _t(vn,_n="document.pdf"){if(typeof vn!="string")return _n;if(yt(vn))return(0,rt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),_n;const Qt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,sn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,jt=Qt.exec(vn);let Bt=sn.exec(jt[1])||sn.exec(jt[2])||sn.exec(jt[3]);if(Bt&&(Bt=Bt[0],Bt.includes("%")))try{Bt=sn.exec(decodeURIComponent(Bt))[0]}catch{}return Bt||_n}class xt{constructor(){to(this,"started",Object.create(null));to(this,"times",[])}time(_n){_n in this.started&&(0,rt.warn)(`Timer is already running for ${_n}`),this.started[_n]=Date.now()}timeEnd(_n){_n in this.started||(0,rt.warn)(`Timer has not been started for ${_n}`),this.times.push({name:_n,start:this.started[_n],end:Date.now()}),delete this.started[_n]}toString(){const _n=[];let Qt=0;for(const{name:sn}of this.times)Qt=Math.max(sn.length,Qt);for(const{name:sn,start:jt,end:Bt}of this.times)_n.push(`${sn.padEnd(Qt)} ${Bt-jt}ms
`);return _n.join("")}}_.StatTimer=xt;function St(vn,_n){try{const{protocol:Qt}=_n?new URL(vn,_n):new URL(vn);return Qt==="http:"||Qt==="https:"}catch{return!1}}function At(vn){vn.preventDefault()}function bt(vn,_n=!1){return new Promise((Qt,sn)=>{const jt=document.createElement("script");jt.src=vn,jt.onload=function(Bt){_n&&jt.remove(),Qt(Bt)},jt.onerror=function(){sn(new Error(`Cannot load script at: ${jt.src}`))},(document.head||document.documentElement).append(jt)})}function Et(vn){console.log("Deprecated API usage: "+vn)}let wt;class Rt{static toDateObject(_n){if(!_n||typeof _n!="string")return null;wt||(wt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Qt=wt.exec(_n);if(!Qt)return null;const sn=parseInt(Qt[1],10);let jt=parseInt(Qt[2],10);jt=jt>=1&&jt<=12?jt-1:0;let Bt=parseInt(Qt[3],10);Bt=Bt>=1&&Bt<=31?Bt:1;let hn=parseInt(Qt[4],10);hn=hn>=0&&hn<=23?hn:0;let cn=parseInt(Qt[5],10);cn=cn>=0&&cn<=59?cn:0;let mn=parseInt(Qt[6],10);mn=mn>=0&&mn<=59?mn:0;const an=Qt[7]||"Z";let Hn=parseInt(Qt[8],10);Hn=Hn>=0&&Hn<=23?Hn:0;let Pn=parseInt(Qt[9],10)||0;return Pn=Pn>=0&&Pn<=59?Pn:0,an==="-"?(hn+=Hn,cn+=Pn):an==="+"&&(hn-=Hn,cn-=Pn),new Date(Date.UTC(sn,jt,Bt,hn,cn,mn))}}_.PDFDateString=Rt;function Tt(vn,{scale:_n=1,rotation:Qt=0}){const{width:sn,height:jt}=vn.attributes.style,Bt=[0,0,parseInt(sn),parseInt(jt)];return new ht({viewBox:Bt,scale:_n,rotation:Qt})}function Mt(vn){if(vn.startsWith("#")){const _n=parseInt(vn.slice(1),16);return[(_n&16711680)>>16,(_n&65280)>>8,_n&255]}return vn.startsWith("rgb(")?vn.slice(4,-1).split(",").map(_n=>parseInt(_n)):vn.startsWith("rgba(")?vn.slice(5,-1).split(",").map(_n=>parseInt(_n)).slice(0,3):((0,rt.warn)(`Not a valid color format: "${vn}"`),[0,0,0])}function Lt(vn){const _n=document.createElement("span");_n.style.visibility="hidden",document.body.append(_n);for(const Qt of vn.keys()){_n.style.color=Qt;const sn=window.getComputedStyle(_n).color;vn.set(Qt,Mt(sn))}_n.remove()}function Ft(vn){const{a:_n,b:Qt,c:sn,d:jt,e:Bt,f:hn}=vn.getTransform();return[_n,Qt,sn,jt,Bt,hn]}function Ht(vn){const{a:_n,b:Qt,c:sn,d:jt,e:Bt,f:hn}=vn.getTransform().invertSelf();return[_n,Qt,sn,jt,Bt,hn]}function Kt(vn,_n,Qt=!1,sn=!0){if(_n instanceof ht){const{pageWidth:jt,pageHeight:Bt}=_n.rawDims,{style:hn}=vn,cn=rt.FeatureTest.isCSSRoundSupported,mn=`var(--scale-factor) * ${jt}px`,an=`var(--scale-factor) * ${Bt}px`,Hn=cn?`round(${mn}, 1px)`:`calc(${mn})`,Pn=cn?`round(${an}, 1px)`:`calc(${an})`;!Qt||_n.rotation%180===0?(hn.width=Hn,hn.height=Pn):(hn.width=Pn,hn.height=Hn)}sn&&vn.setAttribute("data-main-rotation",_n.rotation)}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BaseStandardFontDataFactory=_.BaseSVGFactory=_.BaseFilterFactory=_.BaseCanvasFactory=_.BaseCMapReaderFactory=void 0;var nt=tt(1);class rt{constructor(){this.constructor===rt&&(0,nt.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(ct){return"none"}addHCMFilter(ct,ut){return"none"}addHighlightHCMFilter(ct,ut,dt,ht){return"none"}destroy(ct=!1){}}_.BaseFilterFactory=rt;class it{constructor(){this.constructor===it&&(0,nt.unreachable)("Cannot initialize BaseCanvasFactory.")}create(ct,ut){if(ct<=0||ut<=0)throw new Error("Invalid canvas size");const dt=this._createCanvas(ct,ut);return{canvas:dt,context:dt.getContext("2d")}}reset(ct,ut,dt){if(!ct.canvas)throw new Error("Canvas is not specified");if(ut<=0||dt<=0)throw new Error("Invalid canvas size");ct.canvas.width=ut,ct.canvas.height=dt}destroy(ct){if(!ct.canvas)throw new Error("Canvas is not specified");ct.canvas.width=0,ct.canvas.height=0,ct.canvas=null,ct.context=null}_createCanvas(ct,ut){(0,nt.unreachable)("Abstract method `_createCanvas` called.")}}_.BaseCanvasFactory=it;class st{constructor({baseUrl:ct=null,isCompressed:ut=!0}){this.constructor===st&&(0,nt.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=ct,this.isCompressed=ut}async fetch({name:ct}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!ct)throw new Error("CMap name must be specified.");const ut=this.baseUrl+ct+(this.isCompressed?".bcmap":""),dt=this.isCompressed?nt.CMapCompressionType.BINARY:nt.CMapCompressionType.NONE;return this._fetchData(ut,dt).catch(ht=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ut}`)})}_fetchData(ct,ut){(0,nt.unreachable)("Abstract method `_fetchData` called.")}}_.BaseCMapReaderFactory=st;class ot{constructor({baseUrl:ct=null}){this.constructor===ot&&(0,nt.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=ct}async fetch({filename:ct}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!ct)throw new Error("Font filename must be specified.");const ut=`${this.baseUrl}${ct}`;return this._fetchData(ut).catch(dt=>{throw new Error(`Unable to load font data at: ${ut}`)})}_fetchData(ct){(0,nt.unreachable)("Abstract method `_fetchData` called.")}}_.BaseStandardFontDataFactory=ot;class at{constructor(){this.constructor===at&&(0,nt.unreachable)("Cannot initialize BaseSVGFactory.")}create(ct,ut,dt=!1){if(ct<=0||ut<=0)throw new Error("Invalid SVG dimensions");const ht=this._createSVG("svg:svg");return ht.setAttribute("version","1.1"),dt||(ht.setAttribute("width",`${ct}px`),ht.setAttribute("height",`${ut}px`)),ht.setAttribute("preserveAspectRatio","none"),ht.setAttribute("viewBox",`0 0 ${ct} ${ut}`),ht}createElement(ct){if(typeof ct!="string")throw new Error("Invalid SVG element type");return this._createSVG(ct)}_createSVG(ct){(0,nt.unreachable)("Abstract method `_createSVG` called.")}}_.BaseSVGFactory=at},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.MurmurHash3_64=void 0;var nt=tt(1);const rt=3285377520,it=4294901760,st=65535;class ot{constructor(lt){this.h1=lt?lt&4294967295:rt,this.h2=lt?lt&4294967295:rt}update(lt){let ct,ut;if(typeof lt=="string"){ct=new Uint8Array(lt.length*2),ut=0;for(let Et=0,wt=lt.length;Et<wt;Et++){const Rt=lt.charCodeAt(Et);Rt<=255?ct[ut++]=Rt:(ct[ut++]=Rt>>>8,ct[ut++]=Rt&255)}}else if((0,nt.isArrayBuffer)(lt))ct=lt.slice(),ut=ct.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const dt=ut>>2,ht=ut-dt*4,mt=new Uint32Array(ct.buffer,0,dt);let yt=0,vt=0,pt=this.h1,_t=this.h2;const xt=3432918353,St=461845907,At=xt&st,bt=St&st;for(let Et=0;Et<dt;Et++)Et&1?(yt=mt[Et],yt=yt*xt&it|yt*At&st,yt=yt<<15|yt>>>17,yt=yt*St&it|yt*bt&st,pt^=yt,pt=pt<<13|pt>>>19,pt=pt*5+3864292196):(vt=mt[Et],vt=vt*xt&it|vt*At&st,vt=vt<<15|vt>>>17,vt=vt*St&it|vt*bt&st,_t^=vt,_t=_t<<13|_t>>>19,_t=_t*5+3864292196);switch(yt=0,ht){case 3:yt^=ct[dt*4+2]<<16;case 2:yt^=ct[dt*4+1]<<8;case 1:yt^=ct[dt*4],yt=yt*xt&it|yt*At&st,yt=yt<<15|yt>>>17,yt=yt*St&it|yt*bt&st,dt&1?pt^=yt:_t^=yt}this.h1=pt,this.h2=_t}hexdigest(){let lt=this.h1,ct=this.h2;return lt^=ct>>>1,lt=lt*3981806797&it|lt*36045&st,ct=ct*4283543511&it|((ct<<16|lt>>>16)*2950163797&it)>>>16,lt^=ct>>>1,lt=lt*444984403&it|lt*60499&st,ct=ct*3301882366&it|((ct<<16|lt>>>16)*3120437893&it)>>>16,lt^=ct>>>1,(lt>>>0).toString(16).padStart(8,"0")+(ct>>>0).toString(16).padStart(8,"0")}}_.MurmurHash3_64=ot},(_e,_,tt)=>{var st;Object.defineProperty(_,"__esModule",{value:!0}),_.FontLoader=_.FontFaceObject=void 0;var nt=tt(1);class rt{constructor({ownerDocument:at=globalThis.document,styleElement:lt=null}){nr(this,st,new Set);this._document=at,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(at){this.nativeFontFaces.add(at),this._document.fonts.add(at)}removeNativeFontFace(at){this.nativeFontFaces.delete(at),this._document.fonts.delete(at)}insertRule(at){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const lt=this.styleElement.sheet;lt.insertRule(at,lt.cssRules.length)}clear(){for(const at of this.nativeFontFaces)this._document.fonts.delete(at);this.nativeFontFaces.clear(),$t(this,st).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(at){if(!(!at||$t(this,st).has(at.loadedName))){if((0,nt.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:lt,src:ct,style:ut}=at,dt=new FontFace(lt,ct,ut);this.addNativeFontFace(dt);try{await dt.load(),$t(this,st).add(lt)}catch{(0,nt.warn)(`Cannot load system font: ${at.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(dt)}return}(0,nt.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(at){if(at.attached||at.missingFile&&!at.systemFontInfo)return;if(at.attached=!0,at.systemFontInfo){await this.loadSystemFont(at.systemFontInfo);return}if(this.isFontLoadingAPISupported){const ct=at.createNativeFontFace();if(ct){this.addNativeFontFace(ct);try{await ct.loaded}catch(ut){throw(0,nt.warn)(`Failed to load font '${ct.family}': '${ut}'.`),at.disableFontFace=!0,ut}}return}const lt=at.createFontFaceRule();if(lt){if(this.insertRule(lt),this.isSyncFontLoadingSupported)return;await new Promise(ct=>{const ut=this._queueLoadingCallback(ct);this._prepareFontLoadEvent(at,ut)})}}get isFontLoadingAPISupported(){var lt;const at=!!((lt=this._document)!=null&&lt.fonts);return(0,nt.shadow)(this,"isFontLoadingAPISupported",at)}get isSyncFontLoadingSupported(){let at=!1;return(nt.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(at=!0),(0,nt.shadow)(this,"isSyncFontLoadingSupported",at)}_queueLoadingCallback(at){function lt(){for((0,nt.assert)(!ut.done,"completeRequest() cannot be called twice."),ut.done=!0;ct.length>0&&ct[0].done;){const dt=ct.shift();setTimeout(dt.callback,0)}}const{loadingRequests:ct}=this,ut={done:!1,complete:lt,callback:at};return ct.push(ut),ut}get _loadTestFont(){const at=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,nt.shadow)(this,"_loadTestFont",at)}_prepareFontLoadEvent(at,lt){function ct(Mt,Lt){return Mt.charCodeAt(Lt)<<24|Mt.charCodeAt(Lt+1)<<16|Mt.charCodeAt(Lt+2)<<8|Mt.charCodeAt(Lt+3)&255}function ut(Mt,Lt,Ft,Ht){const Kt=Mt.substring(0,Lt),Wt=Mt.substring(Lt+Ft);return Kt+Ht+Wt}let dt,ht;const mt=this._document.createElement("canvas");mt.width=1,mt.height=1;const yt=mt.getContext("2d");let vt=0;function pt(Mt,Lt){if(++vt>30){(0,nt.warn)("Load test font never loaded."),Lt();return}if(yt.font="30px "+Mt,yt.fillText(".",0,20),yt.getImageData(0,0,1,1).data[3]>0){Lt();return}setTimeout(pt.bind(null,Mt,Lt))}const _t=`lt${Date.now()}${this.loadTestFontId++}`;let xt=this._loadTestFont;xt=ut(xt,976,_t.length,_t);const At=16,bt=1482184792;let Et=ct(xt,At);for(dt=0,ht=_t.length-3;dt<ht;dt+=4)Et=Et-bt+ct(_t,dt)|0;dt<_t.length&&(Et=Et-bt+ct(_t+"XXX",dt)|0),xt=ut(xt,At,4,(0,nt.string32)(Et));const wt=`url(data:font/opentype;base64,${btoa(xt)});`,Rt=`@font-face {font-family:"${_t}";src:${wt}}`;this.insertRule(Rt);const Tt=this._document.createElement("div");Tt.style.visibility="hidden",Tt.style.width=Tt.style.height="10px",Tt.style.position="absolute",Tt.style.top=Tt.style.left="0px";for(const Mt of[at.loadedName,_t]){const Lt=this._document.createElement("span");Lt.textContent="Hi",Lt.style.fontFamily=Mt,Tt.append(Lt)}this._document.body.append(Tt),pt(_t,()=>{Tt.remove(),lt.complete()})}}st=new WeakMap,_.FontLoader=rt;class it{constructor(at,{isEvalSupported:lt=!0,disableFontFace:ct=!1,ignoreErrors:ut=!1,inspectFont:dt=null}){this.compiledGlyphs=Object.create(null);for(const ht in at)this[ht]=at[ht];this.isEvalSupported=lt!==!1,this.disableFontFace=ct===!0,this.ignoreErrors=ut===!0,this._inspectFont=dt}createNativeFontFace(){var lt;if(!this.data||this.disableFontFace)return null;let at;if(!this.cssFontInfo)at=new FontFace(this.loadedName,this.data,{});else{const ct={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ct.style=`oblique ${this.cssFontInfo.italicAngle}deg`),at=new FontFace(this.cssFontInfo.fontFamily,this.data,ct)}return(lt=this._inspectFont)==null||lt.call(this,this),at}createFontFaceRule(){var ut;if(!this.data||this.disableFontFace)return null;const at=(0,nt.bytesToString)(this.data),lt=`url(data:${this.mimetype};base64,${btoa(at)});`;let ct;if(!this.cssFontInfo)ct=`@font-face {font-family:"${this.loadedName}";src:${lt}}`;else{let dt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(dt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ct=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${dt}src:${lt}}`}return(ut=this._inspectFont)==null||ut.call(this,this,lt),ct}getPathGenerator(at,lt){if(this.compiledGlyphs[lt]!==void 0)return this.compiledGlyphs[lt];let ct;try{ct=at.get(this.loadedName+"_path_"+lt)}catch(ut){if(!this.ignoreErrors)throw ut;return(0,nt.warn)(`getPathGenerator - ignoring character: "${ut}".`),this.compiledGlyphs[lt]=function(dt,ht){}}if(this.isEvalSupported&&nt.FeatureTest.isEvalSupported){const ut=[];for(const dt of ct){const ht=dt.args!==void 0?dt.args.join(","):"";ut.push("c.",dt.cmd,"(",ht,`);
`)}return this.compiledGlyphs[lt]=new Function("c","size",ut.join(""))}return this.compiledGlyphs[lt]=function(ut,dt){for(const ht of ct)ht.cmd==="scale"&&(ht.args=[dt,-dt]),ut[ht.cmd].apply(ut,ht.args)}}}_.FontFaceObject=it},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NodeStandardFontDataFactory=_.NodeFilterFactory=_.NodeCanvasFactory=_.NodeCMapReaderFactory=void 0;var nt=tt(7);tt(1);const rt=function(lt){return new Promise((ct,ut)=>{require$$5.readFile(lt,(ht,mt)=>{if(ht||!mt){ut(new Error(ht));return}ct(new Uint8Array(mt))})})};class it extends nt.BaseFilterFactory{}_.NodeFilterFactory=it;class st extends nt.BaseCanvasFactory{_createCanvas(ct,ut){return require$$5.createCanvas(ct,ut)}}_.NodeCanvasFactory=st;class ot extends nt.BaseCMapReaderFactory{_fetchData(ct,ut){return rt(ct).then(dt=>({cMapData:dt,compressionType:ut}))}}_.NodeCMapReaderFactory=ot;class at extends nt.BaseStandardFontDataFactory{_fetchData(ct){return rt(ct)}}_.NodeStandardFontDataFactory=at},(_e,_,tt)=>{var Ot,Tm,Rm;Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasGraphics=void 0;var nt=tt(1),rt=tt(6),it=tt(12),st=tt(13);const ot=16,at=100,lt=4096,ct=15,ut=10,dt=1e3,ht=16;function mt(Vt,Dt){if(Vt._removeMirroring)throw new Error("Context is already forwarding operations.");Vt.__originalSave=Vt.save,Vt.__originalRestore=Vt.restore,Vt.__originalRotate=Vt.rotate,Vt.__originalScale=Vt.scale,Vt.__originalTranslate=Vt.translate,Vt.__originalTransform=Vt.transform,Vt.__originalSetTransform=Vt.setTransform,Vt.__originalResetTransform=Vt.resetTransform,Vt.__originalClip=Vt.clip,Vt.__originalMoveTo=Vt.moveTo,Vt.__originalLineTo=Vt.lineTo,Vt.__originalBezierCurveTo=Vt.bezierCurveTo,Vt.__originalRect=Vt.rect,Vt.__originalClosePath=Vt.closePath,Vt.__originalBeginPath=Vt.beginPath,Vt._removeMirroring=()=>{Vt.save=Vt.__originalSave,Vt.restore=Vt.__originalRestore,Vt.rotate=Vt.__originalRotate,Vt.scale=Vt.__originalScale,Vt.translate=Vt.__originalTranslate,Vt.transform=Vt.__originalTransform,Vt.setTransform=Vt.__originalSetTransform,Vt.resetTransform=Vt.__originalResetTransform,Vt.clip=Vt.__originalClip,Vt.moveTo=Vt.__originalMoveTo,Vt.lineTo=Vt.__originalLineTo,Vt.bezierCurveTo=Vt.__originalBezierCurveTo,Vt.rect=Vt.__originalRect,Vt.closePath=Vt.__originalClosePath,Vt.beginPath=Vt.__originalBeginPath,delete Vt._removeMirroring},Vt.save=function(){Dt.save(),this.__originalSave()},Vt.restore=function(){Dt.restore(),this.__originalRestore()},Vt.translate=function(Ut,Yt){Dt.translate(Ut,Yt),this.__originalTranslate(Ut,Yt)},Vt.scale=function(Ut,Yt){Dt.scale(Ut,Yt),this.__originalScale(Ut,Yt)},Vt.transform=function(Ut,Yt,qt,rn,gn,An){Dt.transform(Ut,Yt,qt,rn,gn,An),this.__originalTransform(Ut,Yt,qt,rn,gn,An)},Vt.setTransform=function(Ut,Yt,qt,rn,gn,An){Dt.setTransform(Ut,Yt,qt,rn,gn,An),this.__originalSetTransform(Ut,Yt,qt,rn,gn,An)},Vt.resetTransform=function(){Dt.resetTransform(),this.__originalResetTransform()},Vt.rotate=function(Ut){Dt.rotate(Ut),this.__originalRotate(Ut)},Vt.clip=function(Ut){Dt.clip(Ut),this.__originalClip(Ut)},Vt.moveTo=function(It,Ut){Dt.moveTo(It,Ut),this.__originalMoveTo(It,Ut)},Vt.lineTo=function(It,Ut){Dt.lineTo(It,Ut),this.__originalLineTo(It,Ut)},Vt.bezierCurveTo=function(It,Ut,Yt,qt,rn,gn){Dt.bezierCurveTo(It,Ut,Yt,qt,rn,gn),this.__originalBezierCurveTo(It,Ut,Yt,qt,rn,gn)},Vt.rect=function(It,Ut,Yt,qt){Dt.rect(It,Ut,Yt,qt),this.__originalRect(It,Ut,Yt,qt)},Vt.closePath=function(){Dt.closePath(),this.__originalClosePath()},Vt.beginPath=function(){Dt.beginPath(),this.__originalBeginPath()}}class yt{constructor(Dt){this.canvasFactory=Dt,this.cache=Object.create(null)}getCanvas(Dt,It,Ut){let Yt;return this.cache[Dt]!==void 0?(Yt=this.cache[Dt],this.canvasFactory.reset(Yt,It,Ut)):(Yt=this.canvasFactory.create(It,Ut),this.cache[Dt]=Yt),Yt}delete(Dt){delete this.cache[Dt]}clear(){for(const Dt in this.cache){const It=this.cache[Dt];this.canvasFactory.destroy(It),delete this.cache[Dt]}}}function vt(Vt,Dt,It,Ut,Yt,qt,rn,gn,An,En){const[fn,nn,Tn,Cn,vn,_n]=(0,rt.getCurrentTransform)(Vt);if(nn===0&&Tn===0){const jt=rn*fn+vn,Bt=Math.round(jt),hn=gn*Cn+_n,cn=Math.round(hn),mn=(rn+An)*fn+vn,an=Math.abs(Math.round(mn)-Bt)||1,Hn=(gn+En)*Cn+_n,Pn=Math.abs(Math.round(Hn)-cn)||1;return Vt.setTransform(Math.sign(fn),0,0,Math.sign(Cn),Bt,cn),Vt.drawImage(Dt,It,Ut,Yt,qt,0,0,an,Pn),Vt.setTransform(fn,nn,Tn,Cn,vn,_n),[an,Pn]}if(fn===0&&Cn===0){const jt=gn*Tn+vn,Bt=Math.round(jt),hn=rn*nn+_n,cn=Math.round(hn),mn=(gn+En)*Tn+vn,an=Math.abs(Math.round(mn)-Bt)||1,Hn=(rn+An)*nn+_n,Pn=Math.abs(Math.round(Hn)-cn)||1;return Vt.setTransform(0,Math.sign(nn),Math.sign(Tn),0,Bt,cn),Vt.drawImage(Dt,It,Ut,Yt,qt,0,0,Pn,an),Vt.setTransform(fn,nn,Tn,Cn,vn,_n),[Pn,an]}Vt.drawImage(Dt,It,Ut,Yt,qt,rn,gn,An,En);const Qt=Math.hypot(fn,nn),sn=Math.hypot(Tn,Cn);return[Qt*An,sn*En]}function pt(Vt){const{width:Dt,height:It}=Vt;if(Dt>dt||It>dt)return null;const Ut=1e3,Yt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),qt=Dt+1;let rn=new Uint8Array(qt*(It+1)),gn,An,En;const fn=Dt+7&-8;let nn=new Uint8Array(fn*It),Tn=0;for(const sn of Vt.data){let jt=128;for(;jt>0;)nn[Tn++]=sn&jt?0:255,jt>>=1}let Cn=0;for(Tn=0,nn[Tn]!==0&&(rn[0]=1,++Cn),An=1;An<Dt;An++)nn[Tn]!==nn[Tn+1]&&(rn[An]=nn[Tn]?2:1,++Cn),Tn++;for(nn[Tn]!==0&&(rn[An]=2,++Cn),gn=1;gn<It;gn++){Tn=gn*fn,En=gn*qt,nn[Tn-fn]!==nn[Tn]&&(rn[En]=nn[Tn]?1:8,++Cn);let sn=(nn[Tn]?4:0)+(nn[Tn-fn]?8:0);for(An=1;An<Dt;An++)sn=(sn>>2)+(nn[Tn+1]?4:0)+(nn[Tn-fn+1]?8:0),Yt[sn]&&(rn[En+An]=Yt[sn],++Cn),Tn++;if(nn[Tn-fn]!==nn[Tn]&&(rn[En+An]=nn[Tn]?2:4,++Cn),Cn>Ut)return null}for(Tn=fn*(It-1),En=gn*qt,nn[Tn]!==0&&(rn[En]=8,++Cn),An=1;An<Dt;An++)nn[Tn]!==nn[Tn+1]&&(rn[En+An]=nn[Tn]?4:8,++Cn),Tn++;if(nn[Tn]!==0&&(rn[En+An]=4,++Cn),Cn>Ut)return null;const vn=new Int32Array([0,qt,-1,0,-qt,0,0,0,1]),_n=new Path2D;for(gn=0;Cn&&gn<=It;gn++){let sn=gn*qt;const jt=sn+Dt;for(;sn<jt&&!rn[sn];)sn++;if(sn===jt)continue;_n.moveTo(sn%qt,gn);const Bt=sn;let hn=rn[sn];do{const cn=vn[hn];do sn+=cn;while(!rn[sn]);const mn=rn[sn];mn!==5&&mn!==10?(hn=mn,rn[sn]=0):(hn=mn&51*hn>>4,rn[sn]&=hn>>2|hn<<2),_n.lineTo(sn%qt,sn/qt|0),rn[sn]||--Cn}while(Bt!==sn);--gn}return nn=null,rn=null,function(sn){sn.save(),sn.scale(1/Dt,-1/It),sn.translate(0,-It),sn.fill(_n),sn.beginPath(),sn.restore()}}class _t{constructor(Dt,It){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nt.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=nt.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nt.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Dt,It])}clone(){const Dt=Object.create(this);return Dt.clipBox=this.clipBox.slice(),Dt}setCurrentPoint(Dt,It){this.x=Dt,this.y=It}updatePathMinMax(Dt,It,Ut){[It,Ut]=nt.Util.applyTransform([It,Ut],Dt),this.minX=Math.min(this.minX,It),this.minY=Math.min(this.minY,Ut),this.maxX=Math.max(this.maxX,It),this.maxY=Math.max(this.maxY,Ut)}updateRectMinMax(Dt,It){const Ut=nt.Util.applyTransform(It,Dt),Yt=nt.Util.applyTransform(It.slice(2),Dt);this.minX=Math.min(this.minX,Ut[0],Yt[0]),this.minY=Math.min(this.minY,Ut[1],Yt[1]),this.maxX=Math.max(this.maxX,Ut[0],Yt[0]),this.maxY=Math.max(this.maxY,Ut[1],Yt[1])}updateScalingPathMinMax(Dt,It){nt.Util.scaleMinMax(Dt,It),this.minX=Math.min(this.minX,It[0]),this.maxX=Math.max(this.maxX,It[1]),this.minY=Math.min(this.minY,It[2]),this.maxY=Math.max(this.maxY,It[3])}updateCurvePathMinMax(Dt,It,Ut,Yt,qt,rn,gn,An,En,fn){const nn=nt.Util.bezierBoundingBox(It,Ut,Yt,qt,rn,gn,An,En);if(fn){fn[0]=Math.min(fn[0],nn[0],nn[2]),fn[1]=Math.max(fn[1],nn[0],nn[2]),fn[2]=Math.min(fn[2],nn[1],nn[3]),fn[3]=Math.max(fn[3],nn[1],nn[3]);return}this.updateRectMinMax(Dt,nn)}getPathBoundingBox(Dt=it.PathType.FILL,It=null){const Ut=[this.minX,this.minY,this.maxX,this.maxY];if(Dt===it.PathType.STROKE){It||(0,nt.unreachable)("Stroke bounding box must include transform.");const Yt=nt.Util.singularValueDecompose2dScale(It),qt=Yt[0]*this.lineWidth/2,rn=Yt[1]*this.lineWidth/2;Ut[0]-=qt,Ut[1]-=rn,Ut[2]+=qt,Ut[3]+=rn}return Ut}updateClipFromPath(){const Dt=nt.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Dt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Dt){this.clipBox=Dt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Dt=it.PathType.FILL,It=null){return nt.Util.intersect(this.clipBox,this.getPathBoundingBox(Dt,It))}}function xt(Vt,Dt){if(typeof ImageData<"u"&&Dt instanceof ImageData){Vt.putImageData(Dt,0,0);return}const It=Dt.height,Ut=Dt.width,Yt=It%ht,qt=(It-Yt)/ht,rn=Yt===0?qt:qt+1,gn=Vt.createImageData(Ut,ht);let An=0,En;const fn=Dt.data,nn=gn.data;let Tn,Cn,vn,_n;if(Dt.kind===nt.ImageKind.GRAYSCALE_1BPP){const Qt=fn.byteLength,sn=new Uint32Array(nn.buffer,0,nn.byteLength>>2),jt=sn.length,Bt=Ut+7>>3,hn=4294967295,cn=nt.FeatureTest.isLittleEndian?4278190080:255;for(Tn=0;Tn<rn;Tn++){for(vn=Tn<qt?ht:Yt,En=0,Cn=0;Cn<vn;Cn++){const mn=Qt-An;let an=0;const Hn=mn>Bt?Ut:mn*8-7,Pn=Hn&-8;let er=0,cr=0;for(;an<Pn;an+=8)cr=fn[An++],sn[En++]=cr&128?hn:cn,sn[En++]=cr&64?hn:cn,sn[En++]=cr&32?hn:cn,sn[En++]=cr&16?hn:cn,sn[En++]=cr&8?hn:cn,sn[En++]=cr&4?hn:cn,sn[En++]=cr&2?hn:cn,sn[En++]=cr&1?hn:cn;for(;an<Hn;an++)er===0&&(cr=fn[An++],er=128),sn[En++]=cr&er?hn:cn,er>>=1}for(;En<jt;)sn[En++]=0;Vt.putImageData(gn,0,Tn*ht)}}else if(Dt.kind===nt.ImageKind.RGBA_32BPP){for(Cn=0,_n=Ut*ht*4,Tn=0;Tn<qt;Tn++)nn.set(fn.subarray(An,An+_n)),An+=_n,Vt.putImageData(gn,0,Cn),Cn+=ht;Tn<rn&&(_n=Ut*Yt*4,nn.set(fn.subarray(An,An+_n)),Vt.putImageData(gn,0,Cn))}else if(Dt.kind===nt.ImageKind.RGB_24BPP)for(vn=ht,_n=Ut*vn,Tn=0;Tn<rn;Tn++){for(Tn>=qt&&(vn=Yt,_n=Ut*vn),En=0,Cn=_n;Cn--;)nn[En++]=fn[An++],nn[En++]=fn[An++],nn[En++]=fn[An++],nn[En++]=255;Vt.putImageData(gn,0,Tn*ht)}else throw new Error(`bad image kind: ${Dt.kind}`)}function St(Vt,Dt){if(Dt.bitmap){Vt.drawImage(Dt.bitmap,0,0);return}const It=Dt.height,Ut=Dt.width,Yt=It%ht,qt=(It-Yt)/ht,rn=Yt===0?qt:qt+1,gn=Vt.createImageData(Ut,ht);let An=0;const En=Dt.data,fn=gn.data;for(let nn=0;nn<rn;nn++){const Tn=nn<qt?ht:Yt;({srcPos:An}=(0,st.convertBlackAndWhiteToRGBA)({src:En,srcPos:An,dest:fn,width:Ut,height:Tn,nonBlackColor:0})),Vt.putImageData(gn,0,nn*ht)}}function At(Vt,Dt){const It=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Ut of It)Vt[Ut]!==void 0&&(Dt[Ut]=Vt[Ut]);Vt.setLineDash!==void 0&&(Dt.setLineDash(Vt.getLineDash()),Dt.lineDashOffset=Vt.lineDashOffset)}function bt(Vt){if(Vt.strokeStyle=Vt.fillStyle="#000000",Vt.fillRule="nonzero",Vt.globalAlpha=1,Vt.lineWidth=1,Vt.lineCap="butt",Vt.lineJoin="miter",Vt.miterLimit=10,Vt.globalCompositeOperation="source-over",Vt.font="10px sans-serif",Vt.setLineDash!==void 0&&(Vt.setLineDash([]),Vt.lineDashOffset=0),!nt.isNodeJS){const{filter:Dt}=Vt;Dt!=="none"&&Dt!==""&&(Vt.filter="none")}}function Et(Vt,Dt,It,Ut){const Yt=Vt.length;for(let qt=3;qt<Yt;qt+=4){const rn=Vt[qt];if(rn===0)Vt[qt-3]=Dt,Vt[qt-2]=It,Vt[qt-1]=Ut;else if(rn<255){const gn=255-rn;Vt[qt-3]=Vt[qt-3]*rn+Dt*gn>>8,Vt[qt-2]=Vt[qt-2]*rn+It*gn>>8,Vt[qt-1]=Vt[qt-1]*rn+Ut*gn>>8}}}function wt(Vt,Dt,It){const Ut=Vt.length,Yt=1/255;for(let qt=3;qt<Ut;qt+=4){const rn=It?It[Vt[qt]]:Vt[qt];Dt[qt]=Dt[qt]*rn*Yt|0}}function Rt(Vt,Dt,It){const Ut=Vt.length;for(let Yt=3;Yt<Ut;Yt+=4){const qt=Vt[Yt-3]*77+Vt[Yt-2]*152+Vt[Yt-1]*28;Dt[Yt]=It?Dt[Yt]*It[qt>>8]>>8:Dt[Yt]*qt>>16}}function Tt(Vt,Dt,It,Ut,Yt,qt,rn,gn,An,En,fn){const nn=!!qt,Tn=nn?qt[0]:0,Cn=nn?qt[1]:0,vn=nn?qt[2]:0,_n=Yt==="Luminosity"?Rt:wt,sn=Math.min(Ut,Math.ceil(1048576/It));for(let jt=0;jt<Ut;jt+=sn){const Bt=Math.min(sn,Ut-jt),hn=Vt.getImageData(gn-En,jt+(An-fn),It,Bt),cn=Dt.getImageData(gn,jt+An,It,Bt);nn&&Et(hn.data,Tn,Cn,vn),_n(hn.data,cn.data,rn),Dt.putImageData(cn,gn,jt+An)}}function Mt(Vt,Dt,It,Ut){const Yt=Ut[0],qt=Ut[1],rn=Ut[2]-Yt,gn=Ut[3]-qt;rn===0||gn===0||(Tt(Dt.context,It,rn,gn,Dt.subtype,Dt.backdrop,Dt.transferMap,Yt,qt,Dt.offsetX,Dt.offsetY),Vt.save(),Vt.globalAlpha=1,Vt.globalCompositeOperation="source-over",Vt.setTransform(1,0,0,1,0,0),Vt.drawImage(It.canvas,0,0),Vt.restore())}function Lt(Vt,Dt){const It=nt.Util.singularValueDecompose2dScale(Vt);It[0]=Math.fround(It[0]),It[1]=Math.fround(It[1]);const Ut=Math.fround((globalThis.devicePixelRatio||1)*rt.PixelsPerInch.PDF_TO_CSS_UNITS);return Dt!==void 0?Dt:It[0]<=Ut||It[1]<=Ut}const Ft=["butt","round","square"],Ht=["miter","round","bevel"],Kt={},Wt={},zt=class zt{constructor(Dt,It,Ut,Yt,qt,{optionalContentConfig:rn,markedContentStack:gn=null},An,En){nr(this,Ot);this.ctx=Dt,this.current=new _t(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=It,this.objs=Ut,this.canvasFactory=Yt,this.filterFactory=qt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=gn||[],this.optionalContentConfig=rn,this.cachedCanvases=new yt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=An,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=En,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Dt,It=null){return typeof Dt=="string"?Dt.startsWith("g_")?this.commonObjs.get(Dt):this.objs.get(Dt):It}beginDrawing({transform:Dt,viewport:It,transparency:Ut=!1,background:Yt=null}){const qt=this.ctx.canvas.width,rn=this.ctx.canvas.height,gn=this.ctx.fillStyle;if(this.ctx.fillStyle=Yt||"#ffffff",this.ctx.fillRect(0,0,qt,rn),this.ctx.fillStyle=gn,Ut){const An=this.cachedCanvases.getCanvas("transparent",qt,rn);this.compositeCtx=this.ctx,this.transparentCanvas=An.canvas,this.ctx=An.context,this.ctx.save(),this.ctx.transform(...(0,rt.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),bt(this.ctx),Dt&&(this.ctx.transform(...Dt),this.outputScaleX=Dt[0],this.outputScaleY=Dt[0]),this.ctx.transform(...It.transform),this.viewportScale=It.scale,this.baseTransform=(0,rt.getCurrentTransform)(this.ctx)}executeOperatorList(Dt,It,Ut,Yt){const qt=Dt.argsArray,rn=Dt.fnArray;let gn=It||0;const An=qt.length;if(An===gn)return gn;const En=An-gn>ut&&typeof Ut=="function",fn=En?Date.now()+ct:0;let nn=0;const Tn=this.commonObjs,Cn=this.objs;let vn;for(;;){if(Yt!==void 0&&gn===Yt.nextBreakPoint)return Yt.breakIt(gn,Ut),gn;if(vn=rn[gn],vn!==nt.OPS.dependency)this[vn].apply(this,qt[gn]);else for(const _n of qt[gn]){const Qt=_n.startsWith("g_")?Tn:Cn;if(!Qt.has(_n))return Qt.get(_n,Ut),gn}if(gn++,gn===An)return gn;if(En&&++nn>ut){if(Date.now()>fn)return Ut(),gn;nn=0}}}endDrawing(){zn(this,Ot,Tm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Dt of this._cachedBitmapsMap.values()){for(const It of Dt.values())typeof HTMLCanvasElement<"u"&&It instanceof HTMLCanvasElement&&(It.width=It.height=0);Dt.clear()}this._cachedBitmapsMap.clear(),zn(this,Ot,Rm).call(this)}_scaleImage(Dt,It){const Ut=Dt.width,Yt=Dt.height;let qt=Math.max(Math.hypot(It[0],It[1]),1),rn=Math.max(Math.hypot(It[2],It[3]),1),gn=Ut,An=Yt,En="prescale1",fn,nn;for(;qt>2&&gn>1||rn>2&&An>1;){let Tn=gn,Cn=An;qt>2&&gn>1&&(Tn=gn>=16384?Math.floor(gn/2)-1||1:Math.ceil(gn/2),qt/=gn/Tn),rn>2&&An>1&&(Cn=An>=16384?Math.floor(An/2)-1||1:Math.ceil(An)/2,rn/=An/Cn),fn=this.cachedCanvases.getCanvas(En,Tn,Cn),nn=fn.context,nn.clearRect(0,0,Tn,Cn),nn.drawImage(Dt,0,0,gn,An,0,0,Tn,Cn),Dt=fn.canvas,gn=Tn,An=Cn,En=En==="prescale1"?"prescale2":"prescale1"}return{img:Dt,paintWidth:gn,paintHeight:An}}_createMaskCanvas(Dt){const It=this.ctx,{width:Ut,height:Yt}=Dt,qt=this.current.fillColor,rn=this.current.patternFill,gn=(0,rt.getCurrentTransform)(It);let An,En,fn,nn;if((Dt.bitmap||Dt.data)&&Dt.count>1){const an=Dt.bitmap||Dt.data.buffer;En=JSON.stringify(rn?gn:[gn.slice(0,4),qt]),An=this._cachedBitmapsMap.get(an),An||(An=new Map,this._cachedBitmapsMap.set(an,An));const Hn=An.get(En);if(Hn&&!rn){const Pn=Math.round(Math.min(gn[0],gn[2])+gn[4]),er=Math.round(Math.min(gn[1],gn[3])+gn[5]);return{canvas:Hn,offsetX:Pn,offsetY:er}}fn=Hn}fn||(nn=this.cachedCanvases.getCanvas("maskCanvas",Ut,Yt),St(nn.context,Dt));let Tn=nt.Util.transform(gn,[1/Ut,0,0,-1/Yt,0,0]);Tn=nt.Util.transform(Tn,[1,0,0,1,0,-Yt]);const Cn=nt.Util.applyTransform([0,0],Tn),vn=nt.Util.applyTransform([Ut,Yt],Tn),_n=nt.Util.normalizeRect([Cn[0],Cn[1],vn[0],vn[1]]),Qt=Math.round(_n[2]-_n[0])||1,sn=Math.round(_n[3]-_n[1])||1,jt=this.cachedCanvases.getCanvas("fillCanvas",Qt,sn),Bt=jt.context,hn=Math.min(Cn[0],vn[0]),cn=Math.min(Cn[1],vn[1]);Bt.translate(-hn,-cn),Bt.transform(...Tn),fn||(fn=this._scaleImage(nn.canvas,(0,rt.getCurrentTransformInverse)(Bt)),fn=fn.img,An&&rn&&An.set(En,fn)),Bt.imageSmoothingEnabled=Lt((0,rt.getCurrentTransform)(Bt),Dt.interpolate),vt(Bt,fn,0,0,fn.width,fn.height,0,0,Ut,Yt),Bt.globalCompositeOperation="source-in";const mn=nt.Util.transform((0,rt.getCurrentTransformInverse)(Bt),[1,0,0,1,-hn,-cn]);return Bt.fillStyle=rn?qt.getPattern(It,this,mn,it.PathType.FILL):qt,Bt.fillRect(0,0,Ut,Yt),An&&!rn&&(this.cachedCanvases.delete("fillCanvas"),An.set(En,jt.canvas)),{canvas:jt.canvas,offsetX:Math.round(hn),offsetY:Math.round(cn)}}setLineWidth(Dt){Dt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Dt,this.ctx.lineWidth=Dt}setLineCap(Dt){this.ctx.lineCap=Ft[Dt]}setLineJoin(Dt){this.ctx.lineJoin=Ht[Dt]}setMiterLimit(Dt){this.ctx.miterLimit=Dt}setDash(Dt,It){const Ut=this.ctx;Ut.setLineDash!==void 0&&(Ut.setLineDash(Dt),Ut.lineDashOffset=It)}setRenderingIntent(Dt){}setFlatness(Dt){}setGState(Dt){for(const[It,Ut]of Dt)switch(It){case"LW":this.setLineWidth(Ut);break;case"LC":this.setLineCap(Ut);break;case"LJ":this.setLineJoin(Ut);break;case"ML":this.setMiterLimit(Ut);break;case"D":this.setDash(Ut[0],Ut[1]);break;case"RI":this.setRenderingIntent(Ut);break;case"FL":this.setFlatness(Ut);break;case"Font":this.setFont(Ut[0],Ut[1]);break;case"CA":this.current.strokeAlpha=Ut;break;case"ca":this.current.fillAlpha=Ut,this.ctx.globalAlpha=Ut;break;case"BM":this.ctx.globalCompositeOperation=Ut;break;case"SMask":this.current.activeSMask=Ut?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Ut);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Dt=this.inSMaskMode;this.current.activeSMask&&!Dt?this.beginSMaskMode():!this.current.activeSMask&&Dt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Dt=this.ctx.canvas.width,It=this.ctx.canvas.height,Ut="smaskGroupAt"+this.groupLevel,Yt=this.cachedCanvases.getCanvas(Ut,Dt,It);this.suspendedCtx=this.ctx,this.ctx=Yt.context;const qt=this.ctx;qt.setTransform(...(0,rt.getCurrentTransform)(this.suspendedCtx)),At(this.suspendedCtx,qt),mt(qt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),At(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Dt){if(!this.current.activeSMask)return;Dt?(Dt[0]=Math.floor(Dt[0]),Dt[1]=Math.floor(Dt[1]),Dt[2]=Math.ceil(Dt[2]),Dt[3]=Math.ceil(Dt[3])):Dt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const It=this.current.activeSMask,Ut=this.suspendedCtx;Mt(Ut,It,this.ctx,Dt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(At(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Dt=this.current;this.stateStack.push(Dt),this.current=Dt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),At(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Dt,It,Ut,Yt,qt,rn){this.ctx.transform(Dt,It,Ut,Yt,qt,rn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Dt,It,Ut){const Yt=this.ctx,qt=this.current;let rn=qt.x,gn=qt.y,An,En;const fn=(0,rt.getCurrentTransform)(Yt),nn=fn[0]===0&&fn[3]===0||fn[1]===0&&fn[2]===0,Tn=nn?Ut.slice(0):null;for(let Cn=0,vn=0,_n=Dt.length;Cn<_n;Cn++)switch(Dt[Cn]|0){case nt.OPS.rectangle:rn=It[vn++],gn=It[vn++];const Qt=It[vn++],sn=It[vn++],jt=rn+Qt,Bt=gn+sn;Yt.moveTo(rn,gn),Qt===0||sn===0?Yt.lineTo(jt,Bt):(Yt.lineTo(jt,gn),Yt.lineTo(jt,Bt),Yt.lineTo(rn,Bt)),nn||qt.updateRectMinMax(fn,[rn,gn,jt,Bt]),Yt.closePath();break;case nt.OPS.moveTo:rn=It[vn++],gn=It[vn++],Yt.moveTo(rn,gn),nn||qt.updatePathMinMax(fn,rn,gn);break;case nt.OPS.lineTo:rn=It[vn++],gn=It[vn++],Yt.lineTo(rn,gn),nn||qt.updatePathMinMax(fn,rn,gn);break;case nt.OPS.curveTo:An=rn,En=gn,rn=It[vn+4],gn=It[vn+5],Yt.bezierCurveTo(It[vn],It[vn+1],It[vn+2],It[vn+3],rn,gn),qt.updateCurvePathMinMax(fn,An,En,It[vn],It[vn+1],It[vn+2],It[vn+3],rn,gn,Tn),vn+=6;break;case nt.OPS.curveTo2:An=rn,En=gn,Yt.bezierCurveTo(rn,gn,It[vn],It[vn+1],It[vn+2],It[vn+3]),qt.updateCurvePathMinMax(fn,An,En,rn,gn,It[vn],It[vn+1],It[vn+2],It[vn+3],Tn),rn=It[vn+2],gn=It[vn+3],vn+=4;break;case nt.OPS.curveTo3:An=rn,En=gn,rn=It[vn+2],gn=It[vn+3],Yt.bezierCurveTo(It[vn],It[vn+1],rn,gn,rn,gn),qt.updateCurvePathMinMax(fn,An,En,It[vn],It[vn+1],rn,gn,rn,gn,Tn),vn+=4;break;case nt.OPS.closePath:Yt.closePath();break}nn&&qt.updateScalingPathMinMax(fn,Tn),qt.setCurrentPoint(rn,gn)}closePath(){this.ctx.closePath()}stroke(Dt=!0){const It=this.ctx,Ut=this.current.strokeColor;It.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Ut=="object"&&(Ut!=null&&Ut.getPattern)?(It.save(),It.strokeStyle=Ut.getPattern(It,this,(0,rt.getCurrentTransformInverse)(It),it.PathType.STROKE),this.rescaleAndStroke(!1),It.restore()):this.rescaleAndStroke(!0)),Dt&&this.consumePath(this.current.getClippedPathBoundingBox()),It.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Dt=!0){const It=this.ctx,Ut=this.current.fillColor,Yt=this.current.patternFill;let qt=!1;Yt&&(It.save(),It.fillStyle=Ut.getPattern(It,this,(0,rt.getCurrentTransformInverse)(It),it.PathType.FILL),qt=!0);const rn=this.current.getClippedPathBoundingBox();this.contentVisible&&rn!==null&&(this.pendingEOFill?(It.fill("evenodd"),this.pendingEOFill=!1):It.fill()),qt&&It.restore(),Dt&&this.consumePath(rn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Kt}eoClip(){this.pendingClip=Wt}beginText(){this.current.textMatrix=nt.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Dt=this.pendingTextPaths,It=this.ctx;if(Dt===void 0){It.beginPath();return}It.save(),It.beginPath();for(const Ut of Dt)It.setTransform(...Ut.transform),It.translate(Ut.x,Ut.y),Ut.addToPath(It,Ut.fontSize);It.restore(),It.clip(),It.beginPath(),delete this.pendingTextPaths}setCharSpacing(Dt){this.current.charSpacing=Dt}setWordSpacing(Dt){this.current.wordSpacing=Dt}setHScale(Dt){this.current.textHScale=Dt/100}setLeading(Dt){this.current.leading=-Dt}setFont(Dt,It){var fn;const Ut=this.commonObjs.get(Dt),Yt=this.current;if(!Ut)throw new Error(`Can't find font for ${Dt}`);if(Yt.fontMatrix=Ut.fontMatrix||nt.FONT_IDENTITY_MATRIX,(Yt.fontMatrix[0]===0||Yt.fontMatrix[3]===0)&&(0,nt.warn)("Invalid font matrix for font "+Dt),It<0?(It=-It,Yt.fontDirection=-1):Yt.fontDirection=1,this.current.font=Ut,this.current.fontSize=It,Ut.isType3Font)return;const qt=Ut.loadedName||"sans-serif",rn=((fn=Ut.systemFontInfo)==null?void 0:fn.css)||`"${qt}", ${Ut.fallbackName}`;let gn="normal";Ut.black?gn="900":Ut.bold&&(gn="bold");const An=Ut.italic?"italic":"normal";let En=It;It<ot?En=ot:It>at&&(En=at),this.current.fontSizeScale=It/En,this.ctx.font=`${An} ${gn} ${En}px ${rn}`}setTextRenderingMode(Dt){this.current.textRenderingMode=Dt}setTextRise(Dt){this.current.textRise=Dt}moveText(Dt,It){this.current.x=this.current.lineX+=Dt,this.current.y=this.current.lineY+=It}setLeadingMoveText(Dt,It){this.setLeading(-It),this.moveText(Dt,It)}setTextMatrix(Dt,It,Ut,Yt,qt,rn){this.current.textMatrix=[Dt,It,Ut,Yt,qt,rn],this.current.textMatrixScale=Math.hypot(Dt,It),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Dt,It,Ut,Yt){const qt=this.ctx,rn=this.current,gn=rn.font,An=rn.textRenderingMode,En=rn.fontSize/rn.fontSizeScale,fn=An&nt.TextRenderingMode.FILL_STROKE_MASK,nn=!!(An&nt.TextRenderingMode.ADD_TO_PATH_FLAG),Tn=rn.patternFill&&!gn.missingFile;let Cn;(gn.disableFontFace||nn||Tn)&&(Cn=gn.getPathGenerator(this.commonObjs,Dt)),gn.disableFontFace||Tn?(qt.save(),qt.translate(It,Ut),qt.beginPath(),Cn(qt,En),Yt&&qt.setTransform(...Yt),(fn===nt.TextRenderingMode.FILL||fn===nt.TextRenderingMode.FILL_STROKE)&&qt.fill(),(fn===nt.TextRenderingMode.STROKE||fn===nt.TextRenderingMode.FILL_STROKE)&&qt.stroke(),qt.restore()):((fn===nt.TextRenderingMode.FILL||fn===nt.TextRenderingMode.FILL_STROKE)&&qt.fillText(Dt,It,Ut),(fn===nt.TextRenderingMode.STROKE||fn===nt.TextRenderingMode.FILL_STROKE)&&qt.strokeText(Dt,It,Ut)),nn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,rt.getCurrentTransform)(qt),x:It,y:Ut,fontSize:En,addToPath:Cn})}get isFontSubpixelAAEnabled(){const{context:Dt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Dt.scale(1.5,1),Dt.fillText("I",0,10);const It=Dt.getImageData(0,0,10,10).data;let Ut=!1;for(let Yt=3;Yt<It.length;Yt+=4)if(It[Yt]>0&&It[Yt]<255){Ut=!0;break}return(0,nt.shadow)(this,"isFontSubpixelAAEnabled",Ut)}showText(Dt){const It=this.current,Ut=It.font;if(Ut.isType3Font)return this.showType3Text(Dt);const Yt=It.fontSize;if(Yt===0)return;const qt=this.ctx,rn=It.fontSizeScale,gn=It.charSpacing,An=It.wordSpacing,En=It.fontDirection,fn=It.textHScale*En,nn=Dt.length,Tn=Ut.vertical,Cn=Tn?1:-1,vn=Ut.defaultVMetrics,_n=Yt*It.fontMatrix[0],Qt=It.textRenderingMode===nt.TextRenderingMode.FILL&&!Ut.disableFontFace&&!It.patternFill;qt.save(),qt.transform(...It.textMatrix),qt.translate(It.x,It.y+It.textRise),En>0?qt.scale(fn,-1):qt.scale(fn,1);let sn;if(It.patternFill){qt.save();const mn=It.fillColor.getPattern(qt,this,(0,rt.getCurrentTransformInverse)(qt),it.PathType.FILL);sn=(0,rt.getCurrentTransform)(qt),qt.restore(),qt.fillStyle=mn}let jt=It.lineWidth;const Bt=It.textMatrixScale;if(Bt===0||jt===0){const mn=It.textRenderingMode&nt.TextRenderingMode.FILL_STROKE_MASK;(mn===nt.TextRenderingMode.STROKE||mn===nt.TextRenderingMode.FILL_STROKE)&&(jt=this.getSinglePixelWidth())}else jt/=Bt;if(rn!==1&&(qt.scale(rn,rn),jt/=rn),qt.lineWidth=jt,Ut.isInvalidPDFjsFont){const mn=[];let an=0;for(const Hn of Dt)mn.push(Hn.unicode),an+=Hn.width;qt.fillText(mn.join(""),0,0),It.x+=an*_n*fn,qt.restore(),this.compose();return}let hn=0,cn;for(cn=0;cn<nn;++cn){const mn=Dt[cn];if(typeof mn=="number"){hn+=Cn*mn*Yt/1e3;continue}let an=!1;const Hn=(mn.isSpace?An:0)+gn,Pn=mn.fontChar,er=mn.accent;let cr,ir,Jn=mn.width;if(Tn){const dr=mn.vmetric||vn,lr=-(mn.vmetric?dr[1]:Jn*.5)*_n,Nn=dr[2]*_n;Jn=dr?-dr[0]:Jn,cr=lr/rn,ir=(hn+Nn)/rn}else cr=hn/rn,ir=0;if(Ut.remeasure&&Jn>0){const dr=qt.measureText(Pn).width*1e3/Yt*rn;if(Jn<dr&&this.isFontSubpixelAAEnabled){const lr=Jn/dr;an=!0,qt.save(),qt.scale(lr,1),cr/=lr}else Jn!==dr&&(cr+=(Jn-dr)/2e3*Yt/rn)}if(this.contentVisible&&(mn.isInFont||Ut.missingFile)){if(Qt&&!er)qt.fillText(Pn,cr,ir);else if(this.paintChar(Pn,cr,ir,sn),er){const dr=cr+Yt*er.offset.x/rn,lr=ir-Yt*er.offset.y/rn;this.paintChar(er.fontChar,dr,lr,sn)}}const fr=Tn?Jn*_n-Hn*En:Jn*_n+Hn*En;hn+=fr,an&&qt.restore()}Tn?It.y-=hn:It.x+=hn*fn,qt.restore(),this.compose()}showType3Text(Dt){const It=this.ctx,Ut=this.current,Yt=Ut.font,qt=Ut.fontSize,rn=Ut.fontDirection,gn=Yt.vertical?1:-1,An=Ut.charSpacing,En=Ut.wordSpacing,fn=Ut.textHScale*rn,nn=Ut.fontMatrix||nt.FONT_IDENTITY_MATRIX,Tn=Dt.length,Cn=Ut.textRenderingMode===nt.TextRenderingMode.INVISIBLE;let vn,_n,Qt,sn;if(!(Cn||qt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,It.save(),It.transform(...Ut.textMatrix),It.translate(Ut.x,Ut.y),It.scale(fn,rn),vn=0;vn<Tn;++vn){if(_n=Dt[vn],typeof _n=="number"){sn=gn*_n*qt/1e3,this.ctx.translate(sn,0),Ut.x+=sn*fn;continue}const jt=(_n.isSpace?En:0)+An,Bt=Yt.charProcOperatorList[_n.operatorListId];if(!Bt){(0,nt.warn)(`Type3 character "${_n.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_n,this.save(),It.scale(qt,qt),It.transform(...nn),this.executeOperatorList(Bt),this.restore()),Qt=nt.Util.applyTransform([_n.width,0],nn)[0]*qt+jt,It.translate(Qt,0),Ut.x+=Qt*fn}It.restore(),this.processingType3=null}}setCharWidth(Dt,It){}setCharWidthAndBounds(Dt,It,Ut,Yt,qt,rn){this.ctx.rect(Ut,Yt,qt-Ut,rn-Yt),this.ctx.clip(),this.endPath()}getColorN_Pattern(Dt){let It;if(Dt[0]==="TilingPattern"){const Ut=Dt[1],Yt=this.baseTransform||(0,rt.getCurrentTransform)(this.ctx),qt={createCanvasGraphics:rn=>new zt(rn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};It=new it.TilingPattern(Dt,Ut,this.ctx,qt,Yt)}else It=this._getPattern(Dt[1],Dt[2]);return It}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Dt,It,Ut){const Yt=nt.Util.makeHexColor(Dt,It,Ut);this.ctx.strokeStyle=Yt,this.current.strokeColor=Yt}setFillRGBColor(Dt,It,Ut){const Yt=nt.Util.makeHexColor(Dt,It,Ut);this.ctx.fillStyle=Yt,this.current.fillColor=Yt,this.current.patternFill=!1}_getPattern(Dt,It=null){let Ut;return this.cachedPatterns.has(Dt)?Ut=this.cachedPatterns.get(Dt):(Ut=(0,it.getShadingPattern)(this.getObject(Dt)),this.cachedPatterns.set(Dt,Ut)),It&&(Ut.matrix=It),Ut}shadingFill(Dt){if(!this.contentVisible)return;const It=this.ctx;this.save();const Ut=this._getPattern(Dt);It.fillStyle=Ut.getPattern(It,this,(0,rt.getCurrentTransformInverse)(It),it.PathType.SHADING);const Yt=(0,rt.getCurrentTransformInverse)(It);if(Yt){const{width:qt,height:rn}=It.canvas,[gn,An,En,fn]=nt.Util.getAxialAlignedBoundingBox([0,0,qt,rn],Yt);this.ctx.fillRect(gn,An,En-gn,fn-An)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,nt.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,nt.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Dt,It){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Dt)&&Dt.length===6&&this.transform(...Dt),this.baseTransform=(0,rt.getCurrentTransform)(this.ctx),It)){const Ut=It[2]-It[0],Yt=It[3]-It[1];this.ctx.rect(It[0],It[1],Ut,Yt),this.current.updateRectMinMax((0,rt.getCurrentTransform)(this.ctx),It),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Dt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const It=this.ctx;Dt.isolated||(0,nt.info)("TODO: Support non-isolated groups."),Dt.knockout&&(0,nt.warn)("Knockout groups not supported.");const Ut=(0,rt.getCurrentTransform)(It);if(Dt.matrix&&It.transform(...Dt.matrix),!Dt.bbox)throw new Error("Bounding box is required.");let Yt=nt.Util.getAxialAlignedBoundingBox(Dt.bbox,(0,rt.getCurrentTransform)(It));const qt=[0,0,It.canvas.width,It.canvas.height];Yt=nt.Util.intersect(Yt,qt)||[0,0,0,0];const rn=Math.floor(Yt[0]),gn=Math.floor(Yt[1]);let An=Math.max(Math.ceil(Yt[2])-rn,1),En=Math.max(Math.ceil(Yt[3])-gn,1),fn=1,nn=1;An>lt&&(fn=An/lt,An=lt),En>lt&&(nn=En/lt,En=lt),this.current.startNewPathAndClipBox([0,0,An,En]);let Tn="groupAt"+this.groupLevel;Dt.smask&&(Tn+="_smask_"+this.smaskCounter++%2);const Cn=this.cachedCanvases.getCanvas(Tn,An,En),vn=Cn.context;vn.scale(1/fn,1/nn),vn.translate(-rn,-gn),vn.transform(...Ut),Dt.smask?this.smaskStack.push({canvas:Cn.canvas,context:vn,offsetX:rn,offsetY:gn,scaleX:fn,scaleY:nn,subtype:Dt.smask.subtype,backdrop:Dt.smask.backdrop,transferMap:Dt.smask.transferMap||null,startTransformInverse:null}):(It.setTransform(1,0,0,1,0,0),It.translate(rn,gn),It.scale(fn,nn),It.save()),At(It,vn),this.ctx=vn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(It),this.groupLevel++}endGroup(Dt){if(!this.contentVisible)return;this.groupLevel--;const It=this.ctx,Ut=this.groupStack.pop();if(this.ctx=Ut,this.ctx.imageSmoothingEnabled=!1,Dt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Yt=(0,rt.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Yt);const qt=nt.Util.getAxialAlignedBoundingBox([0,0,It.canvas.width,It.canvas.height],Yt);this.ctx.drawImage(It.canvas,0,0),this.ctx.restore(),this.compose(qt)}}beginAnnotation(Dt,It,Ut,Yt,qt){if(zn(this,Ot,Tm).call(this),bt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(It)&&It.length===4){const rn=It[2]-It[0],gn=It[3]-It[1];if(qt&&this.annotationCanvasMap){Ut=Ut.slice(),Ut[4]-=It[0],Ut[5]-=It[1],It=It.slice(),It[0]=It[1]=0,It[2]=rn,It[3]=gn;const[An,En]=nt.Util.singularValueDecompose2dScale((0,rt.getCurrentTransform)(this.ctx)),{viewportScale:fn}=this,nn=Math.ceil(rn*this.outputScaleX*fn),Tn=Math.ceil(gn*this.outputScaleY*fn);this.annotationCanvas=this.canvasFactory.create(nn,Tn);const{canvas:Cn,context:vn}=this.annotationCanvas;this.annotationCanvasMap.set(Dt,Cn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=vn,this.ctx.save(),this.ctx.setTransform(An,0,0,-En,0,gn*En),bt(this.ctx)}else bt(this.ctx),this.ctx.rect(It[0],It[1],rn,gn),this.ctx.clip(),this.endPath()}this.current=new _t(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Ut),this.transform(...Yt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),zn(this,Ot,Rm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Dt){if(!this.contentVisible)return;const It=Dt.count;Dt=this.getObject(Dt.data,Dt),Dt.count=It;const Ut=this.ctx,Yt=this.processingType3;if(Yt&&(Yt.compiled===void 0&&(Yt.compiled=pt(Dt)),Yt.compiled)){Yt.compiled(Ut);return}const qt=this._createMaskCanvas(Dt),rn=qt.canvas;Ut.save(),Ut.setTransform(1,0,0,1,0,0),Ut.drawImage(rn,qt.offsetX,qt.offsetY),Ut.restore(),this.compose()}paintImageMaskXObjectRepeat(Dt,It,Ut=0,Yt=0,qt,rn){if(!this.contentVisible)return;Dt=this.getObject(Dt.data,Dt);const gn=this.ctx;gn.save();const An=(0,rt.getCurrentTransform)(gn);gn.transform(It,Ut,Yt,qt,0,0);const En=this._createMaskCanvas(Dt);gn.setTransform(1,0,0,1,En.offsetX-An[4],En.offsetY-An[5]);for(let fn=0,nn=rn.length;fn<nn;fn+=2){const Tn=nt.Util.transform(An,[It,Ut,Yt,qt,rn[fn],rn[fn+1]]),[Cn,vn]=nt.Util.applyTransform([0,0],Tn);gn.drawImage(En.canvas,Cn,vn)}gn.restore(),this.compose()}paintImageMaskXObjectGroup(Dt){if(!this.contentVisible)return;const It=this.ctx,Ut=this.current.fillColor,Yt=this.current.patternFill;for(const qt of Dt){const{data:rn,width:gn,height:An,transform:En}=qt,fn=this.cachedCanvases.getCanvas("maskCanvas",gn,An),nn=fn.context;nn.save();const Tn=this.getObject(rn,qt);St(nn,Tn),nn.globalCompositeOperation="source-in",nn.fillStyle=Yt?Ut.getPattern(nn,this,(0,rt.getCurrentTransformInverse)(It),it.PathType.FILL):Ut,nn.fillRect(0,0,gn,An),nn.restore(),It.save(),It.transform(...En),It.scale(1,-1),vt(It,fn.canvas,0,0,gn,An,0,-1,1,1),It.restore()}this.compose()}paintImageXObject(Dt){if(!this.contentVisible)return;const It=this.getObject(Dt);if(!It){(0,nt.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(It)}paintImageXObjectRepeat(Dt,It,Ut,Yt){if(!this.contentVisible)return;const qt=this.getObject(Dt);if(!qt){(0,nt.warn)("Dependent image isn't ready yet");return}const rn=qt.width,gn=qt.height,An=[];for(let En=0,fn=Yt.length;En<fn;En+=2)An.push({transform:[It,0,0,Ut,Yt[En],Yt[En+1]],x:0,y:0,w:rn,h:gn});this.paintInlineImageXObjectGroup(qt,An)}applyTransferMapsToCanvas(Dt){return this.current.transferMaps!=="none"&&(Dt.filter=this.current.transferMaps,Dt.drawImage(Dt.canvas,0,0),Dt.filter="none"),Dt.canvas}applyTransferMapsToBitmap(Dt){if(this.current.transferMaps==="none")return Dt.bitmap;const{bitmap:It,width:Ut,height:Yt}=Dt,qt=this.cachedCanvases.getCanvas("inlineImage",Ut,Yt),rn=qt.context;return rn.filter=this.current.transferMaps,rn.drawImage(It,0,0),rn.filter="none",qt.canvas}paintInlineImageXObject(Dt){if(!this.contentVisible)return;const It=Dt.width,Ut=Dt.height,Yt=this.ctx;if(this.save(),!nt.isNodeJS){const{filter:gn}=Yt;gn!=="none"&&gn!==""&&(Yt.filter="none")}Yt.scale(1/It,-1/Ut);let qt;if(Dt.bitmap)qt=this.applyTransferMapsToBitmap(Dt);else if(typeof HTMLElement=="function"&&Dt instanceof HTMLElement||!Dt.data)qt=Dt;else{const An=this.cachedCanvases.getCanvas("inlineImage",It,Ut).context;xt(An,Dt),qt=this.applyTransferMapsToCanvas(An)}const rn=this._scaleImage(qt,(0,rt.getCurrentTransformInverse)(Yt));Yt.imageSmoothingEnabled=Lt((0,rt.getCurrentTransform)(Yt),Dt.interpolate),vt(Yt,rn.img,0,0,rn.paintWidth,rn.paintHeight,0,-Ut,It,Ut),this.compose(),this.restore()}paintInlineImageXObjectGroup(Dt,It){if(!this.contentVisible)return;const Ut=this.ctx;let Yt;if(Dt.bitmap)Yt=Dt.bitmap;else{const qt=Dt.width,rn=Dt.height,An=this.cachedCanvases.getCanvas("inlineImage",qt,rn).context;xt(An,Dt),Yt=this.applyTransferMapsToCanvas(An)}for(const qt of It)Ut.save(),Ut.transform(...qt.transform),Ut.scale(1,-1),vt(Ut,Yt,qt.x,qt.y,qt.w,qt.h,0,-1,1,1),Ut.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Dt){}markPointProps(Dt,It){}beginMarkedContent(Dt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Dt,It){Dt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(It)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Dt){const It=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Dt);const Ut=this.ctx;this.pendingClip&&(It||(this.pendingClip===Wt?Ut.clip("evenodd"):Ut.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Ut.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Dt=(0,rt.getCurrentTransform)(this.ctx);if(Dt[1]===0&&Dt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Dt[0]),Math.abs(Dt[3]));else{const It=Math.abs(Dt[0]*Dt[3]-Dt[2]*Dt[1]),Ut=Math.hypot(Dt[0],Dt[2]),Yt=Math.hypot(Dt[1],Dt[3]);this._cachedGetSinglePixelWidth=Math.max(Ut,Yt)/It}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Dt}=this.current,{a:It,b:Ut,c:Yt,d:qt}=this.ctx.getTransform();let rn,gn;if(Ut===0&&Yt===0){const An=Math.abs(It),En=Math.abs(qt);if(An===En)if(Dt===0)rn=gn=1/An;else{const fn=An*Dt;rn=gn=fn<1?1/fn:1}else if(Dt===0)rn=1/An,gn=1/En;else{const fn=An*Dt,nn=En*Dt;rn=fn<1?1/fn:1,gn=nn<1?1/nn:1}}else{const An=Math.abs(It*qt-Ut*Yt),En=Math.hypot(It,Ut),fn=Math.hypot(Yt,qt);if(Dt===0)rn=fn/An,gn=En/An;else{const nn=Dt*An;rn=fn>nn?fn/nn:1,gn=En>nn?En/nn:1}}this._cachedScaleForStroking[0]=rn,this._cachedScaleForStroking[1]=gn}return this._cachedScaleForStroking}rescaleAndStroke(Dt){const{ctx:It}=this,{lineWidth:Ut}=this.current,[Yt,qt]=this.getScaleForStroking();if(It.lineWidth=Ut||1,Yt===1&&qt===1){It.stroke();return}const rn=It.getLineDash();if(Dt&&It.save(),It.scale(Yt,qt),rn.length>0){const gn=Math.max(Yt,qt);It.setLineDash(rn.map(An=>An/gn)),It.lineDashOffset/=gn}It.stroke(),Dt&&It.restore()}isContentVisible(){for(let Dt=this.markedContentStack.length-1;Dt>=0;Dt--)if(!this.markedContentStack[Dt].visible)return!1;return!0}};Ot=new WeakSet,Tm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Rm=function(){if(this.pageColors){const Dt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Dt!=="none"){const It=this.ctx.filter;this.ctx.filter=Dt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=It}}};let Jt=zt;_.CanvasGraphics=Jt;for(const Vt in nt.OPS)Jt.prototype[Vt]!==void 0&&(Jt.prototype[nt.OPS[Vt]]=Jt.prototype[Vt])},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TilingPattern=_.PathType=void 0,_.getShadingPattern=ht;var nt=tt(1),rt=tt(6);const it={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};_.PathType=it;function st(pt,_t){if(!_t)return;const xt=_t[2]-_t[0],St=_t[3]-_t[1],At=new Path2D;At.rect(_t[0],_t[1],xt,St),pt.clip(At)}class ot{constructor(){this.constructor===ot&&(0,nt.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,nt.unreachable)("Abstract method `getPattern` called.")}}class at extends ot{constructor(_t){super(),this._type=_t[1],this._bbox=_t[2],this._colorStops=_t[3],this._p0=_t[4],this._p1=_t[5],this._r0=_t[6],this._r1=_t[7],this.matrix=null}_createGradient(_t){let xt;this._type==="axial"?xt=_t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(xt=_t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const St of this._colorStops)xt.addColorStop(St[0],St[1]);return xt}getPattern(_t,xt,St,At){let bt;if(At===it.STROKE||At===it.FILL){const Et=xt.current.getClippedPathBoundingBox(At,(0,rt.getCurrentTransform)(_t))||[0,0,0,0],wt=Math.ceil(Et[2]-Et[0])||1,Rt=Math.ceil(Et[3]-Et[1])||1,Tt=xt.cachedCanvases.getCanvas("pattern",wt,Rt,!0),Mt=Tt.context;Mt.clearRect(0,0,Mt.canvas.width,Mt.canvas.height),Mt.beginPath(),Mt.rect(0,0,Mt.canvas.width,Mt.canvas.height),Mt.translate(-Et[0],-Et[1]),St=nt.Util.transform(St,[1,0,0,1,Et[0],Et[1]]),Mt.transform(...xt.baseTransform),this.matrix&&Mt.transform(...this.matrix),st(Mt,this._bbox),Mt.fillStyle=this._createGradient(Mt),Mt.fill(),bt=_t.createPattern(Tt.canvas,"no-repeat");const Lt=new DOMMatrix(St);bt.setTransform(Lt)}else st(_t,this._bbox),bt=this._createGradient(_t);return bt}}function lt(pt,_t,xt,St,At,bt,Et,wt){const Rt=_t.coords,Tt=_t.colors,Mt=pt.data,Lt=pt.width*4;let Ft;Rt[xt+1]>Rt[St+1]&&(Ft=xt,xt=St,St=Ft,Ft=bt,bt=Et,Et=Ft),Rt[St+1]>Rt[At+1]&&(Ft=St,St=At,At=Ft,Ft=Et,Et=wt,wt=Ft),Rt[xt+1]>Rt[St+1]&&(Ft=xt,xt=St,St=Ft,Ft=bt,bt=Et,Et=Ft);const Ht=(Rt[xt]+_t.offsetX)*_t.scaleX,Kt=(Rt[xt+1]+_t.offsetY)*_t.scaleY,Wt=(Rt[St]+_t.offsetX)*_t.scaleX,Jt=(Rt[St+1]+_t.offsetY)*_t.scaleY,Ot=(Rt[At]+_t.offsetX)*_t.scaleX,kt=(Rt[At+1]+_t.offsetY)*_t.scaleY;if(Kt>=kt)return;const Gt=Tt[bt],zt=Tt[bt+1],Vt=Tt[bt+2],Dt=Tt[Et],It=Tt[Et+1],Ut=Tt[Et+2],Yt=Tt[wt],qt=Tt[wt+1],rn=Tt[wt+2],gn=Math.round(Kt),An=Math.round(kt);let En,fn,nn,Tn,Cn,vn,_n,Qt;for(let sn=gn;sn<=An;sn++){if(sn<Jt){const mn=sn<Kt?0:(Kt-sn)/(Kt-Jt);En=Ht-(Ht-Wt)*mn,fn=Gt-(Gt-Dt)*mn,nn=zt-(zt-It)*mn,Tn=Vt-(Vt-Ut)*mn}else{let mn;sn>kt?mn=1:Jt===kt?mn=0:mn=(Jt-sn)/(Jt-kt),En=Wt-(Wt-Ot)*mn,fn=Dt-(Dt-Yt)*mn,nn=It-(It-qt)*mn,Tn=Ut-(Ut-rn)*mn}let jt;sn<Kt?jt=0:sn>kt?jt=1:jt=(Kt-sn)/(Kt-kt),Cn=Ht-(Ht-Ot)*jt,vn=Gt-(Gt-Yt)*jt,_n=zt-(zt-qt)*jt,Qt=Vt-(Vt-rn)*jt;const Bt=Math.round(Math.min(En,Cn)),hn=Math.round(Math.max(En,Cn));let cn=Lt*sn+Bt*4;for(let mn=Bt;mn<=hn;mn++)jt=(En-mn)/(En-Cn),jt<0?jt=0:jt>1&&(jt=1),Mt[cn++]=fn-(fn-vn)*jt|0,Mt[cn++]=nn-(nn-_n)*jt|0,Mt[cn++]=Tn-(Tn-Qt)*jt|0,Mt[cn++]=255}}function ct(pt,_t,xt){const St=_t.coords,At=_t.colors;let bt,Et;switch(_t.type){case"lattice":const wt=_t.verticesPerRow,Rt=Math.floor(St.length/wt)-1,Tt=wt-1;for(bt=0;bt<Rt;bt++){let Mt=bt*wt;for(let Lt=0;Lt<Tt;Lt++,Mt++)lt(pt,xt,St[Mt],St[Mt+1],St[Mt+wt],At[Mt],At[Mt+1],At[Mt+wt]),lt(pt,xt,St[Mt+wt+1],St[Mt+1],St[Mt+wt],At[Mt+wt+1],At[Mt+1],At[Mt+wt])}break;case"triangles":for(bt=0,Et=St.length;bt<Et;bt+=3)lt(pt,xt,St[bt],St[bt+1],St[bt+2],At[bt],At[bt+1],At[bt+2]);break;default:throw new Error("illegal figure")}}class ut extends ot{constructor(_t){super(),this._coords=_t[2],this._colors=_t[3],this._figures=_t[4],this._bounds=_t[5],this._bbox=_t[7],this._background=_t[8],this.matrix=null}_createMeshCanvas(_t,xt,St){const wt=Math.floor(this._bounds[0]),Rt=Math.floor(this._bounds[1]),Tt=Math.ceil(this._bounds[2])-wt,Mt=Math.ceil(this._bounds[3])-Rt,Lt=Math.min(Math.ceil(Math.abs(Tt*_t[0]*1.1)),3e3),Ft=Math.min(Math.ceil(Math.abs(Mt*_t[1]*1.1)),3e3),Ht=Tt/Lt,Kt=Mt/Ft,Wt={coords:this._coords,colors:this._colors,offsetX:-wt,offsetY:-Rt,scaleX:1/Ht,scaleY:1/Kt},Jt=Lt+2*2,Ot=Ft+2*2,kt=St.getCanvas("mesh",Jt,Ot,!1),Gt=kt.context,zt=Gt.createImageData(Lt,Ft);if(xt){const Dt=zt.data;for(let It=0,Ut=Dt.length;It<Ut;It+=4)Dt[It]=xt[0],Dt[It+1]=xt[1],Dt[It+2]=xt[2],Dt[It+3]=255}for(const Dt of this._figures)ct(zt,Dt,Wt);return Gt.putImageData(zt,2,2),{canvas:kt.canvas,offsetX:wt-2*Ht,offsetY:Rt-2*Kt,scaleX:Ht,scaleY:Kt}}getPattern(_t,xt,St,At){st(_t,this._bbox);let bt;if(At===it.SHADING)bt=nt.Util.singularValueDecompose2dScale((0,rt.getCurrentTransform)(_t));else if(bt=nt.Util.singularValueDecompose2dScale(xt.baseTransform),this.matrix){const wt=nt.Util.singularValueDecompose2dScale(this.matrix);bt=[bt[0]*wt[0],bt[1]*wt[1]]}const Et=this._createMeshCanvas(bt,At===it.SHADING?null:this._background,xt.cachedCanvases);return At!==it.SHADING&&(_t.setTransform(...xt.baseTransform),this.matrix&&_t.transform(...this.matrix)),_t.translate(Et.offsetX,Et.offsetY),_t.scale(Et.scaleX,Et.scaleY),_t.createPattern(Et.canvas,"no-repeat")}}class dt extends ot{getPattern(){return"hotpink"}}function ht(pt){switch(pt[0]){case"RadialAxial":return new at(pt);case"Mesh":return new ut(pt);case"Dummy":return new dt}throw new Error(`Unknown IR type: ${pt[0]}`)}const mt={COLORED:1,UNCOLORED:2},vt=class vt{constructor(_t,xt,St,At,bt){this.operatorList=_t[2],this.matrix=_t[3]||[1,0,0,1,0,0],this.bbox=_t[4],this.xstep=_t[5],this.ystep=_t[6],this.paintType=_t[7],this.tilingType=_t[8],this.color=xt,this.ctx=St,this.canvasGraphicsFactory=At,this.baseTransform=bt}createPatternCanvas(_t){const xt=this.operatorList,St=this.bbox,At=this.xstep,bt=this.ystep,Et=this.paintType,wt=this.tilingType,Rt=this.color,Tt=this.canvasGraphicsFactory;(0,nt.info)("TilingType: "+wt);const Mt=St[0],Lt=St[1],Ft=St[2],Ht=St[3],Kt=nt.Util.singularValueDecompose2dScale(this.matrix),Wt=nt.Util.singularValueDecompose2dScale(this.baseTransform),Jt=[Kt[0]*Wt[0],Kt[1]*Wt[1]],Ot=this.getSizeAndScale(At,this.ctx.canvas.width,Jt[0]),kt=this.getSizeAndScale(bt,this.ctx.canvas.height,Jt[1]),Gt=_t.cachedCanvases.getCanvas("pattern",Ot.size,kt.size,!0),zt=Gt.context,Vt=Tt.createCanvasGraphics(zt);Vt.groupLevel=_t.groupLevel,this.setFillAndStrokeStyleToContext(Vt,Et,Rt);let Dt=Mt,It=Lt,Ut=Ft,Yt=Ht;return Mt<0&&(Dt=0,Ut+=Math.abs(Mt)),Lt<0&&(It=0,Yt+=Math.abs(Lt)),zt.translate(-(Ot.scale*Dt),-(kt.scale*It)),Vt.transform(Ot.scale,0,0,kt.scale,0,0),zt.save(),this.clipBbox(Vt,Dt,It,Ut,Yt),Vt.baseTransform=(0,rt.getCurrentTransform)(Vt.ctx),Vt.executeOperatorList(xt),Vt.endDrawing(),{canvas:Gt.canvas,scaleX:Ot.scale,scaleY:kt.scale,offsetX:Dt,offsetY:It}}getSizeAndScale(_t,xt,St){_t=Math.abs(_t);const At=Math.max(vt.MAX_PATTERN_SIZE,xt);let bt=Math.ceil(_t*St);return bt>=At?bt=At:St=bt/_t,{scale:St,size:bt}}clipBbox(_t,xt,St,At,bt){const Et=At-xt,wt=bt-St;_t.ctx.rect(xt,St,Et,wt),_t.current.updateRectMinMax((0,rt.getCurrentTransform)(_t.ctx),[xt,St,At,bt]),_t.clip(),_t.endPath()}setFillAndStrokeStyleToContext(_t,xt,St){const At=_t.ctx,bt=_t.current;switch(xt){case mt.COLORED:const Et=this.ctx;At.fillStyle=Et.fillStyle,At.strokeStyle=Et.strokeStyle,bt.fillColor=Et.fillStyle,bt.strokeColor=Et.strokeStyle;break;case mt.UNCOLORED:const wt=nt.Util.makeHexColor(St[0],St[1],St[2]);At.fillStyle=wt,At.strokeStyle=wt,bt.fillColor=wt,bt.strokeColor=wt;break;default:throw new nt.FormatError(`Unsupported paint type: ${xt}`)}}getPattern(_t,xt,St,At){let bt=St;At!==it.SHADING&&(bt=nt.Util.transform(bt,xt.baseTransform),this.matrix&&(bt=nt.Util.transform(bt,this.matrix)));const Et=this.createPatternCanvas(xt);let wt=new DOMMatrix(bt);wt=wt.translate(Et.offsetX,Et.offsetY),wt=wt.scale(1/Et.scaleX,1/Et.scaleY);const Rt=_t.createPattern(Et.canvas,"repeat");return Rt.setTransform(wt),Rt}};to(vt,"MAX_PATTERN_SIZE",3e3);let yt=vt;_.TilingPattern=yt},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.convertBlackAndWhiteToRGBA=it,_.convertToRGBA=rt,_.grayToRGBA=ot;var nt=tt(1);function rt(at){switch(at.kind){case nt.ImageKind.GRAYSCALE_1BPP:return it(at);case nt.ImageKind.RGB_24BPP:return st(at)}return null}function it({src:at,srcPos:lt=0,dest:ct,width:ut,height:dt,nonBlackColor:ht=4294967295,inverseDecode:mt=!1}){const yt=nt.FeatureTest.isLittleEndian?4278190080:255,[vt,pt]=mt?[ht,yt]:[yt,ht],_t=ut>>3,xt=ut&7,St=at.length;ct=new Uint32Array(ct.buffer);let At=0;for(let bt=0;bt<dt;bt++){for(const wt=lt+_t;lt<wt;lt++){const Rt=lt<St?at[lt]:255;ct[At++]=Rt&128?pt:vt,ct[At++]=Rt&64?pt:vt,ct[At++]=Rt&32?pt:vt,ct[At++]=Rt&16?pt:vt,ct[At++]=Rt&8?pt:vt,ct[At++]=Rt&4?pt:vt,ct[At++]=Rt&2?pt:vt,ct[At++]=Rt&1?pt:vt}if(xt===0)continue;const Et=lt<St?at[lt++]:255;for(let wt=0;wt<xt;wt++)ct[At++]=Et&1<<7-wt?pt:vt}return{srcPos:lt,destPos:At}}function st({src:at,srcPos:lt=0,dest:ct,destPos:ut=0,width:dt,height:ht}){let mt=0;const yt=at.length>>2,vt=new Uint32Array(at.buffer,lt,yt);if(nt.FeatureTest.isLittleEndian){for(;mt<yt-2;mt+=3,ut+=4){const pt=vt[mt],_t=vt[mt+1],xt=vt[mt+2];ct[ut]=pt|4278190080,ct[ut+1]=pt>>>24|_t<<8|4278190080,ct[ut+2]=_t>>>16|xt<<16|4278190080,ct[ut+3]=xt>>>8|4278190080}for(let pt=mt*4,_t=at.length;pt<_t;pt+=3)ct[ut++]=at[pt]|at[pt+1]<<8|at[pt+2]<<16|4278190080}else{for(;mt<yt-2;mt+=3,ut+=4){const pt=vt[mt],_t=vt[mt+1],xt=vt[mt+2];ct[ut]=pt|255,ct[ut+1]=pt<<24|_t>>>8|255,ct[ut+2]=_t<<16|xt>>>16|255,ct[ut+3]=xt<<8|255}for(let pt=mt*4,_t=at.length;pt<_t;pt+=3)ct[ut++]=at[pt]<<24|at[pt+1]<<16|at[pt+2]<<8|255}return{srcPos:lt,destPos:ut}}function ot(at,lt){if(nt.FeatureTest.isLittleEndian)for(let ct=0,ut=at.length;ct<ut;ct++)lt[ct]=at[ct]*65793|4278190080;else for(let ct=0,ut=at.length;ct<ut;ct++)lt[ct]=at[ct]*16843008|255}},(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlobalWorkerOptions=void 0;const tt=Object.create(null);_.GlobalWorkerOptions=tt,tt.workerPort=null,tt.workerSrc=""},(_e,_,tt)=>{var at,c0,u0,Cp;Object.defineProperty(_,"__esModule",{value:!0}),_.MessageHandler=void 0;var nt=tt(1);const rt={UNKNOWN:0,DATA:1,ERROR:2},it={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function st(dt){switch(dt instanceof Error||typeof dt=="object"&&dt!==null||(0,nt.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),dt.name){case"AbortException":return new nt.AbortException(dt.message);case"MissingPDFException":return new nt.MissingPDFException(dt.message);case"PasswordException":return new nt.PasswordException(dt.message,dt.code);case"UnexpectedResponseException":return new nt.UnexpectedResponseException(dt.message,dt.status);case"UnknownErrorException":return new nt.UnknownErrorException(dt.message,dt.details);default:return new nt.UnknownErrorException(dt.message,dt.toString())}}class ot{constructor(ht,mt,yt){nr(this,at);this.sourceName=ht,this.targetName=mt,this.comObj=yt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=vt=>{const pt=vt.data;if(pt.targetName!==this.sourceName)return;if(pt.stream){zn(this,at,u0).call(this,pt);return}if(pt.callback){const xt=pt.callbackId,St=this.callbackCapabilities[xt];if(!St)throw new Error(`Cannot resolve callback ${xt}`);if(delete this.callbackCapabilities[xt],pt.callback===rt.DATA)St.resolve(pt.data);else if(pt.callback===rt.ERROR)St.reject(st(pt.reason));else throw new Error("Unexpected callback case");return}const _t=this.actionHandler[pt.action];if(!_t)throw new Error(`Unknown action from worker: ${pt.action}`);if(pt.callbackId){const xt=this.sourceName,St=pt.sourceName;new Promise(function(At){At(_t(pt.data))}).then(function(At){yt.postMessage({sourceName:xt,targetName:St,callback:rt.DATA,callbackId:pt.callbackId,data:At})},function(At){yt.postMessage({sourceName:xt,targetName:St,callback:rt.ERROR,callbackId:pt.callbackId,reason:st(At)})});return}if(pt.streamId){zn(this,at,c0).call(this,pt);return}_t(pt.data)},yt.addEventListener("message",this._onComObjOnMessage)}on(ht,mt){const yt=this.actionHandler;if(yt[ht])throw new Error(`There is already an actionName called "${ht}"`);yt[ht]=mt}send(ht,mt,yt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,data:mt},yt)}sendWithPromise(ht,mt,yt){const vt=this.callbackId++,pt=new nt.PromiseCapability;this.callbackCapabilities[vt]=pt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,callbackId:vt,data:mt},yt)}catch(_t){pt.reject(_t)}return pt.promise}sendWithStream(ht,mt,yt,vt){const pt=this.streamId++,_t=this.sourceName,xt=this.targetName,St=this.comObj;return new ReadableStream({start:At=>{const bt=new nt.PromiseCapability;return this.streamControllers[pt]={controller:At,startCall:bt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:_t,targetName:xt,action:ht,streamId:pt,data:mt,desiredSize:At.desiredSize},vt),bt.promise},pull:At=>{const bt=new nt.PromiseCapability;return this.streamControllers[pt].pullCall=bt,St.postMessage({sourceName:_t,targetName:xt,stream:it.PULL,streamId:pt,desiredSize:At.desiredSize}),bt.promise},cancel:At=>{(0,nt.assert)(At instanceof Error,"cancel must have a valid reason");const bt=new nt.PromiseCapability;return this.streamControllers[pt].cancelCall=bt,this.streamControllers[pt].isClosed=!0,St.postMessage({sourceName:_t,targetName:xt,stream:it.CANCEL,streamId:pt,reason:st(At)}),bt.promise}},yt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}at=new WeakSet,c0=function(ht){const mt=ht.streamId,yt=this.sourceName,vt=ht.sourceName,pt=this.comObj,_t=this,xt=this.actionHandler[ht.action],St={enqueue(At,bt=1,Et){if(this.isCancelled)return;const wt=this.desiredSize;this.desiredSize-=bt,wt>0&&this.desiredSize<=0&&(this.sinkCapability=new nt.PromiseCapability,this.ready=this.sinkCapability.promise),pt.postMessage({sourceName:yt,targetName:vt,stream:it.ENQUEUE,streamId:mt,chunk:At},Et)},close(){this.isCancelled||(this.isCancelled=!0,pt.postMessage({sourceName:yt,targetName:vt,stream:it.CLOSE,streamId:mt}),delete _t.streamSinks[mt])},error(At){(0,nt.assert)(At instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,pt.postMessage({sourceName:yt,targetName:vt,stream:it.ERROR,streamId:mt,reason:st(At)}))},sinkCapability:new nt.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ht.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[mt]=St,new Promise(function(At){At(xt(ht.data,St))}).then(function(){pt.postMessage({sourceName:yt,targetName:vt,stream:it.START_COMPLETE,streamId:mt,success:!0})},function(At){pt.postMessage({sourceName:yt,targetName:vt,stream:it.START_COMPLETE,streamId:mt,reason:st(At)})})},u0=function(ht){const mt=ht.streamId,yt=this.sourceName,vt=ht.sourceName,pt=this.comObj,_t=this.streamControllers[mt],xt=this.streamSinks[mt];switch(ht.stream){case it.START_COMPLETE:ht.success?_t.startCall.resolve():_t.startCall.reject(st(ht.reason));break;case it.PULL_COMPLETE:ht.success?_t.pullCall.resolve():_t.pullCall.reject(st(ht.reason));break;case it.PULL:if(!xt){pt.postMessage({sourceName:yt,targetName:vt,stream:it.PULL_COMPLETE,streamId:mt,success:!0});break}xt.desiredSize<=0&&ht.desiredSize>0&&xt.sinkCapability.resolve(),xt.desiredSize=ht.desiredSize,new Promise(function(St){var At;St((At=xt.onPull)==null?void 0:At.call(xt))}).then(function(){pt.postMessage({sourceName:yt,targetName:vt,stream:it.PULL_COMPLETE,streamId:mt,success:!0})},function(St){pt.postMessage({sourceName:yt,targetName:vt,stream:it.PULL_COMPLETE,streamId:mt,reason:st(St)})});break;case it.ENQUEUE:if((0,nt.assert)(_t,"enqueue should have stream controller"),_t.isClosed)break;_t.controller.enqueue(ht.chunk);break;case it.CLOSE:if((0,nt.assert)(_t,"close should have stream controller"),_t.isClosed)break;_t.isClosed=!0,_t.controller.close(),zn(this,at,Cp).call(this,_t,mt);break;case it.ERROR:(0,nt.assert)(_t,"error should have stream controller"),_t.controller.error(st(ht.reason)),zn(this,at,Cp).call(this,_t,mt);break;case it.CANCEL_COMPLETE:ht.success?_t.cancelCall.resolve():_t.cancelCall.reject(st(ht.reason)),zn(this,at,Cp).call(this,_t,mt);break;case it.CANCEL:if(!xt)break;new Promise(function(St){var At;St((At=xt.onCancel)==null?void 0:At.call(xt,st(ht.reason)))}).then(function(){pt.postMessage({sourceName:yt,targetName:vt,stream:it.CANCEL_COMPLETE,streamId:mt,success:!0})},function(St){pt.postMessage({sourceName:yt,targetName:vt,stream:it.CANCEL_COMPLETE,streamId:mt,reason:st(St)})}),xt.sinkCapability.reject(st(ht.reason)),xt.isCancelled=!0,delete this.streamSinks[mt];break;default:throw new Error("Unexpected stream case")}},Cp=async function(ht,mt){var yt,vt,pt;await Promise.allSettled([(yt=ht.startCall)==null?void 0:yt.promise,(vt=ht.pullCall)==null?void 0:vt.promise,(pt=ht.cancelCall)==null?void 0:pt.promise]),delete this.streamControllers[mt]},_.MessageHandler=ot},(_e,_,tt)=>{var it,st;Object.defineProperty(_,"__esModule",{value:!0}),_.Metadata=void 0;var nt=tt(1);class rt{constructor({parsedData:at,rawData:lt}){nr(this,it);nr(this,st);rr(this,it,at),rr(this,st,lt)}getRaw(){return $t(this,st)}get(at){return $t(this,it).get(at)??null}getAll(){return(0,nt.objectFromMap)($t(this,it))}has(at){return $t(this,it).has(at)}}it=new WeakMap,st=new WeakMap,_.Metadata=rt},(_e,_,tt)=>{var at,lt,ct,ut,dt,ht,Pm;Object.defineProperty(_,"__esModule",{value:!0}),_.OptionalContentConfig=void 0;var nt=tt(1),rt=tt(8);const it=Symbol("INTERNAL");class st{constructor(vt,pt){nr(this,at,!0);this.name=vt,this.intent=pt}get visible(){return $t(this,at)}_setVisible(vt,pt){vt!==it&&(0,nt.unreachable)("Internal method `_setVisible` called."),rr(this,at,pt)}}at=new WeakMap;class ot{constructor(vt){nr(this,ht);nr(this,lt,null);nr(this,ct,new Map);nr(this,ut,null);nr(this,dt,null);if(this.name=null,this.creator=null,vt!==null){this.name=vt.name,this.creator=vt.creator,rr(this,dt,vt.order);for(const pt of vt.groups)$t(this,ct).set(pt.id,new st(pt.name,pt.intent));if(vt.baseState==="OFF")for(const pt of $t(this,ct).values())pt._setVisible(it,!1);for(const pt of vt.on)$t(this,ct).get(pt)._setVisible(it,!0);for(const pt of vt.off)$t(this,ct).get(pt)._setVisible(it,!1);rr(this,ut,this.getHash())}}isVisible(vt){if($t(this,ct).size===0)return!0;if(!vt)return(0,nt.warn)("Optional content group not defined."),!0;if(vt.type==="OCG")return $t(this,ct).has(vt.id)?$t(this,ct).get(vt.id).visible:((0,nt.warn)(`Optional content group not found: ${vt.id}`),!0);if(vt.type==="OCMD"){if(vt.expression)return zn(this,ht,Pm).call(this,vt.expression);if(!vt.policy||vt.policy==="AnyOn"){for(const pt of vt.ids){if(!$t(this,ct).has(pt))return(0,nt.warn)(`Optional content group not found: ${pt}`),!0;if($t(this,ct).get(pt).visible)return!0}return!1}else if(vt.policy==="AllOn"){for(const pt of vt.ids){if(!$t(this,ct).has(pt))return(0,nt.warn)(`Optional content group not found: ${pt}`),!0;if(!$t(this,ct).get(pt).visible)return!1}return!0}else if(vt.policy==="AnyOff"){for(const pt of vt.ids){if(!$t(this,ct).has(pt))return(0,nt.warn)(`Optional content group not found: ${pt}`),!0;if(!$t(this,ct).get(pt).visible)return!0}return!1}else if(vt.policy==="AllOff"){for(const pt of vt.ids){if(!$t(this,ct).has(pt))return(0,nt.warn)(`Optional content group not found: ${pt}`),!0;if($t(this,ct).get(pt).visible)return!1}return!0}return(0,nt.warn)(`Unknown optional content policy ${vt.policy}.`),!0}return(0,nt.warn)(`Unknown group type ${vt.type}.`),!0}setVisibility(vt,pt=!0){if(!$t(this,ct).has(vt)){(0,nt.warn)(`Optional content group not found: ${vt}`);return}$t(this,ct).get(vt)._setVisible(it,!!pt),rr(this,lt,null)}get hasInitialVisibility(){return $t(this,ut)===null||this.getHash()===$t(this,ut)}getOrder(){return $t(this,ct).size?$t(this,dt)?$t(this,dt).slice():[...$t(this,ct).keys()]:null}getGroups(){return $t(this,ct).size>0?(0,nt.objectFromMap)($t(this,ct)):null}getGroup(vt){return $t(this,ct).get(vt)||null}getHash(){if($t(this,lt)!==null)return $t(this,lt);const vt=new rt.MurmurHash3_64;for(const[pt,_t]of $t(this,ct))vt.update(`${pt}:${_t.visible}`);return rr(this,lt,vt.hexdigest())}}lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakSet,Pm=function(vt){const pt=vt.length;if(pt<2)return!0;const _t=vt[0];for(let xt=1;xt<pt;xt++){const St=vt[xt];let At;if(Array.isArray(St))At=zn(this,ht,Pm).call(this,St);else if($t(this,ct).has(St))At=$t(this,ct).get(St).visible;else return(0,nt.warn)(`Optional content group not found: ${St}`),!0;switch(_t){case"And":if(!At)return!1;break;case"Or":if(At)return!0;break;case"Not":return!At;default:return!0}}return _t==="And"},_.OptionalContentConfig=ot},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFDataTransportStream=void 0;var nt=tt(1),rt=tt(6);class it{constructor({length:lt,initialData:ct,progressiveDone:ut=!1,contentDispositionFilename:dt=null,disableRange:ht=!1,disableStream:mt=!1},yt){if((0,nt.assert)(yt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ut,this._contentDispositionFilename=dt,(ct==null?void 0:ct.length)>0){const vt=ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength?ct.buffer:new Uint8Array(ct).buffer;this._queuedChunks.push(vt)}this._pdfDataRangeTransport=yt,this._isStreamingSupported=!mt,this._isRangeSupported=!ht,this._contentLength=lt,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((vt,pt)=>{this._onReceiveData({begin:vt,chunk:pt})}),this._pdfDataRangeTransport.addProgressListener((vt,pt)=>{this._onProgress({loaded:vt,total:pt})}),this._pdfDataRangeTransport.addProgressiveReadListener(vt=>{this._onReceiveData({chunk:vt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:lt,chunk:ct}){const ut=ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength?ct.buffer:new Uint8Array(ct).buffer;if(lt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ut):this._queuedChunks.push(ut);else{const dt=this._rangeReaders.some(function(ht){return ht._begin!==lt?!1:(ht._enqueue(ut),!0)});(0,nt.assert)(dt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var lt;return((lt=this._fullRequestReader)==null?void 0:lt._loaded)??0}_onProgress(lt){var ct,ut,dt,ht;lt.total===void 0?(ut=(ct=this._rangeReaders[0])==null?void 0:ct.onProgress)==null||ut.call(ct,{loaded:lt.loaded}):(ht=(dt=this._fullRequestReader)==null?void 0:dt.onProgress)==null||ht.call(dt,{loaded:lt.loaded,total:lt.total})}_onProgressiveDone(){var lt;(lt=this._fullRequestReader)==null||lt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(lt){const ct=this._rangeReaders.indexOf(lt);ct>=0&&this._rangeReaders.splice(ct,1)}getFullReader(){(0,nt.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const lt=this._queuedChunks;return this._queuedChunks=null,new st(this,lt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(lt,ct){if(ct<=this._progressiveDataLength)return null;const ut=new ot(this,lt,ct);return this._pdfDataRangeTransport.requestDataRange(lt,ct),this._rangeReaders.push(ut),ut}cancelAllRequests(lt){var ct;(ct=this._fullRequestReader)==null||ct.cancel(lt);for(const ut of this._rangeReaders.slice(0))ut.cancel(lt);this._pdfDataRangeTransport.abort()}}_.PDFDataTransportStream=it;class st{constructor(lt,ct,ut=!1,dt=null){this._stream=lt,this._done=ut||!1,this._filename=(0,rt.isPdfFile)(dt)?dt:null,this._queuedChunks=ct||[],this._loaded=0;for(const ht of this._queuedChunks)this._loaded+=ht.byteLength;this._requests=[],this._headersReady=Promise.resolve(),lt._fullRequestReader=this,this.onProgress=null}_enqueue(lt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:lt,done:!1}):this._queuedChunks.push(lt),this._loaded+=lt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const lt=new nt.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const ct of this._requests)ct.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ot{constructor(lt,ct,ut){this._stream=lt,this._begin=ct,this._end=ut,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(lt){if(!this._done){if(this._requests.length===0)this._queuedChunk=lt;else{this._requests.shift().resolve({value:lt,done:!1});for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ct=this._queuedChunk;return this._queuedChunk=null,{value:ct,done:!1}}if(this._done)return{value:void 0,done:!0};const lt=new nt.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const ct of this._requests)ct.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFetchStream=void 0;var nt=tt(1),rt=tt(20);function it(ut,dt,ht){return{method:"GET",headers:ut,signal:ht.signal,mode:"cors",credentials:dt?"include":"same-origin",redirect:"follow"}}function st(ut){const dt=new Headers;for(const ht in ut){const mt=ut[ht];mt!==void 0&&dt.append(ht,mt)}return dt}function ot(ut){return ut instanceof Uint8Array?ut.buffer:ut instanceof ArrayBuffer?ut:((0,nt.warn)(`getArrayBuffer - unexpected data format: ${ut}`),new Uint8Array(ut).buffer)}class at{constructor(dt){this.source=dt,this.isHttp=/^https?:/i.test(dt.url),this.httpHeaders=this.isHttp&&dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return(0,nt.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lt(this),this._fullRequestReader}getRangeReader(dt,ht){if(ht<=this._progressiveDataLength)return null;const mt=new ct(this,dt,ht);return this._rangeRequestReaders.push(mt),mt}cancelAllRequests(dt){var ht;(ht=this._fullRequestReader)==null||ht.cancel(dt);for(const mt of this._rangeRequestReaders.slice(0))mt.cancel(dt)}}_.PDFFetchStream=at;class lt{constructor(dt){this._stream=dt,this._reader=null,this._loaded=0,this._filename=null;const ht=dt.source;this._withCredentials=ht.withCredentials||!1,this._contentLength=ht.length,this._headersCapability=new nt.PromiseCapability,this._disableRange=ht.disableRange||!1,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ht.disableStream,this._isRangeSupported=!ht.disableRange,this._headers=st(this._stream.httpHeaders);const mt=ht.url;fetch(mt,it(this._headers,this._withCredentials,this._abortController)).then(yt=>{if(!(0,rt.validateResponseStatus)(yt.status))throw(0,rt.createResponseStatusError)(yt.status,mt);this._reader=yt.body.getReader(),this._headersCapability.resolve();const vt=xt=>yt.headers.get(xt),{allowRangeRequests:pt,suggestedLength:_t}=(0,rt.validateRangeRequestCapabilities)({getResponseHeader:vt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=pt,this._contentLength=_t||this._contentLength,this._filename=(0,rt.extractFilenameFromHeader)(vt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nt.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var mt;await this._headersCapability.promise;const{value:dt,done:ht}=await this._reader.read();return ht?{value:dt,done:ht}:(this._loaded+=dt.byteLength,(mt=this.onProgress)==null||mt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ot(dt),done:!1})}cancel(dt){var ht;(ht=this._reader)==null||ht.cancel(dt),this._abortController.abort()}}class ct{constructor(dt,ht,mt){this._stream=dt,this._reader=null,this._loaded=0;const yt=dt.source;this._withCredentials=yt.withCredentials||!1,this._readCapability=new nt.PromiseCapability,this._isStreamingSupported=!yt.disableStream,this._abortController=new AbortController,this._headers=st(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ht}-${mt-1}`);const vt=yt.url;fetch(vt,it(this._headers,this._withCredentials,this._abortController)).then(pt=>{if(!(0,rt.validateResponseStatus)(pt.status))throw(0,rt.createResponseStatusError)(pt.status,vt);this._readCapability.resolve(),this._reader=pt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var mt;await this._readCapability.promise;const{value:dt,done:ht}=await this._reader.read();return ht?{value:dt,done:ht}:(this._loaded+=dt.byteLength,(mt=this.onProgress)==null||mt.call(this,{loaded:this._loaded}),{value:ot(dt),done:!1})}cancel(dt){var ht;(ht=this._reader)==null||ht.cancel(dt),this._abortController.abort()}}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createResponseStatusError=at,_.extractFilenameFromHeader=ot,_.validateRangeRequestCapabilities=st,_.validateResponseStatus=lt;var nt=tt(1),rt=tt(21),it=tt(6);function st({getResponseHeader:ct,isHttp:ut,rangeChunkSize:dt,disableRange:ht}){const mt={allowRangeRequests:!1,suggestedLength:void 0},yt=parseInt(ct("Content-Length"),10);return!Number.isInteger(yt)||(mt.suggestedLength=yt,yt<=2*dt)||ht||!ut||ct("Accept-Ranges")!=="bytes"||(ct("Content-Encoding")||"identity")!=="identity"||(mt.allowRangeRequests=!0),mt}function ot(ct){const ut=ct("Content-Disposition");if(ut){let dt=(0,rt.getFilenameFromContentDispositionHeader)(ut);if(dt.includes("%"))try{dt=decodeURIComponent(dt)}catch{}if((0,it.isPdfFile)(dt))return dt}return null}function at(ct,ut){return ct===404||ct===0&&ut.startsWith("file:")?new nt.MissingPDFException('Missing PDF "'+ut+'".'):new nt.UnexpectedResponseException(`Unexpected server response (${ct}) while retrieving PDF "${ut}".`,ct)}function lt(ct){return ct===200||ct===206}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getFilenameFromContentDispositionHeader=rt;var nt=tt(1);function rt(it){let st=!0,ot=at("filename\\*","i").exec(it);if(ot){ot=ot[1];let yt=dt(ot);return yt=unescape(yt),yt=ht(yt),yt=mt(yt),ct(yt)}if(ot=ut(it),ot){const yt=mt(ot);return ct(yt)}if(ot=at("filename","i").exec(it),ot){ot=ot[1];let yt=dt(ot);return yt=mt(yt),ct(yt)}function at(yt,vt){return new RegExp("(?:^|;)\\s*"+yt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',vt)}function lt(yt,vt){if(yt){if(!/^[\x00-\xFF]+$/.test(vt))return vt;try{const pt=new TextDecoder(yt,{fatal:!0}),_t=(0,nt.stringToBytes)(vt);vt=pt.decode(_t),st=!1}catch{}}return vt}function ct(yt){return st&&/[\x80-\xff]/.test(yt)&&(yt=lt("utf-8",yt),st&&(yt=lt("iso-8859-1",yt))),yt}function ut(yt){const vt=[];let pt;const _t=at("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(pt=_t.exec(yt))!==null;){let[,St,At,bt]=pt;if(St=parseInt(St,10),St in vt){if(St===0)break;continue}vt[St]=[At,bt]}const xt=[];for(let St=0;St<vt.length&&St in vt;++St){let[At,bt]=vt[St];bt=dt(bt),At&&(bt=unescape(bt),St===0&&(bt=ht(bt))),xt.push(bt)}return xt.join("")}function dt(yt){if(yt.startsWith('"')){const vt=yt.slice(1).split('\\"');for(let pt=0;pt<vt.length;++pt){const _t=vt[pt].indexOf('"');_t!==-1&&(vt[pt]=vt[pt].slice(0,_t),vt.length=pt+1),vt[pt]=vt[pt].replaceAll(/\\(.)/g,"$1")}yt=vt.join('"')}return yt}function ht(yt){const vt=yt.indexOf("'");if(vt===-1)return yt;const pt=yt.slice(0,vt),xt=yt.slice(vt+1).replace(/^[^']*'/,"");return lt(pt,xt)}function mt(yt){return!yt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(yt)?yt:yt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(vt,pt,_t,xt){if(_t==="q"||_t==="Q")return xt=xt.replaceAll("_"," "),xt=xt.replaceAll(/=([0-9a-fA-F]{2})/g,function(St,At){return String.fromCharCode(parseInt(At,16))}),lt(pt,xt);try{xt=atob(xt)}catch{}return lt(pt,xt)})}return""}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFNetworkStream=void 0;var nt=tt(1),rt=tt(20);const it=200,st=206;function ot(dt){const ht=dt.response;return typeof ht!="string"?ht:(0,nt.stringToBytes)(ht).buffer}class at{constructor(ht,mt={}){this.url=ht,this.isHttp=/^https?:/i.test(ht),this.httpHeaders=this.isHttp&&mt.httpHeaders||Object.create(null),this.withCredentials=mt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ht,mt,yt){const vt={begin:ht,end:mt};for(const pt in yt)vt[pt]=yt[pt];return this.request(vt)}requestFull(ht){return this.request(ht)}request(ht){const mt=new XMLHttpRequest,yt=this.currXhrId++,vt=this.pendingRequests[yt]={xhr:mt};mt.open("GET",this.url),mt.withCredentials=this.withCredentials;for(const pt in this.httpHeaders){const _t=this.httpHeaders[pt];_t!==void 0&&mt.setRequestHeader(pt,_t)}return this.isHttp&&"begin"in ht&&"end"in ht?(mt.setRequestHeader("Range",`bytes=${ht.begin}-${ht.end-1}`),vt.expectedStatus=st):vt.expectedStatus=it,mt.responseType="arraybuffer",ht.onError&&(mt.onerror=function(pt){ht.onError(mt.status)}),mt.onreadystatechange=this.onStateChange.bind(this,yt),mt.onprogress=this.onProgress.bind(this,yt),vt.onHeadersReceived=ht.onHeadersReceived,vt.onDone=ht.onDone,vt.onError=ht.onError,vt.onProgress=ht.onProgress,mt.send(null),yt}onProgress(ht,mt){var vt;const yt=this.pendingRequests[ht];yt&&((vt=yt.onProgress)==null||vt.call(yt,mt))}onStateChange(ht,mt){var St,At,bt;const yt=this.pendingRequests[ht];if(!yt)return;const vt=yt.xhr;if(vt.readyState>=2&&yt.onHeadersReceived&&(yt.onHeadersReceived(),delete yt.onHeadersReceived),vt.readyState!==4||!(ht in this.pendingRequests))return;if(delete this.pendingRequests[ht],vt.status===0&&this.isHttp){(St=yt.onError)==null||St.call(yt,vt.status);return}const pt=vt.status||it;if(!(pt===it&&yt.expectedStatus===st)&&pt!==yt.expectedStatus){(At=yt.onError)==null||At.call(yt,vt.status);return}const xt=ot(vt);if(pt===st){const Et=vt.getResponseHeader("Content-Range"),wt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Et);yt.onDone({begin:parseInt(wt[1],10),chunk:xt})}else xt?yt.onDone({begin:0,chunk:xt}):(bt=yt.onError)==null||bt.call(yt,vt.status)}getRequestXhr(ht){return this.pendingRequests[ht].xhr}isPendingRequest(ht){return ht in this.pendingRequests}abortRequest(ht){const mt=this.pendingRequests[ht].xhr;delete this.pendingRequests[ht],mt.abort()}}class lt{constructor(ht){this._source=ht,this._manager=new at(ht.url,{httpHeaders:ht.httpHeaders,withCredentials:ht.withCredentials}),this._rangeChunkSize=ht.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ht){const mt=this._rangeRequestReaders.indexOf(ht);mt>=0&&this._rangeRequestReaders.splice(mt,1)}getFullReader(){return(0,nt.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ct(this._manager,this._source),this._fullRequestReader}getRangeReader(ht,mt){const yt=new ut(this._manager,ht,mt);return yt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(yt),yt}cancelAllRequests(ht){var mt;(mt=this._fullRequestReader)==null||mt.cancel(ht);for(const yt of this._rangeRequestReaders.slice(0))yt.cancel(ht)}}_.PDFNetworkStream=lt;class ct{constructor(ht,mt){this._manager=ht;const yt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=mt.url,this._fullRequestId=ht.requestFull(yt),this._headersReceivedCapability=new nt.PromiseCapability,this._disableRange=mt.disableRange||!1,this._contentLength=mt.length,this._rangeChunkSize=mt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ht=this._fullRequestId,mt=this._manager.getRequestXhr(ht),yt=_t=>mt.getResponseHeader(_t),{allowRangeRequests:vt,suggestedLength:pt}=(0,rt.validateRangeRequestCapabilities)({getResponseHeader:yt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});vt&&(this._isRangeSupported=!0),this._contentLength=pt||this._contentLength,this._filename=(0,rt.extractFilenameFromHeader)(yt),this._isRangeSupported&&this._manager.abortRequest(ht),this._headersReceivedCapability.resolve()}_onDone(ht){if(ht&&(this._requests.length>0?this._requests.shift().resolve({value:ht.chunk,done:!1}):this._cachedChunks.push(ht.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const mt of this._requests)mt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ht){this._storedError=(0,rt.createResponseStatusError)(ht,this._url),this._headersReceivedCapability.reject(this._storedError);for(const mt of this._requests)mt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ht){var mt;(mt=this.onProgress)==null||mt.call(this,{loaded:ht.loaded,total:ht.lengthComputable?ht.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ht=new nt.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0,this._headersReceivedCapability.reject(ht);for(const mt of this._requests)mt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ut{constructor(ht,mt,yt){this._manager=ht;const vt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ht.url,this._requestId=ht.requestRange(mt,yt,vt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ht;(ht=this.onClosed)==null||ht.call(this,this)}_onDone(ht){const mt=ht.chunk;this._requests.length>0?this._requests.shift().resolve({value:mt,done:!1}):this._queuedChunk=mt,this._done=!0;for(const yt of this._requests)yt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ht){this._storedError=(0,rt.createResponseStatusError)(ht,this._url);for(const mt of this._requests)mt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ht){var mt;this.isStreamingSupported||(mt=this.onProgress)==null||mt.call(this,{loaded:ht.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const mt=this._queuedChunk;return this._queuedChunk=null,{value:mt,done:!1}}if(this._done)return{value:void 0,done:!0};const ht=new nt.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0;for(const mt of this._requests)mt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFNodeStream=void 0;var nt=tt(1),rt=tt(20);const it=/^file:\/\/\/[a-zA-Z]:\//;function st(yt){const vt=require$$5,pt=vt.parse(yt);return pt.protocol==="file:"||pt.host?pt:/^[a-z]:[/\\]/i.test(yt)?vt.parse(`file:///${yt}`):(pt.host||(pt.protocol="file:"),pt)}class ot{constructor(vt){this.source=vt,this.url=st(vt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&vt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var vt;return((vt=this._fullRequestReader)==null?void 0:vt._loaded)??0}getFullReader(){return(0,nt.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ht(this):new ut(this),this._fullRequestReader}getRangeReader(vt,pt){if(pt<=this._progressiveDataLength)return null;const _t=this.isFsUrl?new mt(this,vt,pt):new dt(this,vt,pt);return this._rangeRequestReaders.push(_t),_t}cancelAllRequests(vt){var pt;(pt=this._fullRequestReader)==null||pt.cancel(vt);for(const _t of this._rangeRequestReaders.slice(0))_t.cancel(vt)}}_.PDFNodeStream=ot;class at{constructor(vt){this._url=vt.url,this._done=!1,this._storedError=null,this.onProgress=null;const pt=vt.source;this._contentLength=pt.length,this._loaded=0,this._filename=null,this._disableRange=pt.disableRange||!1,this._rangeChunkSize=pt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!pt.disableStream,this._isRangeSupported=!pt.disableRange,this._readableStream=null,this._readCapability=new nt.PromiseCapability,this._headersCapability=new nt.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const vt=this._readableStream.read();return vt===null?(this._readCapability=new nt.PromiseCapability,this.read()):(this._loaded+=vt.length,(_t=this.onProgress)==null||_t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(vt).buffer,done:!1})}cancel(vt){if(!this._readableStream){this._error(vt);return}this._readableStream.destroy(vt)}_error(vt){this._storedError=vt,this._readCapability.resolve()}_setReadableStream(vt){this._readableStream=vt,vt.on("readable",()=>{this._readCapability.resolve()}),vt.on("end",()=>{vt.destroy(),this._done=!0,this._readCapability.resolve()}),vt.on("error",pt=>{this._error(pt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nt.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lt{constructor(vt){this._url=vt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new nt.PromiseCapability;const pt=vt.source;this._isStreamingSupported=!pt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const vt=this._readableStream.read();return vt===null?(this._readCapability=new nt.PromiseCapability,this.read()):(this._loaded+=vt.length,(_t=this.onProgress)==null||_t.call(this,{loaded:this._loaded}),{value:new Uint8Array(vt).buffer,done:!1})}cancel(vt){if(!this._readableStream){this._error(vt);return}this._readableStream.destroy(vt)}_error(vt){this._storedError=vt,this._readCapability.resolve()}_setReadableStream(vt){this._readableStream=vt,vt.on("readable",()=>{this._readCapability.resolve()}),vt.on("end",()=>{vt.destroy(),this._done=!0,this._readCapability.resolve()}),vt.on("error",pt=>{this._error(pt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function ct(yt,vt){return{protocol:yt.protocol,auth:yt.auth,host:yt.hostname,port:yt.port,path:yt.path,method:"GET",headers:vt}}class ut extends at{constructor(vt){super(vt);const pt=_t=>{if(_t.statusCode===404){const bt=new nt.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=bt,this._headersCapability.reject(bt);return}this._headersCapability.resolve(),this._setReadableStream(_t);const xt=bt=>this._readableStream.headers[bt.toLowerCase()],{allowRangeRequests:St,suggestedLength:At}=(0,rt.validateRangeRequestCapabilities)({getResponseHeader:xt,isHttp:vt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=St,this._contentLength=At||this._contentLength,this._filename=(0,rt.extractFilenameFromHeader)(xt)};if(this._request=null,this._url.protocol==="http:"){const _t=require$$5;this._request=_t.request(ct(this._url,vt.httpHeaders),pt)}else{const _t=require$$5;this._request=_t.request(ct(this._url,vt.httpHeaders),pt)}this._request.on("error",_t=>{this._storedError=_t,this._headersCapability.reject(_t)}),this._request.end()}}class dt extends lt{constructor(vt,pt,_t){super(vt),this._httpHeaders={};for(const St in vt.httpHeaders){const At=vt.httpHeaders[St];At!==void 0&&(this._httpHeaders[St]=At)}this._httpHeaders.Range=`bytes=${pt}-${_t-1}`;const xt=St=>{if(St.statusCode===404){const At=new nt.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=At;return}this._setReadableStream(St)};if(this._request=null,this._url.protocol==="http:"){const St=require$$5;this._request=St.request(ct(this._url,this._httpHeaders),xt)}else{const St=require$$5;this._request=St.request(ct(this._url,this._httpHeaders),xt)}this._request.on("error",St=>{this._storedError=St}),this._request.end()}}class ht extends at{constructor(vt){super(vt);let pt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(pt=pt.replace(/^\//,""));const _t=require$$5;_t.lstat(pt,(xt,St)=>{if(xt){xt.code==="ENOENT"&&(xt=new nt.MissingPDFException(`Missing PDF "${pt}".`)),this._storedError=xt,this._headersCapability.reject(xt);return}this._contentLength=St.size,this._setReadableStream(_t.createReadStream(pt)),this._headersCapability.resolve()})}}class mt extends lt{constructor(vt,pt,_t){super(vt);let xt=decodeURIComponent(this._url.path);it.test(this._url.href)&&(xt=xt.replace(/^\//,""));const St=require$$5;this._setReadableStream(St.createReadStream(xt,{start:pt,end:_t-1}))}}},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SVGGraphics=void 0;var nt=tt(6),rt=tt(1);const it={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},st="http://www.w3.org/XML/1998/namespace",ot="http://www.w3.org/1999/xlink",at=["butt","round","square"],lt=["miter","round","bevel"],ct=function(St,At="",bt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!bt)return URL.createObjectURL(new Blob([St],{type:At}));const Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let wt=`data:${At};base64,`;for(let Rt=0,Tt=St.length;Rt<Tt;Rt+=3){const Mt=St[Rt]&255,Lt=St[Rt+1]&255,Ft=St[Rt+2]&255,Ht=Mt>>2,Kt=(Mt&3)<<4|Lt>>4,Wt=Rt+1<Tt?(Lt&15)<<2|Ft>>6:64,Jt=Rt+2<Tt?Ft&63:64;wt+=Et[Ht]+Et[Kt]+Et[Wt]+Et[Jt]}return wt},ut=function(){const St=new Uint8Array([137,80,78,71,13,10,26,10]),At=12,bt=new Int32Array(256);for(let Ft=0;Ft<256;Ft++){let Ht=Ft;for(let Kt=0;Kt<8;Kt++)Ht=Ht&1?3988292384^Ht>>1&2147483647:Ht>>1&2147483647;bt[Ft]=Ht}function Et(Ft,Ht,Kt){let Wt=-1;for(let Jt=Ht;Jt<Kt;Jt++){const Ot=(Wt^Ft[Jt])&255,kt=bt[Ot];Wt=Wt>>>8^kt}return Wt^-1}function wt(Ft,Ht,Kt,Wt){let Jt=Wt;const Ot=Ht.length;Kt[Jt]=Ot>>24&255,Kt[Jt+1]=Ot>>16&255,Kt[Jt+2]=Ot>>8&255,Kt[Jt+3]=Ot&255,Jt+=4,Kt[Jt]=Ft.charCodeAt(0)&255,Kt[Jt+1]=Ft.charCodeAt(1)&255,Kt[Jt+2]=Ft.charCodeAt(2)&255,Kt[Jt+3]=Ft.charCodeAt(3)&255,Jt+=4,Kt.set(Ht,Jt),Jt+=Ht.length;const kt=Et(Kt,Wt+4,Jt);Kt[Jt]=kt>>24&255,Kt[Jt+1]=kt>>16&255,Kt[Jt+2]=kt>>8&255,Kt[Jt+3]=kt&255}function Rt(Ft,Ht,Kt){let Wt=1,Jt=0;for(let Ot=Ht;Ot<Kt;++Ot)Wt=(Wt+(Ft[Ot]&255))%65521,Jt=(Jt+Wt)%65521;return Jt<<16|Wt}function Tt(Ft){if(!rt.isNodeJS)return Mt(Ft);try{const Ht=parseInt(process.versions.node)>=8?Ft:Buffer.from(Ft),Kt=require$$5.deflateSync(Ht,{level:9});return Kt instanceof Uint8Array?Kt:new Uint8Array(Kt)}catch(Ht){(0,rt.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ht)}return Mt(Ft)}function Mt(Ft){let Ht=Ft.length;const Kt=65535,Wt=Math.ceil(Ht/Kt),Jt=new Uint8Array(2+Ht+Wt*5+4);let Ot=0;Jt[Ot++]=120,Jt[Ot++]=156;let kt=0;for(;Ht>Kt;)Jt[Ot++]=0,Jt[Ot++]=255,Jt[Ot++]=255,Jt[Ot++]=0,Jt[Ot++]=0,Jt.set(Ft.subarray(kt,kt+Kt),Ot),Ot+=Kt,kt+=Kt,Ht-=Kt;Jt[Ot++]=1,Jt[Ot++]=Ht&255,Jt[Ot++]=Ht>>8&255,Jt[Ot++]=~Ht&65535&255,Jt[Ot++]=(~Ht&65535)>>8&255,Jt.set(Ft.subarray(kt),Ot),Ot+=Ft.length-kt;const Gt=Rt(Ft,0,Ft.length);return Jt[Ot++]=Gt>>24&255,Jt[Ot++]=Gt>>16&255,Jt[Ot++]=Gt>>8&255,Jt[Ot++]=Gt&255,Jt}function Lt(Ft,Ht,Kt,Wt){const Jt=Ft.width,Ot=Ft.height;let kt,Gt,zt;const Vt=Ft.data;switch(Ht){case rt.ImageKind.GRAYSCALE_1BPP:Gt=0,kt=1,zt=Jt+7>>3;break;case rt.ImageKind.RGB_24BPP:Gt=2,kt=8,zt=Jt*3;break;case rt.ImageKind.RGBA_32BPP:Gt=6,kt=8,zt=Jt*4;break;default:throw new Error("invalid format")}const Dt=new Uint8Array((1+zt)*Ot);let It=0,Ut=0;for(let En=0;En<Ot;++En)Dt[It++]=0,Dt.set(Vt.subarray(Ut,Ut+zt),It),Ut+=zt,It+=zt;if(Ht===rt.ImageKind.GRAYSCALE_1BPP&&Wt){It=0;for(let En=0;En<Ot;En++){It++;for(let fn=0;fn<zt;fn++)Dt[It++]^=255}}const Yt=new Uint8Array([Jt>>24&255,Jt>>16&255,Jt>>8&255,Jt&255,Ot>>24&255,Ot>>16&255,Ot>>8&255,Ot&255,kt,Gt,0,0,0]),qt=Tt(Dt),rn=St.length+At*3+Yt.length+qt.length,gn=new Uint8Array(rn);let An=0;return gn.set(St,An),An+=St.length,wt("IHDR",Yt,gn,An),An+=At+Yt.length,wt("IDATA",qt,gn,An),An+=At+qt.length,wt("IEND",new Uint8Array(0),gn,An),ct(gn,"image/png",Kt)}return function(Ht,Kt,Wt){const Jt=Ht.kind===void 0?rt.ImageKind.GRAYSCALE_1BPP:Ht.kind;return Lt(Ht,Jt,Kt,Wt)}}();class dt{constructor(){this.fontSizeScale=1,this.fontWeight=it.fontWeight,this.fontSize=0,this.textMatrix=rt.IDENTITY_MATRIX,this.fontMatrix=rt.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=rt.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=it.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(At,bt){this.x=At,this.y=bt}}function ht(St){let At=[];const bt=[];for(const Et of St){if(Et.fn==="save"){At.push({fnId:92,fn:"group",items:[]}),bt.push(At),At=At.at(-1).items;continue}Et.fn==="restore"?At=bt.pop():At.push(Et)}return At}function mt(St){if(Number.isInteger(St))return St.toString();const At=St.toFixed(10);let bt=At.length-1;if(At[bt]!=="0")return At;do bt--;while(At[bt]==="0");return At.substring(0,At[bt]==="."?bt:bt+1)}function yt(St){if(St[4]===0&&St[5]===0){if(St[1]===0&&St[2]===0)return St[0]===1&&St[3]===1?"":`scale(${mt(St[0])} ${mt(St[3])})`;if(St[0]===St[3]&&St[1]===-St[2]){const At=Math.acos(St[0])*180/Math.PI;return`rotate(${mt(At)})`}}else if(St[0]===1&&St[1]===0&&St[2]===0&&St[3]===1)return`translate(${mt(St[4])} ${mt(St[5])})`;return`matrix(${mt(St[0])} ${mt(St[1])} ${mt(St[2])} ${mt(St[3])} ${mt(St[4])} ${mt(St[5])})`}let vt=0,pt=0,_t=0;class xt{constructor(At,bt,Et=!1){(0,nt.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new nt.DOMSVGFactory,this.current=new dt,this.transformMatrix=rt.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=At,this.objs=bt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Et,this._operatorIdMapping=[];for(const wt in rt.OPS)this._operatorIdMapping[rt.OPS[wt]]=wt}getObject(At,bt=null){return typeof At=="string"?At.startsWith("g_")?this.commonObjs.get(At):this.objs.get(At):bt}save(){this.transformStack.push(this.transformMatrix);const At=this.current;this.extraStack.push(At),this.current=At.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(At){this.save(),this.executeOpTree(At),this.restore()}loadDependencies(At){const bt=At.fnArray,Et=At.argsArray;for(let wt=0,Rt=bt.length;wt<Rt;wt++)if(bt[wt]===rt.OPS.dependency)for(const Tt of Et[wt]){const Mt=Tt.startsWith("g_")?this.commonObjs:this.objs,Lt=new Promise(Ft=>{Mt.get(Tt,Ft)});this.current.dependencies.push(Lt)}return Promise.all(this.current.dependencies)}transform(At,bt,Et,wt,Rt,Tt){const Mt=[At,bt,Et,wt,Rt,Tt];this.transformMatrix=rt.Util.transform(this.transformMatrix,Mt),this.tgrp=null}getSVG(At,bt){this.viewport=bt;const Et=this._initialize(bt);return this.loadDependencies(At).then(()=>(this.transformMatrix=rt.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(At)),Et))}convertOpList(At){const bt=this._operatorIdMapping,Et=At.argsArray,wt=At.fnArray,Rt=[];for(let Tt=0,Mt=wt.length;Tt<Mt;Tt++){const Lt=wt[Tt];Rt.push({fnId:Lt,fn:bt[Lt],args:Et[Tt]})}return ht(Rt)}executeOpTree(At){for(const bt of At){const Et=bt.fn,wt=bt.fnId,Rt=bt.args;switch(wt|0){case rt.OPS.beginText:this.beginText();break;case rt.OPS.dependency:break;case rt.OPS.setLeading:this.setLeading(Rt);break;case rt.OPS.setLeadingMoveText:this.setLeadingMoveText(Rt[0],Rt[1]);break;case rt.OPS.setFont:this.setFont(Rt);break;case rt.OPS.showText:this.showText(Rt[0]);break;case rt.OPS.showSpacedText:this.showText(Rt[0]);break;case rt.OPS.endText:this.endText();break;case rt.OPS.moveText:this.moveText(Rt[0],Rt[1]);break;case rt.OPS.setCharSpacing:this.setCharSpacing(Rt[0]);break;case rt.OPS.setWordSpacing:this.setWordSpacing(Rt[0]);break;case rt.OPS.setHScale:this.setHScale(Rt[0]);break;case rt.OPS.setTextMatrix:this.setTextMatrix(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);break;case rt.OPS.setTextRise:this.setTextRise(Rt[0]);break;case rt.OPS.setTextRenderingMode:this.setTextRenderingMode(Rt[0]);break;case rt.OPS.setLineWidth:this.setLineWidth(Rt[0]);break;case rt.OPS.setLineJoin:this.setLineJoin(Rt[0]);break;case rt.OPS.setLineCap:this.setLineCap(Rt[0]);break;case rt.OPS.setMiterLimit:this.setMiterLimit(Rt[0]);break;case rt.OPS.setFillRGBColor:this.setFillRGBColor(Rt[0],Rt[1],Rt[2]);break;case rt.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Rt[0],Rt[1],Rt[2]);break;case rt.OPS.setStrokeColorN:this.setStrokeColorN(Rt);break;case rt.OPS.setFillColorN:this.setFillColorN(Rt);break;case rt.OPS.shadingFill:this.shadingFill(Rt[0]);break;case rt.OPS.setDash:this.setDash(Rt[0],Rt[1]);break;case rt.OPS.setRenderingIntent:this.setRenderingIntent(Rt[0]);break;case rt.OPS.setFlatness:this.setFlatness(Rt[0]);break;case rt.OPS.setGState:this.setGState(Rt[0]);break;case rt.OPS.fill:this.fill();break;case rt.OPS.eoFill:this.eoFill();break;case rt.OPS.stroke:this.stroke();break;case rt.OPS.fillStroke:this.fillStroke();break;case rt.OPS.eoFillStroke:this.eoFillStroke();break;case rt.OPS.clip:this.clip("nonzero");break;case rt.OPS.eoClip:this.clip("evenodd");break;case rt.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case rt.OPS.paintImageXObject:this.paintImageXObject(Rt[0]);break;case rt.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Rt[0]);break;case rt.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Rt[0]);break;case rt.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Rt[0],Rt[1]);break;case rt.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case rt.OPS.closePath:this.closePath();break;case rt.OPS.closeStroke:this.closeStroke();break;case rt.OPS.closeFillStroke:this.closeFillStroke();break;case rt.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case rt.OPS.nextLine:this.nextLine();break;case rt.OPS.transform:this.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);break;case rt.OPS.constructPath:this.constructPath(Rt[0],Rt[1]);break;case rt.OPS.endPath:this.endPath();break;case 92:this.group(bt.items);break;default:(0,rt.warn)(`Unimplemented operator ${Et}`);break}}}setWordSpacing(At){this.current.wordSpacing=At}setCharSpacing(At){this.current.charSpacing=At}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(At,bt,Et,wt,Rt,Tt){const Mt=this.current;Mt.textMatrix=Mt.lineMatrix=[At,bt,Et,wt,Rt,Tt],Mt.textMatrixScale=Math.hypot(At,bt),Mt.x=Mt.lineX=0,Mt.y=Mt.lineY=0,Mt.xcoords=[],Mt.ycoords=[],Mt.tspan=this.svgFactory.createElement("svg:tspan"),Mt.tspan.setAttributeNS(null,"font-family",Mt.fontFamily),Mt.tspan.setAttributeNS(null,"font-size",`${mt(Mt.fontSize)}px`),Mt.tspan.setAttributeNS(null,"y",mt(-Mt.y)),Mt.txtElement=this.svgFactory.createElement("svg:text"),Mt.txtElement.append(Mt.tspan)}beginText(){const At=this.current;At.x=At.lineX=0,At.y=At.lineY=0,At.textMatrix=rt.IDENTITY_MATRIX,At.lineMatrix=rt.IDENTITY_MATRIX,At.textMatrixScale=1,At.tspan=this.svgFactory.createElement("svg:tspan"),At.txtElement=this.svgFactory.createElement("svg:text"),At.txtgrp=this.svgFactory.createElement("svg:g"),At.xcoords=[],At.ycoords=[]}moveText(At,bt){const Et=this.current;Et.x=Et.lineX+=At,Et.y=Et.lineY+=bt,Et.xcoords=[],Et.ycoords=[],Et.tspan=this.svgFactory.createElement("svg:tspan"),Et.tspan.setAttributeNS(null,"font-family",Et.fontFamily),Et.tspan.setAttributeNS(null,"font-size",`${mt(Et.fontSize)}px`),Et.tspan.setAttributeNS(null,"y",mt(-Et.y))}showText(At){const bt=this.current,Et=bt.font,wt=bt.fontSize;if(wt===0)return;const Rt=bt.fontSizeScale,Tt=bt.charSpacing,Mt=bt.wordSpacing,Lt=bt.fontDirection,Ft=bt.textHScale*Lt,Ht=Et.vertical,Kt=Ht?1:-1,Wt=Et.defaultVMetrics,Jt=wt*bt.fontMatrix[0];let Ot=0;for(const zt of At){if(zt===null){Ot+=Lt*Mt;continue}else if(typeof zt=="number"){Ot+=Kt*zt*wt/1e3;continue}const Vt=(zt.isSpace?Mt:0)+Tt,Dt=zt.fontChar;let It,Ut,Yt=zt.width;if(Ht){let rn;const gn=zt.vmetric||Wt;rn=zt.vmetric?gn[1]:Yt*.5,rn=-rn*Jt;const An=gn[2]*Jt;Yt=gn?-gn[0]:Yt,It=rn/Rt,Ut=(Ot+An)/Rt}else It=Ot/Rt,Ut=0;(zt.isInFont||Et.missingFile)&&(bt.xcoords.push(bt.x+It),Ht&&bt.ycoords.push(-bt.y+Ut),bt.tspan.textContent+=Dt);const qt=Ht?Yt*Jt-Vt*Lt:Yt*Jt+Vt*Lt;Ot+=qt}bt.tspan.setAttributeNS(null,"x",bt.xcoords.map(mt).join(" ")),Ht?bt.tspan.setAttributeNS(null,"y",bt.ycoords.map(mt).join(" ")):bt.tspan.setAttributeNS(null,"y",mt(-bt.y)),Ht?bt.y-=Ot:bt.x+=Ot*Ft,bt.tspan.setAttributeNS(null,"font-family",bt.fontFamily),bt.tspan.setAttributeNS(null,"font-size",`${mt(bt.fontSize)}px`),bt.fontStyle!==it.fontStyle&&bt.tspan.setAttributeNS(null,"font-style",bt.fontStyle),bt.fontWeight!==it.fontWeight&&bt.tspan.setAttributeNS(null,"font-weight",bt.fontWeight);const kt=bt.textRenderingMode&rt.TextRenderingMode.FILL_STROKE_MASK;if(kt===rt.TextRenderingMode.FILL||kt===rt.TextRenderingMode.FILL_STROKE?(bt.fillColor!==it.fillColor&&bt.tspan.setAttributeNS(null,"fill",bt.fillColor),bt.fillAlpha<1&&bt.tspan.setAttributeNS(null,"fill-opacity",bt.fillAlpha)):bt.textRenderingMode===rt.TextRenderingMode.ADD_TO_PATH?bt.tspan.setAttributeNS(null,"fill","transparent"):bt.tspan.setAttributeNS(null,"fill","none"),kt===rt.TextRenderingMode.STROKE||kt===rt.TextRenderingMode.FILL_STROKE){const zt=1/(bt.textMatrixScale||1);this._setStrokeAttributes(bt.tspan,zt)}let Gt=bt.textMatrix;bt.textRise!==0&&(Gt=Gt.slice(),Gt[5]+=bt.textRise),bt.txtElement.setAttributeNS(null,"transform",`${yt(Gt)} scale(${mt(Ft)}, -1)`),bt.txtElement.setAttributeNS(st,"xml:space","preserve"),bt.txtElement.append(bt.tspan),bt.txtgrp.append(bt.txtElement),this._ensureTransformGroup().append(bt.txtElement)}setLeadingMoveText(At,bt){this.setLeading(-bt),this.moveText(At,bt)}addFontStyle(At){if(!At.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const bt=ct(At.data,At.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${At.loadedName}"; src: url(${bt}); }
`}setFont(At){const bt=this.current,Et=this.commonObjs.get(At[0]);let wt=At[1];bt.font=Et,this.embedFonts&&!Et.missingFile&&!this.embeddedFonts[Et.loadedName]&&(this.addFontStyle(Et),this.embeddedFonts[Et.loadedName]=Et),bt.fontMatrix=Et.fontMatrix||rt.FONT_IDENTITY_MATRIX;let Rt="normal";Et.black?Rt="900":Et.bold&&(Rt="bold");const Tt=Et.italic?"italic":"normal";wt<0?(wt=-wt,bt.fontDirection=-1):bt.fontDirection=1,bt.fontSize=wt,bt.fontFamily=Et.loadedName,bt.fontWeight=Rt,bt.fontStyle=Tt,bt.tspan=this.svgFactory.createElement("svg:tspan"),bt.tspan.setAttributeNS(null,"y",mt(-bt.y)),bt.xcoords=[],bt.ycoords=[]}endText(){var bt;const At=this.current;At.textRenderingMode&rt.TextRenderingMode.ADD_TO_PATH_FLAG&&((bt=At.txtElement)!=null&&bt.hasChildNodes())&&(At.element=At.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(At){At>0&&(this.current.lineWidth=At)}setLineCap(At){this.current.lineCap=at[At]}setLineJoin(At){this.current.lineJoin=lt[At]}setMiterLimit(At){this.current.miterLimit=At}setStrokeAlpha(At){this.current.strokeAlpha=At}setStrokeRGBColor(At,bt,Et){this.current.strokeColor=rt.Util.makeHexColor(At,bt,Et)}setFillAlpha(At){this.current.fillAlpha=At}setFillRGBColor(At,bt,Et){this.current.fillColor=rt.Util.makeHexColor(At,bt,Et),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(At){this.current.strokeColor=this._makeColorN_Pattern(At)}setFillColorN(At){this.current.fillColor=this._makeColorN_Pattern(At)}shadingFill(At){const{width:bt,height:Et}=this.viewport,wt=rt.Util.inverseTransform(this.transformMatrix),[Rt,Tt,Mt,Lt]=rt.Util.getAxialAlignedBoundingBox([0,0,bt,Et],wt),Ft=this.svgFactory.createElement("svg:rect");Ft.setAttributeNS(null,"x",Rt),Ft.setAttributeNS(null,"y",Tt),Ft.setAttributeNS(null,"width",Mt-Rt),Ft.setAttributeNS(null,"height",Lt-Tt),Ft.setAttributeNS(null,"fill",this._makeShadingPattern(At)),this.current.fillAlpha<1&&Ft.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Ft)}_makeColorN_Pattern(At){return At[0]==="TilingPattern"?this._makeTilingPattern(At):this._makeShadingPattern(At)}_makeTilingPattern(At){const bt=At[1],Et=At[2],wt=At[3]||rt.IDENTITY_MATRIX,[Rt,Tt,Mt,Lt]=At[4],Ft=At[5],Ht=At[6],Kt=At[7],Wt=`shading${_t++}`,[Jt,Ot,kt,Gt]=rt.Util.normalizeRect([...rt.Util.applyTransform([Rt,Tt],wt),...rt.Util.applyTransform([Mt,Lt],wt)]),[zt,Vt]=rt.Util.singularValueDecompose2dScale(wt),Dt=Ft*zt,It=Ht*Vt,Ut=this.svgFactory.createElement("svg:pattern");Ut.setAttributeNS(null,"id",Wt),Ut.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ut.setAttributeNS(null,"width",Dt),Ut.setAttributeNS(null,"height",It),Ut.setAttributeNS(null,"x",`${Jt}`),Ut.setAttributeNS(null,"y",`${Ot}`);const Yt=this.svg,qt=this.transformMatrix,rn=this.current.fillColor,gn=this.current.strokeColor,An=this.svgFactory.create(kt-Jt,Gt-Ot);if(this.svg=An,this.transformMatrix=wt,Kt===2){const En=rt.Util.makeHexColor(...bt);this.current.fillColor=En,this.current.strokeColor=En}return this.executeOpTree(this.convertOpList(Et)),this.svg=Yt,this.transformMatrix=qt,this.current.fillColor=rn,this.current.strokeColor=gn,Ut.append(An.childNodes[0]),this.defs.append(Ut),`url(#${Wt})`}_makeShadingPattern(At){switch(typeof At=="string"&&(At=this.objs.get(At)),At[0]){case"RadialAxial":const bt=`shading${_t++}`,Et=At[3];let wt;switch(At[1]){case"axial":const Rt=At[4],Tt=At[5];wt=this.svgFactory.createElement("svg:linearGradient"),wt.setAttributeNS(null,"id",bt),wt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),wt.setAttributeNS(null,"x1",Rt[0]),wt.setAttributeNS(null,"y1",Rt[1]),wt.setAttributeNS(null,"x2",Tt[0]),wt.setAttributeNS(null,"y2",Tt[1]);break;case"radial":const Mt=At[4],Lt=At[5],Ft=At[6],Ht=At[7];wt=this.svgFactory.createElement("svg:radialGradient"),wt.setAttributeNS(null,"id",bt),wt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),wt.setAttributeNS(null,"cx",Lt[0]),wt.setAttributeNS(null,"cy",Lt[1]),wt.setAttributeNS(null,"r",Ht),wt.setAttributeNS(null,"fx",Mt[0]),wt.setAttributeNS(null,"fy",Mt[1]),wt.setAttributeNS(null,"fr",Ft);break;default:throw new Error(`Unknown RadialAxial type: ${At[1]}`)}for(const Rt of Et){const Tt=this.svgFactory.createElement("svg:stop");Tt.setAttributeNS(null,"offset",Rt[0]),Tt.setAttributeNS(null,"stop-color",Rt[1]),wt.append(Tt)}return this.defs.append(wt),`url(#${bt})`;case"Mesh":return(0,rt.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${At[0]}`)}}setDash(At,bt){this.current.dashArray=At,this.current.dashPhase=bt}constructPath(At,bt){const Et=this.current;let wt=Et.x,Rt=Et.y,Tt=[],Mt=0;for(const Lt of At)switch(Lt|0){case rt.OPS.rectangle:wt=bt[Mt++],Rt=bt[Mt++];const Ft=bt[Mt++],Ht=bt[Mt++],Kt=wt+Ft,Wt=Rt+Ht;Tt.push("M",mt(wt),mt(Rt),"L",mt(Kt),mt(Rt),"L",mt(Kt),mt(Wt),"L",mt(wt),mt(Wt),"Z");break;case rt.OPS.moveTo:wt=bt[Mt++],Rt=bt[Mt++],Tt.push("M",mt(wt),mt(Rt));break;case rt.OPS.lineTo:wt=bt[Mt++],Rt=bt[Mt++],Tt.push("L",mt(wt),mt(Rt));break;case rt.OPS.curveTo:wt=bt[Mt+4],Rt=bt[Mt+5],Tt.push("C",mt(bt[Mt]),mt(bt[Mt+1]),mt(bt[Mt+2]),mt(bt[Mt+3]),mt(wt),mt(Rt)),Mt+=6;break;case rt.OPS.curveTo2:Tt.push("C",mt(wt),mt(Rt),mt(bt[Mt]),mt(bt[Mt+1]),mt(bt[Mt+2]),mt(bt[Mt+3])),wt=bt[Mt+2],Rt=bt[Mt+3],Mt+=4;break;case rt.OPS.curveTo3:wt=bt[Mt+2],Rt=bt[Mt+3],Tt.push("C",mt(bt[Mt]),mt(bt[Mt+1]),mt(wt),mt(Rt),mt(wt),mt(Rt)),Mt+=4;break;case rt.OPS.closePath:Tt.push("Z");break}Tt=Tt.join(" "),Et.path&&At.length>0&&At[0]!==rt.OPS.rectangle&&At[0]!==rt.OPS.moveTo?Tt=Et.path.getAttributeNS(null,"d")+Tt:(Et.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Et.path)),Et.path.setAttributeNS(null,"d",Tt),Et.path.setAttributeNS(null,"fill","none"),Et.element=Et.path,Et.setCurrentPoint(wt,Rt)}endPath(){const At=this.current;if(At.path=null,!this.pendingClip)return;if(!At.element){this.pendingClip=null;return}const bt=`clippath${vt++}`,Et=this.svgFactory.createElement("svg:clipPath");Et.setAttributeNS(null,"id",bt),Et.setAttributeNS(null,"transform",yt(this.transformMatrix));const wt=At.element.cloneNode(!0);if(this.pendingClip==="evenodd"?wt.setAttributeNS(null,"clip-rule","evenodd"):wt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Et.append(wt),this.defs.append(Et),At.activeClipUrl){At.clipGroup=null;for(const Rt of this.extraStack)Rt.clipGroup=null;Et.setAttributeNS(null,"clip-path",At.activeClipUrl)}At.activeClipUrl=`url(#${bt})`,this.tgrp=null}clip(At){this.pendingClip=At}closePath(){const At=this.current;if(At.path){const bt=`${At.path.getAttributeNS(null,"d")}Z`;At.path.setAttributeNS(null,"d",bt)}}setLeading(At){this.current.leading=-At}setTextRise(At){this.current.textRise=At}setTextRenderingMode(At){this.current.textRenderingMode=At}setHScale(At){this.current.textHScale=At/100}setRenderingIntent(At){}setFlatness(At){}setGState(At){for(const[bt,Et]of At)switch(bt){case"LW":this.setLineWidth(Et);break;case"LC":this.setLineCap(Et);break;case"LJ":this.setLineJoin(Et);break;case"ML":this.setMiterLimit(Et);break;case"D":this.setDash(Et[0],Et[1]);break;case"RI":this.setRenderingIntent(Et);break;case"FL":this.setFlatness(Et);break;case"Font":this.setFont(Et);break;case"CA":this.setStrokeAlpha(Et);break;case"ca":this.setFillAlpha(Et);break;default:(0,rt.warn)(`Unimplemented graphic state operator ${bt}`);break}}fill(){const At=this.current;At.element&&(At.element.setAttributeNS(null,"fill",At.fillColor),At.element.setAttributeNS(null,"fill-opacity",At.fillAlpha),this.endPath())}stroke(){const At=this.current;At.element&&(this._setStrokeAttributes(At.element),At.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(At,bt=1){const Et=this.current;let wt=Et.dashArray;bt!==1&&wt.length>0&&(wt=wt.map(function(Rt){return bt*Rt})),At.setAttributeNS(null,"stroke",Et.strokeColor),At.setAttributeNS(null,"stroke-opacity",Et.strokeAlpha),At.setAttributeNS(null,"stroke-miterlimit",mt(Et.miterLimit)),At.setAttributeNS(null,"stroke-linecap",Et.lineCap),At.setAttributeNS(null,"stroke-linejoin",Et.lineJoin),At.setAttributeNS(null,"stroke-width",mt(bt*Et.lineWidth)+"px"),At.setAttributeNS(null,"stroke-dasharray",wt.map(mt).join(" ")),At.setAttributeNS(null,"stroke-dashoffset",mt(bt*Et.dashPhase)+"px")}eoFill(){var At;(At=this.current.element)==null||At.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var At;(At=this.current.element)==null||At.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x","0"),At.setAttributeNS(null,"y","0"),At.setAttributeNS(null,"width","1px"),At.setAttributeNS(null,"height","1px"),At.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(At)}paintImageXObject(At){const bt=this.getObject(At);if(!bt){(0,rt.warn)(`Dependent image with object ID ${At} is not ready yet`);return}this.paintInlineImageXObject(bt)}paintInlineImageXObject(At,bt){const Et=At.width,wt=At.height,Rt=ut(At,this.forceDataSchema,!!bt),Tt=this.svgFactory.createElement("svg:rect");Tt.setAttributeNS(null,"x","0"),Tt.setAttributeNS(null,"y","0"),Tt.setAttributeNS(null,"width",mt(Et)),Tt.setAttributeNS(null,"height",mt(wt)),this.current.element=Tt,this.clip("nonzero");const Mt=this.svgFactory.createElement("svg:image");Mt.setAttributeNS(ot,"xlink:href",Rt),Mt.setAttributeNS(null,"x","0"),Mt.setAttributeNS(null,"y",mt(-wt)),Mt.setAttributeNS(null,"width",mt(Et)+"px"),Mt.setAttributeNS(null,"height",mt(wt)+"px"),Mt.setAttributeNS(null,"transform",`scale(${mt(1/Et)} ${mt(-1/wt)})`),bt?bt.append(Mt):this._ensureTransformGroup().append(Mt)}paintImageMaskXObject(At){const bt=this.getObject(At.data,At);if(bt.bitmap){(0,rt.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Et=this.current,wt=bt.width,Rt=bt.height,Tt=Et.fillColor;Et.maskId=`mask${pt++}`;const Mt=this.svgFactory.createElement("svg:mask");Mt.setAttributeNS(null,"id",Et.maskId);const Lt=this.svgFactory.createElement("svg:rect");Lt.setAttributeNS(null,"x","0"),Lt.setAttributeNS(null,"y","0"),Lt.setAttributeNS(null,"width",mt(wt)),Lt.setAttributeNS(null,"height",mt(Rt)),Lt.setAttributeNS(null,"fill",Tt),Lt.setAttributeNS(null,"mask",`url(#${Et.maskId})`),this.defs.append(Mt),this._ensureTransformGroup().append(Lt),this.paintInlineImageXObject(bt,Mt)}paintFormXObjectBegin(At,bt){if(Array.isArray(At)&&At.length===6&&this.transform(At[0],At[1],At[2],At[3],At[4],At[5]),bt){const Et=bt[2]-bt[0],wt=bt[3]-bt[1],Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x",bt[0]),Rt.setAttributeNS(null,"y",bt[1]),Rt.setAttributeNS(null,"width",mt(Et)),Rt.setAttributeNS(null,"height",mt(wt)),this.current.element=Rt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(At){const bt=this.svgFactory.create(At.width,At.height),Et=this.svgFactory.createElement("svg:defs");bt.append(Et),this.defs=Et;const wt=this.svgFactory.createElement("svg:g");return wt.setAttributeNS(null,"transform",yt(At.transform)),bt.append(wt),this.svg=wt,bt}_ensureClipGroup(){if(!this.current.clipGroup){const At=this.svgFactory.createElement("svg:g");At.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(At),this.current.clipGroup=At}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",yt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}_.SVGGraphics=xt},(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaText=void 0;class tt{static textContent(rt){const it=[],st={items:it,styles:Object.create(null)};function ot(at){var ut;if(!at)return;let lt=null;const ct=at.name;if(ct==="#text")lt=at.value;else if(tt.shouldBuildText(ct))(ut=at==null?void 0:at.attributes)!=null&&ut.textContent?lt=at.attributes.textContent:at.value&&(lt=at.value);else return;if(lt!==null&&it.push({str:lt}),!!at.children)for(const dt of at.children)ot(dt)}return ot(rt),st}static shouldBuildText(rt){return!(rt==="textarea"||rt==="input"||rt==="option"||rt==="select")}}_.XfaText=tt},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerRenderTask=void 0,_.renderTextLayer=yt,_.updateTextLayer=vt;var nt=tt(1),rt=tt(6);const it=1e5,st=30,ot=.8,at=new Map;function lt(pt,_t){let xt;if(_t&&nt.FeatureTest.isOffscreenCanvasSupported)xt=new OffscreenCanvas(pt,pt).getContext("2d",{alpha:!1});else{const St=document.createElement("canvas");St.width=St.height=pt,xt=St.getContext("2d",{alpha:!1})}return xt}function ct(pt,_t){const xt=at.get(pt);if(xt)return xt;const St=lt(st,_t);St.font=`${st}px ${pt}`;const At=St.measureText("");let bt=At.fontBoundingBoxAscent,Et=Math.abs(At.fontBoundingBoxDescent);if(bt){const Rt=bt/(bt+Et);return at.set(pt,Rt),St.canvas.width=St.canvas.height=0,Rt}St.strokeStyle="red",St.clearRect(0,0,st,st),St.strokeText("g",0,0);let wt=St.getImageData(0,0,st,st).data;Et=0;for(let Rt=wt.length-1-3;Rt>=0;Rt-=4)if(wt[Rt]>0){Et=Math.ceil(Rt/4/st);break}St.clearRect(0,0,st,st),St.strokeText("A",0,st),wt=St.getImageData(0,0,st,st).data,bt=0;for(let Rt=0,Tt=wt.length;Rt<Tt;Rt+=4)if(wt[Rt]>0){bt=st-Math.floor(Rt/4/st);break}if(St.canvas.width=St.canvas.height=0,bt){const Rt=bt/(bt+Et);return at.set(pt,Rt),Rt}return at.set(pt,ot),ot}function ut(pt,_t,xt){const St=document.createElement("span"),At={angle:0,canvasWidth:0,hasText:_t.str!=="",hasEOL:_t.hasEOL,fontSize:0};pt._textDivs.push(St);const bt=nt.Util.transform(pt._transform,_t.transform);let Et=Math.atan2(bt[1],bt[0]);const wt=xt[_t.fontName];wt.vertical&&(Et+=Math.PI/2);const Rt=Math.hypot(bt[2],bt[3]),Tt=Rt*ct(wt.fontFamily,pt._isOffscreenCanvasSupported);let Mt,Lt;Et===0?(Mt=bt[4],Lt=bt[5]-Tt):(Mt=bt[4]+Tt*Math.sin(Et),Lt=bt[5]-Tt*Math.cos(Et));const Ft="calc(var(--scale-factor)*",Ht=St.style;pt._container===pt._rootContainer?(Ht.left=`${(100*Mt/pt._pageWidth).toFixed(2)}%`,Ht.top=`${(100*Lt/pt._pageHeight).toFixed(2)}%`):(Ht.left=`${Ft}${Mt.toFixed(2)}px)`,Ht.top=`${Ft}${Lt.toFixed(2)}px)`),Ht.fontSize=`${Ft}${Rt.toFixed(2)}px)`,Ht.fontFamily=wt.fontFamily,At.fontSize=Rt,St.setAttribute("role","presentation"),St.textContent=_t.str,St.dir=_t.dir,pt._fontInspectorEnabled&&(St.dataset.fontName=_t.fontName),Et!==0&&(At.angle=Et*(180/Math.PI));let Kt=!1;if(_t.str.length>1)Kt=!0;else if(_t.str!==" "&&_t.transform[0]!==_t.transform[3]){const Wt=Math.abs(_t.transform[0]),Jt=Math.abs(_t.transform[3]);Wt!==Jt&&Math.max(Wt,Jt)/Math.min(Wt,Jt)>1.5&&(Kt=!0)}Kt&&(At.canvasWidth=wt.vertical?_t.height:_t.width),pt._textDivProperties.set(St,At),pt._isReadableStream&&pt._layoutText(St)}function dt(pt){const{div:_t,scale:xt,properties:St,ctx:At,prevFontSize:bt,prevFontFamily:Et}=pt,{style:wt}=_t;let Rt="";if(St.canvasWidth!==0&&St.hasText){const{fontFamily:Tt}=wt,{canvasWidth:Mt,fontSize:Lt}=St;(bt!==Lt||Et!==Tt)&&(At.font=`${Lt*xt}px ${Tt}`,pt.prevFontSize=Lt,pt.prevFontFamily=Tt);const{width:Ft}=At.measureText(_t.textContent);Ft>0&&(Rt=`scaleX(${Mt*xt/Ft})`)}St.angle!==0&&(Rt=`rotate(${St.angle}deg) ${Rt}`),Rt.length>0&&(wt.transform=Rt)}function ht(pt){if(pt._canceled)return;const _t=pt._textDivs,xt=pt._capability;if(_t.length>it){xt.resolve();return}if(!pt._isReadableStream)for(const At of _t)pt._layoutText(At);xt.resolve()}class mt{constructor({textContentSource:_t,container:xt,viewport:St,textDivs:At,textDivProperties:bt,textContentItemsStr:Et,isOffscreenCanvasSupported:wt}){var Ft;this._textContentSource=_t,this._isReadableStream=_t instanceof ReadableStream,this._container=this._rootContainer=xt,this._textDivs=At||[],this._textContentItemsStr=Et||[],this._isOffscreenCanvasSupported=wt,this._fontInspectorEnabled=!!((Ft=globalThis.FontInspector)!=null&&Ft.enabled),this._reader=null,this._textDivProperties=bt||new WeakMap,this._canceled=!1,this._capability=new nt.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:St.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:lt(0,wt)};const{pageWidth:Rt,pageHeight:Tt,pageX:Mt,pageY:Lt}=St.rawDims;this._transform=[1,0,0,-1,-Mt,Lt+Tt],this._pageWidth=Rt,this._pageHeight=Tt,(0,rt.setLayerDimensions)(xt,St),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new nt.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new nt.AbortException("TextLayer task cancelled."))}_processItems(_t,xt){for(const St of _t){if(St.str===void 0){if(St.type==="beginMarkedContentProps"||St.type==="beginMarkedContent"){const At=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),St.id!==null&&this._container.setAttribute("id",`${St.id}`),At.append(this._container)}else St.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(St.str),ut(this,St,xt)}}_layoutText(_t){const xt=this._layoutTextParams.properties=this._textDivProperties.get(_t);if(this._layoutTextParams.div=_t,dt(this._layoutTextParams),xt.hasText&&this._container.append(_t),xt.hasEOL){const St=document.createElement("br");St.setAttribute("role","presentation"),this._container.append(St)}}_render(){const _t=new nt.PromiseCapability;let xt=Object.create(null);if(this._isReadableStream){const St=()=>{this._reader.read().then(({value:At,done:bt})=>{if(bt){_t.resolve();return}Object.assign(xt,At.styles),this._processItems(At.items,xt),St()},_t.reject)};this._reader=this._textContentSource.getReader(),St()}else if(this._textContentSource){const{items:St,styles:At}=this._textContentSource;this._processItems(St,At),_t.resolve()}else throw new Error('No "textContentSource" parameter specified.');_t.promise.then(()=>{xt=null,ht(this)},this._capability.reject)}}_.TextLayerRenderTask=mt;function yt(pt){!pt.textContentSource&&(pt.textContent||pt.textContentStream)&&((0,rt.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),pt.textContentSource=pt.textContent||pt.textContentStream);const{container:_t,viewport:xt}=pt,St=getComputedStyle(_t),At=St.getPropertyValue("visibility"),bt=parseFloat(St.getPropertyValue("--scale-factor"));At==="visible"&&(!bt||Math.abs(bt-xt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Et=new mt(pt);return Et._render(),Et}function vt({container:pt,viewport:_t,textDivs:xt,textDivProperties:St,isOffscreenCanvasSupported:At,mustRotate:bt=!0,mustRescale:Et=!0}){if(bt&&(0,rt.setLayerDimensions)(pt,{rotation:_t.rotation}),Et){const wt=lt(0,At),Tt={prevFontSize:null,prevFontFamily:null,div:null,scale:_t.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:wt};for(const Mt of xt)Tt.properties=St.get(Mt),Tt.div=Mt,dt(Tt)}}},(_e,_,tt)=>{var ct,ut,dt,ht,mt,yt,vt,pt,_t,xt,St,Lm,Mp,Im,Dm;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorLayer=void 0;var nt=tt(1),rt=tt(4),it=tt(28),st=tt(33),ot=tt(6),at=tt(34);const Rt=class Rt{constructor({uiManager:Mt,pageIndex:Lt,div:Ft,accessibilityManager:Ht,annotationLayer:Kt,viewport:Wt,l10n:Jt}){nr(this,St);nr(this,ct);nr(this,ut,!1);nr(this,dt,null);nr(this,ht,this.pointerup.bind(this));nr(this,mt,this.pointerdown.bind(this));nr(this,yt,new Map);nr(this,vt,!1);nr(this,pt,!1);nr(this,_t,!1);nr(this,xt);const Ot=[it.FreeTextEditor,st.InkEditor,at.StampEditor];if(!Rt._initialized){Rt._initialized=!0;for(const kt of Ot)kt.initialize(Jt)}Mt.registerEditorTypes(Ot),rr(this,xt,Mt),this.pageIndex=Lt,this.div=Ft,rr(this,ct,Ht),rr(this,dt,Kt),this.viewport=Wt,$t(this,xt).addLayer(this)}get isEmpty(){return $t(this,yt).size===0}updateToolbar(Mt){$t(this,xt).updateToolbar(Mt)}updateMode(Mt=$t(this,xt).getMode()){zn(this,St,Dm).call(this),Mt===nt.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Mt!==nt.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Mt===nt.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Mt===nt.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Mt===nt.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Mt){if(!Mt&&$t(this,xt).getMode()!==nt.AnnotationEditorType.INK)return;if(!Mt){for(const Ft of $t(this,yt).values())if(Ft.isEmpty()){Ft.setInBackground();return}}zn(this,St,Mp).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Mt){$t(this,xt).setEditingState(Mt)}addCommands(Mt){$t(this,xt).addCommands(Mt)}enable(){this.div.style.pointerEvents="auto";const Mt=new Set;for(const Ft of $t(this,yt).values())Ft.enableEditing(),Ft.annotationElementId&&Mt.add(Ft.annotationElementId);if(!$t(this,dt))return;const Lt=$t(this,dt).getEditableAnnotations();for(const Ft of Lt){if(Ft.hide(),$t(this,xt).isDeletedAnnotationElement(Ft.data.id)||Mt.has(Ft.data.id))continue;const Ht=this.deserialize(Ft);Ht&&(this.addOrRebuild(Ht),Ht.enableEditing())}}disable(){var Lt;rr(this,_t,!0),this.div.style.pointerEvents="none";const Mt=new Set;for(const Ft of $t(this,yt).values()){if(Ft.disableEditing(),!Ft.annotationElementId||Ft.serialize()!==null){Mt.add(Ft.annotationElementId);continue}(Lt=this.getEditableAnnotation(Ft.annotationElementId))==null||Lt.show(),Ft.remove()}if($t(this,dt)){const Ft=$t(this,dt).getEditableAnnotations();for(const Ht of Ft){const{id:Kt}=Ht.data;Mt.has(Kt)||$t(this,xt).isDeletedAnnotationElement(Kt)||Ht.show()}}zn(this,St,Dm).call(this),this.isEmpty&&(this.div.hidden=!0),rr(this,_t,!1)}getEditableAnnotation(Mt){var Lt;return((Lt=$t(this,dt))==null?void 0:Lt.getEditableAnnotation(Mt))||null}setActiveEditor(Mt){$t(this,xt).getActive()!==Mt&&$t(this,xt).setActiveEditor(Mt)}enableClick(){this.div.addEventListener("pointerdown",$t(this,mt)),this.div.addEventListener("pointerup",$t(this,ht))}disableClick(){this.div.removeEventListener("pointerdown",$t(this,mt)),this.div.removeEventListener("pointerup",$t(this,ht))}attach(Mt){$t(this,yt).set(Mt.id,Mt);const{annotationElementId:Lt}=Mt;Lt&&$t(this,xt).isDeletedAnnotationElement(Lt)&&$t(this,xt).removeDeletedAnnotationElement(Mt)}detach(Mt){var Lt;$t(this,yt).delete(Mt.id),(Lt=$t(this,ct))==null||Lt.removePointerInTextLayer(Mt.contentDiv),!$t(this,_t)&&Mt.annotationElementId&&$t(this,xt).addDeletedAnnotationElement(Mt)}remove(Mt){this.detach(Mt),$t(this,xt).removeEditor(Mt),Mt.div.contains(document.activeElement)&&setTimeout(()=>{$t(this,xt).focusMainContainer()},0),Mt.div.remove(),Mt.isAttachedToDOM=!1,$t(this,pt)||this.addInkEditorIfNeeded(!1)}changeParent(Mt){var Lt;Mt.parent!==this&&(Mt.annotationElementId&&($t(this,xt).addDeletedAnnotationElement(Mt.annotationElementId),rt.AnnotationEditor.deleteAnnotationElement(Mt),Mt.annotationElementId=null),this.attach(Mt),(Lt=Mt.parent)==null||Lt.detach(Mt),Mt.setParent(this),Mt.div&&Mt.isAttachedToDOM&&(Mt.div.remove(),this.div.append(Mt.div)))}add(Mt){if(this.changeParent(Mt),$t(this,xt).addEditor(Mt),this.attach(Mt),!Mt.isAttachedToDOM){const Lt=Mt.render();this.div.append(Lt),Mt.isAttachedToDOM=!0}Mt.fixAndSetPosition(),Mt.onceAdded(),$t(this,xt).addToAnnotationStorage(Mt)}moveEditorInDOM(Mt){var Ft;if(!Mt.isAttachedToDOM)return;const{activeElement:Lt}=document;Mt.div.contains(Lt)&&(Mt._focusEventsAllowed=!1,setTimeout(()=>{Mt.div.contains(document.activeElement)?Mt._focusEventsAllowed=!0:(Mt.div.addEventListener("focusin",()=>{Mt._focusEventsAllowed=!0},{once:!0}),Lt.focus())},0)),Mt._structTreeParentId=(Ft=$t(this,ct))==null?void 0:Ft.moveElementInDOM(this.div,Mt.div,Mt.contentDiv,!0)}addOrRebuild(Mt){Mt.needsToBeRebuilt()?Mt.rebuild():this.add(Mt)}addUndoableEditor(Mt){const Lt=()=>Mt._uiManager.rebuild(Mt),Ft=()=>{Mt.remove()};this.addCommands({cmd:Lt,undo:Ft,mustExec:!1})}getNextId(){return $t(this,xt).getId()}pasteEditor(Mt,Lt){$t(this,xt).updateToolbar(Mt),$t(this,xt).updateMode(Mt);const{offsetX:Ft,offsetY:Ht}=zn(this,St,Im).call(this),Kt=this.getNextId(),Wt=zn(this,St,Lm).call(this,{parent:this,id:Kt,x:Ft,y:Ht,uiManager:$t(this,xt),isCentered:!0,...Lt});Wt&&this.add(Wt)}deserialize(Mt){switch(Mt.annotationType??Mt.annotationEditorType){case nt.AnnotationEditorType.FREETEXT:return it.FreeTextEditor.deserialize(Mt,this,$t(this,xt));case nt.AnnotationEditorType.INK:return st.InkEditor.deserialize(Mt,this,$t(this,xt));case nt.AnnotationEditorType.STAMP:return at.StampEditor.deserialize(Mt,this,$t(this,xt))}return null}addNewEditor(){zn(this,St,Mp).call(this,zn(this,St,Im).call(this),!0)}setSelected(Mt){$t(this,xt).setSelected(Mt)}toggleSelected(Mt){$t(this,xt).toggleSelected(Mt)}isSelected(Mt){return $t(this,xt).isSelected(Mt)}unselect(Mt){$t(this,xt).unselect(Mt)}pointerup(Mt){const{isMac:Lt}=nt.FeatureTest.platform;if(!(Mt.button!==0||Mt.ctrlKey&&Lt)&&Mt.target===this.div&&$t(this,vt)){if(rr(this,vt,!1),!$t(this,ut)){rr(this,ut,!0);return}if($t(this,xt).getMode()===nt.AnnotationEditorType.STAMP){$t(this,xt).unselectAll();return}zn(this,St,Mp).call(this,Mt,!1)}}pointerdown(Mt){if($t(this,vt)){rr(this,vt,!1);return}const{isMac:Lt}=nt.FeatureTest.platform;if(Mt.button!==0||Mt.ctrlKey&&Lt||Mt.target!==this.div)return;rr(this,vt,!0);const Ft=$t(this,xt).getActive();rr(this,ut,!Ft||Ft.isEmpty())}findNewParent(Mt,Lt,Ft){const Ht=$t(this,xt).findParent(Lt,Ft);return Ht===null||Ht===this?!1:(Ht.changeParent(Mt),!0)}destroy(){var Mt,Lt;((Mt=$t(this,xt).getActive())==null?void 0:Mt.parent)===this&&($t(this,xt).commitOrRemove(),$t(this,xt).setActiveEditor(null));for(const Ft of $t(this,yt).values())(Lt=$t(this,ct))==null||Lt.removePointerInTextLayer(Ft.contentDiv),Ft.setParent(null),Ft.isAttachedToDOM=!1,Ft.div.remove();this.div=null,$t(this,yt).clear(),$t(this,xt).removeLayer(this)}render({viewport:Mt}){this.viewport=Mt,(0,ot.setLayerDimensions)(this.div,Mt);for(const Lt of $t(this,xt).getEditors(this.pageIndex))this.add(Lt);this.updateMode()}update({viewport:Mt}){$t(this,xt).commitOrRemove(),this.viewport=Mt,(0,ot.setLayerDimensions)(this.div,{rotation:Mt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Mt,pageHeight:Lt}=this.viewport.rawDims;return[Mt,Lt]}};ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakMap,_t=new WeakMap,xt=new WeakMap,St=new WeakSet,Lm=function(Mt){switch($t(this,xt).getMode()){case nt.AnnotationEditorType.FREETEXT:return new it.FreeTextEditor(Mt);case nt.AnnotationEditorType.INK:return new st.InkEditor(Mt);case nt.AnnotationEditorType.STAMP:return new at.StampEditor(Mt)}return null},Mp=function(Mt,Lt){const Ft=this.getNextId(),Ht=zn(this,St,Lm).call(this,{parent:this,id:Ft,x:Mt.offsetX,y:Mt.offsetY,uiManager:$t(this,xt),isCentered:Lt});return Ht&&this.add(Ht),Ht},Im=function(){const{x:Mt,y:Lt,width:Ft,height:Ht}=this.div.getBoundingClientRect(),Kt=Math.max(0,Mt),Wt=Math.max(0,Lt),Jt=Math.min(window.innerWidth,Mt+Ft),Ot=Math.min(window.innerHeight,Lt+Ht),kt=(Kt+Jt)/2-Mt,Gt=(Wt+Ot)/2-Lt,[zt,Vt]=this.viewport.rotation%180===0?[kt,Gt]:[Gt,kt];return{offsetX:zt,offsetY:Vt}},Dm=function(){rr(this,pt,!0);for(const Mt of $t(this,yt).values())Mt.isEmpty()&&Mt.remove();rr(this,pt,!1)},to(Rt,"_initialized",!1);let lt=Rt;_.AnnotationEditorLayer=lt},(_e,_,tt)=>{var at,lt,ct,ut,dt,ht,mt,yt,vt,pt,d0,h0,f0,ju,Fm,p0,Bm;Object.defineProperty(_,"__esModule",{value:!0}),_.FreeTextEditor=void 0;var nt=tt(1),rt=tt(5),it=tt(4),st=tt(29);const Rt=class Rt extends it.AnnotationEditor{constructor(Lt){super({...Lt,name:"freeTextEditor"});nr(this,pt);nr(this,at,this.editorDivBlur.bind(this));nr(this,lt,this.editorDivFocus.bind(this));nr(this,ct,this.editorDivInput.bind(this));nr(this,ut,this.editorDivKeydown.bind(this));nr(this,dt);nr(this,ht,"");nr(this,mt,`${this.id}-editor`);nr(this,yt);nr(this,vt,null);rr(this,dt,Lt.color||Rt._defaultColor||it.AnnotationEditor._defaultLineColor),rr(this,yt,Lt.fontSize||Rt._defaultFontSize)}static get _keyboardManager(){const Lt=Rt.prototype,Ft=Wt=>Wt.isEmpty(),Ht=rt.AnnotationEditorUIManager.TRANSLATE_SMALL,Kt=rt.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,nt.shadow)(this,"_keyboardManager",new rt.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Lt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Lt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Lt._translateEmpty,{args:[-Ht,0],checker:Ft}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Lt._translateEmpty,{args:[-Kt,0],checker:Ft}],[["ArrowRight","mac+ArrowRight"],Lt._translateEmpty,{args:[Ht,0],checker:Ft}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Lt._translateEmpty,{args:[Kt,0],checker:Ft}],[["ArrowUp","mac+ArrowUp"],Lt._translateEmpty,{args:[0,-Ht],checker:Ft}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Lt._translateEmpty,{args:[0,-Kt],checker:Ft}],[["ArrowDown","mac+ArrowDown"],Lt._translateEmpty,{args:[0,Ht],checker:Ft}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Lt._translateEmpty,{args:[0,Kt],checker:Ft}]]))}static initialize(Lt){it.AnnotationEditor.initialize(Lt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ft=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ft.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Lt,Ft){switch(Lt){case nt.AnnotationEditorParamsType.FREETEXT_SIZE:Rt._defaultFontSize=Ft;break;case nt.AnnotationEditorParamsType.FREETEXT_COLOR:Rt._defaultColor=Ft;break}}updateParams(Lt,Ft){switch(Lt){case nt.AnnotationEditorParamsType.FREETEXT_SIZE:zn(this,pt,d0).call(this,Ft);break;case nt.AnnotationEditorParamsType.FREETEXT_COLOR:zn(this,pt,h0).call(this,Ft);break}}static get defaultPropertiesToUpdate(){return[[nt.AnnotationEditorParamsType.FREETEXT_SIZE,Rt._defaultFontSize],[nt.AnnotationEditorParamsType.FREETEXT_COLOR,Rt._defaultColor||it.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[nt.AnnotationEditorParamsType.FREETEXT_SIZE,$t(this,yt)],[nt.AnnotationEditorParamsType.FREETEXT_COLOR,$t(this,dt)]]}_translateEmpty(Lt,Ft){this._uiManager.translateSelectedEditors(Lt,Ft,!0)}getInitialTranslation(){const Lt=this.parentScale;return[-Rt._internalPadding*Lt,-(Rt._internalPadding+$t(this,yt))*Lt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(nt.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",$t(this,ut)),this.editorDiv.addEventListener("focus",$t(this,lt)),this.editorDiv.addEventListener("blur",$t(this,at)),this.editorDiv.addEventListener("input",$t(this,ct)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",$t(this,mt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",$t(this,ut)),this.editorDiv.removeEventListener("focus",$t(this,lt)),this.editorDiv.removeEventListener("blur",$t(this,at)),this.editorDiv.removeEventListener("input",$t(this,ct)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Lt){this._focusEventsAllowed&&(super.focusin(Lt),Lt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Lt;if(this.width){zn(this,pt,Bm).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Lt=this._initialOptions)!=null&&Lt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Lt=$t(this,ht),Ft=rr(this,ht,zn(this,pt,f0).call(this).trimEnd());if(Lt===Ft)return;const Ht=Kt=>{if(rr(this,ht,Kt),!Kt){this.remove();return}zn(this,pt,Fm).call(this),this._uiManager.rebuild(this),zn(this,pt,ju).call(this)};this.addCommands({cmd:()=>{Ht(Ft)},undo:()=>{Ht(Lt)},mustExec:!1}),zn(this,pt,ju).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Lt){this.enterInEditMode()}keydown(Lt){Lt.target===this.div&&Lt.key==="Enter"&&(this.enterInEditMode(),Lt.preventDefault())}editorDivKeydown(Lt){Rt._keyboardManager.exec(this,Lt)}editorDivFocus(Lt){this.isEditing=!0}editorDivBlur(Lt){this.isEditing=!1}editorDivInput(Lt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Lt,Ft;this.width&&(Lt=this.x,Ft=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",$t(this,mt)),this.enableEditing(),it.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Kt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("aria-label",Kt)}),it.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Kt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("default-content",Kt)}),this.editorDiv.contentEditable=!0;const{style:Ht}=this.editorDiv;if(Ht.fontSize=`calc(${$t(this,yt)}px * var(--scale-factor))`,Ht.color=$t(this,dt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,rt.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Kt,Wt]=this.parentDimensions;if(this.annotationElementId){const{position:Jt}=$t(this,vt);let[Ot,kt]=this.getInitialTranslation();[Ot,kt]=this.pageTranslationToScreen(Ot,kt);const[Gt,zt]=this.pageDimensions,[Vt,Dt]=this.pageTranslation;let It,Ut;switch(this.rotation){case 0:It=Lt+(Jt[0]-Vt)/Gt,Ut=Ft+this.height-(Jt[1]-Dt)/zt;break;case 90:It=Lt+(Jt[0]-Vt)/Gt,Ut=Ft-(Jt[1]-Dt)/zt,[Ot,kt]=[kt,-Ot];break;case 180:It=Lt-this.width+(Jt[0]-Vt)/Gt,Ut=Ft-(Jt[1]-Dt)/zt,[Ot,kt]=[-Ot,-kt];break;case 270:It=Lt+(Jt[0]-Vt-this.height*zt)/Gt,Ut=Ft+(Jt[1]-Dt-this.width*Gt)/zt,[Ot,kt]=[-kt,Ot];break}this.setAt(It*Kt,Ut*Wt,Ot,kt)}else this.setAt(Lt*Kt,Ft*Wt,this.width*Kt,this.height*Wt);zn(this,pt,Fm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Lt,Ft,Ht){let Kt=null;if(Lt instanceof st.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Jt,fontColor:Ot},rect:kt,rotation:Gt,id:zt},textContent:Vt,textPosition:Dt,parent:{page:{pageNumber:It}}}=Lt;if(!Vt||Vt.length===0)return null;Kt=Lt={annotationType:nt.AnnotationEditorType.FREETEXT,color:Array.from(Ot),fontSize:Jt,value:Vt.join(`
`),position:Dt,pageIndex:It-1,rect:kt,rotation:Gt,id:zt,deleted:!1}}const Wt=super.deserialize(Lt,Ft,Ht);return rr(Wt,yt,Lt.fontSize),rr(Wt,dt,nt.Util.makeHexColor(...Lt.color)),rr(Wt,ht,Lt.value),Wt.annotationElementId=Lt.id||null,rr(Wt,vt,Kt),Wt}serialize(Lt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ft=Rt._internalPadding*this.parentScale,Ht=this.getRect(Ft,Ft),Kt=it.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:$t(this,dt)),Wt={annotationType:nt.AnnotationEditorType.FREETEXT,color:Kt,fontSize:$t(this,yt),value:$t(this,ht),pageIndex:this.pageIndex,rect:Ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Lt?Wt:this.annotationElementId&&!zn(this,pt,p0).call(this,Wt)?null:(Wt.id=this.annotationElementId,Wt)}};at=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakSet,d0=function(Lt){const Ft=Kt=>{this.editorDiv.style.fontSize=`calc(${Kt}px * var(--scale-factor))`,this.translate(0,-(Kt-$t(this,yt))*this.parentScale),rr(this,yt,Kt),zn(this,pt,ju).call(this)},Ht=$t(this,yt);this.addCommands({cmd:()=>{Ft(Lt)},undo:()=>{Ft(Ht)},mustExec:!0,type:nt.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},h0=function(Lt){const Ft=$t(this,dt);this.addCommands({cmd:()=>{rr(this,dt,this.editorDiv.style.color=Lt)},undo:()=>{rr(this,dt,this.editorDiv.style.color=Ft)},mustExec:!0,type:nt.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f0=function(){const Lt=this.editorDiv.getElementsByTagName("div");if(Lt.length===0)return this.editorDiv.innerText;const Ft=[];for(const Ht of Lt)Ft.push(Ht.innerText.replace(/\r\n?|\n/,""));return Ft.join(`
`)},ju=function(){const[Lt,Ft]=this.parentDimensions;let Ht;if(this.isAttachedToDOM)Ht=this.div.getBoundingClientRect();else{const{currentLayer:Kt,div:Wt}=this,Jt=Wt.style.display;Wt.style.display="hidden",Kt.div.append(this.div),Ht=Wt.getBoundingClientRect(),Wt.remove(),Wt.style.display=Jt}this.rotation%180===this.parentRotation%180?(this.width=Ht.width/Lt,this.height=Ht.height/Ft):(this.width=Ht.height/Lt,this.height=Ht.width/Ft),this.fixAndSetPosition()},Fm=function(){if(this.editorDiv.replaceChildren(),!!$t(this,ht))for(const Lt of $t(this,ht).split(`
`)){const Ft=document.createElement("div");Ft.append(Lt?document.createTextNode(Lt):document.createElement("br")),this.editorDiv.append(Ft)}},p0=function(Lt){const{value:Ft,fontSize:Ht,color:Kt,rect:Wt,pageIndex:Jt}=$t(this,vt);return Lt.value!==Ft||Lt.fontSize!==Ht||Lt.rect.some((Ot,kt)=>Math.abs(Ot-Wt[kt])>=1)||Lt.color.some((Ot,kt)=>Ot!==Kt[kt])||Lt.pageIndex!==Jt},Bm=function(Lt=!1){if(!this.annotationElementId)return;if(zn(this,pt,ju).call(this),!Lt&&(this.width===0||this.height===0)){setTimeout(()=>zn(this,pt,Bm).call(this,!0),0);return}const Ft=Rt._internalPadding*this.parentScale;$t(this,vt).rect=this.getRect(Ft,Ft)},to(Rt,"_freeTextDefaultContent",""),to(Rt,"_internalPadding",0),to(Rt,"_defaultColor",null),to(Rt,"_defaultFontSize",10),to(Rt,"_type","freetext");let ot=Rt;_.FreeTextEditor=ot},(_e,_,tt)=>{var Ut,qt,hu,m0,An,En,fn,nn,Tn,Cn,vn,_n,Qt,sn,jt,Bt,hn,cn,mn,an,Hn,Pn,g0,Tp,km,Om,fr,dr,lr,Nn,bn,Rn,Sn,Nm,xn,on,Gn,Xn,v0,Um;Object.defineProperty(_,"__esModule",{value:!0}),_.StampAnnotationElement=_.InkAnnotationElement=_.FreeTextAnnotationElement=_.AnnotationLayer=void 0;var nt=tt(1),rt=tt(6),it=tt(3),st=tt(30),ot=tt(31),at=tt(32);const lt=1e3,ct=9,ut=new WeakSet;function dt(xr){return{width:xr[2]-xr[0],height:xr[3]-xr[1]}}class ht{static create(un){switch(un.data.annotationType){case nt.AnnotationType.LINK:return new yt(un);case nt.AnnotationType.TEXT:return new vt(un);case nt.AnnotationType.WIDGET:switch(un.data.fieldType){case"Tx":return new _t(un);case"Btn":return un.data.radioButton?new At(un):un.data.checkBox?new St(un):new bt(un);case"Ch":return new Et(un);case"Sig":return new xt(un)}return new pt(un);case nt.AnnotationType.POPUP:return new wt(un);case nt.AnnotationType.FREETEXT:return new Tt(un);case nt.AnnotationType.LINE:return new Mt(un);case nt.AnnotationType.SQUARE:return new Lt(un);case nt.AnnotationType.CIRCLE:return new Ft(un);case nt.AnnotationType.POLYLINE:return new Ht(un);case nt.AnnotationType.CARET:return new Wt(un);case nt.AnnotationType.INK:return new Jt(un);case nt.AnnotationType.POLYGON:return new Kt(un);case nt.AnnotationType.HIGHLIGHT:return new Ot(un);case nt.AnnotationType.UNDERLINE:return new kt(un);case nt.AnnotationType.SQUIGGLY:return new Gt(un);case nt.AnnotationType.STRIKEOUT:return new zt(un);case nt.AnnotationType.STAMP:return new Vt(un);case nt.AnnotationType.FILEATTACHMENT:return new Dt(un);default:return new mt(un)}}}const Yt=class Yt{constructor(un,{isRenderable:pn=!1,ignoreBorder:Fn=!1,createQuadrilaterals:Yn=!1}={}){nr(this,Ut,!1);this.isRenderable=pn,this.data=un.data,this.layer=un.layer,this.linkService=un.linkService,this.downloadManager=un.downloadManager,this.imageResourcesPath=un.imageResourcesPath,this.renderForms=un.renderForms,this.svgFactory=un.svgFactory,this.annotationStorage=un.annotationStorage,this.enableScripting=un.enableScripting,this.hasJSActions=un.hasJSActions,this._fieldObjects=un.fieldObjects,this.parent=un.parent,pn&&(this.container=this._createContainer(Fn)),Yn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:un,contentsObj:pn,richText:Fn}){return!!(un!=null&&un.str||pn!=null&&pn.str||Fn!=null&&Fn.str)}get hasPopupData(){return Yt._hasPopupData(this.data)}_createContainer(un){const{data:pn,parent:{page:Fn,viewport:Yn}}=this,Qn=document.createElement("section");Qn.setAttribute("data-annotation-id",pn.id),this instanceof pt||(Qn.tabIndex=lt),Qn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Qn.setAttribute("aria-haspopup","dialog"),pn.noRotate&&Qn.classList.add("norotate");const{pageWidth:ur,pageHeight:vr,pageX:Or,pageY:Fr}=Yn.rawDims;if(!pn.rect||this instanceof wt){const{rotation:en}=pn;return!pn.hasOwnCanvas&&en!==0&&this.setRotation(en,Qn),Qn}const{width:br,height:Lr}=dt(pn.rect),Ir=nt.Util.normalizeRect([pn.rect[0],Fn.view[3]-pn.rect[1]+Fn.view[1],pn.rect[2],Fn.view[3]-pn.rect[3]+Fn.view[1]]);if(!un&&pn.borderStyle.width>0){Qn.style.borderWidth=`${pn.borderStyle.width}px`;const en=pn.borderStyle.horizontalCornerRadius,dn=pn.borderStyle.verticalCornerRadius;if(en>0||dn>0){const tr=`calc(${en}px * var(--scale-factor)) / calc(${dn}px * var(--scale-factor))`;Qn.style.borderRadius=tr}else if(this instanceof At){const tr=`calc(${br}px * var(--scale-factor)) / calc(${Lr}px * var(--scale-factor))`;Qn.style.borderRadius=tr}switch(pn.borderStyle.style){case nt.AnnotationBorderStyleType.SOLID:Qn.style.borderStyle="solid";break;case nt.AnnotationBorderStyleType.DASHED:Qn.style.borderStyle="dashed";break;case nt.AnnotationBorderStyleType.BEVELED:(0,nt.warn)("Unimplemented border style: beveled");break;case nt.AnnotationBorderStyleType.INSET:(0,nt.warn)("Unimplemented border style: inset");break;case nt.AnnotationBorderStyleType.UNDERLINE:Qn.style.borderBottomStyle="solid";break}const Bn=pn.borderColor||null;Bn?(rr(this,Ut,!0),Qn.style.borderColor=nt.Util.makeHexColor(Bn[0]|0,Bn[1]|0,Bn[2]|0)):Qn.style.borderWidth=0}Qn.style.left=`${100*(Ir[0]-Or)/ur}%`,Qn.style.top=`${100*(Ir[1]-Fr)/vr}%`;const{rotation:Ur}=pn;return pn.hasOwnCanvas||Ur===0?(Qn.style.width=`${100*br/ur}%`,Qn.style.height=`${100*Lr/vr}%`):this.setRotation(Ur,Qn),Qn}setRotation(un,pn=this.container){if(!this.data.rect)return;const{pageWidth:Fn,pageHeight:Yn}=this.parent.viewport.rawDims,{width:Qn,height:ur}=dt(this.data.rect);let vr,Or;un%180===0?(vr=100*Qn/Fn,Or=100*ur/Yn):(vr=100*ur/Fn,Or=100*Qn/Yn),pn.style.width=`${vr}%`,pn.style.height=`${Or}%`,pn.setAttribute("data-main-rotation",(360-un)%360)}get _commonActions(){const un=(pn,Fn,Yn)=>{const Qn=Yn.detail[pn],ur=Qn[0],vr=Qn.slice(1);Yn.target.style[Fn]=st.ColorConverters[`${ur}_HTML`](vr),this.annotationStorage.setValue(this.data.id,{[Fn]:st.ColorConverters[`${ur}_rgb`](vr)})};return(0,nt.shadow)(this,"_commonActions",{display:pn=>{const{display:Fn}=pn.detail,Yn=Fn%2===1;this.container.style.visibility=Yn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Yn,noPrint:Fn===1||Fn===2})},print:pn=>{this.annotationStorage.setValue(this.data.id,{noPrint:!pn.detail.print})},hidden:pn=>{const{hidden:Fn}=pn.detail;this.container.style.visibility=Fn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Fn,noView:Fn})},focus:pn=>{setTimeout(()=>pn.target.focus({preventScroll:!1}),0)},userName:pn=>{pn.target.title=pn.detail.userName},readonly:pn=>{pn.target.disabled=pn.detail.readonly},required:pn=>{this._setRequired(pn.target,pn.detail.required)},bgColor:pn=>{un("bgColor","backgroundColor",pn)},fillColor:pn=>{un("fillColor","backgroundColor",pn)},fgColor:pn=>{un("fgColor","color",pn)},textColor:pn=>{un("textColor","color",pn)},borderColor:pn=>{un("borderColor","borderColor",pn)},strokeColor:pn=>{un("strokeColor","borderColor",pn)},rotation:pn=>{const Fn=pn.detail.rotation;this.setRotation(Fn),this.annotationStorage.setValue(this.data.id,{rotation:Fn})}})}_dispatchEventFromSandbox(un,pn){const Fn=this._commonActions;for(const Yn of Object.keys(pn.detail)){const Qn=un[Yn]||Fn[Yn];Qn==null||Qn(pn)}}_setDefaultPropertiesFromJS(un){if(!this.enableScripting)return;const pn=this.annotationStorage.getRawValue(this.data.id);if(!pn)return;const Fn=this._commonActions;for(const[Yn,Qn]of Object.entries(pn)){const ur=Fn[Yn];if(ur){const vr={detail:{[Yn]:Qn},target:un};ur(vr),delete pn[Yn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:un}=this.data;if(!un)return;const[pn,Fn,Yn,Qn]=this.data.rect;if(un.length===1){const[,{x:dn,y:Bn},{x:tr,y:tn}]=un[0];if(Yn===dn&&Qn===Bn&&pn===tr&&Fn===tn)return}const{style:ur}=this.container;let vr;if($t(this,Ut)){const{borderColor:dn,borderWidth:Bn}=ur;ur.borderWidth=0,vr=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${dn}" stroke-width="${Bn}">`],this.container.classList.add("hasBorder")}const Or=Yn-pn,Fr=Qn-Fn,{svgFactory:br}=this,Lr=br.createElement("svg");Lr.classList.add("quadrilateralsContainer"),Lr.setAttribute("width",0),Lr.setAttribute("height",0);const Ir=br.createElement("defs");Lr.append(Ir);const Ur=br.createElement("clipPath"),en=`clippath_${this.data.id}`;Ur.setAttribute("id",en),Ur.setAttribute("clipPathUnits","objectBoundingBox"),Ir.append(Ur);for(const[,{x:dn,y:Bn},{x:tr,y:tn}]of un){const yn=br.createElement("rect"),On=(tr-pn)/Or,kn=(Qn-Bn)/Fr,Mn=(dn-tr)/Or,ar=(Bn-tn)/Fr;yn.setAttribute("x",On),yn.setAttribute("y",kn),yn.setAttribute("width",Mn),yn.setAttribute("height",ar),Ur.append(yn),vr==null||vr.push(`<rect vector-effect="non-scaling-stroke" x="${On}" y="${kn}" width="${Mn}" height="${ar}"/>`)}$t(this,Ut)&&(vr.push("</g></svg>')"),ur.backgroundImage=vr.join("")),this.container.append(Lr),this.container.style.clipPath=`url(#${en})`}_createPopup(){const{container:un,data:pn}=this;un.setAttribute("aria-haspopup","dialog");const Fn=new wt({data:{color:pn.color,titleObj:pn.titleObj,modificationDate:pn.modificationDate,contentsObj:pn.contentsObj,richText:pn.richText,parentRect:pn.rect,borderStyle:0,id:`popup_${pn.id}`,rotation:pn.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Fn.render())}render(){(0,nt.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(un,pn=null){const Fn=[];if(this._fieldObjects){const Yn=this._fieldObjects[un];if(Yn)for(const{page:Qn,id:ur,exportValues:vr}of Yn){if(Qn===-1||ur===pn)continue;const Or=typeof vr=="string"?vr:null,Fr=document.querySelector(`[data-element-id="${ur}"]`);if(Fr&&!ut.has(Fr)){(0,nt.warn)(`_getElementsByName - element not allowed: ${ur}`);continue}Fn.push({id:ur,exportValue:Or,domElement:Fr})}return Fn}for(const Yn of document.getElementsByName(un)){const{exportValue:Qn}=Yn,ur=Yn.getAttribute("data-element-id");ur!==pn&&ut.has(Yn)&&Fn.push({id:ur,exportValue:Qn,domElement:Yn})}return Fn}show(){var un;this.container&&(this.container.hidden=!1),(un=this.popup)==null||un.maybeShow()}hide(){var un;this.container&&(this.container.hidden=!0),(un=this.popup)==null||un.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const un=this.getElementsToTriggerPopup();if(Array.isArray(un))for(const pn of un)pn.classList.add("highlightArea");else un.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:un,data:{id:pn}}=this;this.container.addEventListener("dblclick",()=>{var Fn;(Fn=this.linkService.eventBus)==null||Fn.dispatch("switchannotationeditormode",{source:this,mode:un,editId:pn})})}};Ut=new WeakMap;let mt=Yt;class yt extends mt{constructor(pn,Fn=null){super(pn,{isRenderable:!0,ignoreBorder:!!(Fn!=null&&Fn.ignoreBorder),createQuadrilaterals:!0});nr(this,qt);this.isTooltipOnly=pn.data.isTooltipOnly}render(){const{data:pn,linkService:Fn}=this,Yn=document.createElement("a");Yn.setAttribute("data-element-id",pn.id);let Qn=!1;return pn.url?(Fn.addLinkAttributes(Yn,pn.url,pn.newWindow),Qn=!0):pn.action?(this._bindNamedAction(Yn,pn.action),Qn=!0):pn.attachment?(this._bindAttachment(Yn,pn.attachment),Qn=!0):pn.setOCGState?(zn(this,qt,m0).call(this,Yn,pn.setOCGState),Qn=!0):pn.dest?(this._bindLink(Yn,pn.dest),Qn=!0):(pn.actions&&(pn.actions.Action||pn.actions["Mouse Up"]||pn.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Yn,pn),Qn=!0),pn.resetForm?(this._bindResetFormAction(Yn,pn.resetForm),Qn=!0):this.isTooltipOnly&&!Qn&&(this._bindLink(Yn,""),Qn=!0)),this.container.classList.add("linkAnnotation"),Qn&&this.container.append(Yn),this.container}_bindLink(pn,Fn){pn.href=this.linkService.getDestinationHash(Fn),pn.onclick=()=>(Fn&&this.linkService.goToDestination(Fn),!1),(Fn||Fn==="")&&zn(this,qt,hu).call(this)}_bindNamedAction(pn,Fn){pn.href=this.linkService.getAnchorUrl(""),pn.onclick=()=>(this.linkService.executeNamedAction(Fn),!1),zn(this,qt,hu).call(this)}_bindAttachment(pn,Fn){pn.href=this.linkService.getAnchorUrl(""),pn.onclick=()=>{var Yn;return(Yn=this.downloadManager)==null||Yn.openOrDownloadData(this.container,Fn.content,Fn.filename),!1},zn(this,qt,hu).call(this)}_bindJSAction(pn,Fn){pn.href=this.linkService.getAnchorUrl("");const Yn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Qn of Object.keys(Fn.actions)){const ur=Yn.get(Qn);ur&&(pn[ur]=()=>{var vr;return(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Fn.id,name:Qn}}),!1})}pn.onclick||(pn.onclick=()=>!1),zn(this,qt,hu).call(this)}_bindResetFormAction(pn,Fn){const Yn=pn.onclick;if(Yn||(pn.href=this.linkService.getAnchorUrl("")),zn(this,qt,hu).call(this),!this._fieldObjects){(0,nt.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Yn||(pn.onclick=()=>!1);return}pn.onclick=()=>{var Lr;Yn==null||Yn();const{fields:Qn,refs:ur,include:vr}=Fn,Or=[];if(Qn.length!==0||ur.length!==0){const Ir=new Set(ur);for(const Ur of Qn){const en=this._fieldObjects[Ur]||[];for(const{id:dn}of en)Ir.add(dn)}for(const Ur of Object.values(this._fieldObjects))for(const en of Ur)Ir.has(en.id)===vr&&Or.push(en)}else for(const Ir of Object.values(this._fieldObjects))Or.push(...Ir);const Fr=this.annotationStorage,br=[];for(const Ir of Or){const{id:Ur}=Ir;switch(br.push(Ur),Ir.type){case"text":{const dn=Ir.defaultValue||"";Fr.setValue(Ur,{value:dn});break}case"checkbox":case"radiobutton":{const dn=Ir.defaultValue===Ir.exportValues;Fr.setValue(Ur,{value:dn});break}case"combobox":case"listbox":{const dn=Ir.defaultValue||"";Fr.setValue(Ur,{value:dn});break}default:continue}const en=document.querySelector(`[data-element-id="${Ur}"]`);if(en){if(!ut.has(en)){(0,nt.warn)(`_bindResetFormAction - element not allowed: ${Ur}`);continue}}else continue;en.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Lr=this.linkService.eventBus)==null||Lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:br,name:"ResetForm"}})),!1}}}qt=new WeakSet,hu=function(){this.container.setAttribute("data-internal-link","")},m0=function(pn,Fn){pn.href=this.linkService.getAnchorUrl(""),pn.onclick=()=>(this.linkService.executeSetOCGState(Fn),!1),zn(this,qt,hu).call(this)};class vt extends mt{constructor(un){super(un,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const un=document.createElement("img");return un.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",un.alt="[{{type}} Annotation]",un.dataset.l10nId="text_annotation_type",un.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(un),this.container}}class pt extends mt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(un){var pn;this.data.hasOwnCanvas&&(((pn=un.previousSibling)==null?void 0:pn.nodeName)==="CANVAS"&&(un.previousSibling.hidden=!0),un.hidden=!1)}_getKeyModifier(un){const{isWin:pn,isMac:Fn}=nt.FeatureTest.platform;return pn&&un.ctrlKey||Fn&&un.metaKey}_setEventListener(un,pn,Fn,Yn,Qn){Fn.includes("mouse")?un.addEventListener(Fn,ur=>{var vr;(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Yn,value:Qn(ur),shift:ur.shiftKey,modifier:this._getKeyModifier(ur)}})}):un.addEventListener(Fn,ur=>{var vr;if(Fn==="blur"){if(!pn.focused||!ur.relatedTarget)return;pn.focused=!1}else if(Fn==="focus"){if(pn.focused)return;pn.focused=!0}Qn&&((vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Yn,value:Qn(ur)}}))})}_setEventListeners(un,pn,Fn,Yn){var Qn,ur,vr;for(const[Or,Fr]of Fn)(Fr==="Action"||(Qn=this.data.actions)!=null&&Qn[Fr])&&((Fr==="Focus"||Fr==="Blur")&&(pn||(pn={focused:!1})),this._setEventListener(un,pn,Or,Fr,Yn),Fr==="Focus"&&!((ur=this.data.actions)!=null&&ur.Blur)?this._setEventListener(un,pn,"blur","Blur",null):Fr==="Blur"&&!((vr=this.data.actions)!=null&&vr.Focus)&&this._setEventListener(un,pn,"focus","Focus",null))}_setBackgroundColor(un){const pn=this.data.backgroundColor||null;un.style.backgroundColor=pn===null?"transparent":nt.Util.makeHexColor(pn[0],pn[1],pn[2])}_setTextStyle(un){const pn=["left","center","right"],{fontColor:Fn}=this.data.defaultAppearanceData,Yn=this.data.defaultAppearanceData.fontSize||ct,Qn=un.style;let ur;const vr=2,Or=Fr=>Math.round(10*Fr)/10;if(this.data.multiLine){const Fr=Math.abs(this.data.rect[3]-this.data.rect[1]-vr),br=Math.round(Fr/(nt.LINE_FACTOR*Yn))||1,Lr=Fr/br;ur=Math.min(Yn,Or(Lr/nt.LINE_FACTOR))}else{const Fr=Math.abs(this.data.rect[3]-this.data.rect[1]-vr);ur=Math.min(Yn,Or(Fr/nt.LINE_FACTOR))}Qn.fontSize=`calc(${ur}px * var(--scale-factor))`,Qn.color=nt.Util.makeHexColor(Fn[0],Fn[1],Fn[2]),this.data.textAlignment!==null&&(Qn.textAlign=pn[this.data.textAlignment])}_setRequired(un,pn){pn?un.setAttribute("required",!0):un.removeAttribute("required"),un.setAttribute("aria-required",pn)}}class _t extends pt{constructor(un){const pn=un.renderForms||!un.data.hasAppearance&&!!un.data.fieldValue;super(un,{isRenderable:pn})}setPropertyOnSiblings(un,pn,Fn,Yn){const Qn=this.annotationStorage;for(const ur of this._getElementsByName(un.name,un.id))ur.domElement&&(ur.domElement[pn]=Fn),Qn.setValue(ur.id,{[Yn]:Fn})}render(){var Yn,Qn;const un=this.annotationStorage,pn=this.data.id;this.container.classList.add("textWidgetAnnotation");let Fn=null;if(this.renderForms){const ur=un.getValue(pn,{value:this.data.fieldValue});let vr=ur.value||"";const Or=un.getValue(pn,{charLimit:this.data.maxLen}).charLimit;Or&&vr.length>Or&&(vr=vr.slice(0,Or));let Fr=ur.formattedValue||((Yn=this.data.textContent)==null?void 0:Yn.join(`
`))||null;Fr&&this.data.comb&&(Fr=Fr.replaceAll(/\s+/g,""));const br={userValue:vr,formattedValue:Fr,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Fn=document.createElement("textarea"),Fn.textContent=Fr??vr,this.data.doNotScroll&&(Fn.style.overflowY="hidden")):(Fn=document.createElement("input"),Fn.type="text",Fn.setAttribute("value",Fr??vr),this.data.doNotScroll&&(Fn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Fn.hidden=!0),ut.add(Fn),Fn.setAttribute("data-element-id",pn),Fn.disabled=this.data.readOnly,Fn.name=this.data.fieldName,Fn.tabIndex=lt,this._setRequired(Fn,this.data.required),Or&&(Fn.maxLength=Or),Fn.addEventListener("input",Ir=>{un.setValue(pn,{value:Ir.target.value}),this.setPropertyOnSiblings(Fn,"value",Ir.target.value,"value"),br.formattedValue=null}),Fn.addEventListener("resetform",Ir=>{const Ur=this.data.defaultFieldValue??"";Fn.value=br.userValue=Ur,br.formattedValue=null});let Lr=Ir=>{const{formattedValue:Ur}=br;Ur!=null&&(Ir.target.value=Ur),Ir.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Fn.addEventListener("focus",Ur=>{if(br.focused)return;const{target:en}=Ur;br.userValue&&(en.value=br.userValue),br.lastCommittedValue=en.value,br.commitKey=1,br.focused=!0}),Fn.addEventListener("updatefromsandbox",Ur=>{this.showElementAndHideCanvas(Ur.target);const en={value(dn){br.userValue=dn.detail.value??"",un.setValue(pn,{value:br.userValue.toString()}),dn.target.value=br.userValue},formattedValue(dn){const{formattedValue:Bn}=dn.detail;br.formattedValue=Bn,Bn!=null&&dn.target!==document.activeElement&&(dn.target.value=Bn),un.setValue(pn,{formattedValue:Bn})},selRange(dn){dn.target.setSelectionRange(...dn.detail.selRange)},charLimit:dn=>{var yn;const{charLimit:Bn}=dn.detail,{target:tr}=dn;if(Bn===0){tr.removeAttribute("maxLength");return}tr.setAttribute("maxLength",Bn);let tn=br.userValue;!tn||tn.length<=Bn||(tn=tn.slice(0,Bn),tr.value=br.userValue=tn,un.setValue(pn,{value:tn}),(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pn,name:"Keystroke",value:tn,willCommit:!0,commitKey:1,selStart:tr.selectionStart,selEnd:tr.selectionEnd}}))}};this._dispatchEventFromSandbox(en,Ur)}),Fn.addEventListener("keydown",Ur=>{var Bn;br.commitKey=1;let en=-1;if(Ur.key==="Escape"?en=0:Ur.key==="Enter"&&!this.data.multiLine?en=2:Ur.key==="Tab"&&(br.commitKey=3),en===-1)return;const{value:dn}=Ur.target;br.lastCommittedValue!==dn&&(br.lastCommittedValue=dn,br.userValue=dn,(Bn=this.linkService.eventBus)==null||Bn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pn,name:"Keystroke",value:dn,willCommit:!0,commitKey:en,selStart:Ur.target.selectionStart,selEnd:Ur.target.selectionEnd}}))});const Ir=Lr;Lr=null,Fn.addEventListener("blur",Ur=>{var dn;if(!br.focused||!Ur.relatedTarget)return;br.focused=!1;const{value:en}=Ur.target;br.userValue=en,br.lastCommittedValue!==en&&((dn=this.linkService.eventBus)==null||dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pn,name:"Keystroke",value:en,willCommit:!0,commitKey:br.commitKey,selStart:Ur.target.selectionStart,selEnd:Ur.target.selectionEnd}})),Ir(Ur)}),(Qn=this.data.actions)!=null&&Qn.Keystroke&&Fn.addEventListener("beforeinput",Ur=>{var kn;br.lastCommittedValue=null;const{data:en,target:dn}=Ur,{value:Bn,selectionStart:tr,selectionEnd:tn}=dn;let yn=tr,On=tn;switch(Ur.inputType){case"deleteWordBackward":{const Mn=Bn.substring(0,tr).match(/\w*[^\w]*$/);Mn&&(yn-=Mn[0].length);break}case"deleteWordForward":{const Mn=Bn.substring(tr).match(/^[^\w]*\w*/);Mn&&(On+=Mn[0].length);break}case"deleteContentBackward":tr===tn&&(yn-=1);break;case"deleteContentForward":tr===tn&&(On+=1);break}Ur.preventDefault(),(kn=this.linkService.eventBus)==null||kn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pn,name:"Keystroke",value:Bn,change:en||"",willCommit:!1,selStart:yn,selEnd:On}})}),this._setEventListeners(Fn,br,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ur=>Ur.target.value)}if(Lr&&Fn.addEventListener("blur",Lr),this.data.comb){const Ur=(this.data.rect[2]-this.data.rect[0])/Or;Fn.classList.add("comb"),Fn.style.letterSpacing=`calc(${Ur}px * var(--scale-factor) - 1ch)`}}else Fn=document.createElement("div"),Fn.textContent=this.data.fieldValue,Fn.style.verticalAlign="middle",Fn.style.display="table-cell";return this._setTextStyle(Fn),this._setBackgroundColor(Fn),this._setDefaultPropertiesFromJS(Fn),this.container.append(Fn),this.container}}class xt extends pt{constructor(un){super(un,{isRenderable:!!un.data.hasOwnCanvas})}}class St extends pt{constructor(un){super(un,{isRenderable:un.renderForms})}render(){const un=this.annotationStorage,pn=this.data,Fn=pn.id;let Yn=un.getValue(Fn,{value:pn.exportValue===pn.fieldValue}).value;typeof Yn=="string"&&(Yn=Yn!=="Off",un.setValue(Fn,{value:Yn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Qn=document.createElement("input");return ut.add(Qn),Qn.setAttribute("data-element-id",Fn),Qn.disabled=pn.readOnly,this._setRequired(Qn,this.data.required),Qn.type="checkbox",Qn.name=pn.fieldName,Yn&&Qn.setAttribute("checked",!0),Qn.setAttribute("exportValue",pn.exportValue),Qn.tabIndex=lt,Qn.addEventListener("change",ur=>{const{name:vr,checked:Or}=ur.target;for(const Fr of this._getElementsByName(vr,Fn)){const br=Or&&Fr.exportValue===pn.exportValue;Fr.domElement&&(Fr.domElement.checked=br),un.setValue(Fr.id,{value:br})}un.setValue(Fn,{value:Or})}),Qn.addEventListener("resetform",ur=>{const vr=pn.defaultFieldValue||"Off";ur.target.checked=vr===pn.exportValue}),this.enableScripting&&this.hasJSActions&&(Qn.addEventListener("updatefromsandbox",ur=>{const vr={value(Or){Or.target.checked=Or.detail.value!=="Off",un.setValue(Fn,{value:Or.target.checked})}};this._dispatchEventFromSandbox(vr,ur)}),this._setEventListeners(Qn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ur=>ur.target.checked)),this._setBackgroundColor(Qn),this._setDefaultPropertiesFromJS(Qn),this.container.append(Qn),this.container}}class At extends pt{constructor(un){super(un,{isRenderable:un.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const un=this.annotationStorage,pn=this.data,Fn=pn.id;let Yn=un.getValue(Fn,{value:pn.fieldValue===pn.buttonValue}).value;typeof Yn=="string"&&(Yn=Yn!==pn.buttonValue,un.setValue(Fn,{value:Yn}));const Qn=document.createElement("input");if(ut.add(Qn),Qn.setAttribute("data-element-id",Fn),Qn.disabled=pn.readOnly,this._setRequired(Qn,this.data.required),Qn.type="radio",Qn.name=pn.fieldName,Yn&&Qn.setAttribute("checked",!0),Qn.tabIndex=lt,Qn.addEventListener("change",ur=>{const{name:vr,checked:Or}=ur.target;for(const Fr of this._getElementsByName(vr,Fn))un.setValue(Fr.id,{value:!1});un.setValue(Fn,{value:Or})}),Qn.addEventListener("resetform",ur=>{const vr=pn.defaultFieldValue;ur.target.checked=vr!=null&&vr===pn.buttonValue}),this.enableScripting&&this.hasJSActions){const ur=pn.buttonValue;Qn.addEventListener("updatefromsandbox",vr=>{const Or={value:Fr=>{const br=ur===Fr.detail.value;for(const Lr of this._getElementsByName(Fr.target.name)){const Ir=br&&Lr.id===Fn;Lr.domElement&&(Lr.domElement.checked=Ir),un.setValue(Lr.id,{value:Ir})}}};this._dispatchEventFromSandbox(Or,vr)}),this._setEventListeners(Qn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],vr=>vr.target.checked)}return this._setBackgroundColor(Qn),this._setDefaultPropertiesFromJS(Qn),this.container.append(Qn),this.container}}class bt extends yt{constructor(un){super(un,{ignoreBorder:un.data.hasAppearance})}render(){const un=super.render();un.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(un.title=this.data.alternativeText);const pn=un.lastChild;return this.enableScripting&&this.hasJSActions&&pn&&(this._setDefaultPropertiesFromJS(pn),pn.addEventListener("updatefromsandbox",Fn=>{this._dispatchEventFromSandbox({},Fn)})),un}}class Et extends pt{constructor(un){super(un,{isRenderable:un.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const un=this.annotationStorage,pn=this.data.id,Fn=un.getValue(pn,{value:this.data.fieldValue}),Yn=document.createElement("select");ut.add(Yn),Yn.setAttribute("data-element-id",pn),Yn.disabled=this.data.readOnly,this._setRequired(Yn,this.data.required),Yn.name=this.data.fieldName,Yn.tabIndex=lt;let Qn=this.data.combo&&this.data.options.length>0;this.data.combo||(Yn.size=this.data.options.length,this.data.multiSelect&&(Yn.multiple=!0)),Yn.addEventListener("resetform",br=>{const Lr=this.data.defaultFieldValue;for(const Ir of Yn.options)Ir.selected=Ir.value===Lr});for(const br of this.data.options){const Lr=document.createElement("option");Lr.textContent=br.displayValue,Lr.value=br.exportValue,Fn.value.includes(br.exportValue)&&(Lr.setAttribute("selected",!0),Qn=!1),Yn.append(Lr)}let ur=null;if(Qn){const br=document.createElement("option");br.value=" ",br.setAttribute("hidden",!0),br.setAttribute("selected",!0),Yn.prepend(br),ur=()=>{br.remove(),Yn.removeEventListener("input",ur),ur=null},Yn.addEventListener("input",ur)}const vr=br=>{const Lr=br?"value":"textContent",{options:Ir,multiple:Ur}=Yn;return Ur?Array.prototype.filter.call(Ir,en=>en.selected).map(en=>en[Lr]):Ir.selectedIndex===-1?null:Ir[Ir.selectedIndex][Lr]};let Or=vr(!1);const Fr=br=>{const Lr=br.target.options;return Array.prototype.map.call(Lr,Ir=>({displayValue:Ir.textContent,exportValue:Ir.value}))};return this.enableScripting&&this.hasJSActions?(Yn.addEventListener("updatefromsandbox",br=>{const Lr={value(Ir){ur==null||ur();const Ur=Ir.detail.value,en=new Set(Array.isArray(Ur)?Ur:[Ur]);for(const dn of Yn.options)dn.selected=en.has(dn.value);un.setValue(pn,{value:vr(!0)}),Or=vr(!1)},multipleSelection(Ir){Yn.multiple=!0},remove(Ir){const Ur=Yn.options,en=Ir.detail.remove;Ur[en].selected=!1,Yn.remove(en),Ur.length>0&&Array.prototype.findIndex.call(Ur,Bn=>Bn.selected)===-1&&(Ur[0].selected=!0),un.setValue(pn,{value:vr(!0),items:Fr(Ir)}),Or=vr(!1)},clear(Ir){for(;Yn.length!==0;)Yn.remove(0);un.setValue(pn,{value:null,items:[]}),Or=vr(!1)},insert(Ir){const{index:Ur,displayValue:en,exportValue:dn}=Ir.detail.insert,Bn=Yn.children[Ur],tr=document.createElement("option");tr.textContent=en,tr.value=dn,Bn?Bn.before(tr):Yn.append(tr),un.setValue(pn,{value:vr(!0),items:Fr(Ir)}),Or=vr(!1)},items(Ir){const{items:Ur}=Ir.detail;for(;Yn.length!==0;)Yn.remove(0);for(const en of Ur){const{displayValue:dn,exportValue:Bn}=en,tr=document.createElement("option");tr.textContent=dn,tr.value=Bn,Yn.append(tr)}Yn.options.length>0&&(Yn.options[0].selected=!0),un.setValue(pn,{value:vr(!0),items:Fr(Ir)}),Or=vr(!1)},indices(Ir){const Ur=new Set(Ir.detail.indices);for(const en of Ir.target.options)en.selected=Ur.has(en.index);un.setValue(pn,{value:vr(!0)}),Or=vr(!1)},editable(Ir){Ir.target.disabled=!Ir.detail.editable}};this._dispatchEventFromSandbox(Lr,br)}),Yn.addEventListener("input",br=>{var Ir;const Lr=vr(!0);un.setValue(pn,{value:Lr}),br.preventDefault(),(Ir=this.linkService.eventBus)==null||Ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pn,name:"Keystroke",value:Or,changeEx:Lr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Yn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],br=>br.target.value)):Yn.addEventListener("input",function(br){un.setValue(pn,{value:vr(!0)})}),this.data.combo&&this._setTextStyle(Yn),this._setBackgroundColor(Yn),this._setDefaultPropertiesFromJS(Yn),this.container.append(Yn),this.container}}class wt extends mt{constructor(un){const{data:pn,elements:Fn}=un;super(un,{isRenderable:mt._hasPopupData(pn)}),this.elements=Fn}render(){this.container.classList.add("popupAnnotation");const un=new Rt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),pn=[];for(const Fn of this.elements)Fn.popup=un,pn.push(Fn.data.id),Fn.addHighlightArea();return this.container.setAttribute("aria-controls",pn.map(Fn=>`${nt.AnnotationPrefix}${Fn}`).join(",")),this.container}}class Rt{constructor({container:un,color:pn,elements:Fn,titleObj:Yn,modificationDate:Qn,contentsObj:ur,richText:vr,parent:Or,rect:Fr,parentRect:br,open:Lr}){nr(this,Pn);nr(this,An,null);nr(this,En,zn(this,Pn,g0).bind(this));nr(this,fn,zn(this,Pn,Om).bind(this));nr(this,nn,zn(this,Pn,km).bind(this));nr(this,Tn,zn(this,Pn,Tp).bind(this));nr(this,Cn,null);nr(this,vn,null);nr(this,_n,null);nr(this,Qt,null);nr(this,sn,null);nr(this,jt,null);nr(this,Bt,!1);nr(this,hn,null);nr(this,cn,null);nr(this,mn,null);nr(this,an,null);nr(this,Hn,!1);var Ur;rr(this,vn,un),rr(this,an,Yn),rr(this,_n,ur),rr(this,mn,vr),rr(this,sn,Or),rr(this,Cn,pn),rr(this,cn,Fr),rr(this,jt,br),rr(this,Qt,Fn);const Ir=rt.PDFDateString.toDateObject(Qn);Ir&&rr(this,An,Or.l10n.get("annotation_date_string",{date:Ir.toLocaleDateString(),time:Ir.toLocaleTimeString()})),this.trigger=Fn.flatMap(en=>en.getElementsToTriggerPopup());for(const en of this.trigger)en.addEventListener("click",$t(this,Tn)),en.addEventListener("mouseenter",$t(this,nn)),en.addEventListener("mouseleave",$t(this,fn)),en.classList.add("popupTriggerArea");for(const en of Fn)(Ur=en.container)==null||Ur.addEventListener("keydown",$t(this,En));$t(this,vn).hidden=!0,Lr&&zn(this,Pn,Tp).call(this)}render(){if($t(this,hn))return;const{page:{view:un},viewport:{rawDims:{pageWidth:pn,pageHeight:Fn,pageX:Yn,pageY:Qn}}}=$t(this,sn),ur=rr(this,hn,document.createElement("div"));if(ur.className="popup",$t(this,Cn)){const yn=ur.style.outlineColor=nt.Util.makeHexColor(...$t(this,Cn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ur.style.backgroundColor=`color-mix(in srgb, ${yn} 30%, white)`:ur.style.backgroundColor=nt.Util.makeHexColor(...$t(this,Cn).map(kn=>Math.floor(.7*(255-kn)+kn)))}const vr=document.createElement("span");vr.className="header";const Or=document.createElement("h1");if(vr.append(Or),{dir:Or.dir,str:Or.textContent}=$t(this,an),ur.append(vr),$t(this,An)){const yn=document.createElement("span");yn.classList.add("popupDate"),$t(this,An).then(On=>{yn.textContent=On}),vr.append(yn)}const Fr=$t(this,_n),br=$t(this,mn);if(br!=null&&br.str&&(!(Fr!=null&&Fr.str)||Fr.str===br.str))at.XfaLayer.render({xfaHtml:br.html,intent:"richText",div:ur}),ur.lastChild.classList.add("richText","popupContent");else{const yn=this._formatContents(Fr);ur.append(yn)}let Lr=!!$t(this,jt),Ir=Lr?$t(this,jt):$t(this,cn);for(const yn of $t(this,Qt))if(!Ir||nt.Util.intersect(yn.data.rect,Ir)!==null){Ir=yn.data.rect,Lr=!0;break}const Ur=nt.Util.normalizeRect([Ir[0],un[3]-Ir[1]+un[1],Ir[2],un[3]-Ir[3]+un[1]]),dn=Lr?Ir[2]-Ir[0]+5:0,Bn=Ur[0]+dn,tr=Ur[1],{style:tn}=$t(this,vn);tn.left=`${100*(Bn-Yn)/pn}%`,tn.top=`${100*(tr-Qn)/Fn}%`,$t(this,vn).append(ur)}_formatContents({str:un,dir:pn}){const Fn=document.createElement("p");Fn.classList.add("popupContent"),Fn.dir=pn;const Yn=un.split(/(?:\r\n?|\n)/);for(let Qn=0,ur=Yn.length;Qn<ur;++Qn){const vr=Yn[Qn];Fn.append(document.createTextNode(vr)),Qn<ur-1&&Fn.append(document.createElement("br"))}return Fn}forceHide(){rr(this,Hn,this.isVisible),$t(this,Hn)&&($t(this,vn).hidden=!0)}maybeShow(){$t(this,Hn)&&(rr(this,Hn,!1),$t(this,vn).hidden=!1)}get isVisible(){return $t(this,vn).hidden===!1}}An=new WeakMap,En=new WeakMap,fn=new WeakMap,nn=new WeakMap,Tn=new WeakMap,Cn=new WeakMap,vn=new WeakMap,_n=new WeakMap,Qt=new WeakMap,sn=new WeakMap,jt=new WeakMap,Bt=new WeakMap,hn=new WeakMap,cn=new WeakMap,mn=new WeakMap,an=new WeakMap,Hn=new WeakMap,Pn=new WeakSet,g0=function(un){un.altKey||un.shiftKey||un.ctrlKey||un.metaKey||(un.key==="Enter"||un.key==="Escape"&&$t(this,Bt))&&zn(this,Pn,Tp).call(this)},Tp=function(){rr(this,Bt,!$t(this,Bt)),$t(this,Bt)?(zn(this,Pn,km).call(this),$t(this,vn).addEventListener("click",$t(this,Tn)),$t(this,vn).addEventListener("keydown",$t(this,En))):(zn(this,Pn,Om).call(this),$t(this,vn).removeEventListener("click",$t(this,Tn)),$t(this,vn).removeEventListener("keydown",$t(this,En)))},km=function(){$t(this,hn)||this.render(),this.isVisible?$t(this,Bt)&&$t(this,vn).classList.add("focused"):($t(this,vn).hidden=!1,$t(this,vn).style.zIndex=parseInt($t(this,vn).style.zIndex)+1e3)},Om=function(){$t(this,vn).classList.remove("focused"),!($t(this,Bt)||!this.isVisible)&&($t(this,vn).hidden=!0,$t(this,vn).style.zIndex=parseInt($t(this,vn).style.zIndex)-1e3)};class Tt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0}),this.textContent=un.data.textContent,this.textPosition=un.data.textPosition,this.annotationEditorType=nt.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const un=document.createElement("div");un.classList.add("annotationTextContent"),un.setAttribute("role","comment");for(const pn of this.textContent){const Fn=document.createElement("span");Fn.textContent=pn,un.append(Fn)}this.container.append(un)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}_.FreeTextAnnotationElement=Tt;class Mt extends mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0});nr(this,fr,null)}render(){this.container.classList.add("lineAnnotation");const pn=this.data,{width:Fn,height:Yn}=dt(pn.rect),Qn=this.svgFactory.create(Fn,Yn,!0),ur=rr(this,fr,this.svgFactory.createElement("svg:line"));return ur.setAttribute("x1",pn.rect[2]-pn.lineCoordinates[0]),ur.setAttribute("y1",pn.rect[3]-pn.lineCoordinates[1]),ur.setAttribute("x2",pn.rect[2]-pn.lineCoordinates[2]),ur.setAttribute("y2",pn.rect[3]-pn.lineCoordinates[3]),ur.setAttribute("stroke-width",pn.borderStyle.width||1),ur.setAttribute("stroke","transparent"),ur.setAttribute("fill","transparent"),Qn.append(ur),this.container.append(Qn),!pn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return $t(this,fr)}addHighlightArea(){this.container.classList.add("highlightArea")}}fr=new WeakMap;class Lt extends mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0});nr(this,dr,null)}render(){this.container.classList.add("squareAnnotation");const pn=this.data,{width:Fn,height:Yn}=dt(pn.rect),Qn=this.svgFactory.create(Fn,Yn,!0),ur=pn.borderStyle.width,vr=rr(this,dr,this.svgFactory.createElement("svg:rect"));return vr.setAttribute("x",ur/2),vr.setAttribute("y",ur/2),vr.setAttribute("width",Fn-ur),vr.setAttribute("height",Yn-ur),vr.setAttribute("stroke-width",ur||1),vr.setAttribute("stroke","transparent"),vr.setAttribute("fill","transparent"),Qn.append(vr),this.container.append(Qn),!pn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return $t(this,dr)}addHighlightArea(){this.container.classList.add("highlightArea")}}dr=new WeakMap;class Ft extends mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0});nr(this,lr,null)}render(){this.container.classList.add("circleAnnotation");const pn=this.data,{width:Fn,height:Yn}=dt(pn.rect),Qn=this.svgFactory.create(Fn,Yn,!0),ur=pn.borderStyle.width,vr=rr(this,lr,this.svgFactory.createElement("svg:ellipse"));return vr.setAttribute("cx",Fn/2),vr.setAttribute("cy",Yn/2),vr.setAttribute("rx",Fn/2-ur/2),vr.setAttribute("ry",Yn/2-ur/2),vr.setAttribute("stroke-width",ur||1),vr.setAttribute("stroke","transparent"),vr.setAttribute("fill","transparent"),Qn.append(vr),this.container.append(Qn),!pn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return $t(this,lr)}addHighlightArea(){this.container.classList.add("highlightArea")}}lr=new WeakMap;class Ht extends mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0});nr(this,Nn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const pn=this.data,{width:Fn,height:Yn}=dt(pn.rect),Qn=this.svgFactory.create(Fn,Yn,!0);let ur=[];for(const Or of pn.vertices){const Fr=Or.x-pn.rect[0],br=pn.rect[3]-Or.y;ur.push(Fr+","+br)}ur=ur.join(" ");const vr=rr(this,Nn,this.svgFactory.createElement(this.svgElementName));return vr.setAttribute("points",ur),vr.setAttribute("stroke-width",pn.borderStyle.width||1),vr.setAttribute("stroke","transparent"),vr.setAttribute("fill","transparent"),Qn.append(vr),this.container.append(Qn),!pn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return $t(this,Nn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nn=new WeakMap;class Kt extends Ht{constructor(un){super(un),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Jt extends mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0});nr(this,bn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=nt.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const pn=this.data,{width:Fn,height:Yn}=dt(pn.rect),Qn=this.svgFactory.create(Fn,Yn,!0);for(const ur of pn.inkLists){let vr=[];for(const Fr of ur){const br=Fr.x-pn.rect[0],Lr=pn.rect[3]-Fr.y;vr.push(`${br},${Lr}`)}vr=vr.join(" ");const Or=this.svgFactory.createElement(this.svgElementName);$t(this,bn).push(Or),Or.setAttribute("points",vr),Or.setAttribute("stroke-width",pn.borderStyle.width||1),Or.setAttribute("stroke","transparent"),Or.setAttribute("fill","transparent"),!pn.popupRef&&this.hasPopupData&&this._createPopup(),Qn.append(Or)}return this.container.append(Qn),this.container}getElementsToTriggerPopup(){return $t(this,bn)}addHighlightArea(){this.container.classList.add("highlightArea")}}bn=new WeakMap,_.InkAnnotationElement=Jt;class Ot extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class kt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Gt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class zt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Vt extends mt{constructor(un){super(un,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}_.StampAnnotationElement=Vt;class Dt extends mt{constructor(pn){var Qn;super(pn,{isRenderable:!0});nr(this,Sn);nr(this,Rn,null);const{filename:Fn,content:Yn}=this.data.file;this.filename=(0,rt.getFilenameFromUrl)(Fn,!0),this.content=Yn,(Qn=this.linkService.eventBus)==null||Qn.dispatch("fileattachmentannotation",{source:this,filename:Fn,content:Yn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:pn,data:Fn}=this;let Yn;Fn.hasAppearance||Fn.fillAlpha===0?Yn=document.createElement("div"):(Yn=document.createElement("img"),Yn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Fn.name)?"paperclip":"pushpin"}.svg`,Fn.fillAlpha&&Fn.fillAlpha<1&&(Yn.style=`filter: opacity(${Math.round(Fn.fillAlpha*100)}%);`)),Yn.addEventListener("dblclick",zn(this,Sn,Nm).bind(this)),rr(this,Rn,Yn);const{isMac:Qn}=nt.FeatureTest.platform;return pn.addEventListener("keydown",ur=>{ur.key==="Enter"&&(Qn?ur.metaKey:ur.ctrlKey)&&zn(this,Sn,Nm).call(this)}),!Fn.popupRef&&this.hasPopupData?this._createPopup():Yn.classList.add("popupTriggerArea"),pn.append(Yn),pn}getElementsToTriggerPopup(){return $t(this,Rn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rn=new WeakMap,Sn=new WeakSet,Nm=function(){var pn;(pn=this.downloadManager)==null||pn.openOrDownloadData(this.container,this.content,this.filename)};class It{constructor({div:un,accessibilityManager:pn,annotationCanvasMap:Fn,l10n:Yn,page:Qn,viewport:ur}){nr(this,Xn);nr(this,xn,null);nr(this,on,null);nr(this,Gn,new Map);this.div=un,rr(this,xn,pn),rr(this,on,Fn),this.l10n=Yn,this.page=Qn,this.viewport=ur,this.zIndex=0,this.l10n||(this.l10n=ot.NullL10n)}async render(un){const{annotations:pn}=un,Fn=this.div;(0,rt.setLayerDimensions)(Fn,this.viewport);const Yn=new Map,Qn={data:null,layer:Fn,linkService:un.linkService,downloadManager:un.downloadManager,imageResourcesPath:un.imageResourcesPath||"",renderForms:un.renderForms!==!1,svgFactory:new rt.DOMSVGFactory,annotationStorage:un.annotationStorage||new it.AnnotationStorage,enableScripting:un.enableScripting===!0,hasJSActions:un.hasJSActions,fieldObjects:un.fieldObjects,parent:this,elements:null};for(const ur of pn){if(ur.noHTML)continue;const vr=ur.annotationType===nt.AnnotationType.POPUP;if(vr){const br=Yn.get(ur.id);if(!br)continue;Qn.elements=br}else{const{width:br,height:Lr}=dt(ur.rect);if(br<=0||Lr<=0)continue}Qn.data=ur;const Or=ht.create(Qn);if(!Or.isRenderable)continue;if(!vr&&ur.popupRef){const br=Yn.get(ur.popupRef);br?br.push(Or):Yn.set(ur.popupRef,[Or])}Or.annotationEditorType>0&&$t(this,Gn).set(Or.data.id,Or);const Fr=Or.render();ur.hidden&&(Fr.style.visibility="hidden"),zn(this,Xn,v0).call(this,Fr,ur.id)}zn(this,Xn,Um).call(this),await this.l10n.translate(Fn)}update({viewport:un}){const pn=this.div;this.viewport=un,(0,rt.setLayerDimensions)(pn,{rotation:un.rotation}),zn(this,Xn,Um).call(this),pn.hidden=!1}getEditableAnnotations(){return Array.from($t(this,Gn).values())}getEditableAnnotation(un){return $t(this,Gn).get(un)}}xn=new WeakMap,on=new WeakMap,Gn=new WeakMap,Xn=new WeakSet,v0=function(un,pn){var Yn;const Fn=un.firstChild||un;Fn.id=`${nt.AnnotationPrefix}${pn}`,this.div.append(un),(Yn=$t(this,xn))==null||Yn.moveElementInDOM(this.div,un,Fn,!1)},Um=function(){if(!$t(this,on))return;const un=this.div;for(const[pn,Fn]of $t(this,on)){const Yn=un.querySelector(`[data-annotation-id="${pn}"]`);if(!Yn)continue;const{firstChild:Qn}=Yn;Qn?Qn.nodeName==="CANVAS"?Qn.replaceWith(Fn):Qn.before(Fn):Yn.append(Fn)}$t(this,on).clear()},_.AnnotationLayer=It},(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ColorConverters=void 0;function tt(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function nt(it){return Math.max(0,Math.min(255,255*it))}class rt{static CMYK_G([st,ot,at,lt]){return["G",1-Math.min(1,.3*st+.59*at+.11*ot+lt)]}static G_CMYK([st]){return["CMYK",0,0,0,1-st]}static G_RGB([st]){return["RGB",st,st,st]}static G_rgb([st]){return st=nt(st),[st,st,st]}static G_HTML([st]){const ot=tt(st);return`#${ot}${ot}${ot}`}static RGB_G([st,ot,at]){return["G",.3*st+.59*ot+.11*at]}static RGB_rgb(st){return st.map(nt)}static RGB_HTML(st){return`#${st.map(tt).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([st,ot,at,lt]){return["RGB",1-Math.min(1,st+lt),1-Math.min(1,at+lt),1-Math.min(1,ot+lt)]}static CMYK_rgb([st,ot,at,lt]){return[nt(1-Math.min(1,st+lt)),nt(1-Math.min(1,at+lt)),nt(1-Math.min(1,ot+lt))]}static CMYK_HTML(st){const ot=this.CMYK_RGB(st).slice(1);return this.RGB_HTML(ot)}static RGB_CMYK([st,ot,at]){const lt=1-st,ct=1-ot,ut=1-at,dt=Math.min(lt,ct,ut);return["CMYK",lt,ct,ut,dt]}}_.ColorConverters=rt},(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.getL10nFallback=nt;const tt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};tt.print_progress_percent="{{progress}}%";function nt(st,ot){switch(st){case"find_match_count":st=`find_match_count[${ot.total===1?"one":"other"}]`;break;case"find_match_count_limit":st=`find_match_count_limit[${ot.limit===1?"one":"other"}]`;break}return tt[st]||""}function rt(st,ot){return ot?st.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(at,lt)=>lt in ot?ot[lt]:"{{"+lt+"}}"):st}const it={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(st,ot=null,at=nt(st,ot)){return rt(at,ot)},async translate(st){}};_.NullL10n=it},(_e,_,tt)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayer=void 0;var nt=tt(25);class rt{static setupStorage(st,ot,at,lt,ct){const ut=lt.getValue(ot,{value:null});switch(at.name){case"textarea":if(ut.value!==null&&(st.textContent=ut.value),ct==="print")break;st.addEventListener("input",dt=>{lt.setValue(ot,{value:dt.target.value})});break;case"input":if(at.attributes.type==="radio"||at.attributes.type==="checkbox"){if(ut.value===at.attributes.xfaOn?st.setAttribute("checked",!0):ut.value===at.attributes.xfaOff&&st.removeAttribute("checked"),ct==="print")break;st.addEventListener("change",dt=>{lt.setValue(ot,{value:dt.target.checked?dt.target.getAttribute("xfaOn"):dt.target.getAttribute("xfaOff")})})}else{if(ut.value!==null&&st.setAttribute("value",ut.value),ct==="print")break;st.addEventListener("input",dt=>{lt.setValue(ot,{value:dt.target.value})})}break;case"select":if(ut.value!==null){st.setAttribute("value",ut.value);for(const dt of at.children)dt.attributes.value===ut.value?dt.attributes.selected=!0:dt.attributes.hasOwnProperty("selected")&&delete dt.attributes.selected}st.addEventListener("input",dt=>{const ht=dt.target.options,mt=ht.selectedIndex===-1?"":ht[ht.selectedIndex].value;lt.setValue(ot,{value:mt})});break}}static setAttributes({html:st,element:ot,storage:at=null,intent:lt,linkService:ct}){const{attributes:ut}=ot,dt=st instanceof HTMLAnchorElement;ut.type==="radio"&&(ut.name=`${ut.name}-${lt}`);for(const[ht,mt]of Object.entries(ut))if(mt!=null)switch(ht){case"class":mt.length&&st.setAttribute(ht,mt.join(" "));break;case"dataId":break;case"id":st.setAttribute("data-element-id",mt);break;case"style":Object.assign(st.style,mt);break;case"textContent":st.textContent=mt;break;default:(!dt||ht!=="href"&&ht!=="newWindow")&&st.setAttribute(ht,mt)}dt&&ct.addLinkAttributes(st,ut.href,ut.newWindow),at&&ut.dataId&&this.setupStorage(st,ut.dataId,ot,at)}static render(st){var yt;const ot=st.annotationStorage,at=st.linkService,lt=st.xfaHtml,ct=st.intent||"display",ut=document.createElement(lt.name);lt.attributes&&this.setAttributes({html:ut,element:lt,intent:ct,linkService:at});const dt=[[lt,-1,ut]],ht=st.div;if(ht.append(ut),st.viewport){const vt=`matrix(${st.viewport.transform.join(",")})`;ht.style.transform=vt}ct!=="richText"&&ht.setAttribute("class","xfaLayer xfaFont");const mt=[];for(;dt.length>0;){const[vt,pt,_t]=dt.at(-1);if(pt+1===vt.children.length){dt.pop();continue}const xt=vt.children[++dt.at(-1)[1]];if(xt===null)continue;const{name:St}=xt;if(St==="#text"){const bt=document.createTextNode(xt.value);mt.push(bt),_t.append(bt);continue}const At=(yt=xt==null?void 0:xt.attributes)!=null&&yt.xmlns?document.createElementNS(xt.attributes.xmlns,St):document.createElement(St);if(_t.append(At),xt.attributes&&this.setAttributes({html:At,element:xt,storage:ot,intent:ct,linkService:at}),xt.children&&xt.children.length>0)dt.push([xt,-1,At]);else if(xt.value){const bt=document.createTextNode(xt.value);nt.XfaText.shouldBuildText(St)&&mt.push(bt),At.append(bt)}}for(const vt of ht.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))vt.setAttribute("readOnly",!0);return{textDivs:mt}}static update(st){const ot=`matrix(${st.viewport.transform.join(",")})`;st.div.style.transform=ot,st.div.hidden=!1}}_.XfaLayer=rt},(_e,_,tt)=>{var lt,ct,ut,dt,ht,mt,yt,vt,pt,_t,xt,St,At,bt,Et,y0,_0,x0,S0,Gm,E0,$m,A0,b0,w0,C0,M0,Dl,Vm,Rp,Pp,Mu,zm,Lp,qt,T0,Hm,R0,P0,jm,Ip,Tu;Object.defineProperty(_,"__esModule",{value:!0}),_.InkEditor=void 0;var nt=tt(1),rt=tt(4),it=tt(29),st=tt(6),ot=tt(5);const Cn=class Cn extends rt.AnnotationEditor{constructor(Qt){super({...Qt,name:"inkEditor"});nr(this,Et);nr(this,lt,0);nr(this,ct,0);nr(this,ut,this.canvasPointermove.bind(this));nr(this,dt,this.canvasPointerleave.bind(this));nr(this,ht,this.canvasPointerup.bind(this));nr(this,mt,this.canvasPointerdown.bind(this));nr(this,yt,new Path2D);nr(this,vt,!1);nr(this,pt,!1);nr(this,_t,!1);nr(this,xt,null);nr(this,St,0);nr(this,At,0);nr(this,bt,null);this.color=Qt.color||null,this.thickness=Qt.thickness||null,this.opacity=Qt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Qt){rt.AnnotationEditor.initialize(Qt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Qt,sn){switch(Qt){case nt.AnnotationEditorParamsType.INK_THICKNESS:Cn._defaultThickness=sn;break;case nt.AnnotationEditorParamsType.INK_COLOR:Cn._defaultColor=sn;break;case nt.AnnotationEditorParamsType.INK_OPACITY:Cn._defaultOpacity=sn/100;break}}updateParams(Qt,sn){switch(Qt){case nt.AnnotationEditorParamsType.INK_THICKNESS:zn(this,Et,y0).call(this,sn);break;case nt.AnnotationEditorParamsType.INK_COLOR:zn(this,Et,_0).call(this,sn);break;case nt.AnnotationEditorParamsType.INK_OPACITY:zn(this,Et,x0).call(this,sn);break}}static get defaultPropertiesToUpdate(){return[[nt.AnnotationEditorParamsType.INK_THICKNESS,Cn._defaultThickness],[nt.AnnotationEditorParamsType.INK_COLOR,Cn._defaultColor||rt.AnnotationEditor._defaultLineColor],[nt.AnnotationEditorParamsType.INK_OPACITY,Math.round(Cn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[nt.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Cn._defaultThickness],[nt.AnnotationEditorParamsType.INK_COLOR,this.color||Cn._defaultColor||rt.AnnotationEditor._defaultLineColor],[nt.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Cn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(zn(this,Et,Rp).call(this),zn(this,Et,Pp).call(this)),this.isAttachedToDOM||(this.parent.add(this),zn(this,Et,Mu).call(this)),zn(this,Et,Tu).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,$t(this,xt).disconnect(),rr(this,xt,null),super.remove())}setParent(Qt){!this.parent&&Qt?this._uiManager.removeShouldRescale(this):this.parent&&Qt===null&&this._uiManager.addShouldRescale(this),super.setParent(Qt)}onScaleChanging(){const[Qt,sn]=this.parentDimensions,jt=this.width*Qt,Bt=this.height*sn;this.setDimensions(jt,Bt)}enableEditMode(){$t(this,vt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",$t(this,mt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",$t(this,mt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){$t(this,vt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rr(this,vt,!0),this.div.classList.add("disabled"),zn(this,Et,Tu).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Qt){this._focusEventsAllowed&&(super.focusin(Qt),this.enableEditMode())}canvasPointerdown(Qt){Qt.button!==0||!this.isInEditMode()||$t(this,vt)||(this.setInForeground(),Qt.preventDefault(),Qt.type!=="mouse"&&this.div.focus(),zn(this,Et,E0).call(this,Qt.offsetX,Qt.offsetY))}canvasPointermove(Qt){Qt.preventDefault(),zn(this,Et,$m).call(this,Qt.offsetX,Qt.offsetY)}canvasPointerup(Qt){Qt.preventDefault(),zn(this,Et,Vm).call(this,Qt)}canvasPointerleave(Qt){zn(this,Et,Vm).call(this,Qt)}get isResizable(){return!this.isEmpty()&&$t(this,vt)}render(){if(this.div)return this.div;let Qt,sn;this.width&&(Qt=this.x,sn=this.y),super.render(),rt.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(mn=>{var an;return(an=this.div)==null?void 0:an.setAttribute("aria-label",mn)});const[jt,Bt,hn,cn]=zn(this,Et,S0).call(this);if(this.setAt(jt,Bt,0,0),this.setDims(hn,cn),zn(this,Et,Rp).call(this),this.width){const[mn,an]=this.parentDimensions;this.setAspectRatio(this.width*mn,this.height*an),this.setAt(Qt*mn,sn*an,this.width*mn,this.height*an),rr(this,_t,!0),zn(this,Et,Mu).call(this),this.setDims(this.width*mn,this.height*an),zn(this,Et,Dl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return zn(this,Et,Pp).call(this),this.div}setDimensions(Qt,sn){const jt=Math.round(Qt),Bt=Math.round(sn);if($t(this,St)===jt&&$t(this,At)===Bt)return;rr(this,St,jt),rr(this,At,Bt),this.canvas.style.visibility="hidden";const[hn,cn]=this.parentDimensions;this.width=Qt/hn,this.height=sn/cn,this.fixAndSetPosition(),$t(this,vt)&&zn(this,Et,zm).call(this,Qt,sn),zn(this,Et,Mu).call(this),zn(this,Et,Dl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Qt,sn,jt){var fr,dr,lr;if(Qt instanceof it.InkAnnotationElement)return null;const Bt=super.deserialize(Qt,sn,jt);Bt.thickness=Qt.thickness,Bt.color=nt.Util.makeHexColor(...Qt.color),Bt.opacity=Qt.opacity;const[hn,cn]=Bt.pageDimensions,mn=Bt.width*hn,an=Bt.height*cn,Hn=Bt.parentScale,Pn=Qt.thickness/2;rr(Bt,vt,!0),rr(Bt,St,Math.round(mn)),rr(Bt,At,Math.round(an));const{paths:er,rect:cr,rotation:ir}=Qt;for(let{bezier:Nn}of er){Nn=zn(fr=Cn,qt,R0).call(fr,Nn,cr,ir);const bn=[];Bt.paths.push(bn);let Rn=Hn*(Nn[0]-Pn),Sn=Hn*(Nn[1]-Pn);for(let xn=2,on=Nn.length;xn<on;xn+=6){const Gn=Hn*(Nn[xn]-Pn),Xn=Hn*(Nn[xn+1]-Pn),pr=Hn*(Nn[xn+2]-Pn),Ar=Hn*(Nn[xn+3]-Pn),xr=Hn*(Nn[xn+4]-Pn),un=Hn*(Nn[xn+5]-Pn);bn.push([[Rn,Sn],[Gn,Xn],[pr,Ar],[xr,un]]),Rn=xr,Sn=un}const or=zn(this,qt,T0).call(this,bn);Bt.bezierPath2D.push(or)}const Jn=zn(dr=Bt,Et,jm).call(dr);return rr(Bt,ct,Math.max(rt.AnnotationEditor.MIN_SIZE,Jn[2]-Jn[0])),rr(Bt,lt,Math.max(rt.AnnotationEditor.MIN_SIZE,Jn[3]-Jn[1])),zn(lr=Bt,Et,zm).call(lr,mn,an),Bt}serialize(){if(this.isEmpty())return null;const Qt=this.getRect(0,0),sn=rt.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:nt.AnnotationEditorType.INK,color:sn,thickness:this.thickness,opacity:this.opacity,paths:zn(this,Et,P0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Qt),pageIndex:this.pageIndex,rect:Qt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakMap,_t=new WeakMap,xt=new WeakMap,St=new WeakMap,At=new WeakMap,bt=new WeakMap,Et=new WeakSet,y0=function(Qt){const sn=this.thickness;this.addCommands({cmd:()=>{this.thickness=Qt,zn(this,Et,Tu).call(this)},undo:()=>{this.thickness=sn,zn(this,Et,Tu).call(this)},mustExec:!0,type:nt.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_0=function(Qt){const sn=this.color;this.addCommands({cmd:()=>{this.color=Qt,zn(this,Et,Dl).call(this)},undo:()=>{this.color=sn,zn(this,Et,Dl).call(this)},mustExec:!0,type:nt.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},x0=function(Qt){Qt/=100;const sn=this.opacity;this.addCommands({cmd:()=>{this.opacity=Qt,zn(this,Et,Dl).call(this)},undo:()=>{this.opacity=sn,zn(this,Et,Dl).call(this)},mustExec:!0,type:nt.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},S0=function(){const{parentRotation:Qt,parentDimensions:[sn,jt]}=this;switch(Qt){case 90:return[0,jt,jt,sn];case 180:return[sn,jt,sn,jt];case 270:return[sn,0,jt,sn];default:return[0,0,sn,jt]}},Gm=function(){const{ctx:Qt,color:sn,opacity:jt,thickness:Bt,parentScale:hn,scaleFactor:cn}=this;Qt.lineWidth=Bt*hn/cn,Qt.lineCap="round",Qt.lineJoin="round",Qt.miterLimit=10,Qt.strokeStyle=`${sn}${(0,ot.opacityToHex)(jt)}`},E0=function(Qt,sn){this.canvas.addEventListener("contextmenu",st.noContextMenu),this.canvas.addEventListener("pointerleave",$t(this,dt)),this.canvas.addEventListener("pointermove",$t(this,ut)),this.canvas.addEventListener("pointerup",$t(this,ht)),this.canvas.removeEventListener("pointerdown",$t(this,mt)),this.isEditing=!0,$t(this,_t)||(rr(this,_t,!0),zn(this,Et,Mu).call(this),this.thickness||(this.thickness=Cn._defaultThickness),this.color||(this.color=Cn._defaultColor||rt.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Cn._defaultOpacity)),this.currentPath.push([Qt,sn]),rr(this,pt,!1),zn(this,Et,Gm).call(this),rr(this,bt,()=>{zn(this,Et,w0).call(this),$t(this,bt)&&window.requestAnimationFrame($t(this,bt))}),window.requestAnimationFrame($t(this,bt))},$m=function(Qt,sn){const[jt,Bt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Qt===jt&&sn===Bt)return;const hn=this.currentPath;let cn=$t(this,yt);if(hn.push([Qt,sn]),rr(this,pt,!0),hn.length<=2){cn.moveTo(...hn[0]),cn.lineTo(Qt,sn);return}hn.length===3&&(rr(this,yt,cn=new Path2D),cn.moveTo(...hn[0])),zn(this,Et,C0).call(this,cn,...hn.at(-3),...hn.at(-2),Qt,sn)},A0=function(){if(this.currentPath.length===0)return;const Qt=this.currentPath.at(-1);$t(this,yt).lineTo(...Qt)},b0=function(Qt,sn){rr(this,bt,null),Qt=Math.min(Math.max(Qt,0),this.canvas.width),sn=Math.min(Math.max(sn,0),this.canvas.height),zn(this,Et,$m).call(this,Qt,sn),zn(this,Et,A0).call(this);let jt;if(this.currentPath.length!==1)jt=zn(this,Et,M0).call(this);else{const an=[Qt,sn];jt=[[an,an.slice(),an.slice(),an]]}const Bt=$t(this,yt),hn=this.currentPath;this.currentPath=[],rr(this,yt,new Path2D);const cn=()=>{this.allRawPaths.push(hn),this.paths.push(jt),this.bezierPath2D.push(Bt),this.rebuild()},mn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(zn(this,Et,Rp).call(this),zn(this,Et,Pp).call(this)),zn(this,Et,Tu).call(this))};this.addCommands({cmd:cn,undo:mn,mustExec:!0})},w0=function(){if(!$t(this,pt))return;rr(this,pt,!1);const Qt=Math.ceil(this.thickness*this.parentScale),sn=this.currentPath.slice(-3),jt=sn.map(cn=>cn[0]),Bt=sn.map(cn=>cn[1]);Math.min(...jt)-Qt,Math.max(...jt)+Qt,Math.min(...Bt)-Qt,Math.max(...Bt)+Qt;const{ctx:hn}=this;hn.save(),hn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const cn of this.bezierPath2D)hn.stroke(cn);hn.stroke($t(this,yt)),hn.restore()},C0=function(Qt,sn,jt,Bt,hn,cn,mn){const an=(sn+Bt)/2,Hn=(jt+hn)/2,Pn=(Bt+cn)/2,er=(hn+mn)/2;Qt.bezierCurveTo(an+2*(Bt-an)/3,Hn+2*(hn-Hn)/3,Pn+2*(Bt-Pn)/3,er+2*(hn-er)/3,Pn,er)},M0=function(){const Qt=this.currentPath;if(Qt.length<=2)return[[Qt[0],Qt[0],Qt.at(-1),Qt.at(-1)]];const sn=[];let jt,[Bt,hn]=Qt[0];for(jt=1;jt<Qt.length-2;jt++){const[cr,ir]=Qt[jt],[Jn,fr]=Qt[jt+1],dr=(cr+Jn)/2,lr=(ir+fr)/2,Nn=[Bt+2*(cr-Bt)/3,hn+2*(ir-hn)/3],bn=[dr+2*(cr-dr)/3,lr+2*(ir-lr)/3];sn.push([[Bt,hn],Nn,bn,[dr,lr]]),[Bt,hn]=[dr,lr]}const[cn,mn]=Qt[jt],[an,Hn]=Qt[jt+1],Pn=[Bt+2*(cn-Bt)/3,hn+2*(mn-hn)/3],er=[an+2*(cn-an)/3,Hn+2*(mn-Hn)/3];return sn.push([[Bt,hn],Pn,er,[an,Hn]]),sn},Dl=function(){if(this.isEmpty()){zn(this,Et,Lp).call(this);return}zn(this,Et,Gm).call(this);const{canvas:Qt,ctx:sn}=this;sn.setTransform(1,0,0,1,0,0),sn.clearRect(0,0,Qt.width,Qt.height),zn(this,Et,Lp).call(this);for(const jt of this.bezierPath2D)sn.stroke(jt)},Vm=function(Qt){this.canvas.removeEventListener("pointerleave",$t(this,dt)),this.canvas.removeEventListener("pointermove",$t(this,ut)),this.canvas.removeEventListener("pointerup",$t(this,ht)),this.canvas.addEventListener("pointerdown",$t(this,mt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",st.noContextMenu)},10),zn(this,Et,b0).call(this,Qt.offsetX,Qt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Rp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",rt.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Qt=>{var sn;return(sn=this.canvas)==null?void 0:sn.setAttribute("aria-label",Qt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Pp=function(){rr(this,xt,new ResizeObserver(Qt=>{const sn=Qt[0].contentRect;sn.width&&sn.height&&this.setDimensions(sn.width,sn.height)})),$t(this,xt).observe(this.div)},Mu=function(){if(!$t(this,_t))return;const[Qt,sn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Qt),this.canvas.height=Math.ceil(this.height*sn),zn(this,Et,Lp).call(this)},zm=function(Qt,sn){const jt=zn(this,Et,Ip).call(this),Bt=(Qt-jt)/$t(this,ct),hn=(sn-jt)/$t(this,lt);this.scaleFactor=Math.min(Bt,hn)},Lp=function(){const Qt=zn(this,Et,Ip).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Qt,this.translationY*this.scaleFactor+Qt)},qt=new WeakSet,T0=function(Qt){const sn=new Path2D;for(let jt=0,Bt=Qt.length;jt<Bt;jt++){const[hn,cn,mn,an]=Qt[jt];jt===0&&sn.moveTo(...hn),sn.bezierCurveTo(cn[0],cn[1],mn[0],mn[1],an[0],an[1])}return sn},Hm=function(Qt,sn,jt){const[Bt,hn,cn,mn]=sn;switch(jt){case 0:for(let an=0,Hn=Qt.length;an<Hn;an+=2)Qt[an]+=Bt,Qt[an+1]=mn-Qt[an+1];break;case 90:for(let an=0,Hn=Qt.length;an<Hn;an+=2){const Pn=Qt[an];Qt[an]=Qt[an+1]+Bt,Qt[an+1]=Pn+hn}break;case 180:for(let an=0,Hn=Qt.length;an<Hn;an+=2)Qt[an]=cn-Qt[an],Qt[an+1]+=hn;break;case 270:for(let an=0,Hn=Qt.length;an<Hn;an+=2){const Pn=Qt[an];Qt[an]=cn-Qt[an+1],Qt[an+1]=mn-Pn}break;default:throw new Error("Invalid rotation")}return Qt},R0=function(Qt,sn,jt){const[Bt,hn,cn,mn]=sn;switch(jt){case 0:for(let an=0,Hn=Qt.length;an<Hn;an+=2)Qt[an]-=Bt,Qt[an+1]=mn-Qt[an+1];break;case 90:for(let an=0,Hn=Qt.length;an<Hn;an+=2){const Pn=Qt[an];Qt[an]=Qt[an+1]-hn,Qt[an+1]=Pn-Bt}break;case 180:for(let an=0,Hn=Qt.length;an<Hn;an+=2)Qt[an]=cn-Qt[an],Qt[an+1]-=hn;break;case 270:for(let an=0,Hn=Qt.length;an<Hn;an+=2){const Pn=Qt[an];Qt[an]=mn-Qt[an+1],Qt[an+1]=cn-Pn}break;default:throw new Error("Invalid rotation")}return Qt},P0=function(Qt,sn,jt,Bt){var Hn,Pn;const hn=[],cn=this.thickness/2,mn=Qt*sn+cn,an=Qt*jt+cn;for(const er of this.paths){const cr=[],ir=[];for(let Jn=0,fr=er.length;Jn<fr;Jn++){const[dr,lr,Nn,bn]=er[Jn],Rn=Qt*dr[0]+mn,Sn=Qt*dr[1]+an,or=Qt*lr[0]+mn,xn=Qt*lr[1]+an,on=Qt*Nn[0]+mn,Gn=Qt*Nn[1]+an,Xn=Qt*bn[0]+mn,pr=Qt*bn[1]+an;Jn===0&&(cr.push(Rn,Sn),ir.push(Rn,Sn)),cr.push(or,xn,on,Gn,Xn,pr),ir.push(or,xn),Jn===fr-1&&ir.push(Xn,pr)}hn.push({bezier:zn(Hn=Cn,qt,Hm).call(Hn,cr,Bt,this.rotation),points:zn(Pn=Cn,qt,Hm).call(Pn,ir,Bt,this.rotation)})}return hn},jm=function(){let Qt=1/0,sn=-1/0,jt=1/0,Bt=-1/0;for(const hn of this.paths)for(const[cn,mn,an,Hn]of hn){const Pn=nt.Util.bezierBoundingBox(...cn,...mn,...an,...Hn);Qt=Math.min(Qt,Pn[0]),jt=Math.min(jt,Pn[1]),sn=Math.max(sn,Pn[2]),Bt=Math.max(Bt,Pn[3])}return[Qt,jt,sn,Bt]},Ip=function(){return $t(this,vt)?Math.ceil(this.thickness*this.parentScale):0},Tu=function(Qt=!1){if(this.isEmpty())return;if(!$t(this,vt)){zn(this,Et,Dl).call(this);return}const sn=zn(this,Et,jm).call(this),jt=zn(this,Et,Ip).call(this);rr(this,ct,Math.max(rt.AnnotationEditor.MIN_SIZE,sn[2]-sn[0])),rr(this,lt,Math.max(rt.AnnotationEditor.MIN_SIZE,sn[3]-sn[1]));const Bt=Math.ceil(jt+$t(this,ct)*this.scaleFactor),hn=Math.ceil(jt+$t(this,lt)*this.scaleFactor),[cn,mn]=this.parentDimensions;this.width=Bt/cn,this.height=hn/mn,this.setAspectRatio(Bt,hn);const an=this.translationX,Hn=this.translationY;this.translationX=-sn[0],this.translationY=-sn[1],zn(this,Et,Mu).call(this),zn(this,Et,Dl).call(this),rr(this,St,Bt),rr(this,At,hn),this.setDims(Bt,hn);const Pn=Qt?jt/this.scaleFactor/2:0;this.translate(an-this.translationX-Pn,Hn-this.translationY-Pn)},nr(Cn,qt),to(Cn,"_defaultColor",null),to(Cn,"_defaultOpacity",1),to(Cn,"_defaultThickness",1),to(Cn,"_type","ink");let at=Cn;_.InkEditor=at},(_e,_,tt)=>{var at,lt,ct,ut,dt,ht,mt,yt,vt,pt,_t,Wu,Xu,Dp,Wm,L0,I0,Xm,Fp,D0;Object.defineProperty(_,"__esModule",{value:!0}),_.StampEditor=void 0;var nt=tt(1),rt=tt(4),it=tt(6),st=tt(29);const Lt=class Lt extends rt.AnnotationEditor{constructor(Kt){super({...Kt,name:"stampEditor"});nr(this,_t);nr(this,at,null);nr(this,lt,null);nr(this,ct,null);nr(this,ut,null);nr(this,dt,null);nr(this,ht,null);nr(this,mt,null);nr(this,yt,null);nr(this,vt,!1);nr(this,pt,!1);rr(this,ut,Kt.bitmapUrl),rr(this,dt,Kt.bitmapFile)}static initialize(Kt){rt.AnnotationEditor.initialize(Kt)}static get supportedTypes(){const Kt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,nt.shadow)(this,"supportedTypes",Kt.map(Wt=>`image/${Wt}`))}static get supportedTypesStr(){return(0,nt.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Kt){return this.supportedTypes.includes(Kt)}static paste(Kt,Wt){Wt.pasteEditor(nt.AnnotationEditorType.STAMP,{bitmapFile:Kt.getAsFile()})}remove(){var Kt,Wt;$t(this,lt)&&(rr(this,at,null),this._uiManager.imageManager.deleteId($t(this,lt)),(Kt=$t(this,ht))==null||Kt.remove(),rr(this,ht,null),(Wt=$t(this,mt))==null||Wt.disconnect(),rr(this,mt,null)),super.remove()}rebuild(){if(!this.parent){$t(this,lt)&&zn(this,_t,Dp).call(this);return}super.rebuild(),this.div!==null&&($t(this,lt)&&zn(this,_t,Dp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!($t(this,ct)||$t(this,at)||$t(this,ut)||$t(this,dt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Kt,Wt;if(this.width&&(Kt=this.x,Wt=this.y),super.render(),this.div.hidden=!0,$t(this,at)?zn(this,_t,Wm).call(this):zn(this,_t,Dp).call(this),this.width){const[Jt,Ot]=this.parentDimensions;this.setAt(Kt*Jt,Wt*Ot,this.width*Jt,this.height*Ot)}return this.div}static deserialize(Kt,Wt,Jt){if(Kt instanceof st.StampAnnotationElement)return null;const Ot=super.deserialize(Kt,Wt,Jt),{rect:kt,bitmapUrl:Gt,bitmapId:zt,isSvg:Vt,accessibilityData:Dt}=Kt;zt&&Jt.imageManager.isValidId(zt)?rr(Ot,lt,zt):rr(Ot,ut,Gt),rr(Ot,vt,Vt);const[It,Ut]=Ot.pageDimensions;return Ot.width=(kt[2]-kt[0])/It,Ot.height=(kt[3]-kt[1])/Ut,Dt&&(Ot.altTextData=Dt),Ot}serialize(Kt=!1,Wt=null){if(this.isEmpty())return null;const Jt={annotationType:nt.AnnotationEditorType.STAMP,bitmapId:$t(this,lt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:$t(this,vt),structTreeParentId:this._structTreeParentId};if(Kt)return Jt.bitmapUrl=zn(this,_t,Fp).call(this,!0),Jt.accessibilityData=this.altTextData,Jt;const{decorative:Ot,altText:kt}=this.altTextData;if(!Ot&&kt&&(Jt.accessibilityData={type:"Figure",alt:kt}),Wt===null)return Jt;Wt.stamps||(Wt.stamps=new Map);const Gt=$t(this,vt)?(Jt.rect[2]-Jt.rect[0])*(Jt.rect[3]-Jt.rect[1]):null;if(!Wt.stamps.has($t(this,lt)))Wt.stamps.set($t(this,lt),{area:Gt,serialized:Jt}),Jt.bitmap=zn(this,_t,Fp).call(this,!1);else if($t(this,vt)){const zt=Wt.stamps.get($t(this,lt));Gt>zt.area&&(zt.area=Gt,zt.serialized.bitmap.close(),zt.serialized.bitmap=zn(this,_t,Fp).call(this,!1))}return Jt}};at=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakMap,_t=new WeakSet,Wu=function(Kt,Wt=!1){if(!Kt){this.remove();return}rr(this,at,Kt.bitmap),Wt||(rr(this,lt,Kt.id),rr(this,vt,Kt.isSvg)),zn(this,_t,Wm).call(this)},Xu=function(){rr(this,ct,null),this._uiManager.enableWaiting(!1),$t(this,ht)&&this.div.focus()},Dp=function(){if($t(this,lt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId($t(this,lt)).then(Wt=>zn(this,_t,Wu).call(this,Wt,!0)).finally(()=>zn(this,_t,Xu).call(this));return}if($t(this,ut)){const Wt=$t(this,ut);rr(this,ut,null),this._uiManager.enableWaiting(!0),rr(this,ct,this._uiManager.imageManager.getFromUrl(Wt).then(Jt=>zn(this,_t,Wu).call(this,Jt)).finally(()=>zn(this,_t,Xu).call(this)));return}if($t(this,dt)){const Wt=$t(this,dt);rr(this,dt,null),this._uiManager.enableWaiting(!0),rr(this,ct,this._uiManager.imageManager.getFromFile(Wt).then(Jt=>zn(this,_t,Wu).call(this,Jt)).finally(()=>zn(this,_t,Xu).call(this)));return}const Kt=document.createElement("input");Kt.type="file",Kt.accept=Lt.supportedTypesStr,rr(this,ct,new Promise(Wt=>{Kt.addEventListener("change",async()=>{if(!Kt.files||Kt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Jt=await this._uiManager.imageManager.getFromFile(Kt.files[0]);zn(this,_t,Wu).call(this,Jt)}Wt()}),Kt.addEventListener("cancel",()=>{this.remove(),Wt()})}).finally(()=>zn(this,_t,Xu).call(this))),Kt.click()},Wm=function(){const{div:Kt}=this;let{width:Wt,height:Jt}=$t(this,at);const[Ot,kt]=this.pageDimensions,Gt=.75;if(this.width)Wt=this.width*Ot,Jt=this.height*kt;else if(Wt>Gt*Ot||Jt>Gt*kt){const It=Math.min(Gt*Ot/Wt,Gt*kt/Jt);Wt*=It,Jt*=It}const[zt,Vt]=this.parentDimensions;this.setDims(Wt*zt/Ot,Jt*Vt/kt),this._uiManager.enableWaiting(!1);const Dt=rr(this,ht,document.createElement("canvas"));Kt.append(Dt),Kt.hidden=!1,zn(this,_t,Xm).call(this,Wt,Jt),zn(this,_t,D0).call(this),$t(this,pt)||(this.parent.addUndoableEditor(this),rr(this,pt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},L0=function(Kt,Wt){var Gt;const[Jt,Ot]=this.parentDimensions;this.width=Kt/Jt,this.height=Wt/Ot,this.setDims(Kt,Wt),(Gt=this._initialOptions)!=null&&Gt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,$t(this,yt)!==null&&clearTimeout($t(this,yt)),rr(this,yt,setTimeout(()=>{rr(this,yt,null),zn(this,_t,Xm).call(this,Kt,Wt)},200))},I0=function(Kt,Wt){const{width:Jt,height:Ot}=$t(this,at);let kt=Jt,Gt=Ot,zt=$t(this,at);for(;kt>2*Kt||Gt>2*Wt;){const Vt=kt,Dt=Gt;kt>2*Kt&&(kt=kt>=16384?Math.floor(kt/2)-1:Math.ceil(kt/2)),Gt>2*Wt&&(Gt=Gt>=16384?Math.floor(Gt/2)-1:Math.ceil(Gt/2));const It=new OffscreenCanvas(kt,Gt);It.getContext("2d").drawImage(zt,0,0,Vt,Dt,0,0,kt,Gt),zt=It.transferToImageBitmap()}return zt},Xm=function(Kt,Wt){Kt=Math.ceil(Kt),Wt=Math.ceil(Wt);const Jt=$t(this,ht);if(!Jt||Jt.width===Kt&&Jt.height===Wt)return;Jt.width=Kt,Jt.height=Wt;const Ot=$t(this,vt)?$t(this,at):zn(this,_t,I0).call(this,Kt,Wt),kt=Jt.getContext("2d");kt.filter=this._uiManager.hcmFilter,kt.drawImage(Ot,0,0,Ot.width,Ot.height,0,0,Kt,Wt)},Fp=function(Kt){if(Kt){if($t(this,vt)){const Ot=this._uiManager.imageManager.getSvgUrl($t(this,lt));if(Ot)return Ot}const Wt=document.createElement("canvas");return{width:Wt.width,height:Wt.height}=$t(this,at),Wt.getContext("2d").drawImage($t(this,at),0,0),Wt.toDataURL()}if($t(this,vt)){const[Wt,Jt]=this.pageDimensions,Ot=Math.round(this.width*Wt*it.PixelsPerInch.PDF_TO_CSS_UNITS),kt=Math.round(this.height*Jt*it.PixelsPerInch.PDF_TO_CSS_UNITS),Gt=new OffscreenCanvas(Ot,kt);return Gt.getContext("2d").drawImage($t(this,at),0,0,$t(this,at).width,$t(this,at).height,0,0,Ot,kt),Gt.transferToImageBitmap()}return structuredClone($t(this,at))},D0=function(){rr(this,mt,new ResizeObserver(Kt=>{const Wt=Kt[0].contentRect;Wt.width&&Wt.height&&zn(this,_t,L0).call(this,Wt.width,Wt.height)})),$t(this,mt).observe(this.div)},to(Lt,"_type","stamp");let ot=Lt;_.StampEditor=ot}],__webpack_module_cache__={};function __w_pdfjs_require__(_e){var _=__webpack_module_cache__[_e];if(_!==void 0)return _.exports;var tt=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e](tt,tt.exports,__w_pdfjs_require__),tt.exports}var __webpack_exports__={};return(()=>{var _e=__webpack_exports__;Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"AbortException",{enumerable:!0,get:function(){return _.AbortException}}),Object.defineProperty(_e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return it.AnnotationEditorLayer}}),Object.defineProperty(_e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _.AnnotationEditorParamsType}}),Object.defineProperty(_e,"AnnotationEditorType",{enumerable:!0,get:function(){return _.AnnotationEditorType}}),Object.defineProperty(_e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return st.AnnotationEditorUIManager}}),Object.defineProperty(_e,"AnnotationLayer",{enumerable:!0,get:function(){return ot.AnnotationLayer}}),Object.defineProperty(_e,"AnnotationMode",{enumerable:!0,get:function(){return _.AnnotationMode}}),Object.defineProperty(_e,"CMapCompressionType",{enumerable:!0,get:function(){return _.CMapCompressionType}}),Object.defineProperty(_e,"DOMSVGFactory",{enumerable:!0,get:function(){return nt.DOMSVGFactory}}),Object.defineProperty(_e,"FeatureTest",{enumerable:!0,get:function(){return _.FeatureTest}}),Object.defineProperty(_e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return at.GlobalWorkerOptions}}),Object.defineProperty(_e,"ImageKind",{enumerable:!0,get:function(){return _.ImageKind}}),Object.defineProperty(_e,"InvalidPDFException",{enumerable:!0,get:function(){return _.InvalidPDFException}}),Object.defineProperty(_e,"MissingPDFException",{enumerable:!0,get:function(){return _.MissingPDFException}}),Object.defineProperty(_e,"OPS",{enumerable:!0,get:function(){return _.OPS}}),Object.defineProperty(_e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return tt.PDFDataRangeTransport}}),Object.defineProperty(_e,"PDFDateString",{enumerable:!0,get:function(){return nt.PDFDateString}}),Object.defineProperty(_e,"PDFWorker",{enumerable:!0,get:function(){return tt.PDFWorker}}),Object.defineProperty(_e,"PasswordResponses",{enumerable:!0,get:function(){return _.PasswordResponses}}),Object.defineProperty(_e,"PermissionFlag",{enumerable:!0,get:function(){return _.PermissionFlag}}),Object.defineProperty(_e,"PixelsPerInch",{enumerable:!0,get:function(){return nt.PixelsPerInch}}),Object.defineProperty(_e,"PromiseCapability",{enumerable:!0,get:function(){return _.PromiseCapability}}),Object.defineProperty(_e,"RenderingCancelledException",{enumerable:!0,get:function(){return nt.RenderingCancelledException}}),Object.defineProperty(_e,"SVGGraphics",{enumerable:!0,get:function(){return tt.SVGGraphics}}),Object.defineProperty(_e,"UnexpectedResponseException",{enumerable:!0,get:function(){return _.UnexpectedResponseException}}),Object.defineProperty(_e,"Util",{enumerable:!0,get:function(){return _.Util}}),Object.defineProperty(_e,"VerbosityLevel",{enumerable:!0,get:function(){return _.VerbosityLevel}}),Object.defineProperty(_e,"XfaLayer",{enumerable:!0,get:function(){return lt.XfaLayer}}),Object.defineProperty(_e,"build",{enumerable:!0,get:function(){return tt.build}}),Object.defineProperty(_e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _.createValidAbsoluteUrl}}),Object.defineProperty(_e,"getDocument",{enumerable:!0,get:function(){return tt.getDocument}}),Object.defineProperty(_e,"getFilenameFromUrl",{enumerable:!0,get:function(){return nt.getFilenameFromUrl}}),Object.defineProperty(_e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return nt.getPdfFilenameFromUrl}}),Object.defineProperty(_e,"getXfaPageViewport",{enumerable:!0,get:function(){return nt.getXfaPageViewport}}),Object.defineProperty(_e,"isDataScheme",{enumerable:!0,get:function(){return nt.isDataScheme}}),Object.defineProperty(_e,"isPdfFile",{enumerable:!0,get:function(){return nt.isPdfFile}}),Object.defineProperty(_e,"loadScript",{enumerable:!0,get:function(){return nt.loadScript}}),Object.defineProperty(_e,"noContextMenu",{enumerable:!0,get:function(){return nt.noContextMenu}}),Object.defineProperty(_e,"normalizeUnicode",{enumerable:!0,get:function(){return _.normalizeUnicode}}),Object.defineProperty(_e,"renderTextLayer",{enumerable:!0,get:function(){return rt.renderTextLayer}}),Object.defineProperty(_e,"setLayerDimensions",{enumerable:!0,get:function(){return nt.setLayerDimensions}}),Object.defineProperty(_e,"shadow",{enumerable:!0,get:function(){return _.shadow}}),Object.defineProperty(_e,"updateTextLayer",{enumerable:!0,get:function(){return rt.updateTextLayer}}),Object.defineProperty(_e,"version",{enumerable:!0,get:function(){return tt.version}});var _=__w_pdfjs_require__(1),tt=__w_pdfjs_require__(2),nt=__w_pdfjs_require__(6),rt=__w_pdfjs_require__(26),it=__w_pdfjs_require__(27),st=__w_pdfjs_require__(5),ot=__w_pdfjs_require__(29),at=__w_pdfjs_require__(14),lt=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(_e){var _=reactExports,tt=pdfExports;function nt(Xt){var ln=Object.create(null);return Xt&&Object.keys(Xt).forEach(function(wn){if(wn!=="default"){var Dn=Object.getOwnPropertyDescriptor(Xt,wn);Object.defineProperty(ln,wn,Dn.get?Dn:{enumerable:!0,get:function(){return Xt[wn]}})}}),ln.default=Xt,Object.freeze(ln)}var rt,it=nt(_),st=nt(tt);_e.AnnotationType=void 0,(rt=_e.AnnotationType||(_e.AnnotationType={}))[rt.Text=1]="Text",rt[rt.Link=2]="Link",rt[rt.FreeText=3]="FreeText",rt[rt.Line=4]="Line",rt[rt.Square=5]="Square",rt[rt.Circle=6]="Circle",rt[rt.Polygon=7]="Polygon",rt[rt.Polyline=8]="Polyline",rt[rt.Highlight=9]="Highlight",rt[rt.Underline=10]="Underline",rt[rt.Squiggly=11]="Squiggly",rt[rt.StrikeOut=12]="StrikeOut",rt[rt.Stamp=13]="Stamp",rt[rt.Caret=14]="Caret",rt[rt.Ink=15]="Ink",rt[rt.Popup=16]="Popup",rt[rt.FileAttachment=17]="FileAttachment";var ot=function(Xt,ln){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wn,Dn){wn.__proto__=Dn}||function(wn,Dn){for(var Un in Dn)Object.prototype.hasOwnProperty.call(Dn,Un)&&(wn[Un]=Dn[Un])},ot(Xt,ln)};function at(Xt,ln){if(typeof ln!="function"&&ln!==null)throw new TypeError("Class extends value "+String(ln)+" is not a constructor or null");function wn(){this.constructor=Xt}ot(Xt,ln),Xt.prototype=ln===null?Object.create(ln):(wn.prototype=ln.prototype,new wn)}var lt,ct=function(){return ct=Object.assign||function(Xt){for(var ln,wn=1,Dn=arguments.length;wn<Dn;wn++)for(var Un in ln=arguments[wn])Object.prototype.hasOwnProperty.call(ln,Un)&&(Xt[Un]=ln[Un]);return Xt},ct.apply(this,arguments)};_e.TextDirection=void 0,(lt=_e.TextDirection||(_e.TextDirection={})).RightToLeft="RTL",lt.LeftToRight="LTR";var ut,dt=it.createContext({currentTheme:"light",direction:_e.TextDirection.LeftToRight,setCurrentTheme:function(){}}),ht=function(Xt){var ln=[];return Object.keys(Xt).forEach(function(wn){wn&&Xt[wn]&&ln.push(wn)}),ln.join(" ")},mt=typeof window<"u"?it.useLayoutEffect:it.useEffect,yt=function(Xt){var ln=it.useRef(null),wn=Xt.once,Dn=Xt.threshold,Un=Xt.onVisibilityChanged;return mt(function(){var $n=ln.current;if($n){var qn=new IntersectionObserver(function(Vn){Vn.forEach(function(Ln){var Kn=Ln.isIntersecting,jn=Ln.intersectionRatio;Un({isVisible:Kn,ratio:jn}),Kn&&wn&&(qn.unobserve($n),qn.disconnect())})},{threshold:Dn||0});return qn.observe($n),function(){qn.unobserve($n),qn.disconnect()}}},[]),ln},vt=function(Xt){var ln=Xt.children,wn=Xt.ignoreDirection,Dn=wn!==void 0&&wn,Un=Xt.size,$n=Un===void 0?24:Un,qn=it.useContext(dt).direction,Vn=!Dn&&qn===_e.TextDirection.RightToLeft,Ln="".concat($n||24,"px");return it.createElement("svg",{"aria-hidden":"true",className:ht({"rpv-core__icon":!0,"rpv-core__icon--rtl":Vn}),focusable:"false",height:Ln,viewBox:"0 0 24 24",width:Ln},ln)},pt=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},_t=function(Xt){var ln=Xt.children,wn=Xt.testId,Dn=Xt.onClick,Un=it.useContext(dt).direction===_e.TextDirection.RightToLeft,$n=wn?{"data-testid":wn}:{};return it.createElement("button",ct({className:ht({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Un}),type:"button",onClick:Dn},$n),ln)},xt=function(Xt){var ln=Xt.size,wn=ln===void 0?"4rem":ln,Dn=Xt.testId,Un=it.useState(!1),$n=Un[0],qn=Un[1],Vn=Dn?{"data-testid":Dn}:{},Ln=yt({onVisibilityChanged:function(Kn){qn(Kn.isVisible)}});return it.createElement("div",ct({},Vn,{className:ht({"rpv-core__spinner":!0,"rpv-core__spinner--animating":$n}),ref:Ln,style:{height:wn,width:wn}}))},St=function(Xt){var ln=Xt.ariaLabel,wn=ln===void 0?"":ln,Dn=Xt.autoFocus,Un=Dn!==void 0&&Dn,$n=Xt.placeholder,qn=$n===void 0?"":$n,Vn=Xt.testId,Ln=Xt.type,Kn=Ln===void 0?"text":Ln,jn=Xt.value,Sr=jn===void 0?"":jn,_r=Xt.onChange,gr=Xt.onKeyDown,Dr=gr===void 0?function(){}:gr,Rr=it.useContext(dt).direction,Cr=it.useRef(),rs=Rr===_e.TextDirection.RightToLeft,Vr={ref:Cr,"data-testid":"","aria-label":wn,className:ht({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":rs}),placeholder:qn,value:Sr,onChange:function(Zr){return _r(Zr.target.value)},onKeyDown:Dr};return Vn&&(Vr["data-testid"]=Vn),mt(function(){if(Un){var Zr=Cr.current;if(Zr){var _i=window.scrollX,Hr=window.scrollY;Zr.focus(),window.scrollTo(_i,Hr)}}},[]),Kn==="text"?it.createElement("input",ct({type:"text"},Vr)):it.createElement("input",ct({type:"password"},Vr))};(function(Xt){Xt[Xt.ExitFullScreen=0]="ExitFullScreen",Xt[Xt.FullScreenChange=1]="FullScreenChange",Xt[Xt.FullScreenElement=2]="FullScreenElement",Xt[Xt.FullScreenEnabled=3]="FullScreenEnabled",Xt[Xt.RequestFullScreen=4]="RequestFullScreen"})(ut||(ut={}));var At,bt={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},Et={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},wt={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},Rt=typeof window<"u",Tt=Rt&&(ut.FullScreenEnabled in document&&bt||Et.FullScreenEnabled in document&&Et||wt.FullScreenEnabled in document&&wt)||bt,Mt=function(){return Rt&&Tt.FullScreenEnabled in document&&document[Tt.FullScreenEnabled]===!0},Lt=function(Xt){return Rt?Xt[Tt.ExitFullScreen]():Promise.resolve({})},Ft=function(){return Rt?document[Tt.FullScreenElement]:null},Ht=function(Xt,ln){var wn=it.useRef(),Dn=function(){wn.current&&clearTimeout(wn.current)};return it.useEffect(function(){return function(){return Dn()}},[]),it.useCallback(function(){for(var Un=[],$n=0;$n<arguments.length;$n++)Un[$n]=arguments[$n];Dn(),wn.current=setTimeout(function(){Xt.apply(void 0,Un)},ln)},[Xt,ln])},Kt=function(){var Xt=it.useRef(!1);return it.useEffect(function(){return Xt.current=!0,function(){Xt.current=!1}},[]),Xt},Wt=function(Xt){var ln=it.useRef(Xt);return it.useEffect(function(){ln.current=Xt},[Xt]),ln.current};(function(Xt){Xt.NotRenderedYet="NotRenderedYet",Xt.Rendering="Rendering",Xt.Rendered="Rendered"})(At||(At={}));var Jt,Ot=-9999,kt=function(Xt){var ln=Xt.doc,wn=ln.numPages,Dn=ln.loadingTask.docId,Un=it.useMemo(function(){return Array(wn).fill(null).map(function(Vn,Ln){return{pageIndex:Ln,renderStatus:At.NotRenderedYet,visibility:Ot}})},[Dn]),$n=it.useRef({currentRenderingPage:-1,startRange:0,endRange:wn-1,visibilities:Un}),qn=function(Vn,Ln){$n.current.visibilities[Vn].visibility=Ln};return{getHighestPriorityPage:function(){var Vn=$n.current.visibilities.slice($n.current.startRange,$n.current.endRange+1).filter(function(_r){return _r.visibility>Ot});if(!Vn.length)return-1;for(var Ln=Vn[0].pageIndex,Kn=Vn[Vn.length-1].pageIndex,jn=Vn.length,Sr=0;Sr<jn;Sr++){if(Vn[Sr].renderStatus===At.Rendering)return-1;if(Vn[Sr].renderStatus===At.NotRenderedYet)return Vn[Sr].pageIndex}return Kn+1<wn&&$n.current.visibilities[Kn+1].renderStatus!==At.Rendered?Kn+1:Ln-1>=0&&$n.current.visibilities[Ln-1].renderStatus!==At.Rendered?Ln-1:-1},isInRange:function(Vn){return Vn>=$n.current.startRange&&Vn<=$n.current.endRange},markNotRendered:function(){for(var Vn=0;Vn<wn;Vn++)$n.current.visibilities[Vn].renderStatus=At.NotRenderedYet},markRendered:function(Vn){$n.current.visibilities[Vn].renderStatus=At.Rendered},markRendering:function(Vn){$n.current.currentRenderingPage!==-1&&$n.current.currentRenderingPage!==Vn&&$n.current.visibilities[$n.current.currentRenderingPage].renderStatus===At.Rendering&&($n.current.visibilities[$n.current.currentRenderingPage].renderStatus=At.NotRenderedYet),$n.current.visibilities[Vn].renderStatus=At.Rendering,$n.current.currentRenderingPage=Vn},setOutOfRange:function(Vn){qn(Vn,Ot)},setRange:function(Vn,Ln){$n.current.startRange=Vn,$n.current.endRange=Ln;for(var Kn=0;Kn<wn;Kn++)(Kn<Vn||Kn>Ln)&&($n.current.visibilities[Kn].visibility=Ot,$n.current.visibilities[Kn].renderStatus=At.NotRenderedYet)},setVisibility:qn}},Gt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},zt=it.createContext({l10n:Gt,setL10n:function(){}}),Vt=0,Dt=function(){return Vt++},It=function(Xt,ln,wn){var Dn=function(Un){var $n=ln.current;if($n){var qn=Un.target;if(qn instanceof Element&&qn.shadowRoot){var Vn=Un.composedPath();Vn.length>0&&!$n.contains(Vn[0])&&wn()}else $n.contains(qn)||wn()}};it.useEffect(function(){if(Xt){var Un={capture:!0};return document.addEventListener("click",Dn,Un),function(){document.removeEventListener("click",Dn,Un)}}},[])},Ut=function(Xt){var ln=function(wn){wn.key==="Escape"&&Xt()};it.useEffect(function(){return document.addEventListener("keyup",ln),function(){document.removeEventListener("keyup",ln)}},[])},Yt=function(Xt){var ln=Xt.ariaControlsSuffix,wn=Xt.children,Dn=Xt.closeOnClickOutside,Un=Xt.closeOnEscape,$n=Xt.onToggle,qn=it.useRef(),Vn=it.useContext(dt).direction===_e.TextDirection.RightToLeft;return it.useEffect(function(){var Ln=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Ln}},[]),Ut(function(){qn.current&&Un&&$n()}),It(Dn,qn,$n),mt(function(){var Ln=qn.current;if(Ln){var Kn=.75*document.body.clientHeight;Ln.getBoundingClientRect().height>=Kn&&(Ln.style.overflow="auto",Ln.style.maxHeight="".concat(Kn,"px"))}},[]),it.createElement("div",{"aria-modal":"true",className:ht({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Vn}),id:"rpv-core__modal-body-".concat(ln),ref:qn,role:"dialog",tabIndex:-1},wn)},qt=function(Xt){var ln=Xt.children;return it.createElement("div",{className:"rpv-core__modal-overlay"},ln)};_e.ToggleStatus=void 0,(Jt=_e.ToggleStatus||(_e.ToggleStatus={})).Close="Close",Jt.Open="Open",Jt.Toggle="Toggle";var rn,gn=function(Xt){var ln=it.useState(Xt),wn=ln[0],Dn=ln[1];return{opened:wn,toggle:function(Un){switch(Un){case _e.ToggleStatus.Close:Dn(!1);break;case _e.ToggleStatus.Open:Dn(!0);break;case _e.ToggleStatus.Toggle:default:Dn(function($n){return!$n})}}}},An=function(Xt){var ln=Xt.content,wn=Xt.isOpened,Dn=wn!==void 0&&wn,Un=Xt.target,$n=gn(Dn),qn=$n.opened,Vn=$n.toggle;return it.createElement(it.Fragment,null,Un&&Un(Vn,qn),qn&&ln(Vn))};_e.Position=void 0,(rn=_e.Position||(_e.Position={})).TopLeft="TOP_LEFT",rn.TopCenter="TOP_CENTER",rn.TopRight="TOP_RIGHT",rn.RightTop="RIGHT_TOP",rn.RightCenter="RIGHT_CENTER",rn.RightBottom="RIGHT_BOTTOM",rn.BottomLeft="BOTTOM_LEFT",rn.BottomCenter="BOTTOM_CENTER",rn.BottomRight="BOTTOM_RIGHT",rn.LeftTop="LEFT_TOP",rn.LeftCenter="LEFT_CENTER",rn.LeftBottom="LEFT_BOTTOM";var En,fn,nn,Tn,Cn,vn,_n,Qt,sn=function(Xt,ln,wn,Dn,Un){mt(function(){var $n=ln.current,qn=Xt.current,Vn=wn.current;if(qn&&$n&&Vn){var Ln=Vn.getBoundingClientRect(),Kn=function(_r,gr,Dr,Rr){var Cr=gr.getBoundingClientRect(),rs=_r.getBoundingClientRect(),Vr=rs.height,Zr=rs.width,_i=0,Hr=0;switch(Dr){case _e.Position.TopLeft:_i=Cr.top-Vr,Hr=Cr.left;break;case _e.Position.TopCenter:_i=Cr.top-Vr,Hr=Cr.left+Cr.width/2-Zr/2;break;case _e.Position.TopRight:_i=Cr.top-Vr,Hr=Cr.left+Cr.width-Zr;break;case _e.Position.RightTop:_i=Cr.top,Hr=Cr.left+Cr.width;break;case _e.Position.RightCenter:_i=Cr.top+Cr.height/2-Vr/2,Hr=Cr.left+Cr.width;break;case _e.Position.RightBottom:_i=Cr.top+Cr.height-Vr,Hr=Cr.left+Cr.width;break;case _e.Position.BottomLeft:_i=Cr.top+Cr.height,Hr=Cr.left;break;case _e.Position.BottomCenter:_i=Cr.top+Cr.height,Hr=Cr.left+Cr.width/2-Zr/2;break;case _e.Position.BottomRight:_i=Cr.top+Cr.height,Hr=Cr.left+Cr.width-Zr;break;case _e.Position.LeftTop:_i=Cr.top,Hr=Cr.left-Zr;break;case _e.Position.LeftCenter:_i=Cr.top+Cr.height/2-Vr/2,Hr=Cr.left-Zr;break;case _e.Position.LeftBottom:_i=Cr.top+Cr.height-Vr,Hr=Cr.left-Zr}return{left:Hr+(Rr.left||0),top:_i+(Rr.top||0)}}(qn,$n,Dn,Un),jn=Kn.top,Sr=Kn.left;qn.style.top="".concat(jn-Ln.top,"px"),qn.style.left="".concat(Sr-Ln.left,"px")}},[])},jt=function(Xt){var ln,wn=Xt.customClassName,Dn=Xt.position;return it.createElement("div",{className:ht((ln={"rpv-core__arrow":!0,"rpv-core__arrow--tl":Dn===_e.Position.TopLeft,"rpv-core__arrow--tc":Dn===_e.Position.TopCenter,"rpv-core__arrow--tr":Dn===_e.Position.TopRight,"rpv-core__arrow--rt":Dn===_e.Position.RightTop,"rpv-core__arrow--rc":Dn===_e.Position.RightCenter,"rpv-core__arrow--rb":Dn===_e.Position.RightBottom,"rpv-core__arrow--bl":Dn===_e.Position.BottomLeft,"rpv-core__arrow--bc":Dn===_e.Position.BottomCenter,"rpv-core__arrow--br":Dn===_e.Position.BottomRight,"rpv-core__arrow--lt":Dn===_e.Position.LeftTop,"rpv-core__arrow--lc":Dn===_e.Position.LeftCenter,"rpv-core__arrow--lb":Dn===_e.Position.LeftBottom},ln["".concat(wn)]=wn!=="",ln))})},Bt=function(Xt){var ln=Xt.ariaControlsSuffix,wn=Xt.children,Dn=Xt.closeOnClickOutside,Un=Xt.offset,$n=Xt.position,qn=Xt.targetRef,Vn=Xt.onClose,Ln=it.useRef(),Kn=it.useRef(),jn=it.useRef(),Sr=it.useContext(dt).direction===_e.TextDirection.RightToLeft;It(Dn,Ln,Vn),sn(Ln,qn,jn,$n,Un),mt(function(){var gr=Kn.current;if(gr){var Dr=.75*document.body.clientHeight;gr.getBoundingClientRect().height>=Dr&&(gr.style.overflow="auto",gr.style.maxHeight="".concat(Dr,"px"))}},[]);var _r="rpv-core__popover-body-inner-".concat(ln);return it.createElement(it.Fragment,null,it.createElement("div",{ref:jn,style:{left:0,position:"absolute",top:0}}),it.createElement("div",{"aria-describedby":_r,className:ht({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Sr}),id:"rpv-core__popover-body-".concat(ln),ref:Ln,role:"dialog",tabIndex:-1},it.createElement(jt,{customClassName:"rpv-core__popover-body-arrow",position:$n}),it.createElement("div",{id:_r,ref:Kn},wn)))},hn=function(Xt){var ln=Xt.closeOnEscape,wn=Xt.onClose,Dn=it.useRef();return Ut(function(){Dn.current&&ln&&wn()}),it.createElement("div",{className:"rpv-core__popover-overlay",ref:Dn})},cn=function(Xt){var ln=Xt.ariaControlsSuffix,wn=Xt.children,Dn=Xt.contentRef,Un=Xt.offset,$n=Xt.position,qn=Xt.targetRef,Vn=it.useRef(),Ln=it.useContext(dt).direction===_e.TextDirection.RightToLeft;return sn(Dn,qn,Vn,$n,Un),it.createElement(it.Fragment,null,it.createElement("div",{ref:Vn,style:{left:0,position:"absolute",top:0}}),it.createElement("div",{className:ht({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Ln}),id:"rpv-core__tooltip-body-".concat(ln),ref:Dn,role:"tooltip"},it.createElement(jt,{customClassName:"rpv-core__tooltip-body-arrow",position:$n}),it.createElement("div",{className:"rpv-core__tooltip-body-content"},wn)))};_e.FullScreenMode=void 0,(En=_e.FullScreenMode||(_e.FullScreenMode={})).Normal="Normal",En.Entering="Entering",En.Entered="Entered",En.EnteredCompletely="EnteredCompletely",En.Exitting="Exitting",En.Exited="Exited",_e.LayerRenderStatus=void 0,(fn=_e.LayerRenderStatus||(_e.LayerRenderStatus={}))[fn.PreRender=0]="PreRender",fn[fn.DidRender=1]="DidRender",_e.PageMode=void 0,(nn=_e.PageMode||(_e.PageMode={})).Attachments="UseAttachments",nn.Bookmarks="UseOutlines",nn.ContentGroup="UseOC",nn.Default="UserNone",nn.FullScreen="FullScreen",nn.Thumbnails="UseThumbs",_e.PasswordStatus=void 0,(Tn=_e.PasswordStatus||(_e.PasswordStatus={})).RequiredPassword="RequiredPassword",Tn.WrongPassword="WrongPassword",_e.RotateDirection=void 0,(Cn=_e.RotateDirection||(_e.RotateDirection={})).Backward="Backward",Cn.Forward="Forward",_e.ScrollMode=void 0,(vn=_e.ScrollMode||(_e.ScrollMode={})).Page="Page",vn.Horizontal="Horizontal",vn.Vertical="Vertical",vn.Wrapped="Wrapped",_e.SpecialZoomLevel=void 0,(_n=_e.SpecialZoomLevel||(_e.SpecialZoomLevel={})).ActualSize="ActualSize",_n.PageFit="PageFit",_n.PageWidth="PageWidth",_e.ViewMode=void 0,(Qt=_e.ViewMode||(_e.ViewMode={})).DualPage="DualPage",Qt.DualPageWithCover="DualPageWithCover",Qt.SinglePage="SinglePage";var mn,an=function(Xt,ln){return Xt.reduce(function(wn,Dn,Un){return Un%ln?wn[wn.length-1].push(Dn):wn.push([Dn]),wn},[])},Hn=function(Xt,ln){switch(ln[1].name){case"XYZ":return{bottomOffset:function(wn,Dn){return ln[3]===null?Dn:ln[3]},leftOffset:function(wn,Dn){return ln[2]===null?0:ln[2]},pageIndex:Xt,scaleTo:ln[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:Xt,scaleTo:_e.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:ln[2],leftOffset:0,pageIndex:Xt,scaleTo:_e.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:Xt,scaleTo:1}}},Pn=new Map,er=new Map,cr=function(Xt,ln){return"".concat(Xt.loadingTask.docId,"___").concat(ln.num,"R").concat(ln.gen===0?"":ln.gen)},ir=function(Xt,ln,wn){Pn.set(cr(Xt,ln),wn)},Jn=function(Xt,ln){if(!Xt)return Promise.reject("The document is not loaded yet");var wn="".concat(Xt.loadingTask.docId,"___").concat(ln),Dn=er.get(wn);return Dn?Promise.resolve(Dn):new Promise(function(Un,$n){Xt.getPage(ln+1).then(function(qn){er.set(wn,qn),qn.ref&&ir(Xt,qn.ref,ln),Un(qn)})})},fr=function(Xt,ln){return new Promise(function(wn){new Promise(function(Dn){typeof ln=="string"?Xt.getDestination(ln).then(function(Un){Dn(Un)}):Dn(ln)}).then(function(Dn){if(typeof Dn[0]=="object"&&Dn[0]!==null){var Un=Dn[0],$n=function(Vn,Ln){var Kn=cr(Vn,Ln);return Pn.has(Kn)?Pn.get(Kn):null}(Xt,Un);$n===null?Xt.getPageIndex(Un).then(function(Vn){ir(Xt,Un,Vn),fr(Xt,ln).then(function(Ln){return wn(Ln)})}):wn(Hn($n,Dn))}else{var qn=Hn(Dn[0],Dn);wn(qn)}})})};(function(Xt){Xt[Xt.Solid=1]="Solid",Xt[Xt.Dashed=2]="Dashed",Xt[Xt.Beveled=3]="Beveled",Xt[Xt.Inset=4]="Inset",Xt[Xt.Underline=5]="Underline"})(mn||(mn={}));var dr,lr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Nn=function(Xt,ln,wn,Dn){var Un=parseInt(Xt,10);return Un>=ln&&Un<=wn?Un:Dn},bn=function(Xt){return Xt.contentsObj?Xt.contentsObj.str:Xt.contents||""},Rn=function(Xt){return Xt.titleObj?Xt.titleObj.str:Xt.title||""},Sn=function(Xt){var ln=Xt.annotation,wn=it.useContext(dt).direction,Dn=Rn(ln),Un=bn(ln),$n=wn===_e.TextDirection.RightToLeft,qn=it.useRef(),Vn="";if(ln.modificationDate){var Ln=function(Kn){var jn=lr.exec(Kn);if(!jn)return null;var Sr=parseInt(jn[1],10),_r=Nn(jn[2],1,12,1)-1,gr=Nn(jn[3],1,31,1),Dr=Nn(jn[4],0,23,0),Rr=Nn(jn[5],0,59,0),Cr=Nn(jn[6],0,59,0),rs=jn[7]||"Z",Vr=Nn(jn[8],0,23,0),Zr=Nn(jn[9],0,59,0);switch(rs){case"-":Dr+=Vr,Rr+=Zr;break;case"+":Dr-=Vr,Rr-=Zr}return new Date(Date.UTC(Sr,_r,gr,Dr,Rr,Cr))}(ln.modificationDate);Vn=Ln?"".concat(Ln.toLocaleDateString(),", ").concat(Ln.toLocaleTimeString()):""}return it.useLayoutEffect(function(){if(qn.current){var Kn=document.querySelector('[data-annotation-id="'.concat(ln.id,'"]'));if(Kn){var jn=Kn;return jn.style.zIndex+=1,function(){jn.style.zIndex="".concat(parseInt(jn.style.zIndex,10)-1)}}}},[]),it.createElement("div",{ref:qn,className:ht({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":$n}),style:{top:ln.annotationType===_e.AnnotationType.Popup?"":"100%"}},Dn&&it.createElement(it.Fragment,null,it.createElement("div",{className:ht({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!$n,"rpv-core__annotation-popup-title--rtl":$n})},Dn),it.createElement("div",{className:"rpv-core__annotation-popup-date"},Vn)),Un&&it.createElement("div",{className:"rpv-core__annotation-popup-content"},Un.split(`
`).map(function(Kn,jn){return it.createElement(it.Fragment,{key:jn},Kn,it.createElement("br",null))})))};(function(Xt){Xt.Click="Click",Xt.Hover="Hover"})(dr||(dr={}));var or,xn=function(Xt){var ln,wn=Xt.annotation,Dn=Xt.children,Un=Xt.ignoreBorder,$n=Xt.hasPopup,qn=Xt.isRenderable,Vn=Xt.page,Ln=Xt.viewport,Kn=wn.rect,jn=function(){var os=gn(!1),ys=os.opened,_s=os.toggle,fs=it.useState(dr.Hover),ms=fs[0],Ms=fs[1];return{opened:ys,closeOnHover:function(){ms===dr.Hover&&_s(_e.ToggleStatus.Close)},openOnHover:function(){ms===dr.Hover&&_s(_e.ToggleStatus.Open)},toggleOnClick:function(){switch(ms){case dr.Click:ys&&Ms(dr.Hover),_s(_e.ToggleStatus.Toggle);break;case dr.Hover:Ms(dr.Click),_s(_e.ToggleStatus.Open)}}}}(),Sr=jn.closeOnHover,_r=jn.opened,gr=jn.openOnHover,Dr=jn.toggleOnClick,Rr=(ln=[Kn[0],Vn.view[3]+Vn.view[1]-Kn[1],Kn[2],Vn.view[3]+Vn.view[1]-Kn[3]],[Math.min(ln[0],ln[2]),Math.min(ln[1],ln[3]),Math.max(ln[0],ln[2]),Math.max(ln[1],ln[3])]),Cr=Kn[2]-Kn[0],rs=Kn[3]-Kn[1],Vr={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Un&&wn.borderStyle.width>0){switch(wn.borderStyle.style){case mn.Dashed:Vr.borderStyle="dashed";break;case mn.Solid:Vr.borderStyle="solid";break;case mn.Underline:Vr=Object.assign({borderBottomStyle:"solid"},Vr);case mn.Beveled:case mn.Inset:}var Zr=wn.borderStyle.width;Vr.borderWidth="".concat(Zr,"px"),wn.borderStyle.style!==mn.Underline&&(Cr-=2*Zr,rs-=2*Zr);var _i=wn.borderStyle,Hr=_i.horizontalCornerRadius,as=_i.verticalCornerRadius;(Hr>0||as>0)&&(Vr.borderRadius="".concat(Hr,"px / ").concat(as,"px")),wn.color?Vr.borderColor="rgb(".concat(0|wn.color[0],", ").concat(0|wn.color[1],", ").concat(0|wn.color[2],")"):Vr.borderWidth="0"}return it.createElement(it.Fragment,null,qn&&Dn({popup:{opened:_r,closeOnHover:Sr,openOnHover:gr,toggleOnClick:Dr},slot:{attrs:{style:Object.assign({height:"".concat(rs,"px"),left:"".concat(Rr[0],"px"),top:"".concat(Rr[1],"px"),transform:"matrix(".concat(Ln.transform.join(","),")"),transformOrigin:"-".concat(Rr[0],"px -").concat(Rr[1],"px"),width:"".concat(Cr,"px")},Vr)},children:it.createElement(it.Fragment,null,$n&&_r&&it.createElement(Sn,{annotation:wn}))}}))},on=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},Gn=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},it.createElement("circle",{cy:jn/2,fill:"none",rx:Kn/2-Sr/2,ry:jn/2-Sr/2,stroke:"transparent",strokeWidth:Sr||1})),_r.slot.children)})},Xn=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=Rn(ln),$n=bn(ln),qn=!(ln.hasPopup!==!1||!Un&&!$n),Vn=function(){var Ln,Kn,jn,Sr,_r=ln.file;_r&&(Ln=_r.filename,Kn=_r.content,jn=typeof Kn=="string"?"":URL.createObjectURL(new Blob([Kn],{type:""})),(Sr=document.createElement("a")).style.display="none",Sr.href=jn||Ln,Sr.setAttribute("download",function(gr){var Dr=gr.split("/").pop();return Dr?Dr.split("#")[0].split("?")[0]:gr}(Ln)),document.body.appendChild(Sr),Sr.click(),document.body.removeChild(Sr),jn&&URL.revokeObjectURL(jn))};return it.createElement(xn,{annotation:ln,hasPopup:qn,ignoreBorder:!0,isRenderable:!0,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onDoubleClick:Vn,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},pr=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},Ar=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=Rn(ln),$n=bn(ln),qn=!(!Un&&!$n),Vn=!ln.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(ln.parentType)!==-1;return mt(function(){if(ln.parentId){var Ln=document.querySelector('[data-annotation-id="'.concat(ln.parentId,'"]')),Kn=document.querySelector('[data-annotation-id="'.concat(ln.id,'"]'));if(Ln&&Kn){var jn=parseFloat(Ln.style.left),Sr=parseFloat(Ln.style.top)+parseFloat(Ln.style.height);Kn.style.left="".concat(jn,"px"),Kn.style.top="".concat(Sr,"px"),Kn.style.transformOrigin="-".concat(jn,"px -").concat(Sr,"px")}}},[]),it.createElement(xn,{annotation:ln,hasPopup:Vn,ignoreBorder:!1,isRenderable:qn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":ln.id}),it.createElement(Sn,{annotation:ln}))})},xr=function(Xt){var ln=Xt.annotation,wn=Xt.childAnnotation,Dn=Xt.page,Un=Xt.viewport,$n=ln.hasPopup===!1,qn=Rn(ln),Vn=bn(ln),Ln=!!(ln.hasPopup||qn||Vn);if(ln.quadPoints&&ln.quadPoints.length>0){var Kn=ln.quadPoints.map(function(jn){return Object.assign({},ln,{rect:[jn[2].x,jn[2].y,jn[1].x,jn[1].y],quadPoints:[]})});return it.createElement(it.Fragment,null,Kn.map(function(jn,Sr){return it.createElement(xr,{key:Sr,annotation:jn,childAnnotation:wn,page:Dn,viewport:Un})}))}return it.createElement(xn,{annotation:ln,hasPopup:$n,ignoreBorder:!0,isRenderable:Ln,page:Dn,viewport:Un},function(jn){return it.createElement(it.Fragment,null,it.createElement("div",ct({},jn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":ln.id,onClick:jn.popup.toggleOnClick,onMouseEnter:jn.popup.openOnHover,onMouseLeave:jn.popup.closeOnHover}),jn.slot.children),wn&&wn.annotationType===_e.AnnotationType.Popup&&jn.popup.opened&&it.createElement(Ar,{annotation:wn,page:Dn,viewport:Un}))})},un=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),ln.inkLists&&ln.inkLists.length&&it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},ln.inkLists.map(function(gr,Dr){return it.createElement("polyline",{key:Dr,fill:"none",stroke:"transparent",strokeWidth:Sr||1,points:gr.map(function(Rr){return"".concat(Rr.x-Ln[0],",").concat(Ln[3]-Rr.y)}).join(" ")})})),_r.slot.children)})},pn=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},it.createElement("line",{stroke:"transparent",strokeWidth:Sr||1,x1:Ln[2]-ln.lineCoordinates[0],x2:Ln[2]-ln.lineCoordinates[2],y1:Ln[3]-ln.lineCoordinates[1],y2:Ln[3]-ln.lineCoordinates[3]})),_r.slot.children)})},Fn=/^([^\w]*)(javascript|data|vbscript)/im,Yn=/&#(\w+)(^\w|;)?/g,Qn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ur=/^([^:]+):/gm,vr=function(Xt,ln){var wn,Dn=(wn=Xt||"",wn.replace(Yn,function(Vn,Ln){return String.fromCharCode(Ln)})).replace(Qn,"").trim();if(!Dn)return ln;var Un=Dn[0];if(Un==="."||Un==="/")return Dn;var $n=Dn.match(ur);if(!$n)return Dn;var qn=$n[0];return Fn.test(qn)?ln:Dn},Or=function(Xt){var ln,wn=Xt.annotation,Dn=Xt.annotationContainerRef,Un=Xt.doc,$n=Xt.outlines,qn=Xt.page,Vn=Xt.pageIndex,Ln=Xt.scale,Kn=Xt.viewport,jn=Xt.onExecuteNamedAction,Sr=Xt.onJumpFromLinkAnnotation,_r=Xt.onJumpToDest,gr=it.useRef(),Dr=$n&&$n.length&&wn.dest&&typeof wn.dest=="string"?(ln=$n.find(function(Vr){return Vr.dest===wn.dest}))===null||ln===void 0?void 0:ln.title:"",Rr=!!(wn.url||wn.dest||wn.action||wn.unsafeUrl),Cr={};if(wn.url||wn.unsafeUrl){var rs=vr(wn.url||wn.unsafeUrl,"");rs?Cr={"data-target":"external",href:rs,rel:"noopener noreferrer nofollow",target:wn.newWindow?"_blank":"",title:rs}:Rr=!1}else Cr={href:"","data-annotation-link":wn.id,onClick:function(Vr){Vr.preventDefault(),wn.action?jn(wn.action):fr(Un,wn.dest).then(function(Zr){var _i=gr.current,Hr=Dn.current;if(_i&&Hr){var as=_i.getBoundingClientRect();Hr.style.setProperty("height","100%"),Hr.style.setProperty("width","100%");var os=Hr.getBoundingClientRect();Hr.style.removeProperty("height"),Hr.style.removeProperty("width");var ys=(as.left-os.left)/Ln,_s=(os.bottom-as.bottom+as.height)/Ln;Sr({bottomOffset:_s,label:Dr,leftOffset:ys,pageIndex:Vn})}_r(Zr)})}};return Dr&&(Cr=Object.assign({},Cr,{title:Dr,"aria-label":Dr})),it.createElement(xn,{annotation:wn,hasPopup:!1,ignoreBorder:!1,isRenderable:Rr,page:qn,viewport:Kn},function(Vr){return it.createElement("div",ct({},Vr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":wn.id,"data-testid":"core__annotation--link-".concat(wn.id)}),it.createElement("a",ct({ref:gr},Cr)))})},Fr=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),ln.vertices&&ln.vertices.length&&it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},it.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Sr||1,points:ln.vertices.map(function(gr){return"".concat(gr.x-Ln[0],",").concat(Ln[3]-gr.y)}).join(" ")})),_r.slot.children)})},br=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),ln.vertices&&ln.vertices.length&&it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},it.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Sr||1,points:ln.vertices.map(function(gr){return"".concat(gr.x-Ln[0],",").concat(Ln[3]-gr.y)}).join(" ")})),_r.slot.children)})},Lr=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn),Ln=ln.rect,Kn=Ln[2]-Ln[0],jn=Ln[3]-Ln[1],Sr=ln.borderStyle.width;return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(_r){return it.createElement("div",ct({},_r.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":ln.id,onClick:_r.popup.toggleOnClick,onMouseEnter:_r.popup.openOnHover,onMouseLeave:_r.popup.closeOnHover}),it.createElement("svg",{height:"".concat(jn,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Kn," ").concat(jn),width:"".concat(Kn,"px")},it.createElement("rect",{height:jn-Sr,fill:"none",stroke:"transparent",strokeWidth:Sr||1,x:Sr/2,y:Sr/2,width:Kn-Sr})),_r.slot.children)})},Ir=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},Ur=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},en=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},dn=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),it.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),it.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),it.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Bn=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),it.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),it.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),it.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),it.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),it.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),it.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),it.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),it.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),it.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},tr=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),it.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},tn=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),it.createElement("path",{d:"M6 4.5L6 0.5"}),it.createElement("path",{d:"M18 4.5L18 0.5"}),it.createElement("path",{d:"M10 4.5L10 0.5"}),it.createElement("path",{d:"M14 4.5L14 0.5"}))},yn=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),it.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),it.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},On=function(){return it.createElement(vt,{size:16},it.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},kn=function(Xt){var ln=Xt.annotation,wn=Xt.childAnnotation,Dn=Xt.page,Un=Xt.viewport,$n=ln.hasPopup===!1,qn=Rn(ln),Vn=bn(ln),Ln=!!(ln.hasPopup||qn||Vn),Kn=ln.name?ln.name.toLowerCase():"";return it.createElement(xn,{annotation:ln,hasPopup:$n,ignoreBorder:!1,isRenderable:Ln,page:Dn,viewport:Un},function(jn){return it.createElement(it.Fragment,null,it.createElement("div",ct({},jn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":ln.id,onClick:jn.popup.toggleOnClick,onMouseEnter:jn.popup.openOnHover,onMouseLeave:jn.popup.closeOnHover}),Kn&&it.createElement("div",{className:"rpv-core__annotation-text-icon"},Kn==="check"&&it.createElement(pt,null),Kn==="comment"&&it.createElement(dn,null),Kn==="help"&&it.createElement(Bn,null),Kn==="insert"&&it.createElement(On,null),Kn==="key"&&it.createElement(tr,null),Kn==="note"&&it.createElement(tn,null),(Kn==="newparagraph"||Kn==="paragraph")&&it.createElement(yn,null)),jn.slot.children),wn&&wn.annotationType===_e.AnnotationType.Popup&&jn.popup.opened&&it.createElement(Ar,{annotation:wn,page:Dn,viewport:Un}))})},Mn=function(Xt){var ln=Xt.annotation,wn=Xt.page,Dn=Xt.viewport,Un=ln.hasPopup===!1,$n=Rn(ln),qn=bn(ln),Vn=!!(ln.hasPopup||$n||qn);return it.createElement(xn,{annotation:ln,hasPopup:Un,ignoreBorder:!0,isRenderable:Vn,page:wn,viewport:Dn},function(Ln){return it.createElement("div",ct({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":ln.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children)})},ar=function(Xt){var ln=Xt.annotations,wn=Xt.doc,Dn=Xt.outlines,Un=Xt.page,$n=Xt.pageIndex,qn=Xt.plugins,Vn=Xt.rotation,Ln=Xt.scale,Kn=Xt.onExecuteNamedAction,jn=Xt.onJumpFromLinkAnnotation,Sr=Xt.onJumpToDest,_r=it.useRef(),gr=Un.getViewport({rotation:Vn,scale:Ln}).clone({dontFlip:!0}),Dr=ln.filter(function(Rr){return!Rr.parentId});return mt(function(){var Rr=_r.current;Rr&&qn.forEach(function(Cr){Cr.onAnnotationLayerRender&&Cr.onAnnotationLayerRender({annotations:Dr,container:Rr,pageIndex:$n,rotation:Vn,scale:Ln})})},[]),it.createElement("div",{ref:_r,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat($n)},Dr.map(function(Rr){var Cr=ln.find(function(rs){return rs.parentId===Rr.id});switch(Rr.annotationType){case _e.AnnotationType.Caret:return it.createElement(on,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Circle:return it.createElement(Gn,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.FileAttachment:return it.createElement(Xn,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.FreeText:return it.createElement(pr,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Highlight:return it.createElement(xr,{key:Rr.id,annotation:Rr,childAnnotation:Cr,page:Un,viewport:gr});case _e.AnnotationType.Ink:return it.createElement(un,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Line:return it.createElement(pn,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Link:return it.createElement(Or,{key:Rr.id,annotation:Rr,annotationContainerRef:_r,doc:wn,outlines:Dn,page:Un,pageIndex:$n,scale:Ln,viewport:gr,onExecuteNamedAction:Kn,onJumpFromLinkAnnotation:jn,onJumpToDest:Sr});case _e.AnnotationType.Polygon:return it.createElement(Fr,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Polyline:return it.createElement(br,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Popup:return it.createElement(Ar,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Square:return it.createElement(Lr,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Squiggly:return it.createElement(Ir,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Stamp:return it.createElement(Ur,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.StrikeOut:return it.createElement(en,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});case _e.AnnotationType.Text:return it.createElement(kn,{key:Rr.id,annotation:Rr,childAnnotation:Cr,page:Un,viewport:gr});case _e.AnnotationType.Underline:return it.createElement(Mn,{key:Rr.id,annotation:Rr,page:Un,viewport:gr});default:return it.createElement(it.Fragment,{key:Rr.id})}}))},hr=function(Xt){var ln=Xt.page,wn=Xt.renderAnnotations,Dn=Kt(),Un=it.useState({loading:!0,annotations:[]}),$n=Un[0],qn=Un[1];return it.useEffect(function(){ln.getAnnotations({intent:"display"}).then(function(Vn){Dn.current&&qn({loading:!1,annotations:Vn})})},[]),$n.loading?it.createElement(it.Fragment,null):wn($n.annotations)},Wn=function(Xt){var ln=Xt.doc,wn=Xt.outlines,Dn=Xt.page,Un=Xt.pageIndex,$n=Xt.plugins,qn=Xt.rotation,Vn=Xt.scale,Ln=Xt.onExecuteNamedAction,Kn=Xt.onJumpFromLinkAnnotation,jn=Xt.onJumpToDest;return it.createElement(hr,{page:Dn,renderAnnotations:function(Sr){return it.createElement(ar,{annotations:Sr,doc:ln,outlines:wn,page:Dn,pageIndex:Un,plugins:$n,rotation:qn,scale:Vn,onExecuteNamedAction:Ln,onJumpFromLinkAnnotation:Kn,onJumpToDest:jn})}})},Br=function(Xt,ln){var wn=Xt%ln;return wn===0?Xt:Math.floor(Xt-wn)},Mr=function(Xt){var ln=Xt.canvasLayerRef,wn=Xt.height,Dn=Xt.page,Un=Xt.pageIndex,$n=Xt.plugins,qn=Xt.rotation,Vn=Xt.scale,Ln=Xt.width,Kn=Xt.onRenderCanvasCompleted,jn=it.useRef();return mt(function(){var Sr=jn.current;Sr&&Sr.cancel();var _r=ln.current;_r.removeAttribute("data-testid"),$n.forEach(function(os){os.onCanvasLayerRender&&os.onCanvasLayerRender({ele:_r,pageIndex:Un,rotation:qn,scale:Vn,status:_e.LayerRenderStatus.PreRender})});var gr=Dn.getViewport({rotation:qn,scale:Vn}),Dr=window.devicePixelRatio||1,Rr=Math.sqrt(16777216/(gr.width*gr.height)),Cr=Dr>Rr;Cr?_r.style.transform="scale(1, 1)":_r.style.removeProperty("transform");var rs=Math.min(Rr,Dr),Vr=function(os,ys){var _s,fs;if(Math.floor(os)===os)return[os,1];var ms=1/os;if(ms>ys)return[1,ys];if(Math.floor(ms)===ms)return[1,ms];for(var Ms=os>1?ms:os,Zs=0,eo=1,ho=1,Hs=1;;){var Ks=Zs+ho,ro=eo+Hs;if(ro>ys)break;Ms<=Ks/ro?(ho=(_s=[Ks,ro])[0],Hs=_s[1]):(Zs=(fs=[Ks,ro])[0],eo=fs[1])}return Ms<(Zs/eo+ho/Hs)/2?Ms===os?[Zs,eo]:[eo,Zs]:Ms===os?[ho,Hs]:[Hs,ho]}(rs,8),Zr=Vr[0],_i=Vr[1];_r.width=Br(gr.width*rs,Zr),_r.height=Br(gr.height*rs,Zr),_r.style.width="".concat(Br(gr.width,_i),"px"),_r.style.height="".concat(Br(gr.height,_i),"px"),_r.hidden=!0;var Hr=_r.getContext("2d",{alpha:!1}),as=Cr||Dr!==1?[rs,0,0,rs,0,0]:null;return jn.current=Dn.render({canvasContext:Hr,transform:as,viewport:gr}),jn.current.promise.then(function(){_r.hidden=!1,_r.setAttribute("data-testid","core__canvas-layer-".concat(Un)),$n.forEach(function(os){os.onCanvasLayerRender&&os.onCanvasLayerRender({ele:_r,pageIndex:Un,rotation:qn,scale:Vn,status:_e.LayerRenderStatus.DidRender})}),Kn()},function(){Kn()}),function(){_r&&(_r.width=0,_r.height=0)}},[]),it.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(wn,"px"),width:"".concat(Ln,"px")}},it.createElement("canvas",{ref:ln}))},wr=function(Xt){var ln=Xt.height,wn=Xt.page,Dn=Xt.rotation,Un=Xt.scale,$n=Xt.width,qn=it.useRef();return mt(function(){var Vn=qn.current,Ln=wn.getViewport({rotation:Dn,scale:Un});wn.getOperatorList().then(function(Kn){(function(){var jn=qn.current;jn&&(jn.innerHTML="")})(),new st.SVGGraphics(wn.commonObjs,wn.objs).getSVG(Kn,Ln).then(function(jn){jn.style.height="".concat(ln,"px"),jn.style.width="".concat($n,"px"),Vn.appendChild(jn)})})},[]),it.createElement("div",{className:"rpv-core__svg-layer",ref:qn})},Pr=function(Xt){var ln=Xt.containerRef,wn=Xt.page,Dn=Xt.pageIndex,Un=Xt.plugins,$n=Xt.rotation,qn=Xt.scale,Vn=Xt.onRenderTextCompleted,Ln=it.useRef(),Kn=function(){var jn=ln.current;jn&&([].slice.call(jn.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Sr){return jn.removeChild(Sr)}),[].slice.call(jn.querySelectorAll('br[role="presentation"]')).forEach(function(Sr){return jn.removeChild(Sr)}))};return mt(function(){var jn=Ln.current;jn&&jn.cancel();var Sr=ln.current;if(Sr){Sr.removeAttribute("data-testid");var _r=wn.getViewport({rotation:$n,scale:qn});return Un.forEach(function(gr){gr.onTextLayerRender&&gr.onTextLayerRender({ele:Sr,pageIndex:Dn,scale:qn,status:_e.LayerRenderStatus.PreRender})}),wn.getTextContent().then(function(gr){Kn(),Ln.current=st.renderTextLayer({container:Sr,textContent:gr,textContentSource:gr,viewport:_r}),Ln.current.promise.then(function(){Sr.setAttribute("data-testid","core__text-layer-".concat(Dn)),[].slice.call(Sr.children).forEach(function(Dr){Dr.classList.contains("rpv-core__text-layer-text--not")||Dr.classList.add("rpv-core__text-layer-text")}),Un.forEach(function(Dr){Dr.onTextLayerRender&&Dr.onTextLayerRender({ele:Sr,pageIndex:Dn,scale:qn,status:_e.LayerRenderStatus.DidRender})}),Vn()},function(){Sr.removeAttribute("data-testid"),Vn()})}),function(){var gr;Kn(),(gr=Ln.current)===null||gr===void 0||gr.cancel()}}},[]),it.createElement("div",{className:"rpv-core__text-layer",ref:ln})},Wr=function(Xt){var ln=Xt.doc,wn=Xt.measureRef,Dn=Xt.outlines,Un=Xt.pageIndex,$n=Xt.pageRotation,qn=Xt.pageSize,Vn=Xt.plugins,Ln=Xt.renderPage,Kn=Xt.renderQueueKey,jn=Xt.rotation,Sr=Xt.scale,_r=Xt.shouldRender,gr=Xt.viewMode,Dr=Xt.onExecuteNamedAction,Rr=Xt.onJumpFromLinkAnnotation,Cr=Xt.onJumpToDest,rs=Xt.onRenderCompleted,Vr=Xt.onRotatePage,Zr=Kt(),_i=it.useState(null),Hr=_i[0],as=_i[1],os=it.useState(!1),ys=os[0],_s=os[1],fs=it.useState(!1),ms=fs[0],Ms=fs[1],Zs=it.useRef(),eo=it.useRef(),ho=Math.abs(jn+$n)%180==0,Hs=qn.pageWidth*Sr,Ks=qn.pageHeight*Sr,ro=ho?Hs:Ks,io=ho?Ks:Hs,po=(qn.rotation+jn+$n)%360,Ho=it.useRef(0),No=Ln||function(fo){return it.createElement(it.Fragment,null,fo.canvasLayer.children,fo.textLayer.children,fo.annotationLayer.children)};return it.useEffect(function(){as(null),_s(!1),Ms(!1)},[$n,jn,Sr]),it.useEffect(function(){_r&&Zr.current&&!Hr&&Jn(ln,Un).then(function(fo){Zr.current&&(Ho.current=Kn,as(fo))})},[_r,Hr]),it.useEffect(function(){ys&&ms&&(Kn!==Ho.current?(as(null),_s(!1),Ms(!1)):rs(Un))},[ys,ms]),it.createElement("div",{className:ht({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":gr===_e.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":gr===_e.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":gr===_e.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(Un),ref:wn,style:{height:"".concat(io,"px"),width:"".concat(ro,"px")}},Hr?it.createElement(it.Fragment,null,No({annotationLayer:{attrs:{},children:it.createElement(Wn,{doc:ln,outlines:Dn,page:Hr,pageIndex:Un,plugins:Vn,rotation:po,scale:Sr,onExecuteNamedAction:Dr,onJumpFromLinkAnnotation:Rr,onJumpToDest:Cr})},canvasLayer:{attrs:{},children:it.createElement(Mr,{canvasLayerRef:Zs,height:io,page:Hr,pageIndex:Un,plugins:Vn,rotation:po,scale:Sr,width:ro,onRenderCanvasCompleted:function(){Zr.current&&_s(!0)}})},canvasLayerRendered:ys,doc:ln,height:io,pageIndex:Un,rotation:po,scale:Sr,svgLayer:{attrs:{},children:it.createElement(wr,{height:io,page:Hr,rotation:po,scale:Sr,width:ro})},textLayer:{attrs:{},children:it.createElement(Pr,{containerRef:eo,page:Hr,pageIndex:Un,plugins:Vn,rotation:po,scale:Sr,onRenderTextCompleted:function(){Zr.current&&Ms(!0)}})},textLayerRendered:ms,width:ro,markRendered:rs,onRotatePage:function(fo){return Vr(Un,fo)}}),Vn.map(function(fo,Eo){return fo.renderPageLayer?it.createElement(it.Fragment,{key:Eo},fo.renderPageLayer({canvasLayerRef:Zs,canvasLayerRendered:ys,doc:ln,height:io,pageIndex:Un,rotation:po,scale:Sr,textLayerRef:eo,textLayerRendered:ms,width:ro})):it.createElement(it.Fragment,{key:Eo})})):it.createElement(xt,{testId:"core__page-layer-loading-".concat(Un)}))},es=function(Xt,ln){var wn=ln.rect;return Xt.height!==wn.height||Xt.width!==wn.width?wn:Xt};(function(Xt){Xt.Horizontal="Horizontal",Xt.Vertical="Vertical",Xt.Both="Both"})(or||(or={}));var ts=function(Xt){return 1-Math.pow(1-Xt,4)},Qr=1e-4,zr={left:0,top:0},kr={capture:!1,passive:!0},ws=function(Xt){var ln=Xt.elementRef,wn=Xt.enableSmoothScroll,Dn=Xt.isRtl,Un=Xt.scrollDirection,$n=Xt.onSmoothScroll,qn=it.useState(zr),Vn=qn[0],Ln=qn[1],Kn=it.useState(ln.current),jn=Kn[0],Sr=Kn[1],_r=Dn?-1:1,gr=it.useRef(Un);gr.current=Un;var Dr=it.useRef(zr),Rr=it.useRef(!0),Cr=it.useCallback(function(){Rr.current=!0,wn&&Ln(Dr.current),$n(!1)},[]),rs=it.useCallback(function(){if(jn){switch(gr.current){case or.Horizontal:Dr.current={left:_r*jn.scrollLeft,top:0};break;case or.Both:Dr.current={left:_r*jn.scrollLeft,top:jn.scrollTop};break;case or.Vertical:default:Dr.current={left:0,top:jn.scrollTop}}wn&&!Rr.current||Ln(Dr.current)}},[jn]);mt(function(){Sr(ln.current)}),mt(function(){if(jn)return jn.addEventListener("scroll",rs,kr),function(){jn.removeEventListener("scroll",rs,kr)}},[jn]);var Vr=it.useCallback(function(Zr,_i){var Hr=ln.current;if(!Hr)return Promise.resolve();var as={left:0,top:0};switch(gr.current){case or.Horizontal:as.left=_r*Zr.left;break;case or.Both:as.left=_r*Zr.left,as.top=Zr.top;break;case or.Vertical:default:as.top=Zr.top}return _i?(Rr.current=!1,$n(!0),new Promise(function(os,ys){(function(_s,fs,ms,Ms,Zs,eo){Zs===void 0&&(Zs=function(Eo){return Eo}),eo===void 0&&(eo=function(){});var ho=0,Hs=0,Ks=!1;switch(fs){case or.Horizontal:Hs=_s.scrollLeft,ho=0;case or.Both:Hs=_s.scrollLeft,ho=_s.scrollTop;break;case or.Vertical:default:Hs=0,ho=_s.scrollTop}var ro=function(){Ks||(Ks=!0,_s.scrollLeft=ms.left,_s.scrollTop=ms.top,eo())};if(Math.abs(ho-ms.top)<=Qr&&fs===or.Vertical)ro();else if(Math.abs(Hs-ms.left)<=Qr&&fs===or.Horizontal)ro();else{var io,po=-1,Ho=Hs-ms.left,No=ho-ms.top,fo=function(Eo){po===-1&&(po=Eo);var qo=Eo-po,ls=Math.min(qo/Ms,1),ss=Zs(ls),Yr={left:Hs-Ho*ss,top:ho-No*ss};switch(fs){case or.Horizontal:_s.scrollLeft=Yr.left;break;case or.Both:_s.scrollLeft=Yr.left,_s.scrollTop=Yr.top;break;case or.Vertical:default:_s.scrollTop=Yr.top}Math.abs(Yr.top-ms.top)<=Qr&&Math.abs(Yr.left-ms.left)<=Qr&&!Ks&&(window.cancelAnimationFrame(io),ro()),qo<Ms?io=window.requestAnimationFrame(fo):window.cancelAnimationFrame(io)};io=window.requestAnimationFrame(fo)}})(Hr,gr.current,as,400,ts,function(){Cr(),os()})})):new Promise(function(os,ys){switch(gr.current){case or.Horizontal:Hr.scrollLeft=as.left;break;case or.Both:Hr.scrollLeft=as.left,Hr.scrollTop=as.top;break;case or.Vertical:default:Hr.scrollTop=as.top}os()})},[ln]);return{scrollOffset:Vn,scrollTo:Vr}},$r=function(Xt,ln,wn){return Math.max(Xt,Math.min(wn,ln))},Ps=function(Xt,ln){if(ln!==_e.ViewMode.DualPageWithCover)return 0;if(!function(Un){var $n=Un.length;if($n===1)return!1;for(var qn=1;qn<$n;qn++)if(Un[qn].height!==Un[0].height||Un[qn].width!==Un[0].width)return!0;return!1}(Xt))return 2*Xt[0].width;var wn=an(Xt.slice(1),2).map(function(Un){return Un.length===2?Un[0].width+Un[1].width:Un[0].width}),Dn=[Xt[0].width].concat(wn);return Math.max.apply(Math,Dn)},Qs={left:0,top:0},Os={left:0,top:0},Ws={left:0,top:0},us={left:0,top:0},zs={height:0,width:0},Ns={left:0,top:0},cs="data-virtual-index",Xs=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],bo=function(Xt){var ln=Xt.enableSmoothScroll,wn=Xt.isRtl,Dn=Xt.numberOfItems,Un=Xt.parentRef,$n=Xt.setRenderRange,qn=Xt.sizes,Vn=Xt.scrollMode,Ln=Xt.viewMode,Kn=it.useState(!1),jn=Kn[0],Sr=Kn[1],_r=it.useCallback(function(ls){return Sr(ls)},[]),gr=it.useRef(Vn);gr.current=Vn;var Dr=it.useRef(Ln);Dr.current=Ln;var Rr=Vn===_e.ScrollMode.Wrapped||Ln===_e.ViewMode.DualPageWithCover||Ln===_e.ViewMode.DualPage?or.Both:Vn===_e.ScrollMode.Horizontal?or.Horizontal:or.Vertical,Cr=ws({elementRef:Un,enableSmoothScroll:ln,isRtl:wn,scrollDirection:Rr,onSmoothScroll:_r}),rs=Cr.scrollOffset,Vr=Cr.scrollTo,Zr=function(ls){var ss=ls.elementRef,Yr=it.useState(ss.current),qr=Yr[0],Xr=Yr[1],ds=it.useRef(!1),vs=it.useReducer(es,{height:0,width:0}),jr=vs[0],Nr=vs[1];return mt(function(){ss.current!==qr&&Xr(ss.current)}),mt(function(){if(qr&&!ds.current){ds.current=!0;var gs=qr.getBoundingClientRect(),xs=gs.height,$s=gs.width;Nr({rect:{height:xs,width:$s}})}},[qr]),it.useEffect(function(){if(qr){var gs=new ResizeObserver(function(xs,$s){xs.forEach(function(Vs){if(Vs.target===qr){var go=Vs.contentRect,Mo=go.height,Es=go.width;Nr({rect:{height:Mo,width:Es}})}})});return gs.observe(qr),function(){gs.unobserve(qr)}}},[qr]),jr}({elementRef:Un}),_i=it.useRef({scrollOffset:Ns,measurements:[]});_i.current.scrollOffset=rs;var Hr=it.useMemo(function(){return Array(Dn).fill(-1)},[]),as=it.useState(Hr),os=as[0],ys=as[1],_s=it.useMemo(function(){var ls=new IntersectionObserver(function(ss){ss.forEach(function(Yr){var qr=Yr.isIntersecting?Yr.intersectionRatio:-1,Xr=Yr.target.getAttribute(cs);if(Xr){var ds=parseInt(Xr,10);0<=ds&&ds<Dn&&ys(function(vs){return vs[ds]=qr,function(jr,Nr,gs){for(var xs,$s=0,Vs=Nr.length;$s<Vs;$s++)!xs&&$s in Nr||(xs||(xs=Array.prototype.slice.call(Nr,0,$s)),xs[$s]=Nr[$s]);return jr.concat(xs||Array.prototype.slice.call(Nr))}([],vs)})}})},{threshold:Xs});return ls},[]),fs=it.useMemo(function(){return Vn===_e.ScrollMode.Page&&Ln===_e.ViewMode.SinglePage?function(ls,ss,Yr){for(var qr=[],Xr=0;Xr<ls;Xr++){var ds={height:Math.max(ss.height,Yr[Xr].height),width:Math.max(ss.width,Yr[Xr].width)},vs=Xr===0?us:qr[Xr-1].end,jr={left:vs.left+ds.width,top:vs.top+ds.height};qr[Xr]={index:Xr,start:vs,size:ds,end:jr,visibility:-1}}return qr}(Dn,Zr,qn):Ln===_e.ViewMode.DualPageWithCover?function(ls,ss,Yr,qr){for(var Xr=[],ds=0,vs=0,jr=Ws,Nr=0;Nr<ls;Nr++){var gs=Nr===0?{height:qr===_e.ScrollMode.Page?Math.max(ss.height,Yr[Nr].height):Yr[Nr].height,width:qr===_e.ScrollMode.Page?Math.max(ss.width,Yr[Nr].width):Yr[Nr].width}:{height:qr===_e.ScrollMode.Page?Math.max(ss.height,Yr[Nr].height):Yr[Nr].height,width:Math.max(ss.width/2,Yr[Nr].width)};qr===_e.ScrollMode.Page?jr=Nr===0?Ws:{left:Nr%2==0?gs.width:0,top:Math.floor((Nr-1)/2)*gs.height+Xr[0].end.top}:Nr===0?(jr=Ws,ds=Yr[0].height,vs=0):Nr%2==1?(jr={left:0,top:ds+=vs},vs=Nr===ls-1?Yr[Nr].height:Math.max(Yr[Nr].height,Yr[Nr+1].height)):jr={left:Xr[Nr-1].end.left,top:ds};var xs={left:jr.left+gs.width,top:jr.top+gs.height};Xr[Nr]={index:Nr,start:jr,size:gs,end:xs,visibility:-1}}return Xr}(Dn,Zr,qn,Vn):Ln===_e.ViewMode.DualPage?function(ls,ss,Yr,qr){for(var Xr=[],ds=0,vs=0,jr=Os,Nr=0;Nr<ls;Nr++){var gs={height:qr===_e.ScrollMode.Page?Math.max(ss.height,Yr[Nr].height):Yr[Nr].height,width:Math.max(ss.width/2,Yr[Nr].width)};qr===_e.ScrollMode.Page?jr={left:Nr%2==0?0:gs.width,top:Math.floor(Nr/2)*gs.height}:Nr%2==0?(jr={left:0,top:ds+=vs},vs=Nr===ls-1?Yr[Nr].height:Math.max(Yr[Nr].height,Yr[Nr+1].height)):jr={left:Xr[Nr-1].end.left,top:ds};var xs={left:jr.left+gs.width,top:jr.top+gs.height};Xr[Nr]={index:Nr,start:jr,size:gs,end:xs,visibility:-1}}return Xr}(Dn,Zr,qn,Vn):function(ls,ss,Yr,qr){for(var Xr=[],ds=0,vs={left:0,top:0},jr=0,Nr=Qs,gs=0;gs<ls;gs++){var xs=Yr[gs];if(gs===0)ds=xs.width,vs={left:0,top:0},jr=xs.height;else switch(qr){case _e.ScrollMode.Wrapped:(ds+=xs.width)<ss.width?(Nr={left:Xr[gs-1].end.left,top:vs.top},jr=Math.max(jr,xs.height)):(ds=xs.width,vs={left:(Nr={left:vs.left,top:vs.top+jr}).left,top:Nr.top},jr=xs.height);break;case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:Nr=Xr[gs-1].end}var $s={left:Nr.left+xs.width,top:Nr.top+xs.height};Xr[gs]={index:gs,start:Nr,size:xs,end:$s,visibility:-1}}return Xr}(Dn,Zr,qn,Vn)},[Vn,qn,Ln,Zr]),ms=fs[Dn-1]?{height:fs[Dn-1].end.top,width:fs[Dn-1].end.left}:zs;_i.current.measurements=fs;var Ms=it.useMemo(function(){var ls=function(gs,xs,$s,Vs){var go=0;switch(gs){case or.Horizontal:go=Vs.left;break;case or.Vertical:default:go=Vs.top}var Mo=xs.length-1,Es=function(Ls,_l,Pl,Bl){for(;Ls<=_l;){var xl=(Ls+_l)/2|0,Ol=Bl(xl);if(Ol<Pl)Ls=xl+1;else{if(!(Ol>Pl))return xl;_l=xl-1}}return Ls>0?Ls-1:0}(0,Mo,go,function(Ls){switch(gs){case or.Horizontal:return xs[Ls].start.left;case or.Both:case or.Vertical:default:return xs[Ls].start.top}});if(gs===or.Both)for(var Ys=xs[Es].start.top;Es-1>=0&&xs[Es-1].start.top===Ys&&xs[Es-1].start.left>=Vs.left;)Es--;for(var Bs=Es;Bs<=Mo;){var As={top:xs[Bs].start.top-Vs.top,left:xs[Bs].start.left-Vs.left},oo={height:$s.height-As.top,width:$s.width-As.left};if(gs===or.Horizontal&&oo.width<0||gs===or.Vertical&&oo.height<0||gs===or.Both&&(oo.width<0||oo.height<0))break;Bs++}return{start:Es,end:Bs}}(Rr,fs,Zr,rs),ss=ls.start,Yr=ls.end,qr=os.slice($r(0,Dn,ss),$r(0,Dn,Yr)),Xr=ss+qr.reduce(function(gs,xs,$s,Vs){return xs>Vs[gs]?$s:gs},0),ds=Xr=$r(0,Dn-1,Xr),vs=$n({endPage:Yr,numPages:Dn,startPage:ss}),jr=vs.startPage,Nr=vs.endPage;switch(jr=Math.max(jr,0),Nr=Math.min(Nr,Dn-1),Ln){case _e.ViewMode.DualPageWithCover:Xr>0&&(ds=Xr%2==1?Xr:Xr-1),jr=jr===0?0:jr%2==1?jr:jr-1,Dn-(Nr=Nr%2==1?Nr-1:Nr)<=2&&(Nr=Dn-1);break;case _e.ViewMode.DualPage:ds=Xr%2==0?Xr:Xr-1,jr=jr%2==0?jr:jr-1,Nr=Nr%2==1?Nr:Nr-1;break;case _e.ViewMode.SinglePage:default:ds=Xr}return{startPage:jr,endPage:Nr,maxVisbilityIndex:ds}},[fs,Zr,rs,Ln,os]),Zs=Ms.startPage,eo=Ms.endPage,ho=Ms.maxVisbilityIndex,Hs=it.useMemo(function(){for(var ls=[],ss=function(qr){var Xr=fs[qr],ds=ct(ct({},Xr),{visibility:os[qr]!==void 0?os[qr]:-1,measureRef:function(vs){vs&&(vs.setAttribute(cs,"".concat(qr)),_s.observe(vs))}});ls.push(ds)},Yr=Zs;Yr<=eo;Yr++)ss(Yr);return ls},[Zs,eo,os,fs]),Ks=it.useCallback(function(ls,ss){var Yr=_i.current.measurements[$r(0,Dn-1,ls)],qr=gr.current===_e.ScrollMode.Page?Ns:ss;return Yr?Vr({left:qr.left+Yr.start.left,top:qr.top+Yr.start.top},ln):Promise.resolve()},[Vr,ln]),ro=it.useCallback(function(ls,ss){var Yr=_i.current.measurements,qr=Yr[ls].start,Xr=Yr.find(function(vs){return vs.start.top-qr.top>1e-12});if(!Xr)return Promise.resolve();var ds=Xr.index;switch(Dr.current){case _e.ViewMode.DualPage:ds=ds%2==0?ds:ds+1;break;case _e.ViewMode.DualPageWithCover:ds=ds%2==1?ds:ds+1}return Ks(ds,ss)},[]),io=it.useCallback(function(ls,ss){for(var Yr=_i.current.measurements,qr=Yr[ls].start,Xr=ls,ds=!1,vs=Dn-1;vs>=0;vs--)if(qr.top-Yr[vs].start.top>1e-12){ds=!0,Xr=Yr[vs].index;break}if(!ds)return Promise.resolve();switch(Dr.current){case _e.ViewMode.DualPage:Xr=Xr%2==0?Xr:Xr-1;break;case _e.ViewMode.DualPageWithCover:Xr=Xr%2==0?Xr-1:Xr}return Xr===ls&&(Xr=ls-1),Ks(Xr,ss)},[]),po=it.useCallback(function(ls,ss){if(Dr.current===_e.ViewMode.DualPageWithCover||Dr.current===_e.ViewMode.DualPage)return ro(ls,ss);switch(gr.current){case _e.ScrollMode.Wrapped:return ro(ls,ss);case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:return Ks(ls+1,ss)}},[]),Ho=it.useCallback(function(ls,ss){if(Dr.current===_e.ViewMode.DualPageWithCover||Dr.current===_e.ViewMode.DualPage)return io(ls,ss);switch(gr.current){case _e.ScrollMode.Wrapped:return io(ls,ss);case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:return Ks(ls-1,ss)}},[]),No=it.useCallback(function(){return function(ls,ss){switch(ss){case _e.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(ls.width,"px")};case _e.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(ls.height,"px"),width:"100%"}}}(ms,gr.current)},[ms]),fo=it.useCallback(function(ls){return function(ss,Yr,qr){return qr!==_e.ScrollMode.Page?{}:{height:"".concat(Yr.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(ss.start.top,"px)")}}(ls,Zr,gr.current)},[Zr]),Eo=it.useCallback(function(ls){return function(ss,Yr,qr,Xr,ds){var vs,jr,Nr,gs,xs,$s,Vs,go=Yr?"right":"left",Mo=Yr?-1:1,Es=qr.length,Ys=ss.start.left*Mo,Bs=ss.size,As=Bs.height,oo=Bs.width;if(Xr===_e.ViewMode.DualPageWithCover){var Ls=ds===_e.ScrollMode.Page?0:ss.start.top;return ss.index===0||Es%2==0&&ss.index===Es-1?((vs={height:"".concat(As,"px"),minWidth:"".concat(Ps(qr,Xr),"px"),width:"100%"})[go]=0,vs.position="absolute",vs.top=0,vs.transform="translate(".concat(Ys,"px, ").concat(Ls,"px)"),vs):((jr={height:"".concat(As,"px"),width:"".concat(oo,"px")})[go]=0,jr.position="absolute",jr.top=0,jr.transform="translate(".concat(Ys,"px, ").concat(Ls,"px)"),jr)}if(Xr===_e.ViewMode.DualPage)return(Nr={height:"".concat(As,"px"),width:"".concat(oo,"px")})[go]=0,Nr.position="absolute",Nr.top=0,Nr.transform="translate(".concat(Ys,"px, ").concat(ds===_e.ScrollMode.Page?0:ss.start.top,"px)"),Nr;switch(ds){case _e.ScrollMode.Horizontal:return(gs={height:"100%",width:"".concat(oo,"px")})[go]=0,gs.position="absolute",gs.top=0,gs.transform="translateX(".concat(Ys,"px)"),gs;case _e.ScrollMode.Page:return(xs={height:"".concat(As,"px"),width:"".concat(oo,"px")})[go]=0,xs.position="absolute",xs.top=0,xs;case _e.ScrollMode.Wrapped:return($s={height:"".concat(As,"px"),width:"".concat(oo,"px")})[go]=0,$s.position="absolute",$s.top=0,$s.transform="translate(".concat(Ys,"px, ").concat(ss.start.top,"px)"),$s;case _e.ScrollMode.Vertical:default:return(Vs={height:"".concat(As,"px"),width:"100%"})[go]=0,Vs.position="absolute",Vs.top=0,Vs.transform="translateY(".concat(ss.start.top,"px)"),Vs}}(ls,wn,qn,Dr.current,gr.current)},[wn,qn]),qo=it.useCallback(function(ls,ss){var Yr=_i.current,qr=Yr.measurements,Xr=Yr.scrollOffset,ds=qr[$r(0,Dn-1,ss)];if(ds){var vs=gr.current===_e.ScrollMode.Page?{left:ds.start.left,top:ds.start.top}:{left:Xr.left*ls,top:Xr.top*ls};return Vr(vs,!1)}return Promise.resolve()},[]);return it.useEffect(function(){return function(){_s.disconnect()}},[]),{boundingClientRect:Zr,isSmoothScrolling:jn,startPage:Zs,endPage:eo,maxVisbilityIndex:ho,virtualItems:Hs,getContainerStyles:No,getItemContainerStyles:fo,getItemStyles:Eo,scrollToItem:Ks,scrollToNextItem:po,scrollToPreviousItem:Ho,zoom:qo}},no=function(Xt,ln,wn,Dn,Un,$n){var qn=wn;switch(!0){case(Un===_e.ViewMode.DualPageWithCover&&$n>=3):case(Un===_e.ViewMode.DualPage&&$n>=3):qn=2*wn;break;default:qn=wn}switch(Dn){case _e.SpecialZoomLevel.ActualSize:return 1;case _e.SpecialZoomLevel.PageFit:return Math.min((Xt.clientWidth-17)/qn,(Xt.clientHeight-16)/ln);case _e.SpecialZoomLevel.PageWidth:return(Xt.clientWidth-17)/qn}},Do=function(Xt){var ln,wn,Dn=Xt.getCurrentPage,Un=(ln=50,wn=it.useRef([]),it.useEffect(function(){return function(){wn.current=[]}},[]),{push:function(Kn){var jn=wn.current;jn.length+1>ln&&jn.shift(),jn.push(Kn),wn.current=jn},map:function(Kn){return wn.current.map(function(jn){return Kn(jn)})},pop:function(){var Kn=wn.current;if(Kn.length===0)return null;var jn=Kn.pop();return wn.current=Kn,jn}}),$n=function(Kn){var jn=it.useRef([]);return it.useEffect(function(){return function(){jn.current=[]}},[]),{dequeue:function(){var Sr=jn.current;if(Sr.length===0)return null;var _r=Sr.shift();return jn.current=Sr,_r||null},enqueue:function(Sr){var _r=jn.current;_r.length+1>Kn&&_r.pop(),jn.current=[Sr].concat(_r)},map:function(Sr){return jn.current.map(function(_r){return Sr(_r)})}}}(50),qn=function(){var Kn=$n.dequeue();return Kn&&Un.push(Kn),Kn&&Kn.pageIndex===Dn()?qn():Kn},Vn=function(){var Kn=Un.pop();return Kn&&$n.enqueue(Kn),Kn&&Kn.pageIndex===Dn()?Vn():Kn},Ln=it.useCallback(function(Kn){Un.push(Kn)},[]);return{getNextDestination:qn,getPreviousDestination:Vn,markVisitedDestination:Ln}},Xo=function(Xt){var ln=[];return Xt.map(function(wn){ln=ln.concat(wn).concat(function(Dn){var Un=[];return Dn.items&&Dn.items.length>0&&(Un=Un.concat(Xo(Dn.items))),Un}(wn))}),ln},Ko={capture:!1,passive:!0},$a={height:0,width:0},yl={height:0,width:0},fu=function(Xt){var ln=Xt.getCurrentPage,wn=Xt.getCurrentScrollMode,Dn=Xt.jumpToPage,Un=Xt.targetRef,$n=it.useState(_e.FullScreenMode.Normal),qn=$n[0],Vn=$n[1],Ln=function(){var os=it.useState($a),ys=os[0],_s=os[1],fs=Ht(function(){_s({height:window.innerHeight,width:window.innerWidth})},100);return mt(function(){return window.addEventListener("resize",fs,Ko),function(){window.removeEventListener("resize",fs,Ko)}},[]),ys}(),Kn=it.useState(yl),jn=Kn[0],Sr=Kn[1],_r=it.useRef(yl),gr=it.useRef(ln()),Dr=it.useRef(yl),Rr=it.useState(Un.current),Cr=Rr[0],rs=Rr[1],Vr=it.useRef();mt(function(){Un.current!==Cr&&rs(Un.current)},[]),mt(function(){if(Cr){var os=new ResizeObserver(function(ys){ys.forEach(function(_s){var fs=_s.target.getBoundingClientRect(),ms=fs.height,Ms=fs.width;Sr({height:ms,width:Ms})})});return os.observe(Cr),function(){os.unobserve(Cr),os.disconnect()}}},[Cr]);var Zr=it.useCallback(function(os){var ys=Ft();return ys&&ys!==os?(Vn(_e.FullScreenMode.Normal),Lt(ys)):Promise.resolve()},[]),_i=it.useCallback(function(os){os&&Mt()&&(rs(os),Zr(os).then(function(){Vr.current=os,Vn(_e.FullScreenMode.Entering),function(ys){Rt&&ys[Tt.RequestFullScreen]()}(os)}))},[]),Hr=it.useCallback(function(){Ft()&&(Vn(_e.FullScreenMode.Exitting),Lt(document))},[]),as=it.useCallback(function(){Cr&&Ft()!==Cr&&Vn(_e.FullScreenMode.Exitting)},[Cr]);return it.useEffect(function(){switch(qn){case _e.FullScreenMode.Entering:Vr.current&&(Vr.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),gr.current=ln(),_r.current={height:window.innerHeight,width:window.innerWidth};break;case _e.FullScreenMode.Entered:wn()===_e.ScrollMode.Page?Dn(gr.current).then(function(){Vn(_e.FullScreenMode.EnteredCompletely)}):Vn(_e.FullScreenMode.EnteredCompletely);break;case _e.FullScreenMode.Exitting:Vr.current&&(Vr.current.style.backgroundColor="",Vr.current=null),gr.current=ln();break;case _e.FullScreenMode.Exited:Vn(_e.FullScreenMode.Normal),wn()===_e.ScrollMode.Page&&Dn(gr.current)}},[qn]),it.useEffect(function(){if(qn!==_e.FullScreenMode.Normal)return qn===_e.FullScreenMode.Entering&&Ln.height===jn.height&&Ln.width===jn.width&&Ln.height>0&&Ln.width>0&&(Dr.current.height===0||Ln.height==Dr.current.height)?(Dr.current={height:window.innerHeight,width:window.innerWidth},void Vn(_e.FullScreenMode.Entered)):void(qn===_e.FullScreenMode.Exitting&&_r.current.height===Ln.height&&_r.current.width===Ln.width&&Ln.height>0&&Ln.width>0&&Vn(_e.FullScreenMode.Exited))},[qn,Ln,jn]),it.useEffect(function(){var os;return os=as,Rt&&document.addEventListener(Tt.FullScreenChange,os),function(){(function(ys){Rt&&document.removeEventListener(Tt.FullScreenChange,ys)})(as)}},[Cr]),{enterFullScreenMode:_i,exitFullScreenMode:Hr,fullScreenMode:qn}},Ql={buildPageStyles:function(){return{}},transformSize:function(Xt){return Xt.size}},Ro={left:0,top:0},Fl=function(Xt){var ln=Xt.currentFile,wn=Xt.defaultScale,Dn=Xt.doc,Un=Xt.enableSmoothScroll,$n=Xt.initialPage,qn=Xt.initialRotation,Vn=Xt.initialScale,Ln=Xt.pageLayout,Kn=Xt.pageSizes,jn=Xt.plugins,Sr=Xt.renderPage,_r=Xt.scrollMode,gr=Xt.setRenderRange,Dr=Xt.viewMode,Rr=Xt.viewerState,Cr=Xt.onDocumentLoad,rs=Xt.onOpenFile,Vr=Xt.onPageChange,Zr=Xt.onRotate,_i=Xt.onRotatePage,Hr=Xt.onZoom,as=Dn.numPages,os=Dn.loadingTask.docId,ys=it.useContext(zt).l10n,_s=it.useContext(dt),fs=_s.direction===_e.TextDirection.RightToLeft,ms=it.useRef(),Ms=it.useRef(),Zs=it.useState($n),eo=Zs[0],ho=Zs[1],Hs=it.useRef(null),Ks=Do({getCurrentPage:function(){return Es.current.pageIndex}}),ro=it.useState(qn),io=ro[0],po=ro[1],Ho=Wt(io),No=it.useState(!1),fo=No[0],Eo=No[1],qo=it.useState(new Map),ls=qo[0],ss=qo[1],Yr=it.useState(_r),qr=Yr[0],Xr=Yr[1],ds=Wt(qr),vs=it.useState(Dr),jr=vs[0],Nr=vs[1],gs=Wt(jr),xs=function(Tr){var Ss=Kt(),Cs=it.useState([]),Rs=Cs[0],ks=Cs[1];return it.useEffect(function(){Tr.getOutline().then(function(Ts){if(Ss.current&&Ts!==null){var uo=Xo(Ts);ks(uo)}})},[]),Rs}(Dn),$s=it.useState(Vn),Vs=$s[0],go=$s[1],Mo=Wt(Vs),Es=it.useRef(Rr),Ys=it.useRef(typeof wn=="string"?wn:null),Bs=it.useRef(-1),As=it.useRef(-1),oo=it.useRef($n),Ls=fu({getCurrentPage:function(){return Es.current.pageIndex},getCurrentScrollMode:function(){return Es.current.scrollMode},jumpToPage:function(Tr){return Bo(Tr)},targetRef:Ms}),_l=it.useState(-1),Pl=_l[0],Bl=_l[1],xl=it.useState(0),Ol=xl[0],_c=xl[1],yo=kt({doc:Dn});it.useEffect(function(){return function(){Pn.clear(),er.clear()}},[os]);var mu=it.useMemo(function(){return Object.assign({},Ql,Ln)},[]),eu=it.useMemo(function(){return Array(as).fill(0).map(function(Tr,Ss){var Cs=[Kn[Ss].pageHeight,Kn[Ss].pageWidth],Rs=Math.abs(io)%180==0?{height:Cs[0],width:Cs[1]}:{height:Cs[1],width:Cs[0]},ks={height:Rs.height*Vs,width:Rs.width*Vs};return mu.transformSize({numPages:as,pageIndex:Ss,size:ks})})},[io,Vs]),js=bo({enableSmoothScroll:Un,isRtl:fs,numberOfItems:as,parentRef:Ms,scrollMode:qr,setRenderRange:gr,sizes:eu,viewMode:jr}),Ku=Ht(function(){!Ys.current||Es.current.fullScreenMode!==_e.FullScreenMode.Normal||$n>0&&oo.current===$n||Qo(Ys.current)},200);(function(Tr){var Ss=Tr.targetRef,Cs=Tr.onResize;mt(function(){var Rs=new ResizeObserver(function(Ts){Ts.forEach(function(uo){Cs(uo.target)})}),ks=Ss.current;if(ks)return Rs.observe(ks),function(){Rs.unobserve(ks)}},[])})({targetRef:Ms,onResize:Ku});var Sl=function(Tr){var Ss=Tr;jn.forEach(function(Cs){Cs.onViewerStateChange&&(Ss=Cs.onViewerStateChange(Ss))}),Es.current=Ss},Nl=function(){return Ms.current},Yu=function(){return Es.current},tu=it.useCallback(function(Tr){Ks.markVisitedDestination(Tr)},[]),Po=it.useCallback(function(Tr){var Ss=Tr.pageIndex,Cs=Tr.bottomOffset,Rs=Tr.leftOffset,ks=Tr.scaleTo,Ts=Ms.current,uo=Es.current;return Ts&&uo?new Promise(function(El,xu){Jn(Dn,Ss).then(function(iu){var Al=iu.getViewport({scale:1}),su=0,Pu=(typeof Cs=="function"?Cs(Al.width,Al.height):Cs)||0,zl=(typeof Rs=="function"?Rs(Al.width,Al.height):Rs)||0,Zo=uo.scale;switch(ks){case _e.SpecialZoomLevel.PageFit:su=0,zl=0,Qo(_e.SpecialZoomLevel.PageFit);break;case _e.SpecialZoomLevel.PageWidth:Zo=no(Ts,Kn[Ss].pageHeight,Kn[Ss].pageWidth,_e.SpecialZoomLevel.PageWidth,Dr,as),su=(Al.height-Pu)*Zo,zl*=Zo,Qo(Zo);break;default:su=(Al.height-Pu)*Zo,zl*=Zo}switch(uo.scrollMode){case _e.ScrollMode.Horizontal:js.scrollToItem(Ss,{left:zl,top:0}).then(function(){El()});break;case _e.ScrollMode.Vertical:default:js.scrollToItem(Ss,{left:0,top:su}).then(function(){El()})}})}):Promise.resolve()},[]),Ul=it.useCallback(function(Tr){return Ks.markVisitedDestination(Tr),Po(Tr)},[]),Gl=it.useCallback(function(){var Tr=Ks.getNextDestination();return Tr?Po(Tr):Promise.resolve()},[]),Jo=it.useCallback(function(){var Tr=Ks.getPreviousDestination();return Tr?Po(Tr):Promise.resolve()},[]),Ru=it.useCallback(function(){return js.scrollToNextItem(Es.current.pageIndex,Ro)},[]),Bo=it.useCallback(function(Tr){return 0<=Tr&&Tr<as?js.scrollToItem(Tr,Ro):Promise.resolve()},[]),qu=it.useCallback(function(){return js.scrollToPreviousItem(Es.current.pageIndex,Ro)},[]),gu=it.useCallback(function(Tr){var Ss,Cs;(Ss=Tr.name,Cs=Ss.split(/\./).pop(),Cs?Cs.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Rs){var ks=new FileReader;ks.readAsArrayBuffer(Tr),ks.onload=function(){var Ts=new Uint8Array(ks.result);Rs(Ts)}}).then(function(Rs){rs(Tr.name,Rs)})},[rs]),ao=it.useCallback(function(Tr){var Ss=Tr===_e.RotateDirection.Backward?-90:90,Cs=Es.current.rotation,Rs=Cs===360||Cs===-360?Ss:Cs+Ss;yo.markNotRendered(),po(Rs),Sl(ct(ct({},Es.current),{rotation:Rs})),Zr({direction:Tr,doc:Dn,rotation:Rs})},[]),$l=it.useCallback(function(Tr,Ss){var Cs=Ss===_e.RotateDirection.Backward?-90:90,Rs=Es.current.pagesRotation,ks=(Rs.has(Tr)?Rs.get(Tr):qn)+Cs,Ts=Rs.set(Tr,ks);ss(Ts),Eo(function(uo){return!uo}),Sl(ct(ct({},Es.current),{pagesRotation:Ts,rotatedPage:Tr})),_i({direction:Ss,doc:Dn,pageIndex:Tr,rotation:ks}),yo.markRendering(Tr),Bl(Tr)},[]),vu=it.useCallback(function(Tr){Sl(ct(ct({},Es.current),{scrollMode:Tr})),Xr(Tr)},[]),yu=it.useCallback(function(Tr){Sl(ct(ct({},Es.current),{viewMode:Tr})),Nr(Tr)},[]),Qo=it.useCallback(function(Tr){var Ss=Ms.current,Cs=Es.current.pageIndex;if(!(Cs<0||Cs>=as)){var Rs=Kn[Cs].pageHeight,ks=Kn[Cs].pageWidth,Ts=Ss?typeof Tr=="string"?no(Ss,Rs,ks,Tr,Es.current.viewMode,as):Tr:1;Ys.current=typeof Tr=="string"?Tr:null,Ts!==Es.current.scale&&(_c(function(uo){return uo+1}),yo.markNotRendered(),go(Ts),Hr({doc:Dn,scale:Ts}),Sl(ct(ct({},Es.current),{scale:Ts})))}},[]),Uo=it.useCallback(function(Tr){Ls.enterFullScreenMode(Tr)},[]),Vl=it.useCallback(function(){Ls.exitFullScreenMode()},[]);it.useEffect(function(){Sl(ct(ct({},Es.current),{fullScreenMode:Ls.fullScreenMode}))},[Ls.fullScreenMode]),it.useEffect(function(){var Tr={enterFullScreenMode:Uo,exitFullScreenMode:Vl,getPagesContainer:Nl,getViewerState:Yu,jumpToDestination:Ul,jumpToNextDestination:Gl,jumpToPreviousDestination:Jo,jumpToNextPage:Ru,jumpToPreviousPage:qu,jumpToPage:Bo,openFile:gu,rotate:ao,rotatePage:$l,setViewerState:Sl,switchScrollMode:vu,switchViewMode:yu,zoom:Qo};return jn.forEach(function(Ss){Ss.install&&Ss.install(Tr)}),function(){jn.forEach(function(Ss){Ss.uninstall&&Ss.uninstall(Tr)})}},[os]),it.useEffect(function(){Cr({doc:Dn,file:ln}),jn.forEach(function(Tr){Tr.onDocumentLoad&&Tr.onDocumentLoad({doc:Dn,file:ln})})},[os]);var lo,_o,mo,nu=js.boundingClientRect;lo=function(){$n&&Bo($n)},_o=nu.height>0&&nu.width>0,mo=it.useRef(!1),mt(function(){_o&&!mo.current&&(mo.current=!0,lo())},[lo,_o]),mt(function(){var Tr=Es.current.pageIndex;Tr>-1&&ds!==qr&&js.scrollToItem(Tr,Ro).then(function(){Ls.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&(Un||yo.markNotRendered(),Bs.current=-1)})},[qr]),mt(function(){var Tr=Es.current.pageIndex;Tr>-1&&Ho!==io&&js.scrollToItem(Tr,Ro)},[io]),mt(function(){Mo!=0&&Mo!=Es.current.scale&&js.zoom(Es.current.scale/Mo,Es.current.pageIndex).then(function(){Ls.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&(As.current=-1)})},[Vs]),mt(function(){if(gs!==Es.current.viewMode){var Tr=js.startPage,Ss=js.endPage,Cs=js.virtualItems;yo.markNotRendered(),yo.setRange(Tr,Ss);for(var Rs=function(Ts){var uo=Cs.find(function(El){return El.index===Ts});uo&&yo.setVisibility(Ts,uo.visibility)},ks=Tr;ks<=Ss;ks++)Rs(ks);Ll()}},[jr]),mt(function(){var Tr=Es.current.pageIndex;Tr>-1&&gs!==jr&&js.scrollToItem(Tr,Ro)},[jr]),mt(function(){var Tr=Es.current.pageIndex;Tr>0&&Tr===$n&&oo.current===$n&&Ys.current&&(oo.current=-1,Qo(Ys.current))},[eo]),it.useEffect(function(){js.isSmoothScrolling||Hs.current!==null&&Hs.current===eo||(Hs.current=eo,Vr({currentPage:eo,doc:Dn}))},[eo,js.isSmoothScrolling]),it.useEffect(function(){Ls.fullScreenMode===_e.FullScreenMode.Entering&&Es.current.scrollMode===_e.ScrollMode.Page&&(Bs.current=Es.current.pageIndex),Ls.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&Es.current.scrollMode===_e.ScrollMode.Page&&Un&&(Bs.current=-1),Ls.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&Ys.current&&(As.current=Es.current.pageIndex,Qo(Ys.current))},[Ls.fullScreenMode]),it.useEffect(function(){if(Ls.fullScreenMode!==_e.FullScreenMode.Entering&&Ls.fullScreenMode!==_e.FullScreenMode.Exitting&&!js.isSmoothScrolling){var Tr=js.startPage,Ss=js.endPage,Cs=js.maxVisbilityIndex,Rs=js.virtualItems,ks=Cs,Ts=Ls.fullScreenMode===_e.FullScreenMode.Entered||Ls.fullScreenMode===_e.FullScreenMode.EnteredCompletely;if(!(Ts&&ks!==Bs.current&&Bs.current>-1||Ts&&ks!==As.current&&As.current>-1)){ho(ks),Sl(ct(ct({},Es.current),{pageIndex:ks})),yo.setRange(Tr,Ss);for(var uo=function(xu){var iu=Rs.find(function(Al){return Al.index===xu});iu&&yo.setVisibility(xu,iu.visibility)},El=Tr;El<=Ss;El++)uo(El);Ll()}}},[js.startPage,js.endPage,js.isSmoothScrolling,js.maxVisbilityIndex,Ls.fullScreenMode,fo,io,Vs]);var ru=it.useCallback(function(Tr){yo.markRendered(Tr),Ll()},[Ol]),Ll=function(){var Tr=yo.getHighestPriorityPage();Tr>-1&&yo.isInRange(Tr)&&(yo.markRendering(Tr),Bl(Tr))},Bp=function(Tr){var Ss=eo-1,Cs=eo+1;switch(Tr){case"FirstPage":Bo(0);break;case"LastPage":Bo(as-1);break;case"NextPage":Cs<as&&Bo(Cs);break;case"PrevPage":Ss>=0&&Bo(Ss)}},wo=it.useCallback(function(){var Tr=js.virtualItems,Ss=[];switch(jr){case _e.ViewMode.DualPage:Ss=an(Tr,2);break;case _e.ViewMode.DualPageWithCover:Tr.length&&(Ss=Tr[0].index===0?[[Tr[0]]].concat(an(Tr.slice(1),2)):an(Tr,2));break;case _e.ViewMode.SinglePage:default:Ss=an(Tr,1)}var Cs=ys&&ys.core?ys.core.pageLabel:"Page {{pageIndex}}",Rs={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:ms,style:{height:"100%"}},children:it.createElement(it.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:ht({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":qr===_e.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":fs,"rpv-core__inner-pages--single":qr===_e.ScrollMode.Page,"rpv-core__inner-pages--vertical":qr===_e.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":qr===_e.ScrollMode.Wrapped}),ref:Ms,style:{height:"100%",position:"relative"}},children:it.createElement("div",{"data-testid":"core__inner-current-page-".concat(eo),style:Object.assign({"--scale-factor":Vs},js.getContainerStyles())},Ss.map(function(ks){return it.createElement("div",{className:ht({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":qr===_e.ScrollMode.Page}),style:js.getItemContainerStyles(ks[0]),key:"".concat(ks[0].index,"-").concat(jr)},ks.map(function(Ts){var uo=jr===_e.ViewMode.DualPageWithCover&&(Ts.index===0||as%2==0&&Ts.index===as-1);return it.createElement("div",{"aria-label":Cs.replace("{{pageIndex}}","".concat(Ts.index+1)),className:ht({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":jr===_e.ViewMode.DualPage&&Ts.index%2==0,"rpv-core__inner-page--dual-odd":jr===_e.ViewMode.DualPage&&Ts.index%2==1,"rpv-core__inner-page--dual-cover":uo,"rpv-core__inner-page--dual-cover-even":jr===_e.ViewMode.DualPageWithCover&&!uo&&Ts.index%2==0,"rpv-core__inner-page--dual-cover-odd":jr===_e.ViewMode.DualPageWithCover&&!uo&&Ts.index%2==1,"rpv-core__inner-page--single":jr===_e.ViewMode.SinglePage&&qr===_e.ScrollMode.Page}),role:"region",key:"".concat(Ts.index,"-").concat(jr),style:Object.assign({},js.getItemStyles(Ts),mu.buildPageStyles({numPages:as,pageIndex:Ts.index,scrollMode:qr,viewMode:jr}))},it.createElement(Wr,{doc:Dn,measureRef:Ts.measureRef,outlines:xs,pageIndex:Ts.index,pageRotation:ls.has(Ts.index)?ls.get(Ts.index):0,pageSize:Kn[Ts.index],plugins:jn,renderPage:Sr,renderQueueKey:Ol,rotation:io,scale:Vs,shouldRender:Pl===Ts.index,viewMode:jr,onExecuteNamedAction:Bp,onJumpFromLinkAnnotation:tu,onJumpToDest:Ul,onRenderCompleted:ru,onRotatePage:$l}))}))}))}};return jn.forEach(function(ks){ks.renderViewer&&(Rs=ks.renderViewer({containerRef:ms,doc:Dn,pagesContainerRef:Ms,pagesRotation:ls,pageSizes:Kn,rotation:io,slot:Rs,themeContext:_s,jumpToPage:Bo,openFile:gu,rotate:ao,rotatePage:$l,switchScrollMode:vu,switchViewMode:yu,zoom:Qo}))}),Rs},[jn,js]),_u=it.useCallback(function(Tr){return it.createElement("div",ct({},Tr.attrs,{style:Tr.attrs&&Tr.attrs.style?Tr.attrs.style:{}}),Tr.children,Tr.subSlot&&_u(Tr.subSlot))},[]);return _u(wo())},zo=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],wl=function(Xt){var ln=Xt.defaultScale,wn=Xt.doc,Dn=Xt.render,Un=Xt.scrollMode,$n=Xt.viewMode,qn=it.useRef(),Vn=it.useState({pageSizes:[],scale:0}),Ln=Vn[0],Kn=Vn[1];return it.useLayoutEffect(function(){var jn=Array(wn.numPages).fill(0).map(function(Sr,_r){return new Promise(function(gr,Dr){Jn(wn,_r).then(function(Rr){var Cr=Rr.getViewport({scale:1});gr({pageHeight:Cr.height,pageWidth:Cr.width,rotation:Cr.rotation})})})});Promise.all(jn).then(function(Sr){var _r=qn.current;if(_r&&Sr.length!==0){var gr=Sr[0].pageWidth,Dr=Sr[0].pageHeight,Rr=_r.parentElement,Cr=(Rr.clientWidth-45)/gr,rs=(Rr.clientHeight-45)/Dr,Vr=Cr;switch(Un){case _e.ScrollMode.Horizontal:Vr=Math.min(Cr,rs);break;case _e.ScrollMode.Vertical:default:Vr=Cr}var Zr,_i,Hr=ln?typeof ln=="string"?no(Rr,Dr,gr,ln,$n,wn.numPages):ln:(Zr=Vr,(_i=zo.findIndex(function(as){return as>=Zr}))===-1||_i===0?Zr:zo[_i-1]);Kn({pageSizes:Sr,scale:Hr})}})},[wn.loadingTask.docId]),Ln.pageSizes.length===0||Ln.scale===0?it.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:qn},it.createElement(xt,null)):Dn(Ln.pageSizes,Ln.scale)},Fo=function(){},Fs=function(Xt){function ln(wn,Dn){var Un=Xt.call(this)||this;return Un.verifyPassword=wn,Un.passwordStatus=Dn,Un}return at(ln,Xt),ln}(Fo),Zl=function(Xt){var ln=Xt.passwordStatus,wn=Xt.renderProtectedView,Dn=Xt.verifyPassword,Un=Xt.onDocumentAskPassword,$n=it.useContext(zt).l10n,qn=it.useState(""),Vn=qn[0],Ln=qn[1],Kn=it.useContext(dt).direction===_e.TextDirection.RightToLeft,jn=function(){return Dn(Vn)};return it.useEffect(function(){Un&&Un({verifyPassword:Dn})},[]),wn?wn({passwordStatus:ln,verifyPassword:Dn}):it.createElement("div",{className:"rpv-core__asking-password-wrapper"},it.createElement("div",{className:ht({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Kn})},it.createElement("div",{className:"rpv-core__asking-password-message"},ln===_e.PasswordStatus.RequiredPassword&&$n.core.askingPassword.requirePasswordToOpen,ln===_e.PasswordStatus.WrongPassword&&$n.core.wrongPassword.tryAgain),it.createElement("div",{className:"rpv-core__asking-password-body"},it.createElement("div",{className:ht({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Kn,"rpv-core__asking-password-input--rtl":Kn})},it.createElement(St,{testId:"core__asking-password-input",type:"password",value:Vn,onChange:Ln,onKeyDown:function(Sr){Sr.key==="Enter"&&jn()}})),it.createElement(_t,{onClick:jn},$n.core.askingPassword.submit))))},Yo=function(Xt){function ln(wn){var Dn=Xt.call(this)||this;return Dn.doc=wn,Dn}return at(ln,Xt),ln}(Fo),Ml=function(Xt){function ln(wn){var Dn=Xt.call(this)||this;return Dn.error=wn,Dn}return at(ln,Xt),ln}(Fo),Tl=function(Xt){function ln(wn){var Dn=Xt.call(this)||this;return Dn.percentages=wn,Dn}return at(ln,Xt),ln}(Fo),pu=function(Xt){var ln=Xt.characterMap,wn=Xt.file,Dn=Xt.httpHeaders,Un=Xt.render,$n=Xt.renderError,qn=Xt.renderLoader,Vn=Xt.renderProtectedView,Ln=Xt.transformGetDocumentParams,Kn=Xt.withCredentials,jn=Xt.onDocumentAskPassword,Sr=it.useContext(dt).direction===_e.TextDirection.RightToLeft,_r=it.useState(new Tl(0)),gr=_r[0],Dr=_r[1],Rr=it.useRef(""),Cr=Kt();return it.useEffect(function(){Rr.current="",Dr(new Tl(0));var rs=new st.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Vr=Object.assign({httpHeaders:Dn,withCredentials:Kn,worker:rs},typeof wn=="string"?{url:wn}:{data:wn},ln?{cMapUrl:ln.url,cMapPacked:ln.isCompressed}:{}),Zr=Ln?Ln(Vr):Vr,_i=st.getDocument(Zr);return _i.onPassword=function(Hr,as){switch(as){case st.PasswordResponses.NEED_PASSWORD:Cr.current&&Dr(new Fs(Hr,_e.PasswordStatus.RequiredPassword));break;case st.PasswordResponses.INCORRECT_PASSWORD:Cr.current&&Dr(new Fs(Hr,_e.PasswordStatus.WrongPassword))}},_i.onProgress=function(Hr){var as=Hr.total>0?Math.min(100,100*Hr.loaded/Hr.total):100;Cr.current&&Rr.current===""&&Dr(new Tl(as))},_i.promise.then(function(Hr){Rr.current=Hr.loadingTask.docId,Cr.current&&Dr(new Yo(Hr))},function(Hr){return Cr.current&&!rs.destroyed&&Dr(new Ml({message:Hr.message||"Cannot load document",name:Hr.name}))}),function(){_i.destroy(),rs.destroy()}},[wn]),gr instanceof Fs?it.createElement(Zl,{passwordStatus:gr.passwordStatus,renderProtectedView:Vn,verifyPassword:gr.verifyPassword,onDocumentAskPassword:jn}):gr instanceof Yo?Un(gr.doc):gr instanceof Ml?$n?$n(gr.error):it.createElement("div",{className:ht({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Sr})},it.createElement("div",{className:"rpv-core__doc-error-text"},gr.error.message)):it.createElement("div",{"data-testid":"core__doc-loading",className:ht({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Sr})},qn?qn(gr.percentages):it.createElement(xt,null))},co=function(Xt,ln){var wn=it.useMemo(function(){return Xt==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Xt},[]),Dn=it.useState(wn),Un=Dn[0],$n=Dn[1],qn=Wt(Un);return it.useEffect(function(){if(Xt==="auto"){var Vn=window.matchMedia("(prefers-color-scheme: dark)"),Ln=function(Kn){$n(Kn.matches?"dark":"light")};return Vn.addEventListener("change",Ln),function(){return Vn.removeEventListener("change",Ln)}}},[]),it.useEffect(function(){Un!==qn&&ln&&ln(Un)},[Un]),it.useEffect(function(){Xt!==Un&&$n(Xt)},[Xt]),{currentTheme:Un,setCurrentTheme:$n}},Rl=function(Xt){return{startPage:Xt.startPage-3,endPage:Xt.endPage+3}};_e.Button=function(Xt){var ln=Xt.children,wn=Xt.testId,Dn=Xt.onClick,Un=it.useContext(dt).direction===_e.TextDirection.RightToLeft,$n=wn?{"data-testid":wn}:{};return it.createElement("button",ct({className:ht({"rpv-core__button":!0,"rpv-core__button--rtl":Un}),type:"button",onClick:Dn},$n),ln)},_e.Icon=vt,_e.LazyRender=function(Xt){var ln=Xt.attrs,wn=Xt.children,Dn=Xt.testId,Un=it.useState(!1),$n=Un[0],qn=Un[1],Vn=Dn?ct(ct({},ln),{"data-testid":Dn}):ln,Ln=yt({once:!0,onVisibilityChanged:function(Kn){Kn.isVisible&&qn(!0)}});return it.createElement("div",ct({ref:Ln},Vn),$n&&wn)},_e.LocalizationContext=zt,_e.Menu=function(Xt){var ln=Xt.children,wn=it.useRef(),Dn=it.useRef([]),Un=it.useContext(dt).direction===_e.TextDirection.RightToLeft,$n=function(Vn){if(wn.current)switch(Vn.key){case"Tab":Vn.preventDefault();break;case"ArrowDown":Vn.preventDefault(),qn(function(Ln,Kn){return Kn+1});break;case"ArrowUp":Vn.preventDefault(),qn(function(Ln,Kn){return Kn-1});break;case"End":Vn.preventDefault(),qn(function(Ln,Kn){return Ln.length-1});break;case"Home":Vn.preventDefault(),qn(function(Ln,Kn){return 0})}},qn=function(Vn){if(wn.current){var Ln=Dn.current,Kn=Ln.findIndex(function(Sr){return Sr.getAttribute("tabindex")==="0"}),jn=Math.min(Ln.length-1,Math.max(0,Vn(Ln,Kn)));Kn>=0&&Kn<=Ln.length-1&&Ln[Kn].setAttribute("tabindex","-1"),Ln[jn].setAttribute("tabindex","0"),Ln[jn].focus()}};return mt(function(){var Vn=wn.current;if(Vn){var Ln=function(Kn){var jn=[];return Kn.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Sr){if(Sr instanceof HTMLElement){var _r=Sr.parentElement;(_r===Kn||window.getComputedStyle(_r).display!=="none")&&jn.push(Sr)}}),jn}(Vn);Dn.current=Ln}},[]),mt(function(){return document.addEventListener("keydown",$n),function(){document.removeEventListener("keydown",$n)}},[]),it.createElement("div",{ref:wn,"aria-orientation":"vertical",className:ht({"rpv-core__menu":!0,"rpv-core__menu--rtl":Un}),role:"menu",tabIndex:0},ln)},_e.MenuDivider=function(){return it.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},_e.MenuItem=function(Xt){var ln=Xt.checked,wn=ln!==void 0&&ln,Dn=Xt.children,Un=Xt.icon,$n=Un===void 0?null:Un,qn=Xt.isDisabled,Vn=qn!==void 0&&qn,Ln=Xt.testId,Kn=Xt.onClick,jn=it.useContext(dt).direction===_e.TextDirection.RightToLeft,Sr=Ln?{"data-testid":Ln}:{};return it.createElement("button",ct({className:ht({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Vn,"rpv-core__menu-item--ltr":!jn,"rpv-core__menu-item--rtl":jn}),role:"menuitem",tabIndex:-1,type:"button",onClick:Kn},Sr),it.createElement("div",{className:ht({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!jn,"rpv-core__menu-item-icon--rtl":jn})},$n),it.createElement("div",{className:ht({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!jn,"rpv-core__menu-item-label--rtl":jn})},Dn),it.createElement("div",{className:ht({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!jn,"rpv-core__menu-item-check--rtl":jn})},wn&&it.createElement(pt,null)))},_e.MinimalButton=function(Xt){var ln=Xt.ariaLabel,wn=ln===void 0?"":ln,Dn=Xt.ariaKeyShortcuts,Un=Dn===void 0?"":Dn,$n=Xt.children,qn=Xt.isDisabled,Vn=qn!==void 0&&qn,Ln=Xt.isSelected,Kn=Ln!==void 0&&Ln,jn=Xt.testId,Sr=Xt.onClick,_r=it.useContext(dt).direction===_e.TextDirection.RightToLeft,gr=jn?{"data-testid":jn}:{};return it.createElement("button",ct({"aria-label":wn},Un&&{"aria-keyshortcuts":Un},Vn&&{"aria-disabled":!0},{className:ht({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Vn,"rpv-core__minimal-button--rtl":_r,"rpv-core__minimal-button--selected":Kn}),type:"button",onClick:Sr},gr),$n)},_e.Modal=function(Xt){var ln=Xt.ariaControlsSuffix,wn=Xt.closeOnClickOutside,Dn=Xt.closeOnEscape,Un=Xt.content,$n=Xt.isOpened,qn=$n!==void 0&&$n,Vn=Xt.target,Ln=ln||"".concat(Dt());return it.createElement(An,{target:Vn?function(Kn,jn){return it.createElement("div",{"aria-expanded":jn?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Ln)},Vn(Kn,jn))}:null,content:function(Kn){return it.createElement(qt,null,it.createElement(Yt,{ariaControlsSuffix:Ln,closeOnClickOutside:wn,closeOnEscape:Dn,onToggle:Kn},Un(Kn)))},isOpened:qn})},_e.Popover=function(Xt){var ln=Xt.ariaHasPopup,wn=ln===void 0?"dialog":ln,Dn=Xt.ariaControlsSuffix,Un=Xt.closeOnClickOutside,$n=Xt.closeOnEscape,qn=Xt.content,Vn=Xt.lockScroll,Ln=Vn===void 0||Vn,Kn=Xt.offset,jn=Xt.position,Sr=Xt.target,_r=gn(!1),gr=_r.opened,Dr=_r.toggle,Rr=it.useRef(),Cr=it.useMemo(function(){return Dn||"".concat(Dt())},[]);return it.createElement("div",{ref:Rr,"aria-expanded":gr?"true":"false","aria-haspopup":wn,"aria-controls":"rpv-core__popver-body-".concat(Cr)},Sr(Dr,gr),gr&&it.createElement(it.Fragment,null,Ln&&it.createElement(hn,{closeOnEscape:$n,onClose:Dr}),it.createElement(Bt,{ariaControlsSuffix:Cr,closeOnClickOutside:Un,offset:Kn,position:jn,targetRef:Rr,onClose:Dr},qn(Dr))))},_e.PrimaryButton=_t,_e.ProgressBar=function(Xt){var ln=Xt.progress,wn=it.useContext(dt).direction===_e.TextDirection.RightToLeft;return it.createElement("div",{className:ht({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":wn})},it.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(ln,"%")}},ln,"%"))},_e.Separator=function(){return it.createElement("div",{className:"rpv-core__separator"})},_e.Spinner=xt,_e.Splitter=function(Xt){var ln=Xt.constrain,wn=it.useContext(dt).direction===_e.TextDirection.RightToLeft,Dn=it.useRef(),Un=it.useRef(),$n=it.useRef(),qn=it.useRef(0),Vn=it.useRef(0),Ln=it.useRef(0),Kn=it.useRef(0),jn={capture:!0},Sr=function(gr){var Dr=Dn.current,Rr=Un.current,Cr=$n.current;if(Dr&&Rr&&Cr){var rs=Kn.current,Vr=gr.clientX-qn.current,Zr=Ln.current+(wn?-Vr:Vr),_i=Dr.parentElement.getBoundingClientRect().width,Hr=100*Zr/_i;if(Dr.classList.add("rpv-core__splitter--resizing"),ln){var as=_i-Zr-rs;if(!ln({firstHalfPercentage:Hr,firstHalfSize:Zr,secondHalfPercentage:100*as/_i,secondHalfSize:as}))return}Rr.style.width="".concat(Hr,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Rr.classList.add("rpv-core__splitter-sibling--resizing"),Cr.classList.add("rpv-core__splitter-sibling--resizing")}},_r=function(gr){var Dr=Dn.current,Rr=Un.current,Cr=$n.current;Dr&&Rr&&Cr&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Dr.classList.remove("rpv-core__splitter--resizing"),Rr.classList.remove("rpv-core__splitter-sibling--resizing"),Cr.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Sr,jn),document.removeEventListener("mouseup",_r,jn))};return it.useEffect(function(){var gr=Dn.current;gr&&(Kn.current=gr.getBoundingClientRect().width,Un.current=gr.previousElementSibling,$n.current=gr.nextElementSibling)},[]),it.createElement("div",{ref:Dn,className:"rpv-core__splitter",onMouseDown:function(gr){var Dr=Un.current;Dr&&(qn.current=gr.clientX,Vn.current=gr.clientY,Ln.current=Dr.getBoundingClientRect().width,document.addEventListener("mousemove",Sr,jn),document.addEventListener("mouseup",_r,jn))}})},_e.TextBox=St,_e.ThemeContext=dt,_e.Tooltip=function(Xt){var ln=Xt.ariaControlsSuffix,wn=Xt.content,Dn=Xt.offset,Un=Xt.position,$n=Xt.target,qn=gn(!1),Vn=qn.opened,Ln=qn.toggle,Kn=it.useRef(),jn=it.useRef(),Sr=it.useMemo(function(){return ln||"".concat(Dt())},[]);Ut(function(){Kn.current&&document.activeElement&&Kn.current.contains(document.activeElement)&&gr()});var _r=function(){Ln(_e.ToggleStatus.Open)},gr=function(){Ln(_e.ToggleStatus.Close)};return it.createElement(it.Fragment,null,it.createElement("div",{ref:Kn,"aria-describedby":"rpv-core__tooltip-body-".concat(Sr),onBlur:function(Dr){Dr.relatedTarget instanceof HTMLElement&&Dr.currentTarget.parentElement&&Dr.currentTarget.parentElement.contains(Dr.relatedTarget)?jn.current&&(jn.current.style.display="none"):gr()},onFocus:_r,onMouseEnter:_r,onMouseLeave:gr},$n),Vn&&it.createElement(cn,{ariaControlsSuffix:Sr,contentRef:jn,offset:Dn,position:Un,targetRef:Kn},wn()))},_e.Viewer=function(Xt){var ln=Xt.characterMap,wn=Xt.defaultScale,Dn=Xt.enableSmoothScroll,Un=Dn===void 0||Dn,$n=Xt.fileUrl,qn=Xt.httpHeaders,Vn=qn===void 0?{}:qn,Ln=Xt.initialPage,Kn=Ln===void 0?0:Ln,jn=Xt.pageLayout,Sr=Xt.initialRotation,_r=Sr===void 0?0:Sr,gr=Xt.localization,Dr=Xt.plugins,Rr=Dr===void 0?[]:Dr,Cr=Xt.renderError,rs=Xt.renderLoader,Vr=Xt.renderPage,Zr=Xt.renderProtectedView,_i=Xt.scrollMode,Hr=_i===void 0?_e.ScrollMode.Vertical:_i,as=Xt.setRenderRange,os=as===void 0?Rl:as,ys=Xt.transformGetDocumentParams,_s=Xt.theme,fs=_s===void 0?{direction:_e.TextDirection.LeftToRight,theme:"light"}:_s,ms=Xt.viewMode,Ms=ms===void 0?_e.ViewMode.SinglePage:ms,Zs=Xt.withCredentials,eo=Zs!==void 0&&Zs,ho=Xt.onDocumentAskPassword,Hs=Xt.onDocumentLoad,Ks=Hs===void 0?function(){}:Hs,ro=Xt.onPageChange,io=ro===void 0?function(){}:ro,po=Xt.onRotate,Ho=po===void 0?function(){}:po,No=Xt.onRotatePage,fo=No===void 0?function(){}:No,Eo=Xt.onSwitchTheme,qo=Eo===void 0?function(){}:Eo,ls=Xt.onZoom,ss=ls===void 0?function(){}:ls,Yr=it.useState({data:$n,name:typeof $n=="string"?$n:"",shouldLoad:!1}),qr=Yr[0],Xr=Yr[1],ds=function(Bs,As){Xr({data:As,name:Bs,shouldLoad:!0})},vs=it.useState(!1),jr=vs[0],Nr=vs[1],gs=Wt(qr);it.useEffect(function(){var Bs,As,oo,Ls;Bs=gs.data,Ls=typeof(As=$n),(oo=typeof Bs)=="string"&&Ls==="string"&&Bs===As||oo==="object"&&Ls==="object"&&Bs.length===As.length&&Bs.every(function(_l,Pl){return _l===As[Pl]})||Xr({data:$n,name:typeof $n=="string"?$n:"",shouldLoad:jr})},[$n,jr]);var xs=yt({onVisibilityChanged:function(Bs){Nr(Bs.isVisible),Bs.isVisible&&Xr(function(As){return Object.assign({},As,{shouldLoad:!0})})}}),$s=typeof fs=="string"?{direction:_e.TextDirection.LeftToRight,theme:fs}:fs,Vs=it.useState(gr||Gt),go=Vs[0],Mo=Vs[1],Es={l10n:go,setL10n:Mo},Ys=Object.assign({},{direction:$s.direction},co($s.theme||"light",qo));return it.useEffect(function(){gr&&Mo(gr)},[gr]),it.createElement(zt.Provider,{value:Es},it.createElement(dt.Provider,{value:Ys},it.createElement("div",{ref:xs,className:"rpv-core__viewer rpv-core__viewer--".concat(Ys.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},qr.shouldLoad&&it.createElement(pu,{characterMap:ln,file:qr.data,httpHeaders:Vn,render:function(Bs){return it.createElement(wl,{defaultScale:wn,doc:Bs,render:function(As,oo){return it.createElement(Fl,{currentFile:{data:qr.data,name:qr.name},defaultScale:wn,doc:Bs,enableSmoothScroll:Un,initialPage:Kn,initialRotation:_r,initialScale:oo,pageLayout:jn,pageSizes:As,plugins:Rr,renderPage:Vr,scrollMode:Hr,setRenderRange:os,viewMode:Ms,viewerState:{file:qr,fullScreenMode:_e.FullScreenMode.Normal,pageIndex:-1,pageHeight:As[0].pageHeight,pageWidth:As[0].pageWidth,pagesRotation:new Map,rotation:_r,scale:oo,scrollMode:Hr,viewMode:Ms},onDocumentLoad:Ks,onOpenFile:ds,onPageChange:io,onRotate:Ho,onRotatePage:fo,onZoom:ss})},scrollMode:Hr,viewMode:Ms})},renderError:Cr,renderLoader:rs,renderProtectedView:Zr,transformGetDocumentParams:ys,withCredentials:eo,onDocumentAskPassword:ho}))))},_e.Worker=function(Xt){var ln=Xt.children,wn=Xt.workerUrl;return st.GlobalWorkerOptions.workerSrc=wn,it.createElement(it.Fragment,null,ln)},_e.chunk=an,_e.classNames=ht,_e.createStore=function(Xt){var ln=Xt||{},wn={},Dn=function($n,qn){var Vn;ln=ct(ct({},ln),((Vn={})[$n]=qn,Vn)),(wn[$n]||[]).forEach(function(Ln){return Ln(ln[$n])})},Un=function($n){return ln[$n]};return{subscribe:function($n,qn){wn[$n]=(wn[$n]||[]).concat(qn)},unsubscribe:function($n,qn){wn[$n]=(wn[$n]||[]).filter(function(Vn){return Vn!==qn})},update:function($n,qn){Dn($n,qn)},updateCurrentValue:function($n,qn){var Vn=Un($n);Vn!==void 0&&Dn($n,qn(Vn))},get:function($n){return Un($n)}}},_e.getDestination=fr,_e.getPage=Jn,_e.isFullScreenEnabled=Mt,_e.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},_e.useDebounceCallback=Ht,_e.useIntersectionObserver=yt,_e.useIsMounted=Kt,_e.useIsomorphicLayoutEffect=mt,_e.usePrevious=Wt,_e.useRenderQueue=kt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;const CV=()=>{const _e="/portfolio/LucienLachaudResume.pdf",_=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),tt=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars$1,{}),[]);return jsxRuntimeExports.jsxs("div",{className:styles.cvPage,children:[jsxRuntimeExports.jsx("div",{className:styles.canvasWrapper,children:jsxRuntimeExports.jsxs(Canvas$1,{gl:{alpha:!1,antialias:!0},style:{display:"block"},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:.1}),jsxRuntimeExports.jsx("directionalLight",{intensity:1.5,position:[2,3,10]}),jsxRuntimeExports.jsx(Environment,{preset:"city"}),tt,_]})}),jsxRuntimeExports.jsxs("div",{className:styles.cvContainer,children:[jsxRuntimeExports.jsx("div",{className:styles.pdfViewer,children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:_e})})}),jsxRuntimeExports.jsx("div",{className:styles.downloadLink,children:jsxRuntimeExports.jsx("a",{href:_e,download:"Lucien_Lachaud_CV.pdf",children:"Télécharger le CV"})})]})]})},Card=({name:_e,link:_,className:tt,id:nt})=>{const[rt,it]=reactExports.useState(!1),st=()=>{it(!0),setTimeout(()=>{_.startsWith("mailto:")?window.location.href=_:window.open(_,"_blank")},300)};return jsxRuntimeExports.jsx("div",{className:`card ${tt} ${rt?"animate":""}`,onClick:st,id:nt,children:jsxRuntimeExports.jsx("h2",{className:"card-title",children:_e})})},Contact=()=>{const _e=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Spark,{}),[]),_=reactExports.useMemo(()=>jsxRuntimeExports.jsx(Stars,{}),[]);return jsxRuntimeExports.jsxs("div",{className:"contact-container",children:[jsxRuntimeExports.jsx(Canvas$1,{className:"canvas",children:jsxRuntimeExports.jsxs("group",{children:[_e,_]})}),jsxRuntimeExports.jsxs("div",{className:"card-container",children:[jsxRuntimeExports.jsx(Card,{name:"LINKEDIN",link:"https://www.linkedin.com/in/lucien-lachaud-330273257/",className:"card-contact",id:"card1"}),jsxRuntimeExports.jsx(Card,{name:"MAIL",link:"mailto:lucien.lachaud@orange.fr",className:"card-contact",id:"card2"})]})]})},Plane=({texture:_e})=>jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("planeGeometry",{args:[16,8]}),jsxRuntimeExports.jsx("meshBasicMaterial",{map:_e})]}),ProjectView=({projects:_e})=>{const _=reactExports.useRef(null),{projectId:tt}=useParams(),[nt,rt]=reactExports.useState(_e[0]),it=useNavigate(),[st,ot]=reactExports.useState(1),at=useLocation();reactExports.useEffect(()=>{let ct=at.pathname;ct="/portfolio/#"+ct;const ut=_e.find(ht=>{var mt;return(mt=ht.readMoreLink)==null?void 0:mt.includes(ct)})||_e[0];console.log(ut.title),rt(ut);const dt=new TextureLoader;if(typeof ut.image=="string")dt.load(ut.image,ht=>{_.current=ht});else{const ht=document.createElement("video");ht.src="./portfolio/projects/archeovision/temple.mp4",ht.loop=!0,ht.muted=!0;const mt=ht,yt=new VideoTexture(mt);mt.crossOrigin="anonymous",mt.muted=!0,mt.play().catch(vt=>console.log("Error playing video:",vt)),_.current=yt}},[_e,tt]);const lt=()=>{it(-1)};return reactExports.useEffect(()=>{console.log("Setting up scroll listener");const ct=()=>{const ut=window.scrollY,dt=Math.max(0,1-ut/200);ot(dt),console.log("Scroll position:",ut)};return window.addEventListener("scroll",ct,!0),()=>{console.log("Cleaning up scroll listener"),window.removeEventListener("scroll",ct,!0)}},[]),jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"project-view-container",children:[jsxRuntimeExports.jsx(Canvas$1,{children:_.current&&jsxRuntimeExports.jsx(Plane,{texture:_.current})}),jsxRuntimeExports.jsx("div",{className:"project-details show",children:jsxRuntimeExports.jsxs("div",{className:"project-details-div",children:[jsxRuntimeExports.jsx("h2",{className:"project-details-h2",children:nt.title}),nt.sector&&jsxRuntimeExports.jsxs("p",{className:"p-p",children:[jsxRuntimeExports.jsx("strong",{children:"Secteur:"})," ",nt.sector]}),nt.description&&jsxRuntimeExports.jsx("p",{className:"description",children:nt.description})]})}),st>0&&jsxRuntimeExports.jsx("div",{className:"back-button-container",onClick:lt,style:{opacity:st,transition:"opacity 0.5s ease"},children:jsxRuntimeExports.jsx("div",{className:"semi-circle",children:jsxRuntimeExports.jsx("div",{className:"cross",children:"+"})})})]}),nt.title=="Détection automatique de pigments par Segmentation Sémantique"&&jsxRuntimeExports.jsxs("div",{className:"content-sections",children:[jsxRuntimeExports.jsx("div",{className:"grain-effect"}),jsxRuntimeExports.jsx("img",{className:"imagep",src:"./portfolio/projects/archeovision/unet_architecture.png",alt:"Context Image 1","aria-description":"Unet Model"}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("p",{id:"firstpart",children:"Ce projet a pour objectif de développer une méthode de détection automatique de pigments imperceptibles à l’œil nu, présente au Temple d’Apollon à Delphes. Grâce aux avancées en segmentation d'image et aux modèles d'apprentissage profond, notre équipe a conçu une approche robuste pour identifier avec précision les traces de pigments tout en réduisant les faux positifs, causés par des éléments perturbateurs comme des lichens et des moisissures."}),jsxRuntimeExports.jsxs("p",{id:"secondpart",children:["Notre solution repose principalement sur le modèle de segmentation U-Net, adapté pour cette tâche exigeante. Les données utilisées proviennent d’une collection d’images haute-résolution du site, complétées par un processus d'augmentation pour enrichir le modèle d’apprentissage car le manque diversité de roches dans le dataset d'entraînement pouvait rendre le modèle incappable de se généraliser aux nouvelles données. L'outil final offre une analyse visuelle précise, permettant aux chercheurs de révéler et étudier ces pigments, essentiels pour reconstituer l’aspect originel des structures antiques.",jsxRuntimeExports.jsx("br",{}),"Pour en savoir plus, consultez notre "," ",jsxRuntimeExports.jsx("a",{href:"https://gitlab.emi.u-bordeaux.fr/lulachaud/unettraining_temple.git",target:"_blank",children:"dépôt GitLab"}),"."]})]}),jsxRuntimeExports.jsx("div",{className:"download-container",children:jsxRuntimeExports.jsx("a",{href:"./portfolio/projects/archeovision/archeovision_rapport.pdf",download:!0,className:"download-button",children:"Télécharger le rapport"})}),jsxRuntimeExports.jsx("img",{className:"imagep",src:"./portfolio/projects/archeovision/ptsbleus.png",alt:"Context Image 1","aria-description":"Unet Model"})]}),nt.title=="Prédiction des votes durant les élections présidentielles"&&jsxRuntimeExports.jsxs("div",{className:"content-sections",children:[jsxRuntimeExports.jsx("div",{className:"grain-effect"}),jsxRuntimeExports.jsxs("div",{className:"container_e",children:[jsxRuntimeExports.jsx("p",{className:"p_p",children:"Ce projet a pour but de prédire des résultats liés à l'élection présidentielle française de 2022 en utilisant un modèle de régression linéaire avec sélection de variables. En s'appuyant sur des données socio-économiques et démographiques de 2021, notre objectif principal était d'explorer et de comprendre les facteurs influençant le taux d'abstention et les scores des candidats au premier tour."}),jsxRuntimeExports.jsxs("div",{className:"containertable",children:[jsxRuntimeExports.jsx("h1",{children:"Résultats de la Régression OLS"}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Modèle :"})," OLS | ",jsxRuntimeExports.jsx("strong",{children:"Méthode :"})," Moindres carrés"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Variable dépendante :"})," MACRON Emmanuel | ",jsxRuntimeExports.jsx("strong",{children:"R-squared :"})," 0.990 | ",jsxRuntimeExports.jsx("strong",{children:"Adj. R-squared :"})," 0.989"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"F-statistic :"})," 738.2 | ",jsxRuntimeExports.jsx("strong",{children:"Prob (F-statistic) :"})," 2.15e-63"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Observations :"})," 76 | ",jsxRuntimeExports.jsx("strong",{children:"Date :"})," Lun, 22 Avr 2024 | ",jsxRuntimeExports.jsx("strong",{children:"Heure :"})," 17:56:58"]}),jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Variable"}),jsxRuntimeExports.jsx("th",{children:"Coef."}),jsxRuntimeExports.jsx("th",{children:"Std Err"}),jsxRuntimeExports.jsx("th",{children:"t"}),jsxRuntimeExports.jsxs("th",{children:["P",">","|t|"]}),jsxRuntimeExports.jsx("th",{children:"[0.025"}),jsxRuntimeExports.jsx("th",{children:"0.975]"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Médiane du niveau de vie 2021"}),jsxRuntimeExports.jsx("td",{children:"0.0015"}),jsxRuntimeExports.jsx("td",{children:"0.000"}),jsxRuntimeExports.jsx("td",{children:"8.653"}),jsxRuntimeExports.jsx("td",{children:"0.000"}),jsxRuntimeExports.jsx("td",{children:"0.001"}),jsxRuntimeExports.jsx("td",{children:"0.002"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Taux de pauvreté 2021"}),jsxRuntimeExports.jsx("td",{children:"0.0632"}),jsxRuntimeExports.jsx("td",{children:"0.200"}),jsxRuntimeExports.jsx("td",{children:"0.317"}),jsxRuntimeExports.jsx("td",{children:"0.752"}),jsxRuntimeExports.jsx("td",{children:"-0.335"}),jsxRuntimeExports.jsx("td",{children:"0.461"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Part des diplômés d'un BAC+5 ou plus dans la pop. non scolarisée de 15 ans ou + 2020"}),jsxRuntimeExports.jsx("td",{children:"-0.1867"}),jsxRuntimeExports.jsx("td",{children:"0.146"}),jsxRuntimeExports.jsx("td",{children:"-1.279"}),jsxRuntimeExports.jsx("td",{children:"0.205"}),jsxRuntimeExports.jsx("td",{children:"-0.478"}),jsxRuntimeExports.jsx("td",{children:"0.105"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"% Abs/Ins_1erTour"}),jsxRuntimeExports.jsx("td",{children:"-0.1223"}),jsxRuntimeExports.jsx("td",{children:"0.115"}),jsxRuntimeExports.jsx("td",{children:"-1.060"}),jsxRuntimeExports.jsx("td",{children:"0.293"}),jsxRuntimeExports.jsx("td",{children:"-0.353"}),jsxRuntimeExports.jsx("td",{children:"0.108"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Taux de chômage annuel moyen des 15 à 24 ans 2022"}),jsxRuntimeExports.jsx("td",{children:"-0.2669"}),jsxRuntimeExports.jsx("td",{children:"0.140"}),jsxRuntimeExports.jsx("td",{children:"-1.905"}),jsxRuntimeExports.jsx("td",{children:"0.061"}),jsxRuntimeExports.jsx("td",{children:"-0.546"}),jsxRuntimeExports.jsx("td",{children:"0.013"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Part postes de l'admin. publique, enseignement, santé et action sociale dans les étab. actifs au 31/12 2021"}),jsxRuntimeExports.jsx("td",{children:"-0.0701"}),jsxRuntimeExports.jsx("td",{children:"0.073"}),jsxRuntimeExports.jsx("td",{children:"-0.957"}),jsxRuntimeExports.jsx("td",{children:"0.342"}),jsxRuntimeExports.jsx("td",{children:"-0.216"}),jsxRuntimeExports.jsx("td",{children:"0.076"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Médecin généraliste (en nombre) 2021"}),jsxRuntimeExports.jsx("td",{children:"0.0011"}),jsxRuntimeExports.jsx("td",{children:"0.002"}),jsxRuntimeExports.jsx("td",{children:"0.604"}),jsxRuntimeExports.jsx("td",{children:"0.548"}),jsxRuntimeExports.jsx("td",{children:"-0.003"}),jsxRuntimeExports.jsx("td",{children:"0.005"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Police - Gendarmerie (en nombre) 2021"}),jsxRuntimeExports.jsx("td",{children:"0.0363"}),jsxRuntimeExports.jsx("td",{children:"0.039"}),jsxRuntimeExports.jsx("td",{children:"0.934"}),jsxRuntimeExports.jsx("td",{children:"0.354"}),jsxRuntimeExports.jsx("td",{children:"-0.041"}),jsxRuntimeExports.jsx("td",{children:"0.114"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Service d'urgences (en nombre) 2021"}),jsxRuntimeExports.jsx("td",{children:"-0.0027"}),jsxRuntimeExports.jsx("td",{children:"0.165"}),jsxRuntimeExports.jsx("td",{children:"-0.016"}),jsxRuntimeExports.jsx("td",{children:"0.987"}),jsxRuntimeExports.jsx("td",{children:"-0.331"}),jsxRuntimeExports.jsx("td",{children:"0.326"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"notes",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Omnibus :"})," 0.499 | ",jsxRuntimeExports.jsx("strong",{children:"Prob (Omnibus) :"})," 0.779"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Durbin-Watson :"})," 2.018 | ",jsxRuntimeExports.jsx("strong",{children:"Jarque-Bera (JB) :"})," 0.168"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Skew :"})," 0.093 | ",jsxRuntimeExports.jsx("strong",{children:"Prob (JB) :"})," 0.920 | ",jsxRuntimeExports.jsx("strong",{children:"Kurtosis :"})," 3.134"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Cond. No. :"})," 1.78e+04"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"secondpart",children:[jsxRuntimeExports.jsx("h2",{children:"Objectifs et Approche"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Prédiction du Taux d'Abstention"})," : Nous avons développé un modèle de régression linéaire afin d'estimer le taux d'abstention au premier tour. La technique de régularisation Lasso a été appliquée pour sélectionner les variables les plus pertinentes et réduire la multicolinéarité."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Prédiction des Scores des Candidats"})," : Un modèle similaire a été utilisé pour prédire les scores des candidats, en s’appuyant sur des facteurs socio-économiques comme le niveau de vie médian, le taux de pauvreté, le taux de chômage, et le niveau d'éducation de la population."]})]}),jsxRuntimeExports.jsx("h2",{children:"Résultats"}),jsxRuntimeExports.jsxs("p",{children:["Le modèle a obtenu un score de performance (",jsxRuntimeExports.jsx("em",{children:"R-squared"}),") impressionnant de 0,990 pour la prédiction du taux d’abstention, soulignant l'impact du niveau de vie, du taux de pauvreté et de l'éducation sur ce taux. Bien que des défis de multicolinéarité aient été relevés, l'analyse a révélé des tendances significatives entre les caractéristiques socio-économiques et les comportements électoraux."]})]})]})]})]})},DragDetector=({onDragDown:_e,pressDuration:_=500})=>{const tt=reactExports.useRef(!1),nt=reactExports.useRef(0),rt=reactExports.useRef(null),it=reactExports.useRef(navigator.maxTouchPoints>0),st=dt=>{it.current||(tt.current=!1,nt.current=dt.clientY,rt.current=setTimeout(()=>{tt.current=!0},_))},ot=dt=>{if(!tt.current)return;dt.clientY-nt.current>100&&(_e(),tt.current=!1,clearTimeout(rt.current))},at=()=>{tt.current=!1,rt.current&&clearTimeout(rt.current)},lt=dt=>{dt.touches.length===1&&(nt.current=dt.touches[0].clientY,rt.current=setTimeout(()=>{tt.current=!0,_e()},1e3))},ct=dt=>{if(!tt.current)return;dt.touches[0].clientY-nt.current>100&&(_e(),tt.current=!1,clearTimeout(rt.current))},ut=()=>{tt.current=!1,rt.current&&clearTimeout(rt.current)};return reactExports.useEffect(()=>(window.addEventListener("mousedown",st),window.addEventListener("mousemove",ot),window.addEventListener("mouseup",at),window.addEventListener("touchstart",lt),window.addEventListener("touchmove",ct),window.addEventListener("touchend",ut),()=>{window.removeEventListener("mousedown",st),window.removeEventListener("mousemove",ot),window.removeEventListener("mouseup",at),window.removeEventListener("touchstart",lt),window.removeEventListener("touchmove",ct),window.removeEventListener("touchend",ut)}),[]),jsxRuntimeExports.jsx("div",{style:{width:"100vw",height:"100vh",position:"absolute",top:0,left:0}})},Transition=({className:_e,onTransitionComplete:_,projects:tt})=>{const[nt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1),ot=/Mobi|Tablet|Android|iPad|iPhone/.test(navigator.userAgent);return reactExports.useEffect(()=>{if(_e!=null&&_e.includes("show")){const at=setTimeout(()=>{rt(!0)},100),lt=setTimeout(()=>{st(!0),_()},250);return()=>{clearTimeout(at),clearTimeout(lt)}}else rt(!1),st(!1)},[_e,_]),jsxRuntimeExports.jsxs("div",{className:`transition ${_e}`,children:[jsxRuntimeExports.jsx("div",{className:"transition-background"}),!ot&&nt&&jsxRuntimeExports.jsx(DropdownMenu$1,{projects:tt,className:it?"show":""}),ot&&nt&&jsxRuntimeExports.jsx(DropdownMenu,{projects:tt,className:it?"show":""})]})},App=()=>{const[_e,_]=reactExports.useState(()=>sessionStorage.getItem("showMenu")==="true"),[tt,nt]=reactExports.useState(()=>sessionStorage.getItem("hideContent")==="true"),[rt,it]=reactExports.useState(!1),st=document.createElement("video");st.src="./portfolio/projects/archeovision/temple.mp4",st.loop=!0,st.muted=!0;const ot=[{title:"Détection automatique de pigments par Segmentation Sémantique",image:st,sector:"Deep Learning",readMoreLink:"/portfolio/#/projects/archeovision"},{title:"Prédiction des votes durant les élections présidentielles",image:"./portfolio/projects/test.png",sector:"Machine Learning",readMoreLink:"/portfolio/#/projects/election"}],at=()=>{_(!0)},lt=()=>{},ct=()=>{_(!1)};return reactExports.useEffect(()=>{if(_e){sessionStorage.setItem("showMenu","true");const ut=setTimeout(()=>{nt(!0),sessionStorage.setItem("hideContent","true")},1e3);return()=>clearTimeout(ut)}else sessionStorage.setItem("showMenu","false"),nt(!1),sessionStorage.setItem("hideContent","false")},[_e]),reactExports.useEffect(()=>{const ut=dt=>{dt.key==="Escape"&&ct()};return window.addEventListener("keydown",ut),()=>{window.removeEventListener("keydown",ut)}},[_e]),jsxRuntimeExports.jsxs(HashRouter,{children:[jsxRuntimeExports.jsx(Header,{onClose:ct,showMenu:_e,isProjectViewRoute:rt}),jsxRuntimeExports.jsx(RoutesWrapper,{projects:ot,onDragDown:at,showMenu:_e,handleTransitionComplete:lt,hideContent:tt,setIsProjectViewRoute:it})]})},RoutesWrapper=({projects:_e,onDragDown:_,showMenu:tt,handleTransitionComplete:nt,hideContent:rt,setIsProjectViewRoute:it})=>{const st=useLocation(),[ot,at]=reactExports.useState(!1);reactExports.useEffect(()=>{st.pathname.startsWith("/projects")?(at(!0),it(!0),console.log("DragDetector deactivated")):(at(!1),it(!1),console.log(st.pathname)),(st.pathname.startsWith("/about")||st.pathname.startsWith("/curriculum_vitae")||st.pathname.startsWith("/contact"))&&(at(!0),it(!1),console.log("DragDetector deactivated"))},[st.pathname,it]);const lt=st.pathname.startsWith("/projects/");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!lt&&jsxRuntimeExports.jsx(Transition,{className:tt?"show":"",projects:_e,onTransitionComplete:nt}),!rt&&jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/projects",element:jsxRuntimeExports.jsx(Work,{projects:_e})}),jsxRuntimeExports.jsx(Route,{path:"/projects/:id",element:jsxRuntimeExports.jsx(ProjectView,{projects:_e})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{path:"/curriculum_vitae",element:jsxRuntimeExports.jsx(CV,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})})]}),rt&&lt&&jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/projects",element:jsxRuntimeExports.jsx(Work,{projects:_e})}),jsxRuntimeExports.jsx(Route,{path:"/projects/:id",element:jsxRuntimeExports.jsx(ProjectView,{projects:_e})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{path:"/curriculum_vitae",element:jsxRuntimeExports.jsx(CV,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})})]}),!ot&&jsxRuntimeExports.jsx(DragDetector,{onDragDown:_})]})};createRoot$1(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
